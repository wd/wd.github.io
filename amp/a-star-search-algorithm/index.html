<!doctype html><html><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>A* Search Algorithm - wd and cc</title><link rel=icon type=image/png href=/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="A* Search Algorithm"><meta property="og:description" content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基"><meta property="og:type" content="article"><meta property="og:url" content="https://wdicc.com/amp/a-star-search-algorithm/"><meta property="article:published_time" content="2018-11-24T14:48:04+08:00"><meta property="article:modified_time" content="2018-11-24T14:48:04+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="A* Search Algorithm"><meta name=twitter:description content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基"><link href="https://fonts.googleapis.com/css?family=Ubuntu:300,400,300italic,400italic|Raleway:200,300" rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://wdicc.com/css/normalize.css><link rel=stylesheet type=text/css media=screen href=https://wdicc.com/css/main.css><script src=https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js></script><script src=https://wdicc.com/js/main.js></script></head><body><div class="container wrapper post"><div class=header><base href=https://wdicc.com/><h1 class=site-title><a href=https://wdicc.com/>wd and cc</a></h1><div class=site-description><h2>&mdash; Happy every day</h2><nav class="nav social"><ul class=flat><a href=https://github.com/wd title=Github><i data-feather=github></i></a><a href=https://twitter.com/wd title=Twitter><i data-feather=twitter></i></a></ul></nav></div><nav class=nav><ul class=flat><li><a href=/>Home</a></li><li><a href=/post>All posts</a></li><li><a href=/tags>Tags</a></li><li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li><li><a href=/atom.xml>Subscribe</a></li></ul></nav></div><div class=post-header><h1 class=title>A* Search Algorithm</h1><div class=meta>Posted at &mdash; Nov 24, 2018</div></div><div class=post-header></div><div class=markdown><p>前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 <a href=https://en.wikipedia.org/wiki/A*_search_algorithm>A 星寻路算法</a>。</p><p>先贴几个文章：</p><ol><li><p>简单的讲解的文章例如 <a href=https://www.jianshu.com/p/65282bd32391>https://www.jianshu.com/p/65282bd32391</a></p></li><li><p>这个详细一点的 <a href=https://blog.csdn.net/DinnerHowe/article/details/79380317>https://blog.csdn.net/DinnerHowe/article/details/79380317</a></p></li></ol><p>我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看<a href=https://gist.github.com/wd/69469977bf76d9091ca01714eae08f37>这里</a>。</p><div class="src src-python"><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">100
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">101
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">102
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">103
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">104
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">105
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">106
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">107
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">108
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">109
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">110
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">111
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">112
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">113
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">114
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">115
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">116
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">117
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">118
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">119
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">120
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">121
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">122
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">123
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">124
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">125
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">126
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">127
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">128
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">129
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">130
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">131
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">132
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">133
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">134
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">135
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">136
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">137
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">138
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">139
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">140
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">141
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">142
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">143
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">144
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">145
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">146
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">147
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">148
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">149
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">150
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">151
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">152
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">153
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">154
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">155
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">156
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">157
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">158
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">159
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">160
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">161
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">162
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">163
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">164
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">165
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=color:#888>#!/usr/bin/python</span>
<span style=color:#080;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>sys</span>
<span style=color:#080;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>random</span>


RED <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;</span><span style=color:#666;background-color:#fff0f0;font-weight:700>\033</span><span style=background-color:#fff0f0>[31m&#39;</span>
GREEN <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;</span><span style=color:#666;background-color:#fff0f0;font-weight:700>\033</span><span style=background-color:#fff0f0>[32m&#39;</span>
GRAY <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;</span><span style=color:#666;background-color:#fff0f0;font-weight:700>\033</span><span style=background-color:#fff0f0>[35m&#39;</span>
NC <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;</span><span style=color:#666;background-color:#fff0f0;font-weight:700>\033</span><span style=background-color:#fff0f0>[0m&#39;</span>

<span style=color:#080;font-weight:700>class</span> <span style=color:#b06;font-weight:700>Point</span>(<span style=color:#007020>object</span>):
    x <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>0</span>
    y <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>0</span>
    close <span style=color:#333>=</span> False
    <span style=color:#007020>open</span> <span style=color:#333>=</span> False
    start <span style=color:#333>=</span> False
    end <span style=color:#333>=</span> False
    wall <span style=color:#333>=</span> False
    H <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>99</span>
    G <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>99</span>
    parent <span style=color:#333>=</span> None

    <span style=color:#080;font-weight:700>def</span> __init__(self, <span style=color:#333>**</span>kwargs):
        <span style=color:#080;font-weight:700>if</span> <span style=background-color:#fff0f0>&#39;x&#39;</span> <span style=color:#000;font-weight:700>in</span> kwargs:
            self<span style=color:#333>.</span>x <span style=color:#333>=</span> kwargs[<span style=background-color:#fff0f0>&#39;x&#39;</span>]

        <span style=color:#080;font-weight:700>if</span> <span style=background-color:#fff0f0>&#39;y&#39;</span> <span style=color:#000;font-weight:700>in</span> kwargs:
            self<span style=color:#333>.</span>y <span style=color:#333>=</span> kwargs[<span style=background-color:#fff0f0>&#39;y&#39;</span>]

        self<span style=color:#333>.</span>key <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;{}-{}&#39;</span><span style=color:#333>.</span>format(self<span style=color:#333>.</span>x, self<span style=color:#333>.</span>y)

    <span style=color:#080;font-weight:700>def</span> __str__(self):
        <span style=color:#080;font-weight:700>return</span> <span style=background-color:#fff0f0>&#39;{},H{:2},G{:2},F{:2},P{:3}&#39;</span><span style=color:#333>.</span>format(
                self<span style=color:#333>.</span>key,
                self<span style=color:#333>.</span>H <span style=color:#080;font-weight:700>if</span> self<span style=color:#333>.</span>H <span style=color:#333>!=</span> <span style=color:#00d;font-weight:700>99</span> <span style=color:#080;font-weight:700>else</span> <span style=background-color:#fff0f0>&#39;&#39;</span>,
                self<span style=color:#333>.</span>G <span style=color:#080;font-weight:700>if</span> self<span style=color:#333>.</span>G <span style=color:#333>!=</span> <span style=color:#00d;font-weight:700>99</span> <span style=color:#080;font-weight:700>else</span> <span style=background-color:#fff0f0>&#39;&#39;</span>,
                self<span style=color:#333>.</span>G <span style=color:#333>+</span> self<span style=color:#333>.</span>H <span style=color:#080;font-weight:700>if</span> self<span style=color:#333>.</span>G <span style=color:#333>!=</span> <span style=color:#00d;font-weight:700>99</span> <span style=color:#080;font-weight:700>else</span> <span style=background-color:#fff0f0>&#39;&#39;</span>,
                self<span style=color:#333>.</span>parent<span style=color:#333>.</span>key <span style=color:#080;font-weight:700>if</span> self<span style=color:#333>.</span>parent <span style=color:#080;font-weight:700>else</span> <span style=background-color:#fff0f0>&#39;&#39;</span>)

    <span style=color:#080;font-weight:700>def</span>  __lt__(self, other):
        <span style=color:#080;font-weight:700>return</span> self<span style=color:#333>.</span>x <span style=color:#333>&lt;</span> other<span style=color:#333>.</span>x <span style=color:#080;font-weight:700>if</span> self<span style=color:#333>.</span>y <span style=color:#333>==</span> other<span style=color:#333>.</span>y <span style=color:#080;font-weight:700>else</span> self<span style=color:#333>.</span>y <span style=color:#333>&lt;</span> other<span style=color:#333>.</span>y


<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>get_area</span>(width, height):
    area <span style=color:#333>=</span> {}
    <span style=color:#080;font-weight:700>for</span> i <span style=color:#000;font-weight:700>in</span> <span style=color:#007020>range</span>(width):
        <span style=color:#080;font-weight:700>for</span> j <span style=color:#000;font-weight:700>in</span> <span style=color:#007020>range</span>(height):
            point <span style=color:#333>=</span> Point(x<span style=color:#333>=</span>i, y<span style=color:#333>=</span>j)

            area[point<span style=color:#333>.</span>key] <span style=color:#333>=</span> point
    <span style=color:#080;font-weight:700>return</span> area

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>show_result</span>(area_hash):
    prev_y <span style=color:#333>=</span> <span style=color:#333>-</span><span style=color:#00d;font-weight:700>1</span>

    <span style=color:#080;font-weight:700>for</span> point <span style=color:#000;font-weight:700>in</span> <span style=color:#007020>sorted</span>(area_hash<span style=color:#333>.</span>values()):
        <span style=color:#080;font-weight:700>if</span> ( prev_y <span style=color:#333>!=</span> point<span style=color:#333>.</span>y ):
            <span style=color:#080;font-weight:700>if</span> (prev_y <span style=color:#333>!=</span> <span style=color:#333>-</span><span style=color:#00d;font-weight:700>1</span>):
                <span style=color:#080;font-weight:700>print</span>(<span style=background-color:#fff0f0>&#39;&#39;</span>)
            prev_y <span style=color:#333>=</span> point<span style=color:#333>.</span>y

        <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>start:
            format <span style=color:#333>=</span> RED <span style=color:#333>+</span> <span style=background-color:#fff0f0>&#39;S&#39;</span> <span style=color:#333>+</span> NC
        <span style=color:#080;font-weight:700>elif</span> point<span style=color:#333>.</span>end:
            format <span style=color:#333>=</span> RED <span style=color:#333>+</span> <span style=background-color:#fff0f0>&#39;E&#39;</span> <span style=color:#333>+</span> NC
        <span style=color:#080;font-weight:700>elif</span> point<span style=color:#333>.</span>wall:
            format <span style=color:#333>=</span> GRAY <span style=color:#333>+</span> <span style=background-color:#fff0f0>&#39;W&#39;</span> <span style=color:#333>+</span> NC
        <span style=color:#080;font-weight:700>elif</span> point<span style=color:#333>.</span>close:
            format <span style=color:#333>=</span> GREEN <span style=color:#333>+</span> <span style=background-color:#fff0f0>&#39;0&#39;</span> <span style=color:#333>+</span> NC
        <span style=color:#080;font-weight:700>else</span>:
            format <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39; &#39;</span>
        <span style=color:#080;font-weight:700>print</span>((format <span style=color:#333>+</span> <span style=background-color:#fff0f0>&#39;({})  &#39;</span>)<span style=color:#333>.</span>format(point), end<span style=color:#333>=</span><span style=background-color:#fff0f0>&#39;&#39;</span>)
    <span style=color:#080;font-weight:700>print</span>(<span style=background-color:#fff0f0>&#39;&#39;</span>)

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>set_preset</span>(area, start, end, wall):
    area[start]<span style=color:#333>.</span>start <span style=color:#333>=</span> True
    area[end]<span style=color:#333>.</span>end <span style=color:#333>=</span> True
    <span style=color:#080;font-weight:700>for</span> key <span style=color:#000;font-weight:700>in</span> wall:
        area[key]<span style=color:#333>.</span>wall <span style=color:#333>=</span> True
    <span style=color:#080;font-weight:700>return</span> area

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>is_valid_point</span>(point, width, height):
    <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>wall <span style=color:#000;font-weight:700>or</span> point<span style=color:#333>.</span>close:
        <span style=color:#080;font-weight:700>return</span> False

    <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>x <span style=color:#333>&lt;</span> <span style=color:#00d;font-weight:700>0</span> <span style=color:#000;font-weight:700>or</span> point<span style=color:#333>.</span>x <span style=color:#333>&gt;</span> width:
        <span style=color:#080;font-weight:700>return</span> False

    <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>y <span style=color:#333>&lt;</span> <span style=color:#00d;font-weight:700>0</span> <span style=color:#000;font-weight:700>or</span> point<span style=color:#333>.</span>y <span style=color:#333>&gt;</span> height:
        <span style=color:#080;font-weight:700>return</span> False

    <span style=color:#080;font-weight:700>return</span> True

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>get_around</span>(area, point, width, height):
    n <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;{}-{}&#39;</span><span style=color:#333>.</span>format(point<span style=color:#333>.</span>x, point<span style=color:#333>.</span>y <span style=color:#333>-</span> <span style=color:#00d;font-weight:700>1</span>)
    s <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;{}-{}&#39;</span><span style=color:#333>.</span>format(point<span style=color:#333>.</span>x, point<span style=color:#333>.</span>y <span style=color:#333>+</span> <span style=color:#00d;font-weight:700>1</span>)
    l <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;{}-{}&#39;</span><span style=color:#333>.</span>format(point<span style=color:#333>.</span>x <span style=color:#333>-</span> <span style=color:#00d;font-weight:700>1</span>, point<span style=color:#333>.</span>y)
    r <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;{}-{}&#39;</span><span style=color:#333>.</span>format(point<span style=color:#333>.</span>x <span style=color:#333>+</span> <span style=color:#00d;font-weight:700>1</span>, point<span style=color:#333>.</span>y)

    res <span style=color:#333>=</span> {}
    <span style=color:#080;font-weight:700>for</span> key <span style=color:#000;font-weight:700>in</span> [n, s, l, r]:
        <span style=color:#080;font-weight:700>if</span> key <span style=color:#000;font-weight:700>in</span> area <span style=color:#000;font-weight:700>and</span> is_valid_point(area[key], width, height):
            area[key]<span style=color:#333>.</span>parent <span style=color:#333>=</span> point
            area[key]<span style=color:#333>.</span>G <span style=color:#333>=</span> area[key]<span style=color:#333>.</span>G <span style=color:#080;font-weight:700>if</span> area[key]<span style=color:#333>.</span>G <span style=color:#333>!=</span> <span style=color:#00d;font-weight:700>99</span> <span style=color:#080;font-weight:700>else</span> (point<span style=color:#333>.</span>G <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>G <span style=color:#333>!=</span> <span style=color:#00d;font-weight:700>99</span> <span style=color:#080;font-weight:700>else</span> <span style=color:#00d;font-weight:700>0</span>) <span style=color:#333>+</span> <span style=color:#00d;font-weight:700>1</span>
            res[key] <span style=color:#333>=</span> area[key]

    <span style=color:#080;font-weight:700>return</span> res

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>get_H</span>(point, end_point):
    <span style=color:#080;font-weight:700>return</span> <span style=color:#007020>abs</span>(point<span style=color:#333>.</span>x <span style=color:#333>-</span> end_point<span style=color:#333>.</span>x) <span style=color:#333>+</span> <span style=color:#007020>abs</span>(point<span style=color:#333>.</span>y <span style=color:#333>-</span> end_point<span style=color:#333>.</span>y)

step <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>0</span>
opened <span style=color:#333>=</span> {}

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>go</span>(area, start, end, width, height):
    <span style=color:#080;font-weight:700>global</span> step, opened
    start_point <span style=color:#333>=</span> area[start]
    end_point<span style=color:#333>=</span> area[end]
    start_point<span style=color:#333>.</span>close <span style=color:#333>=</span> True

    <span style=color:#080;font-weight:700>if</span> start_point<span style=color:#333>.</span>key <span style=color:#000;font-weight:700>in</span> opened:
        <span style=color:#080;font-weight:700>del</span> opened[start_point<span style=color:#333>.</span>key]

    points <span style=color:#333>=</span> get_around(area, start_point, width, height)
    opened<span style=color:#333>.</span>update(points)

    rnd <span style=color:#333>=</span> random<span style=color:#333>.</span>choice(<span style=color:#007020>list</span>(opened))
    next_point <span style=color:#333>=</span> area[rnd]
    <span style=color:#080;font-weight:700>for</span> key, point <span style=color:#000;font-weight:700>in</span> opened<span style=color:#333>.</span>items():
        point<span style=color:#333>.</span>H <span style=color:#333>=</span> get_H(point, end_point)

        <span style=color:#080;font-weight:700>if</span> point<span style=color:#333>.</span>H <span style=color:#333>+</span> point<span style=color:#333>.</span>G <span style=color:#333>&lt;=</span> next_point<span style=color:#333>.</span>H <span style=color:#333>+</span> next_point<span style=color:#333>.</span>G:
            next_point <span style=color:#333>=</span> point

    <span style=color:#080;font-weight:700>print</span>(<span style=background-color:#fff0f0>&#39;step {}: {}&#39;</span><span style=color:#333>.</span>format(step, next_point))
    step <span style=color:#333>+=</span> <span style=color:#00d;font-weight:700>1</span>
    <span style=color:#080;font-weight:700>if</span> step <span style=color:#333>&gt;=</span> <span style=color:#00d;font-weight:700>3</span>:
        <span style=color:#080;font-weight:700>pass</span>

    <span style=color:#080;font-weight:700>if</span> next_point <span style=color:#000;font-weight:700>and</span> next_point<span style=color:#333>.</span>key <span style=color:#333>!=</span> end:
        go(area, next_point<span style=color:#333>.</span>key, end, width, height)

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>get_result</span>(area, start, end):
    <span style=color:#080;font-weight:700>print</span>(<span style=background-color:#fff0f0>&#39;{}{}{} &lt;- &#39;</span><span style=color:#333>.</span>format(RED, area[end]<span style=color:#333>.</span>key, NC), end<span style=color:#333>=</span><span style=background-color:#fff0f0>&#39;&#39;</span>)
    parent <span style=color:#333>=</span> area[end]<span style=color:#333>.</span>parent
    <span style=color:#080;font-weight:700>if</span>(parent<span style=color:#333>.</span>key <span style=color:#333>!=</span> start):
        get_result(area, start, parent<span style=color:#333>.</span>key)
    <span style=color:#080;font-weight:700>else</span>:
        <span style=color:#080;font-weight:700>print</span>(<span style=background-color:#fff0f0>&#39;{}{}{}&#39;</span><span style=color:#333>.</span>format(RED, area[start]<span style=color:#333>.</span>key, NC), end<span style=color:#333>=</span><span style=background-color:#fff0f0>&#39;&#39;</span>)

<span style=color:#080;font-weight:700>def</span> <span style=color:#06b;font-weight:700>main</span>():
    width <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>10</span>
    height <span style=color:#333>=</span> <span style=color:#00d;font-weight:700>10</span>
    start <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;1-3&#39;</span>
    end <span style=color:#333>=</span> <span style=background-color:#fff0f0>&#39;8-4&#39;</span>
    wall <span style=color:#333>=</span> [<span style=background-color:#fff0f0>&#39;2-2&#39;</span>, <span style=background-color:#fff0f0>&#39;3-2&#39;</span>, <span style=background-color:#fff0f0>&#39;3-3&#39;</span>, <span style=background-color:#fff0f0>&#39;3-4&#39;</span>, <span style=background-color:#fff0f0>&#39;3-5&#39;</span>, <span style=background-color:#fff0f0>&#39;3-6&#39;</span>, <span style=background-color:#fff0f0>&#39;5-4&#39;</span>, <span style=background-color:#fff0f0>&#39;2-6&#39;</span>, <span style=background-color:#fff0f0>&#39;1-6&#39;</span>]

    area <span style=color:#333>=</span> get_area(width, height)
    area <span style=color:#333>=</span> set_preset(area, start, end, wall)
    go(area, start, end, width,  height)
    show_result(area)
    get_result(area, start, end)

<span style=color:#080;font-weight:700>if</span> __name__ <span style=color:#333>==</span> <span style=background-color:#fff0f0>&#39;__main__&#39;</span>:
    main()</code></pre></td></tr></table></div></div></div><p>这个算法通过调整 G 和 H 的计算逻辑，可以平衡寻路速度和路径是否最短。另外，对于 open 列表的维护，也可以使用一些适合自己的数据结构来得到比较快速的查找。上面第二个帖子里面比较详细的列了一些改进算法的思路。</p></div><div class=post-tags><nav class="nav tags"><ul class=flat><li><a href=/tags/algorithm>algorithm</a></li><li><a href=/tags/a>A*</a></li></ul></nav></div><div id=disqus_thread></div><script type=text/javascript>(function(){if(window.location.hostname=="localhost")
return;var dsq=document.createElement('script');dsq.type='text/javascript';dsq.async=true;var disqus_shortname='wdicc';dsq.src='//'+disqus_shortname+'.disqus.com/embed.js';(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(dsq);})();</script><noscript>Please enable JavaScript to view the <a href=http://disqus.com/?ref_noscript>comments powered by
Disqus.</a></noscript><a href=http://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div><div class="footer wrapper"><nav class=nav><div>Copyright © 2020 wd. All Rights Reserved | <a href=https://github.com/vividvilla/ezhil>Ezhil theme</a> | Built with <a href=https://gohugo.io>Hugo</a></div></nav></div><script>feather.replace()</script></body></html>