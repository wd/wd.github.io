<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,viewport-fit=cover,initial-scale=1"><title>Debuging Django | wd and cc</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><header><nav><ul><li class=pull-left><a href=https://wdicc.com/>/home/wd and cc</a></li><li class=pull-left><a href=/tags/>~/tags</a></li><li class=pull-left><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">~/search</a></li><li class=pull-right><a href=/atom.xml>~/subscribe</a></li></ul></nav></header></head><body><br><div class=article-meta><h1><span class=title>Debuging Django</span></h1><h2 class=date>2019/04/29</h2><p class=terms>Tags: <a href=/tags/pytyhon>pytyhon</a> <a href=/tags/django>django</a> <a href=/tags/debug>debug</a></p></div><main><p>起初 hackernews 看到一个文章 <a href="https://news.ycombinator.com/item?id=19717786">PySnooper: Never use print for debugging again</a>，觉得挺有意思的，结果把 hackernews 的讨论看了一下发现有意思东西更多一点，总结一下。</p><ol><li><p><a href=https://github.com/cool-RR/pysnooper>PySnooper</a>: Never use print for debugging again，只需要给函数加一个装饰器，就可以把函数执行的每一步的结果都打印出来。</p></li><li><p><a href=https://django-extensions.readthedocs.io/en/latest/runserver_plus.html>django-extensions</a> 的 runserver-plus 配合 <a href=https://werkzeug.palletsprojects.com/en/0.15.x/debug/#using-the-debugger>Werkzeug</a> 可以实现在遇到异常的时候，支持在 web 上面调试代码，打印异常的时候的上下文内容什么的。</p></li><li><p>Python 自己的 <a href=https://docs.python.org/3/library/functions.html#breakpoint>breakpoint</a> 函数，执行到的时候默认会进入 pdb.set_trace() 状态方便你进行上下文调试。</p></li><li><p><a href=https://github.com/gruns/icecream>icecream</a> 提供了一个方便的 ic 函数，可以无感的加入到你的代码里面，不影响你的代码的执行结果，但是会打印传给它的参数和执行结果。</p></li><li><p><a href=https://github.com/robdmc/behold>Behold</a>: A debugging tool for large Python projects，可以替代你写冗长的打印命令。不过感觉它自己的语法似乎也并不方便。。。</p></li><li><p>VS Code 提供的 <a href=https://code.visualstudio.com/docs/editor/debugging#_logpoints>Logpoints</a> 和 Visual Studio 提供的 <a href="https://docs.microsoft.com/en-us/visualstudio/debugger/using-breakpoints?view=vs-2019#BKMK_set_a_data_breakpoint_managed">Break When Value Changes</a>。</p></li><li><p><a href=https://github.com/cknd/stackprinter>stackprinter</a> 可以让你的堆栈打印更友好，打印堆栈的时候还可以输出上下文的取值。</p></li><li><p>pdb, epdb，ipdb, 应该都是类似的东西，其中 pdb 是自带的。通过给代码增加 import ipdb ipdb.set_trace() 调试。</p></li><li><p><a href=https://github.com/tylerwince/pydbg>pydbg</a> 替代 print 的。</p></li></ol><p>另外<a href=https://stribny.name/blog/2019/06/debugging-python-programs>一篇文章</a></p><ol><li><p>可以使用 f-string 调试</p></li></ol><div class="src src-python"><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python>        <span style=color:#080;font-weight:700>print</span>(f<span style=background-color:#fff0f0>&#34;i={i}, processed_word={processed_word}&#34;</span>) <span style=color:#888># python 3.6</span>
        <span style=color:#080;font-weight:700>print</span>(f<span style=background-color:#fff0f0>&#34;{i=}, {processed_word=}&#34;</span>) <span style=color:#888># python 3.8</span></code></pre></td></tr></table></div></div></div><ol><li><p>PySnooper: 感觉有点太重了，一般也不是总是需要打印这些。</p></li><li><p>使用 logging： 这个和 f-string 感觉没啥大差别。</p></li><li><p>使用 pdb 的 breakpoint() 进入 pdb 交互。</p></li><li><p>使用 vscode。</p></li><li><p>使用 stackprinter。</p></li></ol></main><section id=comment><h2 class=title>Comments</h2><div id=disqus_thread aria-live=polite><noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></section><script type=text/javascript>var disqus_config=function(){this.page.url='';this.page.identifier='';};(function(){var d=document,s=d.createElement('script');s.src='//wdicc.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><footer style=clear:both><hr>Theme from <a href=https://github.com/wd/hugo-classic>hugo-classic</a> fork from <a href=https://github.com/goodroot/hugo-classic>Github</a></footer></body></html>