<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>揭开正则表达式语法的神秘面纱zz - wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="作者： BUILDER.COM
Wednesday, October 23 2002 10:36 AM 

正则表达式(REs)通常被错误地认为是只有少数人理解的一种神秘语言。在表面上它们确实看起来杂乱无章，如果你不知道它的语法，那么它的代码在你眼里只是一堆文字垃圾而已。实际上，正则表达式是非常简单并且可以被理解。读完这篇文章后，你将会通晓正则表达式的通用语法。

&lt;br&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;支持多种平台正则表达式最早是由数学家Stephen Kleene于1956年提出，他是在对自然语言的递增研究成果的基础上提出来的。具有完整语法的正则表达式使用在字符的格式匹配方面上，后来被应用到熔融信息技术领域。自从那时起，正则表达式经过几个时期的发展，现在的标准已经被ISO(国际标准组织)批准和被Open Group组织认定。

正则表达式并非一门专用语言，但它可用于在一个文件或字符里查找和替代文本的一种标准。它具有两种标准：基本的正则表达式(BRE)，扩展的正则表达式(ERE)。ERE包括BRE功能和另外其它的概念。

许多程序中都使用了正则表达式，包括xsh,egrep,sed,vi以及在UNIX平台下的程序。它们可以被很多语言采纳，如HTML 和XML，这些采纳通常只是整个标准的一个子集。

比你想象的还要普通随着正则表达式移植到交叉平台的程序语言的发展，这的功能也日益完整，使用也逐渐广泛。网络上的搜索引擎使用它，e-mail程序也使用它，即使你不是一个UNIX程序员，你也可以使用规则语言来简化你的程序而缩短你的开发时间。

正则表达式101很多正则表达式的语法看起来很相似，这是因为你以前你没有研究过它们。通配符是RE的一个结构类型，即重复操作。让我们先看一看ERE标准的最通用的基本语法类型。为了能够提供具有特定用途的范例，我将使用几个不同的程序。

字符匹配


正则表达式的关键之处在于确定你要搜索匹配的东西，如果没有这一概念，Res将毫无用处。

每一个表达式都包含需要查找的指令，如表A所示。

Table A: Character-matching regular expressions
 
操作
 解释
 例子
 结果
 
.
 Match any one character
 grep .ord sample.txt
 Will match “ford”, “lord”, “2ord”, etc. in the file sample.txt.
 
[ ]
 Match any one character listed between the brackets
 grep [cng]ord sample.txt
 Will match only “cord”, “nord”, and “gord”
 
[^ ]
 Match any one character not listed between the brackets
 grep [^cn]ord sample.txt
 Will match “lord”, “2ord”, etc. but not “cord” or “nord”
 

 
 grep [a-zA-Z]ord sample.txt
 Will match “aord”, “bord”, “Aord”, “Bord”, etc.
 

 
 grep [^0-9]ord sample.txt
 Will match “Aord”, “aord”, etc. but not “2ord”, etc.
 


重复操作符重复操作符，或数量词，都描述了查找一个特定字符的次数。它们常被用于字符匹配语法以查找多行的字符，可参见表B。

Table B: Regular expression repetition operators
 
操作
 解释
 例子
 结果
 
?
 Match any character one time, if it exists
 egrep “?erd” sample.txt
 Will match “berd”, “herd”, etc. and “erd”
 
*
 Match declared element multiple times, if it exists
 egrep “n.*rd” sample.txt
 Will match “nerd”, “nrd”, “neard”, etc.
 
+
 Match declared element one or more times
 egrep “[n]+erd” sample.txt
 Will match “nerd”, “nnerd”, etc., but not “erd”
 
{n}
 Match declared element exactly n times
 egrep “[a-z]{2}erd” sample.txt
 Will match “cherd”, “blerd”, etc. but not “nerd”, “erd”, “buzzerd”, etc.
 
{n,}
 Match declared element at least n times
 egrep “.{2,}erd” sample.txt
 Will match “cherd” and “buzzerd”, but not “nerd”
 
{n,N}
 Match declared element at least n times, but not more than N times
 egrep “n[e]{1,2}rd” sample.txt
 Will match “nerd” and “neerd”
 


锚

锚是指它所要匹配的格式，如图C所示。使用它能方便你查找通用字符的合并。例如，我用vi行编辑器命令:s来代表substitute，这一命令的基本语法是：

s/pattern_to_match/pattern_to_substitute/
 

Table C: Regular expression anchors
 
操作
 解释
 例子
 结果
 
^
 Match at the beginning of a line
 s/^/blah /
 Inserts “blah “ at the beginning of the line
 
$
 Match at the end of a line
 s/$/ blah/
 Inserts “ blah” at the end of the line
 
&lt;
 Match at the beginning of a word
 s/
 Inserts “blah” at the beginning of the word
 

 
 egrep “
 Matches “blahfield”, etc.
 
&gt;
 Match at the end of a word
 s/&gt;/blah/
 Inserts “blah” at the end of the word
 

 
 egrep “&gt;blah” sample.txt
 Matches “soupblah”, etc.
 
b
 Match at the beginning or end of a word
 egrep “bblah” sample.txt
 Matches “blahcake” and “countblah”
 
B
 Match in the middle of a word
 egrep “Bblah” sample.txt
 Matches “sublahper”, etc.
 




间隔
Res中的另一可便之处是间隔(或插入)符号。实际上，这一符号相当于一个OR语句并代表|符号。下面的语句返回文件sample.txt中的“nerd” 和 “merd”的句柄：

egrep “(n|m)erd” sample.txt


间隔功能非常强大，特别是当你寻找文件不同拼写的时候，但你可以在下面的例子得到相同的结果：

egrep “[nm]erd” sample.txt

当你使用间隔功能与Res的高级特性连接在一起时，它的真正用处更能体现出来。

一些保留字符Res的最后一个最重要特性是保留字符(也称特定字符)。例如，如果你想要查找“ne*rd”和“ni*rd”的字符，格式匹配语句“n[ei]*rd”与“neeeeerd” 和 “nieieierd”相符合，但并不是你要查找的字符。因为‘*’(星号)是个保留字符，你必须用一个反斜线符号来替代它，即：“n[ei]*rd”。其它的保留字符包括：

^ (carat) 
. (period) 
[ (left bracket} 
$ (dollar sign) 
( (left parenthesis) 
) (right parenthesis) 
| (pipe) 
* (asterisk) 
+ (plus symbol) 
? (question mark) 
{ (left curly bracket, or left brace) 
backslash 
一旦你把以上这些字符包括在你的字符搜索中，毫无疑问Res变得非常的难读。比如说以下的PHP中的eregi搜索引擎代码就很难读了。

eregi(&quot;^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*$&quot;,$sendto)

你可以看到，程序的意图很难把握。但如果你抛开保留字符，你常常会错误地理解代码的意思。

总结在本文中，我们揭开了正则表达式的神秘面纱，并列出了ERE标准的通用语法。如果你想阅览Open Group组织的规则的完整描述，你可以参见：Regular Expressions，欢迎你在其中的讨论区发表你的问题或观点。

引用网址：http://www.zdnet.com.cn/developer/tech/story/0,2000081602,39077620-1,00.htm
"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">揭开正则表达式语法的神秘面纱zz</h2>
	<div class="entry-content">作者： BUILDER.COM
Wednesday, October 23 2002 10:36 AM 

正则表达式(REs)通常被错误地认为是只有少数人理解的一种神秘语言。在表面上它们确实看起来杂乱无章，如果你不知道它的语法，那么它的代码在你眼里只是一堆文字垃圾而已。实际上，正则表达式是非常简单并且可以被理解。读完这篇文章后，你将会通晓正则表达式的通用语法。

<br><a id="more"></a>支持多种平台正则表达式最早是由数学家Stephen Kleene于1956年提出，他是在对自然语言的递增研究成果的基础上提出来的。具有完整语法的正则表达式使用在字符的格式匹配方面上，后来被应用到熔融信息技术领域。自从那时起，正则表达式经过几个时期的发展，现在的标准已经被ISO(国际标准组织)批准和被Open Group组织认定。

正则表达式并非一门专用语言，但它可用于在一个文件或字符里查找和替代文本的一种标准。它具有两种标准：基本的正则表达式(BRE)，扩展的正则表达式(ERE)。ERE包括BRE功能和另外其它的概念。

许多程序中都使用了正则表达式，包括xsh,egrep,sed,vi以及在UNIX平台下的程序。它们可以被很多语言采纳，如HTML 和XML，这些采纳通常只是整个标准的一个子集。

比你想象的还要普通随着正则表达式移植到交叉平台的程序语言的发展，这的功能也日益完整，使用也逐渐广泛。网络上的搜索引擎使用它，e-mail程序也使用它，即使你不是一个UNIX程序员，你也可以使用规则语言来简化你的程序而缩短你的开发时间。

正则表达式101很多正则表达式的语法看起来很相似，这是因为你以前你没有研究过它们。通配符是RE的一个结构类型，即重复操作。让我们先看一看ERE标准的最通用的基本语法类型。为了能够提供具有特定用途的范例，我将使用几个不同的程序。

字符匹配


正则表达式的关键之处在于确定你要搜索匹配的东西，如果没有这一概念，Res将毫无用处。

每一个表达式都包含需要查找的指令，如表A所示。

Table A: Character-matching regular expressions
 
操作
 解释
 例子
 结果
 
.
 Match any one character
 grep .ord sample.txt
 Will match “ford”, “lord”, “2ord”, etc. in the file sample.txt.
 
[ ]
 Match any one character listed between the brackets
 grep [cng]ord sample.txt
 Will match only “cord”, “nord”, and “gord”
 
[^ ]
 Match any one character not listed between the brackets
 grep [^cn]ord sample.txt
 Will match “lord”, “2ord”, etc. but not “cord” or “nord”
 

 
 grep [a-zA-Z]ord sample.txt
 Will match “aord”, “bord”, “Aord”, “Bord”, etc.
 

 
 grep [^0-9]ord sample.txt
 Will match “Aord”, “aord”, etc. but not “2ord”, etc.
 


重复操作符重复操作符，或数量词，都描述了查找一个特定字符的次数。它们常被用于字符匹配语法以查找多行的字符，可参见表B。

Table B: Regular expression repetition operators
 
操作
 解释
 例子
 结果
 
?
 Match any character one time, if it exists
 egrep “?erd” sample.txt
 Will match “berd”, “herd”, etc. and “erd”
 
*
 Match declared element multiple times, if it exists
 egrep “n.*rd” sample.txt
 Will match “nerd”, “nrd”, “neard”, etc.
 
+
 Match declared element one or more times
 egrep “[n]+erd” sample.txt
 Will match “nerd”, “nnerd”, etc., but not “erd”
 
{n}
 Match declared element exactly n times
 egrep “[a-z]{2}erd” sample.txt
 Will match “cherd”, “blerd”, etc. but not “nerd”, “erd”, “buzzerd”, etc.
 
{n,}
 Match declared element at least n times
 egrep “.{2,}erd” sample.txt
 Will match “cherd” and “buzzerd”, but not “nerd”
 
{n,N}
 Match declared element at least n times, but not more than N times
 egrep “n[e]{1,2}rd” sample.txt
 Will match “nerd” and “neerd”
 


锚

锚是指它所要匹配的格式，如图C所示。使用它能方便你查找通用字符的合并。例如，我用vi行编辑器命令:s来代表substitute，这一命令的基本语法是：

s/pattern_to_match/pattern_to_substitute/
 

Table C: Regular expression anchors
 
操作
 解释
 例子
 结果
 
^
 Match at the beginning of a line
 s/^/blah /
 Inserts “blah “ at the beginning of the line
 
$
 Match at the end of a line
 s/$/ blah/
 Inserts “ blah” at the end of the line
 
<
 Match at the beginning of a word
 s/
 Inserts “blah” at the beginning of the word
 

 
 egrep “
 Matches “blahfield”, etc.
 
>
 Match at the end of a word
 s/>/blah/
 Inserts “blah” at the end of the word
 

 
 egrep “>blah” sample.txt
 Matches “soupblah”, etc.
 
b
 Match at the beginning or end of a word
 egrep “bblah” sample.txt
 Matches “blahcake” and “countblah”
 
B
 Match in the middle of a word
 egrep “Bblah” sample.txt
 Matches “sublahper”, etc.
 




间隔
Res中的另一可便之处是间隔(或插入)符号。实际上，这一符号相当于一个OR语句并代表|符号。下面的语句返回文件sample.txt中的“nerd” 和 “merd”的句柄：

egrep “(n|m)erd” sample.txt


间隔功能非常强大，特别是当你寻找文件不同拼写的时候，但你可以在下面的例子得到相同的结果：

egrep “[nm]erd” sample.txt

当你使用间隔功能与Res的高级特性连接在一起时，它的真正用处更能体现出来。

一些保留字符Res的最后一个最重要特性是保留字符(也称特定字符)。例如，如果你想要查找“ne*rd”和“ni*rd”的字符，格式匹配语句“n[ei]*rd”与“neeeeerd” 和 “nieieierd”相符合，但并不是你要查找的字符。因为‘*’(星号)是个保留字符，你必须用一个反斜线符号来替代它，即：“n[ei]*rd”。其它的保留字符包括：

^ (carat) 
. (period) 
[ (left bracket} 
$ (dollar sign) 
( (left parenthesis) 
) (right parenthesis) 
| (pipe) 
* (asterisk) 
+ (plus symbol) 
? (question mark) 
{ (left curly bracket, or left brace) 
backslash 
一旦你把以上这些字符包括在你的字符搜索中，毫无疑问Res变得非常的难读。比如说以下的PHP中的eregi搜索引擎代码就很难读了。

eregi("^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*$",$sendto)

你可以看到，程序的意图很难把握。但如果你抛开保留字符，你常常会错误地理解代码的意思。

总结在本文中，我们揭开了正则表达式的神秘面纱，并列出了ERE标准的通用语法。如果你想阅览Open Group组织的规则的完整描述，你可以参见：Regular Expressions，欢迎你在其中的讨论区发表你的问题或观点。

引用网址：http://www.zdnet.com.cn/developer/tech/story/0,2000081602,39077620-1,00.htm
</div>

<div class="meta">
	
		<span class="comments"><a href="the-secret-of-regula-expressions/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=null"></script>
</div>





    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'the-secret-of-regula-expressions/';
            this.page.identifier = 'the-secret-of-regula-expressions/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//' + wdicc + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    


<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
