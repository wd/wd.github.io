<!doctype html><html lang=en><head><title>Run ssserver on VPS &ndash; wd and cc</title>
<meta name=description content="Good good study, day day up!"><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=UTF-8><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin=anonymous referrerpolicy=no-referrer><link rel=stylesheet href=https://wdicc.com/css/palettes/base16-dark.css><link rel=stylesheet href=https://wdicc.com/css/risotto.css><link rel=stylesheet href=https://wdicc.com/css/custom.css><link rel=icon href=https://wdicc.com/favicon.ico></head><body><div class=page><header class=page__header><nav class="page__nav main-nav"><ul><h1 class=page__logo><a href=https://wdicc.com/ class=page__logo-inner>wd and cc</a></h1><li class=main-nav__item><a class=nav-main-item href=https://wdicc.com/posts/ title>Posts</a></li><li class=main-nav__item><a class=nav-main-item href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&amp;q=" title>Search</a></li><li class=main-nav__item><a class=nav-main-item href=https://wdicc.com/atom.xml title>subscribe</a></li></ul></nav></header><section class=page__body><header class=content__header><h1>Run ssserver on VPS</h1></header><div class=content__body><p>VPS 上面好早以前用过 docker 跑了一个 container 运行了一个 ssserver, 是从 debian 基本系统创建, 然后手动安装各种软件弄好的. 最近朋友升级了 docker, 那个工作有点问题了,就重新搞了一下, 发现现在好方便.</p><p>我用的是这里提供的 dockerfile <a href=https://github.com/EasyPi/docker-shadowsocks-libev,>https://github.com/EasyPi/docker-shadowsocks-libev,</a> 他的例子里面使用了 <code class=verbatim>docker-compose</code> 来创建, 发现很简单, 不过遇到了一个问题, 说一下解决办法.</p><p>这个 docker 本地监听的端口是固定的 8388 不能修改, 例如 docker-compose.yml 里面</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>server:
</span></span><span style=display:flex><span>  image: easypi/shadowsocks-libev
</span></span><span style=display:flex><span>  container_name: wd-ss
</span></span><span style=display:flex><span>  ports:
</span></span><span style=display:flex><span>    - &#34;HOST_PORT:8388/tcp&#34;
</span></span><span style=display:flex><span>    - &#34;HOST_PORT:8388/udp&#34;
</span></span><span style=display:flex><span>  environment:
</span></span><span style=display:flex><span>    - METHOD=aes-256-cfb
</span></span><span style=display:flex><span>    - PASSWORD=5ouMnqPyzseL
</span></span><span style=display:flex><span>  restart: always</span></span></code></pre></div></div><p>需要配置的是 <code class=verbatim>HOST_PORT</code> <code class=verbatim>METHOD</code> <code class=verbatim>PASSWORD</code> 这三个变量, 然后我还指定了 <code class=verbatim>container_name</code> 方便以后的操作, 不指定会自动产生一个.</p><p>启动服务之后,可以使用 <code class=verbatim>docker logs wd-ss</code> 来看 log, 类似于下面, 这个 docker 启用了 udp relay 和 tcp fast open, 差不多也就够了.</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span> 2017-06-09 03:13:17 INFO: using tcp fast open
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: UDP relay enabled
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: initializing ciphers... aes-256-cfb
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: using nameserver: 8.8.8.8
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: tcp server listening at 0.0.0.0:8388
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: udp server listening at 0.0.0.0:8388
</span></span><span style=display:flex><span> 2017-06-09 03:13:17 INFO: running from root user</span></span></code></pre></div></div><p>如果想要开启更多选项, 可以在 compose 文件里面使用 command 自定义启动命令</p><div class="src src-text"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>  command:
</span></span><span style=display:flex><span>    ss-server -s 0.0.0.0
</span></span><span style=display:flex><span>              -p 8338
</span></span><span style=display:flex><span>              -k 5C4D5403-31C9
</span></span><span style=display:flex><span>              -m aes-256-cfb
</span></span><span style=display:flex><span>              -t 30
</span></span><span style=display:flex><span>              --fast-open
</span></span><span style=display:flex><span>              -u
</span></span><span style=display:flex><span>              -a nobody</span></span></code></pre></div></div><p>自己实验过程中, 如果可以随时删除自己的 container 重建, 将来 ss 升级的话, 只需要把 image 更新一下,然后删除再新建一下 container 就好了.用起来还是相当简单方便的.</p></div><footer class=content__footer></footer></section><section class=page__aside><div class=aside__about><div class=aside__about><img class=about__logo src=https://wdicc.com/favicon.ico alt=Logo><h1 class=about__title>Happy every day!</h1><p class=about__description>Good good study, day day up!</p></div><ul class=aside__social-links><li><a href=https://github.com/wd rel=me aria-label=GitHub title=GitHub><i class="fa-brands fa-github" aria-hidden=true></i></a>&nbsp;</li></ul></div><hr><div class=aside__content><p>2017-06-09</p></div></section><footer class=page__footer><p><br><span class=active>$ echo $LANG<br><b>zh_CN</b></span><br></p><br><br><p class=copyright>wd © 2025</p><p class=advertisement>Powered by <a href=https://gohugo.io/>hugo</a> and <a href=https://github.com/joeroe/risotto>risotto</a>.</p></footer></div></body></html>