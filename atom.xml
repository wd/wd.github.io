<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>wd and cc</title>
  <subtitle>happy everyday</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://wdicc.com/"/>
  <updated>2016-12-13T11:09:01.000Z</updated>
  <id>http://wdicc.com/</id>
  
  <author>
    <name>wd</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Release some staff at github</title>
    <link href="http://wdicc.com/release-some-staff-at-github/"/>
    <id>http://wdicc.com/release-some-staff-at-github/</id>
    <published>2016-12-13T09:00:31.000Z</published>
    <updated>2016-12-13T11:09:01.000Z</updated>
    
    <content type="html"><![CDATA[<p>把 blog 用到的模板整理了一下，放到了 <a href="https://github.com/wd/hexo-fabric" target="_blank" rel="external">https://github.com/wd/hexo-fabric</a> ，这个最开始是 fork 别人的代码改的，后来发现原来那个人已经不用了，就整理一下，增加了一个 tag 支持，修改了一下字体和背景色，还有代码颜色等，都是一些小修改。同时也提交到了官方的 theme 库，不过 pull request 还没有通过。。</p>
<p>另外，还把之前写的一个给 ngx-lua 用的一个使用 mcrypt 加密解密的库 <a href="https://github.com/wd/lua-resty-mcrypt" target="_blank" rel="external">https://github.com/wd/lua-resty-mcrypt</a> ，整理出来单独弄了一个模块。代码其实非常简单，这个也能看出来 ngx_lua 里面使用 ffi 调用 C 模块开发多舒服，不过因为 C 知识有限，可能还是会有一些问题，不过至少自己测试是 ok 的，也在线上跑了好久，只能遇到有问题的再说了。这个同时也提交到了春哥的 opm 仓库，那个倒没有审核，提交就被索引了，使用的话应该可以用 opm 命令直接安装。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;把 blog 用到的模板整理了一下，放到了 &lt;a href=&quot;https://github.com/wd/hexo-fabric&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/wd/hexo-fabric&lt;/a&gt; ，这
    
    </summary>
    
    
      <category term="lua" scheme="http://wdicc.com/tags/lua/"/>
    
      <category term="hexo" scheme="http://wdicc.com/tags/hexo/"/>
    
      <category term="ngx_lua" scheme="http://wdicc.com/tags/ngx-lua/"/>
    
      <category term="mcrypt" scheme="http://wdicc.com/tags/mcrypt/"/>
    
  </entry>
  
  <entry>
    <title>Bloat and Query Speed in PostgreSQL</title>
    <link href="http://wdicc.com/Bloat-and-Query-Speed-in-PostgreSQL/"/>
    <id>http://wdicc.com/Bloat-and-Query-Speed-in-PostgreSQL/</id>
    <published>2016-12-09T04:12:21.000Z</published>
    <updated>2016-12-09T09:08:53.000Z</updated>
    
    <content type="html"><![CDATA[<p>内容反义自 <a href="https://www.citusdata.com/blog/2016/11/04/autovacuum-not-the-enemy/" target="_blank" rel="external">https://www.citusdata.com/blog/2016/11/04/autovacuum-not-the-enemy/</a></p>
<p>pg 的 mvcc 会导致表索引的 bloat 就不多说了。说一下不合理处理这种 bloat 害处是啥。</p>
<p>首先肯定是会浪费空间。然后也会影响查询速度。表和索引存储的时候都是 8kB 一个 page，如果一个查询一些行，数据库会加载这些 pages 到内存。一个 page 里面的 dead rows 越多，在加载的时候就越浪费 I/O。例如全表扫描会加载所有的 dead rows。</p>
<p>Bloat 还会导致热门的查询会一下塞满内存。会导致相同的 live rows 需要更多 pages。This causes swapping and makes certain query plans and algorithms ineligible for execution.</p>
<p>还有一个影响是，pg 的系统表也会有可能 bloat，因为他们也是表。导致这个的一种情况是频繁的创建和删除临时表。这个进一步会导致一些管理命令执行变慢，甚至比如 <code>\d</code> 这种命令。</p>
<p>索引也有可能会 bloat。索引是 tuple 标识和数据之间的一个映射。这些标识指向的是某个 page 里面的 offset。每个 tuple 都是一个独立的对象，需要自己的索引条目。更新一行的时候总是会创建这行的新的索引条目。</p>
<p>索引的 bloat 的影响比 table 小一点。索引里面指向 dead tuple 的可以直接标记为 dead. 这会使得索引膨胀，但是不会导致不必要的堆查找。同时更新堆中的 tuples 不影响已经索引的列，使用一种叫做 HOT 的技术来把指向 dead tuples 的指针指向新的。这允许查询可以通过这些指针复用旧的索引条目。(Also updates to tuples in the heap that do not affect the indexed column(s) use a technique called HOT to provide pointers from the dead tuple to its replacement. This allows queries to reuses old index entries by following pointers across the heap.) (没太看明白.)</p>
<p>索引 bloat 的问题还是应该需要重视。例如 btree 索引是由二叉树组成()。叶子节点包含值和 tuple 标识（应该是指在 data file 的 offset）。随机更新因为会重用 page，所以可以保持 btree 维持一个良好的形状。但是，如果是单侧更新，会导致大量的空页。</p>
<p>The size considerations of index bloat are still significant. For instance a btree index consists of binary tree of pages (the same sized pages as you find holding tuples in the heap). The leaf node pages contain values and tuple identifiers. Uniform random table updates tend to keep a btree index in pretty good shape because it can reuse pages. However lopsided inserts/updates affecting one side of the tree while preserving a few straggling entries can lead to lots of mostly empty pages.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;内容反义自 &lt;a href=&quot;https://www.citusdata.com/blog/2016/11/04/autovacuum-not-the-enemy/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.citusdata.
    
    </summary>
    
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>Full page write in PostgreSQL</title>
    <link href="http://wdicc.com/Full-page-write-in-PostgreSQL/"/>
    <id>http://wdicc.com/Full-page-write-in-PostgreSQL/</id>
    <published>2016-12-08T10:02:14.000Z</published>
    <updated>2016-12-08T10:48:26.000Z</updated>
    
    <content type="html"><![CDATA[<p>读了一篇<a href="http://blog.2ndquadrant.com/on-the-impact-of-full-page-writes/" target="_blank" rel="external">文章</a>，简单翻译总结下。</p>
<h2 id="Partial-Writes-Torn-Pages"><a href="#Partial-Writes-Torn-Pages" class="headerlink" title="Partial Writes / Torn Pages"></a>Partial Writes / Torn Pages</h2><p>pg 默认是 8kB 一个 page。linux 文件系统一般是 4kB（x86 里面最大是 4kB)，老设备驱动一般是 512B 一个扇区，新的设备有些支持 4kB 或者 8kB。</p>
<p>当 pg 写入一个 page 8kB 的时候，系统的底层会拆分小一点块，这里涉及到写入的原子性。8kB 的 pg page，会被文件系统拆分成 4kB 的块，然后拆分成 512B 扇区大小。这个时候如果系统崩溃（比如停电，内核 bug）会发生什么？</p>
<p>即使系统的存储有针对这种情况的设计（比如 SSD 自带电容器，RAID 控制器自带电池），内核那块也是会拆分成 4kB 的 page，所以还是有一定可能性，pg 写了 8kB，但是只有部分写入成功。</p>
<p>这个时候你可能意识到这就是为啥我们要有事务日志（WAL）。所以当系统崩溃重启之后，数据库会读取 WAL（从最后一次 checkpoint），然后重新写入一遍，以保证数据文件是完整的。</p>
<p>恢复的时候，在修改一个 page 之前，还是会读取一下。</p>
<p>在 checkpoint 之后第一次修改一个 page 的时候，会把整个 page 写入 WAL。这是为了保证在恢复的时候，能保证这些被修改的 page 能完全恢复到他原有的样子。</p>
<h2 id="写放大"><a href="#写放大" class="headerlink" title="写放大"></a>写放大</h2><p>如果打开 Full page write，很显然会导致 WAL 文件增加，因为就算修改一个字节，也会导致 8kB page 的写入。因为 Full page write 只发生在 checkpoint 之后的第一次写入，所以减少 checkpoint 的发生频率是可以减少写入的。</p>
<h2 id="UUID-vs-BIGSERIAL-主键"><a href="#UUID-vs-BIGSERIAL-主键" class="headerlink" title="UUID vs BIGSERIAL 主键"></a>UUID vs BIGSERIAL 主键</h2><p>比较了一下使用 UUID 或者 bigserial 做主键对写入的影响。可以看原链接的图，会发现在 INSERT 语句的情况下 UUID 产生的 WAL 文件量比较多。主要原因是 Btree 索引的情况下，bigserial 是顺序的维护这个索引，UUID 是无顺序的，会导致维护索引产生的数据量不同。</p>
<p>如果是使用 UPDATE 随机修改，那么会发现产生的 WAL 数量就差不多了。</p>
<h2 id="8kB-and-4kB-pages"><a href="#8kB-and-4kB-pages" class="headerlink" title="8kB and 4kB pages"></a>8kB and 4kB pages</h2><p>如果减小 pg 的 page 的大小，可以减小 WAL 数量。从 8kB 减小到 4kB，上面 UUID 那个例子，可以减少大概 35% 的量。</p>
<h2 id="需要-full-page-write-吗？"><a href="#需要-full-page-write-吗？" class="headerlink" title="需要 full-page write 吗？"></a>需要 full-page write 吗？</h2><p>首先，这个参数是 2005 年 pg 8.1 引入的，那么现代的文件系统是不是已经不用操心部分写入的情况了？作者尝试了一些测试没有测试出来部分写入的情况，当然这不表示不会存在。但是就算是存在，数据的一致性校验也会是有效的保护（虽然并不能修复这个问题，但是至少能让你知道有坏的 page）</p>
<p>其次，现在很多系统都依赖于流式同步，并不会等着有问题的服务器在有硬件问题的时候重启，并且花费很多时间恢复，一般都直接切换到热备服务器上面了。这个时候部分写就不是什么问题了。但是如果我们都推荐这么做，那么「我也不知道为啥数据损坏了，我只是设置了 full_page_writes=off」这种会是 DBA 死前最常见的言论了。(类似于「这种蛇我之前在 reddit 看见过，无毒的」)</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>对于 full-page write 你没法直接优化。大部分情况下，full-page write 都是发生在 checkpoint 之后，直到下一次 checkpoint。所以调整 checkpoint 的发生频率不要太频繁很重要。</p>
<p>有些应用层的操作，可能会导致对表或者索引的随机写入的增加，例如上面的 UUID 的值就是随机的，会让简单的 INSERT 也会导致索引的随机 update。使用 Bigserial 做主键(让 UUID 做替代键)可以减少写放大。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;读了一篇&lt;a href=&quot;http://blog.2ndquadrant.com/on-the-impact-of-full-page-writes/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;文章&lt;/a&gt;，简单翻译总结下。&lt;/p&gt;
&lt;h2 id=&quot;P
    
    </summary>
    
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>使用 pgrepup 跨版本升级 pg</title>
    <link href="http://wdicc.com/use-pgrepup-to-upgrade-your-postgres/"/>
    <id>http://wdicc.com/use-pgrepup-to-upgrade-your-postgres/</id>
    <published>2016-12-08T03:55:33.000Z</published>
    <updated>2016-12-08T06:18:22.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://gasparin.net/2016/11/pgrepup-upgrade-postgresql-using-logical-replication/" target="_blank" rel="external">pgrepup</a> 其实是一个支持 pg 跨版本复制的工具。而 pg 大版本升级需要停机是个比较郁闷的事情，如果能通过这个解决就实在太好了。下面测试了一下。</p>
<h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>需要安装 <code>pgrepup</code> 和 <code>pglogical</code>。</p>
<h3 id="安装-pgrepup"><a href="#安装-pgrepup" class="headerlink" title="安装 pgrepup"></a>安装 pgrepup</h3><p>pgrepup 官方说是支持 python &gt;= 2.7 的版本，我自己测试的结果，python 3.5 里面执行有点问题，需要修改几个地方。但是在 python 2.7 里面，不需要做任何修改，所以建议使用 python 2.7。安装很简单，执行 <code>pip install pgprepup</code> 就可以了。</p>
<h3 id="安装-pglogical"><a href="#安装-pglogical" class="headerlink" title="安装 pglogical"></a>安装 pglogical</h3><p>需要给你的 pg 安装这个扩展。高版本的和低版本的都需要安装。</p>
<p>安装也很简单，下载源码，执行 <code>PATH=/opt/pg96/bin:$PATH make USE_PGXS=1 install</code> 就好了。如果是给 pg95 装，那就把路径改成 pg95。</p>
<p>可以参考<a href="https://2ndquadrant.com/it/resources/pglogical/pglogical-installation-instructions/" target="_blank" rel="external">这里</a>。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><h3 id="配置-db"><a href="#配置-db" class="headerlink" title="配置 db"></a>配置 db</h3><p>先给几个 db 定义一下角色。db1 假设为 9.5 版本，db2 假设为 9.6 版本。</p>
<p>pgrepup 允许 db1, db2 和执行 pgrepup 所在的机器分别在不同的机器，也可以在相同的机器，看机器情况。</p>
<p>对于 db，最小配置的 postgres.conf 修改如下，我测试的时候两个 db 在一台机器上面，只需要修改 port 不一样就可以了。<br><figure class="highlight ini"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="attr">listen_addresses</span> = <span class="string">'*'</span>          # what IP address(es) to listen <span class="literal">on</span>;</div><div class="line"><span class="attr">port</span> = <span class="number">5495</span></div><div class="line"><span class="attr">wal_level</span> = logical # minimal, archive, hot_standby, or logical</div><div class="line"><span class="attr">max_wal_senders</span> = <span class="number">3</span>             # max number of walsender processes</div><div class="line"><span class="attr">max_replication_slots</span> = <span class="number">3</span>       # max number of replication slots</div><div class="line"><span class="attr">shared_preload_libraries</span> = <span class="string">'pglogical'</span>          # (change requires restart)</div><div class="line"></div><div class="line"><span class="comment">## 下面几个参数不是必须设置的</span></div><div class="line"><span class="attr">logging_collector</span> = <span class="literal">on</span>          # Enable capturing of stderr and csvlog</div><div class="line"><span class="attr">log_filename</span> = <span class="string">'postgresql-%Y-%m-%d.log'</span>        # log file name pattern,</div></pre></td></tr></table></figure></p>
<p>pg_hba.conf 如下，修改其中的 client_ip 和 db_ip 为对应的真实 ip。<br><figure class="highlight q"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">host <span class="built_in">all</span> <span class="built_in">all</span> client_ip/<span class="number">32</span> <span class="built_in">md5</span></div><div class="line">host replication pgrepup_replication db_ip/<span class="number">32</span> <span class="built_in">md5</span></div><div class="line">host <span class="built_in">all</span> pgrepup_replication db_ip/<span class="number">32</span> <span class="built_in">md5</span></div></pre></td></tr></table></figure></p>
<p>配置好之后，启动 db1 和 db2 看看是不是可以正常连接。</p>
<p>还需要建立用户。如果已经存在一个 super 的用户，那也可以直接用那个用户，没有的话，就建一个。db1 和 db2 都需要建立，可以是不同的用户。</p>
<h4 id="hint"><a href="#hint" class="headerlink" title="hint"></a>hint</h4><p>当然，如果我们在生产环境里面做这个事情，那肯定会是 db1 已经是一个存在的 db，只需要增加原来没有的配置就好了。db2 会是一个全新的 db，使用 initdb 初始化，之后配置上面的配置项（当然，如果是将来要给生产用，那应该是复制 db1 的配置文件过来，修改端口就可以了，其他都一样）。</p>
<h3 id="配置-pgrepup"><a href="#配置-pgrepup" class="headerlink" title="配置 pgrepup"></a>配置 pgrepup</h3><p>执行一下 <code>pgrepup config</code><br><figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup config</div><div class="line">Pgrepup 0.3.7</div><div class="line"><span class="keyword">Create</span> a <span class="keyword">new</span> pgrepup config</div><div class="line">Configuration filename [~/.pgrepup] ./pgrepup.config</div><div class="line"><span class="keyword">Security</span></div><div class="line"><span class="keyword">Do</span> you want <span class="keyword">to</span> <span class="keyword">encrypt</span> <span class="keyword">database</span> credentials <span class="keyword">using</span> a <span class="keyword">password</span>? [Y/n] n</div><div class="line">Folder <span class="keyword">where</span> pgrepup <span class="keyword">store</span> <span class="keyword">temporary</span> dumps <span class="keyword">and</span> pgpass <span class="keyword">file</span> [/tmp] ./tmp</div><div class="line"><span class="keyword">Source</span> <span class="keyword">Database</span> configuration</div><div class="line">Ip address <span class="keyword">or</span> Dns <span class="keyword">name</span>: db_ip</div><div class="line">Port: <span class="number">5495</span></div><div class="line"><span class="keyword">Connect</span> <span class="keyword">Database</span>: [template1]</div><div class="line">Username: wd</div><div class="line"><span class="keyword">Password</span>:</div><div class="line">Destination <span class="keyword">Database</span> configuration</div><div class="line">Ip address <span class="keyword">or</span> Dns <span class="keyword">name</span>: db_ip</div><div class="line">Port: <span class="number">5496</span></div><div class="line"><span class="keyword">Connect</span> <span class="keyword">Database</span>: [template1]</div><div class="line">Username: wd</div><div class="line"><span class="keyword">Password</span>:</div><div class="line">Configuration saved <span class="keyword">to</span> ./pgrepup.config.</div><div class="line">You can <span class="keyword">now</span> <span class="keyword">use</span> the <span class="keyword">check</span> command <span class="keyword">to</span> <span class="keyword">verify</span> setup <span class="keyword">of</span> <span class="keyword">source</span> <span class="keyword">and</span> destination <span class="keyword">databases</span></div></pre></td></tr></table></figure></p>
<p>之后会产生一个配置文件 pgrepup.config，有修改的话，可以打开再次编辑。</p>
<p>之后，可以执行一下 <code>pgrepup check</code> 来检查一下</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config check</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line"><span class="built_in">Global</span> checkings<span class="attr">...</span></div><div class="line"> &gt;  Folder ./tmp exists <span class="keyword">and</span> is writable <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line">Checking Source<span class="attr">...</span></div><div class="line"> &gt;  Connection PostgreSQL connection <span class="keyword">to</span> db_ip:<span class="number">5495</span> <span class="keyword">with</span> user wd OK</div><div class="line"> &gt;  pglogical installation <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.KO</div><div class="line"></div><div class="line">    Hint: Install docs at https:<span class="comment">//2ndquadrant.com/it/resources/pglogical/pglogical-installation-instructions/</span></div><div class="line"></div><div class="line"> &gt;  Needed wal_level setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_worker_processes setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Needed max_replication_slots setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_wal_senders setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  pg_hba.conf settings <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>KO</div><div class="line">    Hint: Add the following lines <span class="keyword">to</span> /home/wd/data95/pg_hba.conf:</div><div class="line">        host replication pgrepup_replication db_ip/<span class="number">32</span> md5</div><div class="line">        host <span class="literal">all</span> pgrepup_replication db_ip/<span class="number">32</span> md5</div><div class="line">    After adding the lines, remember <span class="keyword">to</span> reload postgreSQL</div><div class="line"> &gt;  <span class="built_in">Local</span> pg_dumpall version <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Source cluster tables without primary keys</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      testdb</div><div class="line"> &gt;          <span class="keyword">public</span>.t1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line">Checking Destination<span class="attr">...</span></div><div class="line"> &gt;  Connection PostgreSQL connection <span class="keyword">to</span> db_ip:<span class="number">5496</span> <span class="keyword">with</span> user wd OK</div><div class="line"> &gt;  pglogical installation <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.KO</div><div class="line"></div><div class="line">    Hint: Install docs at https:<span class="comment">//2ndquadrant.com/it/resources/pglogical/pglogical-installation-instructions/</span></div><div class="line"></div><div class="line"> &gt;  Needed wal_level setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..KO</div><div class="line">    Hint: <span class="built_in">Set</span> wal_level <span class="keyword">to</span> logical</div><div class="line"> &gt;  Needed max_worker_processes setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Needed max_replication_slots setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..KO</div><div class="line">    Hint: Increase max_replication_slots <span class="keyword">to</span> <span class="number">3</span></div><div class="line"> &gt;  Needed max_wal_senders setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  pg_hba.conf settings <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>KO</div><div class="line">    Hint: Add the following lines <span class="keyword">to</span> /home/wd/data96/pg_hba.conf:</div><div class="line">        host replication pgrepup_replication db_ip/<span class="number">32</span> md5</div><div class="line">        host <span class="literal">all</span> pgrepup_replication db_ip/<span class="number">32</span> md5</div><div class="line">    After adding the lines, remember <span class="keyword">to</span> reload postgreSQL</div><div class="line"> &gt;  <span class="built_in">Local</span> pg_dumpall version <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div></pre></td></tr></table></figure>
<p>上面是我第一次执行 check 的结果，可以看到很多红色的 <code>KO</code>，有些下面还有 hint 提示告诉你怎么修复，针对红色的信息进行修复就好了。</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config check</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line"><span class="built_in">Global</span> checkings<span class="attr">...</span></div><div class="line"> &gt;  Folder ./tmp exists <span class="keyword">and</span> is writable <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line">Checking Source<span class="attr">...</span></div><div class="line"> &gt;  Connection PostgreSQL connection <span class="keyword">to</span> db_ip:<span class="number">5495</span> <span class="keyword">with</span> user wd <span class="attr">...</span>OK</div><div class="line"> &gt;  pglogical installation <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Needed wal_level setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_worker_processes setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Needed max_replication_slots setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_wal_senders setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  pg_hba.conf settings <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  <span class="built_in">Local</span> pg_dumpall version <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Source cluster tables without primary keys</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      testdb</div><div class="line"> &gt;          <span class="keyword">public</span>.t1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line">Checking Destination<span class="attr">...</span></div><div class="line"> &gt;  Connection PostgreSQL connection <span class="keyword">to</span> db_ip:<span class="number">5496</span> <span class="keyword">with</span> user wd <span class="attr">...</span>OK</div><div class="line"> &gt;  pglogical installation <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Needed wal_level setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_worker_processes setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Needed max_replication_slots setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Needed max_wal_senders setting <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  pg_hba.conf settings <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  <span class="built_in">Local</span> pg_dumpall version <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div></pre></td></tr></table></figure>
<p>上面是我修复之后执行的结果。其中会提示会被同步的 db（上面是 template1, testdb, postgres）。之后执行 setup</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config setup</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line">Check <span class="keyword">if</span> there are active subscriptions <span class="keyword">in</span> Destination nodes <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"><span class="built_in">Global</span> tasks</div><div class="line"> &gt;  Remove nodes from Destination cluster</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Create temp pgpass file <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Drop pg_logical extension <span class="keyword">in</span> <span class="literal">all</span> databases of Source cluster</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Drop pg_logical extension <span class="keyword">in</span> <span class="literal">all</span> databases of Destination cluster</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">Setup Source</div><div class="line"> &gt;  Create user for replication <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  Dump globals <span class="keyword">and</span> schema of <span class="literal">all</span> databases <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Setup pglogical replication sets <span class="keyword">on</span> Source node name</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">Setup Destination</div><div class="line"> &gt;  Create <span class="keyword">and</span> <span class="keyword">import</span> source globals <span class="keyword">and</span> schema <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Setup pglogical Destination node name</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">Cleaning up</div><div class="line"> &gt;  Remove temporary pgpass file <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Remove other temporary files <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div></pre></td></tr></table></figure>
<p>然后执行 start</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config start</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line">Start replication <span class="keyword">and</span> upgrade</div><div class="line"> &gt;  postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;  template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div></pre></td></tr></table></figure>
<p>可以通过 status 看同步状态</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config status</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line">Configuration</div><div class="line"> &gt;  Source database cluster <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Destination database cluster <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">Pglogical setup</div><div class="line"> &gt;  Source database cluster</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Destination database cluster</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">Replication status</div><div class="line"> &gt;  Database postgres</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.replicating</div><div class="line"> &gt;  Database testdb</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.replicating</div><div class="line"> &gt;  Database template1</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.replicating</div><div class="line"> &gt;  Xlog difference (<span class="built_in">bytes</span>) <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="number">57816</span></div></pre></td></tr></table></figure>
<p>可以看到三个 db 都在同步。这个时候在 db1 上面插入数据，能在 db2 上面看到会同步过去。</p>
<p>状态有三种情况</p>
<ul>
<li>initializing: pglogical 正在 copy 数据</li>
<li>replication: 同步状态</li>
<li>down: 同步断开了，需要检查日志修复</li>
</ul>
<h2 id="需要注意的问题"><a href="#需要注意的问题" class="headerlink" title="需要注意的问题"></a>需要注意的问题</h2><h3 id="db-里面的表都需要有主键"><a href="#db-里面的表都需要有主键" class="headerlink" title="db 里面的表都需要有主键"></a>db 里面的表都需要有主键</h3><p>如果存在没有主键的表，执行 check 的时候会看到下面的信息</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">&gt;  Source cluster tables without primary keys</div><div class="line">&gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line">&gt;      testdb</div><div class="line">&gt;          <span class="keyword">public</span>.t2 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>KO</div><div class="line">   Hint: Add a primary key <span class="keyword">or</span> unique index <span class="keyword">or</span> use the pgrepup fix command</div><div class="line">&gt;          <span class="keyword">public</span>.t1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line">&gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div></pre></td></tr></table></figure>
<p>如果不解决就执行 setup，会提示下面的信息</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Setup Source <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.Skipped, configuration problems</div><div class="line">Setup Destination</div><div class="line"> &gt;  Create <span class="keyword">and</span> <span class="keyword">import</span> source globals <span class="keyword">and</span> schema <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..Skipped</div><div class="line"> &gt;  Setup pglogical Destination node name</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div></pre></td></tr></table></figure>
<p>可以自己创建一个主键重新 check，也可以执行 fix 来修复，然后再次执行 setup。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"> ❯❯❯ pgrepup -c pgrepup.config fix</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line">Find Source cluster's databases with tables without primary <span class="type">key</span>/unique index...</div><div class="line"> &gt;  template1 ....................................................................OK</div><div class="line"> &gt;  postgres .....................................................................OK</div><div class="line"> &gt;  testdb</div><div class="line"> &gt;      Found public.t2 without primary <span class="type">key</span> ................Added __pgrepup_id field</div></pre></td></tr></table></figure>
<p>通过 fix 加的主键，在 uninstall 的时候会被删除。</p>
<h3 id="Replication-status-down"><a href="#Replication-status-down" class="headerlink" title="Replication status .. down"></a>Replication status .. down</h3><p>有时候会遇到有的 db 的状态是好的，有的 db 是 down 的情况</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">Replication status</div><div class="line"> &gt;  Database postgres</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.replicating</div><div class="line"> &gt;  Database testdb</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..down</div><div class="line"> &gt;  Database template1</div><div class="line"> &gt;      Replication status <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.replicating</div><div class="line"> &gt;  Xlog difference (<span class="built_in">bytes</span>) <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..<span class="number">614096</span></div></pre></td></tr></table></figure>
<p>在同步状态下面，如果给某个 db 加一个没有主键的表，就会导致同步断掉。修复方法是先 stop，然后执行 check，按照提示修复，然后执行 setup，然后 start 就可以了。</p>
<h3 id="官方列出来的几个问题"><a href="#官方列出来的几个问题" class="headerlink" title="官方列出来的几个问题"></a>官方列出来的几个问题</h3><ul>
<li>DDL 命令。不会同步 DDL 命令，可以在 db1 试试看 <code>pglogical.replicate_ddl_command</code>。</li>
<li>seq 序列。执行 stop 命令的时候，会在目标 db 的 seq 上面加 1000。</li>
<li>有大量的 db。执行 start 命令之后，pglogical 会每个 db 启动一个 worker 来同步数据，要是 db 比较多会导致比较高的负载。</li>
</ul>
<p>因为这个是基于 pglogical 的，所以还需要关注 pglogical 列出来的一些<a href="https://2ndquadrant.com/it/resources/pglogical/pglogical-docs/" target="_blank" rel="external">限制</a> 第 4 部分 Limitations and Restrictions。</p>
<ul>
<li>4.1 Superuser is required</li>
<li>4.2 UNLOGGED and TEMPORARY not replicated</li>
<li>4.3 One database at a time</li>
<li>4.4 PRIMARY KEY or REPLICA IDENTITY required</li>
<li>4.5 Only one unique index/constraint/PK</li>
<li>4.6 DDL</li>
<li>4.7 No replication queue flush</li>
<li>4.8 FOREIGN KEYS</li>
<li>4.9 TRUNCATE</li>
<li>4.10 Sequences</li>
<li>4.11 Triggers</li>
<li>4.12 PostgreSQL Version differences</li>
<li>4.13 Doesn’t replicate DDL</li>
</ul>
<h3 id="pgrepup-uninstall"><a href="#pgrepup-uninstall" class="headerlink" title="pgrepup uninstall"></a>pgrepup uninstall</h3><p>uninstall 会清理 pgrepup 创建的一些信息，比如安装的 pglogical 扩展，创建用来同步的用户，和通过 fix 命令添加的 seq。</p>
<figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">❯❯❯ pgrepup <span class="attr">-c</span> pgrepup.config uninstall</div><div class="line">Pgrepup <span class="number">0.3</span><span class="number">.7</span></div><div class="line">Check active subscriptions <span class="keyword">in</span> Destination nodes</div><div class="line"> &gt;  template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>Stopped</div><div class="line"> &gt;  testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>Stopped</div><div class="line"> &gt;  postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.Stopped</div><div class="line">Uninstall operations</div><div class="line"> &gt;  Remove nodes from Destination cluster</div><div class="line"> &gt;      postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;      testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;      template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Drop pg_logical extension <span class="keyword">in</span> <span class="literal">all</span> databases</div><div class="line"> &gt;      Source</div><div class="line"> &gt;          template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;          postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;          testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;      Destination</div><div class="line"> &gt;          postgres <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;          testdb <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;          template1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>OK</div><div class="line"> &gt;  Drop user for replication <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>.OK</div><div class="line"> &gt;  Drop unique fields added <span class="keyword">by</span> fix command</div><div class="line"> &gt;          template1</div><div class="line"> &gt;          postgres</div><div class="line"> &gt;          testdb</div><div class="line"> &gt;              <span class="keyword">public</span>.t1 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div><div class="line"> &gt;              <span class="keyword">public</span>.t2 <span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span><span class="attr">...</span>..OK</div></pre></td></tr></table></figure>
<h2 id="升级"><a href="#升级" class="headerlink" title="升级"></a>升级</h2><p>如果前面配置好了同步状态，那剩下的事情就简单了。</p>
<ul>
<li>停止应用链接 db1</li>
<li>确保 db1 已经没有任何链接</li>
<li>使用 <code>pgrepup stop</code> 停止 replication</li>
<li>修改应用链接到 db2</li>
<li>启动应用</li>
<li>剩下的就是处理掉停止的 db1</li>
</ul>
<h2 id="参考文档"><a href="#参考文档" class="headerlink" title="参考文档"></a>参考文档</h2><p><a href="http://qiita.com/yteraoka/items/e82e4d28f6a23915d190" target="_blank" rel="external">http://qiita.com/yteraoka/items/e82e4d28f6a23915d190</a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://gasparin.net/2016/11/pgrepup-upgrade-postgresql-using-logical-replication/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;pgrepup&lt;/a&gt; 其实
    
    </summary>
    
    
      <category term="postgres" scheme="http://wdicc.com/tags/postgres/"/>
    
  </entry>
  
  <entry>
    <title>Built in sharding in PostgreSQL</title>
    <link href="http://wdicc.com/Built-in-sharding-in-PostgreSQL/"/>
    <id>http://wdicc.com/Built-in-sharding-in-PostgreSQL/</id>
    <published>2016-12-07T08:54:59.000Z</published>
    <updated>2016-12-07T08:56:42.000Z</updated>
    
    <content type="html"><![CDATA[<p>PostgreSQL 内建 sharding 支持，粗略翻译自 <a href="https://wiki.postgresql.org/wiki/Built-in_Sharding" target="_blank" rel="external">https://wiki.postgresql.org/wiki/Built-in_Sharding</a></p>
<h2 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h2><p>内建支持 sharding 最大的挑战是，如何用最小的代码修改实现。大部分社区的 sharding 修改支持都修改了很多 PostgreSQL 的代码，这也导致这些不能被 Postgres 社区那些不需要 sharding 的人接受。有了 FDW 之后，就有了在有限代码修改情况下实现内建 sharding 支持的可能。</p>
<p>基于 FDW 的这种 sharding 设计，是基于 NTT 开发的 Postgres-XC，大概已经有 10 年了。Postgres-XL 是基于这个设计的一种更加灵活的实现。</p>
<h2 id="Enhance-Existing-Features"><a href="#Enhance-Existing-Features" class="headerlink" title="Enhance Existing Features"></a>Enhance Existing Features</h2><ul>
<li>已完成？提升 FDW 的基础设计和 postgres_fdw。特别的，好的性能要求合理的把一些操作推送到子节点(foreign shards)。在 Postgres 9.6 中，join, sort, update, delete 都可以推送到字节点了。聚合的 pushdown 将在 Postgres 10 中支持。FDW 表已经可以作为继承表出现。</li>
<li>提升分区支持有效提升 existence of shards。幸运的是，单节点的分区支持也需要重构才能提升性能和更多优化。例如，executor-based partition pruning.</li>
<li>给 FDW 请求增加并行支持。这样能允许节点并行执行，这个可能会通过多个异步的链接来实现。</li>
</ul>
<h2 id="New-Subsystems"><a href="#New-Subsystems" class="headerlink" title="New Subsystems"></a>New Subsystems</h2><p>还需要开发一些子系统：</p>
<ul>
<li>允许表可以复制到所有节点，以允许更多的 join pushdown。这个可以通过 trigger 或者逻辑复制来完成。</li>
<li>实现一个子模块，以使用新的分区系统表来提交符合提交的查询的 FDW 查询。</li>
<li>实现一个子模块收集 FDW 查询的结果返回给用户。</li>
<li>实现全局事务管理器以便更加高效的允许子节点原子的提交事务。这个可能会通过 prepared 的事务来实现，还有某种在 crash 之后清理那些 preapared 的事务的事务管理器。例如 XA。</li>
<li>实现全局快照管理器，以允许子节点可以看到一致性的快照。（是不是 serialisable 事务模式会避免跨节点快照冲突？pg_export_snapshot() 或者 hot_standby_feedback 是不是会有帮助？) 多节点的备份的一致性也需要这个支持。</li>
<li>实现支持 create, manage, report on shards 这些用户 API。</li>
</ul>
<h2 id="Use-Cases"><a href="#Use-Cases" class="headerlink" title="Use Cases"></a>Use Cases</h2><p>有四种可能的用户案例和不同的需求:</p>
<ul>
<li>跨节点在只读节点上面执行只读聚合查询，例如数据仓库<br>这种是最简单的场景，不需要全局事务管理，全局快照管理，并且因为聚合，所以子节点返回的数据量也是最小的。</li>
<li>跨节点在只读节点上面执行只读非聚合查询<br>这种会给调度节点压力，需要收集和处理很多子节点返回的数据。这种也能看到 FDW 传输机制等级。</li>
<li>跨节点在可读写节点执行只读查询<br>这个需要全局快照管理来保证子节点返回数据的一致性</li>
<li>跨节点执行读写查询<br>这个需要全局快照管理器和全局事务管理器</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;PostgreSQL 内建 sharding 支持，粗略翻译自 &lt;a href=&quot;https://wiki.postgresql.org/wiki/Built-in_Sharding&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://wiki.
    
    </summary>
    
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>申请 google voice</title>
    <link href="http://wdicc.com/registration-about-google-voice/"/>
    <id>http://wdicc.com/registration-about-google-voice/</id>
    <published>2016-11-14T08:02:30.000Z</published>
    <updated>2016-11-14T08:16:28.000Z</updated>
    
    <content type="html"><![CDATA[<p>昨天晚上突然想申请一个 google voice 帐号。有了之后就可以作为国外的号码使用了，可以打电话收短信，想想好像还有点用。比如我就可以用他注册一个微博帐号用来关联一些无聊的服务了。。。</p>
<p>申请的过程网上很多，不细说了。主要注意下面几点。</p>
<ol>
<li>需要美国 ip 打开 <a href="https://www.google.com/voice" target="_blank" rel="external">https://www.google.com/voice</a> ，否则会跳转到一个帮助页面。这个从网上搜一些免费的代理就可以了。我是搜索到了一些 ss 帐号，然后配合 surge 来做的。</li>
<li>需要一个能接电话的美国号码来接受 google voice 的验证电话。这个我是通过 <a href="http://textnow.com" target="_blank" rel="external">http://textnow.com</a> 来做的。登录 textnow.com 注册一个免费的帐号，其中有一步是需要输入一个美国区号，这个要注意，我第一次注册的时候，输入的是 213 (洛杉矶地区的)，然后就不行，后来又申请了一个 517 的就可以。所以最好搜索一下别人申请成功的区号有哪些，另外还好就是只要有不同的邮箱，就可以多次注册来换号码，如果遇到不行的，可以换个邮箱重新注册一下。</li>
<li>在 google voice 里面填入电话之后。google voice 会打电话给那个号码。我用 textnow 的 ios 客户端接的电话（建议不要用他们的 web，他们的 web 必须要你的浏览器支持 flash 才行，很恶心），我遇到的情况下，前几次接到的电话没有对方的声音，自己尝试直接输入号码也不行。后来多试几次就好了。</li>
<li>后面就是选号了。选好号码之后，点提交一般都会遇到一个错误，「There was an error with your request. Please try again」, 遇到这个是正常的。需要你多次点击那个按钮提交，有人用按键精灵点了几个小时搞定了。我这是打开 chrome 的 dev tools，然后看 network 里面发的请求，每次点击都会有一个 post 请求，在上面按右键，选择 「copy as curl」，然后在命令行写一个简单的程序，<code>while true; do 这里把复制的内容贴过来 ;sleep 1.5s; done</code>，复制到命令行，不停的重试就可以了，直到收到邮件说你的号码开通了。要注意的是命令行也得设置代理，一般是通过 export。</li>
</ol>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天晚上突然想申请一个 google voice 帐号。有了之后就可以作为国外的号码使用了，可以打电话收短信，想想好像还有点用。比如我就可以用他注册一个微博帐号用来关联一些无聊的服务了。。。&lt;/p&gt;
&lt;p&gt;申请的过程网上很多，不细说了。主要注意下面几点。&lt;/p&gt;
&lt;ol&gt;

    
    </summary>
    
    
      <category term="google" scheme="http://wdicc.com/tags/google/"/>
    
  </entry>
  
  <entry>
    <title>新与旧</title>
    <link href="http://wdicc.com/new-and-old/"/>
    <id>http://wdicc.com/new-and-old/</id>
    <published>2016-11-13T05:39:18.000Z</published>
    <updated>2016-11-14T08:29:11.000Z</updated>
    
    <content type="html"><![CDATA[<p>北京有个古北水镇，运营上据说是杭州乌镇的那拨人。乌镇没去过，去过古北水镇。在一片山里面，长城下面，一群建筑。里面还开了一些模仿古代的商店，比如酒家，染坊这些可以参观。</p>
<p>这个地方离北京大概是 2 个多小时的车程（全程高速不怎么堵车的情况下）。周末过去之后会发现停车场停满了车，还有好多旅游车，水镇上面也人山人海。</p>
<p>这里面的建筑都是后期开发商人工开辟的。景区里面的酒店基本都是1k起，并且还得提前预约。据说夜景很漂亮，不过我没看过。</p>
<p>北京是个古老的城市，如果城区里面的历史建筑都留着，现在可够你转几个月的，光就绕着北京城墙走一圈，估计一天都不一定可以。曾经在西安的城墙上面走过一圈，感觉还不错，我记得还收了门票的。</p>
<p>北京有个南锣鼓巷，过去转你会发现并没有什么能让你理解回味京味的东西，卖的也是羊肉串奶茶这些，排好长的队买一串拿着边吃边走完了，其实可能也挺没意思的。</p>
<p>都说台湾是中华传统保持比较好的地方。去了台北第一印象就是，破房子挺多的。那边房子是私产，所以拆迁很难。然后个人又不一定有能力翻盖，所以就有破烂的房子。给我们开车的台湾人还说去过北京，说羡慕那边的高楼大厦，到处都很新，很时髦的样子。</p>
<p>台湾有很多夜市，去过几个，有的比较商业化的，你会发现周边也都是高楼了。有的就是普通的，真的是一条路白天行车，晚上就堵起来开始摆摊。我记得某个夜市里面有个摊位，说是开了好多年了，现在物价高，不得已只好比早年涨了几毛钱。看着都震惊了，涨几毛钱还废什么话，况且本身人家卖的也不贵，都是良心价。</p>
<p>地价涨没那么快，可能各种基础花费都会比较稳定，否则地价涨了房租涨了，那物价必定会涨。所以10年前我在北京长椿街那上班的时候，一份盖饭，大概是 7，8 块钱。到了现在，估计是翻一倍。另外这种店还越来越少，因为卫生条件，房租这些要求导致价格底了不好赚钱。</p>
<p>台湾夜市里面也经常能碰见那种几十年的老店，那真的是几十年一直在做那个生意。几十年价格也没有变化太多。想起来前门的那个面馆前段时间关门了，没有办法，涨价没法涨，收入基本不变的情况下，地价变化太大，只好关门了。</p>
<p>就目前这个房地产的情况，北京还能有多少真正的老字号，有多少真正的老街，估计基本不会有了。后面估计会有更加多人工的景区了，费用估计还不能便宜了。</p>
<p>想起来凤凰古城了，大家不愿意拆，那就某天一把火烧了，这下都同意了吧，这可是天意。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;北京有个古北水镇，运营上据说是杭州乌镇的那拨人。乌镇没去过，去过古北水镇。在一片山里面，长城下面，一群建筑。里面还开了一些模仿古代的商店，比如酒家，染坊这些可以参观。&lt;/p&gt;
&lt;p&gt;这个地方离北京大概是 2 个多小时的车程（全程高速不怎么堵车的情况下）。周末过去之后会发现停
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>python 的 decorator 学习</title>
    <link href="http://wdicc.com/decorator-in-python/"/>
    <id>http://wdicc.com/decorator-in-python/</id>
    <published>2016-10-21T10:50:59.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近学习了一下 python 的 decorator（装饰器），看的是这篇，<a href="http://coolshell.cn/articles/11265.html" target="_blank" rel="external">Python修饰器的函数式编程</a>， 觉得挺有意思的，写点东西记录一下。</p>
<p>装饰器简单讲就是返回一个函数的函数/类。看个简单的例子。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec1</span><span class="params">(fn)</span>:</span></div><div class="line">    print(<span class="string">'inside dec1'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">'inside wrapper'</span>)</div><div class="line">        <span class="keyword">return</span> fn()</div><div class="line">    <span class="keyword">return</span> wrapper</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@dec1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'inside f1'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    print(<span class="string">'begin exec'</span>)</div><div class="line">    f1()</div><div class="line">    print(<span class="string">'end exec'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 执行结果:</span></div><div class="line"><span class="comment"># inside dec1</span></div><div class="line"><span class="comment"># begin exec</span></div><div class="line"><span class="comment"># inside wrapper</span></div><div class="line"><span class="comment"># inside f1</span></div><div class="line"><span class="comment"># end exec</span></div></pre></td></tr></table></figure>
<p>看上面例子能看到，装饰器生效有 2 个步骤，第一个是装饰，第二个是执行。上面装饰器的效果，和下面的代码的效果是一样。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec1</span><span class="params">(fn)</span>:</span></div><div class="line">    print(<span class="string">'inside dec1'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></div><div class="line">        print(<span class="string">'inside wrapper'</span>)</div><div class="line">        <span class="keyword">return</span> fn()</div><div class="line">    <span class="keyword">return</span> wrapper</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment"># @dec1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'inside f1'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    print(<span class="string">'begin exec'</span>)</div><div class="line">    dec1(f1)()</div><div class="line">    print(<span class="string">'end exec'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 执行结果:</span></div><div class="line"><span class="comment"># begin exec</span></div><div class="line"><span class="comment"># inside dec1</span></div><div class="line"><span class="comment"># inside wrapper</span></div><div class="line"><span class="comment"># inside f1</span></div><div class="line"><span class="comment"># end exec</span></div></pre></td></tr></table></figure>
<p>可以看到除了 「begin/end exec」，其他部分执行结果是一样的。所以理解装饰器，就把 <code>@dec1</code> 换成 <code>dec1(fn)()</code> 这么理解就可以了。</p>
<p>有时候会看到类也可以作为装饰器使用。其实理解起来也类似。举个例子。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">dec1</span><span class="params">(object)</span>:</span></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, fn)</span>:</span></div><div class="line">        print(<span class="string">'inside dec1'</span>)</div><div class="line">        self.fn = fn</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__call__</span><span class="params">(self)</span>:</span></div><div class="line">        print(<span class="string">'inside wrapper'</span>)</div><div class="line">        <span class="keyword">return</span> self.fn()</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@dec1</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'inside f1'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    print(<span class="string">'begin exec'</span>)</div><div class="line">    f1()</div><div class="line">    print(<span class="string">'end exec'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 执行结果:</span></div><div class="line"><span class="comment"># inside dec1</span></div><div class="line"><span class="comment"># begin exec</span></div><div class="line"><span class="comment"># inside wrapper</span></div><div class="line"><span class="comment"># inside f1</span></div><div class="line"><span class="comment"># end exec</span></div></pre></td></tr></table></figure>
<p>这里和上面类似，把 <code>@dec1</code> 理解成 <code>dec1(fn)()</code>，不过是这里的 <code>dec1</code> 是个类，那么 <code>dec1(fn)</code> 其实是调用的 <code>dec1.__init__(fn)</code>，那么后续的 <code>dec1(fn)()</code> 就是调用产生的对象的 <code>dec1.__call__()</code> 了。</p>
<p>有时候还能看到加了参数的装饰器。加了参数的是怎么回事呢。再看下面的例子。</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="comment">#!/usr/bin/python</span></div><div class="line"><span class="comment"># -*- coding: utf-8 -*-</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">dec1</span><span class="params">(name)</span>:</span></div><div class="line">    print(<span class="string">'inside dec1'</span>)</div><div class="line"></div><div class="line">    <span class="function"><span class="keyword">def</span> <span class="title">real_dec1</span><span class="params">(fn)</span>:</span></div><div class="line">        <span class="function"><span class="keyword">def</span> <span class="title">wrapper</span><span class="params">()</span>:</span></div><div class="line">            print(<span class="string">'inside wrapper'</span>)</div><div class="line">            <span class="keyword">return</span> fn()</div><div class="line">        <span class="keyword">return</span> wrapper</div><div class="line">    <span class="keyword">return</span> real_dec1</div><div class="line"></div><div class="line"></div><div class="line"><span class="meta">@dec1(name='1')</span></div><div class="line"><span class="function"><span class="keyword">def</span> <span class="title">f1</span><span class="params">()</span>:</span></div><div class="line">    print(<span class="string">'inside f1'</span>)</div><div class="line"></div><div class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</div><div class="line">    print(<span class="string">'begin exec'</span>)</div><div class="line">    f1()</div><div class="line">    print(<span class="string">'end exec'</span>)</div><div class="line"></div><div class="line"><span class="comment"># 执行结果:</span></div><div class="line"><span class="comment"># inside dec1</span></div><div class="line"><span class="comment"># begin exec</span></div><div class="line"><span class="comment"># inside wrapper</span></div><div class="line"><span class="comment"># inside f1</span></div><div class="line"><span class="comment"># end exec</span></div></pre></td></tr></table></figure>
<p>看懂了没有，就是多了个嵌套而已。遇到加了参数的，那就是把之前的没有参数的部分返回回来就可以了。等价的例子就不贴了，这个等价于 <code>dec1(name=&#39;1&#39;)(fn)()</code>。</p>
<p>如果是类装饰器，并且有参数，那等价于 <code>dec1(name=&#39;1&#39;)(fn)()</code>，其中 <code>__init__(self, name)</code> 先处理第一层参数，然后 <code>__call__(fn)</code> 处理第二层，然后需要在 <code>__call__</code> 里面再定义一个 wrapper 返回。</p>
<p>说明白没有？呵呵。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近学习了一下 python 的 decorator（装饰器），看的是这篇，&lt;a href=&quot;http://coolshell.cn/articles/11265.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Python修饰器的函数式编程&lt;/a
    
    </summary>
    
    
      <category term="python" scheme="http://wdicc.com/tags/python/"/>
    
      <category term="decorator" scheme="http://wdicc.com/tags/decorator/"/>
    
  </entry>
  
  <entry>
    <title>cookie 的一点研究</title>
    <link href="http://wdicc.com/about-http-cookie/"/>
    <id>http://wdicc.com/about-http-cookie/</id>
    <published>2016-09-16T00:59:09.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>这几天搞了一下 python 里面 cookie 相关的东西。我的目的是想要尝试用 python 登录某个网站，并且保持登录状态直到过期。因为 http 协议是无状态的，所以一般来讲，网站想要用户保持登录，那么网站在用户登录之后，必须要和用户端协商好怎么来证明这个用户已经登录过了。</p>
<p>用户端如果使用浏览器，那么网站就可以利用浏览器对 cookie 的支持来让用户在不知情的情况下，让网站在用户登录后发的一个 token 在用户后续的请求里面都包含上。</p>
<p>用户端如果不是浏览器，比如是个 python 程序，那么网站可以和用户协商每次请求里面都包含某个下发的 token（当然，甚至要求客户端每次请求都带着用户名密码也是可行的）。</p>
<p>但是如果网站本身只是给浏览器用户准备的，那么通过用程序来「模拟」浏览器行为，把必要的 token 保存并在后续的请求里面都带上，也是可行的。</p>
<p>python 里面，发送 http 请求可以简单的使用 <code>urllib.request.urlopen(url)</code>，但是如果想要定制一下请求，比如修改一些 header 信息，那么就得使用 <code>urllib.request.Request</code> 这个 class 先构造一个 Request 对象，然后传递给 urlopen 了。</p>
<p>如果要处理 cookie，那就需要使用 <code>http.cookiejar.CookieJar</code> 了，有了 Cookiejar 对象，就可以把网站下发的 cookie 保存到这个变量里面，然后在必要的时候，可以返回给服务器端了。如果想要保存到文件，那么可以使用 <code>http.cookiejar.LWPCookieJar</code> 或者 <code>http.cookiejar.MozillaCookieJar</code>，也可以基于 <code>http.cookiejar.FileCookieJar</code> 自己实现一个子类，来用自己的办法保存和加载 cookie，比如保存到数据库什么的，这样就可以多台机器之间共享 cookie 了。</p>
<p><code>urlopen</code> 本身不支持自定义 cookiejar 逻辑，得使用 <code>opener = build_opener(HTTPCookieProcessor(cookiejar=Cookiejar对象))</code> 来先构造一个自定义的 openner, 然后使用 <code>opener(Request对象)</code> 来发送请求。</p>
<p>如果不定义自己的 cookie policy，那么会使用默认的 <code>http.cookiejar.DefaultCookiePolicy</code>，也可以自己基于 <code>http.cookiejar.CookiePolicy</code> 实现自己的逻辑。只需要 override <code>set_ok</code> 和 <code>return_ok</code> 这两个方法就可以。</p>
<p>http cookie 其实有很多属性，比如 domain, expire, path 等常见属性，也有 httponly, secure 等几个不常见的。这些属性都是浏览器处理的。就是说，浏览器把 cookie 返回给服务器端的时候，如果 domain 不匹配，或者已经过了 expire 时间等等一些不符合浏览器制定的 cookie 逻辑的时候，浏览器就不会把 cookie 发送给服务器端。就比如，服务器产生 cookie 的时候，声明了 domain=a.com，那么如果是来自于 b.com 的请求，浏览器是根本不会给他发送这个 cookie。再比如，服务器端产生 cookie 的时候，声明了 1 天后过期，那么 1 天之后，浏览器也不会再给服务器端发这个 cookie 了。</p>
<p>但是如果是我们自己实现客户端模拟浏览器的时候，其实我们是可以耍流氓的，可以制定自己的 cookie 逻辑，也就是上面提到的 cookie policy。比如我可以简单的在 <code>return_ok</code> 这个方法里面 <code>return True</code>，在任何情况下都把所有的 cookie 返回给服务器，这样服务器端如果不提前想明白，它是一点都不知道的。</p>
<p>所谓提前想明白就是想明白是不是需要针对这种情况做处理。如果本身我们系统也没有那么严格要求，那么不处理也可以。但是如果是某个比如金融系统，那么是必须要考虑的。否则如果完全依赖 cookie 的话，如果我通过某些手段弄到了用户的 cookie，那么我就可以骗过服务器端，让他认为我就是那个用户。</p>
<p>我想了一下，貌似被盗窃 cookie 这种事情服务器端不太好防范，但是可以做的是防止浏览器耍流氓。比如我们把 cookie 加密，并里面增加一个发送 cookie 的时间。收到客户端发过来的 cookie 之后，我们解密看看时间有没有过期，这样就可以在服务器端让 cookie 失效了。</p>
<p>另外，也可以考虑使用 session。session 是把一些用户的状态保存在服务器端。但是 session 实际上也是依赖 cookie 的，因为前面说了 http 协议无状态，就算可以把用户状态保存在服务器端，但是总还是得识别用户才可以。那个识别的 cookie 就是所谓的 session cookie，其实就是某个用户的唯一标识。</p>
<p>对于 session cookie 被窃，好像也没有太好的办法，无非也是想办法比对之前用户的一些状态信息，比如 ip 和现在的信息是不是一致，不一致可以认为有被窃的怀疑，这个时候让用户再次验证用户信息，这都不能 100% 保证，但是至少会增加窃贼的成本。</p>
<p>上面说到这些，都可以自己测试一下，测试也并不一定需要搭一个服务器端配合，以及使用复杂的抓包专鉴，其实使用 <code>nc</code> 就可以。</p>
<p>使用 <code>nc -l 9999</code> 就可以启动一个监听在 9999 端口的 socket 服务器。之后使用 python 或者 curl 之类的程序请求，就能立刻看到请求发送过来的 http 信息，这个对于学习 http 协议其实也很方便。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ nc -l <span class="number">9999</span></div><div class="line">GET <span class="regexp">/ HTTP/</span><span class="number">1.1</span></div><div class="line">Accept-<span class="string">Encoding:</span> identity</div><div class="line"><span class="string">Connection:</span> close</div><div class="line"><span class="string">Cookie:</span> QN2=test; QN1=ClbaCVfZF5lfszBALzTIAg==</div><div class="line">User-<span class="string">Agent:</span> Mozilla<span class="regexp">/5.0 (Macintosh; Intel Mac OS X 10_11_6)  AppleWebKit/</span><span class="number">537.36</span> (KHTML, like Gecko) Chrome<span class="regexp">/52.0.2743.116 Safari/</span><span class="number">537.36</span></div><div class="line"><span class="string">Host:</span> <span class="string">localhost:</span><span class="number">9999</span></div></pre></td></tr></table></figure>
<p>收到的上面这个请求，可以看到发送过来了 2 个 cookie。</p>
<p>如果还想测试数据返回的情况，那么可以写一个 <code>test.resp</code> 文件，内容如下</p>
<figure class="highlight dts"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ cat test.resp</div><div class="line">HTTP/<span class="number">1.1</span> <span class="number">200</span> OK</div><div class="line"><span class="symbol">Date:</span> Sun, <span class="number">18</span> Oct <span class="number">2009</span> <span class="number">08</span>:<span class="number">56</span>:<span class="number">53</span> GMT</div><div class="line"><span class="symbol">Server:</span> Apache/<span class="number">2.2</span><span class="number">.14</span> (Win32)</div><div class="line">Last-Modified: Sat, <span class="number">20</span> Nov <span class="number">2004</span> <span class="number">07</span>:<span class="number">16</span>:<span class="number">26</span> GMT</div><div class="line"><span class="symbol">ETag:</span> <span class="string">"10000000565a5-2c-3e94b66c2e680"</span></div><div class="line">Set-Cookie: QN1=ClbaCVfZF5lfszBALzTIAg==; expires=Thu, <span class="number">31</span>-Dec<span class="number">-37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; path=/</div><div class="line">Set-Cookie: QN2=test; expires=Thu, <span class="number">31</span>-Dec<span class="number">-37</span> <span class="number">23</span>:<span class="number">55</span>:<span class="number">55</span> GMT; path=/; secure; httponly</div><div class="line">Accept-Ranges: bytes</div><div class="line">Content-Length: <span class="number">44</span></div><div class="line"><span class="symbol">Connection:</span> close</div><div class="line">Content-Type: text/html</div><div class="line">X-Pad: avoid browser bug</div><div class="line"></div><div class="line"><span class="params">&lt;html&gt;</span><span class="params">&lt;body&gt;</span><span class="params">&lt;h1&gt;</span>It works!<span class="params">&lt;/h1&gt;</span><span class="params">&lt;/body&gt;</span><span class="params">&lt;/html&gt;</span></div></pre></td></tr></table></figure>
<p>然后使用 <code>nc -l 9999 &lt; test.resp</code> 命令启动服务，客户端来请求的时候，就会返回上面 <code>test.resp</code> 里面的内容。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这几天搞了一下 python 里面 cookie 相关的东西。我的目的是想要尝试用 python 登录某个网站，并且保持登录状态直到过期。因为 http 协议是无状态的，所以一般来讲，网站想要用户保持登录，那么网站在用户登录之后，必须要和用户端协商好怎么来证明这个用户已经登
    
    </summary>
    
    
      <category term="cookie" scheme="http://wdicc.com/tags/cookie/"/>
    
      <category term="http" scheme="http://wdicc.com/tags/http/"/>
    
  </entry>
  
  <entry>
    <title>从双拼讲输入法</title>
    <link href="http://wdicc.com/double-pinyin/"/>
    <id>http://wdicc.com/double-pinyin/</id>
    <published>2016-08-20T02:00:51.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>上高中的时候，就流行五笔打字，不过那会家里都没有电脑，都是去网吧（或者叫打字社）去学习的，不过那会学习这个貌似唯一的用途就是录入用。</p>
<p>当时也背过五笔的码表，王旁青头兼五一，估计很多人都很熟悉。上了大学在有更多机会接触电脑的时候，上网什么的，自然就开始使用拼音输入法，因为基本不需要练习，会盲打知道键盘按键键位就可以使用。当时用的比较多的是智能 ABC，后来 2000 年左右写书的时候，用的是紫光拼音，紫光的词库比智能 ABC 好一点，所以用起来也好用很多。此后一直使用拼音输入法。</p>
<p>直到应该是大概 2008 年左右，ssslang 在使用二笔，就开始想尝试一下码表输入法。因为本身使用了这么多年的电脑输入和拼音输入法之后，对字形其实已经失去了概念，如果学五笔的话，肯定会是很痛苦的。</p>
<p>而二笔输入法一个字 4 个码，第一个码还是拼音的第一个字母，但是大部分常用字都是 2 个码就可以出，所以这样等于每个字都至少知道了一半的编码，这个还是很赞的。</p>
<p>二笔输入法也有很多编码方案，当时选的是哲豆二笔，这个方案只用了 26 个字母键，所以也可以在手机上面使用（其他方案用了一些符号键，比如 [ ]，当时手机还都是流行硬键盘，一般都没有单独的符号键，而且貌似现在的软键盘也没有单独的符号键）。我当时用的 palm treo 650，输入还是蛮爽的。后来自己把一些词库导入了进去，用起来就更加舒服了。</p>
<p>但是后来的问题是慢慢的一些流行的智能机没有那么好的输入法自定义支持，就没法用了，慢慢切回来了拼音输入法。</p>
<p>二笔是码表输入法，就是每个字有自己的编码，联系的过程就是熟悉码表的过程，如果某个字不熟悉，那么其实你是需要轻微的思考的，想一下那个字怎么写，是哪个码。所以输入的速度取决于对这些字的熟悉程度，遇到不熟悉的会有卡顿。</p>
<p>最近看到了不少双拼的讨论，就想尝试一下双拼。因为如果反正都是用拼音输入法，那么对于 ing, eng 这些，如果可以按一个按键就输入进去，那么岂不是可以节省很多时间？并且这个还是基于拼音的，和那些需要记住字形的输入法不是一个套路，看着还不错。</p>
<p>我是这周一开始尝试的。mac 上面用的是鼠须管，ios 用的 touchpal。双拼也有很多方案，我选的方案是小鹤双拼，也没啥特别的原因，就是看用的人挺多的。</p>
<p>尝试的结果就是，输入了 4 天之后，周五我又换回了拼音输入法。。。。</p>
<p>因为我越用越发现，双拼也是个码表输入法。开始想得是节省拼音的输入时间，但是打字的时候，比如输入 hao 的时候，想到的不是输入 h 然后输入 ao 对应的字母 c，而是熟悉之后自然而然的按照 hc 来输入，下次需要输入 lao 的时候，还是需要想一下 ao 在字母 c，需要输入 lc。</p>
<p>这么看的话，和前面说的码表输入法有啥区别呢？所以我感觉双拼也是个码表输入法。既然是码表输入法，双拼的区分度那么差，何必折腾他呢，不如去用二笔呢。而且我用的时候最郁闷的是，二笔训练出来的键位记忆居然总会出来捣乱，这其实也更加说明这个就是码表输入法。。。</p>
<p>而且还有就是，普通拼音输入法里面，尤其是手机上面，容易按错键，比如 hao 输入成了 hso 的时候，手机上面会纠错，把「好」这个选项放在第一个。但是如果是双拼就没那么好搞了，如果也增加纠错，那会增加很多重码，体验不好。</p>
<p>另外还有个问题就是对于 sh, s, en, eng 这些不太清楚的人来讲，更加是个挑战，当然拼音可以用模糊音，按说双拼也可以想办法自定义模糊音。但是可能就失去了双拼的一些优势。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;上高中的时候，就流行五笔打字，不过那会家里都没有电脑，都是去网吧（或者叫打字社）去学习的，不过那会学习这个貌似唯一的用途就是录入用。&lt;/p&gt;
&lt;p&gt;当时也背过五笔的码表，王旁青头兼五一，估计很多人都很熟悉。上了大学在有更多机会接触电脑的时候，上网什么的，自然就开始使用拼音输
    
    </summary>
    
    
      <category term="input" scheme="http://wdicc.com/tags/input/"/>
    
  </entry>
  
  <entry>
    <title>进化论</title>
    <link href="http://wdicc.com/evolution/"/>
    <id>http://wdicc.com/evolution/</id>
    <published>2016-08-20T01:55:17.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="回忆一些没用的"><a href="#回忆一些没用的" class="headerlink" title="回忆一些没用的"></a>回忆一些没用的</h2><p>我是 1998 年上的大学。小的时候就对各种电子产品比较感兴趣，当然其实没有什么机会的，当时主要就是游戏机，但是我家里是没有的。高中的时候曾经借同学的回家玩过，和我弟弟一起玩的挺嗨，但是对于增长知识应该是没啥用的。</p>
<p>高考完毕之后，其实最想要报的还是计算机系，记得暑假的时候在电视里面看电脑相关的讲座，讲的最多的好像就是五笔，那会 windows 用户也不多，都是用的 dos。ucdos 是最常用的。那会电脑最大的用途感觉就是打字输入，然后打印。</p>
<p>当时没有报计算机，因为闭塞的农村人认为计算机会和财经一样（当时财经类专业曾经火过一些时间，但是介于毕业的人都没啥靠谱工作，所以就认为一般了），过段时间就不行了，所以没有报这块，报的是应用物理专业（当然了，这个专业更屎）。</p>
<p>那个假期去我舅舅的办公室去玩玩电脑。我舅舅是微机专业毕业的，毕业后回我们那边做类似一个打字的工作（其实我也不知道具体做什么….）。我当时去那边就是熟悉各种 dos 命令，学习一下 foxbase。</p>
<p>当时我记得有一本 foxbase 的书，看里面东西看不懂，没有现在的论坛和方便的网络，没有人可以交流。我记得印象最深的是有一道题需要算 1+2+3+…+100 等于多少，不懂编程完全不知道怎么做这个事情，但是看了答案看不懂，因为不懂 i=i+1 是什么意思，那会不明白为什么 i 还可以在右边。现在看来，生在那个年代那个地方真的很悲哀。</p>
<p>进入大学之后，选修了一门 word 之类的课，开始接触 windows。然后宿舍同学熟悉之后，就计划一起买了一台电脑，每个人 1200，我们总共 6 个人，7200 一台电脑，包括音箱电脑桌。当时要上网只能是拨号，56k 猫，开始是用不起的，大概到了大2，3 才开始拨号。然后 6 个人轮流用。那是我们班的地一台电脑，当时辅导员要求大家写保证书，保证不玩游戏才允许买。当然，你们懂得，保证书有个卵用，所以后来某天被发现玩游戏之后，给我们把电脑格式化了。但是之后大家还是会玩。</p>
<p>上了大学之后，就有网络中心，第一次去网络中心的时候，有点懵逼，和 xh 两个人对着电脑不知道该干啥。旁边的人都在玩 mud，当时不懂，就是看着一个绿窗口觉得很神奇。当然后来我们玩 mud 到昏天黑地就不多说了。玩 mud 玩的多了，慢慢了解到了 mud 的机制，有时候自己搭一个开始研究里面的编程，不过还比较粗浅。当时学的也就是 fortrun，c 语言这些。</p>
<p>那会的搜索引擎是目录式的，就和黄页一样，除了去看一些门户，就是翻这些东西，希望发现一些有意思的东西。那会学习也基本是靠买书和看自带的文档（不如 msdn），和通过网络靠一些小论坛里面的一些交流。那会写的比较多的是 vc vb 这些，php 之类学的人不多，java 我记得好像也不多。我的毕业论文是一个 vb 的程序，现在看写的比较烂，也就是能用。</p>
<h2 id="开始讲网站开发"><a href="#开始讲网站开发" class="headerlink" title="开始讲网站开发"></a>开始讲网站开发</h2><p>前面废话太多，又不太舍得删掉，就分一下块吧，下面讲讲网站开发技术的进化。</p>
<h3 id="dreamwaver-amp-frontpage-时代"><a href="#dreamwaver-amp-frontpage-时代" class="headerlink" title="dreamwaver &amp; frontpage 时代"></a>dreamwaver &amp; frontpage 时代</h3><p>那会做网页比较多的应该是 asp，用 frontpage 写，用 iis 发布，都是图形界面的，linux 没有什么人会用。linux 下面那会各种问题，驱动输入法这些都得花费很大的精力去解决。我装的第一个 linux 应该是 xterm linux，11 张光盘，因为他把一些软件也刻录到光盘了。第一次装 linux 就把宿舍的电脑搞挂了，没选对直接重新分区了。不过也就当年折腾这些弄明白了分区表 mbr 这些东西。</p>
<p>那会还攒了一些书，有一本就是讲怎么用 dreamwaver 的，当时觉得这个东西真牛逼，抛弃了 frontpage。我还记得我用 frontpage 做的第一个自我感觉良好的网页给别人看的时候，人家的那个表情，基本就是想吐的那种。我现在想，典型的那些花背景底色，大字体，图片按钮，来回滚动的一些内容等等，都是很烂的。</p>
<p>基于对 dreamwaver 的熟悉，当时还去联想实习了一段时间，给他们解决了一些问题。</p>
<p>那会做网页一般也就是收个表单，存到数据库什么的，不会有太复杂的东西。做个论坛是最常见的了。那个年代 javascript 是忌讳的东西，一般也就是用来滚动个页面标题什么的，没人拿他做特牛逼的东西。</p>
<p>毕业之后，就进了出版社。那个时代桌面程序很流行，因为大部分电脑都不能上网的，我到了出版社凭着自己的兴趣，用 vb 做了一个库存管理的软件，其实就是入库多少，出库多少登记一下，简单的很。</p>
<p>后来也是自己的兴趣，找了一台没人用的电脑，windows 上面跑起了 java web 服务，那会还流行搞一些 java applet 跑。出版社最早的网站就是这么跑起来的。</p>
<p>在后来装了一个 linux，开始在上面跑 qmail，跑 apache，开始熟悉 linux。同时也有了 php 的网站，不是我开发的，跑在我那个 linux 机器上面。</p>
<h3 id="ajax-amp-mvc"><a href="#ajax-amp-mvc" class="headerlink" title="ajax &amp; mvc"></a>ajax &amp; mvc</h3><p>后来大概有几年没有接触这些了，大概 08 年左右接触到了 ajax，javascript 算是就那几年走上神坛。当时老何演示了一个跑在本地浏览器里面的留言本程序，服务器端不用提供任何 html 相关的服务，只需要保存数据返回数据就好，逻辑都跑在本地浏览器里面。</p>
<p>不过那个时候我写的比较多的还是那种古老的表单方式，自己没去仔细了解这种新技术。后来大概 09 年左右有机会开始写 javascript 的时候了解了一些机制，感觉这种方式很有意思，渲染逻辑跑在浏览器，这样节省了一些服务器端的压力，并不是什么操作都需要提交到服务器让服务器去判断下一步怎么办。那会用到了 jquery，感觉真的好方便，并且他还提供一些 css 的效果，让不太熟悉的人也可以很方便的搞起来。而服务器端那会用 php 比较多。</p>
<p>php 当时也接触了一些框架，名字是不记得的。我这种野路子程序员，根本不明白人家的一些设计思路，代码和模板分离，mvc 这些都不懂，不过代码看多了也能明白一些。</p>
<p>我记得 09 年写这些的时候，一个遗留的 php 网站，需要增加一点功能，发现需要我一个人在 n 个文件里面修改，楞要把一个功能分散个 n 个文件让我很不理解，不是蛋疼么。当然后来明白这么做是为了分工合作为了灵活扩展，那么如果就一个人写的时候，我们是不是也需要这么做呢？</p>
<h3 id="emberjs-amp-angular-amp-react-amp-django-amp-spring"><a href="#emberjs-amp-angular-amp-react-amp-django-amp-spring" class="headerlink" title="emberjs &amp; angular &amp; react &amp; django &amp; spring"></a>emberjs &amp; angular &amp; react &amp; django &amp; spring</h3><p>后来大概 10 年左右的时候，我写代码还是用 jquery 的方式来做，因为当时觉得很好用。再后来接触了一些 emberjs angular 的一些知识。学习到了 emberjs 里面的命名惯例，比如一个路由叫 posts 那么就有对应的 PostsController，不用你显式的去让他们产生关系。学习 angular 学到了双向绑定的概念，你在定义了一个模型之后，在模板里面用到变量的地方会自动跟着这个模型的数据变化而变化，这就比用 jquery 的时候需要你自己去替换 dom 里面的内容方便多了。然后到了现在的 react 又提出了 virtual dom 的概念，让你不需要关心 dom 结构，你只需要操作你的虚拟 view 就好了。</p>
<p>当然前端其实还有好多的进步，比如 coffee script 来解决 javascript 这个语言本身的一些问题，哪里不严谨，一些最佳实践什么的就不用你操心了，只需要写 coffee script 就好了，编译成 javascript 之后，会自动处理好。</p>
<p>还有比如 css 不能 include，import，很多方案来解决这个问题。</p>
<p>后端这块，最近接触了 django，spring 这些。程序员要分 2 类的话，那就是 java 的和非 java 的，要分三类的话，就是 java ，javascript 和其他，呵呵。看过之后感觉 spring 真是不错的东西。难怪 java 程序员不去了解其他的，入了 java 坑就不用搞其他的了，库类很方便。并且类似 spring 这种东西，好多年前就有了，可以极大的方便 web 开发（不止 web 开发可以用）。如果能很好的驾驭 java，驾驭 tomcat jvm 这些东西，那么使用 java 其实是很不错的方案。通过 java 的 oo 特性，比如继承，重载 interface abstract 这些，可以很方便的定义好一些规范，也可以很好的把大家的工作划分开，架构，定义模型定义接口的人大家协同工作。</p>
<p>以前文件路径就是网页路径，现在有了 route 的概念（这个概念在 angular, emberjs 里面也有)，做了 route mapping 之后，可以很方便的把不同的 route 映射到相同的方法上面，可以很方便复用代码逻辑。</p>
<h2 id="总结下"><a href="#总结下" class="headerlink" title="总结下"></a>总结下</h2><p>上面讲了很多，整个就是个进化史。以前弄个网站出来需要花不少时间，还很难看。现在基于 bootstrap 还有这些开发框架，做一个出来很快外观还好看。这就是进步。</p>
<p>计算机技术的颠覆是很快的，如果打算一直从事这块工作，建议还是得保持一颗持续学习的心态，也得扩展自己学习的广度，这样可以吸收到各种技术的长处。</p>
<p>现在学习的手段也多了很多，我看视频直播网站都有开始讲课的了（不一定靠谱），还有各种学习视频，更别说各种可参考的学习文档了。实在是太方便了，只要愿意花时间，进步速度绝对很快。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;回忆一些没用的&quot;&gt;&lt;a href=&quot;#回忆一些没用的&quot; class=&quot;headerlink&quot; title=&quot;回忆一些没用的&quot;&gt;&lt;/a&gt;回忆一些没用的&lt;/h2&gt;&lt;p&gt;我是 1998 年上的大学。小的时候就对各种电子产品比较感兴趣，当然其实没有什么机会的，当时主要就是
    
    </summary>
    
    
      <category term="tech" scheme="http://wdicc.com/tags/tech/"/>
    
  </entry>
  
  <entry>
    <title>LLD in zabbix</title>
    <link href="http://wdicc.com/LLD-in-zabbix/"/>
    <id>http://wdicc.com/LLD-in-zabbix/</id>
    <published>2016-07-30T06:09:58.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>如果需要监控的内容比较多的时候，手动管理报警信息就已经不使用了，加一批机器就需要忙活一阵子。也不能体现我们充满智慧的大脑的作用。</p>
<p>zabbix 支持 LLD(low level discovery) 方式来自动产生监控项目，包括 item, trigger 这些都可以自动添加。大概讲解一下可以利用这个东西做什么事情。</p>
<h2 id="zabbix-收集数据的方式"><a href="#zabbix-收集数据的方式" class="headerlink" title="zabbix 收集数据的方式"></a>zabbix 收集数据的方式</h2><p>zabbix 有很多收集数据的方法，这里重点讲 2 个，一个是 <code>zabbix agent</code>，一个是 <code>zabbix traper</code>。这两个方式可以和 nagios 里面的 active 和 passive 方式做类比。traaper 方式对应的就是 passive，就是 client 主动发送数据给 server。</p>
<p>对于 zabbix agent 方式，我们可以自己定义一些 <code>userParameter</code> 来添加自定义监控，这些网上很多例子。如果使用 trapper 方式，那么原则上面可以不用做任何自定义，就可以通过 zabbix-sender 或者自己模拟 sender 的协议，通过比如 python，java 等发送自己的监控信息。通过 python 发送的例子网上也有。</p>
<h2 id="LLD"><a href="#LLD" class="headerlink" title="LLD"></a>LLD</h2><p>参考<a href="https://www.zabbix.com/documentation/3.2/manual/discovery/low_level_discovery" target="_blank" rel="external">这里</a>，LLD 主要的思路就是给服务器端发送一个 json 数据格式。例如下面这个。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="attr">"data"</span>:[</div><div class="line">  </div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/"</span>,                           <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"rootfs"</span>   &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/sys"</span>,                        <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"sysfs"</span>    &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/proc"</span>,                       <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"proc"</span>     &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/dev"</span>,                        <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"devtmpfs"</span> &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/dev/pts"</span>,                    <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"devpts"</span>   &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/lib/init/rw"</span>,                <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"tmpfs"</span>    &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/dev/shm"</span>,                    <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"tmpfs"</span>    &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/home"</span>,                       <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"ext3"</span>     &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/tmp"</span>,                        <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"ext3"</span>     &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/usr"</span>,                        <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"ext3"</span>     &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/var"</span>,                        <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"ext3"</span>     &#125;,</div><div class="line">  &#123; <span class="attr">"&#123;#FSNAME&#125;"</span>:<span class="string">"/sys/fs/fuse/connections"</span>,    <span class="attr">"&#123;#FSTYPE&#125;"</span>:<span class="string">"fusectl"</span>  &#125;</div><div class="line">  </div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个数据里面，data 是必须的，里面包含里面发现的可监控数据，这可以是任何数据。例子里面是发现了可以用来监控的磁盘分区。data 是个数组，每个可监控项是一个数组元素。还有类似下面这样的数据。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"&#123;#HOST&#125;"</span>: <span class="string">"Japan 1"</span>,</div><div class="line">            <span class="attr">"&#123;#COUNT&#125;"</span>: <span class="string">"5"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"&#123;#HOST&#125;"</span>: <span class="string">"Japan 2"</span>,</div><div class="line">            <span class="attr">"&#123;#COUNT&#125;"</span>: <span class="string">"12"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"&#123;#HOST&#125;"</span>: <span class="string">"Latvia"</span>,</div><div class="line">            <span class="attr">"&#123;#COUNT&#125;"</span>: <span class="string">"3"</span></div><div class="line">        &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个是发现了一些可监控的 host。</p>
<p>理解没有？发现是发现可监控的服务，并不是发现监控项。比如我们可以通过发现这机器上面有没有启动 ssh，发现有启动之后，我们就可以通过服务器端配置 discovery 自动添加一些监控规则。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"22"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"8022"</span> &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>比如上面这个，我们发现了 2 个 ssh 进程，一个是 22 端口，一个是 8022 端口。</p>
<p>所以重点是发现有什么可监控的服务，并不是发现监控项。</p>
<p>BUT，其实并不是不能发现监控项，也是可以的。不过是，这种被发现的监控项，除非对应的 trigger 也都是一样的，否则你会发现无法分别添加不同的 trigger 规则。</p>
<h2 id="发现监控项"><a href="#发现监控项" class="headerlink" title="发现监控项"></a>发现监控项</h2><p>有了发现服务之后，就肯定需要对相应的服务的一些监控项做监控了。这个给 discovery 规则配置 item prototype 就可以了，不过这个里面有点坑需要填，后面会说，这里先不讲。</p>
<p>那么比如对于 ssh 服务，可以监控</p>
<ul>
<li>当前链接人数，conn.cnt</li>
<li>配置文件的 md5，conf.md5（配合 zabbix trigger 可以用来监控文件是不是被修改了）</li>
</ul>
<p>那监控数据就如下面</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"22.conn.cnt"</span>: <span class="number">4</span>,</div><div class="line">    <span class="attr">"22.conf.md5"</span>: <span class="string">"18492113fb263c9d0a33c9fea403eea1"</span>,</div><div class="line">    <span class="attr">"8022.conn.cnt"</span>: <span class="number">9</span>,</div><div class="line">    <span class="attr">"8022.conf.md5"</span>: <span class="string">"6cab272daa07202ccb57c4064c0dcfb8"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面就是一个 discovery 项目，filter 是 {#SSH_PORT}，和 2 个 item prototype，分别是 {#SSH_PORT}.cnn.cnt 和 {#SSH_PORT}.conf.md5。</p>
<h2 id="复杂一点的-LLD"><a href="#复杂一点的-LLD" class="headerlink" title="复杂一点的 LLD"></a>复杂一点的 LLD</h2><p>一个 LLD 还可以发现多个服务。比如下面这种。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"22"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"8022"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#PG_PORT&#125;"</span>: <span class="number">5432</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#PG_PORT&#125;"</span>: <span class="number">6432</span> &#125;</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这个除了我们前面讲的 ssh 服务，还发现了两个 pg 的服务。在服务器端，只需要添加两个 discovery 规则就可以了，分别使用 {#SSH_PORT} 和 {#PG_PORT} 这两个宏来过滤数据。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"22"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#SSH_PORT&#125;"</span>: <span class="string">"8022"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#PG_PORT&#125;"</span>: <span class="number">5432</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#PG_PORT&#125;"</span>: <span class="number">6432</span> &#125;</div><div class="line">        &#123; <span class="attr">"&#123;#MASTER_DB_PORT&#125;"</span>: <span class="number">5432</span>, <span class="attr">"&#123;#SLAVE_DB&#125;"</span>: <span class="string">"host1"</span> &#125;,</div><div class="line">        &#123; <span class="attr">"&#123;#MASTER_DB_PORT&#125;"</span>: <span class="number">5432</span>, <span class="attr">"&#123;#SLAVE_DB&#125;"</span>: <span class="string">"host2"</span> &#125;,</div><div class="line">    ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个，除了有 2 个 db 之外，还有一个 db 是个 master，能看到他对应的 slave 有哪些。要注意，我们在新增加的这个发现项里面，不能再使用 {#PG_PORT} 这个宏了，因为如果使用了这个宏，就会和第3，4个项目无法区分了。所以我们改了一下名字。</p>
<p>到此为止，只是我们的构思，想要告诉 zabbix 我们想要监控什么。真正使用还需要走一些路。</p>
<h2 id="如何发送数据"><a href="#如何发送数据" class="headerlink" title="如何发送数据"></a>如何发送数据</h2><p>不管是 discovery 数据，还是 item 的监控数据，都可以通过 agent 和 trapper 方式发送。</p>
<p>对于 discovery 数据，使用 agent 发送就是上面讲的格式。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123; <span class="attr">"&#123;#PG.OTHER&#125;"</span>: <span class="string">"0"</span> &#125;,</div><div class="line">     ]</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>如果使用 trapper 方式发送，格式如下</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"host"</span>: <span class="string">"HOST1"</span>,</div><div class="line">            <span class="attr">"value"</span>: <span class="string">"&#123;\"data\": [&#123;\"&#123;#PG.OTHER&#125;\": \"0\"&#125;]&#125;"</span>,</div><div class="line">            <span class="attr">"key"</span>: <span class="string">"pg.discover"</span></div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    <span class="attr">"request"</span>: <span class="string">"sender data"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>上面这个数据里面，data 和 request 是 zabbix sender 的固定格式。data 里面，包含了 host, value, key 三个字段。host 是被监控的 host，和将来服务器端的 host 对应。value 是发送的监控内容，可以看到也就是我们使用 agent 发送的内容。key 就是对应的监控项，这个监控项也就是 agent 方式发送对应的那个 userParameter。</p>
<p>使用 trapper 方式发送里面，是可以伪造被监控的 host 的，所以 trapper 方式并不要求一定要在被监控机器上面执行。</p>
<p>对于 item 监控数据，使用 agent 发送是下面这种格式。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"key1"</span>: <span class="number">2</span>,</div><div class="line">    <span class="attr">"key2"</span>: <span class="string">"ok"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>使用 trapper 方式发送，是下面的这种格式。</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"data"</span>: [</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"host"</span>: <span class="string">"HOST1"</span>,</div><div class="line">            <span class="attr">"value"</span>: <span class="number">1</span>,</div><div class="line">            <span class="attr">"key"</span>: <span class="string">"key1"</span></div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">            <span class="attr">"host"</span>: <span class="string">"HOST1"</span>,</div><div class="line">            <span class="attr">"value"</span>: <span class="string">"ok"</span>,</div><div class="line">            <span class="attr">"key"</span>: <span class="string">"key2"</span></div><div class="line">        &#125;</div><div class="line">    ],</div><div class="line">    <span class="attr">"request"</span>: <span class="string">"sender data"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="zabbix-里面的限制"><a href="#zabbix-里面的限制" class="headerlink" title="zabbix 里面的限制"></a>zabbix 里面的限制</h2><p>上面的例子很完美，但实际上 zabbix 是有一些限制的。比如 item 定义。</p>
<p>假如对于发现的 pg 服务，有一个监控项是连接数，比如 {#PG_PORT}.conn.cnt，此时你会发现在 zabbix 新建 item 的 <code>Key</code> 那个设置里面，这么写无法提交。需要使用假装类似 userParameter 的方式来写，比如 pg.[{#PG.PORT}.conn.cnt]，假装那个 <code>pg.</code> 是个 userParameter 命令，[{#PG.PORT}.conn.cnt] 里面的内容是他的参数。当然，这个 pg. 可以基本可以是任何字符串，比如 abc，你自己觉得有意义就好了。</p>
<p>那么这个时候对于发现那块，我们基本不用动，需要动的是被发送的服务的监控项的命名上面。</p>
<p>比如以那个 ssh 的监控为例，原来发送的数据如下</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"22.conn.cnt"</span>: <span class="number">4</span>,</div><div class="line">    <span class="attr">"22.conf.md5"</span>: <span class="string">"18492113fb263c9d0a33c9fea403eea1"</span>,</div><div class="line">    <span class="attr">"8022.conn.cnt"</span>: <span class="number">9</span>,</div><div class="line">    <span class="attr">"8022.conf.md5"</span>: <span class="string">"6cab272daa07202ccb57c4064c0dcfb8"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>我们只需要修改成这样</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">    <span class="attr">"ssh[22.conn.cnt]"</span>: <span class="number">4</span>,</div><div class="line">    <span class="attr">"ssh[22.conf.md5]"</span>: <span class="string">"18492113fb263c9d0a33c9fea403eea1"</span>,</div><div class="line">    <span class="attr">"ssh[8022.conn.cnt]"</span>: <span class="number">9</span>,</div><div class="line">    <span class="attr">"ssh[8022.conf.md5]"</span>: <span class="string">"6cab272daa07202ccb57c4064c0dcfb8"</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>对应的 2 个 item prototype，key 分别修改为 ssh[{#SSH_PORT}.cnn.cnt] 和 ssh[{#SSH_PORT}.conf.md5]。那个 ssh 可以随意起。并且其实并不一定就得是这种模式，比如叫做 ssh.conf.md5[{#SSH_PORT}] 应该也可以，当然需要你发送的数据也做对应修改。</p>
<h2 id="如何发送监控数据"><a href="#如何发送监控数据" class="headerlink" title="如何发送监控数据"></a>如何发送监控数据</h2><p>咦？好像说过一次了？这次和上面不一样，呵呵。</p>
<p>设计好并写好监控之后，选择什么方式发送监控数据呢。我选择的是 discovery 数据通过 agent 方式获取，也就是在各服务器上面定义相同的一个 key，然后执行这个 key 的时候发送发现的服务信息。</p>
<p>而对于监控项数据则通过 trapper 方式发送。通过 trapper 方式发送，需要定时执行，可以通过 crontab 发送。我选择的是建立了一个 agent 类型的 item，执行这个 item 的时候发送监控数据。这样一方面可以针对这个发送动作建立一个监控，另外一方面调整很方便，zabbix 界面修改就可以。并且我把这个 item 建立到了模板上面，只要修改应用模板就可以了。</p>
<p>监控数据也可以用 agent 方式发送，如果用 agent 方式发送，对于上面的 ssh 服务，就需要真的建立那个 ssh 的 userParameter 了，然后接受比如 <code>22.conf.md5</code> 这样的参数，去返回对应的监控数据。我没有用这种方式，是因为这样做等于有多少个 item 就需要在监控周期内执行多少次那个命令，给服务器增加负担（虽然没多少）。而使用 trapper 方式的话，就可以一次把所有的监控数据都发过去了，命令只需要执行一次。</p>
<h2 id="如何应对不同的部分"><a href="#如何应对不同的部分" class="headerlink" title="如何应对不同的部分"></a>如何应对不同的部分</h2><p>到此为止，应该可以很完美的发现服务，并且监控了。但是会发现其实并不是所有服务器的服务都是一样的，比如对于 pgsql，slow query 的界定对于不同的业务可能不一样。而因为 trigger 也是自动发现添加的，这样也有可能需要不同的机器上面的服务有不同的阈值，怎么解决呢？</p>
<p>先说监控项的阈值。因为我的监控数据其实是通过建立一个 agent 类型的 item 定期发送 trapper 数据来实现的，所以只需要在调用那个 item 的时候传送不同的阈值就可以了。实际上面我的 itme key 定义是这样的 <code>pg.sendtrap[{$PG.DISCOVER.SETTINGS}]</code> 。那个 pg.sendtrap 是对应到一个 userParameter 的 <code>UserParameter=pg.sendtrap[*],/etc/zabbix/bin/zabbix_pg.py --check --sendtrap --settings $1</code>，在 zabbix_pg.py 里面，会处理 settings 参数。如果有阈值，那就定义好 <code>{$PG.DISCOVER.SETTINGS}</code> 这个宏就可以了。template 上面可以定义默认的阈值，当然默认阈值在程序里面定义也可以。然后不同 host 可以定义 host 的阈值，会覆盖模板的配置。</p>
<p>其实 trigger 的阈值和这个思路类似，也是 template 里面定义一个宏，trigger 里面使用这个宏就可以了。如果 host 有不同的阈值，那就定义一个 host 的宏覆盖他就可以了。</p>
<h2 id="目前的情况"><a href="#目前的情况" class="headerlink" title="目前的情况"></a>目前的情况</h2><p>配合 zabbix 的 auto registration 这个 action，可以做到新机器只需要执行一个 saltstack state，安装好我们的 zabbix agent，就可以自动注册 host，自动添加监控报警。</p>
<p>相当完美。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;如果需要监控的内容比较多的时候，手动管理报警信息就已经不使用了，加一批机器就需要忙活一阵子。也不能体现我们充满智慧的大脑的作用。&lt;/p&gt;
&lt;p&gt;zabbix 支持 LLD(low level discovery) 方式来自动产生监控项目，包括 item, trigger 这
    
    </summary>
    
    
      <category term="zabbix" scheme="http://wdicc.com/tags/zabbix/"/>
    
      <category term="monitor" scheme="http://wdicc.com/tags/monitor/"/>
    
  </entry>
  
  <entry>
    <title>能不能成功取决于什么</title>
    <link href="http://wdicc.com/all-about-lazy/"/>
    <id>http://wdicc.com/all-about-lazy/</id>
    <published>2016-07-09T06:21:10.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>随着年龄的增长，自己对一些事情的认识在改变，一直想总结一个给年轻同学的帖子，但是总是不能总结太好怎么讲，大概从想讲到现在，已经几个月了，我感觉不讲的话可能就讲不出来了，所以乱谈一下。</p>
<h2 id="从全栈讲起"><a href="#从全栈讲起" class="headerlink" title="从全栈讲起"></a>从全栈讲起</h2><p>什么是全栈？我感觉肯定不是普通人，我觉得全栈至少得是绝顶聪明的人才可以做到，对于他们来讲，有很扎实的 CS 功底，并且知识面非常广泛，还有很多产出，并且这些产出是各个方面的。</p>
<p><img src="https://pic2.zhimg.com/3c8fbae345f5a480ee55174852f392a1_b.png" alt="某种观点"></p>
<p>上面是李笑来老师对于全栈的看法，<a href="https://www.zhihu.com/question/47359997" target="_blank" rel="external">这里</a> 有知乎用户对这个的讨论。</p>
<p>我只是关注到了他那句话里面的「不太笨」，如果他的意思是很聪明的意思，那观点就和我一致了，呵呵。</p>
<p>不得不承认，智商和你能掌握的内容是有关系的，智商不够再怎么努力也很难达到某种顶峰。当然这并不是说，智商不够的就没戏了，换句话说，如果智商不够还不努力，你还是就想想老婆孩子热炕头就算了。</p>
<h2 id="学习别人"><a href="#学习别人" class="headerlink" title="学习别人"></a>学习别人</h2><p>学习别人的成功经验，似乎是一种很好的办法，至少人家那条路是走通了。</p>
<p>这几年流行健身，是吧。看着别人一个一个健身房也好，路边跑步也好，还有奥森跑步的，是不是看着眼红但是又觉得自己周边不具备环境？健身房贵，路边有觉得没有好环境，奥森还有点远，所以我得找一个满足条件的才能去进行这个事情。</p>
<p>还有比如看到有人拿 kindle 看书，是不是觉得我要是有个 kindle 带着方便，肯定可以看好多书，比如一直想学习的 iOS 开发，还有 Java 编程思想，哎呀呀，编程能力大幅增长啊。所以一定要买个 kindle。</p>
<p>等等类似的事情吧，别的不多讲了。就是我想要干什么事情，但是呢最好满足个什么条件，会让我干的更好更有动力。</p>
<p>最后通常的结果呢？步顶多跑几次就会觉得没意思了，kindle 在家里吃灰，然后开始有其他的想法，比如看着人家的 iphone 不错唉，我要是有个，看个 pdf 什么的，比 kindle 方便啊，手机可是一直带着的，所以。。。。</p>
<h2 id="听别人讲"><a href="#听别人讲" class="headerlink" title="听别人讲"></a>听别人讲</h2><p>欧洲人在放难民进来的时候，想的可是我们可怜你们让你们进来，你们应该很满足，不要闹事老实呆着。所以实际上呢？</p>
<p>父母亲戚常见的「我都是为了你好」这种说法，大家估计都听腻了吧。有用么？</p>
<p>微信朋友圈网上各种鸡汤文，比尔盖兹为什么成功，雷军马云的奋斗，这些文章看的时候让人激动人心，看完了貌似就忘记了，是不是？。。</p>
<h2 id="关键在哪里？"><a href="#关键在哪里？" class="headerlink" title="关键在哪里？"></a>关键在哪里？</h2><p>我感觉关键就是一个字「懒」。</p>
<p><img src="http://ww1.sinaimg.cn/mw690/69a2b902jw1f1nn2v6ld1j20go0aswgl.jpg" alt="懒"></p>
<p>2004 年左右在 irc 玩的时候，就有一个网站 <a href="http://lmgtfy.com/?q=%E6%87%92" target="_blank" rel="external">let me google that for you</a>。这个网站就是鄙视那些连 google 都懒得用的，稍微有点问题就问别人。知识都是别人的，把别人当 google 用。</p>
<p>很多人都有类似习惯。我们学习的时候，别人都是引进大门，如果自己不能养成自己知识持续更新的习惯，等到自己连年轻人都跟不上的时候，就很悲哀了。</p>
<p>这个都无关智商，所谓活到老学到老，别人都给你总结好了，懒字一上来，就混吃等死吧。</p>
<p>想要客服懒字，得自己给自己洗脑，让自己能坚持的下去。<a href="http://v.youku.com/v_show/id_XMTY5NTc2MzMy.html" target="_blank" rel="external">老罗的奋斗</a> 里面，老罗讲自己决定要去新东方当老师之前，学习英语的时候，隔段时间就会学不下去，学不下去的时候，看看成功学的书，给自己打打鸡血，就又活蹦乱跳了。</p>
<p>我大概总结几项提升的方向，遇事情想想，应该有好处</p>
<ul>
<li>主动思考解决问题的最佳思路</li>
<li>主动发现问题，改进承担</li>
<li>主动推进事情进展</li>
<li>不要限定自己的范围，不停挑战难点</li>
<li>积极参与到别人的有激情的项目里面</li>
<li>对技术保持强烈的好奇心</li>
</ul>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;随着年龄的增长，自己对一些事情的认识在改变，一直想总结一个给年轻同学的帖子，但是总是不能总结太好怎么讲，大概从想讲到现在，已经几个月了，我感觉不讲的话可能就讲不出来了，所以乱谈一下。&lt;/p&gt;
&lt;h2 id=&quot;从全栈讲起&quot;&gt;&lt;a href=&quot;#从全栈讲起&quot; class=&quot;he
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>如何不花钱建立一个支持 https 的 blog</title>
    <link href="http://wdicc.com/how-to-create-a-blog-with-https-for-free/"/>
    <id>http://wdicc.com/how-to-create-a-blog-with-https-for-free/</id>
    <published>2016-04-10T02:18:28.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>早年的时候要搞 blog 还得弄一个空间，现在，免费的东西越来越多了，感觉共产主义的实现还要靠资本家啊，不过羊毛出在羊身上。。。</p>
<p>要想弄一个免费的 blog，首先你的 blog 内容最好是纯静态网页，如果是类似 php 什么的，那就难找了。使用 jeklly, hexo 这些都可以把 markdown 文件渲染成 html。</p>
<p>然后注册一个 github 或者 gitcafe 等等支持 pages 服务的空间，搞定之后就能得到一个类似于 <a href="http://wd.github.io" target="_blank" rel="external">http://wd.github.io</a> 这样的地址。</p>
<p>然后你注册一个域名（发现标题没起好，这个还是要收费的。。），然后注册 cloudflare，把你的域名的 dns 使用 cloudflare 的，然后在 cloudflare 配置一个 cname 到 wd.github.io。然后建立一个 page rule，强制你的域名使用 ssl。</p>
<p>ok 拉，整个过程就是域名花钱了。可以访问下 <a href="http://wdicc.com">http://wdicc.com</a> 看看效果，会自动跳转到 <a href="https://wdicc.com">https://wdicc.com</a> :D</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;早年的时候要搞 blog 还得弄一个空间，现在，免费的东西越来越多了，感觉共产主义的实现还要靠资本家啊，不过羊毛出在羊身上。。。&lt;/p&gt;
&lt;p&gt;要想弄一个免费的 blog，首先你的 blog 内容最好是纯静态网页，如果是类似 php 什么的，那就难找了。使用 jeklly,
    
    </summary>
    
    
      <category term="blog" scheme="http://wdicc.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>Custom Netgear r6300v2 wireless router</title>
    <link href="http://wdicc.com/Custom-Netgear-r6300v2-wireless-router/"/>
    <id>http://wdicc.com/Custom-Netgear-r6300v2-wireless-router/</id>
    <published>2016-03-27T03:50:38.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>接 <a href="/Across-the-Great-Wall-we-can-reach-every-corner-in-the-world">科学上网</a>。买了群晖之后，一直通过群晖上面跑一个 haproxy 来做转发。不过心里总觉得有点不爽，毕竟一方面多转发了一次，另外群晖在不使用的时候，还会休眠，又或多或少担心影响休眠（经过测试应该是不影响的，但是..）。所以买了 r6300v2 之后，就琢磨通过路由器做这个事情。</p>
<p>路由器上面搞就有两个选择，一是从 iptables 入手，直接转发出去，另外一个是从软件层面做。</p>
<p>开始搞了几天的 iptables，发现原有系统 iptables 条目还是挺多的，加上路由器翻墙的功能也需要加一些条目，导致尝试了好几天之后总算能够转发过去链接了，但是数据包过不去，为了调试就开始打算在路由器安装 tcpdump。然后找到了 <a href="https://github.com/Entware/entware" target="_blank" rel="external">https://github.com/Entware/entware</a> ，配置好之后可以使用 opkg 来安装包。包列表可以参考这里 <a href="http://pkg.entware.net/binaries/armv7/Packages.html" target="_blank" rel="external">http://pkg.entware.net/binaries/armv7/Packages.html</a> ，这个路由器是 armv7 版本的 cpu。</p>
<p>安装 opkg 之前先得了解下，梅林固件分两部分存储，一部分是系统区，一部分是自定义区。系统区应该是你刷的固件所在的地方，是不能修改的，自定义区是可以存放一些自己定义的脚本的。每次系统启动的时候，你的一些自定义的东西都是存在自定义区加载的。自定义区就是 /jffs 分区。想要使用，得在 系统管理 -&gt; 系统设置 里面，打开 JFFS 的配置，允许执行上面的脚本。</p>
<p>因为系统自带的 /jffs 分区只有 60M 左右，而我们装包的时候很容易就超过这个限制了，我现在已经用了 8xM 空间。所以最好还是用一个 u 盘来做这个事情。每次想要自动加载 u 盘，启动 u 盘里面的程序的话，还需要一些自定义的脚本来做这个事情。</p>
<p>先把 opkg 配置好，需要先准备好 /opt 目录。</p>
<figure class="highlight vim"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">mkdir</span> -<span class="keyword">p</span> /tmp/<span class="keyword">opt</span></div><div class="line">mount -t ext4 -<span class="keyword">o</span> rw,noatime /dev/sda1 /<span class="keyword">opt</span></div></pre></td></tr></table></figure>
<p>上面的 /dev/sda1 是 u 盘，ext4 是文件系统类型，按照自己的修改一下。一般 u 盘插上去就会自动挂载，df 看一下就知道是哪个名字了。系统配置里面有个 dlna 的配置记得关掉，否则他会读 u 盘导致你不能 umount 之类，或者 kill 掉一个叫做 minidlna 的进程也可以。</p>
<p>然后参考 <a href="https://github.com/Entware/entware" target="_blank" rel="external">https://github.com/Entware/entware</a> 操作就可以了，可以看到他会在 /opt 给你安装一陀东西。因为这个是 u 盘，所以东西重启也不会丢失。</p>
<p>然后参考<a href="https://github.com/RMerl/asuswrt-merlin/wiki/User-scripts" target="_blank" rel="external">梅林的 wiki</a>，它允许用户在 <code>/jffs/scripts</code> 自定义一些启动脚本，来支持我们自动挂载和启动 u 盘上面的程序。</p>
<p>post-mount 内容如下，前面几个注释的是调试用的。最后一个 if 里面内容是执行一些 opkg 安装的程序的启动脚本，这个后面说。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"></div><div class="line"><span class="comment">#echo $(date) &gt; /tmp/000service-start</span></div><div class="line"><span class="comment">#echo "$1" &gt;&gt; /tmp/000service-start</span></div><div class="line"><span class="comment">#ls /dev/sda* &gt;&gt; /tmp/000service-start</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -b /dev/sda1 ];<span class="keyword">then</span></div><div class="line">        mkdir -p /tmp/opt</div><div class="line">        mount -t ext4 -o rw,noatime /dev/sda1 /opt</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -x /opt/bin/opkg ];<span class="keyword">then</span></div><div class="line">        /opt/etc/init.d/rc.unslung start</div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure></p>
<p>要记得 <code>sudo chmod +x post-mount</code>，然后可以重启路由器看看是不是启动之后就能看到 /opt 有了你上次安装的程序了。</p>
<p>上面一阶段搞定之后，就可以装一些软件了，比如我装了 vim, tcpdump，bind-dig, haproxy。opkg 的命令使用可以参考这里 <a href="https://wiki.openwrt.org/doc/techref/opkg" target="_blank" rel="external">https://wiki.openwrt.org/doc/techref/opkg</a> 。</p>
<p>接着上面的话题，本来打算装好 tcpdump 来调试的，然后发现可以比较方便的启动 haproxy 之后，就打算用 haproxy 弄了，路由表太多，分析比较麻烦，还是走简单的吧。。</p>
<p><code>/opt/etc/haproxy.cfg</code> 如下，把 IP 和 PORT 改成你自己的。</p>
<figure class="highlight x86asm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">global</span></div><div class="line">        ulimit-n  <span class="number">331071</span></div><div class="line"></div><div class="line">defaults</div><div class="line">        log <span class="meta">global</span></div><div class="line">        mode    tcp</div><div class="line">        <span class="meta">option</span>  dontlognull</div><div class="line">        timeout connect <span class="number">1000</span></div><div class="line">        timeout client <span class="number">150000</span></div><div class="line">        timeout server <span class="number">150000</span></div><div class="line"></div><div class="line">frontend <span class="built_in">ss</span>-<span class="keyword">in</span></div><div class="line">        bind *:本机PORT</div><div class="line">        default_backend <span class="built_in">ss</span>-<span class="keyword">out</span></div><div class="line"></div><div class="line">backend <span class="built_in">ss</span>-<span class="keyword">out</span></div><div class="line">        server server1 <span class="built_in">IP</span>:远端PORT maxconn <span class="number">20480</span></div></pre></td></tr></table></figure>
<p><code>/opt/etc/init.d/S001haproxy.sh</code> 如下，<code>sudo chmod +x /etc/init.d/S001haproxy.sh</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"></div><div class="line">haproxy_bin=/opt/sbin/haproxy</div><div class="line">haproxy_cfg=/opt/etc/haproxy.cfg</div><div class="line">pid=/opt/var/run/haproxy.pid</div><div class="line"></div><div class="line">action=<span class="variable">$1</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> [ -z <span class="string">"<span class="variable">$action</span>"</span> ];<span class="keyword">then</span></div><div class="line">        <span class="built_in">printf</span> <span class="string">"Usage: <span class="variable">$0</span> &#123;start|stop|restart&#125;\n"</span> &gt;&amp;2</div><div class="line">        <span class="built_in">exit</span> 1</div><div class="line"><span class="keyword">fi</span></div><div class="line"></div><div class="line"><span class="keyword">case</span> <span class="string">"<span class="variable">$action</span>"</span> <span class="keyword">in</span></div><div class="line">        start)</div><div class="line">                <span class="variable">$haproxy_bin</span> <span class="_">-f</span> <span class="variable">$haproxy_cfg</span> -p <span class="variable">$pid</span> -D</div><div class="line">                ;;</div><div class="line">        stop)</div><div class="line">                <span class="built_in">kill</span> $(cat <span class="variable">$pid</span>)</div><div class="line">                ;;</div><div class="line">        restart)</div><div class="line">                <span class="built_in">kill</span> $(cat <span class="variable">$pid</span>)</div><div class="line">                <span class="variable">$haproxy_bin</span> <span class="_">-f</span> <span class="variable">$haproxy_cfg</span> -p <span class="variable">$pid</span> -D</div><div class="line">                ;;</div><div class="line"><span class="keyword">esac</span></div></pre></td></tr></table></figure>
<p>因为前面在 post-mount 最后一个 if 里面的语句，这样启动路由器就会自动启动 haproxy 了。</p>
<p>想使用这个端口转发，还需要在路由器配置界面里面增加一个到路由器 ip 的映射，然后还需要一个 <code>/jffs/scripts/firewall-start</code> 如下</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/sh</span></div><div class="line"></div><div class="line">iptables -I INPUT -i ppp0 -p tcp --destination-port PORT -j ACCEPT</div></pre></td></tr></table></figure>
<p>我使用的过程中还发现一个问题，pkg.entware.net 貌似被墙了。。虽然配置了翻墙但是不太明白为什么路由器上面时好时坏，而我局域网内的 mac 访问总是 ok 的，很奇怪。路由器上面不能访问有个办法是通过 mac 代理一下。</p>
<p>mac 上面启动一个 ngx，配置如下，使用 nginx -p ./ -c nginx.conf 启动。<br><figure class="highlight nginx"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="section">events</span> &#123;</div><div class="line">  <span class="attribute">worker_connections</span> <span class="number">1024</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="section">http</span> &#123;</div><div class="line">  <span class="section">server</span> &#123;</div><div class="line">      <span class="attribute">listen</span> <span class="number">0.0.0.0:8000</span>;</div><div class="line">      <span class="attribute">location</span> / &#123;</div><div class="line">           <span class="attribute">proxy_pass</span> http://pkg.entware.net;</div><div class="line">      &#125;</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>然后修改路由器上面 /opt/etc/opkg.conf <code>src/gz packages http://MAC_IP:8000/binaries/armv7</code>，然后就可以了。</p>
<p>写完自己看发现这不是一份操作指南，只能算是一些提示，如果有人照着做能不能成功可能还是得看自己。。。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;接 &lt;a href=&quot;/Across-the-Great-Wall-we-can-reach-every-corner-in-the-world&quot;&gt;科学上网&lt;/a&gt;。买了群晖之后，一直通过群晖上面跑一个 haproxy 来做转发。不过心里总觉得有点不爽，毕竟一方面多转发了一
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
      <category term="router" scheme="http://wdicc.com/tags/router/"/>
    
  </entry>
  
  <entry>
    <title>lua metatable</title>
    <link href="http://wdicc.com/lua-metatable/"/>
    <id>http://wdicc.com/lua-metatable/</id>
    <published>2016-03-27T02:48:26.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line">t = <span class="built_in">setmetatable</span>(&#123; bar = <span class="number">4</span>, foo = <span class="number">7</span> &#125;, &#123; __index = &#123; foo = <span class="number">3</span> &#125; &#125;)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(t.foo)  <span class="comment">-- 7</span></div><div class="line"><span class="built_in">print</span>(t.bar)  <span class="comment">-- 4</span></div><div class="line"></div><div class="line">t = <span class="built_in">setmetatable</span>(&#123;  &#125;, &#123; __index = &#123; foo = <span class="number">3</span>&#125; &#125;)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(t.foo)  <span class="comment">-- 3</span></div><div class="line"><span class="built_in">print</span>(t.bar)  <span class="comment">-- nil</span></div><div class="line"></div><div class="line">fuc = <span class="function"><span class="keyword">function</span> <span class="params">(t,k)</span></span></div><div class="line">    <span class="keyword">if</span> k == <span class="string">'foo'</span> <span class="keyword">then</span></div><div class="line">        <span class="keyword">return</span> <span class="built_in">rawget</span>(t, <span class="string">'bar'</span>)</div><div class="line">    <span class="keyword">else</span></div><div class="line">        <span class="keyword">return</span> <span class="number">0</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">t = <span class="built_in">setmetatable</span>(&#123;   &#125;, &#123; __index = fuc &#125;)</div><div class="line"></div><div class="line"><span class="built_in">print</span>(t.foo)  <span class="comment">-- 3</span></div><div class="line"><span class="built_in">print</span>(t.bar)  <span class="comment">-- nil</span></div><div class="line"><span class="built_in">print</span>(t.ff)</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;figure class=&quot;highlight lua&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;div class=&quot;line&quot;&gt;1&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;2&lt;/div&gt;&lt;div class=&quot;line&quot;&gt;3&lt;/div&gt;
    
    </summary>
    
    
      <category term="lua" scheme="http://wdicc.com/tags/lua/"/>
    
  </entry>
  
  <entry>
    <title>Across the Great Wall, we can reach every corner in the world</title>
    <link href="http://wdicc.com/Across-the-Great-Wall-we-can-reach-every-corner-in-the-world/"/>
    <id>http://wdicc.com/Across-the-Great-Wall-we-can-reach-every-corner-in-the-world/</id>
    <published>2016-03-20T12:39:53.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>科学上网估计是每个搞 IT 的人必须要掌握的知识了。简单讲讲我目前使用的一些方法。</p>
<h2 id="国外服务"><a href="#国外服务" class="headerlink" title="国外服务"></a>国外服务</h2><p>首先肯定需要先有个国外的资源，比如买专业的 vpn ss 服务等。数据经过第三方都不一定那么可靠，我的主力邮箱在 gmail，可不想被攻破，所以我选择了自己购买和搭建服务。</p>
<p>我买的是 linode 的服务，最便宜的是 10$ 一个月。也可以买一些美国的 kvm 或者 zen 的虚拟机，有比较便宜的一个月可能才不到 1$，当然这种便宜的一般很快就会卖没，得看运气。我的 linode 是和 3 个基友一起合租的，这样大家每个人一年也就 300 来块钱，也就一顿海底捞（我这两年非常喜欢用饭钱来衡量消费，吃饭可是天天都有的，但是有些消费，比如买软件，买服务这些一般都是一年或者几年才一次，比起吃饭真的便宜多了），一般都能承担的吧。</p>
<p>早期我买过一些 ssh 服务，速度不稳定，因为很难限制超售。后来还买过云梯，他们提供的节点比较多速度还不错。</p>
<p>有了 vps 搭一个 ssserver 就是很简单的了，就不多说了。服务器上面我还配置了 ocserv 这个支持 cisco 客户端的 vpn 服务。当然并不是所有 vps 都支持，有的 vps 没有 tun 设备，跑不起来，买的时候要注意。</p>
<h2 id="ssh-方式"><a href="#ssh-方式" class="headerlink" title="ssh 方式"></a>ssh 方式</h2><p>使用 ssh 方式的时候，最早是直接 ssh 链接弄一个 socks 端口给本地，然后本地使用 pac 配合。</p>
<p>后来有段时间被断的不行，就试了 stunnel，可以把 ssh 转为 https 服务，这样就可以跑在 443 端口了，和其他 https 服务比较难区分。可以起点作用。</p>
<p>这个方式没法支持手机。</p>
<h2 id="使用-ngx"><a href="#使用-ngx" class="headerlink" title="使用 ngx"></a>使用 ngx</h2><p>有段时间还使用 hosts 文件加 ngx 反向代理还翻墙。ngx 上面配置 google.com 和 twitter.com 的反向代理，然后手机或者电脑上面配置 hosts 指向 ngx。就可以实现翻墙了。不过因为都是 https 的网站，所以服务器上面得配置 https 的服务，证书得弄到电脑或者手机上面信任才行。</p>
<p>这个手机想要支持的话，ios 比较麻烦，必须得越狱。</p>
<h2 id="vpn-方式"><a href="#vpn-方式" class="headerlink" title="vpn 方式"></a>vpn 方式</h2><p>早期用 vpn 方式的时候，pptp 可以搭配 <a href="https://github.com/fivesheep/chnroutes" target="_blank" rel="external">chnrouts</a> 来实现国外和国内走不同的路由。用起来也不错，不过问题是全局的有时候切换也不方便，并且有时候还需要连公司的 vpn 路由一乱就麻烦了。</p>
<p>pc 上面选择比较多。手机上面，试过 anyconnect，缺点就是全局翻墙（我试过让 server 只 push fb twitter 的路由，但是维护麻烦，效果也不好）。anyconnect 比较赞的地方是他的链接 cookie 可以设置比较长的有效期，这样网络切换什么的临时断开之后自动重连也不需要输入密码。哦，当然，我的 anyconnect 和后面提到的 openvpn 都是通过自己签的证书来认证的，也不需要输入密码。</p>
<p>后来用过 openvpn，openvpn 是基友维护的。他的思路很赞。</p>
<p>他买了一台 server 放家里，家里是联通 adsl 24h 联机，然后 server 上面跑一个 openvpn 的服务器端给手机连接用，服务器上面再通过 vpn 和 vps 的 vpn 链接，同时这机器配置只有国外路由才走 vps，国内都是直接链接。大概链路就是  手机 -&gt; 家里的 server -&gt; vps。如果是国内的网站，就直接通过家里的 server 访问了，比国外的 vps 访问速度快。</p>
<p>这个方法还有好处是有时候一些公开的场合链接一些 wifi 的时候，很不安全，而通过 vpn 之后，数据都是加密的，就安全多了。我在 surge 之前，在 hosts 不能用之后，基本都是用这个和 anyconnect。</p>
<h2 id="使用-ss"><a href="#使用-ss" class="headerlink" title="使用 ss"></a>使用 ss</h2><p>开始使用 ss 的时候，是使用 goagentx （貌似已经比较难找到下载了）的，这个工具异常好用，支持切换全局还是使用 pac 非常方便。pac 推荐使用 <a href="https://github.com/JinnLynn/genpac" target="_blank" rel="external">genpac</a> 来维护 pac，放到 dropbox 里面就可以四处用了。</p>
<p>我有相当长一段时间都是这么翻墙的。直到后面 ios 9 放开网络权限之后，出来了 surge。surge 现在卖的太贵了，不建议购买，最近好像看到有一些新的软件也在出现，可以考虑。</p>
<p>surge 出来之后，ios 基本就是用这个了。</p>
<p>surge 也有 mac 版本。如果没有，使用 ss mac 版本也可以，搭配 pac 可以做到透明。</p>
<h2 id="应对不稳定的网络情况"><a href="#应对不稳定的网络情况" class="headerlink" title="应对不稳定的网络情况"></a>应对不稳定的网络情况</h2><p>家里是联通 adsl，链接我的 linode 一直都比较稳定，速度不错也没有丢包。公司访问 linode 有时候丢包比较严重，不过也将就用了。去年去长沙出差，那边完全访问不能把我搞的很痛苦。回来就开始琢磨怎么搞。</p>
<p>上面基友的思路提醒了我，就是自己家里一台 server 建长链接，然后在外面翻墙先连家里。但是家里的路由器完全不能定制，后来发现我的群晖的 nas 可以装 haproxy，就搞定这个事情了。在路由器上面映射一个端口给群晖，群晖上面跑 haproxy 转发到 linode。给路由器弄了个 ddns，在外面翻墙都连接这个 dns。</p>
<p>群晖上面跑 haproxy 还不影响硬盘休眠，还挺不错。这样就彻底解决了我翻墙的问题了。</p>
<p>但是遇到家里停电断网就虾米了。。</p>
<h2 id="家里的全局翻墙方案"><a href="#家里的全局翻墙方案" class="headerlink" title="家里的全局翻墙方案"></a>家里的全局翻墙方案</h2><p>前段时间换了 Netgear R6300v2，才发现我之前错过了好多好玩的东西。刷了个国内论坛定制的梅林 rom，自带了 ss 客户端，并且配置的非常完美，支持多种翻墙策略，具体就不细说了。就说现在的效果吧。</p>
<p>直接映射了端口到 linode 的 ss，并且也支持 ddns（我用的 3322 的），这样 nas 上面的 haproxy 就彻底可以不用了。</p>
<p>路由器跑了 ss 客户端，加 redsocks2 和 dns2proxy，实现了国内网站直连，国外根据域名匹配到列表里面的服务器通过 ss 链接。这样家里所有的终端，不需要跑任何服务，就可以无缝翻墙了。我的 ps4，apple tv，ipad 上面的 yotube 都可以访问了。然后还支持黑名单，我把 nas 加进去了，防止使用 bt 下载的时候跑到国外流量。</p>
<p>这样我目前手机和 mac 都是直接通过 surge，国外流量通过 3322 的 dns 先链接到路由器，然后转发到 linode 实现翻墙。</p>
<h2 id="目前唯一的问题"><a href="#目前唯一的问题" class="headerlink" title="目前唯一的问题"></a>目前唯一的问题</h2><p>mac 版本的 surge，还不能自己配置网络，这样临时想关掉代理的时候，就比较麻烦，得去网络配置里面关。也不能很简单的配置让全部流量走 proxy，有时候需要测试下什么的，就比较麻烦。所以我现在有时候还会使用 goagentx 辅助一下。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;科学上网估计是每个搞 IT 的人必须要掌握的知识了。简单讲讲我目前使用的一些方法。&lt;/p&gt;
&lt;h2 id=&quot;国外服务&quot;&gt;&lt;a href=&quot;#国外服务&quot; class=&quot;headerlink&quot; title=&quot;国外服务&quot;&gt;&lt;/a&gt;国外服务&lt;/h2&gt;&lt;p&gt;首先肯定需要先有个国外的资
    
    </summary>
    
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
  </entry>
  
  <entry>
    <title>setup proxy for emacs</title>
    <link href="http://wdicc.com/setup-proxy-for-emacs/"/>
    <id>http://wdicc.com/setup-proxy-for-emacs/</id>
    <published>2016-02-27T13:55:20.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>我在 mac 上面使用 emacs 都是使用 daemon + emacsclient 模式。使用 <code>paradox</code> 包管理(其实就是比 <code>list-package</code> 稍微多了一点功能’)，但是因为那些包什么的信息都在国外的网站，还有 github 什么的，导致速度巨慢甚至连不上，关键 emacs 单线程还得卡着别的操作，所以挺讨厌的(其实 paradox 提供了异步更新的方式，不会阻塞现在进程，但是有时候会不知道进度…)。</p>
<p>思路就是使用 <code>proxychains</code>。</p>
<p>新建一个 <code>/Library/LaunchAgents/gnu.emacs.daemon.plist</code> 文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="php"><span class="meta">&lt;?</span>xml version=<span class="string">"1.0"</span> encoding=<span class="string">"UTF-8"</span><span class="meta">?&gt;</span></span></div><div class="line"><span class="meta">&lt;!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN"</span></div><div class="line">    "http://www.apple.com/DTDs/PropertyList-1.0.dtd"&gt;</div><div class="line"> <span class="tag">&lt;<span class="name">plist</span> <span class="attr">version</span>=<span class="string">"1.0"</span>&gt;</span></div><div class="line">  <span class="tag">&lt;<span class="name">dict</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>Label<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">string</span>&gt;</span>gnu.emacs.daemon<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">key</span>&gt;</span>ProgramArguments<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">array</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/bin/proxychains4<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>-f<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>/Users/wd/.proxychains/proxychains.conf<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>/usr/local/opt/emacs-mac/bin/emacs<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">      <span class="tag">&lt;<span class="name">string</span>&gt;</span>--daemon<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">array</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">key</span>&gt;</span>RunAtLoad<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">true</span>/&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">key</span>&gt;</span>ServiceDescription<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>Gnu Emacs Daemon<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">key</span>&gt;</span>UserName<span class="tag">&lt;/<span class="name">key</span>&gt;</span></div><div class="line">   <span class="tag">&lt;<span class="name">string</span>&gt;</span>wd<span class="tag">&lt;/<span class="name">string</span>&gt;</span></div><div class="line">  <span class="tag">&lt;/<span class="name">dict</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">plist</span>&gt;</span></div></pre></td></tr></table></figure>
<p>其中 <code>/Users/wd/.proxychains/proxychains.conf</code> 文件的内容如下</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">strict_chain</div><div class="line">proxy_dns</div><div class="line">remote_dns_subnet <span class="number">224</span></div><div class="line">tcp_read_time_out <span class="number">15000</span></div><div class="line">tcp_connect_time_out <span class="number">8000</span></div><div class="line">localnet <span class="number">127.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></div><div class="line">localnet <span class="number">10.0</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">255.0</span><span class="number">.0</span><span class="number">.0</span></div><div class="line">localnet <span class="number">172.16</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">255.240</span><span class="number">.0</span><span class="number">.0</span></div><div class="line">localnet <span class="number">192.168</span><span class="number">.0</span><span class="number">.0</span>/<span class="number">255.255</span><span class="number">.0</span><span class="number">.0</span></div><div class="line">quiet_mode</div><div class="line"></div><div class="line">[ProxyList]</div><div class="line">#socks5 <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">1080</span></div><div class="line">http <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span> <span class="number">6152</span></div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我在 mac 上面使用 emacs 都是使用 daemon + emacsclient 模式。使用 &lt;code&gt;paradox&lt;/code&gt; 包管理(其实就是比 &lt;code&gt;list-package&lt;/code&gt; 稍微多了一点功能’)，但是因为那些包什么的信息都在国外的网站
    
    </summary>
    
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="osx" scheme="http://wdicc.com/tags/osx/"/>
    
  </entry>
  
  <entry>
    <title>use gearman to distribute you nagios check</title>
    <link href="http://wdicc.com/use-gearman-to-distribute-you-nagios-check/"/>
    <id>http://wdicc.com/use-gearman-to-distribute-you-nagios-check/</id>
    <published>2016-01-18T07:14:36.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><h2 id="gearman"><a href="#gearman" class="headerlink" title="gearman"></a>gearman</h2><p>需要 boost &gt; 1.39, libevent-devel, libuuid-devel, gperf<br>需要 gcc &gt;= 4.2</p>
<p>export CC=gcc44<br>export CC=g++44</p>
<h2 id="mod-gearman"><a href="#mod-gearman" class="headerlink" title="mod-gearman"></a>mod-gearman</h2><p>libtool-ltdl-devel ncurses-devel<br>–with-gearman</p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>gearman 分为几个模块</p>
<ul>
<li>mod_gearman: 负责把 nagios 中的检查任务发给 gearmand job server</li>
<li>gearmand: 负责接收任务，分配给 worker 执行。这个是个通用的队列管理服务。</li>
<li>gearman_workder: 负责消费 gearmand 中的 job。</li>
</ul>
<p>其中 <code>mod_gearman</code> 的代码里面包括了上面提到的 mod_gearman 和 gearman_workder。</p>
<p>所以规划好 gearmand 启动的机器，以及你的 worker 机器。其中要注意 worker 机器上面是会执行所有[1] nagios 监控</p>
<p>需要配置的文件有几个</p>
<ul>
<li>nagios.cfg 增加 broker</li>
<li>mod-gearman/etc/mod_gearman/mod_gearman_neb.conf broker 的配置文件</li>
<li>mod-gearman/etc/mod_gearman/mod_gearman_worker.conf workder 的配置文件</li>
</ul>
<h1 id="启动"><a href="#启动" class="headerlink" title="启动"></a>启动</h1><ul>
<li>先启动 gearmand 使用 mod-gearman/etc/init.d/gearmand 这个脚本。</li>
<li>启动 worker 使用 mod-gearman/etc/init.d/mod_gearman_worker 这个脚本。启动之后可以用 gearman_top 看到多了一些队列。</li>
<li>重启 nagios</li>
</ul>
<p>确认 nagios.log 里面正常加载了 gearman，然后看 gearman_top 里面开始有一些 run 的 job 了。</p>
<h1 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h1><p>基本上使用 gearman 还算是对用户透明，需要配置的东西不多，默认配置就可以跑。</p>
<p>一般使用 gearman 的时候都是现有 nagios 遇到瓶颈了，这个时候扩展的时候需要注意下，第一步可以在 nagios 机器上面（或者弄一台新的机器）做 gearman 的 job server，然后在 nagios 的机器上面跑一个 worker，这样基本就是 0 配置都可以跑起来，不会有任何问题。</p>
<p>第一步完成之后就会需要增加 worker，这个时候就要注意了，新的 worker 机器上面，需要在相同的路径下面包括所有你用到的 nagios plugin（包括自己写的，也包括这些 plugin 依赖的其他内容，比如临时文件路径，配置文件等），否则分发过来的 job 会执行不成功。</p>
<p>这个时候有个办法，就是把原来机器的 nagios 相关目录通过 nfs 共享给其他机器（但是得注意二进制程序是兼容的）。</p>
<p>另外如果需要测试一下新的 worker，也可以通过配置只让 worker 执行某些 servicegroup 或者 hostgroup 的任务。要注意这个时候需要配置 service, eventhandler, host 都为 no，然后配置 servicegroups 或者 hostgroups。</p>
<h1 id="Footnotes"><a href="#Footnotes" class="headerlink" title="Footnotes"></a>Footnotes</h1><p>[1] 其实 worker 是可以被配置为只处理某些监控的，这个后面会讲。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;安装&quot;&gt;&lt;a href=&quot;#安装&quot; class=&quot;headerlink&quot; title=&quot;安装&quot;&gt;&lt;/a&gt;安装&lt;/h1&gt;&lt;h2 id=&quot;gearman&quot;&gt;&lt;a href=&quot;#gearman&quot; class=&quot;headerlink&quot; title=&quot;gearman&quot;&gt;&lt;/
    
    </summary>
    
    
      <category term="nagios" scheme="http://wdicc.com/tags/nagios/"/>
    
      <category term="gearman" scheme="http://wdicc.com/tags/gearman/"/>
    
  </entry>
  
  <entry>
    <title>use ivy to replace isearch</title>
    <link href="http://wdicc.com/use-ivy-to-replace-isearch/"/>
    <id>http://wdicc.com/use-ivy-to-replace-isearch/</id>
    <published>2016-01-10T11:22:20.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前习惯使用 <code>isearch</code> 来搜索了，最近看别人使用 <code>ivy</code> 看着心痒痒的，就想试试看。其实 ivy 的效果和 <code>swoop</code> 很像，不过区别是 ivy 是在 minibuffer 来显示可选信息的，swoop 是在一个 buffer 显示的。有洁癖的可能稍微计较一下。</p>
<figure class="highlight scheme"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div></pre></td><td class="code"><pre><div class="line"><span class="comment">;; ivy swiper</span></div><div class="line">(<span class="name">defun</span> wd-swiper-at-point ()</div><div class="line">  <span class="string">"Pull next word from buffer into search string."</span></div><div class="line">  (<span class="name">interactive</span>)</div><div class="line">  (<span class="name"><span class="builtin-name">let</span></span> (<span class="name">query</span>)</div><div class="line">    (<span class="name">with-ivy-window</span></div><div class="line">      (<span class="name"><span class="builtin-name">let</span></span> ((<span class="name">tmp</span> (<span class="name">symbol-at-point</span>)))</div><div class="line">        (<span class="name">setq</span> query tmp)))</div><div class="line">    (<span class="name"><span class="builtin-name">when</span></span> query</div><div class="line">      (<span class="name">insert</span> (<span class="name">format</span> <span class="string">"%s"</span> query))</div><div class="line">      )))</div><div class="line"></div><div class="line">(<span class="name">use-package</span> ivy</div><div class="line">  :config</div><div class="line">  (<span class="name">ivy-mode</span> <span class="number">1</span>)</div><div class="line">  (<span class="name">setq</span> ivy-use-virtual-buffers t)</div><div class="line">  (<span class="name">set-variable</span> <span class="symbol">'ivy-on-del-error-function</span> '(lambda()))</div><div class="line">  )</div><div class="line"></div><div class="line">(<span class="name">use-package</span> swiper</div><div class="line">  :config</div><div class="line">  (<span class="name">global-set-key</span> <span class="string">"\C-s"</span> <span class="symbol">'swiper</span>)</div><div class="line">  (<span class="name">define-key</span> swiper-map (<span class="name">kbd</span> <span class="string">"C-w"</span>) <span class="symbol">'wd-swiper-at-point</span>)</div><div class="line">  (<span class="name">define-key</span> swiper-map (<span class="name">kbd</span> <span class="string">"C-f"</span>) <span class="symbol">'swiper-avy</span>)</div><div class="line">  )</div></pre></td></tr></table></figure>
<p>我大致做了上面几个设定，<code>\C-s</code> 绑定了 swiper，启动 swiper 之后用 <code>\C-w</code> 可以快速把光标位置的 symbol 放到 minibuffer 来搜索。然后 swiper 和 isearch 有个区别是，默认情况下，swiper 如果 minibuffer 没有内容，按 backspace 会退出，这个和 isearch 的习惯不一样，把 <code>ivy-on-del-error-function</code> 重新绑定一下就可以了。</p>
<p>ivy 默认会绑定一个快捷键是在你 minibuffer 输入一些内容之后，会出来很多匹配结果，这个时候可以按 <code>C-&#39;</code> 调用 <code>swiper-avy</code> 方便你快速定位，也挺好用的。不过我这里不好用，不知道怎么回事，只好重新绑定了一下。</p>
<p>还可以在 swiper 查询阶段按 <code>M-q</code> 进入替换模式。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前习惯使用 &lt;code&gt;isearch&lt;/code&gt; 来搜索了，最近看别人使用 &lt;code&gt;ivy&lt;/code&gt; 看着心痒痒的，就想试试看。其实 ivy 的效果和 &lt;code&gt;swoop&lt;/code&gt; 很像，不过区别是 ivy 是在 minibuffer 来显示可选信息的
    
    </summary>
    
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>基于 ffi 的 libmcrypt 加密模块</title>
    <link href="http://wdicc.com/libmcrypt-ffi-module/"/>
    <id>http://wdicc.com/libmcrypt-ffi-module/</id>
    <published>2015-07-05T12:55:11.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>openresty 提供了 luajit 的支持，luajit 又提供了 ffi 库的支持。通过 ffi 可以很方便的调用 c 库的一些方法。</p>
<p>我在项目里面用到了加解密，因为需要各语言支持，使用了 libmcrypt 库。之前通过 c 模块完成了在 lua 里面加密，在 perl 里面解密。有了 ffi 就可以使用纯 lua 模块搞定了。</p>
<p>代码写的比较丑，有使用加解密的需求的可以参考下，另外计划写其他模块的也可以参考下。如下</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">local</span> ffi = <span class="built_in">require</span> <span class="string">'ffi'</span></div><div class="line"><span class="keyword">local</span> ffi_new = ffi.new</div><div class="line"><span class="keyword">local</span> ffi_str = ffi.<span class="built_in">string</span></div><div class="line"><span class="keyword">local</span> ffi_copy = ffi.copy</div><div class="line"><span class="keyword">local</span> <span class="built_in">setmetatable</span> = <span class="built_in">setmetatable</span></div><div class="line"></div><div class="line"><span class="keyword">local</span> _M = &#123; &#125;</div><div class="line"><span class="keyword">local</span> mt = &#123; __index = _M &#125;</div><div class="line"></div><div class="line">ffi.cdef<span class="string">[[</span></div><div class="line">struct CRYPT_STREAM;</div><div class="line">typedef struct CRYPT_STREAM *MCRYPT;</div><div class="line"></div><div class="line">MCRYPT mcrypt_module_open(char *algorithm,</div><div class="line">                          char *a_directory, char *mode,</div><div class="line">                          char *m_directory);</div><div class="line"></div><div class="line">int mcrypt_generic_init(const MCRYPT td, void *key, int lenofkey,</div><div class="line">                        void *IV);</div><div class="line"></div><div class="line">int mcrypt_generic_deinit(const MCRYPT td);</div><div class="line">int mcrypt_generic_end(const MCRYPT td);</div><div class="line">int mdecrypt_generic(MCRYPT td, void *plaintext, int len);</div><div class="line">int mcrypt_generic(MCRYPT td, void *plaintext, int len);</div><div class="line">int mcrypt_module_close(MCRYPT td);</div><div class="line"></div><div class="line">]]</div><div class="line"></div><div class="line"><span class="keyword">local</span> mcrypt = ffi.<span class="built_in">load</span>(<span class="string">'libmcrypt.so.4'</span>)</div><div class="line"></div><div class="line">_M.new = <span class="function"><span class="keyword">function</span> <span class="params">(self)</span></span></div><div class="line">    <span class="keyword">local</span> cipher = <span class="string">'blowfish'</span></div><div class="line">    <span class="keyword">local</span> mode = <span class="string">'cbc'</span></div><div class="line"></div><div class="line">    <span class="keyword">local</span> c_cipher = ffi_new(<span class="string">"char[9]"</span>, cipher)</div><div class="line">    <span class="keyword">local</span> c_mode = ffi_new(<span class="string">"char[4]"</span>, mode)</div><div class="line"></div><div class="line">    <span class="keyword">local</span> td = mcrypt.mcrypt_module_open(c_cipher, <span class="keyword">nil</span>, c_mode, <span class="keyword">nil</span>)</div><div class="line">    <span class="keyword">return</span> <span class="built_in">setmetatable</span>( &#123; _td = td &#125;, mt )</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">_M.encrypt = <span class="function"><span class="keyword">function</span><span class="params">(self, key, raw)</span></span></div><div class="line">    <span class="keyword">local</span> iv_len = <span class="number">8</span></div><div class="line">    <span class="keyword">local</span> td = self._td</div><div class="line"></div><div class="line">    <span class="keyword">local</span> c_key = ffi_new(<span class="string">"char[?]"</span>, #key+<span class="number">1</span>, key)</div><div class="line">    <span class="keyword">local</span> c_iv = ffi_new(<span class="string">"char[9]"</span>, key)</div><div class="line">    <span class="keyword">local</span> c_raw = ffi_new(<span class="string">"char[?]"</span>, #raw+<span class="number">1</span>, raw)</div><div class="line"></div><div class="line">    mcrypt.mcrypt_generic_init(td, c_key, #key, c_iv)</div><div class="line">    mcrypt.mcrypt_generic(td, c_raw, #raw )</div><div class="line">    mcrypt.mcrypt_generic_deinit(td)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> ffi_str(c_raw, ffi.sizeof(c_raw)<span class="number">-1</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">_M.decrypt = <span class="function"><span class="keyword">function</span><span class="params">(self, key, raw)</span></span></div><div class="line">    <span class="keyword">local</span> iv_len = <span class="number">8</span></div><div class="line">    <span class="keyword">local</span> td = self._td</div><div class="line"></div><div class="line">    <span class="keyword">local</span> c_key = ffi_new(<span class="string">"char[?]"</span>, #key+<span class="number">1</span>, key)</div><div class="line">    <span class="keyword">local</span> c_iv = ffi_new(<span class="string">"char[9]"</span>, key)</div><div class="line">    <span class="keyword">local</span> c_raw = ffi_new(<span class="string">"char[?]"</span>, #raw+<span class="number">1</span>, raw)</div><div class="line"></div><div class="line">    mcrypt.mcrypt_generic_init(td, c_key, #key, c_iv)</div><div class="line">    mcrypt.mdecrypt_generic(td, c_raw, #raw )</div><div class="line">    mcrypt.mcrypt_generic_deinit(td)</div><div class="line"></div><div class="line">    <span class="keyword">return</span> ffi_str(c_raw, ffi.sizeof(c_raw)<span class="number">-1</span>)</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">_M.close = <span class="function"><span class="keyword">function</span><span class="params">(self)</span></span></div><div class="line">    <span class="keyword">local</span> td = self._td</div><div class="line">    <span class="keyword">if</span> td <span class="keyword">then</span></div><div class="line">        mcrypt.mcrypt_module_close(td)</div><div class="line">     <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">return</span> _M</div></pre></td></tr></table></figure>
<p>使用方法比较简单，代码里面写死了是 <code>blowfish</code> 的 <code>cbc</code> 模式，并且 iv 使用 key 的前 8 个字符<br><figure class="highlight lasso"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">local</span> mcrypt = <span class="keyword">require</span> <span class="string">"mcrypt"</span></div><div class="line"><span class="built_in">local</span> m = mcrypt:<span class="literal">new</span>()</div><div class="line"></div><div class="line">-- 一系列加解密</div><div class="line"><span class="built_in">local</span> en = m:encrypt(<span class="string">'xxx'</span>,<span class="string">'yyyy'</span>)</div><div class="line"><span class="attr">...</span></div><div class="line"><span class="built_in">local</span> de = m:decrypt(<span class="string">'xxx'</span>, yyyy<span class="string">')</span></div><div class="line"></div><div class="line">-- 最后关闭</div><div class="line">m:close()</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;openresty 提供了 luajit 的支持，luajit 又提供了 ffi 库的支持。通过 ffi 可以很方便的调用 c 库的一些方法。&lt;/p&gt;
&lt;p&gt;我在项目里面用到了加解密，因为需要各语言支持，使用了 libmcrypt 库。之前通过 c 模块完成了在 lua 里
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>postgresql transaction isolation</title>
    <link href="http://wdicc.com/postgresql-transaction-isolation/"/>
    <id>http://wdicc.com/postgresql-transaction-isolation/</id>
    <published>2015-05-10T15:20:49.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>翻译自 <a href="http://www.postgresql.org/docs/current/static/transaction-iso.html，" target="_blank" rel="external">http://www.postgresql.org/docs/current/static/transaction-iso.html，</a> 内容没翻译全，供参考。</p>
<h2 id="并发控制"><a href="#并发控制" class="headerlink" title="并发控制"></a>并发控制</h2><h3 id="13-2-事务隔离级别"><a href="#13-2-事务隔离级别" class="headerlink" title="13.2 事务隔离级别"></a>13.2 事务隔离级别</h3><p>SQL 标准定义了四个事务隔离级别。最严格的就是串行化(Serializable)，根据标准定义，任何并发的串行化事务如果在相同的时间使用相同的顺序执行，那么需要有相同的执行结果。其他的三个隔离级别，都定义了在并发事务互相影响的情况下，在各隔离级别下不允许出现的一些现象。根据标准，这些现象都不允许出现在串行化这个级别。(这并不令人惊讶 – 如果为了事务的结果一致只允许同时运行一个事务，那怎么可能会出现因为事务互相影响产生的现象)。</p>
<p>在各级别禁止的一些现象如下：</p>
<p>脏读(dirty read)</p>
<pre><code>一个事务读取到另一个并发的事务还没有提交的数据。
</code></pre><p>不可重复读(nonrepeatable read)</p>
<pre><code>一个事务重复读取之前读过的数据的时候，发现数据已经被其他事务修改（就是在第一次读取之后做的提交)。
</code></pre><p>幻读(phantom read)</p>
<pre><code>一个事务重新执行一个查找符合条件的数据的查询的时候，发现返回的数据因为这期间别的事务做了提交而发生了变化。
</code></pre><p>四个事务隔离级别和对应的行为在表 13-1 中进行了描述。</p>
<p>表 13-1 SQL 标准定义的事务隔离级别</p>
<p>| 事务隔离级别               | 脏读   | 不可重复读 | 幻读   |<br>|—————————-+——–+————+——–|<br>| 读未提交(read uncommitted) | 可能   | 可能       | 可能   |<br>| 读已提交(read committed)   | 不可能 | 可能       | 可能   |<br>| 可重复读(repeatable read)  | 不可能 | 不可能     | 可能   |<br>| 串行化(serializable)       | 不可能 | 不可能     | 不可能 |</p>
<p>（译者注：这个表格是个很大的迷惑，要注意他描述的只是标准定义的，而不是 PostgreSQL 里面的情况，在 PostgreSQL 中的实际情况和上面表格标记的不一致，下面的译文里面也多次会提到。）</p>
<p>在 PostgreSQl 中，你可以使用任意的四个隔离级别。但是，在内部其实只有三个，分别对应到读已提交、可重复读和串行化。当使用读未提交这个级别的时候，实际上和读已提交是一样的，而幻读在 PostgresSQL 的可重复读级别是不可能出现的，所以在 PostgreSQL 中实际的隔离级别可能比你选的更加严格一点。这个是 SQL 标准允许的：标准里面的四个隔离级别只定义了哪种现象不能出现，没有定义哪种现象一定会出现。PostgreSQL 只提供了三个隔离级别，是因为这是唯一比较合理的把标准定义的隔离级别映射到多版本并发控制架构上面的办法。在下面的章节里面会详细讲解各个隔离级别。</p>
<p>设置事务隔离级别的语句是 set transaction。</p>
<pre><code>重要提示：有些 PostgreSQL 的数据类型和函数在事务里面有特别的表现。特别的，对于序列(sequence)(以及定义为 serial 类型的列对应的序列)的修改会立刻对所有事务有效，并且在事务回滚的时候也不会被回滚。请参考 9.16 和 8.1.4。
</code></pre><h4 id="13-2-1-读已提交事务隔离级别"><a href="#13-2-1-读已提交事务隔离级别" class="headerlink" title="13.2.1 读已提交事务隔离级别"></a>13.2.1 读已提交事务隔离级别</h4><p>读已提交是 PostgreSQL 里面默认的事务隔离级别。当一个事务使用此级别的时候，一个 select 查询(不带 for update/share 字句)只可以查到当前查询开始前已经提交的数据，(在此查询执行的过程中)永远不会查到其他并发事务执行时的未提交数据和已提交的修改。事实上，一个 select 查询可以”看“到执行开始瞬间的数据库的一个快照。不过，select 查询可以”看“到当前事务里面已经完成更新的数据，即使他们还没有被提交。同时也要注意，如果有其他事务在一个事务的第一个 select 执行之后提交了修改，那么那个事务里面的前后成功的两个 select 查询也有可能得到不同的结果。</p>
<p>update, delete, select for update, 和 select for share 这些语句在查找目标数据的时候的时候，表现和 select 是一样的：都是只能查找到在语句执行开始的时候就已经提交的数据。然而，这些目标数据可能就已经被其他并发事务修改（或者删除、加锁(locked))了。在这种情况下，即将执行更新的事务将会等待第一个执行了更新的事务的提交或者回滚（如果他仍然在执行中）。如果第一个更新事务执行了回滚，那么它的执行结果会取消，后续的更新事务会处理所有之前查找到的数据。如果第一个更新事务执行了提交，那么后续的更新事务会忽略第一个事务删除的行，然后针对已经更新过的数据上面执行它自己的操作。语句里面的查询条件（where 语句）会重新被执行来查看已经更新的数据是否还满足条件。如果满足，那后续的更新事务会在已经更新过的数据上面执行他自己的操作。如果执行的是 select for update 和 select for share 语句，那会返回或者锁定更新后的数据给客户端。</p>
<p>基于以上规则，一个更新语句可能会得到一个“不稳定”的快照。它会“看”到其他并发事务对它将要更新的数据的修改，但是“看”不到其他并发事务对其他数据的修改。这个行为会导致读已提交事务隔离级别不适用于一些复杂的查询，只适用于简单的情况。例如，想象一下在事务里面更新银行账户余额：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance = balance + <span class="number">100.00</span> <span class="keyword">WHERE</span> acctnum = <span class="number">12345</span>;</div><div class="line"><span class="keyword">UPDATE</span> accounts <span class="keyword">SET</span> balance = balance - <span class="number">100.00</span> <span class="keyword">WHERE</span> acctnum = <span class="number">7534</span>;</div><div class="line"><span class="keyword">COMMIT</span>;</div></pre></td></tr></table></figure>
<p>如果有两个类似的事务要更新 12345 这个帐号的余额，我们显然是希望第二个更新事务是基于第一个的结果来更新。因为每个语句都是更新既定的数据，所以只能“看”到更新的数据不会造成不一致。</p>
<p>在读已提交事务隔离级别里面，复杂一点的情况可能会得到预期之外的结果。例如，想象一下一个 delete 语句操作的数据被其他语句从他的限制条件里面增加或者移除。例如，假设 website 是一个包含两行数据的表，其中 website.hits 字段分别等于 9 和 10。</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">BEGIN</span>;</div><div class="line"><span class="keyword">UPDATE</span> website <span class="keyword">SET</span> hits = hits + <span class="number">1</span>;</div><div class="line"><span class="comment">-- run from another session:  DELETE FROM website WHERE hits = 10;</span></div><div class="line"><span class="keyword">COMMIT</span>;</div></pre></td></tr></table></figure>
<p>虽然在执行 update 前后，都有 website.hits = 10 的数据，但是那个 delete 语句将没有任何效果。这是因为未执行成功 update 前，9 这行数据是被 delete 忽略的，当 update 执行完毕，delete 得到锁之后，新的数据的值已经不是 10 而是 11 了，已经不再符合 delete 的条件了。</p>
<p>读已提交事务隔离级别在事务开始的时候会创建一个包含了在那个瞬间所有已提交的事务的数据的快照，同一个事务里面的后续语句会“看”到其他并发事务提交的数据。前面的问题的关键点是，单个语句是否可以得到一个持续一致的数据库。</p>
<p>读已提交事务隔离级别对于很多程序来说就已经足够了，使用起来快速简单。显然，它并不适用于所有情况。对于使用了复杂查询和更新的程序，或许需要对数据一致性要求比读已提交更加严格的事务隔离级别。</p>
<h4 id="13-2-2-可重复读事务隔离级别"><a href="#13-2-2-可重复读事务隔离级别" class="headerlink" title="13.2.2 可重复读事务隔离级别"></a>13.2.2 可重复读事务隔离级别</h4><p>可重复读事务隔离级别只能“看”到在事务开始前已经提交的数据，并且永远也“看”不到未提交的或者在事务执行期间被其他并发事务更新的数据。（当然，查询语句是可以“看”到在当前事务里面的已经执行的更新的，即使他们还没有被提交。）这么做比 SQL 标准里面针对这个隔离级别的要求严格，在表 13-1 里面表述的现象都不能发生。如前面所说，这么做标准是允许的，标准只描述了各隔离级别最低的要求。</p>
<p>这个隔离级别不同于读已提交隔离级别，在可重复读事务隔离级别里面一个查询可以“看”到事务开始的时候的一个快照，不是当前事务里面当前查询开始的时候的快照。因此，一个事务里面成功执行的 select 语句会得到相同的结果，也就是说，他们都”看“不到在事务开始之后其他事务提交的修改。</p>
<p>使用这个隔离级别的应用，应该在遇到序列化失败(serialization failures)的时候准备好重试。</p>
<p>update, delete, select for update, 和 select for share 这些语句在查找目标数据的时候的时候，表现和 select 是一样的：都是只能查找到在事务执行开始的时候就已经提交的数据。然而，这些目标数据可能就已经被其他并发事务修改（或者删除、加锁(locked))了。在这种情况下，可重复读事务将会等待第一个执行了更新的事务的提交或者回滚（如果他仍然在执行中）。如果第一个更新事务执行了回滚，那么它的执行结果会取消，后续的更新事务会处理所有之前查找到的数据。如果第一个更新事务执行了提交（真的对数据执行了更新或者删除，不是只是加了锁），那么可重复读事务会执行回滚，并且报错</p>
<figure class="highlight monkey"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">ERROR</span>:  could <span class="keyword">not</span> serialize access due <span class="keyword">to</span> concurrent update</div></pre></td></tr></table></figure>
<p>因为可重复读事务在事务开始后不能对被其他事务做了修改的数据做修改或者锁定。</p>
<p>当应用程序得到这个错误信息的时候，应该立刻中止当前事务，重新从事务开始再次执行。再次执行的时候，这个事务就可以”看“到之前被其他事务提交的修改了，所以使用新版本数据作为新事务的起点的时候，就不会再有逻辑冲突了。</p>
<p>要注意只有有更新操作的事务才需要重试，只读的事务是永远不会有序列化冲突的。</p>
<p>读已提交事务隔离机制严格保证了每个事务都得到一个完整稳定的数据库快照。However, this view will not necessarily always be consistent with some serial (one at a time) execution of concurrent transactions of the same level. For example, even a read only transaction at this level may see a control record updated to show that a batch has been completed but not see one of the detail records which is logically part of the batch because it read an earlier revision of the control record. Attempts to enforce business rules by transactions running at this isolation level are not likely to work correctly without careful use of explicit locks to block conflicting transactions.</p>
<p>提示：在 PostgreSQL 9.1 以前，序列化事务隔离级别的情况和前面描述的信息是一样的。如果需要以前的序列化事务隔离级别，那可以使用现在的可重复读隔离级别。</p>
<h4 id="13-2-3-序列化隔离级别"><a href="#13-2-3-序列化隔离级别" class="headerlink" title="13.2.3 序列化隔离级别"></a>13.2.3 序列化隔离级别</h4><p>序列化事务隔离级别是最严格的事务隔离级别。这个级别把所有已经提交的事务模为拟序列化执行，就像是事务执行完一个执行另一个，顺序的，而不是并发的。当然，类似于可重复读事务隔离级别，应用程序在序列化失败的情况下必须要准备好重试。事实上，这个级别和可重复读事务隔离级别是一模一样的，除了会监控 except that it monitors for conditions which could make execution of a concurrent set of serializable transactions behave in a manner inconsistent with all possible serial (one at a time) executions of those transactions. This monitoring does not introduce any blocking beyond that present in repeatable read, but there is some overhead to the monitoring, and detection of the conditions which could cause a serialization anomaly will trigger a serialization failure.</p>
<p>举个例子，比如有表 mytab，初始的时候如下：</p>
<figure class="highlight asciidoc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="section"> class | value</span></div><div class="line">-------+-------</div><div class="line"><span class="code">     1 |    10</span></div><div class="line"><span class="code">     1 |    20</span></div><div class="line"><span class="code">     2 |   100</span></div><div class="line"><span class="code">     2 |   200</span></div></pre></td></tr></table></figure>
<p>假设在序列化事务 A 里面执行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(<span class="keyword">value</span>) <span class="keyword">FROM</span> mytab <span class="keyword">WHERE</span> <span class="keyword">class</span> = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>然后把结果（30）作为 value 字段，class = 2 作为新行插入回去。同时，序列化事务 B 里面执行：</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> <span class="keyword">SUM</span>(<span class="keyword">value</span>) <span class="keyword">FROM</span> mytab <span class="keyword">WHERE</span> <span class="keyword">class</span> = <span class="number">2</span>;</div></pre></td></tr></table></figure>
<p>得到结果 300,并把结果和 class = 1 作为新行插入回去。然后两个事务都尝试提交。如果任意事务执行在可重复读级别，那么两个事务都可以提交; but since there is no serial order of execution consistent with the result, 使用序列化事务隔离级别的话，会允许其中一个事务提交，而回滚另一个事务，并且报如下错误信息：</p>
<figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ERROR:  could <span class="keyword">not</span> serialize access due <span class="built_in">to</span> <span class="built_in">read</span>/<span class="built_in">write</span> dependencies <span class="keyword">among</span> transactions</div></pre></td></tr></table></figure>
<p>这是因为如果 A 在 B 之前执行的话，B 的计算结果就会是 330 而不是 300,类似的，其他顺序会导致 A 得到不同的结果。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;翻译自 &lt;a href=&quot;http://www.postgresql.org/docs/current/static/transaction-iso.html，&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.postgresql.or
    
    </summary>
    
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>成长</title>
    <link href="http://wdicc.com/upgrade-myself/"/>
    <id>http://wdicc.com/upgrade-myself/</id>
    <published>2015-02-19T10:05:55.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>刚开始参加工作，通常都是钱多少，户口给不给，安逸不安逸等等这种单一原因决定去哪里工作。一般都还没那个能力综合考虑一家公司。</p>
<p>那么选择大公司？选择初创公司？还是选择业界有影响力的公司？思考了很久，最后发现，这个时候选择什么公司不重要，重要的是自己，要选择自己感兴趣的，能保留自己强烈的求知欲的公司，最好公司的业务方向就是自己感兴趣的。</p>
<p>刚进入公司这二年很重要，在此期间能学习到大量的学校学习不到的技能，比如和同事相处，怎么理解需求，代码怎么写更好，工程如何组织等等。而这些东西，通常都是靠自己学习来搞定的，通过公司的一些培训（如果有的话），通过自己的观察，通过自己从互联网等资料学习的。这个期间你要强迫自己不停的学习，不停的思考。</p>
<p>在一个公司呆大概一年到二年左右，逐渐参与几个项目之后，应该已经可以独立承担负责一些小的事情了，这个时候一般会开始遇到瓶颈，可以学习的似乎都学的差不多了，一般都会开始思考”这家公司是否适合我”，或者”自己是否考虑换个工作经历一下”，要不然就是”你看有的同学换了一个工作工资涨了50%”，这些原因加起来，可能就会考虑是不是要换个公司了。</p>
<p>那么要不要换呢？从开拓眼见上面来讲，换是有一定意义的。各公司通常有各公司的一些运作方式，有一些包括一些很好的经验。通过换工作，可以学习到不少项目运作，分工合作的方式。</p>
<p>当然通常这些事情并非一定要换工作才能学习到，通过社交也能了解一部分。另外还有一个情况，别的公司的一些成功经验，也并非一定会适用你的团队。</p>
<p>一般来讲，技术工程师有两个方向的发展。一个是资深的技术大拿，一个是管理方面的 leader。两个方向不冲突，有些人可以兼顾。技术大拿指的是那些代码能力极强，很能专研技术，对管人没有兴趣，只对自己研究的技术有兴趣的人。管理方面指的不是技术一点都不行的，一般也得对技术有一定的了解，但是更多的精力会花在组建打理团队上面，对业务比较熟悉，能很好的把业务方向和技术结合起来的人。</p>
<p>为什么讲这个呢？和换工作有关系么？首先看你的方向是哪个。如果是专研技术，那么关注的应该是这个公司是否可以提供给你一个专心专研技术的氛围。有些技术是和业务结合比较紧密的，这种倒还好，但是有些是离业务比较远的，比如研究内核。一般业务团队都不乐意养一个研究和业务方向无关的人。</p>
<p>如果是搞管理，那应该关注的是你的业务是不是有前景，你的老大负责的业务是不是有前景，你所在的公司搞的业务是不是有前景。当然，在视野比较小的时候，可能很难判断。简单点，就看看你的老大是不是让你觉得他很牛逼吧。如果你对他都不崇拜不佩服，那可能就得仔细考虑下了。</p>
<p>需要关心公司的前景吗？刚工作没两年的人可能会觉得，公司再赚钱也不会多给我发多少，反正我就赚那么多，好像和我没关系。其实是有关系的。只有公司前景好，才有能力去养活更多的人，才有更多的业务方向给大家去尝试，才有机会创造更大的财富，大家也才有机会获得更多的回报。只有不断成长的公司，你的技术能力才有机会体现，才有机会负责更多更重要的事情，也就是所谓的有更多的机会。</p>
<p>当然，可能前提是你得进入一个正常的公司，有一个正常的领导。 :D</p>
<p>两年之后，一般就会有一些事情让你负责了，不管是重要的技术还是团队或者业务。这个时候就开始考验你的 leader 能力了。领导技术研究方向来支持业务，领导团队拿到更好的成绩。</p>
<p>有时候跟着牛逼人物混会产生一种自己也很牛逼的错觉。当牛逼人物不在的时候，会猛然发现，离开人家之后自己好像啥都搞不太好。所以其实最重要的是学习牛逼人物的一些思考问题的方法，以及培养适合自己的学习思考和工作的方式。这些才是自己后面受用不尽的东西。</p>
<p>两年之后的继续发展，全看你自己的能力了。思考自己后面的路的时候，你可以给自己设想一下，如果给你5个人，你能把现在的业务做成什么样子，或者你能搞出来什么引导潮流的什么牛逼技术？</p>
<p>如果给你 20 个人呢？50 个呢？你打算怎么办？</p>
<p>这就是所谓的成长。回答不了这些问题，说明你还没有成长。如果你能答好后面那个问题，能把 20 个人的事情安排到很好，那我估计你已经不需要看这篇文章啦。:D</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;刚开始参加工作，通常都是钱多少，户口给不给，安逸不安逸等等这种单一原因决定去哪里工作。一般都还没那个能力综合考虑一家公司。&lt;/p&gt;
&lt;p&gt;那么选择大公司？选择初创公司？还是选择业界有影响力的公司？思考了很久，最后发现，这个时候选择什么公司不重要，重要的是自己，要选择自己感兴
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>《黑客与画家》读书笔记</title>
    <link href="http://wdicc.com/notes-for-hackers-and-painters/"/>
    <id>http://wdicc.com/notes-for-hackers-and-painters/</id>
    <published>2014-12-28T08:45:45.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre><code>如果某一天你想要去赚大钱，那么请记住这一点，因为这是创业公司能够成功的原因之一。大公司为了避免设计上的灾难，选择了减少设计结果的标准差。但是当你排斥差异的时候，你不仅将失败的可能性排除在外，也将获得高利润的可能性排除在外。这对大公司来说不是问题，因为生产特别优秀的产品不是它们的获胜手段。大公司只要做大不太烂，就能赢。
</code></pre><p>公司大到一定程度之后，更加希望稳定的可重复的产出，慢慢大家都会趋于稳定，不改变现有的系统。通常来说，创新和稳定肯定是冲突的，一旦选择的稳定，创新的积极性慢慢就会丧失。</p>
<pre><code>所以，viaweb 的开发人员总是与客服人员保持密切联系。客服人员坐在离程序员只有 9 米的地方，知道自己可以随时打断程序员的工作，提交新证实的 bug 的报告。遇到重大 bug，我们就算在开董事会，也会马上回来修改程序。
我们这种方式让所有人都感到满意。客户很高兴，拨打厂商服务热线是免费的，而且还被当做通风报信的人，受到郑重对待。客服人员也喜欢这样，因为这使得他们可以帮助用户，而不是对着用户读操作手册。程序员也喜欢这样，因为他们能够再现 bug，而不是通过模糊不清的二手报告了解 bug。
...... 客户支持实际上就是质量监控，也是某种程度上面的市场营销。除了记录 bug，客服人员还必须了解相关知识，回答与 bug 相关的一些问题，解释令使用者迷惑不解的功能等。有时，他们也扮演了使用者的代理人，我们会问他们哪个新功能是用户更想要的，他们总是能做出正确的回答。
</code></pre><p>短线沟通，及时响应的重要性。程序员的成就感，有时候不一定是来自于程序写的多好，能帮人解决问题有时候也会有成就感。短线能增加成就感。</p>
<pre><code>提高软件开发质量的关键在于开发的时候全身贯注，而不是降低开发速度。
</code></pre><p>这个和现代的敏捷开发做的事情类似，保证开发人员专注。</p>
<pre><code>&quot;帕金森定律&quot; 后来成为这些表现形式的代名词，它包括很多内容，其中有一条就是『因为你必须做到，所以你能够做到』。
可测量性和可放大性......如果你有一个令你感到安全的工作，你是不会致富的，因为没有危险，就几乎等于没有可放大性。
</code></pre><p>可测量和可放大性，一种衡量工作重要性的指标。</p>
<pre><code>假定软件有两个候选的新功能，它们创造的商业价值完全相同，那么我们总是选择较困难的那个功能。不是因为这个功能能带来更多的收入，而是因为它比较难。我们很乐于迫使那些又大又慢的竞争对手跟着我们一起走进沼泽地。 
创业公司就像游击队一样，喜欢选择不易生存的深山老林作为根据地，政府的正规军无法追到那种地方。我还记得创业初期我们是多么筋疲力尽，整天都为一些可怕的技术难题绞尽脑汁。但是，我还是感到相当高兴，因为那些问题连我们都觉得这么困难，那么竞争对手就更会认为是不可能解决的。
</code></pre><p>难才是体现价值的地方。</p>
<pre><code>注意，我说的是“用户需要的设计”，而不是“用户要求的设计”。我不想让读者产生一种印象，认为设计师就像厨师一样，顾客点什么菜就一模一样做出来。艺术的各个领域有着巨大的差别，但是我觉得任何一个领域的最佳作品都不可能由对用户言听计从的人做出来。
</code></pre><p>所谓的产品设计。应该是设计用户需要的，而不是用户要求的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;pre&gt;&lt;code&gt;如果某一天你想要去赚大钱，那么请记住这一点，因为这是创业公司能够成功的原因之一。大公司为了避免设计上的灾难，选择了减少设计结果的标准差。但是当你排斥差异的时候，你不仅将失败的可能性排除在外，也将获得高利润的可能性排除在外。这对大公司来说不是问题，因为生产特别
    
    </summary>
    
    
      <category term="readings" scheme="http://wdicc.com/tags/readings/"/>
    
      <category term="lisp" scheme="http://wdicc.com/tags/lisp/"/>
    
  </entry>
  
  <entry>
    <title>如何照顾糖尿病猫猫</title>
    <link href="http://wdicc.com/how-to-take-care-of-diabetic-cats/"/>
    <id>http://wdicc.com/how-to-take-care-of-diabetic-cats/</id>
    <published>2014-01-19T14:16:09.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>注1： 最前面先公布个群，名字叫做“糖猫猫”，号码是 143834033。里面好多糖尿病猫猫的主人，可以交流，大家都很热心。</p>
<p>注2：再在前面说点，本文最初是基于宠物医院使用的稀释的办法给猫打胰岛素的，不过后面发现了一个更好的办法，使用 bd 针管，具体看最后补充的吧。</p>
<p>猫的糖尿病其实和人的是类似的，估计哺乳动物都这样。和人一样，猫猫上了年纪也容易得各种老年病，糖尿病就是其中一种。好像看到资料说做过绝育的母猫的得病几率更加大。</p>
<p>我理解糖尿病应该是一种慢性病，遇到得糖尿病的猫如果救助及时，应该是可以恢复的。好的话，甚至可以恢复胰岛素的分泌，摆脱胰岛素注射。</p>
<blockquote><p>動物吃下去的食物在身體裡被轉換成葡萄糖，隨著血液在身體裡流動，提供細胞養分，並且製造能量。身體裡的胰島素則是幫助細胞從血液裡取得所需能量的媒介。在正常的情況下，葡萄糖進入身體後，胰腺細胞開始釋放胰島素，並將之分配至身體的細胞，以使他們能夠”捕獲”他們所需的葡萄糖。</p>
<p>胰腺負責製造足夠的胰島素，細心的平衡血液中的葡萄糖濃度以避免濃度過高(血醣過高症)或者過低 (血醣過低症)。然而，罹患二型糖尿病的動物，身體的細胞對於胰島素無法正確反應(亦即不會”捕獲”他們所需的葡萄糖)，加上身體無法自行處理過多的葡萄糖而導致體內葡萄糖濃度異常的高。</p>
<footer><strong>[http://catmaid.wordpress.com/2009/01/12/diabeticcat/] [如何照顧糖尿病貓?]</strong></footer></blockquote>
<h2 id="糖尿病症状的前期表现"><a href="#糖尿病症状的前期表现" class="headerlink" title="糖尿病症状的前期表现"></a>糖尿病症状的前期表现</h2><blockquote><p>糖尿病貓的早期症狀為體重減輕，食慾會明顯增加或是變的很貪吃，喝水量增加而且頻尿 ( 譯者註: 三多…吃的多、喝的多、尿的多 )。當身體無法處理葡萄糖，大腦開始釋放”多吃”的訊息以帶進更多的葡萄糖。此時，體內的葡萄糖濃度開始上升，但是因為胰島素缺乏而無法被利用，身體裡飢餓的細胞開始消耗脂肪及肌肉蛋白質以轉換為肝醣。由於這樣的過程不斷循環，血液中的葡萄糖滲入尿液中，並且將水分從細胞中帶出，導致貓咪不斷的感覺口渴,而大量喝水，而不論貓咪喝了多少水，身體仍然會一直處於脫水狀態。</p>
</blockquote>
<p>我看到的早期猫猫会表现出来，口渴，喝水多，同时尿多，饥饿，开始变瘦这些症状。</p>
<p>你会发现水碗空的很快，经常看到猫猫在喝水。同时猫砂盆里面会发现尿的也多了，经常会发现超大的猫砂球，同时猫砂也用的变多了，以前可能两天不收拾也没问题，现在一天一次都感觉很多。会发现猫砂球变粘了，不容易铲，这是因为尿里面含糖量太高。老表现出来饥饿，对以前没兴趣的东西也变的感兴趣。</p>
<p>上面总体就是我家猫初期的表现。如果能注意到，那及时把猫送宠物医院查查吧，血糖试纸验血很便宜。不过因为猫猫也不会说话，一般都会注意不到，注意到了也一般不会重视。</p>
<p>上面表现之后，就会发现猫慢慢的没精神，吃的少了，水到是还是经常喝，像我家猫总呆在饭盆水盆前面发呆，尤其是水盆，经常趴在水盆前面睡觉。这个时候猫猫症状就已经比较严重了，一般得到医院输液救治了。下面这段引用说的就是这个情况。酮酸中毒产生之后，猫猫就基本没精神加没胃口了。并且酮酸中毒之后，可能肾，肝这些部位也会开始产生问题，出现衰竭。</p>
<blockquote><p>最後由於身體不能利用葡萄糖做為能量來源，而使用體內的脂肪來取代，這些脂肪代謝產生的酮體，在體內累積過多後便產生酮酸中毒。酮酸中毒可以迅速發生或是在幾天內慢慢產生，如果不立即治療的話，則可能導致昏迷甚至死亡。</p>
</blockquote>
<h2 id="如何治疗"><a href="#如何治疗" class="headerlink" title="如何治疗"></a>如何治疗</h2><p>我总结的。不一定适合所有猫，供参考。</p>
<p>我家猫送医院的时候，就已经是酮酸中毒的症状了。中间<a href="http://wdicc.com/diabetic-cat-maomao/">几经周折</a>，久病成医，多少也可以讲讲，呵呵。</p>
<p>因为猫已经不吃东西了，所以肯定是需要输液，补各种微量元素（大夫关注的好像是钾和纳，钾元素不足就会出现没精神的状态），用短效胰岛素降血糖，让血糖持续稳定在 10 以下，不过要注意也不能太低，到 2 以下可能就会引发低血糖症状了，低血糖是比高血糖更可怕的情况。我家猫当时打的是 0.6 单位（有的地方用 u 标识单位） 的短效，我看到有网站提示说是按照体重每公斤 0.25u，我家猫当时是 2.3 kg，所以 0.6 差不多。</p>
<p>上面的目的是保持血糖数值的同时，补充身体电解质，补充体力。期间如果有了精神可以尝试喂 A/D 罐头，如果能吃东西，那我看基本就有救了。看情况可能会需要持续几天的重症监护，具体到什么时候看医生的安排吧，我感觉是看他的精神如果比较好了，就可以回家吃钾片，钾镁片等药恢复，也不用老输液，输液多也会导致血管堵塞等。</p>
<p>回家之后一个事情就是需要持续打胰岛素。那么自己验血糖，配胰岛素，打针就是不可避免的了。这三项技能我们分开说。</p>
<h3 id="验血糖"><a href="#验血糖" class="headerlink" title="验血糖"></a>验血糖</h3><p>验血糖和给人操作差不多，仪器也是和人通用的。我用的是怡成的jps7，国产的。有些进口的比如拜耳之类，机器比较贵的，试纸也贵。试纸是消耗品，像开始的时候，我家猫一天测个十几次的（2小时一次），进口的试纸就有点接受不了了。也有人进口的国产的都买，进口的几天测一次这种，平时用国产的。我觉得其实没啥必要，看个相对数就好，一般关注的就是下面几个范围。</p>
<ol>
<li>3 以下。有低血糖怀疑，如果表现出来低血糖的症状，要感觉处理。</li>
<li>3 到 7。正常的范围。</li>
<li>7 到 15。稍微有点高，但是问题不严重</li>
<li>15 到 25。有点高。</li>
<li>25 以上。很高。</li>
</ol>
<p>这上面是我总结的，那些边界不一定就是个定死的，理解大意就好。也可以参考<a href="http://petdiabetes.wikia.com/wiki/Blood_sugar_guidelines" target="_blank" rel="external">这里</a>写的，这里的专业。</p>
<p>顺便说下低血糖的症状。低血糖的表现在人就是头晕无力。猫不会说话，表现是无力，软趴趴的，你扶起来他会继续趴着，像块布一样，怎么摆布都没反应，那基本就是低血糖了，这个时候要赶紧送医院，看情况是输液，打针还是喝水补充葡萄糖。但是如果血糖低于 3，但是猫没有低血糖的症状，也不用着急，喂点吃的应该就会好起来，不要着急补充葡萄糖。低血糖是很致命的，会导致脑部缺能量，导致脑部出问题什么的，所以要慎重。</p>
<p>给猫采血一般可以是耳朵采血或者脚垫采血。据说脚垫采血如果弄不好的话，容易发生感染（大概是因为脚比较容易接触到脏东西），所以一般都是耳朵采。买血糖仪一般会带一个采血的笔，那个玩意很好用。可以参考下<a href="http://www.youtube.com/watch?v=4CDew2sNOcI&amp;list=WLocLdlbhE3tvtQuJjfqU5tUwWrucncUWR" target="_blank" rel="external">这个视频</a>。如果猫耳朵毛长可以剃一下，那个凡士林可以用红梅素膏代替，都是不太贵的东西。扎之前如果用酒精处理过的话，要定酒精干了才能扎。扎的时候如果不容易出血，可以调整一下笔的针头的位置，不过别调多了把猫耳朵扎穿。。。</p>
<h3 id="配胰岛素"><a href="#配胰岛素" class="headerlink" title="配胰岛素"></a>配胰岛素</h3><p>胰岛素我买的是来得时的长效，大概 180 一支，3ml 300个单位。还有短效可以选，不过一般是说长效的控制的好一点。短效和配合长效用，长期还是靠长效控制。</p>
<p>目前我家猫是每次 1.5u 每天 3 次，8 小时一次。早期的时候是每次 0.5u，后来慢慢调整涨上来的。我看有人每次 6u 每天 2 次的。还有每天 4 次的，猫有区别，不能照搬，得找到适合自己和自己猫的方法。看到一个说法是是按照体重来打，每公斤 0.25u，不过如果控制不住也没办法，只能加量。</p>
<p>就是说先得确认个自己猫的胰岛素的量是多少，这可能有个调整的过程，所以掌握算法还是有必要的，呵呵。</p>
<p>然后针管，因为每次打的量也不多，所以买 1ml 的那种就可以，淘宝上面便宜的几分钱一个，要注意针头不要太粗，否则猫可能会疼。只是要注意，针头里面其实是有空间的，那些是不算到刻度里面的。但是打针的时候那里面的其实是打不出来的。但是用它做度量的时候要注意是否需要算上针头里面的。</p>
<p>接下来买注射用水，就是稀释胰岛素的。因为 0.1ml 就是 10 个单位，所以一般需要稀释才能用。这个东西也不贵，我买到的是 2ml 装的。</p>
<p>万事俱备，就差公式了。胰岛素 1ml 是 100 个单位。</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="number">100</span>x<span class="regexp">/(k+x) = y/</span>m</div><div class="line"></div><div class="line">其中的变量如下，前三个单位是 ml</div><div class="line"><span class="string">k:</span> 计划使用的注射用水的总量</div><div class="line"><span class="string">x:</span> 计划使用的胰岛素的总量</div><div class="line"><span class="string">m:</span> 每针计划注射的总量</div><div class="line"><span class="string">y:</span> 每针要注射的胰岛素的量，单位是单位 u</div></pre></td></tr></table></figure>
<p>上面公式的四个变量，确定三个就可以算第四个了。举几个例子。</p>
<p>比如计划每针 1 个单位（y=1），为了节省注射用水，每针计划注射总量 0.05ml（m=0.05）。还差 2 个变量，先简单演算下，比如计划 2ml 注射用水都用掉，那么 k 就是 2ml，算一下胰岛素是多少。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">100</span>x/(<span class="number">2</span>+x) = <span class="number">1</span>/<span class="number">0.05</span> = <span class="number">20</span>/<span class="number">1</span></div><div class="line">x = <span class="number">0.5</span>ml</div></pre></td></tr></table></figure>
<p>胰岛素是 0.5ml。两方面抽出来之后，还需要有混合的地方，一般就选注射用水的瓶子就可以，所以根据结果只需要简单的抽 0.5ml 胰岛素，打入注射用水里面，得到的就是 0.05 含 1u 胰岛素的混合液。</p>
<p>再来一个例子，比如计划多打点 y=1.5, m=0.05, k=2ml，看看胰岛素应该是多少。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">100</span>x/(<span class="number">2</span>+x) = <span class="number">1.5</span>/<span class="number">0.05</span> = <span class="number">30</span>/<span class="number">1</span></div><div class="line">x=<span class="number">60</span>/<span class="number">70</span>=<span class="number">0.86</span></div></pre></td></tr></table></figure>
<p>胰岛素是 0.86ml。虽然 0.06 不太好抽，但是似乎勉强也可以。不过难点是，2ml 的注射用水的瓶子里面，是放不进去 0.86ml 的，放 0.5ml 就差不多满了。。。。所以这样是不行的。那怎么办？</p>
<p>也简单，我们先确定胰岛素的量，既然 0.86ml 放不下，我们定个 0.7ml 试试看能不能放下。</p>
<figure class="highlight lsl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="number">100</span>x0<span class="number">.7</span>/(k+<span class="number">0.7</span>) = <span class="number">1.5</span>/<span class="number">0.05</span> = <span class="number">30</span>/<span class="number">1</span></div><div class="line">k= <span class="number">49</span>/<span class="number">30</span> = <span class="number">1.63</span></div></pre></td></tr></table></figure>
<p>这样，注射用水是 1.63ml ，然后胰岛素 0.7ml，混合后是 2.33ml，是可以放的下的。注射用水里面需要抽出来 2-1.63=0.37ml，然后就可以把胰岛素打进去了。要注意的是，抽出来的时候，针头里面是有空间的，那里面的量是不算到刻度里面的，把针头留空抽大概 0.37ml 就可以了。</p>
<h3 id="打针"><a href="#打针" class="headerlink" title="打针"></a>打针</h3><p>第一次打针可能会比较紧张，其实这是个非常简单的事情。可以在喂食的时候打针，糖尿病猫一般都是饿死鬼一样，根本不会理会你打针的。打针的位置是肋骨那里，或者大腿根部上面。把皮揪起来，在皮的中部靠下的位置，可以参考<a href="http://petdiabetes.wikia.com/wiki/Syringe" target="_blank" rel="external">这里</a>，左侧的正确的图，扎进去，推药就可以了，要注意不要扎穿了。。。。如果觉得有需要可以先用酒精擦拭，不过要等酒精干了再打。</p>
<h2 id="后期保养"><a href="#后期保养" class="headerlink" title="后期保养"></a>后期保养</h2><p>这块我还没有太多经验，因为我家猫还没有脱离胰岛素，只能是讲讲道听途说的一些。</p>
<p>猫的状态比较稳定之后，就进入长期和糖尿病斗争的阶段了。可以喂糖尿病猫粮，淘宝不让搜糖尿病，可以搜 “wd 猫粮”。不过是，喂干粮容易让血糖起来，我看有些人常年喂罐头，不过感觉有点贵，而且，湿粮吃多了会得口炎。。。。据说也可以喂蒸鸡胸，但是又说鸡肉含磷多，吃多了也不好。。。。所以我也不清楚。目前在尝试喂鸡肉看看，也不敢多喂。</p>
<p>现在情况就是一天三针，每次打针后喂干粮，两针期间饿了就喂点鸡肉，没鸡肉就少吃点干粮。大致就这样了。等我有了经验再来补充。</p>
<h2 id="update-2014-1-31"><a href="#update-2014-1-31" class="headerlink" title="update 2014.1.31"></a>update 2014.1.31</h2><p>翻了一些资料，看到<a href="http://petdiabetes.wikia.com/wiki/Low-carb_diet" target="_blank" rel="external">低碳水化合物疗法</a>。讲人吃低碳的食物有助于糖尿病恢复，那理论上猫也可以。并且<a href="http://petdiabetes.wikia.com/wiki/Category:Feline_regulated_cases" target="_blank" rel="external">这里</a>有一些低碳疗法的实例。</p>
<h2 id="update-2014-2-2"><a href="#update-2014-2-2" class="headerlink" title="update 2014.2.2"></a>update 2014.2.2</h2><p>低碳疗法的主要理论支持是讲猫可以把脂肪转化成葡萄糖，举例说野猫只吃老鼠，但是也可以活的很好。干粮得依靠碳水化合物形成最后的形状，所以干粮离不开碳水化合物。这里有个<a href="http://web.archive.org/web/20060616054707/www.geocities.com/jmpeerson/dryfood.html" target="_blank" rel="external">列表</a>，列出来了各种干粮的碳水化合物含量，里面最低的就是 Innova EVO Cat &amp; Kitten，这个在淘宝有卖，不过据群里人说，这个好像有点油也不太好，但是脂肪含量高了，肯定就油了啊，我也不清楚了。我现在喂的是 hills W/D 猫粮，这个倒是不油，不过感觉好像应该喂 M/D 才对……</p>
<h2 id="update-2014-2-9"><a href="#update-2014-2-9" class="headerlink" title="update 2014.2.9"></a>update 2014.2.9</h2><p>目前找到的靠谱一点的干粮有下面这些。</p>
<ul>
<li>innova evo 英诺华（凌采露华）evo</li>
<li>hills m/d 希尔斯 m/d</li>
<li>Royal Canin Veterinary DS46 皇家 DS46</li>
</ul>
<p>这几个都不便宜，淘宝上面差不多一公斤 70 - 100 块钱。</p>
<h2 id="update-2014-3-1"><a href="#update-2014-3-1" class="headerlink" title="update 2014.3.1"></a>update 2014.3.1</h2><p>这几天 hills md 和 evo 都断货了，只好开发新的。今天翻了一下，发现 <a href="http://www.petcurean.com/for-cats/go/" target="_blank" rel="external">petcurean</a> 的 go 品牌的猫粮似乎也可以，查了紫色包装的 FIT + FREE Chicken, Turkey + Duck （淘宝上面关键字是七种肉）和绿色包装的三种鱼，碳水化合物含量都是 13% 左右。今天买了2斤似乎效果还行，试试看。</p>
<h2 id="update-2014-6-16"><a href="#update-2014-6-16" class="headerlink" title="update 2014.6.16"></a>update 2014.6.16</h2><p>好久没有更新了。再次更新下。</p>
<p>饮食上面，自上次开始使用七种肉之后，一直到今天都在喂这个。一天打几次针喂几次。中间饿了就喂点蒸鸡胸肉。开始的时候食量很大，总是表现出很饿的样子，后来随着体重增加，慢慢的就吃的少了。</p>
<p>打针上面，开始打的是 1 个单位，后来改成 1.5 个单位，但是还是发现会有 20 多血糖的情况，就增加了一次打针，一天三次打针。后来持续了一段时间之后，血糖降到了 10 几，就把打针改回了一天 2 次，每次 2 单位。持续了一段时间之后，出现了小于 10 的血糖，大于 10 的情况比较少了，就开始减量到 1.5 了。目前是 1.5 单位一天两次。这两天测试很多时间都是 10 以下了，可能需要考虑再减量了。</p>
<p>要注意猫吃完干粮血糖肯定会增加，这个时候别着急加量，最好过个 1,2 个小时再看，如果还是高，那可能是需要加量了。</p>
<p>我家猫现在吃的变少了，尿的也明显变少了，目前感觉恢复的还可以。正在考虑减量或者减打针次数。</p>
<h2 id="收集到的一些参考资料"><a href="#收集到的一些参考资料" class="headerlink" title="收集到的一些参考资料"></a>收集到的一些参考资料</h2><ul>
<li>关于胰岛素剂量调整的一些经验 <a href="http://blog.sina.com.cn/s/blog_59c48f3f0102eedw.html" target="_blank" rel="external">http://blog.sina.com.cn/s/blog_59c48f3f0102eedw.html</a></li>
<li>一些详细的照顾猫猫的经验 <a href="http://bbs.movshow.com/thread-412475-1-1.html" target="_blank" rel="external">http://bbs.movshow.com/thread-412475-1-1.html</a></li>
</ul>
<h2 id="update-2014-11-30"><a href="#update-2014-11-30" class="headerlink" title="update 2014.11.30"></a>update 2014.11.30</h2><p>在群里朋友的推荐下，已经使用了一段时间的 bd 针管了。bd 针管和普通针管主要的区别如下：</p>
<ul>
<li>bd 针管没有针头，这样打针的时候就不会损失针头里面的药。也不用担心隐藏的气泡什么的。</li>
<li>bd 针管没有的刻度和来得时搭配之后，刚好可以理解成是单位，一个刻度是 0.5u。</li>
<li>可以不用提前稀释配药了，用的时候从来得时抽就可以。</li>
<li>bd 针管针头更加细，猫没有感觉。</li>
</ul>
<p>好处可能还不止这些了，用起来还不错，推荐使用。购买的话，在群里面有人卖，一次买一大盒，然后可以用好久。我目前在重复使用，基本是一周换一个。用的时间长了会发现针头变钝，最好多换。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;注1： 最前面先公布个群，名字叫做“糖猫猫”，号码是 143834033。里面好多糖尿病猫猫的主人，可以交流，大家都很热心。&lt;/p&gt;
&lt;p&gt;注2：再在前面说点，本文最初是基于宠物医院使用的稀释的办法给猫打胰岛素的，不过后面发现了一个更好的办法，使用 bd 针管，具体看最后补
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
      <category term="diabetic" scheme="http://wdicc.com/tags/diabetic/"/>
    
  </entry>
  
  <entry>
    <title>毛毛的病情</title>
    <link href="http://wdicc.com/diabetic-cat-maomao/"/>
    <id>http://wdicc.com/diabetic-cat-maomao/</id>
    <published>2014-01-18T14:16:09.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<h2 id="第一篇"><a href="#第一篇" class="headerlink" title="第一篇"></a>第一篇</h2><p>我家两只猫，一只叫妞妞，现在大概11岁多，一只叫毛毛，现在大概10多岁。两只都陪伴我们超过 10 年了，现在生病的是毛毛，毛毛是我从出满月就开始养的。</p>
<p>大概最近一个多月，发现的毛毛不太爱吃猫粮，总是蹲在水盆猫粮盆前面发呆，开始还觉得好玩，不知道他再思考什么。大概是 12.28 周六，发现毛毛好像精神头也没了，12.29 周日早上，发现好像更加严重了，就赶紧抱到了楼下的宠物医院（京东万康，发现这医院还在点评的推荐医院列表里面），医生给测了体温，说是体温低，挺危险的，建议做个检查，直接给我一个单子，650。缴费之后，开始做检查，好像是验了血，生化，x光（单子和化验结果最后也没给我们，化验结果我们拍了照片。现在想想，当时应该和他们闹一通的，太恶心了），检查结果出来后，直接拿来一个单子，就是医院那种治死了也不负责什么的让我签，我就说你们这太扯了把，啥毛病不和我说就让我签这个，那个医生赶紧就开始和我说血糖还有什么xx有点高，然后就指着x光说肝肾啥的有毛病，然后说膀胱有憋尿的情况，说可能是结石之类的，说是体温低挺危险的啥啥的，我问怎么办，说是先让他排尿，说是弄个导管，或者做个穿刺啥的，我一听就觉得不太靠谱，猫都这样了，不会起因是尿憋的吧，而且他们也没个具体的说法说到底是什么毛病。我就和我老婆说到观赏把。</p>
<p>到了观赏是项夫给看的，继续开化验，之前600 多的医生就是拿着手机看了会，最贵的生化没开，验血拍B超。我们去的时候刚好中午，毛毛精神那会已经很差了，b超的大夫去吃饭了，我老婆哭着找了半天大夫才来了一个给开始b超，所有结果出来后，基本就是尿道没问题，肝功能基本正常，有点肾衰竭的的情况，然后就是血糖高 28。就开始按照糖尿病治了，输了6个小时液，输完之后我们担心胰岛素打多了血糖变太低（是同再那看病的一个主人提醒的，说他见过先例），就找大夫又验了血糖，大概是十几，还算可以。然后就回家了。</p>
<p>昨天 12.30 周一，又去输液，在车上的时候发现这小家伙比第一次去力气大了好多，一路叫，我和老婆还挺高兴，感觉是再变好，后来到安贞那块的时候突然不叫了，吓了一跳，到了医院好多人排队，和大家说了一下，大家都说你快先看把，我们插了个队。换了个大夫，继续让验血，验完之后说血糖是 18 还是高，就继续输液到半夜。中间验了一次血糖，降到了10 以内，还验了一次尿，好像是 4++，也不知道和人的是不是一样。</p>
<p>这两天我和老婆两个人眼泪都哭干了，我一个大老爷们，昨天本来去上班的，说让我老婆带着去看，结果一个人做地铁就忍不住的掉眼泪，到了单位一想起来猫就想掉眼泪，后来请了半天假，回家了。</p>
<p>目前我们感觉毛毛每天输液什么的，应该还能持续一段时间，他现在也没胃口，只喝水不吃东西，现在就是用针管再喂那种婴儿吃的果泥（鱼味道的），他到是不吐，不过喂不多，一会就会开始反抗，所以不知道有没有糖尿病猫猫的主人有没有什么经验可以传授的，多谢了。</p>
<p>另外，各位猫猫主人，如果发现猫有食欲不振或者守着盆子发呆的情况，一定要注意，因为动物的耐受力比较强，他们什么东西都不吃的时候，病基本就已经很严重了。</p>
<h2 id="第二篇"><a href="#第二篇" class="headerlink" title="第二篇"></a>第二篇</h2><p>今天是 2013 年最后一天，继续带毛毛去看病。今天去了本来想找郑义大夫（是个女大夫），结果她进来开会，没找到，并且之前见过相夫，还有一个姓郭的大夫都没来，只好找了一个新的叫做张炎，就是这个傻逼差点把毛毛害死。</p>
<p>今天测血糖是 17，这样这三天测出来的血糖依次是 28, 18, 17。这个大夫也是想做个生化，我们因为做过了，没让做，可能他发现也没什么可以做的化验了，比较郁闷，就说给开3天的药，我想了下明天1.1 医院好像放假，就说开吧，然后给开了 6 个单位的胰岛素，注意是 6 个单位，3 个单位的长效，3 个单位的短效。而我们之前打的都是 0.6 个单位的短效，等于他一下放大了 10 倍。药是我开的，我也没注意这个单位的问题。打完之后开始输液。大概输了 2 个多小时，我老婆找到了郑义大夫询问毛毛的情况，郑大夫就过来看了一下，摸了一会肚子，说有点尿，有点粪便（其他大夫都是让去做b超啊，化验啊去测这个，只有郑大夫是上手摸的，郑大夫还给其他几个猫摸来着），给小力气挤了一下尿看是不是能出来，结果毛毛就开始撒尿了。其实之前毛毛一直想下地，估计就是想尿的。</p>
<p>然后郑大夫就随口问了一句胰岛素打了多少，我们就赶紧翻单子，说不用翻，就去问护士，护士说是 6 个，郑大夫当时估计就蒙了，确认了好几次，就和护士说拿葡萄糖来打，另外安排了赶紧测血糖。血糖结果是 6.9。郑大夫解释说短效大概 4 个小时可以排出去，长效 4 个小时之后才起作用，我们猫现在就这么低的血糖，那等到了晚上长效起作用，那就得低血糖了。所以持续打了几个小时的葡萄糖，之后又验了一下，7点几，还好。然后让我们先回来了，说今天晚上2，3点的时候是长效起作用的关键时候，说得观察看看猫是不是比较低迷。另外让我们回来也给毛毛喂些东西，补充下血糖。</p>
<p>今天毛毛回来虽然看着还是腿软，但是居然自己跳上了宜家的小凳子了，然后上了沙发，现在在我腿旁边睡着了。一会还得想办法给他喂点吃的，希望今天晚上没事。唉。看病遇上傻逼大夫真没办法，据说前几天就有只猫也是让他给搞到低血糖了，差点死了，这大夫我觉得可以上黑名单了都，还专家呢。</p>
<p>郑义大夫真是个好大夫，在另一个帖子说再伴侣被一个星期干了三次手术的猫，今天去了说是自己吃了一点点鸡肝，开始吃东西了。并且今天明显状态好了很多。</p>
<p>今天有只在那边抢救了好几天的狗走了，心脏病，我们第一天去的时候就在那抢救了，老头老太太轮番给守夜，今天没挺过去。我老婆伤心的哭了几把，唉。</p>
<h2 id="第三篇"><a href="#第三篇" class="headerlink" title="第三篇"></a>第三篇</h2><p>今天是 2014 年第一天，昨天晚上回来就加了个精华区里面糖尿病猫妈的糖猫猫群，和里面有几个病友交流了下情况，感觉毛毛真是有救了。</p>
<p>昨天一晚上回来毛毛就比较嗜睡，在床边睡了一晚上。今天早上我看毛毛还在持续睡，感觉状态有点不对，发现他自己睡的地方尿了一泡，要知道前几天可没这个情况，他虽然难受也是自己去厕所的。所以我就去搜了一下低血糖的症状，发现嗜睡，腿软毛毛身上就有，早上起来持续喂了几次饭和水，好像没多少改善，楼下买了些葡萄糖，调成 10% 的，喂了 10ml，发现好像也没多少改善，我们也不敢多喂了，观赏今天郑大夫休假，我们也不敢去了，想起来糖猫猫群里面有推荐纳吉亚，就打电话问了下，结果郭大夫刚好上班，就开车过去了。</p>
<p>纳吉亚比较小，去了后挂号也没收钱，郭大夫比较忙。毛毛的状态看着不太好，等到了我们，我老婆忍不住又开始哭了，郭大夫看了下情况，就赶紧安排吸氧，氯化钾，葡萄糖两个一起输，然后测血糖，都已经到 2.x 了，晚点估计都得挂了。持续输了一会，再验血糖到了 10 多之后就停了葡萄糖了。然后好像给吃了补钾什么的药，因为纳吉亚地方实在太小，所以后面基本是我老婆在看着猫，所以我也不是很清楚具体打了什么针，吃了什么药。总之就是下午我观察毛毛的状态感觉是好很多了，比前几天都好。6点多他们下班的时候，郭大夫过来安排晚上的治疗，因为他们不是 24h，所以晚上得我和我老婆一起弄了。教了我们怎么测血糖，怎么打胰岛素，怎么喂药什么的。还给准备了几十个胰岛素的针，0.5 和 1 个单位的各好多。另外还准备了葡萄糖注射液。让我们到家之后每个小时测试一下血糖情况，根据血糖情况，打不同量的胰岛素，或者打葡萄糖补糖。还留了电话，说要是出现呼吸急促，1 分钟超过 50 次的话，或者有什么异常情况的话，就给他打电话。总之是把晚上都安排妥了，让我们明天早上 9 点他们开门就去，继续治疗。这大概就是今天的情况了。</p>
<p>纳吉亚这边收费项目比观赏少了很多，比如观赏挂号就是30，吸氧针管输液都不少钱。在纳吉亚这边的时候，有些项目就不收钱了，比如吸氧针管，吸氧没收钱，给我们配了十几个胰岛素针，只是收了针管的钱和一大瓶的钱，等于免费给配的。旁边小猫的纸尿片也是他们免费给的，观赏是 2.5 一个买的。我昨天下单买了50片，20多块钱，和他们那个是一样的。因为下午需要一个小时测试一下血糖，郭大夫还说诊所的收费高，让我们自己买试纸用他们的仪器测。并且今天晚上因为需要持续观察血糖，还把血糖仪让我们带了回来。</p>
<p>今天下午老婆一直再骂观赏的那个张炎，毛毛真的是差点就被他害死了。现在看毛毛的状态已经非常好了，今天回来之后吃了不少郭大夫给开的 ad罐头，因为还输着液，所以要固定毛毛再一个地方待着，现在我老婆正和他再斗争呢，毛毛的性格一直就不会老实再一个地方待着的，现在看来状态真是恢复了。</p>
<p>感谢各位的祝福，新年第一天，毛毛要重生啦。</p>
<h2 id="第四篇"><a href="#第四篇" class="headerlink" title="第四篇"></a>第四篇</h2><p>今天是 2014.1.3，这两天没来更新了。今天更新下。</p>
<p>1.1 回来之后按照郭大夫要求输着液，郭大夫的意思是先调整身体状态，再调血糖。带了很多胰岛素葡萄糖啥的回来，然后基本2个小时检查一下血糖，然后根据情况考虑打胰岛素。因为毛毛总动，所以我和老婆两个人换着看，每人也就睡了3个小时，1.2 早上8点多就出门去纳吉亚继续输液，检测到一些什么值异常，怀疑心脏啥的毛病之类，所以继续输液。1.1 早上的时候看毛毛的情况明显已经好转了，活泼多了。这两天因为是工作日，把我老婆送过去之后，我就去上班了。下午提前请假下班再过去接她回家。昨天也就是 1.2 晚上。我和老婆继续换班，每人睡了 3 个小时，10点多打了长效胰岛素，持续观察了一晚上的血糖情况，每小时一记录。1.3 也就是今天早上，继续去纳吉亚输液。</p>
<p>今天晚上我和老婆总算是可以休息了，不用盯着了。这两天毛毛食欲已经都恢复了，不止吃罐头，连给另一只猫的普通猫粮都吃，不过我们没敢喂，还是继续给 ad罐头。打算明天开始喂处方猫粮。今天晚上的任务就是 10点多打一个长效，然后检测下血糖情况，早上起来继续去医院输液调整。今天晚上总算可以好好睡一觉了。</p>
<p>截止到今天，基本可以认为毛毛已经恢复了。剩下的工作就是针对糖尿病的持久战了。</p>
<h2 id="第五篇"><a href="#第五篇" class="headerlink" title="第五篇"></a>第五篇</h2><p>好久没更新了，最近毛毛的病已经基本稳定了。现在持续在给他打针，每天目前要吃的要水看着好像还行。血糖现在也是测一次不测一次的，好像有点懒散了，不过持续一段时间看看吧，先这样了。等有时间，整理一下糖尿病猫的照顾方法。</p>
]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;第一篇&quot;&gt;&lt;a href=&quot;#第一篇&quot; class=&quot;headerlink&quot; title=&quot;第一篇&quot;&gt;&lt;/a&gt;第一篇&lt;/h2&gt;&lt;p&gt;我家两只猫，一只叫妞妞，现在大概11岁多，一只叫毛毛，现在大概10多岁。两只都陪伴我们超过 10 年了，现在生病的是毛毛，毛毛是我从
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
      <category term="毛毛" scheme="http://wdicc.com/tags/%E6%AF%9B%E6%AF%9B/"/>
    
      <category term="diabetic" scheme="http://wdicc.com/tags/diabetic/"/>
    
  </entry>
  
  <entry>
    <title>campus recruiting</title>
    <link href="http://wdicc.com/campus-recruiting/"/>
    <id>http://wdicc.com/campus-recruiting/</id>
    <published>2013-10-07T08:38:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>去年就参加了校招的笔试和面试，不过都是在北京，和其他同学的经验交流也不是很多，今年参加了外省3个地区的校招，有点心得记录一下。</p>
<h3 id="笔试题"><a href="#笔试题" class="headerlink" title="笔试题"></a>笔试题</h3><p>笔试题非常重要，因为第一轮筛选全靠他了。</p>
<p>笔试题的难度要考虑好，需要把哪些代码能力差的，思路不靠谱的都筛掉。当然通过一两道题筛人有可能漏掉好的，但是这种几率非常小，真漏掉也没办法，毕竟一般能通过的人会很多的。</p>
<p>我的经验是，第一题出一道实际中存在的问题，但是又得让只会 c/c++ 的同学做起来不是很复杂的，不能只想着用 python 一句话就做出来之类，那样阅卷会很困难。比如把一句英文中所有单词的首字母大写，这种题就很好。但是比如给两个文件找他们共存的字符串就不太好，只会 c 语言的同学做这个题会很费劲。</p>
<p>第二题稍微要有点区分度，要考察下数据结构相关的内容。比如 hash 懂不懂，排序算法会不会之类。</p>
<p>我觉得笔试时间不宜太长，一道题给 20 分钟足够，也避免了不会的人在那瞎掰一通，将来阅卷困难。</p>
<p>笔试也要注意考场纪律，不允许交头接耳，能隔开坐最好，不能的话，可以考虑让先来的都隔开，后来的往进插，这样能隔开好朋友，能最大限度避免作弊。看到作弊的要提醒一下，提醒无效的就收卷子，或者调座位。</p>
<h3 id="面试"><a href="#面试" class="headerlink" title="面试"></a>面试</h3><p>一个人一天大致能面试 15 个左右，差不多 30-40 分钟一个。</p>
<p>面试考察三个方面。</p>
<ul>
<li>搞过的项目，实验的方向，是否都弄明白了。这个一般就是一边讲，一边问，抓到点就详细问一下，看看是否确实掌握了，同时也能考察到他的学习能力。</li>
<li>学校学的东西是否都扎实。这也就是所谓的基础知识了。一般就是数据结构算法，网络等。</li>
<li>沟通交流是否顺畅。是不是能很好的理解问题，能通俗简单的讲明白学到的东西。</li>
</ul>
<p>就我面试的经验，我感觉上面三个方面就足够了，如果都觉得可以，那基本就没问题了。如果某个方面有缺陷，那还得看其他方面是否有很多的加分。</p>
<h3 id="面霸"><a href="#面霸" class="headerlink" title="面霸"></a>面霸</h3><p>对于面霸，也不要直接拒绝，最好最后一天统一给安排一次笔试，出一道题考察一下。这题一定要有区分度，类似笔试题的第二题。否则阅卷很困难。题做的好的，可以安排面试一下。不要在面试中间插入面霸，对其他同学不公平。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;去年就参加了校招的笔试和面试，不过都是在北京，和其他同学的经验交流也不是很多，今年参加了外省3个地区的校招，有点心得记录一下。&lt;/p&gt;
&lt;h3 id=&quot;笔试题&quot;&gt;&lt;a href=&quot;#笔试题&quot; class=&quot;headerlink&quot; title=&quot;笔试题&quot;&gt;&lt;/a&gt;笔试题&lt;/h
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>how to finding a job for graduates</title>
    <link href="http://wdicc.com/how-to-finding-a-job-for-graduates/"/>
    <id>http://wdicc.com/how-to-finding-a-job-for-graduates/</id>
    <published>2013-10-07T07:43:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>昨天晚上胃难受起来翻了会知乎，回答了<a href="http://www.zhihu.com/question/21721705/answer/19228492?utm_source=weibo&amp;utm_medium=weibo_share&amp;utm_content=share_answer&amp;utm_campaign=share_button" target="_blank" rel="external">一个问题</a>，也算校招的一个总结了。包含了给准备找工作的毕业生的一些建议。好久没写 blog 了，粘贴到这里除除草。</p>
<p>刚好做了几天校招，或许对你有帮助。</p>
<p>非计算机相关专业的同学，一般一些算法基础会稍差（当然也有自学数据结构且弄的比较明白的人），比较偏向实际应用开发方面，但是要注意并不是说做过很多类型的开发就会有很多的加分，而是要注重深入。</p>
<p>招聘一般都会有笔试，笔试考察的是你写代码和解决问题的能力，随便用什么语言，能解决问题就可以。首先你得过笔试这关，写不了代码的，开发肯定是没办法招的。</p>
<p>然后就是面试，比如就针对你做的开发，我会提问几个 python，java，html 相关的技术问题，看你是否确实使用并且掌握了他们的基本原理。开始会是一些非常简单的问题，比如 python 如何打印一个 dict 的所有 key，如何做类继承，如何调用执行外部命令等，就这些简单问题如果能答上来，一般会继续问一些相对深入的，了解下你熟悉的程度。这一关需要你对一些基础问题能答上来，如果后续也能答上来，那这方面的得分会比较高。如果基础问题答不上来，表示经验要么是瞎掰的，要么就是兴趣不在开发没用心研究过，那我基本不会给过。</p>
<p>如果实际使用和学习过的东西都还算明白，那么后续会考察一些算法基础的东西，各种数据结构里面的东西，不过针对这种跨专业的，要求不会特别高，如果实在没了解过，那也没有办法。如果了解过且比较明白，那会有加分。不会也不会减分。</p>
<p>此外还会考察交流沟通能力，思路是否清晰，思维是否敏捷等，这些方面好的话，会有加分。要注意这块如果有严重问题的，也不会给过，因为开发工程师是需要和其他人做配合工作的，如果沟通或者需求理解有问题，那是不行的。</p>
<p>综合上面三块，看最后的结果。可以看出来，非计算机相关专业的，还是多少有点吃亏的。<br>哦对了，这是我们公司的要求，可能稍微有点高，就你贴出来的经验看，如果确实都是你做出来的，我感觉你至少找个开发的工作应该是没太大问题的，可能问题是在起点会是在哪里，是在大公司还是二流三流公司，呵呵。</p>
<p>另外对于你想做 android 开发，其实并不是说你有过类似经验就只能找那个方向的工作，主要还是看你的兴趣在哪里，一般大学的那点经验对于一个公司来说，基本没什么用，太浅了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天晚上胃难受起来翻了会知乎，回答了&lt;a href=&quot;http://www.zhihu.com/question/21721705/answer/19228492?utm_source=weibo&amp;amp;utm_medium=weibo_share&amp;amp;utm_con
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>octopress and jeklly 1.0.1</title>
    <link href="http://wdicc.com/octopress-and-jeklly-1-dot-0-1/"/>
    <id>http://wdicc.com/octopress-and-jeklly-1-dot-0-1/</id>
    <published>2013-06-12T13:45:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>自从 jeklly 1.0.x 发布之后，我的 octopress 站点就在 github，gitcafe 上面更新不了了，写了新帖子然后 push 之后，会收到个邮件，说 generate site faild。</p>
<p>等等。。这个不是静态站点吗？generate 你妹阿！！然后就找阿找阿找解决办法，尝试过下面这些</p>
<ul>
<li>touch 一个 .nojeklly 不让它 generate</li>
<li>找 octopress 支持 jeklly 1.0.1 的新版本</li>
<li>google 之，怎么可能就我遇到问题了呢</li>
<li>使用 jeklly 1.0.1 单独搭一个，不用 octopress 了</li>
<li>…其他忘记了的。。</li>
</ul>
<p>悲剧的是，以上这些方法没一个搞定了</p>
<ul>
<li>某处搜到的这个 .nojeklly 完全不管用</li>
<li>octopress 2.1 这个 branch 支持 jeklly 1.0.1，可惜没能让他运转起来。。具体 release 日期似乎还没看到。。。</li>
<li>google 不到有用的信息，唯一有用的就是有人给 octopress 提的 pull request，可惜被 merge 到 2.1 了</li>
<li>这个倒是简单，可惜的是 octopress 其实背后做了很多事情，单纯的拿弄 post 过去发现有些文件解析不了，我遇到的是 <code>``` </code> 这个标记，是 octopress 支持的，可惜我的 post 里面好多都是这个。另外还有主题阿等等这些。</li>
</ul>
<p>综上，就觉得，nnd，这破玩意怎么这么复杂？！</p>
<p>后来不知道哪天突然想到，我之前测试 hexo 的时候，它没有 jeklly 一说，不是也可以么？另外，github pages 的例子里面，也就是 echo 了一个文件呀，也没有 jeklly 阿，不是也可以么？然后就觉得豁然开朗，github 之流肯定是默认会给你处理 jeklly 的代码，然后产生一个 site，而不是直接使用你产生的 html 文件。回想之前每次 deploy github pages，都会收到一个邮件提醒说 site generate success 之类，那就应该是猜的没错了。</p>
<p>然后就开始尝试只 push html（octopress 的结果文件在 public 里面）上去，结果确实如所料，毛问题都没有了，gitcafe 和 github 都可以了。总算舒服了。。另外还写了一个使用 octopress deploy 到 gitcafe 的<a href="http://wdicc.om/octopress-and-gitcafe/" target="_blank" rel="external">帖子</a>，有需要可以参考。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自从 jeklly 1.0.x 发布之后，我的 octopress 站点就在 github，gitcafe 上面更新不了了，写了新帖子然后 push 之后，会收到个邮件，说 generate site faild。&lt;/p&gt;
&lt;p&gt;等等。。这个不是静态站点吗？generate
    
    </summary>
    
    
      <category term="linux,web" scheme="http://wdicc.com/tags/linux-web/"/>
    
  </entry>
  
  <entry>
    <title>octopress and gitcafe</title>
    <link href="http://wdicc.com/octopress-and-gitcafe/"/>
    <id>http://wdicc.com/octopress-and-gitcafe/</id>
    <published>2013-06-12T13:30:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>ocotpress 支持 github，不过 github 的 pages 貌似被墙了，且速度慢。gitcafe 速度还不错，也支持 pages，刚好可以切换过去。我只是简单粗暴的修改了几个文件。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line">diff --git a/.gitignore b/.gitignore</div><div class="line">index 85ed25d..5858b25 100644</div><div class="line"><span class="comment">--- a/.gitignore</span></div><div class="line"><span class="comment">+++ b/.gitignore</span></div><div class="line">@@ -12,3 +12,4 @@ source/stylesheets/screen.css</div><div class="line"> vendor</div><div class="line"> node_modules</div><div class="line"> .themes/fabric/</div><div class="line"><span class="addition">+gitcafe</span></div><div class="line">diff --git a/Rakefile b/Rakefile</div><div class="line">index 53072e5..62061e0 100644</div><div class="line"><span class="comment">--- a/Rakefile</span></div><div class="line"><span class="comment">+++ b/Rakefile</span></div><div class="line">@@ -27,6 +27,9 @@ new_post_ext    = "markdown"  # default new post file extension when using the n</div><div class="line"> new_page_ext    = "markdown"  # default new page file extension when using the new_page task</div><div class="line"> server_port     = "4000"      # port for preview server eg. localhost:4000</div><div class="line"></div><div class="line"><span class="addition">+gitcafe_dir      = "gitcafe"</span></div><div class="line"><span class="addition">+gitcafe_branch   = "gitcafe-pages"</span></div><div class="line"><span class="addition">+</span></div><div class="line"></div><div class="line"> desc "Initial setup for Octopress: copies the default theme into the path of Jekyll's generator. Rake install defaults to rake install[classic] to install a different them</div><div class="line"> task :install, :theme do |t, args|</div><div class="line">@@ -219,7 +214,7 @@ end</div><div class="line"> ##############</div><div class="line"></div><div class="line"> desc "Default deploy task"</div><div class="line"><span class="deletion">-task :deploy do</span></div><div class="line"><span class="addition">+task :deploy_old do</span></div><div class="line">   # Check if preview posts exist, which should not be published</div><div class="line">   if File.exists?(".preview-mode")</div><div class="line">     puts "## Found posts in preview mode, regenerating files ..."</div><div class="line">@@ -231,6 +226,31 @@ task :deploy do</div><div class="line">   Rake::Task["#&#123;deploy_default&#125;"].execute</div><div class="line"> end</div><div class="line"></div><div class="line"><span class="addition">+desc "deploy gitcafe"</span></div><div class="line"><span class="addition">+task :deploy do</span></div><div class="line"><span class="addition">+  # Check if preview posts exist, which should not be published</span></div><div class="line"><span class="addition">+  if File.exists?(".preview-mode")</span></div><div class="line"><span class="addition">+    puts "## Found posts in preview mode, regenerating files ..."</span></div><div class="line"><span class="addition">+    File.delete(".preview-mode")</span></div><div class="line"><span class="addition">+    #Rake::Task[:generate].execute # 这个地方每次都会 generate 我一般喜欢先 generate 本地看好没问题之后再 deploy，所以就注释掉了</span></div><div class="line"><span class="addition">+  end</span></div><div class="line"><span class="addition">+</span></div><div class="line"><span class="addition">+  puts "## Deploying branch to Gitcafe Pages "</span></div><div class="line"><span class="addition">+  puts "\n## copying #&#123;public_dir&#125; to #&#123;gitcafe_dir&#125;"</span></div><div class="line"><span class="addition">+  cp_r "#&#123;public_dir&#125;/.", gitcafe_dir</span></div><div class="line"><span class="addition">+  cd "#&#123;gitcafe_dir&#125;" do</span></div><div class="line"><span class="addition">+    system "git add ."</span></div><div class="line"><span class="addition">+    system "git add -u"</span></div><div class="line"><span class="addition">+    puts "\n## Commiting: Site updated at #&#123;Time.now.utc&#125;"</span></div><div class="line"><span class="addition">+    message = "Site updated at #&#123;Time.now.utc&#125;"</span></div><div class="line"><span class="addition">+    system "git commit -m \"#&#123;message&#125;\""</span></div><div class="line"><span class="addition">+    puts "\n## Pushing generated #&#123;gitcafe_dir&#125; website"</span></div><div class="line"><span class="addition">+    system "git push origin #&#123;gitcafe_branch&#125; --force"</span></div><div class="line"><span class="addition">+    puts "\n## Gcafe Pages deploy complete"</span></div><div class="line"><span class="addition">+  end</span></div><div class="line"><span class="addition">+end</span></div><div class="line"><span class="addition">+</span></div><div class="line"><span class="addition">+</span></div><div class="line"> desc "Generate website and deploy"</div><div class="line"> task :gen_deploy =&gt; [:integrate, :generate, :deploy] do</div><div class="line"> end</div></pre></td></tr></table></figure>
<p>然后需要在 octopus 根目录 clone 一下你的 gitcafe 项目到 gitcafe 目录<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git <span class="built_in">clone</span> git@gitcafe.com:wd/wd gitcafe</div><div class="line">....</div></pre></td></tr></table></figure></p>
<p>然后就可以试试看 <code>rake generate</code> , <code>rake preview</code>, <code>rake deploy</code> 了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ocotpress 支持 github，不过 github 的 pages 貌似被墙了，且速度慢。gitcafe 速度还不错，也支持 pages，刚好可以切换过去。我只是简单粗暴的修改了几个文件。&lt;/p&gt;
&lt;figure class=&quot;highlight diff&quot;&gt;&lt;ta
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>broadcom BCM wireless card on gentoo</title>
    <link href="http://wdicc.com/broadcom-wireless-card-on-gentoo/"/>
    <id>http://wdicc.com/broadcom-wireless-card-on-gentoo/</id>
    <published>2013-05-24T09:28:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>昨天又折腾了一下我的无线，是 dell 的本子，broadcom 的卡 BCM4313，准备写一下的时候，发现之前居然折腾过 <a href="/bcm4312broadcom-stawpa_supplicantkernel2-6-33/">BCM4312</a>。。感觉真蛋疼。。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ lspci -vnn <span class="_">-d</span> 14e4:</div><div class="line">02:00.0 Network controller [0280]: Broadcom Corporation BCM4313 802.11b/g/n Wireless LAN Controller [14e4:4727] (rev 01)</div><div class="line">        Subsystem: Dell Inspiron M5010 / XPS 8300 [1028:0010]</div><div class="line">        Flags: fast devsel, IRQ 17</div><div class="line">        Memory at e5300000 (64-bit, non-prefetchable) [size=16K]</div><div class="line">        Capabilities: &lt;access denied&gt;</div><div class="line">        Kernel modules: bcma</div></pre></td></tr></table></figure>
<p>根据 <a href="http://wireless.kernel.org/en/users/Drivers/b43#bcm43xx.2C_b43legacy.2C_b43.2C_softmac.2C..._the_full_story" target="_blank" rel="external">这里</a> ， BCM 的网卡有三种可用驱动</p>
<ul>
<li>b43，kernel 自带，源自 broadcom linux 驱动的逆向工程</li>
<li>brcmsmac, kernel 自带，似乎源自 broadcom 某个开源的驱动</li>
<li>wl, broadcom 发布的 linux 驱动</li>
</ul>
<p>另外，kernel 自带的 b43 和 brcmsmac 支持标准的 802.11 栈，可以通过 iw iwconfig 之类的工具来配置，获取状态。wl 就不行了。</p>
<p>如果想使用 b43 或者 brcmsmac，需要选择下面的 kernel 选项，要注意都选择成 module，因为还需要加载 firmware，如果编译进内核那需要把 firmware 也编译到内核才可以。<br><figure class="highlight xl"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">N<span class="function"><span class="title">etworking</span> support  ---&gt;</span>  W<span class="function"><span class="title">ireless</span>  ---&gt;</span> Generic IEEE <span class="number">802.11</span> Networking Stack (mac80211)</div><div class="line">D<span class="function"><span class="title">evice</span> Drivers  ---&gt;</span> B<span class="function"><span class="title">roadcom</span> specific AMBA  ---&gt;</span>  BCMA support</div></pre></td></tr></table></figure></p>
<p>针对 b43 选择 <code>Device Drivers  ---&gt; Network device support  ---&gt;  Wireless LAN  ---&gt;  Broadcom 43xx wireless support (mac80211 stack)</code>, 还需要安装 <code>sys-firmware/b43-firmware</code>。</p>
<p>针对 brcmsmac 选择 <code>Device Drivers  ---&gt; Network device support  ---&gt;  Wireless LAN  ---&gt;  Broadcom IEEE802.11n PCIe SoftMAC WLAN driver</code>，还需要安装 <code>sys-kernel/linux-firmware</code>。</p>
<p>对于 wl，需要安装 <code>net-wireless/broadcom-sta</code>，安装的时候会自动检查必要的内核选项，按照提示选择好就可以了。主要是要注意去掉上面的 kernel 的选项，另外可能还需要一个 ipw2100 来提供某一个隐藏的 kernel 选项。此外还有个 PREEMPT_RCU 检查，需要选择下面的内核选项 <code>Processor type and features  ---&gt;  Preemption Model (Voluntary Kernel Preemption (Desktop))  ---&gt;  Voluntary Kernel Preemption (Desktop)</code>。</p>
<p>如此之后编译安装重启就可以了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天又折腾了一下我的无线，是 dell 的本子，broadcom 的卡 BCM4313，准备写一下的时候，发现之前居然折腾过 &lt;a href=&quot;/bcm4312broadcom-stawpa_supplicantkernel2-6-33/&quot;&gt;BCM4312&lt;/a&gt;。。感觉真
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>PostgreSQL Explain</title>
    <link href="http://wdicc.com/postgresql-explain/"/>
    <id>http://wdicc.com/postgresql-explain/</id>
    <published>2013-02-03T09:40:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1 notice</a></li>
<li><a href="#sec-2">2 explain basics</a></li>
<li><a href="#sec-3">3 explain analyse</a></li>
<li><a href="#sec-4">4 Caveats 注意事项</a></li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-3">
<h3 id="sec-1"><span class="section-number-3">1</span> notice</h3>
<div class="outline-text-3" id="text-1">


<p>
简单翻译了一下 <a href="http://www.postgresql.org/docs/9.2/static/using-explain.html" target="_blank" rel="external">http://www.postgresql.org/docs/9.2/static/using-explain.html</a> ，里面有些内容没翻译。
</p>
</div>

</div>

<div id="outline-container-2" class="outline-3">
<h3 id="sec-2"><span class="section-number-3">2</span> explain basics</h3>
<div class="outline-text-3" id="text-2">





<pre class="example">EXPLAIN SELECT * FROM tenk1;

                         QUERY PLAN
-------------------------------------------------------------
 Seq Scan on tenk1  (cost=0.00..458.00 rows=10000 width=244)
</pre>


<ul>
<li>第一行输出需要的消耗。
</li>
<li>最后一行输出需要的消耗。
</li>
<li>返回的行数，假定全部返回。并非扫描处理的行数。
</li>
<li>每行的平均数据量，字节
</li>
</ul>


<p>
消耗是使用设置的规划器的一些 cost常量<sup><a class="footref" name="fnr.1" href="#fn.1">1</a></sup> 来计算出来的，上一级的 node 的 消耗包括了所有子 node 的消耗，消耗不包括传输结果花的时间。
</p>



<pre class="example">SELECT relpages, reltuples FROM pg_class WHERE relname = 'tenk1';
</pre>


<p>
从上面这个语句可以看到，tenk1 有 358 磁盘页和 10000 行。这个查询的消耗计算公式如下
</p>
<pre class="example">
 (disk pages read * seq_page_cost) + (rows scanned * cpu_tuple_cost)
</pre>


<p>
默认情况下 <code>seq_page_cost = 1.0, cpu_tuple_cost = 0.01</code>, 所以最总消耗是 <code>(358 * 1.0) + (10000 * 0.01) = 458</code> 。
</p>



<pre class="example">EXPLAIN SELECT * FROM tenk1 WHERE unique1 &lt; 7000;

                         QUERY PLAN
------------------------------------------------------------
 Seq Scan on tenk1  (cost=0.00..483.00 rows=7001 width=244)
   Filter: (unique1 &lt; 7000)
</pre>


<p>
再看这个，加了一个 where 条件，多了一个 filter 操作，返回结果变少，但是消耗变多了。因为总体需要处理的数据没有变少，并且还多了
</p>
<pre class="example">
 10000 * cpu_operator_cost
</pre>


<p>
需要的消耗。
</p>
<p>
这些计算方法得到的数值可能和你系统的会稍有区别，使用 analyse 命令可能会改变计算结果，因为它会根据一些随机的样本重新收集表的状态信息。
</p>



<pre class="example">EXPLAIN SELECT * FROM tenk1 WHERE unique1 &lt; 100;

                                  QUERY PLAN
------------------------------------------------------------------------------
 Bitmap Heap Scan on tenk1  (cost=5.03..229.17 rows=101 width=244)
   Recheck Cond: (unique1 &lt; 100)
   -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.01 rows=101 width=0)
         Index Cond: (unique1 &lt; 100)
</pre>


<p>
再来看一个。子执行计划节点会先扫描索引，上一级的执行计划节点会根据索引返回的位置来获取数据。获取散列数据比获取全部数据消耗要大，不过因为毕竟是少量数据，可以看到消耗还是小于全表扫描。上级的节点会在获取散列数据之前做一个磁盘排序，好减少获取的消耗，而 Bitmap 字样表示索引返回的结果是按照存储位置排好序的，这就是使用索引的一个原因。
</p>



<pre class="example">EXPLAIN SELECT * FROM tenk1 WHERE unique1 &lt; 100 AND stringu1 = 'xxx';

                                  QUERY PLAN
------------------------------------------------------------------------------
 Bitmap Heap Scan on tenk1  (cost=5.01..229.40 rows=1 width=244)
   Recheck Cond: (unique1 &lt; 100)
   Filter: (stringu1 = 'xxx'::name)
   -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.01 rows=101 width=0)
         Index Cond: (unique1 &lt; 100)
</pre>


<p>
stringu1 = 'xxx' 减少了输出的行数，因为还需要扫描同样的行数，所以没有减少执行计划的消耗，而且还有稍微的增加，
</p>



<pre class="example">EXPLAIN SELECT * FROM tenk1 WHERE unique1 = 42;

                                 QUERY PLAN
-----------------------------------------------------------------------------
 Index Scan using tenk1_unique1 on tenk1  (cost=0.00..8.27 rows=1 width=244)
   Index Cond: (unique1 = 42)
</pre>


<p>
数据根据索引排序来获取，不需要额外的排序。
</p>



<pre class="example">EXPLAIN SELECT * FROM tenk1 WHERE unique1 &lt; 100 AND unique2 &gt; 9000;

                                     QUERY PLAN
-------------------------------------------------------------------------------------
 Bitmap Heap Scan on tenk1  (cost=25.01..60.14 rows=10 width=244)
   Recheck Cond: ((unique1 &lt; 100) AND (unique2 &gt; 9000))
   -&gt;  BitmapAnd  (cost=25.01..25.01 rows=10 width=0)
         -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.01 rows=101 width=0)
               Index Cond: (unique1 &lt; 100)
         -&gt;  Bitmap Index Scan on tenk1_unique2  (cost=0.00..19.74 rows=999 width=0)
               Index Cond: (unique2 &gt; 9000)

EXPLAIN SELECT * FROM tenk1 WHERE unique1 &lt; 100 AND unique2 &gt; 9000 LIMIT 2;

                                     QUERY PLAN
-------------------------------------------------------------------------------------
 Limit  (cost=0.00..14.25 rows=2 width=244)
   -&gt;  Index Scan using tenk1_unique2 on tenk1  (cost=0.00..71.23 rows=10 width=244)
         Index Cond: (unique2 &gt; 9000)
         Filter: (unique1 &lt; 100)
</pre>


<p>
这两个查询，第一个分别查两个索引，然后做 BitmapAnd 得到结果。第二个只查了其中一个索引，然后使用 filter 方式来做过滤，可以看到第二个查询里面的消耗 71.23 表示的是返回所有数据需要的消耗，Limit 节点在得到需要的结果厚，会终止执行，所以最终没有返回那么多，最终消耗小一点，比第一个查询小。
</p>




<pre class="example">EXPLAIN SELECT *
FROM tenk1 t1, tenk2 t2
WHERE t1.unique1 &lt; 10 AND t1.unique2 = t2.unique2;

                                      QUERY PLAN
--------------------------------------------------------------------------------------
 Nested Loop  (cost=4.33..118.25 rows=10 width=488)
   -&gt;  Bitmap Heap Scan on tenk1 t1  (cost=4.33..39.44 rows=10 width=244)
         Recheck Cond: (unique1 &lt; 10)
         -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..4.33 rows=10 width=0)
               Index Cond: (unique1 &lt; 10)
   -&gt;  Index Scan using tenk2_unique2 on tenk2 t2  (cost=0.00..7.87 rows=1 width=244)
         Index Cond: (unique2 = t1.unique2)
</pre>


<p>
这个是两表 join，最后通过嵌套循环节点来做的 join。先查询外层 <code>Bitmap heap scan</code> 这个节点，这个节点还有个子节点。这个节点的查询和 <code>select ... where unique1 &lt; 10</code> 的查询类似。然后执行内层 <code>Index scan using</code> 这个节点，外层查询获取到的数据会插入进来，这个时候 t1.unique2 的值已经有了，所以这层的查询和 <code>select ... where t2.unique2 = 常量</code> 的查询类似，消耗比前面的小是因为第一次查询有了 cache，这次就会稍微快了一点。这层查询的消耗是 <code>外层行数*内层的消耗=10 * 7.87</code> 加上一些 cpu 消耗。
</p>



<pre class="example">EXPLAIN SELECT *
FROM tenk1 t1, tenk2 t2
WHERE t1.unique1 &lt; 10 AND t1.unique2 = t2.unique2 AND t1.hundred &lt; t2.hundred;

                                      QUERY PLAN
--------------------------------------------------------------------------------------
 Nested Loop  (cost=4.33..118.28 rows=3 width=488)
   Join Filter: (t1.hundred &lt; t2.hundred)
   -&gt;  Bitmap Heap Scan on tenk1 t1  (cost=4.33..39.44 rows=10 width=244)
         Recheck Cond: (unique1 &lt; 10)
         -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..4.33 rows=10 width=0)
               Index Cond: (unique1 &lt; 10)
   -&gt;  Index Scan using tenk2_unique2 on tenk2 t2  (cost=0.00..7.87 rows=1 width=244)
         Index Cond: (unique2 = t1.unique2)
</pre>


<p>
如果有条件无法在两个子节点上面执行，那就只能在 join 节点来做 filter，类似上面这个。实际执行时间和前面那个没有 t1.hundred &lt; t2.hundred 条件的差不多。
</p>
<p>
outer join 的时候，还可能会有 Join Filter 和 Filter 同时出现的情况，join filter 出现在外表的 on 语句里面，不匹配的数据依然会返回 null。而 filter 这个时候是用来过滤 join 结果的。
</p>
<p>
对于 inner join，Join Filter 和 Filter 两个没有区别。
</p>



<pre class="example">EXPLAIN SELECT *
FROM tenk1 t1, tenk2 t2
WHERE t1.unique1 &lt; 100 AND t1.unique2 = t2.unique2;

                                        QUERY PLAN
------------------------------------------------------------------------------------------
 Hash Join  (cost=230.43..713.94 rows=101 width=488)
   Hash Cond: (t2.unique2 = t1.unique2)
   -&gt;  Seq Scan on tenk2 t2  (cost=0.00..445.00 rows=10000 width=244)
   -&gt;  Hash  (cost=229.17..229.17 rows=101 width=244)
         -&gt;  Bitmap Heap Scan on tenk1 t1  (cost=5.03..229.17 rows=101 width=244)
               Recheck Cond: (unique1 &lt; 100)
               -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.01 rows=101 width=0)
                     Index Cond: (unique1 &lt; 100)
</pre>


<p>
改变一些条件，会看到执行计划变了，选择了 hash join。一个表的结果会在内层里面记录一个 hash 表，查另一个表的时候会查这个 hash 表来查看匹配的数据。
</p>



<pre class="example">EXPLAIN SELECT *
FROM tenk1 t1, onek t2
WHERE t1.unique1 &lt; 100 AND t1.unique2 = t2.unique2;

                                        QUERY PLAN
------------------------------------------------------------------------------------------
 Merge Join  (cost=197.83..267.93 rows=10 width=488)
   Merge Cond: (t1.unique2 = t2.unique2)
   -&gt;  Index Scan using tenk1_unique2 on tenk1 t1  (cost=0.00..656.25 rows=101 width=244)
         Filter: (unique1 &lt; 100)
   -&gt;  Sort  (cost=197.83..200.33 rows=1000 width=244)
         Sort Key: t2.unique2
         -&gt;  Seq Scan on onek t2  (cost=0.00..148.00 rows=1000 width=244)
</pre>


<p>
这是一个 merge jion 操作。merge join 需要输入的表都按照 join 字段先进行排序。从 t1 直接通过索引进行了查询，得到的结果就是顺序的。因为 t2 需要返回的数据量大，从 t2 做了全表扫描，然后进行了排序。通常全表扫描+排序比走索引消耗小。
</p>
<p>
出同样的结果有很多路可以走，如果想看看其他执行计划是否更实惠，可以通过打开关闭一些标志<sup><a class="footref" name="fnr.2" href="#fn.2">2</a></sup>来做到。
</p>



<pre class="example">SET enable_sort = off;

EXPLAIN SELECT *
FROM tenk1 t1, onek t2
WHERE t1.unique1 &lt; 100 AND t1.unique2 = t2.unique2;

                                        QUERY PLAN
------------------------------------------------------------------------------------------
 Merge Join  (cost=0.00..292.36 rows=10 width=488)
   Merge Cond: (t1.unique2 = t2.unique2)
   -&gt;  Index Scan using tenk1_unique2 on tenk1 t1  (cost=0.00..656.25 rows=101 width=244)
         Filter: (unique1 &lt; 100)
   -&gt;  Index Scan using onek_unique2 on onek t2  (cost=0.00..224.76 rows=1000 width=244)
</pre>


<p>
可以看到走索引比全表扫描消耗更大。
</p>

</div>

</div>

<div id="outline-container-3" class="outline-3">
<h3 id="sec-3"><span class="section-number-3">3</span> explain analyse</h3>
<div class="outline-text-3" id="text-3">


<p>
explain 的 analyse 选项可以看看规划器执行 sql 所用的真实时间。
</p>



<pre class="example">EXPLAIN ANALYZE SELECT *
FROM tenk1 t1, tenk2 t2
WHERE t1.unique1 &lt; 10 AND t1.unique2 = t2.unique2;

                                                           QUERY PLAN
---------------------------------------------------------------------------------------------------------------------------------
 Nested Loop  (cost=4.33..118.25 rows=10 width=488) (actual time=0.370..1.126 rows=10 loops=1)
   -&gt;  Bitmap Heap Scan on tenk1 t1  (cost=4.33..39.44 rows=10 width=244) (actual time=0.254..0.380 rows=10 loops=1)
         Recheck Cond: (unique1 &lt; 10)
         -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..4.33 rows=10 width=0) (actual time=0.164..0.164 rows=10 loops=1)
               Index Cond: (unique1 &lt; 10)
   -&gt;  Index Scan using tenk2_unique2 on tenk2 t2  (cost=0.00..7.87 rows=1 width=244) (actual time=0.041..0.048 rows=1 loops=10)
         Index Cond: (unique2 = t1.unique2)
 Total runtime: 2.414 ms
</pre>


<p>
如上所示，会显示出来真实的执行时间（毫秒），返回的行数等其他信息。为了和 explain 里面消耗的取值能匹配上，loop 大于 1 的节点显示的是单次执行的时间，需要乘以循环次数。
</p>



<pre class="example">EXPLAIN ANALYZE SELECT *
FROM tenk1 t1, tenk2 t2
WHERE t1.unique1 &lt; 100 AND t1.unique2 = t2.unique2 ORDER BY t1.fivethous;

                                                                 QUERY PLAN
--------------------------------------------------------------------------------------------------------------------------------------------
 Sort  (cost=717.30..717.56 rows=101 width=488) (actual time=104.950..105.327 rows=100 loops=1)
   Sort Key: t1.fivethous
   Sort Method: quicksort  Memory: 68kB
   -&gt;  Hash Join  (cost=230.43..713.94 rows=101 width=488) (actual time=3.680..102.396 rows=100 loops=1)
         Hash Cond: (t2.unique2 = t1.unique2)
         -&gt;  Seq Scan on tenk2 t2  (cost=0.00..445.00 rows=10000 width=244) (actual time=0.046..46.219 rows=10000 loops=1)
         -&gt;  Hash  (cost=229.17..229.17 rows=101 width=244) (actual time=3.184..3.184 rows=100 loops=1)
               Buckets: 1024  Batches: 1  Memory Usage: 27kB
               -&gt;  Bitmap Heap Scan on tenk1 t1  (cost=5.03..229.17 rows=101 width=244) (actual time=0.612..1.959 rows=100 loops=1)
                     Recheck Cond: (unique1 &lt; 100)
                     -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.01 rows=101 width=0) (actual time=0.390..0.390 rows=100 loops=1)
                           Index Cond: (unique1 &lt; 100)
 Total runtime: 107.392 ms
</pre>


<p>
有时候还会显示更多的一些信息，比如 sort 和 hash 节点。sort 节点会显示排序的方法，内存磁盘的占用。hash 节点会显示桶（buckets）和批次（batches），如果 batches 大于 1 会使用磁盘空间。
</p>



<pre class="example">EXPLAIN ANALYZE SELECT * FROM tenk1 WHERE ten &lt; 7;

                                                QUERY PLAN
----------------------------------------------------------------------------------------------------------
 Seq Scan on tenk1  (cost=0.00..483.00 rows=7000 width=244) (actual time=0.111..59.249 rows=7000 loops=1)
   Filter: (ten &lt; 7)
   Rows Removed by Filter: 3000
 Total runtime: 85.340 ms
</pre>


<p>
上面这个执行计划显示了 filter 移除了多少行结果。
</p>
<p>
explain 还提供了一个 buffers 选项。能得到 query 的哪部分 io 最密集。
</p>



<pre class="example">EXPLAIN (ANALYZE, BUFFERS) SELECT * FROM tenk1 WHERE unique1 &lt; 100 AND unique2 &gt; 9000;

                                                            QUERY PLAN
-----------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on tenk1  (cost=25.07..60.23 rows=10 width=244) (actual time=3.069..3.213 rows=10 loops=1)
   Recheck Cond: ((unique1 &lt; 100) AND (unique2 &gt; 9000))
   Buffers: shared hit=16
   -&gt;  BitmapAnd  (cost=25.07..25.07 rows=10 width=0) (actual time=2.967..2.967 rows=0 loops=1)
         Buffers: shared hit=7
         -&gt;  Bitmap Index Scan on tenk1_unique1  (cost=0.00..5.02 rows=102 width=0) (actual time=0.732..0.732 rows=200 loops=1)
               Index Cond: (unique1 &lt; 100)
               Buffers: shared hit=2
         -&gt;  Bitmap Index Scan on tenk1_unique2  (cost=0.00..19.80 rows=1007 width=0) (actual time=2.015..2.015 rows=1009 loops=1)
               Index Cond: (unique2 &gt; 9000)
               Buffers: shared hit=5
 Total runtime: 3.917 ms
</pre>


<p>
要注意的是，explain analyse 会真的执行 sql，所以对于 update，insert，delete 等的 sql 操作，最好在执行的时候启用事务，执行完 explain 之后 rollback。
</p>
</div>

</div>

<div id="outline-container-4" class="outline-3">
<h3 id="sec-4"><span class="section-number-3">4</span> Caveats 注意事项</h3>
<div class="outline-text-3" id="text-4">


<p>
有两个情况可能会影响 explain analyse 和实际执行的差别
1 因为没有任何输出，所以 I/O 和网络网络传输消耗没有体现。
2 因为要输出执行时间，而有些系统里面 gettimeofday() 这个系统调用很慢，所以会导致消耗增加。
</p>
<p>
在衡量 explain 执行结果的时候，最好是在情况类似的 db 上面，否则可能没有任何参考价值。比如在一个小表上面的执行计划可能和大表就会很不一样。
</p>
<div id="footnotes">
<h2 class="footnotes">Footnotes: </h2>
<div id="text-footnotes">
<p class="footnote"><sup><a class="footnum" name="fn.1" href="#fnr.1">1</a></sup> : http://www.postgresql.org/docs/9.2/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-CONSTANTS
</p>


<p class="footnote"><sup><a class="footnum" name="fn.2" href="#fnr.2">2</a></sup> : http://www.postgresql.org/docs/9.2/static/runtime-config-query.html#RUNTIME-CONFIG-QUERY-ENABLE
</p></div>
</div>

</div>
</div>

<div id="postamble">
<p class="date">Date: 2013-02-03 18:27:03 CST</p>
<p class="author">Author: Wang Dong</p>
<p class="creator">Org version 7.8.11 with Emacs version 24</p>
<a href="http://validator.w3.org/check?uri=referer" target="_blank" rel="external">Validate XHTML 1.0</a>
</div>
]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;table-of-contents&quot;&gt;
&lt;h2&gt;Table of Contents&lt;/h2&gt;
&lt;div id=&quot;text-table-of-contents&quot;&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&quot;#sec-1&quot;&gt;1 notice&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>redmine-a-good-project-tracker</title>
    <link href="http://wdicc.com/redmine-a-good-project-tracker/"/>
    <id>http://wdicc.com/redmine-a-good-project-tracker/</id>
    <published>2012-12-11T06:53:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>其实很早，大概2，3年前就听说了 redmine 了，不过他环境是 ruby 的，一直没有勇气去搭一个环境。现在项目人多了，bug 阿 feature 阿，就需要记录一下了，因为有些事情不记录下来总是会忘记。之前是尝试通过 wiki ＋ bugfree 来记录的，bugfree 记录在提测之后的一些问题，wiki 记录一些 feature request 什么的。bugfree 我们没权限管理，wiki 记录又不方便，然后我就又想起来 redmine 了。</p>
<p>哦对，其实公司还提供了一个 jira 给大家用，我用了几次我觉得那玩意太难用了，和那个 confluence 的 wiki 一样难用。</p>
<p>本身搭建没什么难度，编译一个 ruby，然后 gem 安装几个包，下载 redmine，使用 rake 命令操作就好了。启动他的 server 之后，就可以访问了。下面几个东西是我花了一些时间配置的。</p>
<h2 id="和-ldap-集成"><a href="#和-ldap-集成" class="headerlink" title="和 ldap 集成"></a>和 ldap 集成</h2><p>在 redmine 的设置里面，本身是有一项和 redmine 集成的功能的，设置 basedn，和下面的 attributes 内容（sAMAccountName,givenName,sN,mail)就可以了。点测试，得能通过。</p>
<p>在我这里，光设置这个还不行，还需要 hack 一段代码。注意下面的那个 <code>@xxxx.com</code>，这个对应你自己的。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">ndex: app/models/auth_source_ldap.rb</div><div class="line"><span class="comment">===================================================================</span></div><div class="line"><span class="comment">--- app/models/auth_source_ldap.rb	(版本 10947)</span></div><div class="line"><span class="comment">+++ app/models/auth_source_ldap.rb	(工作副本)</span></div><div class="line"><span class="meta">@@ -135,11 +135,12 @@</span></div><div class="line">   # Get the user's dn and any attributes for them, given their login</div><div class="line">   def get_user_dn(login, password)</div><div class="line">     ldap_con = nil</div><div class="line"><span class="deletion">-    if self.account &amp;&amp; self.account.include?("$login")</span></div><div class="line"><span class="deletion">-      ldap_con = initialize_ldap_con(self.account.sub("$login", Net::LDAP::DN.escape(login)), password)</span></div><div class="line"><span class="deletion">-    else</span></div><div class="line"><span class="deletion">-      ldap_con = initialize_ldap_con(self.account, self.account_password)</span></div><div class="line"><span class="deletion">-    end</span></div><div class="line"><span class="addition">+    ldap_con = initialize_ldap_con(login + '@xxxxx.com', password)</span></div><div class="line"><span class="addition">+    #if self.account &amp;&amp; self.account.include?("$login")</span></div><div class="line"><span class="addition">+    #  ldap_con = initialize_ldap_con(self.account.sub("$login", Net::LDAP::DN.escape(login)), password)</span></div><div class="line"><span class="addition">+    #else</span></div><div class="line"><span class="addition">+    #  ldap_con = initialize_ldap_con(self.account, self.account_password)</span></div><div class="line"><span class="addition">+    #end</span></div><div class="line">     login_filter = Net::LDAP::Filter.eq( self.attr_login, login )</div><div class="line">     object_filter = Net::LDAP::Filter.eq( "objectClass", "*" )</div><div class="line">     attrs = &#123;&#125;</div><div class="line"><span class="meta">@@ -149,6 +150,8 @@</span></div><div class="line">       search_filter = search_filter &amp; f</div><div class="line">     end</div><div class="line"> </div><div class="line"><span class="addition">+    logger.debug "------------get_user_dn #&#123;login&#125; #&#123;self.base_dn&#125; #&#123;search_filter&#125; #&#123;search_attributes&#125;" if logger &amp;&amp; logger.debug?</span></div><div class="line"><span class="addition">+</span></div><div class="line">     ldap_con.search( :base =&gt; self.base_dn,</div><div class="line">                      :filter =&gt; search_filter,</div><div class="line">                      :attributes=&gt; search_attributes) do |entry|</div></pre></td></tr></table></figure>
<p>总之登陆验证的代码关键就在这里了，可以自己做尝试，建议先写最简单的代码测试。比如</p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">require</span> <span class="string">'rubygems'</span></div><div class="line"><span class="keyword">require</span> <span class="string">'net/ldap'</span></div><div class="line"></div><div class="line">ldap = Net::LDAP.new <span class="symbol">:host</span> =&gt; <span class="string">'qunarldap.corp.qunar.com'</span>,</div><div class="line">     <span class="symbol">:port</span> =&gt; <span class="number">389</span>,</div><div class="line">     <span class="symbol">:auth</span> =&gt; &#123;</div><div class="line">           <span class="symbol">:method</span> =&gt; <span class="symbol">:simple</span>,</div><div class="line">           <span class="symbol">:username</span> =&gt; <span class="string">"wd@xxxx.com"</span>,</div><div class="line">           <span class="symbol">:password</span> =&gt; <span class="string">"pwd"</span></div><div class="line">     &#125;</div><div class="line"></div><div class="line">filter = Net::LDAP::Filter.eq(<span class="string">"sAMAccountName"</span>,<span class="string">"wd*"</span>)</div><div class="line">object_filter = Net::LDAP::Filter.eq( <span class="string">"objectClass"</span>, <span class="string">"*"</span> )</div><div class="line">search_filter = filter &amp; object_filter</div><div class="line"></div><div class="line">treebase = <span class="string">"你的 basedn"</span> <span class="comment">#</span></div><div class="line"></div><div class="line">attr = [<span class="string">"dn"</span>, <span class="string">"givenName"</span>, <span class="string">"sN"</span>, <span class="string">"mail"</span>]</div><div class="line"></div><div class="line">ldap.search(<span class="symbol">:base</span> =&gt; treebase, <span class="symbol">:filter</span> =&gt; search_filter, <span class="symbol">:attributes</span> =&gt; attr ) <span class="keyword">do</span> <span class="params">|entry|</span></div><div class="line">  puts <span class="string">"DN: <span class="subst">#&#123;entry.dn&#125;</span>"</span></div><div class="line">  entry.each <span class="keyword">do</span> <span class="params">|attribute, values|</span></div><div class="line">    puts <span class="string">"   <span class="subst">#&#123;attribute&#125;</span>:"</span></div><div class="line">    values.each <span class="keyword">do</span> <span class="params">|value|</span></div><div class="line">      puts <span class="string">"      ---&gt;<span class="subst">#&#123;value&#125;</span>"</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">p ldap.get_operation_result</div></pre></td></tr></table></figure>
<p>搞定这块，就可以通过 ldap 用户直接登陆了，登陆会自动创建用户。</p>
<h2 id="通过回复邮件自动创建和更新-issue"><a href="#通过回复邮件自动创建和更新-issue" class="headerlink" title="通过回复邮件自动创建和更新 issue"></a>通过回复邮件自动创建和更新 issue</h2><p>用过 bugzilla 的都知道，可以通过邮件回复的方式来 comment issue。redmine 也提供了这个功能。我这种对 mail 服务器无权的用户，只能申请一个邮箱专门做这个事情了。公司邮箱是 exchange 的，没有打开 imap。redmine 只提供了 imap，pop 之类的方式。好在还有 davmail。先配置好一个 davmail，然后通过 imap 来做这个事情，imap 比 pop 好处多很多，比如可以指定 inbox，可以 move 到 read 之类，就不多说了。</p>
<p>crontab 指令大概如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#!/bin/bash</span></div><div class="line"></div><div class="line">LOG=/<span class="built_in">export</span>/redmine/<span class="built_in">log</span>/mail_recieve.log</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"start <span class="variable">$(date)</span>"</span> &gt;&gt; <span class="variable">$LOG</span></div><div class="line"></div><div class="line">/usr/<span class="built_in">local</span>/ruby/bin/rake --silent <span class="_">-f</span> /<span class="built_in">export</span>/redmine/Rakefile redmine:email:receive_imap RAILS_ENV=<span class="string">"production"</span> host=localhost username=abc password=def port=1143 move_on_success=<span class="built_in">read</span> move_on_failure=failed unknown_user=accept &gt;&gt; <span class="variable">$LOG</span> 2&gt;&amp;1</div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"end <span class="variable">$(date)</span>"</span> &gt;&gt; <span class="variable">$LOG</span></div></pre></td></tr></table></figure>
<p>不过如果 redmine 就这么简单就搞定的话，那我也没必要单独拿出来掰了。关键是，通过 imap 死活就是不行。只好又看了一下代码。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">Index: lib/redmine/imap.rb</span></div><div class="line"><span class="comment">===================================================================</span></div><div class="line"><span class="comment">--- lib/redmine/imap.rb	(版本 10947)</span></div><div class="line"><span class="comment">+++ lib/redmine/imap.rb	(工作副本)</span></div><div class="line"><span class="meta">@@ -30,8 +30,9 @@</span></div><div class="line">         imap.login(imap_options[:username], imap_options[:password]) unless imap_options[:username].nil?</div><div class="line">         imap.select(folder)</div><div class="line">         imap.search(['NOT', 'SEEN']).each do |message_id|</div><div class="line"><span class="deletion">-          msg = imap.fetch(message_id,'RFC822')[0].attr['RFC822']</span></div><div class="line"><span class="deletion">-          logger.debug "Receiving message #&#123;message_id&#125;" if logger &amp;&amp; logger.debug?</span></div><div class="line"><span class="addition">+          #msg = imap.fetch(message_id,'RFC822')[0].attr['RFC822']</span></div><div class="line"><span class="addition">+          msg = imap.fetch(message_id,'BODY[]')[0].attr['BODY[]']</span></div><div class="line"><span class="addition">+          logger.debug "Receiving message #&#123;message_id&#125;, msg:\n#&#123;msg&#125;" if logger &amp;&amp; logger.debug?</span></div><div class="line">           if MailHandler.receive(msg, options)</div><div class="line">             logger.debug "Message #&#123;message_id&#125; successfully received" if logger &amp;&amp; logger.debug?</div><div class="line">             if imap_options[:move_on_success]</div></pre></td></tr></table></figure>
<p>这里把那个 RFC822 改成 BODY[] 就好了，入丝般润滑。。。</p>
<h2 id="过滤掉邮件回复的垃圾内容"><a href="#过滤掉邮件回复的垃圾内容" class="headerlink" title="过滤掉邮件回复的垃圾内容"></a>过滤掉邮件回复的垃圾内容</h2><p>邮件回复 ok 之后，紧跟着问题就是，他会把整封邮件都作为回复记录进去，这个太恶心了。还好他提供了设置，在 email notification 选项里面，配置一个 email header <code>--Reply above this line--</code>，在 incoming mail 里面配置一个 Truncate emails after one of these lines <code>--Reply above this line--</code>，他就会截取这个字符前面的内容了。</p>
<p>不过还有问题就是，一般邮件回复都开头都是个 <code>On xxxx xxx wrote:</code>，这个他不会截掉，那就再 hack 一下。。</p>
<figure class="highlight diff"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="comment">--- app/models/mail_handler.rb	(版本 10947)</span></div><div class="line"><span class="comment">+++ app/models/mail_handler.rb	(工作副本)</span></div><div class="line"><span class="meta">@@ -463,9 +464,12 @@</span></div><div class="line"> </div><div class="line">   # Removes the email body of text after the truncation configurations.</div><div class="line">   def cleanup_body(body)</div><div class="line"><span class="deletion">-    delimiters = Setting.mail_handler_body_delimiters.to_s.split(/[\r\n]+/).reject(&amp;:blank?).map &#123;|s| Regexp.escape(s)&#125;</span></div><div class="line"><span class="addition">+    #delimiters = Setting.mail_handler_body_delimiters.to_s.split(/[\r\n]+/).reject(&amp;:blank?).map &#123;|s| Regexp.escape(s)&#125;</span></div><div class="line"><span class="addition">+    delimiters = Setting.mail_handler_body_delimiters.to_s.split(/[\r\n]+/).reject(&amp;:blank?).map &#123;|s| s&#125;</span></div><div class="line"><span class="addition">+</span></div><div class="line">     unless delimiters.empty?</div><div class="line">       regex = Regexp.new("^[&gt; ]*(#&#123; delimiters.join('|') &#125;)\s*[\r\n].*", Regexp::MULTILINE)</div><div class="line"><span class="addition">+      #regex = Regexp.new("(^[&gt; ]*(#&#123; delimiters.join('|') &#125;)\s*[\r\n].*)|(On (.*)wrote:[\r\n].*)", Regexp::MULTILINE)</span></div><div class="line">       body = body.gsub(regex, '')</div><div class="line">     end</div><div class="line">     body.strip</div></pre></td></tr></table></figure>
<p>这里搞定之后，在那个 Truncate emails after one of these lines 里面就可以写正则了，增加一行 <code>On (.*)wrote:</code>，然后就可以了。</p>
<h2 id="code-review"><a href="#code-review" class="headerlink" title="code review"></a>code review</h2><p>增加了一个 code review 插件，已有项目需要在项目的模块里面启用。并且需要 admin 在角色配置里面，给相应角色增加 code review 的权限。不过貌似这插件不太好用，只能一行一行来。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;其实很早，大概2，3年前就听说了 redmine 了，不过他环境是 ruby 的，一直没有勇气去搭一个环境。现在项目人多了，bug 阿 feature 阿，就需要记录一下了，因为有些事情不记录下来总是会忘记。之前是尝试通过 wiki ＋ bugfree 来记录的，bugfr
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>Some tips for bash scripting</title>
    <link href="http://wdicc.com/some-tips-on-bash-scripting/"/>
    <id>http://wdicc.com/some-tips-on-bash-scripting/</id>
    <published>2012-12-02T11:43:00.000Z</published>
    <updated>2016-12-12T11:36:58.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近几天写了一些 bash 脚本，又有些心得，记录一下。</p>
<h2 id="获取当前路径的绝对路径"><a href="#获取当前路径的绝对路径" class="headerlink" title="获取当前路径的绝对路径"></a>获取当前路径的绝对路径</h2><p>比较常见的需求可能是获取相对路径，这样方便程序复制到其他目录也可以运行。使用 <code>$(dirname $0)</code> 就可以获取相对路径，不过这里说的是绝对路径。</p>
<p>其实也简单，相对路径加上当前目录，那不就是绝对路径么。不过是，有时候 <code>$(dirname $0)</code> 取到的也可能是绝对路径（一般期望相对路径的程序也能跑通，所以不大关心）。</p>
<p>可以用下面的做法，大意是先判断一下获取到的路径是不是 <code>/</code> 开头，如果是，那就不处理，如果不是，那就把当前的路径附加上去得到一个绝对路径。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">PG_DIR=<span class="string">"<span class="variable">$(dirname $0)</span>/../"</span></div><div class="line"></div><div class="line"><span class="built_in">echo</span> <span class="string">"<span class="variable">$PG_DIR</span>"</span> | grep -q ^/</div><div class="line"></div><div class="line"><span class="keyword">if</span> [ $? <span class="_">-ne</span> 0 ];<span class="keyword">then</span></div><div class="line">        PG_DIR=<span class="string">"<span class="variable">$(pwd)</span>/<span class="variable">$PG_DIR</span>"</span></div><div class="line"><span class="keyword">fi</span></div></pre></td></tr></table></figure>
<h2 id="使用-getopt-获取命令行参数"><a href="#使用-getopt-获取命令行参数" class="headerlink" title="使用 getopt 获取命令行参数"></a>使用 getopt 获取命令行参数</h2><p>获取参数比较常见的做法是取 <code>$1</code> <code>$2</code> 这些，不过不太专业，这里说的是类似于 <code>--prefix=/path/to/install -v</code> 这种。</p>
<p>bash 本身提供了一个内部命令 <code>getopts</code> 来做这个事情，不过那个只能支持 short_opts，就是类似 <code>-v</code> 这种，不支持长的。</p>
<p>getopt 是一个 GNU 程序，他支持 long_opts。下面是个例子。代码基本来自网上。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line">ARGS=$(getopt <span class="_">-a</span> -o h <span class="_">-l</span> initdb::,<span class="built_in">help</span> -- <span class="string">"<span class="variable">$@</span>"</span>)</div><div class="line">[ $? <span class="_">-ne</span> 0 ] &amp;&amp; usage</div><div class="line"></div><div class="line"><span class="built_in">eval</span> <span class="built_in">set</span> -- <span class="string">"<span class="variable">$&#123;ARGS&#125;</span>"</span> </div><div class="line"></div><div class="line"><span class="keyword">while</span> <span class="literal">true</span></div><div class="line"><span class="keyword">do</span></div><div class="line">        <span class="keyword">case</span> <span class="variable">$1</span> <span class="keyword">in</span></div><div class="line">                --initdb)</div><div class="line">                        initdb <span class="variable">$2</span></div><div class="line">                        ;;</div><div class="line">                -h|--help)</div><div class="line">                        usage;</div><div class="line">                        ;;</div><div class="line">                --)</div><div class="line">                        <span class="built_in">shift</span></div><div class="line">                        <span class="built_in">break</span></div><div class="line">                        ;;</div><div class="line">        <span class="keyword">esac</span></div><div class="line">        <span class="built_in">shift</span></div><div class="line"><span class="keyword">done</span></div></pre></td></tr></table></figure>
<p>解释一下上面的参数的含义:</p>
<ul>
<li><code>-o</code> 参数指定的就是短参数，我试过，貌似还得指定至少一个短参数。</li>
<li><code>-l</code> 参数指定的就是长参数。</li>
<li>多个参数用逗号 <code>,</code> 分隔。</li>
<li>参数后面跟一个冒号 <code>:</code> 表示这个参数(option)必须要给一个参数(argument)，类似上面的 <code>--prefix=/path/to/install</code> 这种。</li>
<li>参数后面跟2个冒号 <code>::</code> 表示这个参数后面的参数可有可无。比如例子里面的 <code>--initdb</code></li>
</ul>
<h2 id="find-exec-提示-No-such-file-or-directory"><a href="#find-exec-提示-No-such-file-or-directory" class="headerlink" title="find exec 提示 No such file or directory"></a>find exec 提示 No such file or directory</h2><p>这个是之前用来日志删除的一个程序，大概命令类似 <code>find ./ -name &#39;2012*&#39; -exec rm -r {} \;</code>，后来总发现报 <code>No such file or directory</code> 这个错误，可是去看的时候，发现那些目录也被删掉了。开始觉得可能是有其他人的程序也在删除这个目录，问了一圈结果没人删。</p>
<p>后来经过测试琢磨找到原因了，在于这个命令的执行思路大概是先去找那个名字的文件或者目录，然后挨个执行后面的命令。那么，如果找到的既有上级目录，也有下级文件的时候，如果目录先被删掉了，那删文件的时候可不就是 <code>No such file or directory</code> 么。</p>
<p>好在 find 提供了一个参数 <code>-prune</code><br><figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-prune True; <span class="keyword">if</span> <span class="keyword">the</span> <span class="built_in">file</span> is <span class="keyword">a</span> <span class="built_in">directory</span>, <span class="built_in">do</span> <span class="keyword">not</span> descend <span class="keyword">into</span> <span class="keyword">it</span>. If -depth is given, <span class="literal">false</span>; no effect.  Because -<span class="built_in">delete</span> implies -depth, you can-</div><div class="line">       <span class="keyword">not</span> usefully use -prune <span class="keyword">and</span> -<span class="built_in">delete</span> together.</div></pre></td></tr></table></figure></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近几天写了一些 bash 脚本，又有些心得，记录一下。&lt;/p&gt;
&lt;h2 id=&quot;获取当前路径的绝对路径&quot;&gt;&lt;a href=&quot;#获取当前路径的绝对路径&quot; class=&quot;headerlink&quot; title=&quot;获取当前路径的绝对路径&quot;&gt;&lt;/a&gt;获取当前路径的绝对路径&lt;/h2&gt;&lt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Hello world</title>
    <link href="http://wdicc.com/hello-world/"/>
    <id>http://wdicc.com/hello-world/</id>
    <published>2012-11-28T10:38:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>Just a test.</p>
<p>Hello world from github :D</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Just a test.&lt;/p&gt;
&lt;p&gt;Hello world from github :D&lt;/p&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Join 后面跟两个表</title>
    <link href="http://wdicc.com/two-table-after-join/"/>
    <id>http://wdicc.com/two-table-after-join/</id>
    <published>2012-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>发现 sql 的写法真是千奇百怪，经常遇到没见过的写法。前几天就遇到了一个 sql 在 join 后写两个表，用逗号分隔。类似下面。</p>
<pre class="prettyprint lang-sql">
select a.a, b.f from t1 a left join ( b, c ) on ( b.id = c.id and b.a = a.a )
</pre>


<p>看到 sql 的这些用法我一般都是去 pgsql 的文档里面去查，因为 pg 的文档里面一般会指明一种用法是否标准 sql，多写标准 sql 可以避免知识不能转移。不过去查了发现 pg 不支持这种写法，也去 pg 里面执行了，确实不支持。</p>
<p>然后就去看 mysql 的文档，里面有对于这种写法的<a href="http://dev.mysql.com/doc/refman/5.1/en/join.html" target="_blank" rel="external">支持</a>。</p>
<pre class="prettyprint lang-text">
 The syntax of table_factor is extended in comparison with the SQL Standard. The latter accepts only table_reference, not a list of them inside a pair of parentheses.

This is a conservative extension if we consider each comma in a list of table_reference items as equivalent to an inner join. For example:

SELECT * FROM t1 LEFT JOIN (t2, t3, t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)

is equivalent to:

SELECT * FROM t1 LEFT JOIN (t2 CROSS JOIN t3 CROSS JOIN t4)
                 ON (t2.a=t1.a AND t3.b=t1.b AND t4.c=t1.c)

In MySQL, JOIN, CROSS JOIN, and INNER JOIN are syntactic equivalents (they can replace each other). In standard SQL, they are not equivalent. INNER JOIN is used with an ON clause, CROSS JOIN is used otherwise. 
</pre>


<p>可以看到，这种写法就是等于是让括号里面的 b,c 使用 inner join 的方式连接，当然如果 on 里面没有指定 join 方式，最后就是个笛卡尔集。然后<a href="http://dev.mysql.com/doc/refman/5.1/en/nested-join-optimization.html" target="_blank" rel="external">这里</a> 有更多的一些说明，还有下面这种写法。</p>
<pre class="prettyprint lang-sql">
t1 LEFT JOIN t2 ON t1.a=t2.a, t3
</pre>


<p>这些写法都有各自的含义。</p>
<p>其实这么看来，这个方式好像是比较方便的，不过是对于不明白的人如果乱用，这玩意出的错也是很诡异很难排查的。</p>
<p>另外注意上面的语句里面写了，mysql 里面的 join, inner join, cross join 是完全同样的东西。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;发现 sql 的写法真是千奇百怪，经常遇到没见过的写法。前几天就遇到了一个 sql 在 join 后写两个表，用逗号分隔。类似下面。&lt;/p&gt;
&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
select a.a, b.f from t1 a left 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="mysql" scheme="http://wdicc.com/tags/mysql/"/>
    
      <category term="sql" scheme="http://wdicc.com/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>Postgresql 里面连接其他数据库</title>
    <link href="http://wdicc.com/fdw-in-postgresql/"/>
    <id>http://wdicc.com/fdw-in-postgresql/</id>
    <published>2012-05-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p>PG 9.x 引入了 fdw，可以通过 pg 去连接其他 db，不仅限于其他 pg，还可以是 mysql，oracle，文件等。按照设计，fdw 还应该提供给查询规划器一些对方 db 的索引等信息，这样在查询过程中可以提升查询速度。
</p>

<div id="outline-container-1" class="outline-3">
<h3 id="sec-1">dbi_link</h3>
<div class="outline-text-3" id="text-1">


<p>
dbi 就是 perl 的 dbi，总的思想就是通过 plperl 写一些 function（所以也给了调试修改的便利），通过 dbi 去连接其他数据库，可以连接的 db 和 dbi 的支持一样。
</p>
<p>
测试了一下，第一次连接的时候会 cache 对方 db 的信息，对于复杂库没测试成功，只有一个表的库连接成功，并且可以查询。查询的时候就和查询本地库没有区别。
</p>
<p>
效率上面看，不是很高，每次查询都必然需要获取对方全部数据。就算是有 where 条件，也不会试用到对方 db 的索引。所以综合来看，只是提供了一个简单的方法来获取数据，最好是一次性的。
</p>
</div>

</div>

<div id="outline-container-2" class="outline-3">
<h3 id="sec-2">db_link</h3>
<div class="outline-text-3" id="text-2">


<p>
db_link 本身是 pg 自带的，contrib 里面的。db_link 只支持 pg，建立连接之后，后续查询可以只指定使用哪个连接即可。
</p>
<p>
相对 dbi_link，使用起来稍微复杂一点，需要特定的格式。效率上面看，查全表数据比 dbi_link 快。
</p>
<p>
他有个优势是每次查询对方库的时候都需要指定一个 sql，而如果只需要少量数据的时候，可以在 sql 里面直接使用 where 来过滤数据，这样就能使用对方 db 的索引了，速度快很多。不过就是稍微有点繁琐。
</p>
</div>

</div>

<div id="outline-container-3" class="outline-3">
<h3 id="sec-3">fdw</h3>
<div class="outline-text-3" id="text-3">


<p>
<a href="http://www.postgresonline.com/journal/archives/250-File-FDW-Family-Part-1-file_fdw.html" target="_blank" rel="external">http://www.postgresonline.com/journal/archives/250-File-FDW-Family-Part-1-file\_fdw.html</a> 这里有个链接，讲了 file fdw。其他 fdw 还没有试过。我理解 fdw 是否能使用对方 db 的索引，还需要看 fdw 的实现。file fdw 提供了类似 oracle 外部表一样的东西。实际上早年间 yahoo 的兄弟写过一个外部表的 pg 扩展的，不知道是不是这个 file fdw 就是从那来的。
</p></div>
</div>
]]></content>
    
    <summary type="html">
    
      
&lt;p&gt;PG 9.x 引入了 fdw，可以通过 pg 去连接其他 db，不仅限于其他 pg，还可以是 mysql，oracle，文件等。按照设计，fdw 还应该提供给查询规划器一些对方 db 的索引等信息，这样在查询过程中可以提升查询速度。
&lt;/p&gt;

&lt;div id=&quot;outl
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
      <category term="dbi" scheme="http://wdicc.com/tags/dbi/"/>
    
      <category term="fdw" scheme="http://wdicc.com/tags/fdw/"/>
    
  </entry>
  
  <entry>
    <title>有跳板机的 ssh 登陆</title>
    <link href="http://wdicc.com/controlmaster-in-ssh/"/>
    <id>http://wdicc.com/controlmaster-in-ssh/</id>
    <published>2012-05-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p>我厂登陆服务器需要先走一个跳板机，不能直接登陆，很是蛋疼。实际上 ssh 早就解决了这个问题。
</p>
<p>
大意是通过设置 proxycommand 来实现，我也写过一个 <a href="http://wdicc.com/cow-ssh-proxycommand/">http://wdicc.com/cow-ssh-proxycommand/</a> 。配置如下
</p>


<pre class="prettyprint lang-conf">
# gateways
Host abc
     Hostname abc.com

# servers
Host *.xxx
     ProxyCommand ssh abc exec nc %h %p 2>/dev/null
</pre>

<p>
这样所有 .xxx 结尾的机器，都会使用 abc 这个机器来跳了。要注意的是，首先需要你机器和 abc 之间的 ssh 验证，这个使用使用的是你机器的 id_rsa 和 abc.com 的 authorized_keys。然后会是 proxy 起作用，需要你的机器和 .xxx 机器的验证，使用的是你的机器的 id_rsa 和 .xxx 的 authorized_keys，注意并不是 abc.com 和 .xxx 之间。
</p>
<p>
倒霉的是，我厂有些 gateway 机器还需要使用 token，并不能使用 key 验证。虽然有了上面设置，如果从某个机器 cp 数据的时候，还得来回输入哪个 token，真他妈的 2b。
</p>
<p>
还好 ssh 还提供了一个 controlmaster，很好的解决了这个问题。
</p>


<pre class="prettyprint lang-conf">
Host *
     User dong.wang
     ServerAliveInterval 30
     ControlMaster auto
     ControlPath /tmp/ssh/master-%r@%h:%p
     ControlPersist yes
</pre>

<p>
上面这个设置是所有服务器启用 controlmaster，哪个 /tmp/ssh 目录可以自己设置，没有就创建一个。哪个 ControlPersist 可以是个时间。
</p>
<p>
这样设置之后，第一次连接的时候，会启动一个 master。后续连接都会走这个，连接速度很快不说，还完全不需要输入什么 token。并且因为只有 gateway 需要输入 token，所以一个 gateway 只需要输入一次。实在是爽大了，真是居家旅行必备啊。就冲着连接速度快这一点也值了。
</p>
]]></content>
    
    <summary type="html">
    
      
&lt;p&gt;我厂登陆服务器需要先走一个跳板机，不能直接登陆，很是蛋疼。实际上 ssh 早就解决了这个问题。
&lt;/p&gt;
&lt;p&gt;
大意是通过设置 proxycommand 来实现，我也写过一个 &lt;a href=&quot;http://wdicc.com/cow-ssh-proxycommand/
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>关于面试的一点经验</title>
    <link href="http://wdicc.com/about-interview/"/>
    <id>http://wdicc.com/about-interview/</id>
    <published>2012-04-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近面试了不少，也算有点经验了，阶段总结一下。本文也基本是针对刚毕业的或者毕业没两年的，大牛就别看了，浪费时间。
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">简历</h2>
<div class="outline-text-2" id="text-1">


<p>
其实写简历的时候，为了能获得更多的面试机会，通常都会有些夸大，尤其是刚毕业没多久，经验不多的，这个情况更严重。把只看过两次的东西，说成熟悉，把用过几次的说成熟练。
</p>
<p>
对于新人来说，这么做似乎会增加面试机会。但实际上，没有目的的面试，只会浪费双方的时间。很多次看到简历觉得似乎这个是我们需要的人，叫来问两句明白水平之后，基本就只能让对方走人了。不管怎么样，这对双方都是一个损失。
</p>
<p>
与其夸大简历寻求面试机会，有时候还不如花点时间上个培训班。我见到过不少上培训班的，可能花 3 个月半年的，来了之后你问问题，答得也还算靠谱。不过上培训班能学到的水平大家也清楚，基本是比较初级的，对于高级职位没有帮助。
</p>
<p>
总之吧，简历不好夸大，提到的东西至少得是你有自己见解的，否则还不如不提。
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">面试题</h2>
<div class="outline-text-2" id="text-2">


<p>
对于技术工程师，很多公司都有面试题。有些求职者可能觉得这个东西挺讨厌的，浪费时间。想知道水平直接聊聊不就完了。
</p>
<p>
其实面试通常时间都不会很长，在这么短的时间内要决定时不时要一个人，也不是个简单的事情，要了解各方面。通常找工程师的时候，动手能力也是一项。从面试题能看出来动手能力。
</p>
<p>
看你写 for 循环也能看出来你的基础扎实不扎实。我还真见过不少人使用他熟悉的语言，这些都写错的。
</p>
<p>
当然，面试题不是一切，也不是不允许有笔误，毕竟现在那么多编辑工具都有提示，真没记住还不行么？错是可以错的，可是别人指出错误的时候你一要能看出来错误在哪里，二要虚心接受错误。别牛逼哄哄的还说什么从来不手写，都在编辑器写之类，那种态度要不得，哪个公司哪个领导都不愿意找一个大爷回来养着，伺候不起的。
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">面试过程</h2>
<div class="outline-text-2" id="text-3">


<p>
面试聊天期间大可不必紧张，你的主要目的是表达出来你会的东西。大可不必管对方需要什么样子的人，你合适不合适由对方做判断就好了。
</p>
<p>
而同时其实面试官也会努力帮你，让你表达出你会的东西。
</p>
<p>
至于说不会的东西怎么办？如实说就可以了。可以类比，但是千万不要狡辩，你要明白的是对方的水平肯定不会比你差，你的任何狡辩只能让对方觉得你这个人很无知自大。
</p>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">将来的团队</h2>
<div class="outline-text-2" id="text-4">


<p>
面试不要只关注工资。一个好的工作环境，一个靠谱的团队，带给你的隐性收入远比眼前的工资来的多。不过说实话，这些收入恐怕1，2年就挖空了，那个时候如果一个公司不能按照行情给一个靠谱的价格，那就比较难能继续留住人了。也是个博弈吧，这些事情不是很懂。
</p>
<p>
同时，找一个自己喜欢的愿意专研的工作也比较重要。
</p>
<p>
当然，如果你就是想涨工资，那就另说。
</p>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">薪资</h2>
<div class="outline-text-2" id="text-5">


<p>
不要尝试讨价还价。
</p>
<p>
现在的 IT 公司薪资基本都是不透明的，普通员工通常都只知道自己的工资。
</p>
<p>
如果你不想让自己觉得被坑，那最好在来面试之前就通过各个渠道去获取一下这个公司的薪资水平，并且确定自己能接受的最低工资是多少，可以通过朋友你自己等对你的评价来判断，不要依赖面试官。另外你工作的前一家公司给你的工资也是一个参考，觉得自己屈才的话，大可以往上提。
</p>
<p>
综合考虑自己的能力，公司能给你带来的隐性收入，到时候直接报你能接受的最低工资就好了。如果是对方真的觉得你的水平不到那个工资，那也没办法的事情。重要的是自己能接受的最低限度是多少，就不要和对方讨价了，否则就算入职了回头也会郁闷的。
</p>
</div>

</div>

<div id="outline-container-6" class="outline-2">
<h2 id="sec-6">跳槽</h2>
<div class="outline-text-2" id="text-6">


<p>
如果是跳槽过来的，一般都会问一下为什么从原单位离职。建议如实交代，就算是因为工资不高等觉得好像放不到台面上面的原因。没关系的，诚信是个基本要求。
</p>
<p>
跳槽也不建议太频繁。虽然现在通过跳槽涨工资是个普遍现象，但是也没有刚那边工作半年就来这边面试，并且要求工资涨 2k 的吧？那你再牛逼也没公司敢要，刚培养到能干活，跑了？
</p></div>
</div>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近面试了不少，也算有点经验了，阶段总结一下。本文也基本是针对刚毕业的或者毕业没两年的，大牛就别看了，浪费时间。
&lt;/p&gt;

&lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;简历&lt;/h2&gt;
&lt;d
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="interview" scheme="http://wdicc.com/tags/interview/"/>
    
  </entry>
  
  <entry>
    <title>org-mode 里面自动归档任务</title>
    <link href="http://wdicc.com/auto-archive-task-for-org-mode/"/>
    <id>http://wdicc.com/auto-archive-task-for-org-mode/</id>
    <published>2012-04-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>我想应该有不少人在使用 emacs 的 org-mode 来做笔记，任务管理等。我使用 org-mode 比较多的情况是使用他做一些提纲，类似思维导图一样，以及用它来管理 todo list。
</p>
<p>
org-mode 本身提供了 remember 来创建 todo list。
</p>
<p>
新建一个 org 文件 ~/org/todo.org，包含两行内容如下
</p>


<pre class="prettyprint lang-text">
* Tasks
* Done
</pre>

<p>
然后设置下面的内容
</p>


<pre class="prettyprint lang-lisp">
(define-key global-map "\C-ca" 'org-agenda)
(global-set-key (kbd "C-c m r") 'org-capture)
(setq org-capture-templates
      '(("t" "Todo" entry (file+headline "~/org/todo.org" "Tasks")
         "* TODO %?\nCREATED: %U")
        ("j" "Journal" entry (file+datetree "~/org/journal.org")
         "* %?\nEntered on %U\n  %i\n  %a")))
(defun wd-move-done-task-to-done-cats ( task-pos )
  "move done task to *DONE cats"
  (let* ((entry (org-get-entry))
        (title (org-get-heading))
        (task (format "** %s\n%s\n" title entry))
        )
    (goto-char (point-min))
    (when (search-forward-regexp "^* Tasks$latex ")
      (goto-char (point-min))
      (when (search-forward-regexp "^* Done$")
        (goto-char (match-beginning 0))
        (forward-line)      
        (insert task)
        (goto-char task-pos)
        (delete-region (org-entry-beginning-position) (org-entry-end-position))      
        )
      )
    )
  )

(defun wd-track-task-status ( changes-plist )
   "Track task status, and move it to '* Done' cats if it is stats change from to to done
1 TODO 文件至少需要包含两个标题 * Tasks 和 * Done
2 * Tasks 里面的 TODO 内容变成 DONE 的时候，会自动把这个条目移动到 * Done
3 org-todo-keywords 的设置里面不能包含自动增加时间等的设置，否则增加的内容不能正确加到这个条目
"
   ;; (interactive)
   (let ((type (plist-get change-plist :type))
          (pos (plist-get change-plist :position))
          (from (plist-get change-plist :from))
          (to (plist-get change-plist :to))
          )
     (when (and (string= from "TODO")
                (string= to "DONE"))
       ;; (let ((answer (read-char "Move this entry to *DONE ? Y/N (Y)")))
       ;;   (when (or (= answer (string-to-char "y"))
       ;;             (= answer (string-to-char "Y"))
       ;;             (= answer (string-to-char "
"))
       ;;             )
           (wd-move-done-task-to-done-cats pos)
         ;; ))
       )
     )
   )

(add-hook 'org-trigger-hook 'wd-track-task-status)

;; (setq org-todo-keywords
;;       '((sequence "TODO(t)" "WAIT(w@/!)" "|" "DONE(d!)" "CANCELED(c@)")))
(setq org-todo-keywords
      '((sequence "TODO(t)" "WAIT(w)" "|" "DONE(d)" "CANCELED(c)")))
</pre>

<p>
在任何地方按一下 C-c m r，会出来一个 window 让你选择要创建 todo 还是 journal。选 t，然后输入内容就会自动插入到 ~/org/todo.org 的 * Tasks 里面。
</p>
<p>
此后，如果任务完成的时候，打开 todo.org，然后在任务上面 C-c C-t，会提示输入状态。如果是从 TODO 变成了 DONE，那这条任务会被转移到 * Done 里面。
</p>
<p>
因为里面都有时间，所以在 agenda list 里面，可以用 L 看到任务完成时间等。也将就用了。
</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我想应该有不少人在使用 emacs 的 org-mode 来做笔记，任务管理等。我使用 org-mode 比较多的情况是使用他做一些提纲，类似思维导图一样，以及用它来管理 todo list。
&lt;/p&gt;
&lt;p&gt;
org-mode 本身提供了 remember 来创建 tod
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="org-mode" scheme="http://wdicc.com/tags/org-mode/"/>
    
  </entry>
  
  <entry>
    <title>mac 里面的 emacs 的几个设置</title>
    <link href="http://wdicc.com/emacs-settings-in-mac/"/>
    <id>http://wdicc.com/emacs-settings-in-mac/</id>
    <published>2012-03-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p>刚开始在 mac 里面使用 emacs 简直就是自虐，因为那个反人类的 command 按键。一般 pc 上面的 alt 是在 space 旁边的，macbook 的 space 旁边是 command，对于一个需要经常在 mac 里面按的键，不是一般的郁闷。这个问题有两个方法解决。
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">mac 自带的解决方法</h2>
<div class="outline-text-2" id="text-1">


<p>
就是在键盘设置里面，把修饰键里面的 command 和 alt 替换一下。这个方法会很不爽，因为 mac 里面的复制粘贴是 command + c/v，以后要按 alt + c/v 的话，距离有点远。
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">KeyRemap4MacBook</h2>
<div class="outline-text-2" id="text-2">


<p>
这个是个 mac 上面的软件，地址在 <a href="http://pqrs.org/macosx/keyremap4macbook/document.html" target="_blank" rel="external">这里</a> 。里面的设置实在太多了，这里要用到的一个就是只在 emacs 里面把 command 和 alt 替换一下，这样就解决了上面提到的问题，还算完美。可是这个时候会发现，在 emacs 界面激活的情况下，command 开头的系统级别的快捷键都不好用了，比如 command + tab，这也很郁闷。
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">emacs 自带的完美解决方法</h2>
<div class="outline-text-2" id="text-3">


<p>
只说 emacs23，emacs24。早期的好像有 mac-pass-command-to-system 之类的设置，可我在 emacs24 里面没看到这个变量。
</p>
<p>
具体设置参考<a href="http://www.emacswiki.org/emacs/EmacsForMacOS#toc23" target="_blank" rel="external">这里</a> ，主要是下面这些设置。
</p>


<pre class="prettyprint lang-lisp">
;; key bindings
(when (eq system-type 'darwin) ;; mac specific settings
  (setq mac-option-modifier 'alt)
  (setq mac-command-modifier 'meta)
  (global-set-key [kp-delete] 'delete-char) ;; sets fn-delete to be right-delete
  )
</pre>

<p>
现在就很爽了，按 command + x 和 alt + x 效果一样，按 command + tab 也能切换窗口。算是完美了。
</p></div>
</div>
]]></content>
    
    <summary type="html">
    
      
&lt;p&gt;刚开始在 mac 里面使用 emacs 简直就是自虐，因为那个反人类的 command 按键。一般 pc 上面的 alt 是在 space 旁边的，macbook 的 space 旁边是 command，对于一个需要经常在 mac 里面按的键，不是一般的郁闷。这个问题有两
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="macos" scheme="http://wdicc.com/tags/macos/"/>
    
  </entry>
  
  <entry>
    <title>postgres sql 调优一例</title>
    <link href="http://wdicc.com/analyse-and-vacuum-in-postgres/"/>
    <id>http://wdicc.com/analyse-and-vacuum-in-postgres/</id>
    <published>2012-03-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>前几天发现有个 sql 跑的超慢，第一次拿到 sql 大家简单分析了一下，觉得是写的有问题，里面有对一个大表的查询，数据量大概 800 万，结果还和好几个小表做了 join，而且还是 left join，速度可想而知了。单独对那个大表查询，其实也就是几分钟的事情。
</p>
<p>
所以建议就是先对小表做 join，然后再和大表做一次 join。不过结果并不理想，时间依然还是那么长。这个时候就得仔细看执行计划了，如下。
</p>
<p>
能看到虽然人肉对 sql 做了一些优化，但是 sql 并没有按照我们的期望去执行，执行计划里面还是首选去查 fact_tuan_rank_detail 这个大表，速度肯定慢了。
</p>


<pre class="prettyprint lang-text">
 Nested Loop Left Join  (cost=447.90..1003.43 rows=2 width=620)
   Join Filter: (team.id = team_arrive_city.team_id)
   ->  Nested Loop  (cost=77.62..85.98 rows=1 width=588)
         ->  HashAggregate  (cost=77.62..77.68 rows=1 width=71)
               ->  Index Scan using date_idx on fact_tuan_rank_detail  (cost=0.00..77.60 rows=1 width=71)
                     Index Cond: ((thedate >= '2012-02-25'::date) AND (thedate <= '2012-02-27'::date))="" filter:="" (((source)::text="" ~~="" '%team%'::text)="" and="" ((source)::text="" !~~="" '%today%'::text)="" '%ongoing%'::text)="" ((s="" ource)::text="" '%special%'::text))="" -="">  Index Scan using team_pkey on team  (cost=0.00..8.28 rows=1 width=32)
               Index Cond: (team.id = fact_tuan_rank_detail.team_id)
               Filter: ((to_timestamp((team.end_time)::double precision))::date > '2012-02-27'::date)
   ->  HashAggregate  (cost=370.29..589.15 rows=14591 width=15)
         ->  Seq Scan on team_arrive_city  (cost=0.00..288.19 rows=16419 width=15)
(12 rows)
</=></pre>

<p>
仔细研究之后，发现了 rows=1 这个信息。这就是为什么查询分析器先对这个表做查询了，因为他认为这个表最小。
</p>
<p>
此后对这个表执行了一下 <a href="http://www.postgresql.org/docs/9.1/static/sql-analyze.html" target="_blank" rel="external">analyse</a> 命令，更新了一些统计信息。然后再看执行计划如下。
</p>


<pre class="prettyprint lang-text">
 Hash Join  (cost=1210761.12..1326052.45 rows=2282704 width=620)
   Hash Cond: (fact_tuan_rank_detail.team_id = team.id)
   ->  HashAggregate  (cost=1203912.40..1265555.26 rows=1027381 width=71)
         ->  Index Scan using date_idx on fact_tuan_rank_detail  (cost=0.00..1075489.81 rows=10273807 width=71)
               Index Cond: ((thedate >= '2012-02-25'::date) AND (thedate <= '2012-02-27'::date))="" filter:="" (((source)::text="" ~~="" '%team%'::text)="" and="" ((source)::text="" !~~="" '%today%'::text)="" '%ongoing%'::text)="" ((source)="" ::text="" '%special%'::text))="" -="">  Hash  (cost=6666.33..6666.33 rows=14591 width=64)
         ->  Merge Left Join  (cost=6414.63..6666.33 rows=14591 width=64)
               Merge Cond: (team.id = b.team_id)
               ->  Sort  (cost=4670.40..4686.82 rows=6567 width=32)
                     Sort Key: team.id
                     ->  Seq Scan on team  (cost=0.00..4254.02 rows=6567 width=32)
                           Filter: ((to_timestamp((end_time)::double precision))::date > '2012-02-27'::date)
               ->  Sort  (cost=1744.23..1780.71 rows=14591 width=40)
                     Sort Key: b.team_id
                     ->  Subquery Scan on b  (cost=370.29..735.06 rows=14591 width=40)
                           ->  HashAggregate  (cost=370.29..589.15 rows=14591 width=15)
                                 ->  Seq Scan on team_arrive_city  (cost=0.00..288.19 rows=16419 width=15)
(18 rows)
</=></pre>

<p>
可以看到执行计划已经变了，先做其他表的 join，最后再和大表 join。并且提示的执行时间也大致靠谱。
</p>
<p>
从这里面引申一下，时常会听到有人说 explain 命令执行后得出的执行时间不靠谱，需要使用 explain analyse。可是为什么不靠谱呢，其实 explain analyse 需要的时间和实际执行时间一样，explain 不靠谱的原因是因为数据库对那个表的统计信息不及时导致的。
</p>
<p>
再进一步了解，postgres 里面这个统计信息为什么不靠谱呢？难道还总是需要我维护这些信息啊？
</p>
<p>
其实 postgres 里面有个 autovacuum 进程就是做这个事情的。autovacuum 进程默认是启用的。他会在数据库空闲的时候，对数据库做 vavcuum 和 analyse。具体多久执行一次，<a href="http://www.postgresql.org/docs/9.1/static/routine-vacuuming.html" target="_blank" rel="external">文档</a> 里面都有写，建议多看看这个页面里面的信息。
</p>
<p>
此外，还发现 postgres 还提供了很多 <a href="http://www.postgresql.org/docs/9.1/static/monitoring-stats.html" target="_blank" rel="external">数据库状态查询函数</a> ，使用这里面函数可以查到每个表最后一次 analyse 的时间，vacuum 的时
间，里面索引被使用的情况等等，好多信息。
</p>

ps: 使用 analyse 之后，那个 sql 好用了，可是发现过两天又不行了，查看 explain select * from t1 好像没问题，那怎么回事呢？开始没想明白，只好继续 analyse 一下，又好了。可过了两天又不行了。这次得细看了。最后发现是因为真实的 sql 是有 where 条件的，日期条件限定的那部分数据查询分析器认为很少导致了问题。没办法后面只好每次导数都 analyse 一下了。发现 pg_bulkload 导数的方式有点问题。
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前几天发现有个 sql 跑的超慢，第一次拿到 sql 大家简单分析了一下，觉得是写的有问题，里面有对一个大表的查询，数据量大概 800 万，结果还和好几个小表做了 join，而且还是 left join，速度可想而知了。单独对那个大表查询，其实也就是几分钟的事情。
&lt;/p&gt;
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="postgres" scheme="http://wdicc.com/tags/postgres/"/>
    
      <category term="sql" scheme="http://wdicc.com/tags/sql/"/>
    
  </entry>
  
  <entry>
    <title>总算是将就同步好了 gentoo 和 mac 的 emacs</title>
    <link href="http://wdicc.com/emacs-in-mac/"/>
    <id>http://wdicc.com/emacs-in-mac/</id>
    <published>2012-02-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[mac 里面居然自带了一个 emacs，，版本是 22.1.1，有够老的反正是。因为 gentoo 用的是 emacs24，所以按照不知道哪里推荐的，去下载了一个 emacs24。然后就是尝试在 mac 下面配置好我的 emacs 了，配置好才好通过 org2blog 写 blog。。。

老早就随大流把 .emacs.d 放到了 github，所以这部分比较简单，只要 clone 一下就可以了。

之前没想到的是我的一部分 elisp 包是通过 gentoo 管理的，这样只有 .emacs.d 显然是不行的。然后使用了 dropbox 这个方案，把 gentoo 里面的 site-lisp 部分也同步过来。主要是 <em>usr/share/emacs/etc</em> 和 <em>usr/share/emacs/site-lisp</em> 两个目录。把 gentoo里面的这两个目录转移到 dropbox 里面，然后做个软链。mac 里面也从 dropbox 里面做好软链，要注意路径位置不能变化，变化的话 gentoo 里面的 site-gentoo.el 里面写死的路径就不能用了。不过不变化那个路径的话，其实是会影响系统自带的 emacs22.1.1 的使用的，不过不管了，爱咋匝地吧，反正我也不用那个。

接下来就是在 .emacs 里面加 load-path 就可以了。gentoo 是不需要的，所以用下面的代码
<pre class="prettyprint lang-lisp">
    (setq load-path
        (cons "/usr/share/emacs/site-lisp/" load-path)))</pre>
mac 里面用 emacs 一个郁闷的问题是，command 键挤在了 alt 和 space 中间，和普通键盘不一样，导致习惯了普通键盘的我经常按错。很郁闷，不知道能不能把那个 command 弄成 alt，反正好像 command 在 emacs 里面没用。。。

可以用上面类似的方法处理一些两个系统的特例。

顺便再吐槽下 mac 的输入法，装了个 sogou，发现这小子启动慢，经常切换过去后打了几个字母了都，他还没反应，字母就上屏了。fit的词库又不行，词频调整也有问题。‘在’我这半天输入 n 个了都，还是处在‘再’的后面，很讨厌。不知道有没有其他靠谱的。。。
]]></content>
    
    <summary type="html">
    
      mac 里面居然自带了一个 emacs，，版本是 22.1.1，有够老的反正是。因为 gentoo 用的是 emacs24，所以按照不知道哪里推荐的，去下载了一个 emacs24。然后就是尝试在 mac 下面配置好我的 emacs 了，配置好才好通过 org2blog 写 blo
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>mac 上面安装 wine</title>
    <link href="http://wdicc.com/wine-in-mac/"/>
    <id>http://wdicc.com/wine-in-mac/</id>
    <published>2012-02-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[买了 mbp 之后，就尝试安装 wine。想用它搞定 rtx 来着。

我用的 homebrew，感觉还不错。之前尝试过 gentoo prefix，我的妈，要编译的包太多了。homebrew 好很多。

wine 使用 llvm-gcc 编译不过去，需要先安装 gcc，gcc 在 xcode 低版本好像是自带的，高于 4.2.x 好像就不带了。

gcc 也有几个选择，可以参考<a href="https://github.com/mxcl/homebrew/issues/9925" target="_blank" rel="external">这里</a>，我用的第一个。
<pre class="prettyprint lang-bash">
brew install --use-gcc wine</pre>
基本上就没问题了，参考了 <a href="https://github.com/mxcl/homebrew/issues/9925" target="_blank" rel="external">这里</a>。

对了，brew 里面还有 winetricks，可以直接安装使用。还没有尝试安装 rtx，不知道这玩意能不能装上。。

ps: 感觉这片文章好水。。一点含量都没有。。
]]></content>
    
    <summary type="html">
    
      买了 mbp 之后，就尝试安装 wine。想用它搞定 rtx 来着。

我用的 homebrew，感觉还不错。之前尝试过 gentoo prefix，我的妈，要编译的包太多了。homebrew 好很多。

wine 使用 llvm-gcc 编译不过去，需要先安装 gcc，gcc 
    
    </summary>
    
    
      <category term="mac" scheme="http://wdicc.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>thunderbird 和 davmail 配合连接 exchange</title>
    <link href="http://wdicc.com/use-davmail-to-access-exchange-server-better-in-thunderbird/"/>
    <id>http://wdicc.com/use-davmail-to-access-exchange-server-better-in-thunderbird/</id>
    <published>2012-01-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p>exchange 是个恶心玩意，虽然提供了 imap 接口，但是速度巨慢，发送接收都慢。davmail 可以解决这个问题。
</p>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">davmail 能干啥</h2>
<div class="outline-text-2" id="text-1">


<p>
<a href="http://davmail.sourceforge.net/" target="_blank" rel="external">davmail</a> 可以理解为就是一个 proxy，他负责和 exchange 通讯，其他邮件客户端连接 davmail 来获取邮件什么的。网站上面有图，看
着更加直观一点。
</p>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">安装配置 davmail</h2>
<div class="outline-text-2" id="text-2">


<p>
ubuntu 里面好像直接就有，apt-get 安装就可以了。gentoo 里面没有，我在 overlay 里面找到一个 ebuild，自己修了一下，放到我的
<a href="https://github.com/wd/overlay" target="_blank" rel="external">overlay</a> 了，在 net-mail/davmail-bin 下面。启用 server 这个 use。
</p>
<p>
安装后会创建一个 davmail 用户，需要建立一个 /var/log/davmail 的目录，给 davmail 写权限。
</p>
<p>
然后手动运行 <i>opt/davmail/davmail.sh，有界面，配置好 exchange owa 的地址，保存，会生成 ~</i>.davmail.properties 文件。
</p>
<p>
这里有个问题，如果 owa 地址是 http 的，那直接继续下面的就可以了，如果是 https 的，那还需要配置对应的 ssl 相关参数。我是
直接在 thunderbird 里面配置好之后，收了一下邮件，然后会提示一个什么证书的东西，这之后再继续下面的事情就可以了，这个时候
他会给你配置好里面 ssl 相关的东西。
</p>
<p>
复制到 /etc/davmail.properties，把里面的 davmail.server=fales 改成 true，设置好 log 为 /var/log/davmail/davmail.log，级
别先使用 debug，测试好了之后改成 warn。
</p>
</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">配置 thunderbird</h2>
<div class="outline-text-2" id="text-3">


<p>
参考 davmail 网站上面关于 thunderbird 的配置就好了。
</p>
<p>
可配置的有接收，发送，地址簿，日历。
</p>
<p>
排错就看看 /var/log/davmail/davmail.log 把，信息很详细。  
</p></div>
</div>
]]></content>
    
    <summary type="html">
    
      
&lt;p&gt;exchange 是个恶心玩意，虽然提供了 imap 接口，但是速度巨慢，发送接收都慢。davmail 可以解决这个问题。
&lt;/p&gt;

&lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;davm
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="thunderbird" scheme="http://wdicc.com/tags/thunderbird/"/>
    
      <category term="davmail" scheme="http://wdicc.com/tags/davmail/"/>
    
      <category term="exchange" scheme="http://wdicc.com/tags/exchange/"/>
    
      <category term="outlook" scheme="http://wdicc.com/tags/outlook/"/>
    
  </entry>
  
  <entry>
    <title>老文一篇，关于小毛</title>
    <link href="http://wdicc.com/about-mao/"/>
    <id>http://wdicc.com/about-mao/</id>
    <published>2011-12-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一个老文，从 buaa bbs 翻出来，贴这里吧
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">无题(1)</h2>
<div id="outline-container-1-1" class="outline-3">
<h3 id="sec-1-1">序曲</h3>
<div id="text-1-1" class="outline-text-3">

好久以前就想养只猫了，可是条件不允许。没法子，只能看看别人pp的小猫过过瘾了。

去年冬天的时候，养猫的欲望越来越严重，以至于那个时候就找robomm定了一个，其间小叶子还和我说要是想养的话可以给我找人抱一只。呵呵，不过后来robomm的大猫好像没有怀孕，结果空欢喜一场。再后来就要过年了，因为照顾起来也不方便，所以就放弃了。过年来了我就在打算抱只小猫了。开始本来打算找宠物市场买一只，可是robomm的那片文章，让我放弃了这个念头，trademark一只在怂恿我去买一只，不过还好我能顶得住，呵呵。平时也不去什么猫的论坛，那就只好让robomm给我留意一下啦，呵呵。

</div>
</div>
<div id="outline-container-1-2" class="outline-3">
<h3 id="sec-1-2">联系</h3>
<div id="text-1-2" class="outline-text-3">

robomm给我介绍的我联系过两个，其中有一个只是发email问了问相片，不过他好久才给我回的，他给我回信时，我都已经和另外一个谈好了，呵呵，那个就是万晓飞。我介绍了我的情况之后，她说可以给我，不过有个条件，就是要送她的大猫一些猫粮，说为了让我付出点代价，这样我至少不会随便处理掉猫猫，我想都没想说没问题，然后就这么说定了。第一眼看到这些小猫的相片的时候，他们还不点大，其实也比现在大不了多少，非常可爱。而我尤其喜欢那个头上有点黑毛的小猫，之后的联系中她也同意给我那只了。高兴中，我就在bbs上面发了帖子，给大家看，那个就是我要的猫。:p

</div>
</div>
<div id="outline-container-1-3" class="outline-3">
<h3 id="sec-1-3">郁闷之初</h3>
<div id="text-1-3" class="outline-text-3">

因为没有满月，所以要等1，2个星期才行。上周一我给他发了个mail问小猫的事情，周二他给我打电话，说我可以过去拿了，不过告诉我那只说好了留给我的给她姐姐了，当时我很郁闷。后来一想，还不都一样啊，呵呵，我说那就拿起他的吧，没关系。然后就说起送大猫什么猫粮的事情来，然后他就说周一有个小mm花了80多块钱的猫粮，其实也就值40多，被骗了。所以让我买罐头好了，7块钱一听。也差不了那么多。期间我也没有问我需要买多少，因为我想，既然都这么联系好了，那多少还不是一个形式而已？而她也一再表示她不是要卖钱。从后来接触中听她的口气，她确实应该不缺钱，北京的有钱人。

没有订到我想要的那个，多少也有点郁闷吧，不过这还好。

</div>
</div>
<div id="outline-container-1-4" class="outline-3">
<h3 id="sec-1-4">郁闷之中</h3>
<div id="text-1-4" class="outline-text-3">

周二她说我工作日晚上都可以过去吧，我说我还没有准备好猫用的东西，所以周三我需要去买点东西，周四吧，她说可以。周二晚上我来bbs问好了robomm，然后周三下午请假去买了猫粮，和一些猫用的东西。周四，我和她联系，问我晚上什么时候过去，让我郁闷的是，她说今天晚上不行。。。。。。

</div>
</div>
<div id="outline-container-1-5" class="outline-3">
<h3 id="sec-1-5">郁闷之极</h3>
<div id="text-1-5" class="outline-text-3">

既然不行，我说那就周五吧，而且我想周五也刚好，抱回来是周末，也好照顾一下她。周五也就是今天了。今天我们部门搬到楼上，从早上9点开始，一直忙到下午6点，还有一些东西没有搞定，不过只能周一了。中午吃完饭我给他发短信问我什么时候过去，后来我就去忙了，结果他给我发的消息我没有看到，后来他给我打电话，然后我们说好了过去的时间，不过中间她问我给大猫买了多少东西，我说6听。然后他就表现出很失望的样子，我立刻郁闷了。。。

我说如果你觉得我买的少了，不够诚心的话，那就算了，我也就不过去了。后来反正两个人jjww了半天，还是说好过去了。

</div>
</div>
<div id="outline-container-1-6" class="outline-3">
<h3 id="sec-1-6">喜悦之初</h3>
<div id="text-1-6" class="outline-text-3">

没想到搬家忙到了6点，这一天我就中午吃饭的时候喝了口水，而且一直搬桌子柜子，脚都疼死了，连坐一下都没有时间，不过总算是忙完了。

站在地铁里面，我的脚一直在疼，想相还要走那么远，稍有点不爽。

到了她家，门口有只黄色的大猫，跑来跑去的，据说他们有三只大猫。还有两只就是现在丁丁（我听他们喊他丁丁，我觉得也挺好听的，而且他确实很小不点，wy还说像只老鼠，呵呵，就这么叫吧 :p）的父母了。

万晓飞给我在沙发下面摸了半天，把丁丁给我摸了出来，呵呵，小不点，然后头顶有点淡黄色的毛，非常可爱。我看到这只小猫，之前的郁闷全都没有啦，哈哈。据说这只猫的眼睛是鸳鸯眼，反正我也不懂了。。。(to be continued…)

</div>
</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">无题(2)</h2>
<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">说在前面的话</h3>
<div id="text-2-1" class="outline-text-3">

偶得小丁丁的名字在我叫了两天之后，终于没有能顶得住大家的压力，改名叫毛毛啦，小名就叫小毛好了，赫赫。事情是这样的，小猫抱回来之后，大家就开始给她起名字了，如下：小白、小黑、毛球、小红，我一看这可不行啊，而且关键是丁丁大家都不大同意阿，没法子，就叫毛毛吧，其实我一开始就打算叫这个的。这个名字好歹赢得了几个人的同意，赫赫。

</div>
</div>
<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">继续上次的话题</h3>
<div id="text-2-2" class="outline-text-3">

把小毛塞到包里，我就急急忙忙的出来了。小毛一到包里，就开始喵喵叫个不停，声音很细，可是一直叫，我抱着包，然后赶紧跑出来打了个车就杀回来了。跑上楼，打开包，小毛不叫了，开始环视周围环境，哈哈，肯定吓了一跳。

</div>
</div>
<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3">家有小毛</h3>
<div id="text-2-3" class="outline-text-3">

赶紧给他准备猫粮、猫砂、水、小窝什么的，准备妥当之后，才想起来，我还没有吃饭呢，搬家搬了一天，脚后跟都疼死了。烧水煮了点面，吃完面发现小家伙不见了，喊了半天也没有反映，想想可能钻床地了。床下好多东西，掏了半天才看到，摸出来后，小家伙一溜烟，又跑到下面去了，呵呵，把我郁闷的，再次摸出来后，我就把东西都靠里面的墙边放，这样他就算再跑进去也容易够了。后来还是xh给猫的小窝上面盖了一件衣服，放进去之后小毛才算老实了，在里面呆着，哈哈，原来他是害羞阿。刚抱回来的时候给她拍了几张相片，不过没敢用闪光灯，怕吓着他，所以比较模糊，呵呵，感兴趣的可以到我的ftp上面下。

</div>
</div>
<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4">一个星期左右</h3>
<div id="text-2-4" class="outline-text-3">

现在小毛抱回来大概一个星期左右了吧，刚开始那两天天气比较冷，我这里暖气不是很足，我担心他冻着，所以就把他抱到被子里面呆了两个晚上。后来那几天转暖和了，而且我发现她的眼屎特别严重，怀疑是晚上太热所致，所以后来几天就没有让他钻了。晚上她老是要从被子的边角往里面跑，往往是我每次醒来都会发现他已经在被子里了，然后就把他抱出去，下一次醒来就又来了，呵呵，一点办法都没有。不过这几天发现小家伙懂事多了，困了会爬到你的腿上睡一会，玩一会，要不然就会爬到自己的窝里面睡，晚上也比较少钻被子了。呵呵。

</div>
</div>
<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5">尾声</h3>
<div id="text-2-5" class="outline-text-3">

就说这些了吧，我觉得养一只小猫也没有说的那么恐怖了，你只要让他找到了吃饭喝水方便的地方，基本上就不用你管了，他要是什么找不到，就会和你喵喵的叫得，你要是听到了就把他抱到吃饭喝水的地方，他自己就会去解决了。至于洗澡、打针、剪指甲之类的事情也不是天天都有，所以还是比较省心的，呵呵。

</div>
</div>
<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6">说在后面的话</h3>
<div id="text-2-6" class="outline-text-3">

就是既然上一次的标题用丁丁历险记了，这次还是继续吧，哈哈。

</div>
</div>
</div>
]]></content>
    
    <summary type="html">
    
      一个老文，从 buaa bbs 翻出来，贴这里吧
&lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;无题(1)&lt;/h2&gt;
&lt;div id=&quot;outline-container-1-1&quot; class=&quot;o
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>介绍下 org2blog</title>
    <link href="http://wdicc.com/about-org2blog/"/>
    <id>http://wdicc.com/about-org2blog/</id>
    <published>2011-10-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">org2blog 是什么</h2>
<div id="text-1" class="outline-text-2">

<a href="https://github.com/punchagan/org2blog" target="_blank" rel="external">org2blog</a> 是用来把 org-mode 格式的文章发布到 wordpress 的工具。其实之前使用 webloger.el 也可以发布到 wordpress，不过是
webloger.el 已经基本没人维护了，这个 org2blog 作者支持还很积极，另外 org-mode 还提供了一些额外的方便编辑的方法，所以其实
是个不错的东东。

</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">安装</h2>
<div id="text-2" class="outline-text-2">

其实按照上面地址的内容，安装很简单。
<pre class="prettyprint">
(setq load-path (cons "~/.emacs.d/org2blog/" load-path))
(require 'org2blog-autoloads)</pre>
<ol>
	<li>依赖 <a href="http://launchpad.net/xml-rpc-el" target="_blank" rel="external">xml-rpc</a> ，添加到 load-path</li>
	<li>需要最新版本的 org-mode，我使用的是 emacs 24 里面的 7.7，之前使用 7.5(?) 的时候，遇到了发布的时候会在文章结尾附加
&lt;/body&gt;&lt;/html&gt; 导致 blog 的展现挂掉的问题。</li>
</ol>
</div>
</div>
<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">使用</h2>
<div id="outline-container-3-1" class="outline-3">
<h3 id="sec-3-1">配置</h3>
<div id="text-3-1" class="outline-text-3">
<pre class="prettyprint">
;; org2blog
;;

(require 'org2blog-autoloads)
(setq org2blog/wp-blog-alist
      `(("abc"
         :url "http://abc.com/xmlrpc.php"
         :username "admin"
         :password PWD
         :keep-new-lines t
         :confirm t
         :wp-code nil
         :tags-as-categories nil)
        ))

(setq org2blog/wp-buffer-template
  "#+DATE: %s
#+OPTIONS: toc:nil num:nil todo:nil pri:nil tags:nil ^:nil TeX:nil 
#+CATEGORY: Heart
#+TAGS: 
#+PERMALINK: 
#+TITLE:
\n")</pre>
我不使用 wordpress 的 code 格式，所以设置了 wp-code 为 nil。可以定义多个 blog。

</div>
</div>
<div id="outline-container-3-2" class="outline-3">
<h3 id="sec-3-2">登陆，发帖</h3>
<div id="text-3-2" class="outline-text-3">

M-x org2blog/wp-login 会提示你要登陆哪个 blog
M-x org2blog/wp-new-entry 会使用设置的 template 打开一个 buffer
M-x org2blog/wp-post-buffer 保存成 draft
M-x org2blog/wp-post-buffer-and-publish 真实发布

另外，还可以发布一个 tree 而不是整个 org 文件，以及一些其他的操作就不多说了。

发布源代码可以使用 BEGIN_SRC END_SRC 块，或者冒号开头的行会被当作源代码。

我使用的是 wp-syntax，所以发布源代码使用 BEGIN_HTML 在里面使用 pre 标签
<pre class="prettyprint">
&lt;pre lang="lisp"&gt;
(setq a 1)
&lt;/pre&gt;
#+END_HTML</pre>
</div>
</div>
<div id="outline-container-3-3" class="outline-3">
<h3 id="sec-3-3">其他</h3>
<div id="text-3-3" class="outline-text-3">

使用 org2blog 只能从 org 发布到 wordpress，不能从 wordpress 回到 org 文件再进行编辑，不过我看到有人已经提供了一个解决方
法，或许将来也会支持这个功能。

使用 org2blog 发布很讨厌的一点是，他会把你的 org 加上很多的 html 代码，再编辑的时候比较讨厌。

org2blog 在 github 的页面 <a href="https://github.com/punchagan/org2blog" target="_blank" rel="external">https://github.com/punchagan/org2blog</a> 上面有不少有用的东西，建议看看。

</div>
</div>
</div>
]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;org2blog 是什么&lt;/h2&gt;
&lt;div id=&quot;text-1&quot; class=&quot;outline-text-2&quot;&gt;

&lt;a href=&quot;https:/
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="org2blog" scheme="http://wdicc.com/tags/org2blog/"/>
    
  </entry>
  
  <entry>
    <title>介绍下 openresty</title>
    <link href="http://wdicc.com/intro-openresty/"/>
    <id>http://wdicc.com/intro-openresty/</id>
    <published>2011-10-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一直没有时间使用 ngx_lua，上周算是真正使用了下，总结下，也算是帮忙推广下 openresty。
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">什么是 openresty</h2>
<div id="text-1" class="outline-text-2">

openresty 的主力作者是 <a href="http://weibo.com/agentzh" target="_blank" rel="external">@agentzh</a> 它的网页在 <a href="http://openresty.org" target="_blank" rel="external">这里</a>，上面有介绍。按我的理解，他是介于客户端浏览器 js 和数据库之间的一层。

在 ajex 还没有盛行的时代，数据库的数据需要展现在浏览器的时候，一般都是使用 php/jsp 之类读取数据，然后拼表格/图表这些。在客户端机器越来越牛逼之后，把部分运算放在浏览器里面开始盛行，ajex 也越来越流行。这个时候通常还需要有个服务器端的程序来配合从数据库获取并提供数据，应该也有不少类似的程序来提供这个数据。

老版本的 openresty 是基于 perl 做的，可以上 cpan 上面 <a href="http://search.cpan.org/~agent/OpenResty-0.5.12/lib/OpenResty/Spec/REST_cn.pod" target="_blank" rel="external">搜到</a> (不知道为啥这页面我打不开了)。agentzh 还专门为他写了一个 admin site，纯 js + oprensty 来实现的，可以直接在上面配置接口，很方便。目前老版本应该没人用了。

新版本的 openresty 基本上等于是 nginx 和一些 nginx 模块的集合，大部分模块都是 agentzh 和 <a href="https://github.com/chaoslawful" target="_blank" rel="external">chaoslawful</a> 完成的，目前 agentzh 离职在家全职开发 openresty 相关，chaoslawful 还在淘宝 <a href="http://linezing.com" target="_blank" rel="external">量子统计</a> 。

这大概就是我了解的 openresty 的起源和目前的情况。写的比较简单，里面的曲折就不多说了，可以找上面提到的大牛聊天。

</div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">怎么使用 openresty</h2>
<div id="text-2" class="outline-text-2">

我下面用一个简单的例子来描述下，我是怎么使用 openresty 的，从中应该能看出来 openresty 能干啥，怎么用。

</div>
<div id="outline-container-2-1" class="outline-3">
<h3 id="sec-2-1">需求</h3>
<div id="text-2-1" class="outline-text-3">

在 postgresql 数据库有张网站日访问流量表，包含两个字段 thedate 和 pv。需要把里面的数据展现出来，画出来流量曲线。

<dl><dt>注意</dt><dd>下面的代码大都从现有程序里面扒出来的，所以不一定直接就能用，只是个示意而已。</dd></dl></div>
</div>
<div id="outline-container-2-2" class="outline-3">
<h3 id="sec-2-2">安装 openresty</h3>
<div id="text-2-2" class="outline-text-3">

首先需要安装 openresty。从 <a href="http://openresty.org" target="_blank" rel="external">openresty.org</a> 下载当前的 stable 版本 ngx_openresty-1.0.6.22.tar.gz。
<pre class="prettyprint lang-bash">
$ cd ngx_openresty-1.0.6.22
$ ./configure --with-http_drizzle_module --with-http_postgres_module --with-pg_config=/opt/pg90/bin/pg_config --prefix=/usr/local/openresty --with-libdrizzle=/usr/local/libdrizzle/ --with-luajit --with-http_iconv_module # 这是我用到的参数，按照需要加减
$ make
# make install</pre>
configure 的时候 postgres_module 是必须的，其他的 drizzle_module 是用来支持从 mysql 获取数据的，iconv_module 是用来做编码转换的，luajit 据说可以提升不少性能。

不出问题的话，在 /usr/local/openresty 目录下面就安装好了。其实更合理的方式应该是提供一个 rpm 或者 deb 包的。

</div>
</div>
<div id="outline-container-2-3" class="outline-3">
<h3 id="sec-2-3">启动 nginx</h3>
<div id="text-2-3" class="outline-text-3">

openresty 给提供了简单可用的 nginx.conf，所以现在可以先尝试启动下 /usr/local/openresty/nginx/sbin/nginx 了，如果启动没问题，那就 ok 了。

配置文件在 /usr/local/openresty/nginx/conf/nginx.conf。

</div>
</div>
<div id="outline-container-2-4" class="outline-3">
<h3 id="sec-2-4">配置 nginx</h3>
<div id="text-2-4" class="outline-text-3">

主要就是配置 /usr/local/openresty/nginx/conf/nginx.conf，以后很多事情都会在这里面来完成，说是 nginx.conf 编程也不为过，呵呵。

增加下面的配置
<pre class="prettyprint lang-conf">

    upstream pgsql {
        postgres_server server_ip:5432 dbname=test password=123 user=test;
        #postgres_keepalive  max=2 mode=single overflow=reject;
        postgres_keepalive off;
    }

# server 里面增加一个 location

       location /=/pv {
            postgres_query 'select thedate, pv from pv';
            postgres_pass pgsql;

            rds_json on;
            rds_json_format compact;

            xss_get on;
            xss_callback_arg '_c';
        }</pre>
<ol>
	<li>其中关于 upstream postgres 用来定义需要连接的数据库信息，和发送 sql 到数据库，可以参考 <a href="https://github.com/FRiCKLE/ngx_postgres/" target="_blank" rel="external">这里</a>。</li>
	<li>rds_json 用来将数据库的输出变成 json 格式，可以参考 <a href="https://github.com/agentzh/rds-json-nginx-module" target="_blank" rel="external">这里</a> 。</li>
	<li>xss_get 用来支持跨域，jquery 默认使用的 callback 参数是 _c，可以参考 <a href="https://github.com/agentzh/xss-nginx-module" target="_blank" rel="external">这里</a>。</li>
</ol>
这样配置好之后，重启下。结果应该很清晰了，请求 <a href="http://your_ip/=/pv" target="_blank" rel="external">http://your\_ip/=/pv</a> 应该就可以得到数据库里面的数据了，可以使用 curl 看看结果，应该类似下面的
<pre class="prettyprint lang-json">
</pre></div>
</div>
<div id="outline-container-2-5" class="outline-3">
<h3 id="sec-2-5">js 画图</h3>
<div id="text-2-5" class="outline-text-3">

挑一个画图程序，比如我用过的 <a href="http://highcharts.com" target="_blank" rel="external">highcharts</a>, <a href="http://www.amcharts.com/" target="_blank" rel="external">amcharts</a> 这些都不错，amcharts 是使用 flash 画图，兼容各种浏览器，highcharts 号称也支持，不过我弄出来的图在 chrome/firefox 下面没问题，ie 不支持，他用的是 svg 标签。

就写几行代码来示意下吧
<pre class="prettyprint lang-javascript">
    $.ajax({
        url : 'http://your_ip/=/pv',
        success: function (data) {
            renderPvCharts(data);
        }
    });

    function renderPvCharts(data) {
        $('body').append('</pre>
<pre class="prettyprint lang-javascript">
        var result = Utils.getSplineChartSeries( data ); # 将 nginx 返回的 json 格式数据转化为 highcharts 需要的格式
        var options = {
			chart: {
                zoomType: 'xy',
				renderTo: 'pv', # div 的 id
				defaultSeriesType: 'spline'
			},
			title: {
                text: '每日 pv'
            },
			xAxis: {
                type: 'datetime'
			},
			tooltip: {
				formatter: function() {
			        return '<strong>'+ this.series.name +'</strong>
'+
						Highcharts.dateFormat('%e. %b', this.x) +': '+ this.y;
				}
			},
			legend: {
				layout: 'vertical',
				align: 'right',
				verticalAlign: 'top',
				x: -10,
				y: 100,
				borderWidth: 0
			},
            series : result.y
        };

        var chart = new Highcharts.Chart( options );
    };

} );</pre>
简单解释下
<ol>
	<li>在页面 readay 的时候，使用 ajex 设置回调函数并请求接口。</li>
	<li>回调函数里面使用 Utils.getSplineChartSeries 转换一下数据，方便直接给 options 里面数据赋值，具体需要的数据格式，看 highcharts 的 spline 的 demo 就可以。</li>
	<li>回调函数里面显示图表。</li>
</ol>
这样就完事了，数据就展现出来了。

</div>
</div>
<div id="outline-container-2-6" class="outline-3">
<h3 id="sec-2-6">其他</h3>
<div id="text-2-6" class="outline-text-3">

从上面可以看到整个数据流是怎么回事。openresty 可以做的事情远比上面描述的复杂，上面只是个最简单的应用了。
<ol>
	<li>比如使用 <a href="https://github.com/agentzh/rds-csv-nginx-module" target="_blank" rel="external">rds_csv</a> 来直接得到 csv 格式的数据提供给用户，而不是 json。</li>
	<li>可以使用 <a href="https://github.com/chaoslawful/lua-nginx-module" target="_blank" rel="external">ngx_lua</a> 在 nginx.conf 里面使用 lua 来在服务器端对数据做一些处理再丢给浏览器。
大家都知道 js 处理的数据太大的时候，会导致浏览器卡死，所以如果不方便通过 sql 控制输出的时候，可以使用 lua 来处理下。当然 这只是其中一个应用，使用 ngx_lua 你可以干很多事情，比如上面那个使用 js 来生成 spline 数据的函数就可以用 lua 来实现，lua 还可以和 c 结合来做一些事情。对于 location 的参数，在 ngx_lua 里面也是可以访问的，比如 ngx.var.arg_c 这样。具体还是看 wiki 吧，写不完的。
<ol>
	<li>openresty 还能直接访问 redis 和 memcached。</li>
</ol>
本篇只能算是一个入门而已，openresty 在淘宝量子统计的应用非常广泛。另外在 <a href="http://qunar.com" target="_blank" rel="external">去哪网</a> 也有不少应用，比如我知道的安全过滤模块，和一些数据报表，都是基于 openresty 的。

附一个 highcarts 画的图

<img class="alignnone" title="流量情况" src="http://wdicc.com/images/2011-10-24-171245_1100x312_scrot.png" alt="" width="1100" height="312"></li>
</ol>
</div>
</div>
</div>
]]></content>
    
    <summary type="html">
    
      一直没有时间使用 ngx_lua，上周算是真正使用了下，总结下，也算是帮忙推广下 openresty。
&lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;什么是 openresty&lt;/h2&gt;
&lt;div 
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="javascript" scheme="http://wdicc.com/tags/javascript/"/>
    
      <category term="openresty" scheme="http://wdicc.com/tags/openresty/"/>
    
  </entry>
  
  <entry>
    <title>postgresql 里面的 generate_series</title>
    <link href="http://wdicc.com/generate_series-function-in-postgresql/"/>
    <id>http://wdicc.com/generate_series-function-in-postgresql/</id>
    <published>2011-10-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p>有个报表需要把几天的记录按照小时 join 起来，最开始的作法是通过 js 来 join 数据。后来遇到了问题，就是某天某个小时可能会没有记录，然后想破头了，在 js 里面循环的时候设置每天循环到的当前的小时。可崩溃的是还会出现有的是这两小时没有，有的是另外的，用 js 搞不定了，就尝试用 sql 搞定。
</p>
<p>
sql 开始的方法是简单的使用 full join。然后发现没法保证主表在所有的小时都有记录。后来就发现了这个 generate_series 函数，发现很有意思。地址在这里 <a href="http://www.postgresql.org/docs/9.0/static/functions-srf.html" target="_blank" rel="external">http://www.postgresql.org/docs/9.0/static/functions-srf.html</a> 。这里还有个 generate_scripts 的函数，可以用来遍历数组产生一个表格的。
</p>
]]></content>
    
    <summary type="html">
    
      
&lt;p&gt;有个报表需要把几天的记录按照小时 join 起来，最开始的作法是通过 js 来 join 数据。后来遇到了问题，就是某天某个小时可能会没有记录，然后想破头了，在 js 里面循环的时候设置每天循环到的当前的小时。可崩溃的是还会出现有的是这两小时没有，有的是另外的，用 js 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="postgresql" scheme="http://wdicc.com/tags/postgresql/"/>
    
  </entry>
  
  <entry>
    <title>了解了下 hbase</title>
    <link href="http://wdicc.com/intro-hbase/"/>
    <id>http://wdicc.com/intro-hbase/</id>
    <published>2011-08-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>很早就知道 hbase 了，但是一直没有仔细去了解 hbase 是怎么回事。今天了解了下他的表结构。
</p>
<p>
这篇文章 <a href="http://www.searchtb.com/2011/01/understanding-hbase.html" target="_blank" rel="external">http://www.searchtb.com/2011/01/understanding-hbase.html</a> 其实写的挺清楚，下面这个是个例子
</p>
<p>
<pre class="prettyprint">
hbase(main):007:0&gt; scan 'test'                         
ROW                                 COLUMN+CELL                                                                                            
 row1                               column=cf:a, timestamp=1312258784360, value=value3                                                     
 row1                               column=cf:b, timestamp=1312258795425, value=value3                                                     
 row2                               column=cf:b, timestamp=1312257616099, value=value2                                                     
 row3                               column=cf:c, timestamp=1312257621344, value=value3
</pre>
</p>
<p>
在 hbase 里面访问数据都是通过 row key + column，其实也就是哪行哪列，不过不是通过数字定位。
</p>
<p>
在 hbase 里面看不到传统数据库的表格形式的数据列表，可以看到上面这种。传统数据库里面，每行的列数是一样的，如果那列没值，那也得填一个 null 之类。
</p>
<p>
hbase 就不一定了，可以看到上面的 row1 行，有两列 cf:a, cf:b，而 row2，row3 就只有一列。
</p>
<p>
所以 hbase 作为 key-value 系统的时候，row key + column 就是所谓的 key。
</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;很早就知道 hbase 了，但是一直没有仔细去了解 hbase 是怎么回事。今天了解了下他的表结构。
&lt;/p&gt;
&lt;p&gt;
这篇文章 &lt;a href=&quot;http://www.searchtb.com/2011/01/understanding-hbase.html&quot; targe
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="hbase" scheme="http://wdicc.com/tags/hbase/"/>
    
  </entry>
  
  <entry>
    <title>svn merge</title>
    <link href="http://wdicc.com/about-svn-merge/"/>
    <id>http://wdicc.com/about-svn-merge/</id>
    <published>2011-05-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>svn merge 的 help 信息
<pre class="prettyprint">
usage: 1. merge sourceURL1[@N] sourceURL2[@M] [WCPATH]
       2. merge sourceWCPATH1@N sourceWCPATH2@M [WCPATH]
       3. merge [-c M[,N...] | -r N:M ...] SOURCE[@REV] [WCPATH]
</pre>

svn 的 merge 的本质其实就是在两个版本之间生成 diff，然后把这个 diff 再应用到另外一个版本里面。
</p>
<p>
所以可以看到 merge 和最后的那个 WCPATH 之间，通常都需要指定两个版本。WCPATH 可以是其中的一个，这个没关系。
</p>
<p>
一般都是把新多出来的部分 merge 到另一个版本，所以通常是 svn merge old_ver new_ver working_ver 其中那个 working_ver 可以是 old_ver。
</p>
<p>
最好在 merge 之前加一个 &ndash;dry-run 看看他会修改哪些文件。 
</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;svn merge 的 help 信息
&lt;pre class=&quot;prettyprint&quot;&gt;
usage: 1. merge sourceURL1[@N] sourceURL2[@M] [WCPATH]
       2. merge sourceWCPATH1@N sour
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="svn" scheme="http://wdicc.com/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>alarm 使用不当遇到的问题</title>
    <link href="http://wdicc.com/alarm-signal-in-perl/"/>
    <id>http://wdicc.com/alarm-signal-in-perl/</id>
    <published>2011-05-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>前段时间发现有个程序总是运行一段时间就挂掉，看各种日志里面都没有错误信息，感觉就是莫名其妙突然进程就没了。
</p>
<p>
大概流程是有个 perl 程序 a.pl
</p>

<pre class="prettyprint">
.....
my $pid = fork();
if ( !$pid ) {
   my $cmdRet = `b.pl 2>&1`;
   print FILE $cmdRet;
   if ( $status ) {
       warn "task failed";
   } else {
      warn "task success";
   }
   exit;
}

waitpid ........
</pre>
<p>
b.pl 里面会执行 rsync 去获取一些文件，他会循环到几个机器上面去 rsync
<pre class="prettyprint">
for ( @hosts ) {
    my $result = `rsync xxxxx 2>&1`;
    if ( $? ) {
        log($result);
        log("failed");
    } else {
        log($result);
        log("success");
    }
}

sub log {
    my $msg = shift;
    print $msg;
    # 然后通过 IO::Socket::INET 发送给另外一个 server  a
}
</pre>

现象是，时不时的， b.pl 会只 rsync 了某几台(不确定是几台)机器上面的文件，然后就不继续了，从 server a 上面能收到他发日志，最后一条是 success 的信息
</p>
<p>
从 a.pl 记录的日志那里看, FILE 里面记录的内容丢失了 server a 收到的最后一部分的数据，多少数据不一定，不过肯定是没有那个 success 信息。 这个文件里面也没有任何的错误信息。
</p>
<p>
程序代码啥的都不动，rsync 的文件数不是总是一样的，也有文件多的时候没出错的时候,同时也设置了打开文件数为 65536.
</p>
<p>
后来发现问题就在 b.pl 里面的 log 里面。因为要发送到其他机器，怕挂住影响后续程序，所以设置了一个 alarm。
</p>

<pre class="prettyprint">
eval {
    alarm 5;
    xxxxxxx;
    alarm 0;
};

if ( $@ ) {
    print "error when send";
}
</pre>

<p>
这个 alarm 没有设置 handle 的函数，这样就会导致 alarm 到期的时候，会直接让整个 perl 程序挂掉，并显示 "Alarm clock"，而且这个输出不在标准错误和标准输出里面。
</p>
<p>
修复也简单，alarm 前设置一个 handler 就好了。
</p>
<p>
另外，还有个问题，一个 alarm 会中断前一个 alarm，所以类似 sleep 的使用，可以这样
</p>

<pre class="prettyprint">
my $previousAlarm = 0;
eval {
    local $SIG{ALRM} = sub { die 'alarm'; };
    $previousAlarm = alarm 5;
     xxxx
     alarm 0;
};
alarm 0;

if ( $@ ) {
    xxxxx;
}

alarm $previousAlarm;
</pre>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;前段时间发现有个程序总是运行一段时间就挂掉，看各种日志里面都没有错误信息，感觉就是莫名其妙突然进程就没了。
&lt;/p&gt;
&lt;p&gt;
大概流程是有个 perl 程序 a.pl
&lt;/p&gt;

&lt;pre class=&quot;prettyprint&quot;&gt;
.....
my $pid = fork(
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>hive 里面不能 drop table</title>
    <link href="http://wdicc.com/cant-drop-table-in-hive/"/>
    <id>http://wdicc.com/cant-drop-table-in-hive/</id>
    <published>2011-05-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前部署 hive 0.6 的时候，发现用 postgress 存 metadb 的时候，不能 drop table，一执行就卡住了。当时试过 mysql，好像是有个什么问题，就没用了，后来只好用 hive 0.5 完事。
</p>
<p>
前几天有个别的事情工作不正常，以为可能是版本的问题，毕竟现在都 0.7 了。所以尝试了下直接升级到 0.7。在 0.6 版本的 hive 里面，自带了一个 postgress 用的升级 sql，但是 0.7 的没有。执行这个 sql 后，hive 0.7 能查询，但是同样的，也遇到了不能 drop table 的问题。
</p>
<p>
后来发现 drop table 的时候，hive 在尝试去查一个不存在的表，然后就卡在了这个 sql 上面，也不报错，也不超时，不知道是不是 jdbc 的问题。
</p>
<p>
然后把 mysql 用的升级 sql 迁移到了 postgress，这样 hive 0.7 在 postgress 里面也没问题了。
</p>
<p>
升级 sql 和邮件列表的主题在 <a href="http://www.mail-archive.com/user@hive.apache.org/msg01293.html" target="_blank" rel="external">http://www.mail-archive.com/user@hive.apache.org/msg01293.html</a> 。升级的时候要注意，新建的表的 owner 需要是 hive 使用的用户。
</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前部署 hive 0.6 的时候，发现用 postgress 存 metadb 的时候，不能 drop table，一执行就卡住了。当时试过 mysql，好像是有个什么问题，就没用了，后来只好用 hive 0.5 完事。
&lt;/p&gt;
&lt;p&gt;
前几天有个别的事情工作不正常，以
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="hive" scheme="http://wdicc.com/tags/hive/"/>
    
      <category term="postgress" scheme="http://wdicc.com/tags/postgress/"/>
    
  </entry>
  
  <entry>
    <title>hive 里面的 UDTF</title>
    <link href="http://wdicc.com/udf-in-hive/"/>
    <id>http://wdicc.com/udf-in-hive/</id>
    <published>2011-04-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[hive 支持 UDF， UDAF， UDTF，这几个让你使用 hive 更加便捷。
<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">UDF</h2>
<div id="text-1" class="outline-text-2">

udf 就是一个自定义的 function，输入一个或多个参数，返回一个返回值，类似 substr/trim 之类。写起来比较简单，重构 UDF 类的 evaluate 方法就可以了。可以参考 <a href="http://richiehu.blog.51cto.com/2093113/386112" target="_blank" rel="external">http://richiehu.blog.51cto.com/2093113/386112</a> 。

这是一个 urldecode 函数。
<pre class="prettyprint lang-java">

import org.apache.hadoop.hive.ql.exec.UDF;
import java.net.URLDecoder;

public final class urldecode extends UDF {

    public String evaluate(final String s) {
        if (s == null) { return null; }
        return getString(s);
    }

    public static String getString(String s) {
        String a;
        try {
            a = URLDecoder.decode(s);
        } catch ( Exception e) {
            a = "";
        }
        return a;
    }

    public static void main(String args[]) {
        String t = "%E5%A4%AA%E5%8E%9F-%E4%B8%89%E4%BA%9A";
        System.out.println( getString(t) );
    }
}</pre>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">UDAF</h2>
<div id="text-2" class="outline-text-2">

udaf 就是自定义的聚合函数，类似 sum/avg 这类，输入多行的一个或多个参数，返回一个返回值。这个还没写过，可以参考 <a href="http://richiehu.blog.51cto.com/2093113/386113" target="_blank" rel="external">http://richiehu.blog.51cto.com/2093113/386113</a> 。

&nbsp;

</div>
&nbsp;

</div>
<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">UDTF</h2>
<div id="text-3" class="outline-text-2">

udtf 是针对输入一行，输出多行的需求来的，类似 explode 函数。可以参考 <a href="http://www.linezing.com/blog/?p=323" target="_blank" rel="external">http://www.linezing.com/blog/?p=323</a> 。

这个是输入数组字段，输出两列，一列是数组元素的位置，一列是数组元素。比 explode 多了一列位置，不过数组元素只能是 String 类型的。
<pre class="prettyprint lang-java">

import java.util.ArrayList;
import java.util.List;

//import org.apache.hadoop.io.Text;

import org.apache.hadoop.hive.ql.udf.generic.GenericUDTF;

import org.apache.hadoop.hive.ql.exec.UDFArgumentException;
import org.apache.hadoop.hive.ql.exec.description;
import org.apache.hadoop.hive.ql.metadata.HiveException;
import org.apache.hadoop.hive.serde2.objectinspector.ListObjectInspector;
import org.apache.hadoop.hive.serde2.objectinspector.ObjectInspector;
import org.apache.hadoop.hive.serde2.objectinspector.ObjectInspectorFactory;
import org.apache.hadoop.hive.serde2.objectinspector.StructObjectInspector;

import org.apache.hadoop.hive.serde2.objectinspector.primitive.PrimitiveObjectInspectorFactory;

@description(
        name = "explodeWithPos",
        value = "_FUNC_(a) - separates the elements of array a into multiple rows with pos as first col "
        )

public class explodeWithPos extends GenericUDTF {

    ListObjectInspector listOI = null;

    @Override
        public void close() throws HiveException{
        }

    @Override
        public StructObjectInspector initialize(ObjectInspector [] args) throws UDFArgumentException {

            if (args.length != 1) {
                throw new UDFArgumentException("explodeWithPos() takes only one argument");
            }

            if (args[0].getCategory() != ObjectInspector.Category.LIST) {
                throw new UDFArgumentException("explodeWithPos() takes an array as a parameter");
            }

            listOI = (ListObjectInspector)args[0];

            ArrayList fieldNames = new ArrayList();
            ArrayList fieldOIs = new ArrayList();

            fieldNames.add("col1");
            //fieldOIs.add(listOI.getListElementObjectInspector());
            fieldOIs.add(PrimitiveObjectInspectorFactory.javaStringObjectInspector);

            fieldNames.add("col2");
            //fieldOIs.add(listOI.getListElementObjectInspector());
            fieldOIs.add(PrimitiveObjectInspectorFactory.javaStringObjectInspector);

            return ObjectInspectorFactory.getStandardStructObjectInspector(fieldNames, fieldOIs);
        }

        //Object forwardObj[] = new Object[2];
        Object forwardObj[] = new String[2];

    @Override
        public void process(Object [] o) throws HiveException {

            List list = listOI.getList(o[0]);

            if ( list == null ) {
                return;
            }

            int i =0;
            for (Object r : list) {
                forwardObj[0] = String.valueOf(i);
                forwardObj[1] = r.toString();
                this.forward(forwardObj);
                i++;
            }
        }

    @Override
        public String toString() {
            return "explodeWithPos";
        }
}</pre>
</div>
</div>
</div>
</div>
]]></content>
    
    <summary type="html">
    
      hive 支持 UDF， UDAF， UDTF，这几个让你使用 hive 更加便捷。
&lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;UDF&lt;/h2&gt;
&lt;div id=&quot;text-1&quot; class=&quot;
    
    </summary>
    
    
      <category term="hive" scheme="http://wdicc.com/tags/hive/"/>
    
  </entry>
  
  <entry>
    <title>rsync files-from 参数</title>
    <link href="http://wdicc.com/rsync-files-from-option/"/>
    <id>http://wdicc.com/rsync-files-from-option/</id>
    <published>2011-04-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">rsync</h2>
<div id="outline-container-1_1" class="outline-3">
<h3 id="sec-1_1">include/exclude</h3>
<div id="text-1_1" class="outline-text-3">

rsync 支持使用 include/exclude 来过滤要同步的文件，使用这两个参数的时候，需要注意下面的这个问题
<pre class="prettyprint">
Note that, when using the –recursive (-r) option (which is implied by -a), every subcomponent of every path  is  vis‐
        ited  from the top down, so include/exclude patterns get applied recursively to each subcomponent’s full name (e.g. to
        include "/foo/bar/baz" the subcomponents "/foo" and "/foo/bar" must not be excluded).  The exclude  patterns  actually
        short-circuit  the  directory  traversal stage when rsync finds the files to send.  If a pattern excludes a particular
        parent directory, it can render a deeper include pattern ineffectual  because  rsync  did  not  descend  through  that
        excluded section of the hierarchy.  This is particularly important when using a trailing ’*’ rule.  For instance, this
        won’t work: 

/some/path/this-file-will-not-be-found
/file-is-included 
*</pre>
rsync 使用 -r 来遍历子目录的时候，如果还想用 exclude include 来过滤文件，那么要注意 一个目录如果满足了 exclude，而且还没有对应的 include，那这个目录下面的子目录也会被 exclude，就算你对这个子目录写了 include 。

虽然能解决问题，可实在很费劲，直到无意中发现了 files-from 参数。

</div>
</div>
<div id="outline-container-1_2" class="outline-3">
<h3 id="sec-1_2">files-from</h3>
<div id="text-1_2" class="outline-text-3">

files-from 是通过指定一个本地/远程的文件来定义需要同步的文件。这个文件生成方法可就多了，你可以用 find/sed/awk/xxxxx 等搭配来得到你这个文件，一行命令不够还可以多行，是不是爽多了？
<pre class="prettyprint">
如果是远程文件，那就 –files-from=:/path/to/files。

</pre></div>
</div>
<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">写在后面</h2>
<div id="text-2" class="outline-text-2">

顺便测试一下 org2blog，这帖子是用 org2blog 写的，给作者提了个建议，加上 permlink 的支持，没几天居然给加上了，刚好测试一下，呵呵。

</div>
</div>
</div>
]]></content>
    
    <summary type="html">
    
      &lt;div id=&quot;outline-container-1&quot; class=&quot;outline-2&quot;&gt;
&lt;h2 id=&quot;sec-1&quot;&gt;rsync&lt;/h2&gt;
&lt;div id=&quot;outline-container-1_1&quot; class=&quot;outline-3&quot;&gt;
&lt;h3 id=&quot;sec-1_
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="rsync" scheme="http://wdicc.com/tags/rsync/"/>
    
      <category term="org2blog" scheme="http://wdicc.com/tags/org2blog/"/>
    
  </entry>
  
  <entry>
    <title>emacs 上推神器 twittering-mode</title>
    <link href="http://wdicc.com/twittering-mode/"/>
    <id>http://wdicc.com/twittering-mode/</id>
    <published>2011-04-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[emacs 里面可以干很多事情，包括上 twitter。 在 @xwl 的努力下，还能上 sina 微博。。。

emacswiki 地址在这里 http://www.emacswiki.org/emacs/TwitteringMode， xwl 的 fork 在这里 https://github.com/xwl/twittering-mode/，增加了 sina 微博的支持，好像最近还增加了 douban 的支持。

我的配置在这里 https://github.com/wd/emacs.d/blob/master/site-lisp/config/wd-twitter.el，里面 twitter 使用的是代理。

我用到的 twmod 的按键设置:
推上面 <ret> 回复
j/k/h/l 类似 vim 里面
h 到第一条
C-c C-s 发推
C-u M-x twittering-update-status-interactive 可以选择同时更新两个
M-x twittering-switch-to-unread-timeline 切换到未读的 timeline，可以绑定到一个按键上面

其他的看 C-h m 里面的说明吧，效果在这里 http://flic.kr/p/9vy96G
</ret>]]></content>
    
    <summary type="html">
    
      emacs 里面可以干很多事情，包括上 twitter。 在 @xwl 的努力下，还能上 sina 微博。。。

emacswiki 地址在这里 http://www.emacswiki.org/emacs/TwitteringMode， xwl 的 fork 在这里 https
    
    </summary>
    
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>解析纯真 ip 库</title>
    <link href="http://wdicc.com/parse-qqwry-dat/"/>
    <id>http://wdicc.com/parse-qqwry-dat/</id>
    <published>2011-03-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[纯真的 ip 库应用比较广泛，就那个 qqwry.dat。以前尝试过解析，死活弄不明白那写地址和 pack/unpack 啥的，晕的不行。这两天需要解析下，就尝试用 perl 写一个。

开始用 sysread/sysseek 很多都读不出来，看了n遍程序，没觉得有啥问题。后来全部改成了 read/seek 就好了，也不知道怎么回事。画了一个图说明下，参考了 http://lumaqq.linuxsir.org/article/qqwry_format_detail.html 。

<table style="width:auto;"><tr><td><a href="https://picasaweb.google.com/lh/photo/f83_NZhjf6QchgG9gGRueg?feat=embedwebsite" target="_blank" rel="external"><img src="https://lh6.googleusercontent.com/_7OB6ilikjVs/TXie-yreH2I/AAAAAAAAAKY/fTPMq-pkuqU/s640/qqwry.png" height="640" width="269"></a></td></tr><tr><td style="font-family:arial,sans-serif; font-size:11px; text-align:right">发件人 <a href="https://picasaweb.google.com/wdicc0/2011310?feat=embedwebsite" target="_blank" rel="external">2011-3-10</a></td></tr></table>

读来的3字节地址需要加 "\0" 才能 unpack，不知道怎么回事，对这些问题弄不明白。对了，网上还有个 perl 版的，也能用，需要的话可以搜一下。
]]></content>
    
    <summary type="html">
    
      纯真的 ip 库应用比较广泛，就那个 qqwry.dat。以前尝试过解析，死活弄不明白那写地址和 pack/unpack 啥的，晕的不行。这两天需要解析下，就尝试用 perl 写一个。

开始用 sysread/sysseek 很多都读不出来，看了n遍程序，没觉得有啥问题。后来全
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>总结 2010</title>
    <link href="http://wdicc.com/days-in-2010/"/>
    <id>http://wdicc.com/days-in-2010/</id>
    <published>2011-02-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这都 2011 年的 2 月份了才写 2010 年的总结，好像晚了点，呵呵。不过其实这不是才过年了，还不算晚。

翻翻看 2009 年的，比对一下。 http://wdicc.com/2009/

写程序方面应该是更熟悉了，perl 里面的 pm 啥的也写了几个，甭管好不好用吧，反正是也算是用上了。另外就是 js 也写了不少，不过都是瞎写。

2010 年开年就不利，投资错误损失了 2 万多。换了工作，并有了第一辆车，在还没来得及开一个长途之前，车就又没了。还赶上悲催的北京限车令，现在还没的开。车没了也导致直接损失 1 万多，还好有保险。一年到头本来也没多少钱。

2010 还真有一次自驾游，去了平谷，庆祝刷版 10 周年，一帮人玩了两天。

开源上面好像没什么特别的贡献，自从用上 gentoo，懒的不行了。英语也没什么长进.... 2011 年努力吧。

2011 年希望能来一次远一点旅游，出国最好了。实在去不了，国内也行。这几年都没有出去玩过了。

2011 年也希望工作上面能有成就，每天上班的时候能有激情。

]]></content>
    
    <summary type="html">
    
      这都 2011 年的 2 月份了才写 2010 年的总结，好像晚了点，呵呵。不过其实这不是才过年了，还不算晚。

翻翻看 2009 年的，比对一下。 http://wdicc.com/2009/

写程序方面应该是更熟悉了，perl 里面的 pm 啥的也写了几个，甭管好不好用吧，
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="work" scheme="http://wdicc.com/tags/work/"/>
    
      <category term="life" scheme="http://wdicc.com/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>入了一个 BlackBerry 8900</title>
    <link href="http://wdicc.com/blackberry-8900/"/>
    <id>http://wdicc.com/blackberry-8900/</id>
    <published>2011-01-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前两个一个小姨子让帮忙买一个黑莓9800，也不知道小孩怎么想的，告诉她这个难用，还断网，但就是不听，说要买一个用的人少的。。。

顺道，就弄了一个 8900 自己用。之前那个 g1 现在很不给力，速度慢，费电。用上了 89 还是挺不错的，又有点 650 的感觉了，就是软件少了点。

linux 下面有个 barry 可以简单管理一下 bb，不过很有限。可以用 bjavaloader 装 cod 倒是不错，想加一个 service book 发现不行，很郁闷，不过能装软件就不错了。

尝试过在 virtualbox 里面使用，需要 disable usb 2.0。不过后来给 bb 弄了一个 sd 卡之后，发现 vbox 里面不认了，设置里面禁掉卡也不行，也不知道怎么回事。
]]></content>
    
    <summary type="html">
    
      前两个一个小姨子让帮忙买一个黑莓9800，也不知道小孩怎么想的，告诉她这个难用，还断网，但就是不听，说要买一个用的人少的。。。

顺道，就弄了一个 8900 自己用。之前那个 g1 现在很不给力，速度慢，费电。用上了 89 还是挺不错的，又有点 650 的感觉了，就是软件少了点。
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="bb" scheme="http://wdicc.com/tags/bb/"/>
    
      <category term="blackberry" scheme="http://wdicc.com/tags/blackberry/"/>
    
  </entry>
  
  <entry>
    <title>perl 里面的信号处理</title>
    <link href="http://wdicc.com/signal-in-perl/"/>
    <id>http://wdicc.com/signal-in-perl/</id>
    <published>2010-12-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[perl 里面的信号处理很简单，就是给 %SIG 这个 hash 赋值就好了。前几天遇到个问题，处理 SIG{CHLD} 的时候，我本来只起一个 child 进程，可是发现这个信号会被触发多次，开始弄不明白，后来偶然想到是不是 system，exec 之类的函数弄出来的，搜了下果然。

perl 里面调用外部命令是会 fork 一个子进程的，所以也会触发那个信号，想避免可以设置局部变量，例如
<pre class="prettyprint">
$SIG{CHLD} = sub {
    print "main\n";
};

.....
{
    local $SIG{CHLD} = undef; # 注意调用外部命令的时候，如果 IGNORE 就捕捉不了结果了
    `mv xxx yyy`;
    system(xxxxx);
}

.....
</pre>

使用 {} 来构造局部变量的方法有时候会让问题变的非常简单。

另外，信号触发的时候，会把 sleep 中断，这个在 sleep 的 doc 里面说的很明白。如果还是想 sleep 到足够的时间，可以用下面的方法。
<pre class="prettyprint">
my $timeLeft = 10;
while ( 1 ) {
    last if $timeLeft <= 0;="" my="" $acttime="sleep($timeLeft);" $timeleft="$timeLeft" -="" $acttime;="" }="" <="" pre="">

越来越感觉写 perl 还是很给力的，很多的奇技淫巧，不过我现在也是属于没弄明白多少，瞎写。
</=></pre>]]></content>
    
    <summary type="html">
    
      perl 里面的信号处理很简单，就是给 %SIG 这个 hash 赋值就好了。前几天遇到个问题，处理 SIG{CHLD} 的时候，我本来只起一个 child 进程，可是发现这个信号会被触发多次，开始弄不明白，后来偶然想到是不是 system，exec 之类的函数弄出来的，搜了下果
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>又安装了一次 oracle</title>
    <link href="http://wdicc.com/oracle-install-guide/"/>
    <id>http://wdicc.com/oracle-install-guide/</id>
    <published>2010-11-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[好久没有弄 oracle 了，今天有机会又折腾了一天 oracle 的安装，本来觉得是挺简单的事情，没想到也折腾了挺长时间的，我觉得可能主要是因为使用的系统比较新，而 oracle 是 10g 有比较老的缘故。

1 配置 x11forward
我这安装了 xauth 和 libXtst，然后使用 ssh -Y user@host 连接的。使用 -X 好像从来没成功过，也不知道怎么回事，懒得研究了。

2 运行安装程序
解压什么的就没什么好说的了，主要是运行的时候他会检测是不是他支持的发行版，可以使用 -ignoreSysPrereqs，跳过系统检测。

然后其他正常，就是到最后运行 dbca 的时候，会 hung 卡在那，等多久都完成不了。这一步做的操作是会给你 create database，建 init 文件等，没这个的话 oracle 是不可用的。如果你知道手动操作这些后续步骤也可以不理会这个。

dbca 卡住后，可以点那个取消，然后再开一个 term， ps 找到 dbca 然后 kill 掉，前面那个界面应该就会有反应了，就可以继续往下走了。到最后 exit 了事。

然后就是单独启动 dbca 来完成后面的工作。执行 dbca 命令（需要你提前配置好 path），会启动一个窗口，要注意的是，在这时候能看到一个关于字体的错误，据说这个错误就是上面 huang 住的原因，如果看到了这个错误，那么 dbca 的最后一步可能是会执行不了的。。。

我尝试了 n 种方法解决这个问题，发现最简单的是装一个 jdk 1.6 然后把 java 命令链接覆盖 oracle 安装的那个 jdk 1.4 的 $ORACLE_HOME/jdk/jre/bin/java 命令。等于就是说使用 1.6 的 java 来启动 dbca。如果这么做还不行，那可能需要装一些字体相关的东西，比如 xorg-x11-fonts-truetype。如果还不行那就不知道怎么弄了。

dbca 启动后，还遇到了 ora-27102 out of memery 和 ora-01034 oracle not aviliable。后面这个是在遇到前面那个的时候点 ignore 出来的。主要是前面那个。前面那个是因为 kernel 参数关于内存的配置配置的有问题，最大共享内存太大导致的。如果遇到这个问题就去改那些参数吧。


dbca 配置好后，oracle 应该就启动了。你可以连上去看看了。

3 导入导出
导出使用 exp，导入 imp，一般不需要加什么参数。据说加那个 full=y 后，导入的时候会建立用户，不用你操心。
]]></content>
    
    <summary type="html">
    
      好久没有弄 oracle 了，今天有机会又折腾了一天 oracle 的安装，本来觉得是挺简单的事情，没想到也折腾了挺长时间的，我觉得可能主要是因为使用的系统比较新，而 oracle 是 10g 有比较老的缘故。

1 配置 x11forward
我这安装了 xauth 和 lib
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>自动连接 ssh 并输入密码</title>
    <link href="http://wdicc.com/autossh-and-auto-enter-password/"/>
    <id>http://wdicc.com/autossh-and-auto-enter-password/</id>
    <published>2010-10-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这年头不翻墙就看不到真像了，前几天整了个 ssh 代理，就研究了下自动登录。

ssh 自动登录首选就是使用 key 了，可对方不干，那就只能使用密码了。自动输入密码可以用 expect。查这个的时候发现了一个 expect-lite，发现也挺有意思的，他把写 expect 脚本简单化了，比如想 send xxx，那就用 >xxxx 就行了，想 expect yyy 那就 <yyy 就好了，等等这些，呵呵。不过我后来没用这个，还是用的标准的="" expect，代码如下。="" <pre="" class="prettyprint lang-expect">
spawn autossh -M 20000 -p SSH_PORT -N -D 7070 YOUR_NAME@YOUR_SERVER
set timeout 60
expect {
     assword: {
         stty -echo
         send "YOUR_PASS\r"
         stty echo
         #exp_continue
     }
    incorrect {
         send_user "invalid password or account\n"
         exit
     }
    timeout {
         send_user "connection to host timed out\n"
         exit
     }
    eof {
         send_user "connection to host failed\n"
         exit
     }
}
if {[fork]!=0} exit
disconnect


那里面那个 autossh 能自动给你重连，没仔细研究。那个 20000 后面的参数都是给 ssh 的，具体含意可以看 ssh 的 man。

最主要是最后那两行，能做到连接上之后主程序就退出了，不占用你的终端，而不影响 ssh 的连接。
</yyy>]]></content>
    
    <summary type="html">
    
      这年头不翻墙就看不到真像了，前几天整了个 ssh 代理，就研究了下自动登录。

ssh 自动登录首选就是使用 key 了，可对方不干，那就只能使用密码了。自动输入密码可以用 expect。查这个的时候发现了一个 expect-lite，发现也挺有意思的，他把写 expect 脚本
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
      <category term="expect" scheme="http://wdicc.com/tags/expect/"/>
    
  </entry>
  
  <entry>
    <title>chrome 的几个字体配置</title>
    <link href="http://wdicc.com/some-font-configuration-for-chrome/"/>
    <id>http://wdicc.com/some-font-configuration-for-chrome/</id>
    <published>2010-09-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[随着各种 ext 的开发，chrome 目前的可用性已经很高了。阻碍我使用的最大一个问题，主要是字体。在 firefox 里面我喜欢自己配置中文英文字体。英文喜欢使用等宽，比如 consolas，Monaco, dejavu sans mono 之类。比较喜欢 monaco，可是目前能下载到的字体好像有点问题，有些字号没有。

前几天看到 ghost 在 twitter 上说到 chrome，就又动了试试看的念头。后来总算整好了。

chrome 本身自己有个字体设置的地方，在 tools -> options -> Under the Hood 里面，可以设置字体，在这里设置的字体感觉好像比平时理解的要小一点。比如我设置的 15 号才感觉好像看着舒服了点。另外，我这里设置的是英文，中文会根据 fontconfig 配置的来显示，我使用的是 WenQuanYi Zen Hei。

这么设置之后，在很多页面应该已经可以了。不过可能你在 google 的页面里面，还有 extension 的页面里面，还是会看到讨厌的字体。这是因为在设置了使用 css 使用的字体后，chrome 好像会优先使用 css 的设置。google 的页面和 extension 的页面使用的是 Arial 字体。在 term 使用 fc-match arial 可以看到实际使用的字体。

那么修改一下 fontconfig 的配置，设置一下字体替换，比如我这个。
<pre class="prettyprint">
<match target="pattern">
     <test qual="any" name="family"><string>Liberation Sans</string></test>
     <edit name="family" mode="assign"><string>DejaVu Sans Mono</string></edit>
 </match>
 </pre>

 再启动 chrome 应该就能看到效果了。:)

 此后还有个问题，那就是 chrome 界面上面没有最小字体的设置，然后很多 n 小的文字，让人讨厌。通过 google 找到了一个<a href="http://wange.im/minimum-font-size-for-chrome-is-12px.html" target="_blank" rel="external">解决办法</a>，我把他贴这里。
 <pre lang="txt">
 到chrome安装目录下的User Data\Default文件夹；
用记事本打开Preferences，找到：
"webkit": {
"webprefs": {
"default_fixed_font_size": 13,
"default_font_size": 16,
}
在｝里面加上：
"minimum_font_size": 1,
"minimum_logical_font_size": 1
 </pre>

 现在看，我的 chrome 就好多了，呵呵。效果可以看看这里 http://www.webpagescreenshot.info/img/420779-9292010114845AM .
]]></content>
    
    <summary type="html">
    
      随着各种 ext 的开发，chrome 目前的可用性已经很高了。阻碍我使用的最大一个问题，主要是字体。在 firefox 里面我喜欢自己配置中文英文字体。英文喜欢使用等宽，比如 consolas，Monaco, dejavu sans mono 之类。比较喜欢 monaco，可是
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="chrome" scheme="http://wdicc.com/tags/chrome/"/>
    
  </entry>
  
  <entry>
    <title>emacs 的列编辑</title>
    <link href="http://wdicc.com/rectangles-in-emacs/"/>
    <id>http://wdicc.com/rectangles-in-emacs/</id>
    <published>2010-08-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[列编辑我觉得是一个编辑器不能缺少的东西。在 vim 里面使用 C-v 就能进入列编辑，然后我通常用到的，也就是 d (删除) 和 I (插入)。在 emacs 里面一直没怎么用上这个，总感觉是操作很麻烦。最近操作了几次，发现也没那么难，呵呵。

emacs manual 里面关于列编辑的<a href="http://www.gnu.org/software/emacs/manual/html_node/emacs/Rectangles.html" target="_blank" rel="external">页面</a>。emacs 里面那个默认的列编辑不会出来像 vim 里面那样的矩形选区（不过有别的方法好像可以做到），所以当你选择的时候，还是按行来选择的，你只需要关心选择的起始点和结束点之间的那个矩形就好了，你的操作只会在里面起作用。

对应到 vim 的 d，emacs 里面的应该是 C-x r d 或 C-x r k 了吧，对应到 I，应该是 C-x r t string <ret> 了吧，不过 emacs 里面这个是替换选择的东西为 string，你要是选个空的，应该就算是插入了吧。还有个 C-x r y 复制，我觉得会这几个应该就基本可以了吧。。
</ret>]]></content>
    
    <summary type="html">
    
      列编辑我觉得是一个编辑器不能缺少的东西。在 vim 里面使用 C-v 就能进入列编辑，然后我通常用到的，也就是 d (删除) 和 I (插入)。在 emacs 里面一直没怎么用上这个，总感觉是操作很麻烦。最近操作了几次，发现也没那么难，呵呵。

emacs manual 里面关于
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>使用 org-mode 来做自己的 job tracker</title>
    <link href="http://wdicc.com/use-org-mode-as-a-job-tracker/"/>
    <id>http://wdicc.com/use-org-mode-as-a-job-tracker/</id>
    <published>2010-07-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[用 emacs 的应该都知道 org-mode 这个大杀器，一直以来都想在工作里面用上他，可总是习惯不了。

这几天尝试把 org-mode 打造成了我的一个 job tracker，用来记录自己的 todo 和完成情况。

<pre class="prettyprint lang-lisp">
;;
;; org-mode
;;

;; (setq org-agenda-files '("~/org"))
(setq org-agenda-files (file-expand-wildcards "~/org/*.org"))  ;; 把 ~/org/*.org 都加入到 agenda 里面，使用 C-c a a 看 agenda 的时候，会从这些文件里面读
(add-to-list 'auto-mode-alist '("\\.org$" . org-mode))
(define-key global-map "\C-cl" 'org-store-link)
(define-key global-map "\C-ca" 'org-agenda)
(setq org-log-done t) ;; 变到 done 状态的时候，记录一下时间

(add-hook 'org-mode-hook
          (lambda ()
            (org-set-local 'yas/trigger-key [tab])
            (define-key yas/keymap [tab] 'yas/next-field-group)))

(setq org-todo-keywords
      '((sequence "TODO(t)" "WAIT(w@/!)" "|" "DONE(d!)" "CANCELED(c@)")))  ;; 设置一下 todo 的关键字，| 左边的是未完成状态，右边是 done 的状态


(setq org-default-notes-file "~/org/todo.org") ;; 设置 remember 的默认文件 

;;;  Load Org Remember Stuff
(require 'remember)
(org-remember-insinuate)

;; Start clock in a remember buffer and switch back to previous clocking task on save
;; (add-hook 'remember-mode-hook 'org-clock-in 'append)
;; (add-hook 'org-remember-before-finalize-hook 'bh/clock-in-interrupted-task)

;; I use C-M-r to start org-remember
(global-set-key (kbd "C-c m r") 'org-remember)
;; (define-key global-map "\C-cr" 'org-remember)

;; Keep clocks running
(setq org-remember-clock-out-on-exit nil)

;; C-c C-c stores the note immediately
(setq org-remember-store-without-prompt t)

;; I don't use this -- but set it in case I forget to specify a location in a future template
(setq org-remember-default-headline "Tasks") ;; 设置默认 remember 添加的 headline

;; 3 remember templates for TODO tasks, Notes, and Phone calls
(setq org-remember-templates (quote (("todo" ?t "** TODO %?\nCREATED: %U" nil nil nil)
                                     ;; ("note" ?n "* %?                                                                            :NOTE:\n  %U\n  %a\n  :CLOCK:\n  :END:" nil bottom nil)
                                     ;; ("appointment" ?a "* %?\n  %U" "~/git/org/todo.org" "Appointments" nil)
                                     ;; ("org-protocol" ?w "* TODO Review %c%!\n  %U" nil bottom nil))))
                                     ))) ;;设置 todo 的模板，里面第三个参数是模板，里面的变量的意思 google 下


</pre>

在 todo.org 里面有两个 headline，一个是 * Tasks ，一个是 * Done。

配置好后，在任意的 buffer 按 C-c m r 就可以打开个 buffer，输入 todo 信息，然后按 C-c C-c 就可以把 todo 添加到 todo.org 里面去了，会添加到 * Tasks 这个 headline 下面。

完成一个任务的时候，在那上面按 C-c C-t 然后选择 done 就可以设置完成。手动（还不会自动。。。）把完成的任务挪到 Done 里面。

如果想看看有完成情况的统计，可以在 agenda 里面看，C-c a a，然后按 v，选择不同的模式看。每周的工作情况在那里面一目了然，呵呵。

<pre class="prettyprint">
Week-agenda (W29):
Monday     19 July 2010 W29
Tuesday    20 July 2010
Wednesday  21 July 2010
  todo:       17:33...... [ TODO 多看看 org-mode 的 agenda
Thursday   22 July 2010
  todo:       15:18...... Closed:     DONE a test
  todo:       15:18...... [ DONE a test
Friday     23 July 2010
  todo:       14:50...... [ TODO 梳理一下
  todo:       17:08...... [ TODO 了解下
  todo:       22:49...... [ TODO 申请
Saturday   24 July 2010
Sunday     25 July 2010
</pre>
]]></content>
    
    <summary type="html">
    
      用 emacs 的应该都知道 org-mode 这个大杀器，一直以来都想在工作里面用上他，可总是习惯不了。

这几天尝试把 org-mode 打造成了我的一个 job tracker，用来记录自己的 todo 和完成情况。

&lt;pre class=&quot;prettyprint lan
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="job" scheme="http://wdicc.com/tags/job/"/>
    
      <category term="org-mode" scheme="http://wdicc.com/tags/org-mode/"/>
    
      <category term="todo" scheme="http://wdicc.com/tags/todo/"/>
    
  </entry>
  
  <entry>
    <title>使用 grep sort 等工具的时候要注意 LANG 的设置</title>
    <link href="http://wdicc.com/lang-settings-when-use-grep-or-sort/"/>
    <id>http://wdicc.com/lang-settings-when-use-grep-or-sort/</id>
    <published>2010-07-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[发现在使用 sort 或 grep 等工具的时候，LANG 会影响到速度。

1.5G 的文件，grep -Ei 'keyword' file, LANG=C 的时候执行时间是 22 秒，LANG=en_US.UTF-8 的时候，执行时间是 3分53秒，最后结果是一样的。

这还不是最恐怖的，恐怖的是下面的
<pre class="prettyprint lang-text">
$ cat a
a
b
C
d
E

$ LANG=en_US.UTF-8 egrep '[a-z]' a
a
b
C
d
E

$ LANG=C egrep '[a-z]' a
a
b
d
</pre>

以后用这些工具还是小心一点吧。。。。。
]]></content>
    
    <summary type="html">
    
      发现在使用 sort 或 grep 等工具的时候，LANG 会影响到速度。

1.5G 的文件，grep -Ei &#39;keyword&#39; file, LANG=C 的时候执行时间是 22 秒，LANG=en_US.UTF-8 的时候，执行时间是 3分53秒，最后结果是一样的。

这还
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="grep" scheme="http://wdicc.com/tags/grep/"/>
    
      <category term="sort" scheme="http://wdicc.com/tags/sort/"/>
    
  </entry>
  
  <entry>
    <title>无聊又写一个用来发邮件的 pm..</title>
    <link href="http://wdicc.com/sendmail-pm/"/>
    <id>http://wdicc.com/sendmail-pm/</id>
    <published>2010-07-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
继使用 perl 发<a href="http://wdicc.com/sendmail-use-perl/">中文标题邮件</a>，和<a href="http://wdicc.com/sned-mail-with-attachment/">中文附件邮件</a>后，又把他们整合了一下写了一个 pm 干这个事。

其实发带附件的邮件应该是有现成的 pm 干这个事的，比如 MIME::Lite 之类，没特殊需求还是用那个吧，这个纯属无聊写的。

文件前面有使用方法。。

<pre class="prettyprint">
package SendMail;

use strict;
use warnings;
use Data::Dumper;
use Encode;
use MIME::Base64;

=head1 Examples
use SendMail;

my $sm = SendMail->new( {
    To => 'you@foo.com, other@bar.com',
    Subject => 'just a test 中文',
    });

-- or --

my $sm = SendMail->new( {
    From => 'me@abc.com',
    To => 'you@foo.com, other@bar.com',
    Subject => 'just a test 中文',
    } );

-- or --

my $sm = SendMail->new( {
    From => 'me@abc.com',
    To => 'you@foo.com, other@bar.com',
    Cc => 'cc@foobar.com',
    Subject => 'just a test 中文',
    } );


$sm->attach( {
    Type => "text/plain",
    Data => "只是一个测试..a test"
    });

$sm->attach( {
    Type => 'application/octet-stream',
    Filename => 'test 中文.txt',
    Data => "只是一个 test ..."
    });

$sm->test;

-- or --

$sm->send;

=cut



use vars qw($VERSION);
$VERSION = '0.01';

our $boundary = "FFFFFFFFKKKKKK";
our $from = 'no-reply@abc.com';
our $subject = "No subject";

our $to;
our $cc;
our @body;


sub new {
    my $package = shift;
    my $info = shift;

    $subject = $info->{Subject} || $subject;
    $subject = encode('MIME-B', decode('utf8', $subject));
    $from = $info->{From} || $from;
    $to = $info->{To} || die "Need to set MailTo 'To'!";
    $cc = $info->{Cc} || "";

    push @body, "MIME-Version: 1.0";
    push @body, "Content-Type: multipart/mixed; boundary=\"$boundary\"";
    push @body, "";

    return bless( {}, $package);
}

sub attach {
    my $self = shift;
    my $f_hash = shift;

    die "Need data when attach!" if ( not defined $f_hash->{Data} );

    my $type = "text/plain";
    $type = $f_hash->{Type} if defined $f_hash->{Type};

    my @t;
    push @t, "--$boundary";
    if ( $type eq "text/plain" ) {
        push @t, "Content-Type: $type; charset=utf-8";
    } else {
        my $filename = "file1.txt";
        $filename = encode('MIME-B', decode('utf8', $f_hash->{Filename})) if defined $f_hash->{Filename};
        push @t, "Content-Type: $type";
        push @t, "Content-Disposition: attachment; filename=$filename";
    }
    push @t, "Content-Transfer-Encoding: base64";
    push @t, "";
    push @t, encode_base64($f_hash->{Data});

    push @body, @t;
}

sub send {
    my $self = shift;

    open(my $fh, '|/usr/sbin/sendmail -t');
    $self->print_to($fh);
    close($fh);
}

sub print_to {
    my $self = shift;
    my $fh = shift;

    push @body, "--$boundary--";

    print $fh "From: $from\r\n";
    print $fh "To: $to\r\n";
    print $fh "Cc: $cc\r\n" if $cc;
    print $fh "Subject: $subject\r\n";

    for ( @body ) {
        print $fh "$_\r\n";
    }
}

sub test {
    my $self = shift;

    open ( my $fh, '>-');
    $self->print_to($fh);
    close($fh);
}

1;
</pre>
]]></content>
    
    <summary type="html">
    
      
继使用 perl 发&lt;a href=&quot;http://wdicc.com/sendmail-use-perl/&quot;&gt;中文标题邮件&lt;/a&gt;，和&lt;a href=&quot;http://wdicc.com/sned-mail-with-attachment/&quot;&gt;中文附件邮件&lt;/a&gt;后，又把他们整
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="sendmail" scheme="http://wdicc.com/tags/sendmail/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>使用 perl 发带附件的邮件</title>
    <link href="http://wdicc.com/sned-mail-with-attachment/"/>
    <id>http://wdicc.com/sned-mail-with-attachment/</id>
    <published>2010-07-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[继 <a href="http://wdicc.com/sendmail-use-perl/">上篇</a> 使用 perl 发带中文标题的邮件后，又研究了下发带附件的。

基本差别不大，主要是那个 Content-type 要变一下。那个 boundary 可以自己随便写，和后面的统一就行了。

<pre class="prettyprint lang-perl">
my $title = encode_base64("标题", "");
my $body = encode_base64("邮件正文");
my $attach = encode_base64("附件内容");
my $filename = encode('MIME-B', decode('utf8', "文件中文.txt"))

open(MAIL, '|/usr/sbin/sendmail -t');
 
print MAIL "From: test\@abs.com\r\n";
print MAIL "To: test\@abs.com\r\n";
print MAIL "Subject: =?UTF-8?B?$title?=\r\n";
print MAIL "MIME-Version: 1.0\r\n";
# print MAIL "Content-type: text/plain; charset=utf-8\r\n";
print MAIL <<eof; content-type:="" multipart="" mixed;="" boundary="\"FFFFFFFFKKKKKK\"" --ffffffffkkkkkk="" text="" plain;="" charset="utf-8" content-transfer-encoding:="" base64="" $body="" application="" octet-stream="" content-disposition:="" attachment;="" filename="$filename.csv" $attach="" --ffffffffkkkkkk--="" eof="" close(mail);="" <="" pre="">
</eof;></pre>]]></content>
    
    <summary type="html">
    
      继 &lt;a href=&quot;http://wdicc.com/sendmail-use-perl/&quot;&gt;上篇&lt;/a&gt; 使用 perl 发带中文标题的邮件后，又研究了下发带附件的。

基本差别不大，主要是那个 Content-type 要变一下。那个 boundary 可以自己随便写，和后
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="sendmail" scheme="http://wdicc.com/tags/sendmail/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>使用 perl 发送中文邮件标题乱码</title>
    <link href="http://wdicc.com/sendmail-use-perl/"/>
    <id>http://wdicc.com/sendmail-use-perl/</id>
    <published>2010-06-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
代码如下面，解决乱码的方法是使用 base64 编码。

<pre class="prettyprint lang-perl">
use MIME::Base64::Perl;

open(MAIL, '|/usr/sbin/sendmail -t');

my $recver = 'wangdong@abc.com';
my $alertTitle = "中文 asdfsdf sdfsdf sdf sdf s df sd fsd f sd fsd f sdf sdf sdf";
my $alertText = "body ";

my $encoded = encode_base64($alertTitle, "");

print MAIL "From: alert\@abc.com\r\n";
print MAIL "To: $recver\r\n";
print MAIL "Subject: =?UTF-8?B?" . $encoded . "?=\r\n";
print MAIL "MIME-Version: 1.0\r\n";
print MAIL "Content-type: text/plain; charset=utf-8\r\n";
print MAIL "\n";
print MAIL "$alertText";

close(MAIL);
</pre>

这里面 encode_base64 可以把文本做 base64 编码，要注意的是这个方法的第二个参数，是用来把编码结果进行格式化的，会每 76 个字符插入一个这个参数，默认是换行。

如果不是 utf8 的文本，那把里面的 utf8 改一下就好了。
]]></content>
    
    <summary type="html">
    
      
代码如下面，解决乱码的方法是使用 base64 编码。

&lt;pre class=&quot;prettyprint lang-perl&quot;&gt;
use MIME::Base64::Perl;

open(MAIL, &#39;|/usr/sbin/sendmail -t&#39;);

my $recver
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="sendmail" scheme="http://wdicc.com/tags/sendmail/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>emacs 的 emms 里面的乱码</title>
    <link href="http://wdicc.com/emms-coding-system/"/>
    <id>http://wdicc.com/emms-coding-system/</id>
    <published>2010-06-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://www.gnu.org/software/emms/" target="_blank" rel="external">emms</a> 是基于 emacs 的一个播放器，不过其它他做的应该只是管理音乐，具体播放还是靠 mpg123 或 mplayer 这样的程序。

前几天下了一些 mp3, 这两天就又搞了搞 emms。emacser.cn 有篇<a href="http://emacser.com/emms.htm" target="_blank" rel="external">文章</a>就是介绍这个的，就不多说了。主要是被编码问题搞死了。

下载的 mp3 的 tag 是 gbk 的，可是设置了 emms-info-mp3info-coding-system 为 gbk 没效果，而用 mp3info 程序看了 mp3 的 tag，确实是 gbk 的，奇怪了就。后来发现 emms 还带了一个 emms-print-metadata 这个程序，这个程序貌似不需要设置编码，他会出来的结果直接就是 utf8, 可就算用这个 (通过设置 (setq emms-info-functions '(emms-info-libtag)) )，出来的结果还是乱码。

后来突然想起来是不是 cache 的问题，然后就发现有两个地方可能有 cache，一个是 emms-cache.el 一个是 emms-history.el，把这两个对应的 cache 文件删掉，再运行一次 emms 就没问题了。我还设置了下下面的。
<pre class="prettyprint">
(setq emms-cache-file "~/.emacs.d/emms/emms-cache"
      emms-history-file "~/.emacs.d/emms/emms-history")
</pre>
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://www.gnu.org/software/emms/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;emms&lt;/a&gt; 是基于 emacs 的一个播放器，不过其它他做的应该只是管理音乐，具体播放还是靠 mpg123 或 mplaye
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="emms" scheme="http://wdicc.com/tags/emms/"/>
    
  </entry>
  
  <entry>
    <title>备份 gentoo</title>
    <link href="http://wdicc.com/backup-gentoo/"/>
    <id>http://wdicc.com/backup-gentoo/</id>
    <published>2010-05-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[

前段时间换本子，把 gentoo 重装了一遍，记下来一些需要备份的东西。

rc-update
启动列表，从这里面能找到你之前随机启动的东西

world
主动安装的程序列表

kernel
内核的配置文件，换机器后可能需要调整里面的磁盘 cpu 什么的配置

layman
加了什么 overlay

etc.tar.gz
程序的配置文件基本都在这下面，好在这个目录也还不算大

home.tar.gz
有些程序的配置文件在这里面，比如 firefox 什么的，另外比如 kmail 把邮件也存这里面

/opt
我把自己安装的一些程序放到了这里面，这些程序基本都是不依赖别的程序的。如果是需要 make 安装的，一般会写一个 ebuild。

fonts
自己安装的字体，一般放在 /usr/share/fonts/ 下面，看习惯了

stardict dicts
这个一般在 /usr/share/stardict/dic/ 下面，好像放 home 下面也可以，没试过。。

我自己的大概就上面这些了吧，另外还有就是自己的 overlay

备份了这么多东西完全弄好好像也花了好几天时间，当时是在 5.1 前后的时候弄的，好像花了4,5 天？没事还是别折腾了
]]></content>
    
    <summary type="html">
    
      

前段时间换本子，把 gentoo 重装了一遍，记下来一些需要备份的东西。

rc-update
启动列表，从这里面能找到你之前随机启动的东西

world
主动安装的程序列表

kernel
内核的配置文件，换机器后可能需要调整里面的磁盘 cpu 什么的配置

layman

    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gentoo" scheme="http://wdicc.com/tags/gentoo/"/>
    
      <category term="backup" scheme="http://wdicc.com/tags/backup/"/>
    
  </entry>
  
  <entry>
    <title>总算搞定了我的无线</title>
    <link href="http://wdicc.com/bcm4312broadcom-stawpa_supplicantkernel2-6-33/"/>
    <id>http://wdicc.com/bcm4312broadcom-stawpa_supplicantkernel2-6-33/</id>
    <published>2010-05-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[本子的网卡是 bcm4312，内核里面是有驱动支持的，只要编译了，再装一个 firmware 就应该能用了。可我这的表现是开机能连上一会，后面会断，断了后就再也连不上了，只能重启。

没办法，找了半天，看到一个 broadcom-sta 的驱动，这个是 broadcom 官方出的。装的时候刚好赶上了 2.6.33 的内核，这个内核对比 2.6.32 有不少的变化。我记得之前没有先的选项在 .config 里面好像也是可以搜到的，不过是注释的。现在 2.6.33 里面，直接就搜不到了。而安装 broadcom-sta 的时候要求的几个内核选项花了好大功夫才搞定。

比如这个 wireless_ext。make menuconfig 后搜一下，能搜到，不过会发现他没有 Location，只有个 selected by。这就是说，只有满足了那些 selected by 的时候，这个才会被选上。在 selected by 里面，能看到 GELIC_WIRELESS [=n] && NETDEVICES [=y] && NETDEV_1000 [=y] && WLAN [=y] && GELIC_NET [=n] || IPW2100 [=m] && NETDEVICES [=y] && WLAN [=y] && PCI [=y] && CFG80211 [=y] 这样的一些内容。怎么理解呢？这些是按照那些 || 来分割的，竖线左右的是或的关系，不管哪边满足都可以。我在那个长长的列表里面摸索了半天，总算找到一个合适的，那就是先把 ipw2100 这个驱动选上，因为网卡不是这个型号的，所以把这个编译成模块，然后加在 blacklist 里面。

要使用无线，一般还需要一个模块，LIB80211_CRYPT_TKIP，用来支持 wpa 的。这个你在 dmesg | grep lib80 的时候能看到，如果没有 tkip 在里面，那基本应该是连不了 wpa 的网络的。这个模块也是需要选别的模块才能激活，上面选的那个 ipw2100 刚好还用在了这里，呵呵。另外还需要一个 hostap 的模块。

然后 broadcom-sta 还需要把 ssb，mac8012 这些模块关闭，反正按照提示来做就好了，这些都有 location，很好搞定。

装好后，就可以使用 wpa_supplicant 来连接无线了。要注意的是，使用的 driver 不是那个 braodcom，而是 wext。
]]></content>
    
    <summary type="html">
    
      本子的网卡是 bcm4312，内核里面是有驱动支持的，只要编译了，再装一个 firmware 就应该能用了。可我这的表现是开机能连上一会，后面会断，断了后就再也连不上了，只能重启。

没办法，找了半天，看到一个 broadcom-sta 的驱动，这个是 broadcom 官方出的
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="broadcom" scheme="http://wdicc.com/tags/broadcom/"/>
    
  </entry>
  
  <entry>
    <title>elisp 最最初级的一点入门知识</title>
    <link href="http://wdicc.com/basic-elisp-programing/"/>
    <id>http://wdicc.com/basic-elisp-programing/</id>
    <published>2010-04-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[其实上次写 http://wdicc.com/how-i-became-a-emacser 的时候，是想写一点 eslisp 入门的东西的，结果总觉得好像也写不出来什么，就写成另一篇了，呵呵。(看这篇前最好先看看那个吧，那个更入门。)

不过我还是觉得，用 emacs 如果不会一点 elisp，那基本你是用不住的。记那些无聊的快捷键有什么意思，有意思的是你能让 emacs 用你希望的模式工作。今天 twitter 上面看到一个词"计算姬"，感觉很有点意思，呵呵，小蜜就是给你干活的嘛，不要被她折磨就好。

其实主要是我自我感觉目前了解的 elisp 的东西，好像基本就够用了，所以才想写出来，给比我还糊涂的指条明路。

1 数据类型。
elisp 是有类型在里面的，我看好像有什么 sequence, number 之类，具体有哪些不重要，重要的是你使用的时候，比如比较的时候，切记要弄明白他们是什么类型。我找到一个 format 函数，感觉很好用，可以转类型，具体可以查文档，可以多用用。

2 调试
调一个程序的时候，我觉得最基本的就是 print 和 message 这两个函数了吧，加上上面的 format，基本应该能搞定了。在一段 elisp 后面使用 C-x C-e 就能直接执行他，执行之后就能在当前的 emacs 里面起作用，不过对我等菜鸟来说，有时候会遇到一些奇怪的问题，不行就还是再启动一个 emacs 来验证结果吧。

3 emacs 简单设置
掌握了上面两个，基本就可以定义自己的东西了。一般用的是 setq，比如下面这个
<pre class="prettyprint">
;; 防止页面滚动时跳动， scroll-margin 3 可以在靠近屏幕边沿3行时就开始滚动，可以很好的看到上下文。
(setq scroll-margin 3
            scroll-conservatively 10000)
(set-terminal-coding-system 'utf-8)
(add-to-list 'auto-mode-alist '("\\.py\\'" . python-mode))
</pre>

可以看到他一次设置了两个变量，其实写两个括号也是可以的。

还有下面的两行，他是执行了一个函数，这个函数里面干的什么，他接受什么参数，直接在 emacs 里面按 C-h f 然后输入你要查的函数的名字，就会显示 help 信息，很方便吧。

4 hook
下面稍微高级一点，了解下 hook 怎么用。hook 这个东西翻译过来应该是钩子的意思吧，其实就是别人的程序预留的一些接口，可以让你在他的程序里面插入一些你自己的程序。比如下面这几个。
<pre class="prettyprint">
(add-hook 'weblogger-start-edit-entry-hook (lambda()
    (auto-fill-mode -1)
    (abbrev-mode -1)
    (auto-complete-mode 1)
    ))
(add-hook 'cperl-mode-hook (lambda () (abbrev-mode -1)))
(add-hook 'view-mode-hook 'view-mode-keybinding-hook)

(defun weblogger-edit-entry (&optional entry)
  "Edit a entry.  If ENTRY is specified, then use that entry.
Otherwise, open a new entry."
   ...........
  (run-hooks 'weblogger-start-edit-entry-hook)
)
</pre>

第一个是在 weblogger.el 开始编辑文件的时候，把那些 mode 关掉。第二个是 cperl-mode 启用的时候，把 abbrev-mode 关掉。第三个是在 view-mode-hook 执行的时候，执行那个函数。

最后是在实际代码里面这个 hook 是怎么执行的，能看到当调用 weblogger-edit-entry 的时候，就会在这里面某个时候去执行之前设置的 hook，这样个性化设置的目的就达到了。

eamcs 的各种 mode 一般都有各种的 hook，这应该能完全达到个性化的目的了，可有些时候想定制的地方没有 hook 怎么办？暴力一点，直接改他的程序好了。。。温柔一点的，那就看下面这个。

5 defadvice

defadvice 在文档里面写的很清楚，大概应该是可以在一个已有函数执行前或后执行你定义的东西。比如下面这个。
<pre class="prettyprint">
;; use this to auto cancel notify
;; (add-hook 'erc-send-pre-hook
;;           (lambda(s)
;;             (erc-tray-change-state nil)))
(eval-after-load 'erc
  '(progn
     (defadvice erc-send-input (before change-tray-status activate)
       (erc-tray-change-state nil))))
</pre>

我设置了 erc 在收到消息的时候会发送 notify 到 tray，我想做到只要我在 erc 里面输入了一些东西（即使是空的），就把 tray 的状态标记为已读，就不用继续提醒我了。

erc 有个 erc-send-pre-hook，可以在发送一条消息前执行 hook，可是如果输入的是空行，是不会触发这个 hook 的，使用 defadvice 可以解决这个，具体使用方法还是看文档吧，我突然觉得我很罗嗦。。。。屁大点东西也能发一篇？。。。

我会的基本就说完了，其它高级玩意有需要的时候应该可以从文档里面去看吧，目前来看，会用 hook 和 defadvice 我就知足了，不行就来 irc 里面找牛人问一个，经过提示后，应该还是能解决的吧。反正不求能自己去写一个 mode，当时最少也要能看明白别人的那点东西，然后自己能改一下吧，要不用 emacs 会很痛苦的。
]]></content>
    
    <summary type="html">
    
      其实上次写 http://wdicc.com/how-i-became-a-emacser 的时候，是想写一点 eslisp 入门的东西的，结果总觉得好像也写不出来什么，就写成另一篇了，呵呵。(看这篇前最好先看看那个吧，那个更入门。)

不过我还是觉得，用 emacs 如果不会一
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="elisp" scheme="http://wdicc.com/tags/elisp/"/>
    
  </entry>
  
  <entry>
    <title>我是怎么从 vim 转向 emacs 的</title>
    <link href="http://wdicc.com/how-i-became-a-emacser/"/>
    <id>http://wdicc.com/how-i-became-a-emacser/</id>
    <published>2010-04-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[从尝试用 emacs，到现在基本（有些地方还不是很适应）习惯用 emacs，算起来得有 n 年了，我都忘记最早接触 emacs 是什么时候了。在 2010-3-20 之前尝试过很多次，基本都是记几个快捷键，过几天就又忘记了。后来自己想了下为什么不能持续的原因，我觉得有两个。

1 没有在日常工作里面使用。
之前我的开发工作基本都是直接在某台服务器上面的，这样就开发调试会比较方便，而那些机器一般要不会装 emacs，这样不常用就会导致记住的快捷键过几天就忘记了。最近刚好需要在本机写点程序，也就刚好用上了。

2 不会 elisp。
emacs 的配置文件都是 elisp 写的，而不经过配置的 emacs 就编辑文件来看，我觉得还不如去用 vim，vim 好用多了。我想刚看到 elisp 的时候一般都会觉得这个语言太变态了，全是一堆的括号。。。而不会 elisp 就会导致你只能去机械的复制别人的配置，如果刚好是你想要的，那还好，而如果还想做点小的修改，那就会很郁闷，用起来郁闷，不用可能更郁闷。不爽多了，就干脆不用 emacs 了。

如果你能在日常工作中经常使用，并且会写程序（比如 php,perl 什么的，随便哪个都行），那么对于基本没怎么配置过 .vimrc 的用户来说，切换到 emacs 其实应该还算是一个比较简单的事情。

1 emacs 是无模式的。
这就是说你不用经常去按那个 Esc 来切换模式了。没有模式也就意味着你不能使用像 vim 那么简短的命令了，因为像 a,i,o,h,j,k 这些对 emacs 来说，这些都是正常的输入字符，所以我们不得不在这些字符前面加上 C(control), M(Meta 一般是 Alt), S(shift) 这些前缀。在 emacs 里面需要按的可能还远不止这些控制字符加一个普通字符，比如我定义的 C-c n E 来打开 erc。不要被这些吓着了，并不需要你记住所有的，你只要记住你常用的就好了。

2 emacs 里面的 buffer。
打开一个文件，就会出现一个 buffer。调用帮助，也会打开 buffer。使用 emacs 绝对不要和一些自动出现的 buffer 过不去，使用 emacs 的理念就是一个编辑器 n 个 buffer，编辑文件的，看 mail、news 的，上 irc 的等等。你需要的是一个方便的 buffer 切换的工具，推荐的有 ido-mode 和 ibuffer。

3 emacs 里面有各种 mode。
vim 里面是通过设置 filetype(ft) 来达到语法高亮等功能的。emacs 里面是通过各种 mode。emacs 里面有主模式(main mode)，和辅模式(minor mode)。上面说的 ido-mode 就是一个辅模式。打开一个文件后，一般有一个主模式（通过一些方法也可以有多个），多个辅模式。比如我打开一个 js 文件，会同时使用到 js2-mode 这个主模式，和 highlight-tail-mode, autocomplate-mode 这几个辅模式。

4 写点 elisp。
elisp 基本就是一堆的括号，括号最左半边的是操作符或函数，后面的都是他的参数，比如 (- 10 3)，具体这个是什么意思，就要去看看 "-" 是干嘛的，他会对后面的参数做什么事。再比如(setq xwl-at-company? (xwl-at-company))。先去看看那个 setq 是干嘛的，查完好像是设置变量的，他会把第二个参数的值赋给第一个参数。那第二个变量是个表达式，那就等于会把这个表达式的值赋给他，对吧。这个括号表达式是干嘛的呢？xwl-at-company 这个是自己写的函数，不需要参数，他会根据一些信息返回是不是在使用公司的网络。是返回 t，不是返回 nil。ok，这不就明白了么？呵呵。还有一些像 (if, (when, (progn 等等，都是这么个理解方法。
写程序就避免不了调试，最简单的调试方法应该就是直接打印了吧，呵呵。elisp 里面可以使用 print, message 来输出一些调试信息。比如 (print (format "value of t: %s" t))，具体啥意思可以参考前面说的方法去查查。这些信息可以在一个叫 *Messages* 的 buffer 里面看到。

5 emacs 里面的帮助。
C-h 是调用帮助，可以在后面再输入 ？ 来看看有什么可用的帮助。我一般用的是 m（看当前 mode 的一些快捷键设置），k（查某个快捷键是干嘛的），v（查 emacs 变量的值）。
]]></content>
    
    <summary type="html">
    
      从尝试用 emacs，到现在基本（有些地方还不是很适应）习惯用 emacs，算起来得有 n 年了，我都忘记最早接触 emacs 是什么时候了。在 2010-3-20 之前尝试过很多次，基本都是记几个快捷键，过几天就又忘记了。后来自己想了下为什么不能持续的原因，我觉得有两个。

1
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="vim" scheme="http://wdicc.com/tags/vim/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>强大的 git 和 git svn</title>
    <link href="http://wdicc.com/powerful-git-and-git-svn/"/>
    <id>http://wdicc.com/powerful-git-and-git-svn/</id>
    <published>2010-04-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在春哥的鼓动下，用上了 git。有 git svn 支持，还是很好用的，建议 svn 用户都试试看。

使用 git svn clone SVN_URL 来 clone 初始化你的本地 repo，然后就和 svn 没关系了，直到你需要把你的改动提交到 svn 的 repo。

先说说 git 的一些本地操作，就捡我自己用的说吧，我觉得应该也够用了。

首先 git add 是用来添加文件的，编辑好新的文件后，使用 git add file_name 就能把他加入到 git 里面管理，当然，如果还不打算提交他，那也可以先编辑以后再 add。

然后 git mv 改名，git rm 删文件，这和一般的 linux 命令差不多，就不用多说了。要记得的是，如果想让你的改动加入到 git 的管理里面，那就最好使用这两个文件来改名和删文件。如果直接用 linux 命令操作，比如改名，git 会认为你要删一个文件，并且那个新的文件还没不会加入到管理里面。

然后就是 git status 了。执行这个能看到当前 repo 的分支（例如下面的第一行说的 wd）里面有哪些改动，这个里面的信息应该是能分四类。一类是对文件的操作，比如添加删除文件等(changes to be committed)，这类文件直接使用 git commit 就能提交。一类是对现有文件的修改(changed but not updated)，这类文件使用 git add 添加后也能用 git commit 提交，不过也可以用 git commit -a 直接提交。一类是没有加入到管理的一些文件(untracked files)，这类文件不会被提交，除非你使用 git add 添加他们。好像还有一类，是你的修改如果和上游冲突的时候，这时候会多出来一类，提示你这些文件和上游冲突，打开这些文件，里面有明显的标记会指出冲突是什么，解决冲突后，git add 添加这个文件，再提交就可以了。

<pre class="prettyprint">
# On branch wd
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	new file:   a
#
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	modified:   hello
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#	b
</file></file></file></file></pre>

上面捎带说了下 git commit，commit 有个 -m 参数可以直接在后面指定 commit message，就不用打开那个编辑窗口了。另外还有个 --amend 能用来修改最后一次提交的 commit message。commit 后面还可以跟具体的文件或目录来只提交指定的东西。

还需要知道的命令，git log。能看到自己和别人提交的每个 commit 的情况。那个类似 commit 0fb8046e4bd0b5ce44d778e3936bda80e7e0ccd7 的那一长串字符就是 commit id。如果想看具体某个 commit 做了什么，那就执行一下 git show commit_id,能看到一个 diff，很方便的。

git diff file_name 可以用来看自己要提交的文件改动了什么。

git branch 还能建分支，非常的方便。使用 git branch wd 就能建立一个叫 wd 的分支，使用 git branch 就能看到当前有哪些分支，使用 git checkout wd 就能切换到 wd 这个分支，在这个分支做的改动不会影响到 master，随时可以切换回去。然后可以使用 git merge 可以把在某个分支做的变更 merge 进来。比如当前是 master 分支，git merge wd 会把在 wd 这个分支建立后，在 wd 上面做的改动 merge 到 master 里面。不过在不熟练的情况下，还是别使用分支了，呵呵。

如果提交了之后又想撤消，那就要用到 git reset 了。reset 分 mixed，soft，hard 几种，看名字应该能看出了一点什么，hard 会把对文件的改动都撤消，soft 只会删掉提交记录，不会对文件操作。具体这几个区别还是看看 man git reset 吧，这个操作也是稍微有点复杂，容易出问题，没熟悉的情况下慎用。我只用过 soft reset，用来修改 commit message，呵呵。

前面说的这些都是在本地操作的，完全不用管别人的情况，在没有网络的情况下，你也可以提交你的修改。

激动人心的时候到来了，怎么把修改提交到 svn 呢？

如果想要把自己的变更应用到 svn repo，那就要用到 git svn dcommit 了。不过别急，这时候还需要了解下 git svn rebase 命令，这个命令是用来把远程别人的改动应用到本地的，类似于 svn update（不过文档里面说还是有点区别，没看明白）。在 rebase 的过程中，难免会遇到一些冲突，这个时候会有提示信息的，而且在 git status 里面也会提醒你的。这时就需要你先去解决冲突，打开那个文件看看就知道了。解决了后使用 git add 添加那个文件，然后 git svn rebase --continue，直到完成。

这样之后，你就可以用 git svn dcommit 来提交你的修改了。这个命令完事后会自动 rebase 一下，所以好像可以直接使用这个命令而不 rebase 先。

好了，这下改动就提交到了 svn 了，整个过程就完事了。这只是一些基本的用法，应该也足够用了，遇到问题或更深入一点的用法可以看看 git 的 man。
]]></content>
    
    <summary type="html">
    
      在春哥的鼓动下，用上了 git。有 git svn 支持，还是很好用的，建议 svn 用户都试试看。

使用 git svn clone SVN_URL 来 clone 初始化你的本地 repo，然后就和 svn 没关系了，直到你需要把你的改动提交到 svn 的 repo。

先
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="svn" scheme="http://wdicc.com/tags/svn/"/>
    
      <category term="git" scheme="http://wdicc.com/tags/git/"/>
    
  </entry>
  
  <entry>
    <title>看了 12 怒汉 ( 12 Angry Men )</title>
    <link href="http://wdicc.com/about-justice/"/>
    <id>http://wdicc.com/about-justice/</id>
    <published>2010-03-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
12 怒汉下了好久了，一直没看，正在看，还没看完就忍不住要写点什么。

俄语实在不好听，忍着看了 10 分钟，这个片子就开始吸引人了。12 个陪审团成员，还有其它人，几乎所有人都认为 20 分钟应该就会完事，因为这之前已经听法院审了三天了。在 12 比 1 的情况下，怎么说服其它人同意小孩是无罪的，这就是整个片子的内容。当然是有理有剧的。

当你手里掌握着别人的生命的时候，你会怎么做？今天上午还看了几集哈佛大学的那个关于公正的课，里面几个例子。

如果你是一个电车司机，刹车失灵了，轨道那头是 5 个工人，开过去肯定会把他们撞死，关键时刻你发现有个叉道，那边是 1 个工人，如果你打方向盘的话，那就是撞死一个人，你会怎么做？

再如果司机不是你，没有叉道，而你当时你站在桥上，你旁边有个胖子，如果把那个胖子推下去，车就会停，你会怎么做？

如果你是一个医生，医院来了 6 个病人，其中一个病的很重，其他几个轻一点。如果你救那个病重的，因为需要的时间会很长，那其它几个就会死。如果你先救那 5 个，那么病重的一个就肯定死，你怎么办？

再如果，来了 5 个病人，他们分别需要移植 5 个器官，可是没有现成的。这时候你想起来旁边屋子里面有一个健康的人，如果把他的器官换给那 5 个人的话，那 5 个人就会得救，当然，这个人会死，你会做么？

还有一个真实的案例。4 个人座船出去，路上遇到风暴，逃到了逃生艇上。没有吃的，里面有个孤儿，不听劝告，喝了海水，病的很严重，其它三个人把那个人杀了，然后挺了过去，得到了救助，到了岸上，他们供认了经过。然后你觉得他是有罪还是无罪呢？

之前还看过一个文章，讲什么是民主的。看 <a href="http://tieba.baidu.com/f?kz=126121842" target="_blank" rel="external">这里</a> 吧。

民主就是少数服从多数么？好像不是这样的，那民主是什么呢，我也不知道，gcd 说他们统治的国家就是民主的，可好像我连想上的网站都上不了，还不经过我同意，这个好像不那么民主。那倒底民主是什么呢？

看了明朝那些事，头一次知道原来内阁是可以驳回皇帝的圣旨的，原来也不是说皇帝说什么就算什么的，他也得和大臣讲道理的。如果给你 10 个人让你管，那很简单，是不是，要干什么的时候，一个人一个人和他说明白就好了。如果是 100 个呢？ok，虽然累点，好像也还是可以说清楚的。可如果是 1000 个呢，显然一个一个说就不靠谱了，得想别的办法，那就是从 1000 个人里面选 10 个人，每人分给他们 99 个人，你有什么事，教会这 10 个人就好了，然后由他们去和手下的 99 个人说明白，简单了吧。用这个模式，不管有多少人都可以搞定了，是不是？实际上军队不就是这个模式么。但发现没有，实际上你的权力被分到了那 10 个人的手上，如果他没有和手下的 99 个人表达你的意思，而表达的是他自己的意思，那么。。。皇帝有时候就得面对这个，想让内阁替你办事，那你就得把权力分给他们。

再来说民主。选举其实就是一个分权的过程，你把你的一部分权力分给了你选的代表，如果你都不知道这个代表你的人是男是女，或是太监的时候，这其实是很恐怖的，对吧。

这个片子没想到看到最后居然还转折了一下，有点意思，呵呵。
]]></content>
    
    <summary type="html">
    
      
12 怒汉下了好久了，一直没看，正在看，还没看完就忍不住要写点什么。

俄语实在不好听，忍着看了 10 分钟，这个片子就开始吸引人了。12 个陪审团成员，还有其它人，几乎所有人都认为 20 分钟应该就会完事，因为这之前已经听法院审了三天了。在 12 比 1 的情况下，怎么说服其
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="movie" scheme="http://wdicc.com/tags/movie/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
      <category term="justice" scheme="http://wdicc.com/tags/justice/"/>
    
      <category term="thinking" scheme="http://wdicc.com/tags/thinking/"/>
    
  </entry>
  
  <entry>
    <title>用 emacs 写 blog</title>
    <link href="http://wdicc.com/use-emacs-publish-your-blog/"/>
    <id>http://wdicc.com/use-emacs-publish-your-blog/</id>
    <published>2010-03-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[不想看大段文字的可以直接看 http://github.com/wd/work/tree/master/weblogger.el/。

先看看 <a href="http://emacser.com/weblogger.htm" target="_blank" rel="external">这个</a>， 我用的weblogger.el 就是从那来的，这个 el 打了 html 支持和 tags(summary) 的支持。

因为写中文 title 的时候，生成的 url 会有一堆的中文字符，看起来就是乱码，不可读，这时候可以在 wp 的后台指定一个 post-slug，url 会根据这个生成。这里我主要是研究了一下对 post-slug 的支持。

weblogger.el 里面 应该是在 weblogger-determine-capabilities 里面判断一下你的 blog 支持的类型，我看了 wordpress 的支持的 methods，里面metaWeblog.newPost, 和 blogger.newPost 应该都是支持的，他应该首选的是 metaWeblog 那个。

然后呢，就是看 wp 的 xml-rpc 文件，里面有个 mw_newPost 对应的就是 metaWeblog.newPost 应该是。在这个函数头试了一把，用的确实是这个。然后就看这里面是怎么处理的了。

这里面最后用的是 wp_insert_post 发的贴子，再看这个函数，能看到里面用的是 post_name 来生成的 post-slug。那么我们只要设置一下这个变量就可以了。在这个函数里面，搜一下 post-name 能看到
<pre class="prettyprint">
// Let WordPress generate the post_name (slug) unless
// one has been provided.
$post_name = "";
if(isset($content_struct["wp_slug"])) {
    $post_name = $content_struct["wp_slug"];
}
</pre>

我们只要在 weblogger.el 里面 post 一个这个变量就好了。在 post 里面能看到如果有个 X-url 的话，他会 post 一个 link 字段出来。那就好了，把上面那个 wp_slug 改成 link，然后写 blog 的时候加一个字段 X-url 就会使用这个你指定的 url 了。

这个文章就是用 emacs 写的。 :D

又研究了下，再补充点内容，呵呵。(2010-03-10)

问题是这样的，新建一个 post 的时候会出来 subject, keywords, newsgroup 这三个字段，怎么能让他加上 summary 和 x-url 呢，这样我就不用每次都手动写了，怎么弄呢，我就找啊找啊，总算找到方法了。

新建的 buffer 里面不是会有个提示么，什么 '--text follows this line --', 就找这个，看是哪里提供的。在 weblogger.el 里面，找了半天，发现没有这个提示。怎么回事？要相信程序，肯定是会有的，只能是找错了地方。

看看这个 el 的看头，引用了 message.el，搜了一下，这个原来是 gnus 提供的，找到这个 el，搜了一下，找到那几个字符了。原来是在这里面添加的。然后我就尝试定义 message-required-news-headers 这个变量，发现不好用，看来还是得在 weblogger.el 里面弄。在这里面找到 weblogger-edit-entry 这个函数，这个就是发帖子的时候用的，在里面有个顺序往下看，这个 message-goto-keywords 比较可疑，在 message.el 里面搜了下，果然，同时还看到一个 message-goto-summary，加上看看，嘿嘿，果然就搞定了。再找找 x-url，没找到，那就仿 summary 的写一个呗
<pre class="prettyprint">
(defun message-goto-x-url ()
  "Move point to the x-url header."
  (interactive)
  (message-position-on-field "X-url" "Subject"))
</pre>

这不完了么，这下就爽多了，嘿嘿。。不过如果能把那些 keywords, summary 等字段改成什么 categories,tags 就好了。。。有时间看看。。。

又研究了一下，加点内容。。(2010-03-11)

其实就是上面留的这点东西，我自己改吧了一下，好像能用了。地址在 http://github.com/wd/work/tree/master/weblogger.el/，里面的 permlink 就是指定 url 的。我看发文章好像没问题了。

另外，我试着在这个 mode 里面让他自动启动 auto-complete-mode，可是怎么弄都不行，不知道怎么回事。下面是我在 .emacs 用的代码。
<pre class="prettyprint">
(add-hook 'weblogger-start-edit-entry-hook (lambda()
    (auto-fill-mode -1)
    (abbrev-mode -1)
    (auto-complete-mode 1)
    ))
</pre>

有人能帮忙不。。。

又修改了一些东西。。可以看看 github 的 commit log 。。。。(2010-03-12)
]]></content>
    
    <summary type="html">
    
      不想看大段文字的可以直接看 http://github.com/wd/work/tree/master/weblogger.el/。

先看看 &lt;a href=&quot;http://emacser.com/weblogger.htm&quot; target=&quot;_blank&quot; rel=&quot;exte
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="wordpress" scheme="http://wdicc.com/tags/wordpress/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>Jemplate 的简单介绍</title>
    <link href="http://wdicc.com/introduce-to-jemplate/"/>
    <id>http://wdicc.com/introduce-to-jemplate/</id>
    <published>2010-02-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[如果你还在用 php 写 web，那么你 out 了，呵呵。现在流行的是 rest + js。当然，rest 层可能还是 php 写的，不过还有用 perl 写的 openresty 1.0 和完全用 c 写的 openresty 2.0。openresty 是个很不错的东西，本来想细说一下，发现不知道怎么说好。去 cpan 上面搜吧。openresty 2.0 是基于 nginx 的，agentzh 在他上面加了好多的模块，让 nginx 直接和数据库通信，都不用 php 了。前端完全用 js 来搞定，以后应该都是 js 工程师了。

smarty 写 php 的人应该都知道吧，Jemplate 是很类似的一个东西，是方便你写 js 的一个工具。我这写了一个非常简单的例子。

下面这个是 Jemplate 的一个模板，保存为 test.tt。
<pre class="prettyprint">
<div>[% test %]</div>
<p>
[% FILTER html %]
    asdff < sdf > sdfsdf
[% END %]
</p>
</pre>

然后用 Jemplate 编译一下
<pre class="prettyprint">
jemplate --runtime > a.js
jemplate --compile test.tt >> a.js
</pre>

这之后就和 test.tt 没关系了，除非你改了他，那就需要重新生成这个 a.js。

再看我们的页面。里面 jquery-1.4.2.min.js 是为了方便操作页面使用的，jquery 决对是个好东西，写 js 应该使用他。那个 jquery.b.js 是我们自己写的，真正把数据添加到页面的代码。
<pre class="prettyprint">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>test</title>
    <script src="jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"> </script>
    <script src="a.js" type="text/javascript" charset="utf-8"> </script>
    <script src="jquery.b.js" type="text/javascript" charset="utf-8"> </script>
</head>
<body>
<div id="main"></div>    
</body>
</html>
</pre>

在这个 jquery.b.js 里面，我们让 jemplate 处理了一下 test.tt，给他里面的 test 变量赋值 ffffff，然后把设置到 #main 的 html 里面。
<pre class="prettyprint">
$(function() {
    var html= Jemplate.process(
        'test.tt', { test: 'ffffff' }
    );

    $('#main').html(html);
});
</pre>

这样这个页面就完事了，简单么，呵呵。你可以用 jemplate 和 js 强大的语法来实现更多的功能的。
]]></content>
    
    <summary type="html">
    
      如果你还在用 php 写 web，那么你 out 了，呵呵。现在流行的是 rest + js。当然，rest 层可能还是 php 写的，不过还有用 perl 写的 openresty 1.0 和完全用 c 写的 openresty 2.0。openresty 是个很不错的东西，本
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="php" scheme="http://wdicc.com/tags/php/"/>
    
      <category term="jemplate" scheme="http://wdicc.com/tags/jemplate/"/>
    
      <category term="js" scheme="http://wdicc.com/tags/js/"/>
    
  </entry>
  
  <entry>
    <title>ssh 之穿越与反穿越</title>
    <link href="http://wdicc.com/ssh-proxy/"/>
    <id>http://wdicc.com/ssh-proxy/</id>
    <published>2010-01-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>有时候我们不得不和网管对着干，去想办法去穿越某些防火墙，访问到我们要访问的资源。例如下面的情况，A 和 C 之间是有个墙的，不通。可有个 B 能访问到 C，而 A 又能访问到 B ，那我们可以通过你 ssh 做代理穿越那个墙。</p><p>A -&gt; | -&gt; C<br> \-&gt; B -&gt; C</p><p>在A 上面执行下面的命令</p><p>ssh -f -N -g -L 8888:C_ip:80 B_ip<br>参数的含义：-f 放到后台<br>-N 不在对方机器请求 shell<br>-g 能使得别的机器能连接 A 的那个端口<br>-L 就是代理，具体看 man </p><p>这样，在 A 上面访问 8888 端口，就能访问到 C 的 80 端口了。</p><p>那如果是下面的网络情况，那怎么办？A 能访问到 C，但是 C 不能直接访问 A。</p><p>A -&gt; C<br>C-&gt; | -&gt; A</p><p>在 A 上面执行下面的命令</p><p>ssh -f -N -R 9999:A_ip:80 C_ip<br>-R 是反向代理, -g 在这里好像不好用不知道为什么</p><p>从 C 上面访问自己的 9999 端口，就会访问到 A 的 80 端口。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;有时候我们不得不和网管对着干，去想办法去穿越某些防火墙，访问到我们要访问的资源。例如下面的情况，A 和 C 之间是有个墙的，不通。可有个 B 能访问到 C，而 A 又能访问到 B ，那我们可以通过你 ssh 做代理穿越那个墙。&lt;/p&gt;&lt;p&gt;A -&amp;gt; | -&amp;gt; C
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
      <category term="proxy" scheme="http://wdicc.com/tags/proxy/"/>
    
  </entry>
  
  <entry>
    <title>怎么能知道旁边的一台没有显示器的 windows 的 ip 呢？</title>
    <link href="http://wdicc.com/how-to-know-a-windows-boxs-ip-in-lan/"/>
    <id>http://wdicc.com/how-to-know-a-windows-boxs-ip-in-lan/</id>
    <published>2010-01-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>我旁边有个 windows，是 dhcp 获取 ip 的，ip 总变，很恶心。这机器还没有显示器，我都是通过 rdesktop 连上去用的，这样必须知道 ip 才行。那不接显示器，怎么能知道 ip 呢？</p><p>方法一，写一个脚本定时把 ipconfig 的结果通过 scp 或 ftp 发到某个有固定 ip 的机器。这样 ip 变了我至少过那么久的间隔就能知道他目前的 ip 了。时间设的长短可能就是你等的时间了。</p><p>方法二，扫描一下局域网结果存到 a，给那个机器断网，再扫一下存到 b，diff 比较那个状态有变化的。我用的就是这个方法。</p><p># nmap -PN 10.32.20.0/24 -p 3389 --open &gt; a</p><p>要用 root 执行，此外还有别的方法没？呵呵</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我旁边有个 windows，是 dhcp 获取 ip 的，ip 总变，很恶心。这机器还没有显示器，我都是通过 rdesktop 连上去用的，这样必须知道 ip 才行。那不接显示器，怎么能知道 ip 呢？&lt;/p&gt;&lt;p&gt;方法一，写一个脚本定时把 ipconfig 的结果通过 s
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>关于 scrum</title>
    <link href="http://wdicc.com/about-scrum/"/>
    <id>http://wdicc.com/about-scrum/</id>
    <published>2010-01-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>领悟了下 scrum，他倡导的有这些</p><p></p><ol><li>需求提供和验收的人员是确定的一个人做为接口。</li><li>行政角色不直接干预 sprint team。避免 team 的工作受到干扰，影响 sprint 期间的任务的完成。</li><li>sprint team 在确认一个 sprint 内的工作后，需要专心把承诺的工作做完做好。</li></ol><p></p><p>我觉得 scrum 好像是偏向工程师的，呵呵。开发过程中最头大的问题就是需求变更了，这个会带来很多的问题，这么说应该都同意吧。</p><p></p><p>而 scrunm 的目的是使得需求在一个 sprint 内至少是稳定的，sprint team 的目标在这期间也应该是明确的，不受干扰的。</p><p>同时他也鼓励 team 成员做自己喜欢的工作，公开透明，尽力把每个人的潜力都挖掘出来，快乐工作。</p><p></p><p>但有时候需求不得不变更，怎么办呢？</p><p>我觉得如果 sprint team 判断变更不大，那就继续目前的 sprint 。如果需要变化太大，那就重新进行 sprint，我们就应该重新定一个 </p><p>sprint backlog，重新开始我们的 sprint。这个权力应该是交给 sprint team 的所有人来决定，而不是某个人，因为最终工作是由 </p><p>sprint team 完成的。</p><p></p><p>要是需求总在不停的变，sprint team可以考虑群殴一下 proud owner 了吧（开个玩笑）</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;领悟了下 scrum，他倡导的有这些&lt;/p&gt;&lt;p&gt;&lt;/p&gt;&lt;ol&gt;&lt;li&gt;需求提供和验收的人员是确定的一个人做为接口。&lt;/li&gt;&lt;li&gt;行政角色不直接干预 sprint team。避免 team 的工作受到干扰，影响 sprint 期间的任务的完成。&lt;/li&gt;&lt;li&gt;spr
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="scrum" scheme="http://wdicc.com/tags/scrum/"/>
    
  </entry>
  
  <entry>
    <title>2009年的最后一天</title>
    <link href="http://wdicc.com/2009/"/>
    <id>http://wdicc.com/2009/</id>
    <published>2009-12-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[&#26368;&#21518;&#19968;&#22825;&#20102;&#65292;&#20284;&#20046;&#24212;&#35813;&#20889;&#20010;&#24635;&#32467;&#30340;&#65292;&#33293;&#19981;&#24471;&#28909;&#34987;&#31389;&#65292;&#25163;&#26426;&#23558;&#23601;&#26469;&#19968;&#20010;&#21543;&#12290;

2009&#24180;&#24037;&#20316;&#19978;&#38754;&#22909;&#20687;&#27809;&#20160;&#20040;&#22909;&#35828;&#30340;&#65292;&#21807;&#19968;&#30340;&#36827;&#27493;&#21487;&#33021;&#36824;&#26159;&#20889;&#31243;&#24207;&#22909;&#20687;&#26356;&#29087;&#20102;&#28857;&#20102;&#65292;&#20854;&#23454;&#20063;&#23601;&#26159;&#35266;&#25705;&#20102;&#19968;&#20010;&#39640;&#25163;&#30340;&#31243;&#24207;&#65292;&#26412;&#36523;&#38271;&#36827;&#36824;&#26159;&#19981;&#22823;&#12290;

&#36890;&#36807;&#23545;&#31038;&#20250;&#19978;&#38754;&#24694;&#24515;&#20107;&#30340;&#35266;&#23519;&#20102;&#35299;&#65292;&#29616;&#22312;&#22909;&#20687;&#36234;&#26469;&#36234;&#24868;&#38738;&#20102;&#65292;&#23545;&#32463;&#27982;&#21644;&#31038;&#20250;&#26041;&#38754;&#30340;&#19996;&#35199;&#22909;&#20687;&#36234;&#26469;&#36234;&#26377;&#20852;&#36259;&#20102;&#65292;&#32769;&#20102;&#65311;&#12290;&#12290;&#12290;&#12290;&#39034;&#20415;&#20877;&#26174;&#25670;&#19968;&#20010;&#19978;&#36807;&#23398;&#23601;&#24212;&#35813;&#30693;&#36947;&#30340;&#35789;&ldquo;&#22269;&#23478;&#22404;&#26029;&#36164;&#26412;&#20027;&#20041;&ldquo;&#65292;&#26377;&#26102;&#20505;&#23601;&#22312;&#24819;&#65292;&#26159;&#19981;&#26159;&#24212;&#35813;&#25226;&#37027;&#26412;&#25919;&#27835;&#20070;&#32763;&#20986;&#26469;&#20877;&#30475;&#30475;&#21602;&#65311;&#36164;&#26412;&#35770;&#19981;&#30693;&#36947;&#29616;&#22312;&#36807;&#26399;&#19981;&#12290;&#12290;&#12290;&#20102;&#35299;&#37027;&#20123;&#20498;&#19981;&#19968;&#23450;&#26159;&#21435;&#24403;&#20154;&#22823;&#20195;&#34920;&#65292;&#21482;&#26159;&#33021;&#35753;&#33258;&#24049;&#33021;&#25226;&#36825;&#20010;&#31038;&#20250;&#36825;&#20010;&#22269;&#23478;&#30475;&#30340;&#26356;&#21152;&#36879;&#24443;&#19968;&#28857;&#12290;&#19981;&#36807;&#35805;&#35828;&#22238;&#26469;&#65292;&#20154;&#22823;&#20195;&#34920;&#20160;&#20040;&#26102;&#20505;&#25165;&#21487;&#20197;&#28023;&#36873;&#21602;&#65311;&#12290;&#12290;&#12290;&#12290;

2010&#24180;&#30340;&#22836;&#19968;&#26729;&#22909;&#20687;&#23601;&#26159;&#25226;&#36335;&#32771;&#36807;&#20102;&#65292;&#24212;&#35813;&#24180;&#21069;&#23601;&#33021;&#25630;&#23450;&#20102;&#21543;&#12290;&#37027;&#25384;&#30528;&#30340;&#23601;&#26159;&#24324;&#20010;&#36710;&#24320;&#19968;&#36255;&#33258;&#39550;&#28216;&#12290;&#24320;&#28304;&#19978;&#38754;&#24076;&#26395;&#33021;&#36129;&#29486;&#26356;&#22810;&#65292;&#22810;&#23398;&#23398;&#33521;&#35821;&#65292;&#20570;&#20570;&#32763;&#35793;&#65292;&#21548;&#21147;&#21644;&#21475;&#35821;&#33021;&#36798;&#21040;&#21644;&#20154;&#20132;&#27969;&#23601;&#22909;&#20102;&#65292;&#35805;&#35828;&#65292;&#26159;&#19981;&#26159;&#24212;&#35813;&#25253;&#20010;&#29677;&#21602;&#65311;&#12290;&#12290;&#12290;

&#34429;&#28982;&#26159;&#20840;&#38190;&#30424;&#65292;&#25171;&#23383;&#20854;&#23454;&#36824;&#26159;&#27809;&#30005;&#33041;&#29245;&#65292;&#21621;&#21621;&#12290;

]]></content>
    
    <summary type="html">
    
      &amp;#26368;&amp;#21518;&amp;#19968;&amp;#22825;&amp;#20102;&amp;#65292;&amp;#20284;&amp;#20046;&amp;#24212;&amp;#35813;&amp;#20889;&amp;#20010;&amp;#24635;&amp;#32467;&amp;#30340;&amp;#65292;&amp;#33293;&amp;#19
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="work" scheme="http://wdicc.com/tags/work/"/>
    
      <category term="life" scheme="http://wdicc.com/tags/life/"/>
    
  </entry>
  
  <entry>
    <title>NB 的 ssh proxycommand</title>
    <link href="http://wdicc.com/cow-ssh-proxycommand/"/>
    <id>http://wdicc.com/cow-ssh-proxycommand/</id>
    <published>2009-12-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[是从水木上面学来的。还参考了<a href="http://benno.id.au/blog/2006/06/08/ssh_proxy_command" target="_blank" rel="external">这个</a>。

如果你工作的环境是下面这样的，那 ssh 的 proxycommand 对你会很有用。

your pc -> gw server -> work server

一般公司的服务器的网络都会设置安全级别，防止出现安全问题。那个 gw 也叫跳板机。需要在 gw 机器上面有 nc 。

修改 .ssh/config 文件，加上 
Host gw
  Hostname gw.abc.com

Host work
  Hostname work.abc.com
  User wd
  ProxyCommand ssh gw nc -q 0 %h %p 2>/dev/null

这样直接 ssh work 就好了。

那个 -q 0 可能有些版本的 nc 不支持。去掉就好了。那个 %h 表示 hostname，那个 %p 表示 port，可以直接写死。其它的 man ssh_config 吧。
]]></content>
    
    <summary type="html">
    
      是从水木上面学来的。还参考了&lt;a href=&quot;http://benno.id.au/blog/2006/06/08/ssh_proxy_command&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这个&lt;/a&gt;。

如果你工作的环境是下面这样的，那 ssh 的 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
      <category term="proxycommand" scheme="http://wdicc.com/tags/proxycommand/"/>
    
  </entry>
  
  <entry>
    <title>昨天和 sssslang 和 xwl 聚了个会</title>
    <link href="http://wdicc.com/party-with-sssslang-and-xwl/"/>
    <id>http://wdicc.com/party-with-sssslang-and-xwl/</id>
    <published>2009-11-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[和 sssslang 倒是很早就见面来着，好像是他那会刚回北京？聊了聊 linux 相关的东西，呵呵。

说起来 linux 用户也挺郁闷的，平时旁边没几个用的，就算是用的，好像也都是 ubuntu 用户，基本就是当 windows 用的，很少主动去挖掘 linux 的一些东西，这些用户比较务实，主要还是在工作方面，开发的东西也都是工作相关的，比较少去做一些无聊的开发。。。所以和他们好像也没什么好聊的。

前两天 #emacs-cn 的 xwl 提议聚会，大家一拍即合，呵呵，定了时间地点，那就聚一个。 :D

聊的东西基本围绕在 emacs， linux， mac 上面。最主要的是 xwl 秀了下他的小黑 macbook 和他的 emacs，sssslang 倒是很详细的问了下 xwl 用的 elisp 扩展，可我对那些不是很明白，我觉得 elisp 就是一个变态的语言。。。对我来说，还记得的可能有下面几个吧。

1 他的 emacs 的标题会显示宋词，会定时变化。
2 有个渐变的扩展，叫做 highlight tail 的，很 cool 吸引小 mm 的必备啊，呵呵。
3 他用了很多定时器，比如执行完编译后，会 split 出来一个新的窗口显示一些编译信息，如果没有错误，那等 3 秒，这个窗口就会自动关掉。还有 1 里面说的那个，也是定时器弄的。
4 有个叫 woman 的东西不错。
5 xwl 和 sssslang 一直强调 ido 是个很不错的东西，不过我是不太明白的。呵呵。
6 xwl 设置打开文件默认就进只读，因为一般来说打开文件都是看看，同时也不可能写很多文件。只读后，还能设置很多单键的快捷键，比如 vim 里面的 hjkli 这些，这样让 emacs 变的有模式起来，我觉得很 cool。不过居然没有别人想到么？那应该有个 vimoper-mod 吧。。。
7 还有个用来画图的 graphviz 很 cool 的。

因为 xwl 用的是 mac，linux 也就是我和 ssslang 了，ssslang 没有本带，基本就是我秀了下我的 kde，openbox，conky 这些，好像也没别的了。<del datetime="2009-11-29T06:17:37+00:00">说到 linux 有个郁闷的，就是我没使用什么 networkmanager，wicd 之类，都是手动配置的 wpa_supplicant ，这样就需要知道 wifi 的 key 的类型什么的，没办法得到的话就只能猜，很不方便。人家 mac， windows， s60 都连上 wifi 上网了，我这还在猜 key 的类型。。。</del> 刚发现，iwlist 实际是能显示 key 信息的。

mac 的效果还是很不错的，国内的很多 mac 用户真是白瞎了这个尤物了，装什么 windows。xwl 可真是 apple 的忠实 fans，花 200 块钱升级系统。。。

说了这么多，我感觉我很像是去打酱油的。。。

说实话 Starbuck 的咖啡好像也不怎么样。。。尤其一会就凉了。。很郁闷，不过回来和老婆说，老婆说：你个傻子，就不知道点一个冰的啊。。。是啊，我为什么没点一个冰的呢？。。。。
]]></content>
    
    <summary type="html">
    
      和 sssslang 倒是很早就见面来着，好像是他那会刚回北京？聊了聊 linux 相关的东西，呵呵。

说起来 linux 用户也挺郁闷的，平时旁边没几个用的，就算是用的，好像也都是 ubuntu 用户，基本就是当 windows 用的，很少主动去挖掘 linux 的一些东西，
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="mac" scheme="http://wdicc.com/tags/mac/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>ktorrent dht 不能用的问题</title>
    <link href="http://wdicc.com/solved-ktorrent-dht-problem/"/>
    <id>http://wdicc.com/solved-ktorrent-dht-problem/</id>
    <published>2009-10-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在国内，没有 dht 的 bt 客户端是混不下去的。

我一直就怀疑国内的 tracker 和那些国内的 bt 客户端是一个利益共同体，那些 tracker 根本就不让别的 client 连的。比如从 ydy 下的 heroes，里面三个 tracker 都是 btfans.3322.org 的，可全部都是 connection refused，虽然从 web 能看到这个这个 torrent 的种子很多，可是我这就是下不了。

这也是国内用户总抱怨 linux 下面的 bt 客户端下载速度慢，或者根本下不了的原因。因为他根本就不能从 tracker 获得信息。要不可以试试看从 mininova 下国外的 torrent，不过好像 thepiratebay 被 gfw 后，这些种子也不好下了。mininova 好多 torrent 的 tracker 是这个。不过好像可以找替代的 tracker 来替换。

一直以来就发现 ktorrent 的 dht 显示的 DHT: 0 nodes, 0 tasks。搜了后发现用户说的都是 ktorrent 2 的，都是 06 年的事情了。之前搜了好几次，都没有结果。

今天为了下 heroes，就又看了下。找到问题在哪里了。

可以去看看 ~/.kde4/share/apps/ktorrent/log 文件，我这里有个 dht bind faild 的错误。原因是设置里面的 network interface 选的是 all，改选一下实际使用的 eth0 就好了。再看看 log 是不是就没错误了？

然后找一个火热的种子下一个，dht 那应该有数了吧？
]]></content>
    
    <summary type="html">
    
      在国内，没有 dht 的 bt 客户端是混不下去的。

我一直就怀疑国内的 tracker 和那些国内的 bt 客户端是一个利益共同体，那些 tracker 根本就不让别的 client 连的。比如从 ydy 下的 heroes，里面三个 tracker 都是 btfans.33
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="dht" scheme="http://wdicc.com/tags/dht/"/>
    
      <category term="ktorrent" scheme="http://wdicc.com/tags/ktorrent/"/>
    
  </entry>
  
  <entry>
    <title>KDE+openbox 实在太赞了</title>
    <link href="http://wdicc.com/kde-openbox-works-perfect/"/>
    <id>http://wdicc.com/kde-openbox-works-perfect/</id>
    <published>2009-10-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[好像我一闲了就总喜欢换de玩。。可能因为这个最花时间。。汗。。

第一次用 kde 还是过年的时候，那会是 kde 4.1? 好像是，那会还装了一个 kde live , 就是 svn 版的 kde，花了 n 多的时间。。。结果最后实在受不了 kde 的一些 bug，就换回 gnome 了。下面列几个我觉得不能忍的 bug（有些 bug 是在 dualhead 里面才有的）。
1 kconsole 的 tab title 截断居然是从前面开始的？emerge 的时候只能看到最后的几个字符。kconsole 里面居然还不能用 shift 增加选区，如果要选几个屏幕的东西，只能慢慢拖。
2 部分 gtk 程序(比如 roxterm)在 kde 里面最大化的时候居然下面还留一条？
3 我想在最上面加一条监控信息，开始试着用 conky, 发现不能控制不让别的程序不复盖他，让他一直显示。那就加了一条 panel，写了一个 applet 来监控。结果发现经常出现正常重启之后，上面的 panel 没了，下面的 panel 做的调整也没了。回复到了最初的状态。日啊。
4 pidgin 什么的，有时候一些程序不能用快捷键弄到前台。好像有最大化窗口的时候容易出现。
5 还没想起来，不过上面那几个已经让我不能忍了。

kde 换了 gnome 之后用了一段时候，又换用了一下 kde 4.2 好像还是不习惯，直接就换用 openbox+tint2 了。一直到前几天又闲了。。

openbox + tint2 其实也挺好用的，自定义性很强。可有点郁闷的是，他倒底不是 DE，我就懒的去弄那个 ivman ... 

还好有 kde+openbox.用了 openbox 后，上面说的 1,2,3,4 都没问题了。term 用 roxterm , 监控用 conky， 不是一般的爽。

之前 openbox 有个 bug，http://bugzilla.icculus.org/show_bug.cgi?id=3792 和 
http://bugzilla.icculus.org/show_bug.cgi?id=3773 ，那个 patch 可以用。所以现在 kde+openbox 不是一般的爽啊。哈哈。

openbox 那么多的自定义功能，还有 kde 强大的 DE 功能。现在我的桌面如下
<img src="http://paste.ubuntu.org.cn/i45608" alt="dekstop">
]]></content>
    
    <summary type="html">
    
      好像我一闲了就总喜欢换de玩。。可能因为这个最花时间。。汗。。

第一次用 kde 还是过年的时候，那会是 kde 4.1? 好像是，那会还装了一个 kde live , 就是 svn 版的 kde，花了 n 多的时间。。。结果最后实在受不了 kde 的一些 bug，就换回 gn
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="openbox" scheme="http://wdicc.com/tags/openbox/"/>
    
      <category term="kde" scheme="http://wdicc.com/tags/kde/"/>
    
      <category term="desktop" scheme="http://wdicc.com/tags/desktop/"/>
    
  </entry>
  
  <entry>
    <title>kernel 2.6.31 给 radeon 用上 kms</title>
    <link href="http://wdicc.com/radeon-kms-in-kernel-2-6-31/"/>
    <id>http://wdicc.com/radeon-kms-in-kernel-2-6-31/</id>
    <published>2009-09-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[intel 显卡用户享受 gem 已经很久了，kernel 2.6.31 总算给 ati 卡的用户带来了福音。

首先得在 kernel 里面打开相关的选项
Generic Driver Options --> Graphics support --> 这下面 dri 相关的和几个 fb 相关的，看着选吧。
Staging drivers --> 取消Exclude Staging drivers from being built --> Enable modesetting on radeon by default

编好后重启下，然后看看 dmesg |grep -i drm 看看，有下面这行就好了。
[drm] Initialized radeon 2.0.0 20080528 for 0000:01:00.0 on minor 0

然后再看看 /var/log/Xorg.0.log ，有没有这个，这个应该表示相关的 x 软件还没有支持。
(EE) RADEON(0): [dri] RADEONDRIGetVersion failed because of a version mismatch.
[dri] radeon kernel module version is 2.0.0 but version 1.17.0 or newer is needed.
[dri] Disabling DRI.

$ glxinfo |grep -i render
direct rendering: Yes
OpenGL renderer string: Software Rasterizer

接下来就升级几个包的 9999 版本，这几个 ebuild 在 x11 overlay 里面有
# x11-drivers/xf86-video-ati-9999
# media-libs/mesa-9999
# x11-libs/libdrm-9999 

装好后，重启下 x ，看看上面那几个信息。/var/log/Xorg.0.log 里面应该有 KMS 相关的信息了，glxinfo 如下
$ glxinfo |grep -i render
direct rendering: Yes
OpenGL renderer string: Mesa DRI R300 (RV380 5460) 20090101 x86/MMX/SSE2 TCL DRI2


好，o 了。不过我怎么觉得窗口切换好像没那么流畅了？。。。等会看看，不行还得换回去。。。汗。。。
update:  找到一个 bug url , 不知道是不是一样的 http://bugs.freedesktop.org/show_bug.cgi?id=23085 不过里面说应该已经解决了才对。。xf86-video-ati 我用的也是最新版的呀
]]></content>
    
    <summary type="html">
    
      intel 显卡用户享受 gem 已经很久了，kernel 2.6.31 总算给 ati 卡的用户带来了福音。

首先得在 kernel 里面打开相关的选项
Generic Driver Options --&gt; Graphics support --&gt; 这下面 dri 相关的和几
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="kms" scheme="http://wdicc.com/tags/kms/"/>
    
      <category term="radeon" scheme="http://wdicc.com/tags/radeon/"/>
    
  </entry>
  
  <entry>
    <title>gentoo 里面字体</title>
    <link href="http://wdicc.com/fonts-in-gentoo/"/>
    <id>http://wdicc.com/fonts-in-gentoo/</id>
    <published>2009-08-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[ubuntu 做了一个好事，给好几个包打了个补丁，让字体效果达到了空前的好效果。在 gentoo 里面也可以用这几个补丁。

这几个包是下面这几个。在 devnull 这个 overlay 里面有打了补丁的包，版本更新也能跟得上 portage ，建议直接加这个 overlay。
media-libs/fontconfig
media-libs/freetype
x11-libs/libXft
x11-libs/cairo

加了 devnull overlay 后，加一个全局的 ubuntu 的 use（或许再加一个-cleartype 的use, 这两个 use 是互相冲突的，效果好像差不多）。

然后重新 emerge 那几个包，要注意看装的是不是都是 overlay 里面的。

装好后，执行 eselect fontconfig list 看看，应该多了一些东东。
  [1]   10-antialias.conf *
  [2]   10-autohint.conf
  [3]   10-hinting.conf *
  [4]   10-hinting-full.conf
  [5]   10-hinting-medium.conf *
  [6]   10-hinting-slight.conf
  [7]   10-no-sub-pixel.conf
  [8]   10-sub-pixel-bgr.conf
  [9]   10-sub-pixel-rgb.conf *
  [10]  10-sub-pixel-vbgr.conf
  [11]  10-sub-pixel-vrgb.conf
  [12]  10-unhinted.conf

最主要就这几个了吧，看看那个 *，按照这个选了，然后程序启动一下 fx 看看效果。
<del datetime="2009-11-29T15:06:28+00:00">那个 10-hinting-* 可以试试看 full 和 slight，看喜欢哪种效果了。</del> 见鬼了，今天又发现字体好像不怎么好看了，然后折腾了会，发现用 autohint 的效果是最好的。。。晕了。。 2008-11-29.

这样设置好之后，就不需要在 local.conf 里面设置相关的了。我的 local.conf 里面只是修改了一下 sans sans-serif 等的排序。对了我用的是雅黑+consolas ，效果大概就是这个吧 http://twitpic.com/7dg2q 。抓这个图后好像还改了些东西，还是有些变化的。

建议还是用这个 eselect 来调整字体吧。
]]></content>
    
    <summary type="html">
    
      ubuntu 做了一个好事，给好几个包打了个补丁，让字体效果达到了空前的好效果。在 gentoo 里面也可以用这几个补丁。

这几个包是下面这几个。在 devnull 这个 overlay 里面有打了补丁的包，版本更新也能跟得上 portage ，建议直接加这个 overlay。
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>post use my g1</title>
    <link href="http://wdicc.com/post-use-my-g1/"/>
    <id>http://wdicc.com/post-use-my-g1/</id>
    <published>2009-08-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[好像还是不错的 呵呵

信<strong>春哥</strong>

<blockquote>得永生</blockquote>
]]></content>
    
    <summary type="html">
    
      好像还是不错的 呵呵

信&lt;strong&gt;春哥&lt;/strong&gt;

&lt;blockquote&gt;得永生&lt;/blockquote&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="test" scheme="http://wdicc.com/tags/test/"/>
    
  </entry>
  
  <entry>
    <title>使用 pdnsd 来缓存 dns</title>
    <link href="http://wdicc.com/use-pdnsd-cache-you-dns-record/"/>
    <id>http://wdicc.com/use-pdnsd-cache-you-dns-record/</id>
    <published>2009-07-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[如果你的网络实在很快，好像也没这个必要。当然我用他还有一个目的就是我的 dns 我做主，省的被劫持。

打开一个网页有时候 dns 查询就占了一些时间，如果想把这个时间也节省下来，那可以试试看这个。类似的软件还有 dnsmasq，我觉得 dnsmasq 没 pdnsd 灵活一点，反正基本的缓存功能肯定是都有的。。。我这还有同事用 bind 做缓存，呵呵，选什么看各自喜好了。

我用的 wicd, 他会修改 /etc/resolv.conf 这个文件，就算在他的设置里面设置了全局 dns 也没用。不过还好他提供了一个 /etc/resolv.conf.head 文件。这个文件里面的东西会被放到 /etc/resolv.conf 的开头。所以我在那里面写上了 nameserver 127.0.0.1。

具体到 pdns 的设置，好像我也没改什么。
<pre class="prettyprint lang-conf">
server {
	label = "opendns";
	ip = 202.181.224.2, 202.181.202.140;
	#ip = 208.67.222.222, 208.67.220.220;
#	reject = 208.69.32.0/24,  # You may need to add additional address ranges
#	         208.69.34.0/24,  # here if the addresses of their search engines
#	         208.67.219.0/24; # change.
	reject_policy = fail;     # If you do not provide any alternative server
	                          # sections, like the following root-server
	                          # example, "negate" may be more appropriate here.
	timeout = 4;
	uptest = ping;            # Test availability using ICMP echo requests.
   ping_timeout = 100;       # ping test will time out after 10 seconds.
	interval = 15m;           # Test every 15 minutes.
	preset = off;
	policy=included;
	exclude=".abc.com";
}

server {
	label = "yahoo";
	ip = 10.62.163.4, 10.62.163.9;
	timeout = 4;
	uptest = ping;
	ping_timeout = 100;
	interval = 15m;
}
</pre>

我设置两个 server。第一个解析除了 .abc.com 之外的，第二个解析 .abc.com 。这个 abc.com 实际上是我们内网的一个地址，只能在内网 dns 解析。
]]></content>
    
    <summary type="html">
    
      如果你的网络实在很快，好像也没这个必要。当然我用他还有一个目的就是我的 dns 我做主，省的被劫持。

打开一个网页有时候 dns 查询就占了一些时间，如果想把这个时间也节省下来，那可以试试看这个。类似的软件还有 dnsmasq，我觉得 dnsmasq 没 pdnsd 灵活一点，
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="dns" scheme="http://wdicc.com/tags/dns/"/>
    
      <category term="pdnsd" scheme="http://wdicc.com/tags/pdnsd/"/>
    
  </entry>
  
  <entry>
    <title>grub2 fbsplash in gentoo</title>
    <link href="http://wdicc.com/grub2-fbsplash-in-gentoo/"/>
    <id>http://wdicc.com/grub2-fbsplash-in-gentoo/</id>
    <published>2009-07-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://v.youku.com/v_show/id_XMTA4MDAwMjI0.html

<embed src="http://player.youku.com/player.php/sid/XMTA4MDAwMjI0/v.swf" quality="high" width="480" height="400" align="middle" allowscriptaccess="sameDomain" type="application/x-shockwave-flash">

具体方法参考下面的文章
<li>1 <a href="http://wdicc.com/fbsplash-howto/">给系统加上 fbsplash 支持</a></li>
<li>2 <a href="http://wdicc.com/how-to-use-grub2/">使用 grub2</a></li>

视频最后从 休眠 启动后，提示了一个 xtrlock 的错误，应该是刚进桌面就休眠引起的，正常情况应该是启动后会锁定屏幕。
]]></content>
    
    <summary type="html">
    
      http://v.youku.com/v_show/id_XMTA4MDAwMjI0.html

&lt;embed src=&quot;http://player.youku.com/player.php/sid/XMTA4MDAwMjI0/v.swf&quot; quality=&quot;high&quot; widt
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="hibernate" scheme="http://wdicc.com/tags/hibernate/"/>
    
      <category term="fbsplash" scheme="http://wdicc.com/tags/fbsplash/"/>
    
      <category term="grub2" scheme="http://wdicc.com/tags/grub2/"/>
    
  </entry>
  
  <entry>
    <title>给系统加上 fbsplash 支持</title>
    <link href="http://wdicc.com/fbsplash-howto/"/>
    <id>http://wdicc.com/fbsplash-howto/</id>
    <published>2009-07-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[先贴几个参考文章。
<li>1 <a href="http://forums.gentoo.org/viewtopic-t-728450-highlight-grub2.html" target="_blank" rel="external">HOWTO: Fancy Grub and fbsplash on a machine with Intel graphic chipsets</a></li>
<li>2 <a href="http://www.gentoo-wiki.info/Fbsplash" target="_blank" rel="external">Fbsplash</a></li>
<br>
这两个文章里面最重要是那些内核选项的支持，弄好了那些才有下面的内容。里面有个要注意的是 General Setup ---> Initial RAM filesystem and RAM disk (initramfs/initrd) support ---> Built-in initramfs compression mode 这个选项，好像是从 2.6.30 出来的。这个压缩模式选的是什么，关系到后面的工作。

安装 splashutils[fbcondecor] 和 media-gfx/splash-themes-gentoo 或 media-gfx/splash-themes-livecd 这两个都是提供一些 theme，在 /etc/splash 目录下面。

我的 kernel 没有 initrd 文件，是编译到内核的，所以这么做。
<pre class="prettyprint lang-bash">
cd /usr/src/linux && make && make install # recompile kernel, this is my way
</pre>

然后就是设置内核参数，下面是我的。那个 quiet 会让 kernel 不显示信息，如果你不想，那就去掉。
video=uvesafb:1024x768-32,mtrr:3,ywrap quiet splash=silent,theme:natural_gentoo console=tty1 fbcon=scrollback:64K

如果用的是 tuxonice 内核，那还可以给 sys-apps/tuxonice-userui 加上 fbsplash use，装好后会提示你 ln 一个 splash theme 为 tuxonice ，照做就是了。另外还需要在内核里面 Power management and ACPI options ---> Enhanced Hibernation (TuxOnIce) ---> Default userui program location 设置为 /sbin/tuxoniceui_fbsplash ，重编内核。。。

这么弄完之后会发现，休眠后再启动的时候会显示一个没找到 /sbin/tuoniceui_fbsplash 的错误，还有一些百分比，这些实际上不影响正常启动。不过好像有点影响美观。我琢磨了下，觉得那个错误可能是没有把那个文件弄到 initramfs 里面的缘故，弄进去之后果然没了，不过还是有那个百分比出来。

先 cp 一份这个文件 /usr/src/linux/usr/initramfs_data.cpio[看压缩设置] 到临时目录，file 看看属性，我的是 gzip 压缩的，那就解压一下。然后用 cpio 看下里面的文件。
<pre class="prettyprint lang-bash">
$ file initramfs_data.cpio 
initramfs_data.cpio: gzip compressed data, was "initramfs_data.cpio", from Unix, last modified: Sat Jul 25 19:26:29 2009
$ mv initramfs_data.cpio initramfs_data.cpio.gz
$ gzip -d initramfs_data.cpio.gz 
$ file initramfs_data.cpio 
initramfs_data.cpio: ASCII cpio archive (SVR4 with no CRC)
$ cpio --list < initramfs_data.cpio
.
lib
lib/splash
lib/splash/sys
lib/splash/proc
sbin
sbin/v86d
sbin/fbcondecor_helper
sbin/splash_helper
root
dev
dev/mem
dev/tty1
dev/fb
dev/tty0
dev/zero
dev/misc
dev/null
dev/vc
dev/console
etc
etc/splash
etc/splash/luxisri.ttf
etc/splash/natural_gentoo
etc/splash/natural_gentoo/1024x768.cfg
etc/splash/natural_gentoo/images
etc/splash/natural_gentoo/images/silent-1024x768.jpg
etc/splash/natural_gentoo/images/verbose-1024x768.jpg
xxx blocks
$ cat f
sbin/tuxoniceui_fbsplash
$ ls sbin
tuxoniceui_fbsplash
$ cpio -ov --format=newc -A -O initramfs_data.cpio < f
sbin/tuxoniceui_fbsplash
xxx blocks
$ gzip -c initramfs_data.cpio initramfs_data.cpio.gz
$ mv initramfs_data.cpio.gz /usr/src/linux/usr/initramfs_data.cpio
</pre>

ok， 这里你可以再看看文件里面的东西。没问题就可以复制过去了，要注意压缩格式。

回头录一个视频放上来玩玩，呵呵。
]]></content>
    
    <summary type="html">
    
      先贴几个参考文章。
&lt;li&gt;1 &lt;a href=&quot;http://forums.gentoo.org/viewtopic-t-728450-highlight-grub2.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;HOWTO: Fancy Grub 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="fbsplash" scheme="http://wdicc.com/tags/fbsplash/"/>
    
  </entry>
  
  <entry>
    <title>使用 grub2</title>
    <link href="http://wdicc.com/how-to-use-grub2/"/>
    <id>http://wdicc.com/how-to-use-grub2/</id>
    <published>2009-07-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[看到 ub 要默认用 grub2 了，看来这个东西够稳定了，就折腾了下。过程还有点头大，呵呵。这个东西最大的问题就是文档怎么那么少？。。。

国内的大都是抄的 <a href="http://linuxtoy.org/archives/grub-2-installation-and-configuration.html" target="_blank" rel="external">这个</a> ，里面不知道为什么没有排版，那个样例用的是 debian，我用的 gentoo，有点小区别。

gentoo 里面先 keyword unmask grub 1.96，然后安装他。
<pre class="prettyprint lang-bash">echo "=sys-boot/grub-1.96 **">

安装之后，先重新生成 device.map。然后执行 update-grub 生成 grub 的一些配置文件，这个生成是根据的 /etc/grub.d 下面的文件，如果有兴趣可以去配置，我反正没配置，我手动修改的配置文件。
<pre class="prettyprint lang-bash">
sudo update-grub # 不是必须，可以手动生成配置文件</pre>

现在去看看 /boot/grub/grub.cfg 文件，里面应该会根据你的系统生成了一些东西。再改巴改巴，下面是我的。对了这个文件是只读的，改一下属性就好了。
<pre class="prettyprint lang-conf">
set default=0
set timeout=5
set root=(hd0,1)

insmod terminal
insmod gfxterm
insmod vbe
insmod font
insmod png

font /boot/grub/unifont.pff
set gfxmode=1024x768
terminal gfxterm

set menu_color_normal=white/black
set menu_color_highlight=white/dark-gray

#background_image /boot/grub/bg.tga
background_image /boot/grub/dev2.png


### END /etc/grub.d/00_header ###

### BEGIN /etc/grub.d/10_hurd ###
### END /etc/grub.d/10_hurd ###

### BEGIN /etc/grub.d/10_linux ###
menuentry "无敌Gentoo" {
	linux	/vmlinuz root=/dev/hda5 ro video=uvesafb:1024x768-32,mtrr:3,ywrap
}

menuentry "Gentoo (old kernel)" {
	linux /vmlinuz-old root=/dev/hda5 ro video=uvesafb:1024x768-32,mtrr:3,ywrap
}

menuentry "测试JPEG背景图片" {
  background_image /boot/grub/dev.tga
}


#title		Gentoo bootchartd
#root		(hd0,0)
#kernel		/vmlinuz root=/dev/hda5 video=uvesafb:1024x768-32,mtrr:3,ywrap init=/sbin/bootchartd
#savedefault
#
#
#title		Gentoo (rescue)
#root		(hd0,0)
#kernel		/vmlinuz root=/dev/hda5 init=/bin/bb
#savedefault
</pre>

注意后面两个注释，其实就是老的 grub 用的，对照一下就应该知道怎么改了。原来的 hd0,0 变成了 hd0,1 ，这个是需要注意的。

那个背景图片是有要求的，我的用 file 查看是这样的 "dev.png: PNG image, 800 x 600, 8-bit/color RGBA, non-interlaced"，具体对 png jpg tga 的要求，还是去看 <a href="http://grub.enbug.org/FranklinPiat/grub.cfg.manpage" target="_blank" rel="external">man</a> 吧。我试了 tga 文件，好像有点慢，我那个 png 速度还行。

那个 font 是从 <a href="http://grub4dos.sourceforge.net/grub2/unifont.pff" target="_blank" rel="external">这里</a> 下的，支持中文。

配置好之后执行 sudo grub-install /dev/hda 就安装好了，没什么错误的话就可以重启看效果了。
</pre>]]></content>
    
    <summary type="html">
    
      看到 ub 要默认用 grub2 了，看来这个东西够稳定了，就折腾了下。过程还有点头大，呵呵。这个东西最大的问题就是文档怎么那么少？。。。

国内的大都是抄的 &lt;a href=&quot;http://linuxtoy.org/archives/grub-2-installation-an
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="grub" scheme="http://wdicc.com/tags/grub/"/>
    
  </entry>
  
  <entry>
    <title>写了一个用来 mount smb 和 u 盘之类的程序</title>
    <link href="http://wdicc.com/auto-mount-smb-and/"/>
    <id>http://wdicc.com/auto-mount-smb-and/</id>
    <published>2009-07-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[主要是不用 gnome 了，访问 smb 和 mount u盘有点不爽，无聊就写了一个。

程序不是全自动的，是基于配置文件的。写好配置文件，然后执行这个程序。

配置文件类似下面的
<pre class="prettyprint lang-conf">
# type: u  | smb | cifs
#
#
-
 name: 匿名smb
 type: cifs
-
 name: cc
 type: cifs
 ip: 192.168.1.125
 opt: iocharset=utf8,codepage=cp936
-
 name: fileserver
 type: cifs
 ip: fileserver
 user: wd
 pwd: 1111
 opt: iocharset=utf8,codepage=cp936
-
 name: g1
 type: u
 partitions: /dev/sda1, /dev/sda2
-
 name: u 盘
 type: u
 partitions: /dev/sda1
</pre>

配置文件按 - 分段，这个文件是 yaml 格式的。这个程序得用到 dev-perl/yaml 。

程序在<a href="http://github.com/wd/work/tree/91aa2432660a175ae486493e3a6f6edfb8ef787e/automount" target="_blank" rel="external">这里</a>。

本来之前在程序里面是有 umount 的，结果因为 umount 没成功，把我手机卡上面的东西都干掉了。。。所以还是保险一点，不加 umount 了，手动来吧。。。
]]></content>
    
    <summary type="html">
    
      主要是不用 gnome 了，访问 smb 和 mount u盘有点不爽，无聊就写了一个。

程序不是全自动的，是基于配置文件的。写好配置文件，然后执行这个程序。

配置文件类似下面的
&lt;pre class=&quot;prettyprint lang-conf&quot;&gt;
# type: u  |
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="autumount" scheme="http://wdicc.com/tags/autumount/"/>
    
      <category term="smb" scheme="http://wdicc.com/tags/smb/"/>
    
  </entry>
  
  <entry>
    <title>你在用什么方式翻墙？</title>
    <link href="http://wdicc.com/best-way-to-fuck-gfw/"/>
    <id>http://wdicc.com/best-way-to-fuck-gfw/</id>
    <published>2009-07-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[翻墙估计应该是上网的必修课了，当然那些 90 后就别说了，他们大概只上 *qq.com 就好了。

翻墙有不少方法，比如通过找公共的 vpn，用 tor，找一些 phpproxy 网站等。我这推荐一个比较好的方法，通过 <a href="http://www.sshgfw.com/" target="_blank" rel="external">fuckgfw</a> 提供的 ssh proxy，速度比 tor 快的不是一点半点。

我用的 linux，写了一个 expect 脚本来起代理服务，如下。里面的 USER 和  PWD 换成你申请到的用户名和密码。我把这个脚本命名叫 p, 放到了 ~/bin 下面，当然我的 ~/bin 是在 path 里面的，这样，执行一个 p 命令代理就自动起来了。用完的时候可以按 Ctrl-c 退出。

<pre class="prettyprint lang-bash">
#!/bin/bash

expect -c '
spawn ssh -D 7070 -N USER@SERVER
expect {
	password { 
		send "PWD\r";
	}
}

interact {
	\001 exit;
}'
</pre>

当然，我用到的不只这个脚本了，要不也没什么好写的了。(本来觉得自己写了挺好的一个文章，最后还是就 expect 脚本 + autoproxy，唉，丢人。)<del datetime="2009-07-20T02:13:48+00:00">还用到了一个 proxy.pac ，自动使用代理的配置。如下，把这个文件存成 proxy.pac, 然后在 firefox 的 编辑->首选项->高级->网络->设置->自动代理配置URL 这个里面输入 "file:///home/wd/bin/proxy.pac" ，这样，你连接某个网站的时候，他会自动的去判断是不是要用代理。这个文件是 linuxsir 的 狱卒 给我的。:)

<pre class="prettyprint lang-javascript">
function FindProxyForURL(url, host)
{
    url = url.toLowerCase();
    host = host.toLowerCase();
    if (dnsDomainIs(host,"twitter.com")
        || dnsDomainIs(host,"my.opera.com")
        || dnsDomainIs(host,"hk.yahoo.com")
        || dnsDomainIs(host,"tw.yahoo.com")
        || dnsDomainIs(host,"livejournal.com")
        || dnsDomainIs(host,"mitbbs.com")
        || dnsDomainIs(host,"friendfeed.com")
        || dnsDomainIs(host,"youtube.com")
        || dnsDomainIs(host,"sshgfw.com")
        )
        return "SOCKS 127.0.0.1:7070";
    else 
		return "DIRECT";
}
</pre>

这么做一个问题就是，如果你要新加某个网站进去，必须得重启 fx 才能生效。实际上 foxproxy 也可以配置使用 自动代理的，而且可以设置让他多长时间自动重载一下这个文件，算是智能一点了吧。不过我用 foxproxy 的时候发现，如果同时打开两个需要用到代理的网站，他会是一个一个打开的，不能同时，不知道是怎么回事。

我现在用的是 multiproxy swith ，这个可以设置 pac 文件，不过是不会自动重载。当然，重启这个事情也不是什么大问题，装一个 quickrestart ext，然后在 toolbar 上面加一个，点一下就重启了，再加上 fx 会 restore session ，也就是等几秒，就生效了。</del>

再当然一个。如果觉得这个 pac 弄起来还是麻烦，那可以装一个 autoproxy，里面内置了一些列表，你只要设置一个 127.0.0.1:7070 的 socks 代理让他用就好了。哪个用 proxy 哪个不用是全自动的，不用你管。自己添加的列表也能即时生效。目前我用的这个，推荐一下哦。
]]></content>
    
    <summary type="html">
    
      翻墙估计应该是上网的必修课了，当然那些 90 后就别说了，他们大概只上 *qq.com 就好了。

翻墙有不少方法，比如通过找公共的 vpn，用 tor，找一些 phpproxy 网站等。我这推荐一个比较好的方法，通过 &lt;a href=&quot;http://www.sshgfw.com
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
      <category term="firefox" scheme="http://wdicc.com/tags/firefox/"/>
    
      <category term="fuckgfw" scheme="http://wdicc.com/tags/fuckgfw/"/>
    
  </entry>
  
  <entry>
    <title>聪明的老婆</title>
    <link href="http://wdicc.com/clever-cc/"/>
    <id>http://wdicc.com/clever-cc/</id>
    <published>2009-07-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[呃，今天好像疯牛病了，怎么一下更新了好几篇呢？。。。

不得不说，老婆聪明没用在正道上。玩游戏那叫一个牛。昨天手机上面装了一个游戏，是一屏幕小球球，要消掉那种。我玩了会，弄出来一次把球全消了，260 多分，乐呵呵的给她看，让她玩玩，她要是玩不到，就可以取笑她了，嘿嘿。

结果一会还给我了，人家弄了一个 600 多记录出来。。。。这还让不让人活了。。

想起来之前用 palm 650 的时候，里面也有一个类似的游戏，排名前五都是他的名字，我都上不去那个榜。。。

还有玩 qq 那个龙珠，其实就是类似 zuma 那个游戏。他居然学会了那个自己布局，然后一次全消掉那个方法。我反正是不会弄那个。。。

好多次都是，我找到一个好玩的游戏，教给她怎么玩，然后过几天我就拍马也赶不上了。唉。。。可没劲了

另外，不得不补充一下，其它地方她怎么总表现的那个猪呢？
]]></content>
    
    <summary type="html">
    
      呃，今天好像疯牛病了，怎么一下更新了好几篇呢？。。。

不得不说，老婆聪明没用在正道上。玩游戏那叫一个牛。昨天手机上面装了一个游戏，是一屏幕小球球，要消掉那种。我玩了会，弄出来一次把球全消了，260 多分，乐呵呵的给她看，让她玩玩，她要是玩不到，就可以取笑她了，嘿嘿。

结果一会
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>清理 firefox places.sqlite 来提速</title>
    <link href="http://wdicc.com/clean-places-sqlite/"/>
    <id>http://wdicc.com/clean-places-sqlite/</id>
    <published>2009-07-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来自这里 http://forum.moztw.org/viewtopic.php?t=26802

使用前先备份，后悔了还能弄回去。

<pre class="prettyprint lang-sql">
sqlite3 places.sqlite "DELETE FROM moz_historyvisits WHERE place_id IN (SELECT id FROM moz_places WHERE visit_count <=2 );"="" sqlite3="" places.sqlite="" "delete="" from="" moz_places="" where="" (visit_count="" <="2" and="" hidden> 1 AND id NOT IN (SELECT place_id FROM moz_annos UNION SELECT fk FROM moz_bookmarks));"

sqlite3 places.sqlite "DELETE FROM moz_inputhistory WHERE place_id NOT IN (SELECT id FROM moz_places);"

sqlite3 places.sqlite "DELETE FROM moz_favicons WHERE id NOT IN (SELECT
favicon_id FROM moz_places);"

sqlite3 places.sqlite "VACUUM;"
</=2></pre>
]]></content>
    
    <summary type="html">
    
      来自这里 http://forum.moztw.org/viewtopic.php?t=26802

使用前先备份，后悔了还能弄回去。

&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
sqlite3 places.sqlite &quot;DELETE FROM m
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="firefox" scheme="http://wdicc.com/tags/firefox/"/>
    
  </entry>
  
  <entry>
    <title>把 emacs 做为 python ide</title>
    <link href="http://wdicc.com/use-emacs-as-python-ide/"/>
    <id>http://wdicc.com/use-emacs-as-python-ide/</id>
    <published>2009-07-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[emacs 用的其实不是很多，不过他实在是个好东西，各种 mode，用熟了肯定能帮你提升不少工作速度。

我用 emacs-cvs , ropemacs( dev 版， > 0.6 ）, rope ( > 0.9.2 ), company-mode ( > 0.4.2 ) 这几个软件在 gentoo  里面都还没有，我自己写了几个 ebuild。

装好之后，基本就是 require 一下就好，我没做什么设置，效果如下。

<a href="http://twitpic.com/a70je" target="_blank" rel="external">here</a>
]]></content>
    
    <summary type="html">
    
      emacs 用的其实不是很多，不过他实在是个好东西，各种 mode，用熟了肯定能帮你提升不少工作速度。

我用 emacs-cvs , ropemacs( dev 版， &gt; 0.6 ）, rope ( &gt; 0.9.2 ), company-mode ( &gt; 0.4.2 ) 这几个
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="python" scheme="http://wdicc.com/tags/python/"/>
    
      <category term="emacs" scheme="http://wdicc.com/tags/emacs/"/>
    
  </entry>
  
  <entry>
    <title>改良的 fetion.py</title>
    <link href="http://wdicc.com/modified-fetion-py/"/>
    <id>http://wdicc.com/modified-fetion-py/</id>
    <published>2009-07-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这个 fetion.py 来自 <a href="http://blog.lazytech.info/2008/11/05/python-fetion/" target="_blank" rel="external">这里</a>。

不修改的情况下，-t 可以是 sip, uid, mobile_no 这几个。

我修改了下，不加 -t 参数会打印联系人列表。另外还能用 nickname 来发（没测试，我没几个好友，没好意思发）。

在<a href="http://github.com/wd/work/tree/aa559b6b3ee1c15ccfcbf9ce45d1f7aa2208b953/fetion_py" target="_blank" rel="external">这里</a>。
]]></content>
    
    <summary type="html">
    
      这个 fetion.py 来自 &lt;a href=&quot;http://blog.lazytech.info/2008/11/05/python-fetion/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。

不修改的情况下，-t 可以是 sip, ui
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="python" scheme="http://wdicc.com/tags/python/"/>
    
      <category term="feition" scheme="http://wdicc.com/tags/feition/"/>
    
  </entry>
  
  <entry>
    <title>我日 tmd 绿爸</title>
    <link href="http://wdicc.com/fuck-lvb/"/>
    <id>http://wdicc.com/fuck-lvb/</id>
    <published>2009-06-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[操，你干掉别的也就好了，妈了个b的，把 google.com 干掉了

操相关部门，日

现在用 opendns 能通
nameserver 208.67.222.222
nameserver 208.67.220.220
]]></content>
    
    <summary type="html">
    
      操，你干掉别的也就好了，妈了个b的，把 google.com 干掉了

操相关部门，日

现在用 opendns 能通
nameserver 208.67.222.222
nameserver 208.67.220.220

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>&#39;/svn&#39;: 301 Moved Permanently</title>
    <link href="http://wdicc.com/svn-301-moved-permanently/"/>
    <id>http://wdicc.com/svn-301-moved-permanently/</id>
    <published>2009-06-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天搭了一个svn，遇到了这个问题，这个问题在 subversion 的 <a href="http://subversion.tigris.org/faq.html#301-error" target="_blank" rel="external">FAQ</a> 里面就有。不过看了半天没弄明白怎么回事，呵呵。后来糊里糊涂弄好了，也没明白。刚才突然明白了。。。

比如你的 documentroot 指向了 /www 下面， 而你的 svn 的 path 设置到了 /www/svn 下面，就会出这个问题。因为，用户如果访问的是 /www/svn/proj1 的时候，那应该是按照一个正常的目录处理呢，还是按照 svn 的一个项目处理呢？这可是不同的，因为如果是一个 svn 项目，那就交给 dav-svn 处理的，按照其它svn 项目一样，会显示这个项目的 reversion 什么的。但是如果是按照目录处理，那就交给了 apache 处理，他会在这里面找 directory index 等一些操作。这就会让 apache 很困惑。

解决的办法也比较简单，就是在 /www 下面不要出现你的 svn 的名字，也就是说，把你的 /www/svn 弄到 /www 之外去。这就没问题了。当然，如果哪天某个哥们无心的在 /www 下面建了一个 svn 文件夹，那这个又会出现，呵呵。
]]></content>
    
    <summary type="html">
    
      今天搭了一个svn，遇到了这个问题，这个问题在 subversion 的 &lt;a href=&quot;http://subversion.tigris.org/faq.html#301-error&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FAQ&lt;/a&gt; 里面就有。不
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="svn" scheme="http://wdicc.com/tags/svn/"/>
    
  </entry>
  
  <entry>
    <title>升级系统杂记一篇</title>
    <link href="http://wdicc.com/upgrade-system-and-something-else/"/>
    <id>http://wdicc.com/upgrade-system-and-something-else/</id>
    <published>2009-06-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[受不了 kde 窗口管理器的问题，前段时间把系统切换到了 openbox。kde 的 kwin 下面，窗口总有点问题，比如 pidgin 里面设置了提取消息的快捷键，可就是不好用。比如有时候新开的窗口就不在最上面，还比如有些 gtk 程序最大化之后偏偏就不是最大的，上面还是下面来着有一条。另外 kwin 对 dual head 支持感觉也不爽。

kde 不用了，也懒得切回 gnome 了，就试试看 openbox 吧。目前已经用了一段时间的 ob 了，感觉还行。下面是用到的一些程序列表。

<strong>firefox</strong> 目前升级到了 3.5rc1，感觉不错，建议都升级一个，在 mozilla overlay 里面有

<strong>thunderbird</strong> 也用了 3.0beta2。本来用 kmail 其实挺好用的，里面的快捷键我觉得非常好，比如 r 回复作者，a 回复所有人，l 回复 maillist，有点在 mutt 里面的感觉了。不过 kmail 在 openbox 下的表现不是很爽，而且还有 kde 一陀依赖，用了一段时间还是不用了吧。支持 thunderbird  3.0 的 lightning 插件还没找到。另外，因为 thunderbird 不像 kmai 能在 tray 呆着，就自己写了一个程序，类似 mail-notification 的功能一样，呆在 tray，有 mail 的话点一下就启动 thunderbird。

<strong>tint2</strong> 这个支持透明，有 tray 支持，感觉挺好的。而且对 dual head 支持非常好，可以在不同的 moniter 显示不各自的 task，非常好。

<strong>fcitx</strong> 我使用二笔输入法，这个目前用的是感觉最好的，虽然新版越做越二，但是旧版也足够用了，建议此软件用户没事就不要升级了，升级可能随时会导致你的配置文件里面的配置不起作用了。

<strong>roxterm</strong> 这个 term 很像 gnome-terminal, gnome-terminal 是我用的非常爽的一个 term 了，尤其是加了去掉 close button 的 patch 之后。konsole 就别说了，我觉得他除了一些我用不到的功能外，比 gnome-terminal 差好多，不能 shift 连续选择文字，tab 标题会被切隔 etc，反正用的挺不爽的。roxterm 支持快捷键设置，颜色设置等一些比较实用的东西，还比较小。 Terminal, lxdeterminal 其实也比较小巧，不过功能设置上面什么的，我觉得都不如 roxterm 好。

<strong>xchat</strong> 用过 konversation 之后，这个好像看起来就没那么好了，呵呵。不过，其实也还是不错的，现在不太喜欢用 term 下面的 irc client 了，还是 gui 的好，呵呵。 

<strong>stalonetray</strong> 之前因为 tint2 的 tray 支持还有点问题，tint2 crash 之后就可能导致有 tray 的程序也挂掉。之前总调整 tint2 设置的时候这个问题很不爽。尝试之后，在  trayer， stalonetray 还有几个别的里面选了 stalonetray, 因为 trayer 不能很明确的设置 tray 的位置。用单独的 tray 程序也有问题，tray 多的时候，不能很好的安排好 tray 的位置。所以还是用 tint2 自带的算了。

上面几个软件使用中的几个吧，别的觉得没什么好说的，就不说了。这么一弄之后，执行了 depclean 之后，就是下面的壮观结果了，呵呵。

Packages installed: 984 
Packages in world: 147 
Packages in system: 51 
Required packages: 741 
Number to remove: 243

好像好几个星期没 clean 了。

今天升级到了 xorg 1.6 感觉 keyboard repeat delay 有点长，g 了下，原来用 xset 就可以搞定，不得不说这个很强大。之前换了一个鼠标后，发现新的鼠标的移动速度快了好多，也是用 set 搞定的。

xset m 1.5 1 # 设置鼠标速度
xset r rate 180  # keyboard repeat delay 

这是早先抓的图。  http://twitpic.com/6w6ym
]]></content>
    
    <summary type="html">
    
      受不了 kde 窗口管理器的问题，前段时间把系统切换到了 openbox。kde 的 kwin 下面，窗口总有点问题，比如 pidgin 里面设置了提取消息的快捷键，可就是不好用。比如有时候新开的窗口就不在最上面，还比如有些 gtk 程序最大化之后偏偏就不是最大的，上面还是下面来
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="upgrade" scheme="http://wdicc.com/tags/upgrade/"/>
    
  </entry>
  
  <entry>
    <title>把 blog 迁移了一下</title>
    <link href="http://wdicc.com/move-blog-to-an-other-isp/"/>
    <id>http://wdicc.com/move-blog-to-an-other-isp/</id>
    <published>2009-06-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[最早的时候是在自己管的服务器上面，离职后，就买了一个盘古的空间，那会好像是几十块钱买的，着实的便宜，不过便宜没好货啊，呵呵。后来慢的实在不行，刚好和一个朋友<a href="http://bulaoge.com/?qiqiao" target="_blank" rel="external">七巧仔</a>聊天，他和别人合买了一块空间，我就搬过去蹭到了前几天，好像也有一年多了，呵呵。

这几天他的空间也要到期了，这就犯愁挪哪里去。说不弄 blog 吧，有点想记的东西还不怎么方便，弄把还得花钱找这个，唉。

后来想起来我之前买的那个盘古空间那个哥们了。他后来不弄盘古了，变成了从国外买空间，然后回来再卖的策略。现在经营的也挺不错的。地址在这里 <a href="http://wpchina.org/hosting/" target="_blank" rel="external">http://wpchina.org/hosting/</a>，这里也提供 wordpress 的中文版。这两天用的感觉，速度还不错。希望后面不要变慢，呵呵。

如果谁有兴趣可以联系下，现在好像有个9折的优惠。最便宜的也就 60 一年。
]]></content>
    
    <summary type="html">
    
      最早的时候是在自己管的服务器上面，离职后，就买了一个盘古的空间，那会好像是几十块钱买的，着实的便宜，不过便宜没好货啊，呵呵。后来慢的实在不行，刚好和一个朋友&lt;a href=&quot;http://bulaoge.com/?qiqiao&quot; target=&quot;_blank&quot; rel=&quot;exte
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="blog" scheme="http://wdicc.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>用 xelatex + beamer 做幻灯片</title>
    <link href="http://wdicc.com/create-slide-by-latex-beamer/"/>
    <id>http://wdicc.com/create-slide-by-latex-beamer/</id>
    <published>2009-06-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://wdicc.com/lyx-unicode-howto/">这篇文章</a>里面写了怎么实现 latex 中文混排，使用 beamer 是基于那个的，所以先把那个搞定。 

然后安装好 dev-tex/latex-beamer。 

下面是一个例子文件。
<pre class="prettyprint">
\documentclass{beamer}

\mode<presentation>
{
%   \usetheme[blue,noshadow]{Trondheim}
%   \usetheme[blue,minimal]{Trondheim}
%  \usetheme[blue,compress,numbers,nonav]{Trondheim}
%\usetheme[sand,compress,numbers,nonav,innovation]{Trondheim}
%\usetheme[sand,compress,numbers,nonav]{Trondheim}
\usetheme{Berlin}
%\usecolortheme{ntnuold}
\usefonttheme[onlymath]{serif}
\setbeamercovered{transparent}
% 上面这段是使用 beamer 的哪个theme, 具体看 beamer 自带的例子里面的效果吧
}

\usepackage{fontspec}
\newfontfamily\zhfont[BoldFont=Microsoft YaHei]{Microsoft YaHei} %设置中文
\newfontfamily\zhpunctfont{Microsoft YaHei} % 设置中文

\setmainfont{Consolas}           %这里设置英文衬线字体
\setmonofont{Consolas}                     %英文等宽字体
\setsansfont{Consolas}               %英文无衬线字体

\usepackage{zhspacing}
\zhspacing

\title{测试标题}
\author{wd}
\institute{XXX Inc.}
\date{\today}

\begin{document}

\begin{frame}
  \titlepage
\end{frame}

\begin{frame}
  \frametitle{摘要}
  \tableofcontents
\end{frame}

\section{What do we have}

\begin{frame}
	\frametitle{what do we have}
	\begin{itemize}[<+-|alert@+>]
		\item have 1
		\item have 2
		\item have 4
		\item .......
	\end{itemize}
\end{frame}

\section{what do we need}
\subsection{need}
\begin{frame}
	\frametitle{what do we need}
	sth...
	\begin{itemize}[<+-|alert@+>]
		\item 1
		\item 2
	\end{itemize} 
	\hfill \\
	else ?...
\end{frame}

\subsection{pic}
\begin{frame}
	\frametitle{pic}
	\centerline{\includegraphics[height=6cm]{xx.jpg}}\label{phb}
\end{frame}

\section{else}
\begin{frame}
    \frametitle{else}
	\begin{center}\Huge{?}\end{center}
\end{frame}

\end{document}
</+-|alert@+></+-|alert@+></presentation></pre>

然后用 xelatex 编译两次， 两次的目的的出那个目录，编译一次没目录。下面是效果。贴同麻烦，还是上像册看吧。

<a href="http://www.zooomr.com/photos/wd/7615829/" target="_blank" rel="external">http://www.zooomr.com/photos/wd/7615829/</a>
</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://wdicc.com/lyx-unicode-howto/&quot;&gt;这篇文章&lt;/a&gt;里面写了怎么实现 latex 中文混排，使用 beamer 是基于那个的，所以先把那个搞定。 

然后安装好 dev-tex/latex-beamer。 

下面是一
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="latex" scheme="http://wdicc.com/tags/latex/"/>
    
      <category term="beamer" scheme="http://wdicc.com/tags/beamer/"/>
    
  </entry>
  
  <entry>
    <title>Twitter Updates for 2009-05-23</title>
    <link href="http://wdicc.com/twitter-updates-for-2009-05-23/"/>
    <id>http://wdicc.com/twitter-updates-for-2009-05-23/</id>
    <published>2009-05-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<ul class="aktt_tweet_digest">
	<li>@<a href="http://twitter.com/oceanboo" target="_blank" rel="external">oceanboo</a> ibus 不慢？。。。 <a href="http://twitter.com/oceanboo/statuses/1891948226" target="_blank" rel="external">in reply to oceanboo</a> <a href="http://twitter.com/wd/statuses/1892672825" target="_blank" rel="external">#</a></li>
	<li>猫狗情未了 - <a href="http://www.u148.net/article/7949.html" rel="external" target="_blank">http://www.u148.net/article/7949.html</a> <a href="http://twitter.com/wd/statuses/1888570693" target="_blank" rel="external">#</a></li>
	<li><a href="http://tinyurl.com/ofk8j2" rel="external" target="_blank">http://tinyurl.com/ofk8j2</a> DNSPod称域名解析故障是私服惹祸 <a href="http://twitter.com/wd/statuses/1888467730" target="_blank" rel="external">#</a></li>
</ul>
<p class="aktt_credit">Powered by <a href="http://alexking.org/projects/wordpress" target="_blank" rel="external">Twitter Tools</a>.</p>
]]></content>
    
    <summary type="html">
    
      &lt;ul class=&quot;aktt_tweet_digest&quot;&gt;
	&lt;li&gt;@&lt;a href=&quot;http://twitter.com/oceanboo&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;oceanboo&lt;/a&gt; ibus 不慢？。。。 &lt;a href=&quot;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Twitter Updates for 2009-05-22</title>
    <link href="http://wdicc.com/twitter-updates-for-2009-05-22/"/>
    <id>http://wdicc.com/twitter-updates-for-2009-05-22/</id>
    <published>2009-05-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<ul class="aktt_tweet_digest">
	<li><a href="http://bit.ly/w3f7J" rel="external" target="_blank">http://bit.ly/w3f7J</a>
 猫咪的睡功 <a href="http://twitter.com/wd/statuses/1878069706" target="_blank" rel="external">#</a></li>
	<li>名因打劫荷兰商船而被捕的索马里海盗近日表示愿意留在当地，即便是在监狱里服役也比回去过那种吃了上顿没下顿的好。荷兰法律专家同时提醒各国：警惕索马里海盗大面积自动投降，来欧洲监狱里吃闲饭 <a href="http://twitter.com/wd/statuses/1878065052" target="_blank" rel="external">#</a></li>
	<li>@<a href="http://twitter.com/yegle" target="_blank" rel="external">yegle</a> twitter 有点贵，google 不想买 <a href="http://twitter.com/yegle/statuses/1878028103" target="_blank" rel="external">in reply to yegle</a> <a href="http://twitter.com/wd/statuses/1878049797" target="_blank" rel="external">#</a></li>
	<li><a href="http://www.cnbeta.com/articles/84831.htm" rel="external" target="_blank">http://www.cnbeta.com/articles/84831.htm</a> 暴风长老, 请收了神通吧! <a href="http://twitter.com/wd/statuses/1877453735" target="_blank" rel="external">#</a></li>
</ul>
<p class="aktt_credit">Powered by <a href="http://alexking.org/projects/wordpress" target="_blank" rel="external">Twitter Tools</a>.</p>
]]></content>
    
    <summary type="html">
    
      &lt;ul class=&quot;aktt_tweet_digest&quot;&gt;
	&lt;li&gt;&lt;a href=&quot;http://bit.ly/w3f7J&quot; rel=&quot;external&quot; target=&quot;_blank&quot;&gt;http://bit.ly/w3f7J&lt;/a&gt;
 猫咪的睡功 &lt;a href=&quot;htt
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>eclipse 对 jdk 1.4 的依赖</title>
    <link href="http://wdicc.com/eclipse-depends-on-jdk-14/"/>
    <id>http://wdicc.com/eclipse-depends-on-jdk-14/</id>
    <published>2009-05-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[首先日一下 bilbo，不小心按了一下 ctrl+z，内容居然都丢了，nnd，刚才都写完了。

言归正传。之前想安装 eclipse 的时候，发现他依赖 jdk 1.4，就没装。这次又想装了，就试着找找看哪个依赖 jdk 1.4.下面就是找的过程。
<pre class="prettyprint lang-txt">
:%s/\(\d\)\s\+.*$/\1/g #去掉结尾的没用的东西
:%s#/\(.*\)\(-\d\)#/\1/\1\2#   #把路径弄好</pre>
<pre class="prettyprint lang-bash">for l in $(cat ~/b);do echo "######$l">
下面是结果中的部分。第一个 ebuild 里面这种是不会有问题的。就是第二个造成的依赖 jdk 1.4，给他加一个 java5 的 use 的就好了。
<pre class="prettyprint lang-txt">
DEPEND=">=virtual/jdk-1.4
RDEPEND=">=virtual/jre-1.4"
######dev-java/tomcat-servlet-api/tomcat-servlet-api-5.5.27.ebuild
DEPEND="java5? ( >=virtual/jdk-1.5 )
!java5? ( =virtual/jdk-1.4* )
RDEPEND="java5? ( >=virtual/jdk-1.5 )
!java5? ( =virtual/jdk-1.4* )"</pre>
</pre>]]></content>
    
    <summary type="html">
    
      首先日一下 bilbo，不小心按了一下 ctrl+z，内容居然都丢了，nnd，刚才都写完了。

言归正传。之前想安装 eclipse 的时候，发现他依赖 jdk 1.4，就没装。这次又想装了，就试着找找看哪个依赖 jdk 1.4.下面就是找的过程。
&lt;pre class=&quot;pre
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ebuild" scheme="http://wdicc.com/tags/ebuild/"/>
    
  </entry>
  
  <entry>
    <title>asm 和 python的扯淡 zz</title>
    <link href="http://wdicc.com/asm-and-python/"/>
    <id>http://wdicc.com/asm-and-python/</id>
    <published>2009-05-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>python: 兄弟，最近我手头紧，能借点不？<br><br>asm: 行，不过怎么你以前不是过得还滋润的，怎么现在混这么差，<br><br>python: 不知道啊，现在根本接不到什么项目，听说还有风声要收回我的开发资质。<br><br>asm: 你要改变观念，才会有市场。<br><br>python: 什么观念？<br><br>asm: 现在流行的是软件的要有科学性<br><br>python: 什么是软件的科学性？<br><br>asm: 我自己也不清楚，不知道哪位大神定义的科学的软件就是要有bug，现在的人们认为软件不可能没有bug，<br>否则就不是软件，所以bug越多越好，我就非常适合创造bug。搞好点三步一回头，搞不好一步三回头。<br><br>python：我不行啊，我开发的东西bug相对少得很多。<br><br>asm: 难怪别人不找你做项目。通常别人都认为软件这个东西啊就是通过不断消灭bug，不断创造bug，最终走<br>向稳定成熟的。你bug要是少了，客户会认为你蒙它，不科学。<br><br>python: 太阳啊，我设计出来就是为了减少软件开发少出bug的，这样不是要我的命？<br>那你开发项目时候弄出那么多bug,进度不是很慢，成本也很高？客户能接受？<br><br>asm: 这你不懂,这里的人就是人傻，钱多，你不这样干，他们还认为你是在蒙它，哪里有这么轻易就作出来的东西，<br>我的特点就是能把简单的东西弄复杂，而你呢，把复杂的东西简单化，显然不受常人的欢迎，人都是好奇的动物，<br>喜欢复杂的事情，越花花绿绿越好。你还不错了，看Lisp兄弟那惨样。<br><br>python: 那项目要是复杂了，规模大了你能应付？<br><br>asm: 管他，我也知道我对付不了大规模的项目，用人堆，人月算得高高的，到那个程度，我自己也糊涂了，<br>不知道要怎么整合了，bug比太平洋里头的珊瑚虫还多，根本做不下去。就给客户说目前技术水平只能达到<br>这个程度就行了，他们能接受，能将就用就用，不能用就宣告失败。<br><br>python: 不会吧，这种规模的东西在我看来并不难啊，项目失败他们不去告你？<br><br>asm: 也有告的，不过现在法律有规定，只要你能列出你开发时候的所有设计过程和调试信息，能证明你尽力了，<br>系统确实复杂到技术是无法解决的，就没事。<br>python: 你怎么提供?<br><br>asm: 我开发的特点你还不知道，代码量本身巨大，调试信息非常多，而且清楚得很，动不动就扔N个core出来，上次那个<br>破搜索项目我扔了几十T的core给客户，他们还屁颠地当宝一样永久保存<br><br>python: 搜索～～，太阳！这些家伙为什么就是不找我？<br><br>asm: 现在的人不懂你那套，太玄，你的log绝大部分只记录你逻辑上的东西，现在的客户要求太高了，每一步都要知道CPU各寄存器的状态，<br>总线电压高低，内存的实时快照，多了。你还自动类型定义，自动类型转换，谁信。什么高阶函数，闭包都冒出来。<br>你的设计思想不错，我都想学习，不过很难学，至于客户，他们更搞不懂，云里雾里。上次Lisp大兄弟去接个基因分析项目被<br>人轰了出来，说什么一堆乱七八糟的括号太神秘，什么抽象语法树，语法还能自定义，简直胡扯，就是巫术，内存管理更<br>不透明。那些客户喜欢看到分配释放内存，很具体，很直观，Python兄弟你这个连内存管理都不给客户看的，也很难混日子。<br><br>pyton: 我自己带了gc，又不要他们考虑。<br><br>asm: 他们不会吃你gc这套的，你不明确给他们说分配多少字节内存出来，什么时候释放，他们不卖帐。<br><br>python: 我太阳，又不是所有项目都要这么控制精细的。<br><br>asm: 看我，我每一段代码都很明确，和机器结合得很紧密，写磁盘发个IO指令，让他们看得实在。你那个write太玄乎，到最后写盘还不知道隔了多少层<br>他们不放心。现在的人认死理，一个问题只能有一个答案，一种解决方法。你看你变化多端，谁都能搞得糊。不过不要紧，我做不下去的时候可以介<br>绍他们过来给你继续做。<br><br>python: 那真的很感谢，最近真的没米下锅，你是帮了我的大忙了。<br><br>asm: 没什么，不过我要告诉你的就是这类客户的开发经费被我榨得差不多了，到你那可能没多少钱付给你了。<br><br>python: 没关系，再少总比没有好。（哭）<br><br>asm: 最后告诉你一个秘密，人的弱点就是天生有奴性，贱，喜欢复杂的东西，好奇，盲从，注重眼前，捡芝麻丢西瓜。<br>对简洁的东西不感兴趣。因为他们通常认为简洁就是简单。书从薄读到厚，又从厚读到薄 的人没几个的。太相信<br>自己的眼睛，不相信自己的心。我猜可能是猪油吃太多了的缘故。 表面的东西他们非常热衷，看得到，实在。喜欢<br>追涨杀跌，所以股市里头为什么那么多人输钱，就是这样，你弄得越火热，价格越高，越多人买，生怕赶不上末班车，<br>价格越掉越不买，持币待购。我早期玩股票，学了点技术，觉得自己无所不能了，也来搞一把，也是整天盯着盘，<br>那个实时价格跳得我心都肿了，输得去穿strip，后来学乖了，抓住趋势，买入，中间不看了细节了，趋势没了就抛了，<br>最后挣钱了。前几年房价疯涨，多少人怕涨到天上去，砸锅卖铁，把下辈子的养老钱都预支出来去买，看现在，傻了吧。<br>所以有些复杂的东西，你越想从细节控制它，它越不听你的话，你和它对抗没用，早晚死它手里，要顺势。<br>明白了，今后你要挣这些人的钱，要抓他们的弱点。<br></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;python: 兄弟，最近我手头紧，能借点不？&lt;br&gt;&lt;br&gt;asm: 行，不过怎么你以前不是过得还滋润的，怎么现在混这么差，&lt;br&gt;&lt;br&gt;python: 不知道啊，现在根本接不到什么项目，听说还有风声要收回我的开发资质。&lt;br&gt;&lt;br&gt;asm: 你要改变观念，才会有市场
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="python" scheme="http://wdicc.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>人民网：要追究制造发帖获刑案官员罪责</title>
    <link href="http://wdicc.com/fuck-gfw/"/>
    <id>http://wdicc.com/fuck-gfw/</id>
    <published>2009-05-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://news.sina.com.cn/c/2009-05-02/004917729248.shtml" target="_blank" rel="external">人民网：要追究制造发帖获刑案官员罪责</a></p><p>河南的王帅、内蒙古的吴保全因言获罪，经过新兴媒体的披露和公众的理性参与，成为人们热议的话题，由此产生如何杜绝公民“因言获罪”现象的讨 论。王帅事件已经有了初步结果，河南省副省长兼省公安厅厅长表明了态度，并且开始追究构陷者的责任。内蒙古的吴保全案还没有圆满结果，那位“因言获罪”的 年轻人还在牢里，这算不算是当地法制的耻辱呢？</p><p>中国建设和完善民主法制走过了漫长的路程。党和国家提出依法治国，提出建设社会主义法治国家，是时代和社会的进步。经历过没有法制，没有民主， 没有人权的人们，绝对不会同意类似“十年动乱”那样的年代死灰复燃。但是，当我们从网络上和报纸上看到先是河南的王帅，后是内蒙古的吴保全，仅仅因为在网 络上批评一下当地的官员，评论一下当地的政府，披露一下某些事情，就被当地警方跨省抓捕，进而关进牢房，我们确实被震撼了、惊动了。尽管这只是一些被披露 的个案，尽管这只是国家在建设和谐社会中的一点噪音，但是，这些个案和噪音反映了我国建设民主和法制社会的长期性、艰巨性和复杂性，反映了我们社会的一些 亟需改善的现状。</p><p>“因言获罪”是非民主社会例如“十年动乱”中最明显的特征之一。人们的每一句话都可能被认为是影射、借喻、讽刺当权者；人们的每一篇文章都可能 被视作煽动和挑衅，而遭到莫名其妙的迫害。有的人因为在私密的日记中记载了一点自己的思想，而获祸罹难。言论成为那个年代最敏感的节点。说假话，说空话， 说大话，逐步成为人们的习惯，话语体系走进了一条令人生厌的死胡同。这种影响，至今尚未完全清除。</p><p>改革开放，解放思想，拨乱反正，特别是近年来国家民主、法制和人权事业的进步，让我们认识到，在一个民主和法治的社会里，人们的言论是自由的， 批评是自由的，思想是自由的。诬陷罪、诽谤罪只针对个人而言，政府没有权利通过公安抓捕那些仅仅是用语言评论政府的所作所为，或者用某些不太中听的话批评 政府官员的公民，哪怕这些评论和批评不太准确。法院也应该严格遵守宪法的规定，不当权力的帮凶，不去侵害公民的合法权益。否则，我们的社会何来公平正义， 何来和谐稳定、文明进步？</p><p>抓捕“言论”者的执法人员和他们后面的官员，可能以为他们的这些做法，是在维护党和国家的利益，是在维护我们的社会主义制度。其实，他们错了。 党和国家的根本利益，就是人民的利益，就是保证大家能够充分享受美好的生活，树立正确的民主、自由、人权、发展等价值观。我们的社会主义制度，也是为了最 大限度地维护人民的核心利益，而且正在不断地改进和完善中。保证公民充分享受言论权、批评权、监督权，才是实事求是地爱护我们现有的制度，才能更快得让我 们的国家跻身于世界民族之林。用这样的思路去分析官员和执法人员抓捕“言论”者，正好证明，这些目无党纪国法的官员和执法人员，破坏的恰恰是党和国家的根 本利益，践踏的恰恰是当前以人为本的社会主义制度，侮辱的恰恰是人民群众神圣的尊严。</p><p>所以，人们特别是上级领导机关的人千万别让那些侵犯人权、制造冤案的人用满嘴“国家利益”、“社会利益”的理由忽悠了，别听他们一唱高调就心软 手松。一定要追究制造冤假错案者的法律责任，一定要坚决清除他们制造冤案所谓“合理性”的影响，促使我们国家各个地方的冤假错案、荒唐事件越来越少，直至 彻底消失！</p><p><strong>以上内容完全是复制粘贴，本人并不明白其意思，故本人不对以上内容负法律责任，请不要跨省追捕。要详查请自己联系原作者，谢谢！</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://news.sina.com.cn/c/2009-05-02/004917729248.shtml&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;人民网：要追究制造发帖获刑案官员罪责&lt;/a&gt;&lt;/p&gt;&lt;p&gt;河南的王帅、内蒙古的吴
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
  </entry>
  
  <entry>
    <title>奇怪的秤</title>
    <link href="http://wdicc.com/strange-weighing-apparatus/"/>
    <id>http://wdicc.com/strange-weighing-apparatus/</id>
    <published>2009-04-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[也不知道秤的英文是哪个，查了下，就用这个 weighing apparatus 了，嘿嘿。balance 好像也有这个意思。

很早的时候去超市，看到秤就买了一个，是那种指针式的。过年的时候呢，我老婆的妈妈，从家又给带了一个秤，是那种电子的。电子的好看数，而且还是透明的，看着也时尚，自然就把那个指针的给淘汰了，放到了一边。

这几天办了一个健身卡，打算减减肥，第一次上去秤的时候，着实高兴了一把，因为好像我轻了 2kg，这个可不得了，因为我好像才锻炼了2天而已。。后来就发现有问题，因为我在锻炼的地方秤的结果好像是没什么变化，怎么回事？就把那个指针秤也拿了出来。

发现问题了。

我在那个电子秤上面秤的时候，和指针秤比较，轻2kg。不过，比较奇怪的是，我老婆在两个秤之间却几乎没差别，这个是怎么回事呢？

奇怪的秤。。
]]></content>
    
    <summary type="html">
    
      也不知道秤的英文是哪个，查了下，就用这个 weighing apparatus 了，嘿嘿。balance 好像也有这个意思。

很早的时候去超市，看到秤就买了一个，是那种指针式的。过年的时候呢，我老婆的妈妈，从家又给带了一个秤，是那种电子的。电子的好看数，而且还是透明的，看着也时
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="秤" scheme="http://wdicc.com/tags/%E7%A7%A4/"/>
    
  </entry>
  
  <entry>
    <title>A nice way to fuck gfw</title>
    <link href="http://wdicc.com/a-nice-way-to-fuck-gfw/"/>
    <id>http://wdicc.com/a-nice-way-to-fuck-gfw/</id>
    <published>2009-03-31T16:00:00.000Z</published>
    <updated>2016-12-12T11:34:54.000Z</updated>
    
    <content type="html"><![CDATA[转载自 : http://fuckgfw.jottit.com/

<p>本文将提供一种一劳永逸的翻墙方式（ssh -D），实施之后，那道墙——对你来说——将从此透明。</p>

<p>本文面向的用户：使用Windows作为操作系统并且使用Firefox作为常用浏览器。</p>

<h2>第一步：免费获取拥有SSH权限的帐号和密码。</h2>

<p>默认的免费获取方式：将本文转载到你自己的博客上，将转载后的文章网址发送到<img src="http://photos.smugmug.com/photos/497999637_nw25h-O.png" alt="f.ckgfw#gmail.com" title="">。</p>

<p>转载方式：拷贝<a href="https://dl.getdropbox.com/u/398/html.txt" target="_blank" rel="external">文章代码</a>至博客后台HTML编辑器中，直接发布即可，文章标题自拟，可在前后文插入自己的评论。</p>

<p>经过人工审核，你将收到一封附有五个拥有SSH权限的帐号和密码的电子邮件，你可以将它们赠与你自己的读者。</p>

<p>更多获取方式将在今后陆续激活，请关注帐号配送中心：<a href="https://friendfeed.com/rooms/fuckgfw-for-free" target="_blank" rel="external">https://friendfeed.com/rooms/fuckgfw-for-free</a></p>

<h2>第二步：配置MyEntunnel软件</h2>

<p>下载并安装MyEntunnel，该软件全名为My Encrypted Tunnel。</p>

<p>一键下载：<a href="https://dl.getdropbox.com/u/398/myentunnel.exe" target="_blank" rel="external">https://dl.getdropbox.com/u/398/myentunnel.exe</a></p>

<p><img src="http://photos.smugmug.com/photos/497956295_FRKXY-O.jpg" alt="myentunnel" title=""></p>

<p>按照上图将第一步收到的帐号信息填写到相应的地方后，点击<img src="http://photos.smugmug.com/photos/497956305_GuUqV-O.jpg" alt="save" title="">按钮，再点击<img src="http://photos.smugmug.com/photos/497956257_vDBHg-O.jpg" alt="hide" title="">按钮。</p>

<p>第一次连接过程中会出现一个认证对话框，按照提示确认即可。以后的自动连接中将不再出现此认证对话框。</p>

<p>最后点击<img src="http://photos.smugmug.com/photos/497956277_uqUyE-O.jpg" alt="hide" title="">按钮，使对话框隐藏到系统任务栏中。</p>

<p>提示：</p>

<p>为MyEntunnel创建一个快捷方式，将其复制到系统的【启动】（C:\Documents and Settings\当前用户名（需要修改成你自己的）\「开始」菜单\程序\启动）文件夹中，今后开机便可自动启动软件，并自动连接服务器。</p>

<p><img src="http://photos.smugmug.com/photos/497956351_pNNkc-O.png" alt="tray" title=""></p>

<p>绿色代表连接成功且稳定；黄色代表正在连接或重新连接；红色代表连接失败。</p>

<h2>第三步：配置Firefox浏览器</h2>

<p>假设你正使用<a href="http://www.mozilla.com/firefox" target="_blank" rel="external">Firefox浏览器</a>阅读本文。</p>

<p>一键安装：<a href="http://autoproxy.mozdev.org/latest.xpi" target="_blank" rel="external">http://autoproxy.mozdev.org/latest.xpi</a></p>

<p><img src="http://photos.smugmug.com/photos/498951512_XzxSh-O.png" alt="xpi-offical" title=""></p>

<p>点击立即安装，安装后，重新启动Firefox。然后你会看到如下对话框，选择gfwlist (P.R.China)后，点击确定。</p>

<p><img src="http://photos.smugmug.com/photos/497956357_vmp9W-O.png" alt="gfwlist" title=""></p>

<p>接着你会看到Firefox主界面右上角出现有一个“福”字图案，点击“福”。</p>

<p><img src="http://photos.smugmug.com/photos/497956204_t4d3L-O.png" alt="fu" title=""></p>

<p>点击“代理服务器——编辑代理服务器”。</p>

<p><img src="http://photos.smugmug.com/photos/497956317_yWwtL-O.png" alt="edit" title=""></p>

<p>随即出现如下画面，你会看到如GAppProxy、Tor和Your Freedom这样一系列代理服务器名称。</p>

<p><img src="http://photos.smugmug.com/photos/497956227_jQby9-O.png" alt="before" title=""></p>

<p>将GAppProxy一栏的参数修改为如下图所示。</p>

<p><img src="http://photos.smugmug.com/photos/497956232_ttQRj-O.png" alt="after" title=""></p>

<p>修改完毕后，点击确定。至此配置已全部就绪。</p>

<p>获取更多帮助，请关注反馈中心：<a href="https://friendfeed.com/rooms/fuckgfw-feedback" target="_blank" rel="external">https://friendfeed.com/rooms/fuckgfw-feedback</a></p>

<h2>第四步：支持fuckGFW</h2>

<p>获取详情，请关注捐赠与推广中心：<a href="https://friendfeed.com/rooms/fuckgfw-donation-and-marketing" target="_blank" rel="external">https://friendfeed.com/rooms/fuckgfw-donation-and-marketing</a></p>

<h4>版权信息：您可以自由复制、传播、演绎本作品且无需署名、无需注明原始出处。</h4>
]]></content>
    
    <summary type="html">
    
      转载自 : http://fuckgfw.jottit.com/

&lt;p&gt;本文将提供一种一劳永逸的翻墙方式（ssh -D），实施之后，那道墙——对你来说——将从此透明。&lt;/p&gt;

&lt;p&gt;本文面向的用户：使用Windows作为操作系统并且使用Firefox作为常用浏览器。&lt;/p&gt;

    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
  </entry>
  
  <entry>
    <title>perl and fork</title>
    <link href="http://wdicc.com/perl-and-fork/"/>
    <id>http://wdicc.com/perl-and-fork/</id>
    <published>2009-03-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[最近写程序用到了 fork ，记一下。

我在 perl 里面某个地方开始，fork 多个进程去操作 db，主进程等子进程完事后，再继续后面的操作。

<pre class="prettyprint lang-perl">
use POSIX ":sys_wait_h";
my $thread_num = 5;
my %pids = ();

# $dbi->{InactiveDestroy} = 1 用到 dbi 的话还要设置这个，要不子进程exit后，dbi
# 连接就断了

# .....前面的程序
for ( 1..$thread_num ) {
	my $pid = fork;
	if (not $pid) { # 子进程
		$pids{$pid} = 1;
		# blalbalbla... 子进程去干活
		eixt 0; # 要记得 exit ，要不子进程还会继续执行后面的。
	} else { # 主进程
		# balbalbal ... 如果没事做也可以不写
	}
}

while( keys( %pids ) ) {
	my $kid = waitpid(-1,WNOHANG);
	if ($kid >0) {
		delete $pids{$kid};
		print "$kid end.\n";
	} else {
		sleep 1; # 继续等，如果有时间限制，可以在这里去 kill 子进程
	}
}

# ....继续后面的程序

</pre>

还可以参考这个 http://www.perlmonks.org/?node_id=619722
]]></content>
    
    <summary type="html">
    
      最近写程序用到了 fork ，记一下。

我在 perl 里面某个地方开始，fork 多个进程去操作 db，主进程等子进程完事后，再继续后面的操作。

&lt;pre class=&quot;prettyprint lang-perl&quot;&gt;
use POSIX &quot;:sys_wait_h&quot;;
my 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
      <category term="fork" scheme="http://wdicc.com/tags/fork/"/>
    
  </entry>
  
  <entry>
    <title>内核的 shmall 和 shmmax 参数</title>
    <link href="http://wdicc.com/shmall-and-shmmax-kernel-paramaters/"/>
    <id>http://wdicc.com/shmall-and-shmmax-kernel-paramaters/</id>
    <published>2009-03-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[shmall 是全部允许使用的共享内存大小，shmmax 是单个段允许使用的大小。这两个可以设置为内存的 90%。例如 16G 内存，16*1024*1024*1024*90% = 15461882265，shmall 的大小为 15461882265/4k(getconf PAGESIZE可得到) = 3774873。

修改 /etc/sysctl.conf。

<pre class="prettyprint lang-text">
kernel.shmmax=15461882265
kernel.shmall=3774873
kernel.msgmax=65535
kernel.msgmnb=65535
执行 sudo sysctl -p
</pre>

可以使用 ipcs -l 看结果。ipcs -u 可以看到实际使用的情况。

<pre class="prettyprint lang-text">
------ Shared Memory Limits --------
max number of segments = 4096
max seg size (kbytes) = 15099494
max total shared memory (kbytes) = 15097856
min seg size (bytes) = 1
 
------ Semaphore Limits --------
max number of arrays = 128
max semaphores per array = 250
max semaphores system wide = 32000
max ops per semop call = 32
semaphore max value = 32767
 
------ Messages: Limits --------
max queues system wide = 16
max size of message (bytes) = 8192
DEFAULT max size of queue (bytes) = 16384
</pre>
]]></content>
    
    <summary type="html">
    
      shmall 是全部允许使用的共享内存大小，shmmax 是单个段允许使用的大小。这两个可以设置为内存的 90%。例如 16G 内存，16*1024*1024*1024*90% = 15461882265，shmall 的大小为 15461882265/4k(getconf PA
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="kernel" scheme="http://wdicc.com/tags/kernel/"/>
    
  </entry>
  
  <entry>
    <title>去掉了 gnome-terminal 的 tab 上面的关闭按钮</title>
    <link href="http://wdicc.com/disable-gnome-terminal-close-button/"/>
    <id>http://wdicc.com/disable-gnome-terminal-close-button/</id>
    <published>2009-02-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[gnome-terminal 上面有个红红的 叉叉，就是关闭按钮了。因为开 tab 多的时候会不小心按到，所以就想把他干掉。可惜 gnome 没提供去掉的选项，google 了下，发现不少人烦这个，可是 gnome 不理会这些声音，2007 年有人写了个<a href="https://bugs.launchpad.net/gnome-terminal/+bug/99978" target="_blank">补丁</a>，可惜没转正。我琢磨琢磨改巴改巴把他弄到自己能用了。原来那个补丁还添加了 gconf 的配置项，我没那需求，就去掉了。这个是对 gentoo 里面的 gnome-terminal-2.24.2 打的补丁，别的版本没准还得改改。

<pre class="prettyprint lang-diff">
diff -ur gnome-terminal-2.24.2.org/src/terminal-window.c gnome-terminal-2.24.2/src/terminal-window.c
--- gnome-terminal-2.24.2.org/src/terminal-window.c	2009-02-06 17:51:54.277755771 +0800
+++ gnome-terminal-2.24.2/src/terminal-window.c	2009-02-06 18:04:34.601756240 +0800
@@ -1929,7 +1929,7 @@
 
   gtk_box_pack_start (GTK_BOX (hbox), label, TRUE, TRUE, 0);
 
-  close_button = gtk_button_new ();
+/*  close_button = gtk_button_new ();
   gtk_button_set_relief (GTK_BUTTON (close_button), GTK_RELIEF_NONE);
   gtk_button_set_focus_on_click (GTK_BUTTON (close_button), FALSE);
   gtk_button_set_relief (GTK_BUTTON (close_button), GTK_RELIEF_NONE);
@@ -1939,17 +1939,17 @@
   image = gtk_image_new_from_stock (GTK_STOCK_CLOSE, GTK_ICON_SIZE_MENU);
   gtk_container_add (GTK_CONTAINER (close_button), image);
   gtk_box_pack_end (GTK_BOX (hbox), close_button, FALSE, FALSE, 0);
-
+*/
   sync_tab_label (screen, NULL, label);
   g_signal_connect (screen, "notify::title",
                     G_CALLBACK (sync_tab_label), label);
 
-  g_signal_connect (close_button, "clicked",
+/*  g_signal_connect (close_button, "clicked",
 		    G_CALLBACK (close_button_clicked_cb), screen_container);
 
   g_signal_connect (hbox, "style-set",
                     G_CALLBACK (tab_label_style_set_cb), close_button);
-
+*/
   gtk_widget_show_all (hbox);
 
   return hbox;
</pre>
]]></content>
    
    <summary type="html">
    
      gnome-terminal 上面有个红红的 叉叉，就是关闭按钮了。因为开 tab 多的时候会不小心按到，所以就想把他干掉。可惜 gnome 没提供去掉的选项，google 了下，发现不少人烦这个，可是 gnome 不理会这些声音，2007 年有人写了个&lt;a href=&quot;http
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
  </entry>
  
  <entry>
    <title>将 gnome 换成 kde 4.2</title>
    <link href="http://wdicc.com/use-kde-42-in-gentoo/"/>
    <id>http://wdicc.com/use-kde-42-in-gentoo/</id>
    <published>2009-01-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[下面的步骤一定要明白干的是什么再操作，否则后果自负 :)。

1 修改 make.conf 里面的 use 为 kde4 -kde -gnome qt4 -qt3 -avahi -esd 这样。把 gnome 相关的 use 都 - 掉。我还有 -arts，看需要。使用 kde 这个use有时会导致安装 kde3，所以如果要使用最好在 /etc/portage/package.use 里面单独指定。如果不介意 kde + gnome 共存，那么 1,2 不是必须的。

2 emerge -uDN world

3 修改 /etc/portage/package.unmask ,加入 &gt;sys-apps/portage-2.1, unmask portage 2.2 ，2.2 才支持 set

4 layman -a kde-testing

5 emerge -av @kdebase-4.2
其他想装的东西可以去 /usr/local/portage/layman/kde-testing/sets 里面看。比如 emerge -av @kdepim-4.2，或者装里面的某个包，emerge kde-base/kmail:4.2

6 修改 /var/lib/portage/world ，删掉里面的 gnome 的包，当然不介意 gnome 和 kde 共存的话后面的就不需要做了。

7 emerge --depclean -p 清理 gnome 的包。
]]></content>
    
    <summary type="html">
    
      下面的步骤一定要明白干的是什么再操作，否则后果自负 :)。

1 修改 make.conf 里面的 use 为 kde4 -kde -gnome qt4 -qt3 -avahi -esd 这样。把 gnome 相关的 use 都 - 掉。我还有 -arts，看需要。使用 kde 
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gentoo" scheme="http://wdicc.com/tags/gentoo/"/>
    
      <category term="kde" scheme="http://wdicc.com/tags/kde/"/>
    
  </entry>
  
  <entry>
    <title>写了一个 kde plasma applet</title>
    <link href="http://wdicc.com/writing-a-kde-plasma-applet/"/>
    <id>http://wdicc.com/writing-a-kde-plasma-applet/</id>
    <published>2009-01-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[用 gnome 的时候，对 panel 上面的 cpu 等 applet 情有独钟。这个东西能让我对自己的系统有第一手信息，有时候某个程序出问题了 cpu 100% 了，这个时候系统反应不一定会变慢的，但是这个程序是必须要被干掉的，有了这个 applet 我就能知道第一时间知道出问题了。还有的时候看 firefox 里面的 flash 的时候也会出类似的情况，这时会导致看别的网页很慢，那就干掉他。

第一次装 kde 的时候发现没有那些东西，让我很失望。后来看到 ob 在 openbox 里面把 panel 设的短一点，然后用 conky 在空出来的地方显示一些信息，感觉豁然开朗啊，呵呵。

这次装好 kde，就弄了一个 conky，可是发现他的风格和系统不兼容。有点不爽，就琢磨自己能不能弄一个，因为需求实在太简单了。

昨天花了一个下午，总算弄好了。参考的文档 <a href="http://www.qtopia.org.cn/doc/qiliang.net/qt/classes.html" target="_blank" rel="external">qt的类</a>, <a href="http://www.zetcode.com/tutorials/pyqt4/" target="_blank" rel="external">pyqt4 turtorial</a>,<a href="http://techbase.kde.org/Development/Tutorials/Plasma/Python/GettingStarted" target="_blank" rel="external">plasma python</a> .

效果就这样。电池旁边那个就是。

<a href="http://img339.imageshack.us/img339/6986/200901231045132304x1024oo0.png" target="_blank"><img src="http://img339.imageshack.us/img339/6986/200901231045132304x1024oo0.png" alt="" width="300"></a>

代码
<pre class="prettyprint lang-python">
from PyQt4.QtCore import *
from PyQt4.QtGui import *
from PyKDE4.plasma import Plasma
from PyKDE4 import plasmascript
import time                                      

class Cpuinfo(plasmascript.Applet):
        def __init__(self,parent,args=None):
                plasmascript.Applet.__init__(self,parent)

        def init(self):
                self.freqnow = ''
                self.freqmax = ''
                self.temp = ''
                self.text = ''   

                self.getCurrentFreq()
                self.getMaxFreq()
                self.getTemp()       

                self.setHasConfigurationInterface(False)
                self.setMinimumWidth(100)
                self.setAspectRatioMode(Plasma.Square)
                self.startTimer(1000)

        def getCurrentFreq (self):
                line = open ('/sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq', 'r').read().rstrip('\n')
                line = int(line) / 1000 /1000.0
                self.freqnow = line

        def getMaxFreq (self):
                line = file('/sys/devices/system/cpu/cpu0/cpufreq/scaling_max_freq', 'r').read().rstrip('\n')
                line = int(line) / 1000 /1000.0
                self.freqmax = line

        def getTemp (self):
                line = file('/proc/acpi/thermal_zone/TZ1/temperature', 'r').read().rstrip('\n')
                line = " ".join(line.split()[1:])
                self.temp = line

        def timerEvent(self, event):
                self.getCurrentFreq()
                self.getTemp()
                self.text = "%s\n%.2f %d%%" % (self.temp, self.freqnow, self.freqnow / self.freqmax * 100)
                self.update() 

        def paintInterface(self, painter, option, rect):
                painter.save()
                painter.setPen(Qt.white)
                #painter.setFont(QFont('Consolas',11))
                painter.drawText(rect, Qt.AlignVCenter | Qt.AlignHCenter, self.text)
                painter.restore()

def CreateApplet(parent):
                return Cpuinfo(parent)

if __name__ == '__main__':
        a = Cpuinfo(None)
        a.init()
        print a.freqnow</pre>
]]></content>
    
    <summary type="html">
    
      用 gnome 的时候，对 panel 上面的 cpu 等 applet 情有独钟。这个东西能让我对自己的系统有第一手信息，有时候某个程序出问题了 cpu 100% 了，这个时候系统反应不一定会变慢的，但是这个程序是必须要被干掉的，有了这个 applet 我就能知道第一时间知道出
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="plasma" scheme="http://wdicc.com/tags/plasma/"/>
    
      <category term="pyqt4" scheme="http://wdicc.com/tags/pyqt4/"/>
    
      <category term="python" scheme="http://wdicc.com/tags/python/"/>
    
  </entry>
  
  <entry>
    <title>使用 perl 来登录网页</title>
    <link href="http://wdicc.com/perl-cookie/"/>
    <id>http://wdicc.com/perl-cookie/</id>
    <published>2009-01-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[应该不能用。。。只是为了记录

使用 LWP::UserAgent 可以简单的去访问网页，获取页面内容。例如

<pre class="prettyprint lang-perl">
use LWP::UserAgent;

my $ua = LWP::UserAgent->new();
$ua->timeout(10);
$ua->agent('mozilla');

my $r = $ua->get('http::/www.google.com');
print $r->content; # or $r->decoded->content
</pre>

$r 的其它属性可以去 cpan 看看。这样就获取到了内容。但是，如果一个网页是需要登录的怎么办？可以用保存 cookie 的方式。

<pre class="prettyprint lang-perl">
use LWP::UserAgent;
use HTTP::Cookies;
use Digest::MD5 qw(md5 md5_hex); # 用来生成 md5 的
use JSON; # 用来在 json 串和 perl 的 hash 串之间转换
use Data::Dumper;

my $cookie_jar = HTTP::Cookies->new(
	file => "lw.dat",
	autosave => 1
);

my $ua = LWP::UserAgent->new();
$ua->timeout(10);
$ua->agent('mozilla');

my(@rest) = ("/", ".yahoo.com", undef, 0, 0, 60*60, 0);
$cookie_jar->set_cookie(0, 'session', $session, @rest);

$ua->cookie_jar($cookie_jar);

$o = $ua->get($url);
........
</pre>
]]></content>
    
    <summary type="html">
    
      应该不能用。。。只是为了记录

使用 LWP::UserAgent 可以简单的去访问网页，获取页面内容。例如

&lt;pre class=&quot;prettyprint lang-perl&quot;&gt;
use LWP::UserAgent;

my $ua = LWP::UserAgent-&gt;ne
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="cookie" scheme="http://wdicc.com/tags/cookie/"/>
    
      <category term="perl" scheme="http://wdicc.com/tags/perl/"/>
    
  </entry>
  
  <entry>
    <title>把硬盘的分区都换成了 ext4</title>
    <link href="http://wdicc.com/convert-reiserfs-t-ext4/"/>
    <id>http://wdicc.com/convert-reiserfs-t-ext4/</id>
    <published>2009-01-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[我的分区都是 reiserfs 的。这次 ext4 吵的这么火爆，实在忍不住了，就换过去了。

我的磁盘比较小，转换还费了点功夫。先找一个和 / 分区差不多的分区，用来放 / 的数据。我找的是 /home ，然后把 / /home 之外的分区转换了。方法就是先把其中一个的数据弄到其它的上面，然后重新格式化，然后再把数据弄回来。

可以用 cp -p /source /dest 的方式，也可以用 tar cpf - --exclude=/home | tar xpf - 的方式，后面这个方法可以支持过滤掉某个目录不考。

这些都弄好之后就可以弄 / /home 了。先把 /home 的东西备分一下， tar cpf /data/home.tar ，/data 最好是一个单独的分区。

rc-update del xdm ，然后重启 root 登录。格式化 /home，再 mount 上他，用来复制 / 的内容过来。复制的时候需要注意下，先把 / /home 之外的那些分区都 umount，省得复制的时候不小心一起复制了过来。

cd /home; tar cpf - --exclude=/home --exclude=/proc --exclude=/sys | tar xpf -

复制完之后，在 /home 下建立 /home/proc /home/sys 目录。修改 /home/boot/grub/menu.lst 文件（如果是独立的 boot 分区，需要挂上再修改），kernel 参数为新的 root，建议新加一行，保留原来的，免得有问题还能方便回去。然后修改 /etc/fstab。就可以重启了。
]]></content>
    
    <summary type="html">
    
      我的分区都是 reiserfs 的。这次 ext4 吵的这么火爆，实在忍不住了，就换过去了。

我的磁盘比较小，转换还费了点功夫。先找一个和 / 分区差不多的分区，用来放 / 的数据。我找的是 /home ，然后把 / /home 之外的分区转换了。方法就是先把其中一个的数据弄到
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ext4" scheme="http://wdicc.com/tags/ext4/"/>
    
      <category term="reiserfs" scheme="http://wdicc.com/tags/reiserfs/"/>
    
  </entry>
  
  <entry>
    <title>在 gnome 中替换 wm</title>
    <link href="http://wdicc.com/change-wm-in-gnome/"/>
    <id>http://wdicc.com/change-wm-in-gnome/</id>
    <published>2008-12-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[gnome 中的 window manger (wm) 是 metacity，有时候可能会用的不爽，换成 openbox ，或着 xfwm4 之类。

gnome 提供了简单的方法，就是设置 WINDOW_MANAGER 这个变量。如果用的是 dm，例如 gdm ，那么在 .profile 里面放上下面一句就可以了。startx 的话，放在 .xinitrc 里面。

export WINDOW_MANAGER="/usr/bin/openbox"

用 gdm 的话，还可以在启动的时候选择 openbox-gnome-session 这个来使用 openbox 做为 wm，那个命令是个 shell 脚本，可以看看。

如果设置了不管用，可以看看 gconf 里面的 desktop/gnome/session/required_components/windowmanager 的值。/usr/bin/gnome-wm 这个程序可能会用这个，具体好像和 gnome 的版本有关，这个文件是 gnome-base/gnome-session 这个包里面的。

gdm 启动的时候，会运行 /etc/X11/gdm/Xsession 这个程序。可以试试看在这里面小小的 debug 一下。

最后郁闷一下，openbox 在 gnome 的 dual head 里面好像有个 <a href="http://bugzilla.icculus.org/show_bug.cgi?id=3922" target="_blank">bug</a>，提交给了 openbox，还没回复，只能继续 metacity 了。
]]></content>
    
    <summary type="html">
    
      gnome 中的 window manger (wm) 是 metacity，有时候可能会用的不爽，换成 openbox ，或着 xfwm4 之类。

gnome 提供了简单的方法，就是设置 WINDOW_MANAGER 这个变量。如果用的是 dm，例如 gdm ，那么在 .pr
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
      <category term="openbox" scheme="http://wdicc.com/tags/openbox/"/>
    
  </entry>
  
  <entry>
    <title>更新 kenerl 到了 2.6.28</title>
    <link href="http://wdicc.com/upgrade-kenerl-to-2-6-28/"/>
    <id>http://wdicc.com/upgrade-kenerl-to-2-6-28/</id>
    <published>2008-12-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[之前用的是 tuxonice 的 kernel, 为了体验他的休眠。可是最近发现我基本就不用休眠。而且 tuxonice 的内核还一直停留在 2.6.26 上面。最近 2.6.28 火的不行，所以就给他升级了。

升级没遇到什么问题。新选择了 ext4 支持，等哪天把 fs 都修改到 ext4 去，不过好像有点折腾，呵呵。

gentoo-souces 也是支持的休眠的。想要在 gnome 下面休眠的话，安装一个 pm-utilus 这个包就可以了。在电源管理那里选休眠就可以了。不过发现 挂起 好像不支持，挂起了就不能唤醒了，很郁闷。我记得 tuxonice 下面挂起好像也不支持，不管他了。

那个号称革命性的 GEM 不知道什么时候能在 radeon 上面出现。等着吧。
]]></content>
    
    <summary type="html">
    
      之前用的是 tuxonice 的 kernel, 为了体验他的休眠。可是最近发现我基本就不用休眠。而且 tuxonice 的内核还一直停留在 2.6.26 上面。最近 2.6.28 火的不行，所以就给他升级了。

升级没遇到什么问题。新选择了 ext4 支持，等哪天把 fs 都修
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="kernel" scheme="http://wdicc.com/tags/kernel/"/>
    
      <category term="hibernate" scheme="http://wdicc.com/tags/hibernate/"/>
    
      <category term="tuxonice" scheme="http://wdicc.com/tags/tuxonice/"/>
    
      <category term="休眠" scheme="http://wdicc.com/tags/%E4%BC%91%E7%9C%A0/"/>
    
  </entry>
  
  <entry>
    <title>科学家们拿猴子作了几个试验</title>
    <link href="http://wdicc.com/monkey-test/"/>
    <id>http://wdicc.com/monkey-test/</id>
    <published>2008-12-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<strong>- 道德的起源 -</strong>
把五只猴子关在一个笼子里，上头有一串香蕉实验人员装了一个自动装置,一旦侦测到有猴。子要去拿香蕉，马上就会有水喷向笼子而这五只猴子都会一身湿. 首先有只猴子想去拿香。蕉，当然，结果就是每只猴子都淋湿了. 之後每只猴子在几次的尝试後，发现莫不如此, 於是猴子们达到一个共识：不要去拿香蕉，以避免被水喷到. 後来实验人员把其中的一只猴子释放，换进去一只新猴A, 这只猴子A看到香蕉，马上想要去拿.结果，被其他四只猴子海K了一顿 因为其他四只猴子认为猴子A会害他们被水淋到，所以制止他去拿香蕉 A尝试了几次，虽被打的满头包，依然没有拿到香蕉 当然，这五只猴子就没有被水喷到 後来实验人员再把一只旧猴子释放，换上另外一只新猴子B 这猴子B看到香蕉，也是迫不及待要去拿 当然，一如刚才所发生的情形，其他四只猴子海K了B一顿 特别的是，那只A猴子打的特别用力（这叫老兵欺负新兵，或是媳妇熬成婆 ^O^）。B猴子试了几次总是被打的很惨，只好作罢。 後来慢慢的一只一只的，所有的旧猴子都换成新猴子了，大家都不敢去动那香蕉 但是他们都不知道为什麽，只知道去动香蕉会被猴扁。这就是道德的起源

<strong>－阶级的起源－</strong>
实验人员继续他们的实验，不过这一次他们改变了喷水装置，一旦侦测到有猴子要去拿香蕉，马上就会有水喷向拿香蕉的猴子，而不是全体。 然后实验人员又把其中的一只猴子释放，换进去一只新猴子C ，不同以往的是猴子C特别的孔武有力。当然猴子C看到香蕉，也马上想要去拿，一如以前所发生的情形，其他四只猴子也想海K猴子C一顿。不过他们错误估计了C的实力，所以结果是反被C海K了一顿。于是猴子C拿到了香蕉，当然也被淋了个透湿。一边打着喷嚏一边吃着香蕉，美味但是也美中不足。A、B、D、E没有香蕉吃却也比较快乐，毕竟没有被淋到嘛！后来C发现只有拿香蕉的那个才会被淋到，他就要最弱小的A替他去拿。A不想被K，只好每天拿香蕉然后被水淋。B、D、E越发的快乐了起来，这就叫比上不足，比下有余嘛  于是五只猴子有了三个阶级，这下子阶级也随着道德的起源了。

<strong>－道德的沦丧－</strong>
天变热了，笼子里的猴子们想冲凉却找不到地方。终于出现了一位反潮流英雄，猴HERO。HERO在无意中碰到了香蕉，理所当然的引来了一顿饱打。但在挨打的过程中，猴子们享受到了冲凉的乐趣。等身上 的水干了之后，猴子A在无意中碰撞了HERO，使HERO又一次接触到了香蕉，于是，猴子们享受了第二次冲凉，HERO遭到了第二次痛殴。在此之后，只要大家有冲凉的需要，就会有一只猴子X挺身而出，对HERO进行合理冲撞。 大家对HERO的态度也有了明显的不同，在平时大家会对HERO异常温和，以弥补在冲凉时为维护规则而不得不对它进行的暴力举动。一天， 在大家冲凉时，饱受折磨的HERO闻到了香蕉的清香旁鹜时将香蕉吃了。而且此后没有了新的香蕉来填补空缺。猴子们陷入了另一个尴尬境地没有冲凉的水，也没有香蕉，只有HERO。于是，另一个规则形成了。猴子在烦躁的时候会痛打HERO出气，HERO不得反抗。当笼子里的旧猴子被新猴子换掉时，新猴子会在最快的时间内学会殴打HERO。 终于有一天，老天有眼，历尽沧桑的HERO被另一只猴子代替了。猴子们失去了发泄的对象只能任意选取一个目标进行攻击。从此以后，笼子里的猴子们不吃不喝不冲凉，唯一的举动就是打架。这就是道德的沦丧。

<strong>－道德的重建－</strong>
实验人员对猴子们的争斗不休感到不安。为了重建道德秩序，他们决定继续供应香蕉。一天，正在混战的猴子们发现头顶多了一串香蕉，它们其中的一个A不顾身上的剧痛，把香蕉摘了下来。于是久违的甘露出现了，未曾尝过甜头的猴子们先是茫然失措，继而争先恐后的加入冲凉的行列。香蕉反而被遗忘了。当猴子B、C、D、E发现A在享受淋浴的同时还吃着美味的香蕉，嫉妒心使它们暂时团结起来，共同K了A一顿，将A吃剩的香蕉夺过来，但是，此刻的香蕉成了匹夫怀里的宝玉，得到它的猴子虽然可以享受美味，但付出的代价也是巨大的。 实验人员不断放入香蕉，却发现战斗比以前更激烈了。分析清楚原因后，他们用木头做了一个假香蕉扔进了笼子。此时猴子们已经学聪明了，它们知道触摸香蕉可以享淋浴，而试图独占香蕉则会遭到痛扁。于是，一个新的现象出现了，当猴子们有冲凉的需要时，会有一只猴子将香蕉拿起来，而当它发现有遭到攻击的可能时，它会马上放下香蕉逃到一边去。这样，猴子们都能冲凉，但是又不至于再象以前那样N败俱伤。 (没有猴子发现那个香蕉是假的。)

<strong>－信仰的起源－</strong>
五只猴子A、B、C、D、E三个阶级快乐地生活了很久。他们精确的给出了三个阶级的定义，即吃香阶级、拿香阶级和干看着阶级。 可惜猴子A由于长期的水中作业无可避免地引发了它肺部功能的衰竭。一天他在例行的拿香蕉作业中跌倒了就再也没有爬起来。于是实验人员又送进了一只同样孔武有力的猴F ，当然他还是对屋顶的香蕉很有兴趣。不幸的是他最终以微弱的劣势被以C为首的群猴再次K。第二天，又到了拿香蕉的时候，猴子C很无所谓，反正他还要吃香蕉，反正他不会被水淋到，真正恐慌的是B、D、E三猴。F是那么的健壮，他们这些媳妇是熬不成婆了。他们将面临一个艰难的抉择，谁该去步A的后尘? 猴子B、D、E展开了激烈的争论，讨论谁最应该做下一个拿香阶级。猴子F很奇怪也很好奇，什么叫“拿香阶级”呢？猴子B、D、E解释道：所谓“拿香阶级”就是猴子界勇敢者的阶级，需具备一不怕苦二不怕死的大无畏精神方能得此殊荣。猴子F闻听不禁有些神往，有些跃跃欲试。当然他最终达到了目的，作了唯一的拿香阶级。再后来，B、D、E三猴陆续被换出局，换来的猴子个个健壮如C ，他们继续大大出手，不过目标不是香蕉，而是那个唯一的拿香阶级。于是信仰也出现了

<strong>－迷信的起源－</strong>
后来Ａ终于被好心的实验人员拉出了苦海。新来了猴子F。 Ｃ觉得有必要维护自己的阶级地位，Ｂ、Ｄ、Ｅ则生怕自己顶了Ａ的缸……在各种复杂心情的作用下，B、Ｄ、Ｅ在Ｃ的带领下爆扁了F一顿，然后强令Ｆ做拿香蕉阶级。 Ｆ开始不乐意，后来慢慢在Ｂ等的劝说下等“待多年的媳妇熬成婆”这一宿命。 慢慢的老资格的Ｂ、Ｄ、Ｅ猴子渐渐被淘汰，Ｃ发现自己在体力上不再占有优势，很难再通过武力让这一游戏规则继续下去，觉得十分苦恼。这时，一只最有希望升级为吃香蕉阶级（暨Ｃ的理所当然接班人）也是Ｃ谋臣的Ｈ向Ｃ进言。于是君臣定计。Ｈ开始依靠自己多懂几种猴语而在其他若干猴面前树立的权威形象向其他猴鼓吹：“每一只新来笼子的猴子都是有罪的，这种罪责来自血统。……只有摘香蕉的猴子才能被（实验人员）送到天堂。” 事实上，因为被水冲很容易得肺炎病倒而被实验人员淘汰掉，猴子们不知道反而以为被淘汰的猴子真的进了天堂。渐渐，猴子都相信了这套理论，并且讲给每一只新猴子听。然后就这么流传下去越传越神奇。以至于后来摘香蕉阶级的猴子都为了能摘香蕉而大打出手。……这些都是Ｃ没有想到，Ｈ没有看到的，那时他们都已经死了。然而迷信就这么诞生了。
]]></content>
    
    <summary type="html">
    
      &lt;strong&gt;- 道德的起源 -&lt;/strong&gt;
把五只猴子关在一个笼子里，上头有一串香蕉实验人员装了一个自动装置,一旦侦测到有猴。子要去拿香蕉，马上就会有水喷向笼子而这五只猴子都会一身湿. 首先有只猴子想去拿香。蕉，当然，结果就是每只猴子都淋湿了. 之後每只猴子在几次的尝试
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
      <category term="猴子" scheme="http://wdicc.com/tags/%E7%8C%B4%E5%AD%90/"/>
    
  </entry>
  
  <entry>
    <title>命令行发送有附件的邮件</title>
    <link href="http://wdicc.com/send-mail-with-attachment/"/>
    <id>http://wdicc.com/send-mail-with-attachment/</id>
    <published>2008-11-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[命令行下面发送邮件比较简单，恐怕都会使用。

<pre class="prettyprint lang-bash">
$ echo "hello .. " | mail -s subject xxx@abc.com
$ cat /path/to/file | mail -s subject xxx@abc.com
$ mail -s subject xxx@abc.com << EOF
hi
the end..
EOF
</pre>

上面这些方法都可以发送邮件。还有一种方法。

<pre class="prettyprint lang-bash">
$ cat a.txt
Subject: test
From: xxx@abc.com
To: xxx@abc.com

hi
sdfsdfsdf
the end.
$ cat a.txt | sendmail -t
</pre>

这样可以把邮件头信息写到文件里面的，你也可以用 php，perl 来打印类似的信息给 sendmail -t ，让他来发。

那么如果有附件应该怎么办？可以使用 uuencode。

<pre class="prettyprint lang-bash">
$ uuencode a.txt a.txt | mail -s test xxx@abc.com
$ (cat a.txt; uuencode b.txt b.txt; cat c.txt) |sendmail -t
</pre>

应该说的很明白了吧？
]]></content>
    
    <summary type="html">
    
      命令行下面发送邮件比较简单，恐怕都会使用。

&lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
$ echo &quot;hello .. &quot; | mail -s subject xxx@abc.com
$ cat /path/to/file | mail -s su
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="sendmail" scheme="http://wdicc.com/tags/sendmail/"/>
    
  </entry>
  
  <entry>
    <title>lyx 的中文化</title>
    <link href="http://wdicc.com/lyx-unicode-howto/"/>
    <id>http://wdicc.com/lyx-unicode-howto/</id>
    <published>2008-11-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[lyx 可以认为是一个 latex 的所见即所得的编辑工具。

先来搞定 latex 的中文。latex 的中文配置是千奇百怪的，怎么配的都有。看到那些帖子真的很头疼，不知道从哪里下手好。最近从 linuxsir gentoo 的论坛上面看到了一个简单的配置方法，总算我也可以使用 latex 生成支持中英文混排的 pdf 文件了。

首先需要安装 dev-tex/zhspacing(gentoo-china-overlay) 和 dev-texlive/texlive-fontsrecommended 这两个包，会依赖安装一些别的包。

此后就可以使用 xelatex 命令来编译 tex 文件了。如果没有 simsun simhei 那些字体，就还需要下面的操作。
<pre class="prettyprint lang-latex">
\usepackage{fontspec}
\newfontfamily\zhfont[BoldFont=Microsoft YaHei]{Microsoft YaHei} %设置中文
\newfontfamily\zhpunctfont{Microsoft YaHei} % 设置中文
%\makeglossary

\setmainfont{Consolas}           %这里设置英文衬线字体
\setmonofont{Consolas}                     %英文等宽字体
\setsansfont{Consolas}               %英文无衬线字体

\usepackage{zhspacing}
\zhspacing
\begin{document}
中Eng文混排，“标点压缩”，间 距 调 整 ……
\end{document}</pre>
里面那几行有注释的，就是用来设置字体的。设置为 fc-list 列表里面的一个或者几个字体，然后使用 xelatex xx.tex 命令来编译你的 tex 文件，是不是生成了相应的 pdf？可以去看看里面的中文英文是不是都正常显示了。

接下来配置 lyx。我参考了<a href="http://blog.bs2.to/post/EdwardLee/8545" target="_blank" rel="external">这个</a>文章，新建一个文档，设置几个地方。

文档-&gt; 首选项-&gt; 语言 使用 utf8。

文档-&gt; 首选项-&gt; latex序 添加下面的内容。
<pre class="prettyprint lang-latex">
\newfontfamily\zhfont[BoldFont=Microsoft YaHei]{Microsoft YaHei} %设置中文
\newfontfamily\zhpunctfont{Microsoft YaHei} % 设置中文
%\makeglossary

\setmainfont{Consolas}           %这里设置英文衬线字体
\setmonofont{Consolas}                     %英文等宽字体
\setsansfont{Consolas}               %英文无衬线字体

\usepackage{zhspacing}
\zhspacing</pre>
我还设置了保存为文档缺省设置，这样新编辑的文件就不用设置了，当然也可以保存成模板，这样每次加载这个模板就可以了。

还需要设置

lyx 可以认为是一个 latex 的所见即所得的编辑工具。

先来搞定 latex 的中文。latex 的中文配置是千奇百怪的，怎么配的都有。看到那些帖子真的很头疼，不知道从哪里下手好。最近从 linuxsir gentoo 的论坛上面看到了一个简单的配置方法，总算我也可以使用 latex 生成支持中英文混排的 pdf 文件了。

首先需要安装 dev-tex/zhspacing(gentoo-china-overlay) 和 dev-texlive/texlive-fontsrecommended 这两个包，会依赖安装一些别的包。

此后就可以使用 xelatex 命令来编译 tex 文件了。如果没有 simsun simhei 那些字体，就还需要下面的操作。
<pre class="prettyprint lang-latex">
\usepackage{fontspec}
\newfontfamily\zhfont[BoldFont=Microsoft YaHei]{Microsoft YaHei} %设置中文
\newfontfamily\zhpunctfont{Microsoft YaHei} % 设置中文
%\makeglossary

\setmainfont{Consolas}           %这里设置英文衬线字体
\setmonofont{Consolas}                     %英文等宽字体
\setsansfont{Consolas}               %英文无衬线字体

\usepackage{zhspacing}
\zhspacing
\begin{document}
中Eng文混排，“标点压缩”，间 距 调 整 ……
\end{document}</pre>
里面那几行有注释的，就是用来设置字体的。设置为 fc-list 列表里面的一个或者几个字体，然后使用 xelatex xx.tex 命令来编译你的 tex 文件，是不是生成了相应的 pdf？可以去看看里面的中文英文是不是都正常显示了。

接下来配置 lyx。我参考了<a href="http://blog.bs2.to/post/EdwardLee/8545" target="_blank" rel="external">这个</a>文章，新建一个文档，设置几个地方。

文档-&gt; 首选项-&gt; 语言 使用 utf8。

文档-&gt; 首选项-&gt; latex序 添加下面的内容。
<pre class="prettyprint lang-latex">
\newfontfamily\zhfont[BoldFont=Microsoft YaHei]{Microsoft YaHei} %设置中文
\newfontfamily\zhpunctfont{Microsoft YaHei} % 设置中文
%\makeglossary

\setmainfont{Consolas}           %这里设置英文衬线字体
\setmonofont{Consolas}                     %英文等宽字体
\setsansfont{Consolas}               %英文无衬线字体

\usepackage{zhspacing}
\zhspacing</pre>
我还设置了保存为文档缺省设置，这样新编辑的文件就不用设置了，当然也可以保存成模板，这样每次加载这个模板就可以了。

还需要设置 工具-&gt;首选项-&gt;file handling-&gt;转换器 这里的 latex(pdflatex)-&gt;PDF(pdflatex) 这项，然后设置 转换器 为 xelatex $$i 。点击那个修改按钮，保存，应用。

这样，以后写好文件，点那个 pdf 的图标就可以直接预览到 pdf 文件啦。
]]></content>
    
    <summary type="html">
    
      lyx 可以认为是一个 latex 的所见即所得的编辑工具。

先来搞定 latex 的中文。latex 的中文配置是千奇百怪的，怎么配的都有。看到那些帖子真的很头疼，不知道从哪里下手好。最近从 linuxsir gentoo 的论坛上面看到了一个简单的配置方法，总算我也可以使用
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="latex" scheme="http://wdicc.com/tags/latex/"/>
    
      <category term="lyx" scheme="http://wdicc.com/tags/lyx/"/>
    
      <category term="pdf" scheme="http://wdicc.com/tags/pdf/"/>
    
  </entry>
  
  <entry>
    <title>说说 vpn</title>
    <link href="http://wdicc.com/vpnc-howto/"/>
    <id>http://wdicc.com/vpnc-howto/</id>
    <published>2008-11-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[好久没更新了，最近改了改 vpnc 的设置，就发一个吧。

有些公司启用了 vpn 来让员工可以访问到公司内网的一些信息，或者让员工访问公司服务器的时候更加安全。一般可以用 cisco 的硬件 vpn 来搞定，也可以用 linux 下面的 openvpn 之类软件来构建一个 vpn server。

构建 vpn server 咱没搞过，我们公司用的是 cisco 的产品。连接 vpn server 的 client 有 vpnc 和 openvpn 什么的。

我使用的是 vpnc。networkmanager 还有他的插件（当然，也有 openvpn 的），就是说你可以做到点点鼠标就连接上你的 vpn。不过我这里没用他，因为他缺少一些 vpnc 配置文件支持的配置项，曾经还修改过 net-misc/networkmanager-vpnc 0.6.4 的源代码，来做到支持我的 vpn server，后来发现图形界面的不可靠，有时候连不上，一些错误信息还看不到。升级到了 0.7 之后，也一直懒得改源代码，字符界面的用起来也不错。图形界面一定要改，因为我不能让他记住密码我们的密码是一个 pin 码 + token 生成的，token 是变化的。而有个 group 密码是必须要记住的，因为这个又长又没有规律。图形界面没办法实现这个组合，只能修改源代码硬写到代码里面。

vpnc 的配置文件在 /etc/vpnc/ 下面。这里面有个 default.conf，当然你也可以写自己的 xxx.conf。如果执行 sudo vpnc xxx，那么用到的就是 xxx.conf，如果没有参数，那么使用 default.conf。
<pre class="prettyprint lang-conf">
# example vpnc configuration file
# see vpnc --long-help for details

#Interface name tun0
#IKE DH Group dh2
#Perfect Forward Secrecy nopfs

# You may replace this script with something better
Script /etc/vpnc/custom-script

IPSec gateway vpn.xxx.com
IPSec ID General
IPSec secret xxxxxx
Xauth username wd
NAT Traversal Mode cisco-udp
#Xauth password</pre>
gateway 就是你的 vpn server 的地址，IPSec secret 就是我说的 group pwd，Xauth password 是你的密码。还可以加上 debug level xxx 来显示 debug 信息，xxx 是一个数字，越大信息越多。

注意里面有个 script 行，这个就是最近修改的一个参数。有时候使用 vpn 可能只是需要连接一下公司的服务器而已，我可不想让他作为我的默认路由，比如我在开 bt 下载的时候如果用了 vpn 作%
]]></content>
    
    <summary type="html">
    
      好久没更新了，最近改了改 vpnc 的设置，就发一个吧。

有些公司启用了 vpn 来让员工可以访问到公司内网的一些信息，或者让员工访问公司服务器的时候更加安全。一般可以用 cisco 的硬件 vpn 来搞定，也可以用 linux 下面的 openvpn 之类软件来构建一个 vp
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="cisco" scheme="http://wdicc.com/tags/cisco/"/>
    
      <category term="vpn" scheme="http://wdicc.com/tags/vpn/"/>
    
      <category term="vpnc" scheme="http://wdicc.com/tags/vpnc/"/>
    
  </entry>
  
  <entry>
    <title>linux 下面同步 palm 手机</title>
    <link href="http://wdicc.com/palm-in-linux/"/>
    <id>http://wdicc.com/palm-in-linux/</id>
    <published>2008-10-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[plam 是万能的，呵呵。

主要参考了 gentoo wiki 上面的<a href="http://gentoo-wiki.com/Category:Palm" target="_blank">几篇文章</a>。编译好内核，然后 modprobe visor ，接着按hotsync同步按钮。此时可以看到 dmesg 的输出。

<pre class="prettyprint lang-txt">
usb 2-2: new full speed USB device using uhci_hcd and address 6
usb 2-2: configuration #1 chosen from 1 choice
visor 2-2:1.0: Handspring Visor / Palm OS converter detected
usb 2-2: Handspring Visor / Palm OS converter now attached to ttyUSB0
usb 2-2: Handspring Visor / Palm OS converter now attached to ttyUSB1</pre>

然后还需要建立一个 udev 的 rule。

<pre class="prettyprint lang-txt">
$ cat /etc/udev/rules.d/10-palm.rules 
# PalmOne Tungsten T3
BUS=="usb",SYSFS{serial}=="PalmSN12345678", KNERNEL="ttyUSB*",OWNER="root",GROUP="plugdev",MODE="0666",SYMLINK="pilot", RUN="/bin/su - wd -c '/usr/bin/jpilot -s'"
#BUS="usb", SYSFS{product}="Palm Handheld*", KERNEL="ttyUSB*", MODE="666", SYMLINK="pilot", RUN="/bin/su - wd -c '/usr/bin/jpilot -s'"
</pre>

注意里面那个 serial，如果你不知道你的，或许可以用下面的那个 product。其实也可以查看 /proc/bus/usb/devices 来获取上面那些 serial 或者 product 信息的。仔细找找。另外还需要修改那个 wd 为你自己的用户名。

然后还需要装一个 jpilot 这个软件。需要先设置一下首选项，设置设备是 /dev/ttyUSB1 。以后同步的时候，只需要先启动 jpilot，然后按那个hotsync同步按钮就行了。还可以装软件，呵呵，不过似乎没办法选择装卡上还是手机上，估计都是手机上面了。
]]></content>
    
    <summary type="html">
    
      plam 是万能的，呵呵。

主要参考了 gentoo wiki 上面的&lt;a href=&quot;http://gentoo-wiki.com/Category:Palm&quot; target=&quot;_blank&quot;&gt;几篇文章&lt;/a&gt;。编译好内核，然后 modprobe visor ，接着按hots
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="handspring" scheme="http://wdicc.com/tags/handspring/"/>
    
      <category term="hotsync" scheme="http://wdicc.com/tags/hotsync/"/>
    
      <category term="jpilot" scheme="http://wdicc.com/tags/jpilot/"/>
    
      <category term="plam" scheme="http://wdicc.com/tags/plam/"/>
    
      <category term="visor" scheme="http://wdicc.com/tags/visor/"/>
    
  </entry>
  
  <entry>
    <title>oracle 里面 kill session</title>
    <link href="http://wdicc.com/kill-session-in-oracle/"/>
    <id>http://wdicc.com/kill-session-in-oracle/</id>
    <published>2008-10-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[eygle <a href="http://www.eygle.com/faq/Kill_Session.htm" target="_blank">有篇文章</a>讲了这个，之前也看过。昨天实际操作了一下。

因为如 eygle 所讲，kill 了 session 之后，操作系统里面的进程资源有时候不一定会立即释放，所以最好在 kill 之前就找到系统的进程 id，这样，如果不释放的时候，可以直接kill。省的之后找起来麻烦。

昨天操作的时候有这么几个步骤
<ol>
	<li>select * from v$session where username like 'UP' --先找到这个用户的 session。</li>
	<li>select * from v$sql a, v$session b where b.username = 'UP' and a.sql_id = b.sql_id --找出来这个用户这些 session 对应的 sql 语句，好确认 session 的 id。</li>
	<li>select * from v$process a, v$session b where a.addr = b.paddr and b.username like 'UP' and b.sid = xxx --找出来他的系统进程id，就是那个 spid。</li>
	<li>ALTER SYSTEM KILL SESSION 'sid, serial#' --可以实施kill了，可能会提示你marked for kill，有必要的话，在os级别kill前面找出来的 spid。</li>
</ol>
]]></content>
    
    <summary type="html">
    
      eygle &lt;a href=&quot;http://www.eygle.com/faq/Kill_Session.htm&quot; target=&quot;_blank&quot;&gt;有篇文章&lt;/a&gt;讲了这个，之前也看过。昨天实际操作了一下。

因为如 eygle 所讲，kill 了 session 之后，操作系统
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="session" scheme="http://wdicc.com/tags/session/"/>
    
  </entry>
  
  <entry>
    <title>域名终于搞回来了</title>
    <link href="http://wdicc.com/wdicc-com-is-return/"/>
    <id>http://wdicc.com/wdicc-com-is-return/</id>
    <published>2008-09-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[历经周折，总算把域名弄回来了。我还是喜欢 wdicc.com 多过 wdicc.cn。呵呵。顺便鄙视一下 xh 这头猪，差点把我的域名弄丢。
]]></content>
    
    <summary type="html">
    
      历经周折，总算把域名弄回来了。我还是喜欢 wdicc.com 多过 wdicc.cn。呵呵。顺便鄙视一下 xh 这头猪，差点把我的域名弄丢。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>搜索引擎比较</title>
    <link href="http://wdicc.com/compare-search-engines/"/>
    <id>http://wdicc.com/compare-search-engines/</id>
    <published>2008-09-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前两天wii的放电视上面那个红外发射器的线断了，就搜索了一下看能不能修好。结果在 google.cn 搜到一条相关结果。今天看到 youdao.com 上线的消息，就兴起把各个搜索引擎都测试了一下。抓图如下。

百度的结果似乎和“断了”没有关系，这也敢号称最懂中文？三个关键字就sb了，垃圾一个。

<a href="http://pic.yupoo.com/wdicc/321736367295/8lb7ro0u.jpg" target="_blank" rel="external"><img class="alignnone" title="百度的结果" src="http://pic.yupoo.com/wdicc/321736367295/8lb7ro0u.jpg" alt="" width="1009" height="1551"></a>

yahoo.cn 的结果也不是我想要的，不过至少“断了”这个关键字出来了。。。

<a href="http://pic.yupoo.com/wdicc/297556367294/9roy8wm3.jpg" target="_blank" rel="external"><img class="alignnone" title="yahoo.cn的结果" src="http://pic.yupoo.com/wdicc/297556367294/9roy8wm3.jpg" alt="" width="548" height="1024"></a>

youdao 的结果比较来说好像是最好的了，里面我需要的不少。

<a href="http://pic.yupoo.com/wdicc/115486367294/eadyj9iz.jpg" target="_blank" rel="external"><img class="alignnone" title="有道搜索的结果" src="http://pic.yupoo.com/wdicc/115486367294/eadyj9iz.jpg" alt="" width="1009" height="1663"></a>

google.cn 的结果第一条很符合我的要求，不过后面的。。怎么还出来psp了？。。。

<a href="http://pic.yupoo.com/wdicc/477506367294/slrxdfz8.jpg" target="_blank" rel="external"><img class="alignnone" title="google.cn 的结果" src="http://pic.yupoo.com/wdicc/477506367294/slrxdfz8.jpg" alt="" width="1009" height="1259"></a>

不完全测试，仅作为消遣用，呵呵。
]]></content>
    
    <summary type="html">
    
      前两天wii的放电视上面那个红外发射器的线断了，就搜索了一下看能不能修好。结果在 google.cn 搜到一条相关结果。今天看到 youdao.com 上线的消息，就兴起把各个搜索引擎都测试了一下。抓图如下。

百度的结果似乎和“断了”没有关系，这也敢号称最懂中文？三个关键字就s
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="搜索引擎" scheme="http://wdicc.com/tags/%E6%90%9C%E7%B4%A2%E5%BC%95%E6%93%8E/"/>
    
  </entry>
  
  <entry>
    <title>超强的rtorrent</title>
    <link href="http://wdicc.com/supper-rtorrent/"/>
    <id>http://wdicc.com/supper-rtorrent/</id>
    <published>2008-09-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[越狱又开始了，没周末总要下一个看看。之前用 delug，速度还行，用起来感觉不错。可是自从 1.0rc 的某个版本之后，下载的时候时不时出现 CPU 100% 的情况。就装了 transmisstion，他不支持 dht，国内的下载速度很慢，去下国外的好像还行。

今天又试了一下 rtorrent，之前也用过，不过速度总上不来让人很郁闷。rtorrent 从某个版本就开始支持 dht 了，我之前使用的时候不知道从哪里去看这个支持，速度很慢，基本就不用了。今天总算发现了问题在哪里。

rtorrent 的配置文件是 ~/.rtorrent.rc ，例如我的。
<pre class="prettyprint lang-ini">
# ~/.rtorrent.rc and enable/modify the options as needed. Remember to
# uncomment the options you wish to enable.

# Maximum and minimum number of peers to connect to per torrent.
min_peers = 40
max_peers = 200

# Same as above but for seeding completed torrents (-1 = same as downloading)
#min_peers_seed = 10
#max_peers_seed = 50

# Maximum number of simultanious uploads per torrent.
#max_uploads = 15

# Global upload and download rate in KiB. "0" for unlimited.
#download_rate = 0
upload_rate = 30

# Default directory to save the downloaded torrents.
directory = /movie/download

# Default session directory. Make sure you don't run multiple instance
# of rtorrent using the same session directory. Perhaps using a
# relative path?
session = ./rtorrent-session

# Watch a directory for new torrents, and stop those that have been
# deleted.
#schedule = watch_directory,5,5,load_start=./watch/*.torrent
#schedule = untied_directory,5,5,stop_untied=

# Close torrents when diskspace is low.
#schedule = low_diskspace,5,60,close_low_diskspace=100M

# Stop torrents when reaching upload ratio in percent,
# when also reaching total upload in bytes, or when
# reaching final upload ratio in percent.
# example: stop at ratio 2.0 with at least 200 MB uploaded, or else ratio 20.0
#schedule = ratio,60,60,"stop_on_ratio=200,200M,2000"

# The ip address reported to the tracker.
#ip = 127.0.0.1
#ip = rakshasa.no

# The ip address the listening socket and outgoing connections is
# bound to.
#bind = 127.0.0.1
#bind = rakshasa.no

# Port range to use for listening.
port_range = 18204-19203

# Start opening ports at a random position within the port range.
#port_random = yes

# Check hash for finished torrents. Might be usefull until the bug is
# fixed that causes lack of diskspace not to be properly reported.
#check_hash = no

# Set whetever the client should try to connect to UDP trackers.
use_udp_trackers = yes

# Alternative calls to bind and ip that should handle dynamic ip's.
#schedule = ip_tick,0,1800,ip=rakshasa
#schedule = bind_tick,0,1800,bind=rakshasa

# Encryption options, set to none (default) or any combination of the following:
# allow_incoming, try_outgoing, require, require_RC4, enable_retry, prefer_plaintext
#
# The example value allows incoming encrypted connections, starts unencrypted
# outgoing connections but retries with encryption if they fail, preferring
# plaintext to RC4 encryption after the encrypted handshake
#
encryption = allow_incoming,enable_retry,prefer_plaintext

# Enable DHT support for trackerless torrents or when all trackers are down.
# May be set to "disable" (completely disable DHT), "off" (do not start DHT),
# "auto" (start and stop DHT as needed), or "on" (start DHT immediately).
# The default is "off". For DHT to work, a session directory must be defined.
#
dht = on

# UDP port to use for DHT.
#
dht_port = 18203

# Enable peer exchange (for torrents not marked private)
#
peer_exchange = yes

#
# Do not modify the following parameters unless you know what you're doing.
#

# Hash read-ahead controls how many MB to request the kernel to read
# ahead. If the value is too low the disk may not be fully utilized,
# while if too high the kernel might not be able to keep the read
# pages in memory thus end up trashing.
#hash_read_ahead = 10

# Interval between attempts to check the hash, in milliseconds.
#hash_interval = 100

# Number of attempts to check the hash while using the mincore status,
# before forcing. Overworked systems might need lower values to get a
# decent hash checking rate.
#hash_max_tries = 10

encoding_list = UTF-8</pre>
里面最主要的是 dht=on 和 session，这两个同时启用，才能让 dht 生效，因为 dht 需要保存 dht table 到这个路径下面。配置好之后，去 tracker list 里面看，应该多了一个 dht:// ，这就o了，还有些其他信息，可以自己琢磨琢磨。
]]></content>
    
    <summary type="html">
    
      越狱又开始了，没周末总要下一个看看。之前用 delug，速度还行，用起来感觉不错。可是自从 1.0rc 的某个版本之后，下载的时候时不时出现 CPU 100% 的情况。就装了 transmisstion，他不支持 dht，国内的下载速度很慢，去下国外的好像还行。

今天又试了一下
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="rtorrent" scheme="http://wdicc.com/tags/rtorrent/"/>
    
  </entry>
  
  <entry>
    <title>ATI 显卡双头显示配置</title>
    <link href="http://wdicc.com/ati-dual-head/"/>
    <id>http://wdicc.com/ati-dual-head/</id>
    <published>2008-09-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[参考自<a href="http://gentoo-wiki.com/HOWTO_Dual_Monitors#ATI" target="_blank">这里</a> 。

双头就是接第二个显示器，或者接投影仪什么的，ati 里面叫做 bigdesktop，nvidia 叫做 twinview ，intel 的不太清楚，我记得好像也有个自己的名字。

Nvidia 的官方驱动有 twinview 的支持，图形界面下面配置起来似乎也不是很难。 ATI 的官方驱动支持的是 bigdesktop ，也有图形界面，不过那个界面很恶心，经常出现问题，不过可以试着删除 <a href="http://wdicc.cn/howto-reset-ati-fglrx-settings/" target="_blank">/etc/ati/amdpcsdb</a> 文件试试看。

下面是一个 bigdesktop 的 xorg.conf 文件。
<pre class="prettyprint lang-conf">Section "ServerLayout">
	Identifier     "Default Layout"
	Screen         "Default Screen" 0 0
	InputDevice    "Generic Keyboard"
	InputDevice    "Configured Mouse"
	InputDevice    "Synaptics Touchpad"
EndSection

Section "ServerFlags"
	Option	    "AIGLX" "off"
	#Option	    "AIGLX" "true"
EndSection

Section "Module"
	load "dbe"
EndSection

Section "InputDevice"
	Identifier  "Generic Keyboard"
	Driver      "kbd"
	Option	    "CoreKeyboard"
	Option	    "XkbRules" "xorg"
	Option	    "XkbModel" "pc104"
	Option	    "XkbLayout" "us"
	#Option "XkbOptions" "ctrl:nocaps"
EndSection

Section "InputDevice"
	Identifier  "Configured Mouse"
	Driver      "mouse"
	Option	    "CorePointer"
	Option	    "Device" "/dev/input/mice"
	Option	    "Protocol" "ImPS/2"
	Option	    "Emulate3Buttons" "true"
EndSection

Section "InputDevice"
	Identifier  "Synaptics Touchpad"
	Driver      "synaptics"
	Option	    "SendCoreEvents" "true"
	Option	    "Device" "/dev/psaux"
#	Option	    "Protocol" "auto-dev"
	Option	    "HorizScrollDelta" "0"
EndSection

Section "Monitor"
	Identifier   "Generic Monitor"
	HorizSync    28.0 - 51.0
	VertRefresh  43.0 - 60.0
	Option	    "DPMS"
EndSection

Section "Device"
	Option	    "DesktopSetup" "horizontal" #Enable Big Desktop
	Option	    "Mode2" "1280x1024" #Resolution for second monitor
	Option	    "VideoOverlay" "on"
	Option	    "OpenGLOverlay" "off"
	Identifier  "Generic Video Card"
	Option "XAANoOffscreenPixmaps" "true"
	Driver      "fglrx"
	Option		"DRI" "true"
EndSection

Section "Screen"
	Identifier "Default Screen"
	Device     "Generic Video Card"
	Monitor    "Generic Monitor"
	DefaultDepth     24
	SubSection "Display"
		Modes    "1024x768"
	EndSubSection
EndSection

Section "Extensions"
	Option	    "Composite" "Disable"
	#Option	    "Composite" "enable"
EndSection

Section "DRI"
	Group 0
	Mode 0666
EndSection</pre>
比较简单，只需要在 device 里面设置好就行了。

用 ati 的开源驱动，也可以双头显示。用下面的 xorg.conf 。
<pre class="prettyprint lang-conf">Section "ServerLayout">
	Identifier     "Default Layout"
	Screen         "Default Screen"
	InputDevice    "Generic Keyboard"
	InputDevice    "Configured Mouse"
	InputDevice    "Synaptics Touchpad"
EndSection

Section "ServerFlags"
	Option	    "AIGLX" "off"
	#Option	    "AIGLX" "true"
EndSection

Section "Module"
	load "dbe"
EndSection

Section "InputDevice"
	Identifier  "Generic Keyboard"
	Driver      "kbd"
	Option	    "CoreKeyboard"
	Option	    "XkbRules" "xorg"
	Option	    "XkbModel" "pc104"
	Option	    "XkbLayout" "us"
	#Option "XkbOptions" "ctrl:nocaps"
EndSection

Section "InputDevice"
	Identifier  "Configured Mouse"
	Driver      "mouse"
	Option	    "CorePointer"
	Option	    "Device" "/dev/input/mice"
	Option	    "Protocol" "ImPS/2"
	Option	    "Emulate3Buttons" "true"
EndSection

Section "InputDevice"
	Identifier  "Synaptics Touchpad"
	Driver      "synaptics"
	Option	    "SendCoreEvents" "true"
	Option	    "Device" "/dev/psaux"
#	Option	    "Protocol" "auto-dev"
	Option	    "HorizScrollDelta" "0"
EndSection

Section "Monitor"
    	Identifier      "Integrated LCD"
	 Option      "DPMS"
EndSection

Section "Monitor"
	Identifier      "External VGA"
	Option "RightOf" "Integrated LCD"
	 Option      "DPMS"
EndSection

Section "Device"
	Identifier  "Generic Video Card"
	Driver		"radeon"
#	# accelration
	Option          "AGPMode" "4"
	Option          "EnablePageFlip" "on"
	Option          "RenderAccel" "on"
	Option          "AccelMethod"   "EXA" # or XXA
	Option          "DynamicClocks" "on"
	Option		"DRI" "true"
        # Color Tiling
        Option          "ColorTiling"   "on"
    Option          "Monitor-VGA-0" "External VGA"
    Option          "Monitor-LVDS"  "Integrated LCD"
    # Option "XAANoOffscreenPixmaps" "true" # for composit
EndSection

Section "Screen"
	Identifier "Default Screen"
	Device     "Generic Video Card"
	Monitor    "Integrated LCD"
	DefaultDepth     24
	SubSection "Display"
		Modes    "1280x1024" "1024x768"
		Virtual 2304 1024
	EndSubSection
EndSection

Section "Extensions"
	Option	    "Composite" "Disable"
	#Option	    "Composite" "enable"
EndSection

Section "DRI"
	Group 0
	Mode 0666
EndSection</pre>
可以看到改动也不是很大，主要增加了两个显示器，device里面增加了这两个显示器的设置。另外 screen 里面增加了那个 virtual，这个的参数就是将来两个显示器总共的屏幕大小，我的是 1024+1280 x 1024 ，横向相加，竖向的取最大的。

ok，这样就可以了。注意这里没有用到最上面那个链接里面说的 MergedFB。似乎最新的 xorg 用 xrandr 实现了这个，所以 MergedFB 就不需要了。这有个好处，可以随时调整分辨率什么的。例如 xrandr --output VGA --off ，去掉第二个显示器。 xrandr --output VGA --right-of LVDS ，设置 bigdesktop等等。xrandr 的方法还可以参考<a href="http://wiki.debian.org/XStrikeForce/HowToRandR12" target="_blank">这里</a>。

升级到 xorg 1.5.3 以后，鼠标键盘的设置可以不在这里了，所以更加简单。
<pre class="prettyprint lang-text">

# xorg.conf (xorg X Window System server configuration file)
#
# This file was generated by dexconf, the Debian X Configuration tool, using
# values from the debconf database.
#
# Edit this file with caution, and see the xorg.conf manual page.
# (Type "man xorg.conf" at the shell prompt.)
#
# This file is automatically updated on xserver-xorg package upgrades *only*
# if it has not been modified since the last upgrade of the xserver-xorg
# package.
#
# If you have edited this file but would like it to be automatically updated
# again, run the following command:
#   sudo dpkg-reconfigure -phigh xserver-xorg

Section "ServerFlags"
	#Option	    "AIGLX" "off"
	Option	    "AIGLX" "true"
EndSection

Section "Module"
	load "dri"
EndSection

Section "Monitor"
    	Identifier      "Integrated LCD"
	Option      "DPMS"
EndSection

Section "Monitor"
	Identifier      "External VGA"
	Option "RightOf" "Integrated LCD"
	Option      "DPMS"
EndSection

Section "Device"
	Identifier  "Generic Video Card"
	Driver		"radeon"
#	# accelration
	Option          "AGPMode" "8"
	Option          "EnablePageFlip" "on"
	Option          "RenderAccel" "on"
	Option          "AccelMethod"   "EXA" # or XXA
	Option          "DynamicClocks" "on"
	Option		"DRI" "true"
        # Color Tiling
        Option          "ColorTiling"   "on"
    Option          "Monitor-VGA-0" "External VGA"
    Option          "Monitor-LVDS"  "Integrated LCD"
EndSection

Section "Screen"
	Identifier "Default Screen"
	Device     "Generic Video Card"
	Monitor    "Integrated LCD"
	DefaultDepth     24
	SubSection "Display"
		Modes    "1280x1024" "1024x768"
		#Modes    "1024x768"
		Virtual 2048 1024
		Virtual 2304 1024
	EndSubSection
EndSection

Section "Extensions"
	#Option	    "Composite" "Disable"
	Option	    "Composite" "enable"
EndSection

Section "DRI"
	Group 0
	Mode 0666
EndSection</pre>
]]></content>
    
    <summary type="html">
    
      参考自&lt;a href=&quot;http://gentoo-wiki.com/HOWTO_Dual_Monitors#ATI&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt; 。

双头就是接第二个显示器，或者接投影仪什么的，ati 里面叫做 bigdesktop，nvidia 叫做 tw
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="bigdesktop" scheme="http://wdicc.com/tags/bigdesktop/"/>
    
      <category term="dual-head" scheme="http://wdicc.com/tags/dual-head/"/>
    
      <category term="twinview" scheme="http://wdicc.com/tags/twinview/"/>
    
      <category term="双头" scheme="http://wdicc.com/tags/%E5%8F%8C%E5%A4%B4/"/>
    
  </entry>
  
  <entry>
    <title>ORA-00257 和 ORA-19815</title>
    <link href="http://wdicc.com/ora-00257-and-ora-19815/"/>
    <id>http://wdicc.com/ora-00257-and-ora-19815/</id>
    <published>2008-09-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这几天遇到了这两个错误，记录一下。

使用 perl 的 DBI 连接的时候，会提示 ora-00257 错误，这个用 三qlplus 估计也是一样的错误，注意时远程连接才出错。

<pre class="prettyprint lang-txt">
CRITICAL : Can't connect "db8.sds.cnb.yahoo.com"</pre>

同时，数据库的alert 里面有下面的信息

<pre class="prettyprint lang-txt">
ORA-19815: WARNING: db_recovery_file_dest_size of 268435456000 bytes is 100.00% used, and has 0 remaining bytes available.
************************************************************************
You have following choices to free up space from flash recovery area:
1. Consider changing RMAN RETENTION POLICY. If you are using Data Guard,
   then consider changing RMAN ARCHIVELOG DELETION POLICY.
2. Back up files to tertiary device such as tape using RMAN
   BACKUP RECOVERY AREA command.
3. Add disk space and increase db_recovery_file_dest_size parameter to
   reflect the new space.
4. Delete unnecessary files using RMAN DELETE command. If an operating
   system command was used to delete files, then use RMAN CROSSCHECK and
   DELETE EXPIRED commands.
************************************************************************
ARCH: Archival stopped, error occurred. Will continue retrying
ORACLE Instance nirv3 - Archival Error</pre>

登陆上数据库看看

<pre class="prettyprint lang-txt">

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
archive_lag_target                   integer                0
log_archive_config                   string                 dg_config=(stb1)
log_archive_dest                     string
log_archive_dest_1                   string                 location="USE_DB_RECOVERY_FILE
log_archive_dest_10                  string
log_archive_dest_2                   string
log_archive_dest_3                   string
log_archive_dest_4                   string
log_archive_dest_5                   string
log_archive_dest_6                   string
log_archive_dest_7                   string

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
log_archive_dest_8                   string
log_archive_dest_9                   string
log_archive_dest_state_1             string                 ENABLE
log_archive_dest_state_10            string                 enable
log_archive_dest_state_2             string                 ENABLE
log_archive_dest_state_3             string                 enable
log_archive_dest_state_4             string                 enable
log_archive_dest_state_5             string                 enable
log_archive_dest_state_6             string                 enable
log_archive_dest_state_7             string                 enable
log_archive_dest_state_8             string                 enable

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
log_archive_dest_state_9             string                 enable
log_archive_duplex_dest              string
log_archive_format                   string                 %s_%t_%r_%a.arc
log_archive_local_first              boolean                TRUE
log_archive_max_processes            integer                4
log_archive_min_succeed_dest         integer                1
log_archive_start                    boolean                FALSE
log_archive_trace                    integer                0
standby_archive_dest                 string                 ?/dbs/arch

SQL&gt; select * from v$log;

    GROUP#    THREAD#  SEQUENCE#      BYTES    MEMBERS ARCHIV STATUS                           FIRST_CHANGE# FIRST_TIME
---------- ---------- ---------- ---------- ---------- ------ -------------------------------- ------------- ------------
         1          1     221250   52428800          1 YES    INACTIVE                            5082709437 05-SEP-08
         2          1     221252   52428800          1 NO     INACTIVE                            5082713458 05-SEP-08
         3          2     270972   52428800          1 YES    INACTIVE                            5082699510 05-SEP-08
         4          2     270975   52428800          1 NO     CURRENT                             5082713581 05-SEP-08
         9          1     221251   52428800          1 NO     INACTIVE                            5082712943 05-SEP-08
        10          2     270973   52428800          1 YES    INACTIVE                            5082705151 05-SEP-08
        11          1     221253   52428800          1 NO     CURRENT                             5082713765 05-SEP-08
        12          2     270974   52428800          1 NO     INACTIVE                            5082711887 05-SEP-08
        13          3     275581   52428800          1 NO     INACTIVE                            5082712519 05-SEP-08
        14          3     275582   52428800          1 NO     CURRENT                             5082713078 05-SEP-08
        15          3     275579   52428800          1 NO     INACTIVE                            5082710114 05-SEP-08

    GROUP#    THREAD#  SEQUENCE#      BYTES    MEMBERS ARCHIV STATUS                           FIRST_CHANGE# FIRST_TIME
---------- ---------- ---------- ---------- ---------- ------ -------------------------------- ------------- ------------
        16          3     275580   52428800          1 NO     INACTIVE                            5082711321 05-SEP-08

12 rows selected.

SQL&gt; ????select value from v$diag_info where name ='Diag Trace';

VALUE
------------------------------------------------------------------------------------------------------------------------------------------------------
/home/oracle/app/diag/rdbms/nirv/nirv3/trace

SQL&gt; select * from V$FLASH_RECOVERY_AREA_USAGE;

FILE_TYPE                                PERCENT_SPACE_USED PERCENT_SPACE_RECLAIMABLE NUMBER_OF_FILES
---------------------------------------- ------------------ ------------------------- ---------------
CONTROL FILE                                              0                         0               0
REDO LOG                                                  0                         0               0
ARCHIVED LOG                                            100                         0           13109
BACKUP PIECE                                              0                         0               0
IMAGE COPY                                                0                         0               0
FLASHBACK LOG                                             0                         0               0
FOREIGN ARCHIVED LOG                                      0                         0               0

7 rows selected.

SQL&gt; show parameter db_recovery_file_dest_size

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
db_recovery_file_dest_size           big integer            250G
SQL&gt; show parameter DB_RECOVERY_FILE_DEST

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
db_recovery_file_dest                string                 /sds/oradata
db_recovery_file_dest_size           big integer            250G
SQL&gt; alter system set db_recovery_file_dest_size=300G;  

System altered.

SQL&gt; show parameter DB_RECOVERY_FILE_DEST

NAME                                 TYPE                   VALUE
------------------------------------ ---------------------- ------------------------------
db_recovery_file_dest                string                 /sds/oradata
db_recovery_file_dest_size           big integer            300G
SQL&gt; select * from V$FLASH_RECOVERY_AREA_USAGE;

FILE_TYPE                                PERCENT_SPACE_USED PERCENT_SPACE_RECLAIMABLE NUMBER_OF_FILES
---------------------------------------- ------------------ ------------------------- ---------------
CONTROL FILE                                              0                         0               0
REDO LOG                                                  0                         0               0
ARCHIVED LOG                                          83.41                         0           13115
BACKUP PIECE                                              0                         0               0
IMAGE COPY                                                0                         0               0
FLASHBACK LOG                                             0                         0               0
FOREIGN ARCHIVED LOG                                      0                         0               0

7 rows selected.</pre>

可以看到空间是 83% 了，数据库应该就好了。不过这个是治标不治本的操作，需要把archive log删掉才行，具体怎么搞我也不会。。。汗。。
]]></content>
    
    <summary type="html">
    
      这几天遇到了这两个错误，记录一下。

使用 perl 的 DBI 连接的时候，会提示 ora-00257 错误，这个用 三qlplus 估计也是一样的错误，注意时远程连接才出错。

&lt;pre class=&quot;prettyprint lang-txt&quot;&gt;
CRITICAL : Can
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Apache优化之KeepAlive</title>
    <link href="http://wdicc.com/apache-keepalive/"/>
    <id>http://wdicc.com/apache-keepalive/</id>
    <published>2008-09-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[KeepAlive是在HTTP/1.1中定义的，用来保持客户机和服务器的长连接，执子之手与子偕老。通过减少建立TCP Session的次数来提高性能。常用的配置参数有{KeepAlive, KeepAliveTimeout, MaxKeepAliveRequests}。逐个说来：KeepAlive是决定开启KeepAlive支持；KeepAliveTimeout决定一 个KeepAlive的连接能保持多少时间，Timeout就尽快shutdown链接，若还有数据必须再建立新的连接 了；MaxKeepAliveRequests于KeepAliveTimeout相似，意思是服务多少个请求就shutdown连接。看个例子：
<pre class="prettyprint">
   KeepAliveTimeout 5</pre>
意思是说，打开KeepAlive，每个连接只保持5秒就中断。

对于KeepAlive的配置需要慎重，错误的参数可能导致严重的性能问题。一个高负载的Server，如果建立的很多长连接将无法继续服 务新的连接。因此需要根据server的性质调整KeepAliveTimeout或是MaxKeepAliveRequests的值。

例如：你的网页上有三幅图画2个外部javascript，他们都存放在你自己的server上。因此将 MaxKeepAliveRequests设置为7比较合适。3幅图2个js各一个link，网页本身一个link，还有firefox传说中的 favicon.ico。当然还是要有KeepAliveTimeout的。如果客户机用了该死的IE并且设置了某个该死的选项，IE是不会向服务器发送 HEAD请求查看图片（或是其他资源）是否过期的，而是直接使用本地图片。这个时候服务器是不会计算Request的(因为压根就没有Request 嘛)。再如果只有MaxKeepAliveRequests参数，服务器会默认等待5秒才结束KeepAlive连接。通常这5秒可能玩死一个高负载的服 务器(所以说这个社会需要闪婚...)。因此打开Firefox，启动Firebug，看看你的站究竟需要多少次请求，再决定KeepAlive吧。
]]></content>
    
    <summary type="html">
    
      KeepAlive是在HTTP/1.1中定义的，用来保持客户机和服务器的长连接，执子之手与子偕老。通过减少建立TCP Session的次数来提高性能。常用的配置参数有{KeepAlive, KeepAliveTimeout, MaxKeepAliveRequests}。逐个说来：
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>给超强二笔作的几个码表文件</title>
    <link href="http://wdicc.com/cqeb-mb/"/>
    <id>http://wdicc.com/cqeb-mb/</id>
    <published>2008-09-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[最近被忽悠玩上了二笔输入法，弄了几个码表。

一个是给 palm treo 650 的掌易用的，下载地址在 <a href="http://www.box.net/shared/22s9qp8s77" target="_blank">这里</a>。

treo 650 上面少几个键，所以做了下面的合并。

;与k键合并
,与m键合并
.与v键合并
/与q键合并
另外一个是 scim 用的，下载地址在 <a href="http://www.box.net/shared/0a2pn45rpt" target="_blank">这里</a>。

需要先安装 scim-tables ，直接复制到 /usr/share/scim/tables/ 下面就行。图标用了 scim-tables 里面的二笔的，名字叫 二笔*超强。
]]></content>
    
    <summary type="html">
    
      最近被忽悠玩上了二笔输入法，弄了几个码表。

一个是给 palm treo 650 的掌易用的，下载地址在 &lt;a href=&quot;http://www.box.net/shared/22s9qp8s77&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;。

treo 650 上面少几个
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="二笔" scheme="http://wdicc.com/tags/%E4%BA%8C%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>感动奥运</title>
    <link href="http://wdicc.com/gandong-aoyun/"/>
    <id>http://wdicc.com/gandong-aoyun/</id>
    <published>2008-08-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[转载自这里 http://www.my1510.cn/article.php?2ccc057193ec54ae

感动——奥运精神和风频吹
2008北京奥运圣火熄灭了，电视机天天重复着奥运夺冠的镜头，人们在激动过后回想奥运到底给我们带来了什么？是什么改变我们的生活？是不是金牌影响着我们的选择？还是选手背后鲜为人知的故事最激励我们的斗志。
奥运选手的故事和金牌相得益彰，演绎着“更快、更高、更强”，也给我们树立了一个顽强不屈的榜样，这些故事高高举起五环，照亮人们前进的路程。有梦想，就有希望；有奋斗，就会有奇迹。
赛艇女子单人单桨选手32岁的张秀云，在1996年亚特兰大奥运会上获得了银牌。2000年和2004年两届奥运会，她都获得了参赛资格，但因为有严重的 心脏病，两次都没有划出一桨无功而返。张秀云从没有放弃，又带着自己的梦想参加了北京奥运会。虽然她在决赛中，名列第四。赛后她说：“我已尽我所能。”
19日北京奥运会男子举重105公斤以上级的颁奖仪式上演了感人的一幕：该项目冠军、德国选手马·施泰纳把亡妻苏珊的照片和奥运金牌高高举起，让人们不仅 看到一个强壮的大力士，还深深感受到他对妻子深深的爱。这位德国大力士在比赛最后阶段上演大逆转，用一枚沉甸甸的奥运金牌来祭奠亡故的妻子，此情此景令人 不禁潸然泪下，成为北京奥运会上感人至深的一幕。去年7月的一起车祸夺去了施泰纳妻子苏珊的生命，从此施泰纳就一直随身带着苏珊的照片，高强度的艰苦训练 就成为施泰纳摆脱痛苦思念折磨的唯一途径。26岁的施泰纳在夺金后激动地表示，他的亡妻苏珊在比赛中一直陪伴着他，给予他夺金的勇气。他说：“我所有的期 盼就是苏珊在今天可以看到我的成功。我不是一个迷信的人，但我可以肯定的是，苏珊在注视着我，她在我的心里，给予我勇气和力量。这是一场献给苏珊的胜利。 ”马·施泰纳夺得的这枚奥运金牌不仅是德国16年来获得的第一枚奥运举重金牌，更证明了爱能创造奇迹。
帕蒂卡用一只手臂做到了常人用两只手都很难做到的事情。一个天生右下臂残疾的坚强姑娘，一个被誉为为乒乓球而生的波兰“维纳斯”。13日她代表波兰队与中 国香港队进行女团小组赛的第一轮比赛，虽然最终以微弱分差惜败。但比赛中，这位独臂女侠还是赢得了全场的尊敬和掌声。在波兰排名第三、世界排名第147位 的帕蒂卡，从7岁起就迷上了乒乓球，11岁参加残奥会，15岁赢得2004年雅典残奥会乒乓球冠军。今年她还在世乒赛首轮小组赛中打败了世界排名第六的新 加坡名将李佳薇，证明了自己的实力。虽然帕蒂卡最终没有取得本届奥运会女单的入场券，但她却得以代表波兰乒乓球女队参加女团比赛，同时也力求在残奥会上捍 卫金牌。
荷兰人范德韦登剃着光头，脑门两侧皮肤上各印着“ＮＥＤ”（荷兰的英文简称）三个字母。你再仔细看的话，会发现他头顶上有两个一元硬币大小的伤疤，说话喘 气的时候都会翕动。那两个触目惊心的伤疤，是白血病患者做化疗和骨髓移植的痕迹。不过，曾经的白血病患者，在8月21日成了北京奥运会男子10公里马拉松 游泳的冠军，这也是奥运会历史上首个男子马拉松游泳冠军。2001年，20岁的范德韦登被确诊患上了白血病，游泳生涯看似就要走向终点。“当你躺在医院 里，忍受着巨大的病痛，你简直就不会去想下个月，下个星期，乃至下个小时的事情，”获胜后的范德韦登说。“我从白血病上学到了什么？就是凡事要一步一步 来，要有耐心。”
8月20日，在刚刚结束的奥运会女子游泳10公里马拉松比赛中，来自南非的独腿女侠纳塔莉-杜托伊特没能获得奖牌，也没能跻身前十名，但是所有人都对她表 示钦佩。在比赛中，纳塔莉在24名运动员中以落后冠军、俄罗斯选手拉里莎-伊利琴科1分22秒2的成绩排名第16，领先第24名12分8秒2之多，让很多 健全的运动员以及现场观众惊叹不已。更让大家惊奇的是，她在下水之前将假肢去掉，几乎用一条右腿游完10公里。
西山丽是获得本届奥运会冠军的日本女子垒球队的二垒手，她曾经实施过更换心脏的手术。初中二年级时，一位美国器官捐赠者捐赠了适合西山丽的心脏。在经过8 个小时的心脏移植手术后，西山丽在父母的呼唤声中睁开了眼睛。那一刻她脸上的微笑令她的父母至今难忘。但是，这次手术只能保证她拥有正常人的生活。当父亲 询问她还要不要打垒球时，西山丽回答：“我已经做了手术，死亡的威胁已经不存在了，让我打垒球吧！”她在心里暗暗发誓：“为了那些病中的人们，为了给他们 带来梦想和勇气，我一定要努力。”在北京，西山丽依旧笑着，“我希望孩子们能够像我一样拥有自己的理想。”每逢西山丽参加比赛，母亲千子一定会去现场观 看。每次，她都在赛场边祈祷：“一定要平安无事地结束比赛。”
在体操女子个人全能决赛中，出现了一张并不年轻的面容，其眼神透出坚定与温柔。她就是已经33岁的德国老将奥克萨娜·亚历山德罗芙娜·许索维蒂纳。为了给 患白血病的儿子治病，她曾以26岁高龄复出参赛，此次是她第5次参加奥运会比赛，并获得女子跳马银牌，现场观众对她表达了敬佩之情。许索维蒂纳的大儿子阿 廖沙2002年被诊断患上白血病，由于治疗需要高昂的费用，生活并不富裕的许索维蒂纳一家实在难以支付，于是她选择了复出参赛，因为“一枚世锦赛金牌等于 3000欧元的奖金，这是我唯一的办法”许索维蒂纳说。为了能够尽可能多的参加比赛，争取获得奖金的机会，许索维蒂纳每次都会把体操的4个项目全部都报上 名。为了儿子，从26岁开始，许索维蒂纳朝全能型发展。“母爱胜于天”，中国这句老话很适合许索维蒂纳。
8月20日，美国选手凯尔·贝内特（88号）在小轮车男子竞速计时排位赛中，一位选手在他面前摔倒。贝内特躲避不及也被阻拦倒下，之后又造成后面选手连环 摔倒。贝内特在这次事故中受伤，躺在赛场上长时间无法动弹，最后在医生紧急诊治下，他又顽强地站了起来，并拒绝了医护人员的担架，重新跨上小轮车。尽管左 手已经不能握把，但他还是完成了比赛路程，现场观众给予他热烈的掌声。他最终以小组第四的身份晋级半决赛。
“除非我的腿断了，否则我会一直跑下去”，这是英国34岁的马拉松选手拉德克里夫的奥运宣言。拉德克里夫是当今女子马拉松项目上最优秀的选手之一，她目前 仍然保持着2小时15分25秒的女子马拉松世界纪录。已经是妈妈选手的拉德克里夫这次已经是第四次参加奥运会了。没成想此次参赛前，拉德克里夫惨遭股骨骨 折，但她还是坚持训练，誓言夺金。然而在比赛的关键时刻她被对手踩掉鞋子，肌肉突然痉挛又引发旧伤，当她一瘸一拐中途休息时，脸上痛苦的表情让所有人都以 为她要放弃比赛，可她短暂调整后，再次奔跑起来。拉德克里夫咬着牙流着泪跑到终点。这次她依然没有拿到金牌， 最终位列第22名。拉德克里夫赛后说：“跑到后半程时，我的左腿已经完全僵硬了，我几乎是用一条腿跑完剩下的比赛的。”即便如此，她仍坚强展望：“还没有 结束，我想下一次在伦敦的时候我会更有机会。”
21日，中华台北选手苏丽文在跆拳道女子57公斤级铜牌争夺战中，带着严重的腿伤，独腿上阵，多次因伤倒地，但她坚持到底。因为三局后双方4比4打平，根 据规则要进行加时赛，加时赛采用“突然死亡法”，即谁先得分谁就获胜。她第14次倒在了地上，却第一次伤心地哭了出来，并再也无力站起来了。虽然最终她负 于克罗地亚选手祖布契奇，没能获得奖牌，但她赢得了人们的赞誉。罗宾称赞苏丽文是“勇敢的对手”。
马修·埃蒙斯把头深埋在妻子怀里，没有人看到这一刻他是否落泪。从雅典到北京，这一枪原本能击碎四年的噩梦，这一枪原本能成就一对奥运金牌夫妻，这一枪原 本能写下一个童话般的结局。和四年前一样，卡捷琳娜坐在看台上给捷克电视台当解说嘉宾；马特站在男子50米步枪三姿的决赛2号靶位上；4.4的数字出现在 显示屏上，冰冻了卡捷琳娜的脸，她张着嘴巴，眼睛一眨不眨，愣了好几秒钟，然后冲下看台，把丈夫拥入怀里，在他耳边轻轻地说：“命中注定还不是时候。”柴 静在后来的访谈中透露，其实是埃蒙斯反而安稳妻子，下次再夺金。
8月18日，俄罗斯选手伊辛巴耶娃在北京奥运会女子撑杆跳高决赛中夺得金牌并创造新的世界纪录5.05米。这是这位跳高女王第24次改写自己保持的世界纪 录。伊辛巴耶娃自豪说“天空是我不断挑战的极限，我想我很快会向5米10发起冲击的。”这个距离天空最近的女人，无忧无虑地在属于她的高度自由飞翔。
伊拉克奥运代表团在奥运会开幕不到十天才得到参赛资格，他们的队员甚至连队服都没有。皮划艇上，其他国家的选手都穿着合适的队服，而伊拉克的选手则穿着旧 T恤，但他们仍然在顽强的比赛。 而由于资金匮乏，参加短跑比赛的伊拉克女选手达娜·侯赛因也只能穿着一双有些破损的“二手”跑鞋参加比赛。她的一句话曾让世界潸然泪下，她躲过了两次枪击 后依然坚持训练，但是此前得知无法参加北京奥运会时，她一度崩溃了。教练安慰她，4年后可以参加伦敦奥运会，21岁的达娜脱口而出：“照伊拉克这个样子， 我不知道自己能不能活到2012年……”中国网友得知这一消息无不为之动容，在开幕式伊拉克代表团入场时，全场中国观众给予了不亚于东道主代表团的礼遇， 报以热烈的掌声。当他们离开时，中国网友特意将自己准备的球鞋、衣服、福娃以及各种具有中国特色的礼物送给伊拉克代表团。伊拉克队的教练非常感动地说：“ 虽然我们远离家乡，但我们在中国感受到了温暖。希望大家有机会能到巴格达，让我们来回报你们。”
三名外国人波兰代表队首席医务官休伯特·克日什托菲亚克、队医马尔钦·克日什托杰克和23岁的波兰皮划艇女选手贝娅塔·米科瓦伊奇克在开幕式上救助一名晕 倒的中国女孩，为此，他们错过了奥运会点火仪式。网友说：这完美地诠释了本届奥运会主题曲表达的情感：我们来自同一个世界，我们是一家人。奥运会将人们连 在了一起，不论种族、文化和语言。
“因为我爱，所以我回来”著名女子花剑运动员栾菊杰曾在1984年洛杉矶奥运会上为中国赢得第一枚击剑金牌，也是迄今为止中国击剑史上唯一的一枚奥运金 牌。如今，50岁的她重披战袍，以教练员和运动员的双重身份代表加拿大出征北京奥运会。当被问及年过半百，“挥剑出山”的因由时，这位已是三个孩子的母亲 表示，她放弃职业运动员生涯已经有20年，如果不是因为这一届奥运会在中国举办，她不会想到重披战袍，“随着北京奥运会的临近，这个念头越来越强烈，因此 我最终作出了重新回来的决定。”
]]></content>
    
    <summary type="html">
    
      转载自这里 http://www.my1510.cn/article.php?2ccc057193ec54ae

感动——奥运精神和风频吹
2008北京奥运圣火熄灭了，电视机天天重复着奥运夺冠的镜头，人们在激动过后回想奥运到底给我们带来了什么？是什么改变我们的生活？是不是金牌影响
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="aoyun" scheme="http://wdicc.com/tags/aoyun/"/>
    
  </entry>
  
  <entry>
    <title>总算搞定了我的CDMA无线上网卡</title>
    <link href="http://wdicc.com/cmda-1x-in-gentoo-linux/"/>
    <id>http://wdicc.com/cmda-1x-in-gentoo-linux/</id>
    <published>2008-07-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[早先在 Archlinux 的时候，就使用过这块卡。现在换了 gentoo，内核要自己编译，昨天拿回网卡后一直没搞定，今天总算搞定了。

我的是一块品速的 pinsu-100c 网卡，是 pccard（pcmcia）类型的。

如果是大于2.6.13内核的，先安装 sys-apps/pcmciautils 这个包。否则安装 pcmcia-cs 这个包。

内核参数需要设置的有下面几个：
<pre class="prettyprint lang-text">
Device Drivers
 Network device support (NETDEVICES [=y]) 下面的
  ppp
   PPP support for async serial ports
# 如果搞不定可以试试看把别的ppp的也选上
# 然后是
Bus options (PCI etc.)
 PCCard (PCMCIA/CardBus) support
# 这下面相关的，我选的有 16-bit 那个和 yenta-compatible bridge ，通常就这个
# 然后是下面这个，对应的模块是 serial_cs，这个会把 pccard 对应到 /dev/ttyS* 这个设备文件
Device Drivers
 Character Devices
  PCMCIA character devices
# 相关的模块
pcmcia_core            31892  4 serial_cs,pcmcia,yenta_socket,rsrc_nonstatic
</pre>

搞定这些kernel选项之后，插入 pccard，应该会看到类似下面的信息，我之前因为kernel没有支持最后那个 serial_cs 模块，插入的时候没有最后两行信息。

<pre class="prettyprint lang-text">
$ dmesg
pccard: card ejected from slot 1
pccard: PCMCIA card inserted into slot 1
pcmcia: registering new device pcmcia1.0
ttyS1: detected caps 00000700 should be 00000100
1.0: ttyS1 at I/O 0x2f8 (irq = 18) is a 16C950/954

$ ls -alh /dev/ttyS1
crw-rw---- 1 root uucp 4, 65 07-26 22:28 /dev/ttyS1

# 要注意那个时间，应该是你插入的时间，否则就有问题了。
</pre>

好了，设备识别出来了。那再安装 net-dialup/wvdial 这个包，用来拨号的。如果是 gnome 环境，也可以安装 net-dialup/gnome-ppp ，他会关联安装 wvdial，这个是 gui 的，可能更友好一点。

同时还需要安装一个叫做 sys-apps/setserial 的包，用来给 ttyS1 设备设置比特率，不太清楚为什么需要设置。用命令 sudo setserial /dev/ttyS1 baud_base 230400 ，要注意那个 230400，我从网上搜到的说网卡支持最高的比特率是这个，所以设置了这个，设置别得行不行，没试过。

然后呢，还需要有一个 /etc/wvdial.conf 文件。
<pre class="prettyprint lang-text">
[Modem0]
  Modem = /dev/ttyS1
  Baud = 57600
  SetVolume = 0
  Dial Command = ATDT
  Init1 = ATZ
  FlowControl = Hardware (CRTSCTS)
[Dialer Defaults]
  Username = CARD
  Password = CARD
  Phone = #777
  Stupid Mode = 1
  Inherits = Modem0
</pre>

从网上搜到的，照抄就行了。关键是那个 /dev/ttyS1 ，和那个 Baud。一个对应你的设备，一个是比特率。我不太清楚为什么和上面设置的那个比特率不一样，不过我使用 minicom 测试的，只有这个比特率能 work。但是或许你那的情况会不一样，可以使用 minicom 来测试，minicom 里面设置了比特率之后，可以多输入几个 AT 回车看看有没有返回 OK，返回就能工作。

这样就一切ok了，sudo wvdial 就可以拨号了。
<pre class="prettyprint lang-text">
$ sudo wvdial
--> WvDial: Internet dialer version 1.60
--> Initializing modem.
--> Sending: ATZ
OK
--> Modem initialized.
--> Sending: ATDT#777
--> Waiting for carrier.
CONNECT
--> Carrier detected.  Starting PPP immediately.
--> Starting pppd at Sat Jul 26 22:15:52 2008
--> Pid of pppd: 11766
--> Using interface ppp0
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> local  IP address 211.145.60.183
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> remote IP address 220.192.0.22
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> primary   DNS address 220.192.0.130
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> secondary DNS address 220.192.8.58
--> pppd: ��[06][08]��[06][08][08]�[06][08]
</pre>

最主要那个 ATZ 发送之后，要返回一个 OK，如果没有，那就是表示没 work，继续搞吧，设备文件没问题的话，一般就出在比特率上面了，结合 setserial 和 minicom 多修改几个看看。

gnome-ppp 使用很简单了，自己琢磨吧。
]]></content>
    
    <summary type="html">
    
      早先在 Archlinux 的时候，就使用过这块卡。现在换了 gentoo，内核要自己编译，昨天拿回网卡后一直没搞定，今天总算搞定了。

我的是一块品速的 pinsu-100c 网卡，是 pccard（pcmcia）类型的。

如果是大于2.6.13内核的，先安装 sys-app
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="cdma" scheme="http://wdicc.com/tags/cdma/"/>
    
      <category term="pccard" scheme="http://wdicc.com/tags/pccard/"/>
    
      <category term="setserial" scheme="http://wdicc.com/tags/setserial/"/>
    
      <category term="wvdial" scheme="http://wdicc.com/tags/wvdial/"/>
    
  </entry>
  
  <entry>
    <title>昨天去看了《功夫熊猫》</title>
    <link href="http://wdicc.com/kong-fu-panda/"/>
    <id>http://wdicc.com/kong-fu-panda/</id>
    <published>2008-07-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[浦发的电影票好久没定上了，所以熊猫出来好久了也没去看。

<img src="http://pic.yupoo.com/wdicc/655915d3eac1/aafljbo3.jpg" alt="功夫熊猫" width="500" height="500">

片子还是不错的，“Mr 乌龟”的这种叫法不知道是怎么搞出来的，呵呵。

这里有不少预告片，可以去看看。 http://www.mtime.com/movie/44740/trailer.html
]]></content>
    
    <summary type="html">
    
      浦发的电影票好久没定上了，所以熊猫出来好久了也没去看。

&lt;img src=&quot;http://pic.yupoo.com/wdicc/655915d3eac1/aafljbo3.jpg&quot; alt=&quot;功夫熊猫&quot; width=&quot;500&quot; height=&quot;500&quot;&gt;

片子还是不错的，“
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="movie" scheme="http://wdicc.com/tags/movie/"/>
    
      <category term="panda" scheme="http://wdicc.com/tags/panda/"/>
    
  </entry>
  
  <entry>
    <title>万恶的 ATI fglrx 驱动</title>
    <link href="http://wdicc.com/howto-reset-ati-fglrx-settings/"/>
    <id>http://wdicc.com/howto-reset-ati-fglrx-settings/</id>
    <published>2008-07-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[ATI 官方驱动带了一个 amdcccle 命令，可以显示图形界面对显示器作一些设置，例如修改分辨率，twinview, dual head, bigdesktop 这些设置。其实 nvidia 的官方驱动也是带了这么一个工具的。

但是呢，有时候就会发现，通过这个命令修改显示之后，你的xorg.conf 里面的设置就不起作用了！无论你之后如何去修改你的 xorg.conf ，他根本不会去理会。

我遇到的问题就是，某次通过 amdcccle 设置了一下 bigdesktop，结果导致接上我的另外一个LCD之后，那个LCD的分辨率死活就卡在 1024x768 上了。要知道，那个LCD是支持 1280x1024的，可是无论如何设置，就是不能提高分辨率了。查看 xorg 的log，能看到读取的 /etc/X11/xorg.conf 文件，可是就是没效果。

开始怀疑是显示器出于保护，把分辨率设置底了，结果接到别人的笔记本上面是没问题的。后来研究来研究去，发现还是 ATI 驱动的问题。

/etc/ati 下面有不少文件，也不知道这些文件是什么用途，但是 amdpcsdb 这个文件就是罪魁祸首了。删掉后LCD的分辨率就正常了。

很奇怪，我执行 amdcccle 的时候，用的可不是 sudo ，他是怎么写到这个文件里面的？
]]></content>
    
    <summary type="html">
    
      ATI 官方驱动带了一个 amdcccle 命令，可以显示图形界面对显示器作一些设置，例如修改分辨率，twinview, dual head, bigdesktop 这些设置。其实 nvidia 的官方驱动也是带了这么一个工具的。

但是呢，有时候就会发现，通过这个命令修改显示之
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ati" scheme="http://wdicc.com/tags/ati/"/>
    
      <category term="fglrx" scheme="http://wdicc.com/tags/fglrx/"/>
    
  </entry>
  
  <entry>
    <title>自动登录网站的 greasemonkey 脚本</title>
    <link href="http://wdicc.com/greasemonkey-autologin-script/"/>
    <id>http://wdicc.com/greasemonkey-autologin-script/</id>
    <published>2008-06-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[自动登录 gmail 的 greasemonkey 脚本，可以根据需要修改 formElement.name=="Email" 为别的，来登录别的网站。注意修改 name, include 这些相关的东东
<pre class="prettyprint lang-javascript">
// (c) 2007, Yabin Guo
// To install, you need Greasemonkey: http://greasemonkey.mozdev.org/
//
// --------------------------------------------------------------------
// ==UserScript==
// @name          gmail Login
// @description   Auto-login of gmail
// @include       https://www.google.com/a/wdicc.com/*
// ==/UserScript==

//replace your seraph username and password in the following expression;
userName="wd";
passWord="*******";

function submitFirstPasswordForm() {
	var form=document.forms[0];
    var submitButton = null;
	var passwordElem;
	var accountElem;
	var submitButton;
    for (i=0; formElement=form[i]; ++i){
		if(formElement.type=="password"){
			passwordElem=formElement;
		}else if(formElement.name=="Email"){
			accountElem=formElement;
		}else if(formElement.type=="submit"){
			submitButton=formElement;
		}
	}

	accountElem.value=userName;
	passwordElem.value=passWord;

    if (submitButton) {
        submitButton.focus();
        submitButton.style.MozOutline = "2px solid purple";
        // Submit the form by calling click() on the submit button.
        submitButton.click();
        // Break out of both loops.
        return; 
      }
}

window.addEventListener(
  "load", 
  function() { 
    setTimeout(submitFirstPasswordForm, 0); 
  }, 
  false
);
</pre>
]]></content>
    
    <summary type="html">
    
      自动登录 gmail 的 greasemonkey 脚本，可以根据需要修改 formElement.name==&quot;Email&quot; 为别的，来登录别的网站。注意修改 name, include 这些相关的东东
&lt;pre class=&quot;prettyprint lang-javascri
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="firefox" scheme="http://wdicc.com/tags/firefox/"/>
    
      <category term="greasemonkey" scheme="http://wdicc.com/tags/greasemonkey/"/>
    
  </entry>
  
  <entry>
    <title>张贴小广告~</title>
    <link href="http://wdicc.com/guanggaoguanggao/"/>
    <id>http://wdicc.com/guanggaoguanggao/</id>
    <published>2008-05-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://uglyorbeauty.blog.sohu.com/" target="_blank" rel="external">http://uglyorbeauty.blog.sohu.com/</a>

做个广告哈~嘿嘿，大家多捧场~
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://uglyorbeauty.blog.sohu.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://uglyorbeauty.blog.sohu.com/&lt;/a&gt;

做个广告哈~嘿嘿，大家多捧场~

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>开始锻炼第二天</title>
    <link href="http://wdicc.com/doing-exercise/"/>
    <id>http://wdicc.com/doing-exercise/</id>
    <published>2008-05-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[从昨天早上开始，就早早爬起来来公司附近的健身中心跑步了。

说起来，去年也曾经跑了2个月，不过体重下去2斤，汗... 昨天去了之后称了一下，已经比去年冬天又重了2，3公斤，日阿，长的真快。

昨天去了之后，基本就是恢复一下体力，两条杆的那个跑步机上面跑了25分钟左右，累的不行了。就去器械做了20多个走人。今天先去那里搞了 15 分钟热身，然后去跑步机上面跑了 15 分钟，本来打算是10分钟完事的，结果咬着呀跑了15分钟。希望明天能直接在跑步机上面跑30分钟。

事实证明，跑步的时候有个好看的片子来分散注意力的话，还是很容易坚持的。
]]></content>
    
    <summary type="html">
    
      从昨天早上开始，就早早爬起来来公司附近的健身中心跑步了。

说起来，去年也曾经跑了2个月，不过体重下去2斤，汗... 昨天去了之后称了一下，已经比去年冬天又重了2，3公斤，日阿，长的真快。

昨天去了之后，基本就是恢复一下体力，两条杆的那个跑步机上面跑了25分钟左右，累的不行了。
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="健身" scheme="http://wdicc.com/tags/%E5%81%A5%E8%BA%AB/"/>
    
  </entry>
  
  <entry>
    <title>尝试了一下APE到flac格式的转换</title>
    <link href="http://wdicc.com/ape-to-flac/"/>
    <id>http://wdicc.com/ape-to-flac/</id>
    <published>2008-04-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[突然没事，就尝试一下看看。。。参考 <a href="http://www.linuxgem.org/tip/convert-ape-and-cue-to-flac.html" target="_blank">这里</a>。

gentoo 里面，需要安装 mac-ports 和 shntools。shntools 需要启用 flac 的 use。

<pre class="prettyprint lang-bash">

转完之后，文件名都是 lssplit-track00.flac 这种的。如果出现不认识 ape 格式的错误，多半是 mac-ports 没安装的缘故。

另外，现在在用 scim-python 打字，感觉有点意思。速度还行，词库有几十M，应该不差吧。。。
</pre>]]></content>
    
    <summary type="html">
    
      突然没事，就尝试一下看看。。。参考 &lt;a href=&quot;http://www.linuxgem.org/tip/convert-ape-and-cue-to-flac.html&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;。

gentoo 里面，需要安装 mac-ports 和
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ape" scheme="http://wdicc.com/tags/ape/"/>
    
      <category term="flac" scheme="http://wdicc.com/tags/flac/"/>
    
      <category term="mac" scheme="http://wdicc.com/tags/mac/"/>
    
  </entry>
  
  <entry>
    <title>实话实说</title>
    <link href="http://wdicc.com/shihuashishuo/"/>
    <id>http://wdicc.com/shihuashishuo/</id>
    <published>2008-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[小 崔：大叔大妈，好久不见，股票炒得挺好吧？

宋丹丹：好啊，那是相当得好！

小 崔：买的都是啥股票？

赵本山：都是中石油嘛。

宋丹丹：不说话还能把你憋死？

赵本山：我看中石油得先把你憋死！

小 崔：大妈，我听说中石油最近跌得很厉害啊？

宋丹丹：假象，绝对的假象！不会下蹲的股票是跳不高的。股评家说了，买了中石化，生活不用怕；买了中石油，生活不用愁。

赵本山：是啊，那中石油是干蹲不起，啥时候跌停板了也就到底了。

小 崔：大叔，你买的是什么股票？

宋丹丹：那他能好意思说吗？中国平安！

小 崔：大叔，您当时咋想的？

赵本山：我寻思中国平安从149元跌到100元就是地板价了，没想到地板下面还有地窖，地窖下面还有地狱，更没想到的是地狱还有十八层！

小 崔：看来炒股赚钱还真挺难的。 大叔大妈,现在有啥打算？

宋丹丹：还打算啥呀？搁家解套呗！石油套—-钢钢的—-老他妈难解了！问君能有几多愁，恰似满仓中石油。

赵本山：我整个锣，没事出去敲一敲：平安无事了！

小 崔：大叔大妈，每人一句话,总结感言.

宋丹丹：我十分想抛中石油.

赵本山：说那玩儿干啥?我整点有用的说.印花税啥时候降下来呀?

零七年，走远了，牛市一去不返了。

零八年，危险了，股市出现拐点了。

蓝筹股，跌惨了，中国石油腰斩了。

概念股，疲软了，奥运行情搁浅了。

融资门，上演了，千亿增发拍板了。

印花税，不减了，政协提案白喊了。

美联储，拨款了，纽约股市回暖了。

证监会，不管了，转眼又跌百点了。

抢反弹，没胆了，弱市积重难返了。

要救市，太晚了，市场人心都散了。

三千五，不远了，主力杀跌急眼了。

同学们，快闪了，再不撤退破产了
]]></content>
    
    <summary type="html">
    
      小 崔：大叔大妈，好久不见，股票炒得挺好吧？

宋丹丹：好啊，那是相当得好！

小 崔：买的都是啥股票？

赵本山：都是中石油嘛。

宋丹丹：不说话还能把你憋死？

赵本山：我看中石油得先把你憋死！

小 崔：大妈，我听说中石油最近跌得很厉害啊？

宋丹丹：假象，绝对的假象！不会
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>使用 uvesafb</title>
    <link href="http://wdicc.com/use-uvesafb/"/>
    <id>http://wdicc.com/use-uvesafb/</id>
    <published>2008-04-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[FB 就是 Frambuffer 了。直观一点说，使用之后，可以给 console 设置分辨率，可以在console下面看电影，看图？

在 Kernel 里面，ATI 显卡有个 Readonfb，使用后不需要修改 grub 就可以直接出现高分辨率的 console，但是他和 ATI 的 fglrx 驱动冲突，会导致死机，所以，基本没法子用，除非你不打算进 x。

<a href="http://dev.gentoo.org/~spock/projects/uvesafb/" target="_blank"> uvesafb</a> 以前叫做 vesafb-tng，似乎是从 kernel 2.6.23 开始改名的。使用这个也很简单了，参考作者的 <a href="http://dev.gentoo.org/~spock/projects/uvesafb/" target="_blank">web</a> 页面。

有几个内核参数：
<pre class="prettyprint lang-text">
Graphics support ---&gt; Userspace VESA VGA graphics support
General Setup ---&gt;  Initial RAM filesystem and RAM disk (initramfs/initrd) support 设置为 /usr/share/v86d/initramfs
上面几个设置分别是
CONFIG_CONNECTOR=y
CONFIG_FB_UVESA=y
CONFIG_INITRAMFS_SOURCE="/usr/share/v86d/initramfs"</pre>
安装 klibc 和 v86d 。修改 grub，添加 video=uvesafb:1024x768-32,mtrr:3,ywrap

如果遇到 'uvesafb: failed to execute /sbin/v86d' 的错误，可能是最后一个内核参数没有设置好的缘故。
]]></content>
    
    <summary type="html">
    
      FB 就是 Frambuffer 了。直观一点说，使用之后，可以给 console 设置分辨率，可以在console下面看电影，看图？

在 Kernel 里面，ATI 显卡有个 Readonfb，使用后不需要修改 grub 就可以直接出现高分辨率的 console，但是他和 A
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="kernel" scheme="http://wdicc.com/tags/kernel/"/>
    
      <category term="uvesafb" scheme="http://wdicc.com/tags/uvesafb/"/>
    
  </entry>
  
  <entry>
    <title>庆祝一下把blog迁移到了新的空间</title>
    <link href="http://wdicc.com/new-blog-space/"/>
    <id>http://wdicc.com/new-blog-space/</id>
    <published>2008-04-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[只能说，盘古太tmd的慢了。而且今天发现他们很无耻的一个地方，ftp上传下载网页代码的时候速度很快，但是数据库文件死活就弄不下来，mmd，气死我了。后来还好 <a href="http://oceanboo.cn/" target="_blank">ob</a> 帮我弄下来了。

新的空间要感谢 <a href="http://77boy.cn" target="_blank">七巧仔</a> ，呵呵，不知道可以用多久。不过快一点是一天了。发现有点问题就是 fanfou tools 不能用了。好像是连不上 饭否 的api服务器。郁闷。
]]></content>
    
    <summary type="html">
    
      只能说，盘古太tmd的慢了。而且今天发现他们很无耻的一个地方，ftp上传下载网页代码的时候速度很快，但是数据库文件死活就弄不下来，mmd，气死我了。后来还好 &lt;a href=&quot;http://oceanboo.cn/&quot; target=&quot;_blank&quot;&gt;ob&lt;/a&gt; 帮我弄下来了。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Test emacs post</title>
    <link href="http://wdicc.com/test-emacs-post/"/>
    <id>http://wdicc.com/test-emacs-post/</id>
    <published>2008-04-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
Just for a test..

&amp;amp;lt;strong&amp;amp;gt;Strong text&amp;amp;lt;/strong&amp;amp;gt;

Seemes not support post slug to..

So, just post it.

&lt;pre lang='perl'&gt;
use strict;
my $test;
&lt;/pre&gt;
]]></content>
    
    <summary type="html">
    
      
Just for a test..

&amp;amp;amp;lt;strong&amp;amp;amp;gt;Strong text&amp;amp;amp;lt;/strong&amp;amp;amp;gt;

Seemes not support post slug to..

So, just po
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>gnome 里面的 usb automount 终于好了</title>
    <link href="http://wdicc.com/usb-automount-in-gnome/"/>
    <id>http://wdicc.com/usb-automount-in-gnome/</id>
    <published>2008-04-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[升级到 gnome 2.22 之后，发现 usb 不自动mount了，归罪于gnome 2.22。但是刚才尝试手动mount的时候才发现，根本没有 /dev/sdx 设备，靠。想起来我好像把 scsi 相关的 kernel 选项都关掉了，nnd。重新编译内核之后，啥问题都没了。。。

就连之前 分区不显示在桌面上面 的问题都好了，ft，和scsi有关系？

gnome 下面有 gnome-volume-manager &amp; gnome-mount &amp; gnome-vfs 和自动挂载相关。
]]></content>
    
    <summary type="html">
    
      升级到 gnome 2.22 之后，发现 usb 不自动mount了，归罪于gnome 2.22。但是刚才尝试手动mount的时候才发现，根本没有 /dev/sdx 设备，靠。想起来我好像把 scsi 相关的 kernel 选项都关掉了，nnd。重新编译内核之后，啥问题都没了。。
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
      <category term="usb" scheme="http://wdicc.com/tags/usb/"/>
    
  </entry>
  
  <entry>
    <title>《见龙卸甲》又一个大烂片诞生了</title>
    <link href="http://wdicc.com/jianlongxiejia-so-bad-movie/"/>
    <id>http://wdicc.com/jianlongxiejia-so-bad-movie/</id>
    <published>2008-04-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[看完《江山美人》觉得像吃了一个烂蛋糕，可没想到今天又吃了一次，nnd。

《见龙卸甲》讲的是赵云的故事，可是里面tmd和《三国演义》里面的差太多了，简直就是编剧重新写了一本《三国》。那个年代的武将，估计都是“力拔山兮气盖世”的，而一个女的都督还那么牛b，可以和赵云单挑，这女的吃激素长大的阿。实在太烂了。
<blockquote>《见龙卸甲》虽说是根据《三国演义》改编，但真正的剧情走向早就远离原著十万八千里，长坂坡单骑救主的赵云居然换成凤鸣山救主，就为了帮导演画一 个善始善终的“圆”。生造出的曹操孙女曹婴、赵云同乡罗平安和只会“青龙白虎阵”的诸葛亮更是让读过《三国演义》的观众啼笑皆非。而影片最关键的凤鸣山一 战在电影中完全被颠覆，张苞、关兴刚一露面就被杀，赵云舍生取义，决意战死……这些颠三倒四、似是而非的改编只有一个目的，把赵云塑造成一个人性化的反战 英雄，在乱世之中，他只想要有一个安定的天下，有一个自己的家，其中再夹杂一些男人间的友情和责任感等——这样的想法看起来并不错，但实际上是偷懒的做 法。所谓重新解读历史人物，应该是从人物本身出发，从真实细节中发掘出原先被忽视的部分。但《见龙卸甲》对赵云的重新解读却是主题先行，肆意编造细节和情 节来实现预设的主题。主题先行导致人物概念化，这个主角可以是赵云，也可以是张飞、关羽，甚至可以是武松、鲁智深，任何一个背景下英雄人物都可以套上这样 “人性化”的模板。</blockquote>
上面引用一段<a href="http://www.news365.com.cn/xwzx/whyyyl/200804/t20080404_1820801.htm" target="_blank">别人</a>的话.

贴一个剧照吧。

<img src="http://pic.yupoo.com/wdicc/5840055b04c0/medium.jpg" alt="见龙卸甲" width="351" height="500">
]]></content>
    
    <summary type="html">
    
      看完《江山美人》觉得像吃了一个烂蛋糕，可没想到今天又吃了一次，nnd。

《见龙卸甲》讲的是赵云的故事，可是里面tmd和《三国演义》里面的差太多了，简直就是编剧重新写了一本《三国》。那个年代的武将，估计都是“力拔山兮气盖世”的，而一个女的都督还那么牛b，可以和赵云单挑，这女的吃激
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="movie" scheme="http://wdicc.com/tags/movie/"/>
    
  </entry>
  
  <entry>
    <title>搞定安装emacs之后pidgin打开邮箱的功能失效</title>
    <link href="http://wdicc.com/emacsclient-conflict-with-pidgin/"/>
    <id>http://wdicc.com/emacsclient-conflict-with-pidgin/</id>
    <published>2008-04-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[安装emacs之后，发现在 pidgin 里面选择打开 hotmail 邮箱的时候不好用了，浏览器没反映，以前是会打开一个 file:///tmp/purple2CMD9T 这样的文件的，然后这个文件重定向到 hotmail 邮箱，其实说白了基本没用，还不如自己在浏览器打一个 hotmail.com，因为他好像不会发送你的帐户信息，就像在msn里面那样，直接登录。

但是不能用了，总觉得心里堵的荒，趁着刚搞定 mplayer 对gnome的屏保的xxoo，以及 automount 的东风，一定要搞定这个，嗯。

查看 pidgin 的debug信息可以看到，pidgin是调用xdg-open 来打开那个文件，由xdg-open 调用相应的程序来打开。命令行执行一下，可以看到xdg-open 调用了 emacsclient 来打开那个文件，这显然是不行的。
<pre class="prettyprint lang-text">
/usr/bin/emacsclient: can't find socket; have you started the server?
To start the server in Emacs, type "M-x server-start".
/usr/bin/emacsclient: No socket or alternate editor.  Please use:
--socket-nam
--server-file      (or environment variable EMACS_SERVER_FILE)
--alternate-editor (or environment variable ALTERNATE_EDITOR)</pre>
怎么修改，尝试了 xdg-mime ，结果不行。今天 sssslang 提醒说 xdg-open 是个shell脚本，看了之后发现在gnome下面，他调用的其实是 gnome-open 来打开的。gnome-open 是个bin文件，没的看了。搜了一下，发现 /etc/gnome-vfs-mime-magic 似乎是用来判断文件类型的，根据文件的头。不过这个和打开程序没关系。

然后找到 /usr/share/applications/mimeinfo.cache 这个文件，把里面emacsclient 相关的都删掉，反正我也不用他。然后还得把 /usr/share/applications/emacsclient.desktop 里面 MimeType 行干掉，要不后面执行更新的时候会再次把emacsclient 的信息更新到 mimeinfo.cache 里面。

好了，执行一下 sudo update-desktop-database 更新一下cache，就没问题了。需要注意这个cache在 .local/share 下面也有一个。

太高兴了，问题都解决了。
]]></content>
    
    <summary type="html">
    
      安装emacs之后，发现在 pidgin 里面选择打开 hotmail 邮箱的时候不好用了，浏览器没反映，以前是会打开一个 file:///tmp/purple2CMD9T 这样的文件的，然后这个文件重定向到 hotmail 邮箱，其实说白了基本没用，还不如自己在浏览器打一个 h
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
      <category term="pidgin" scheme="http://wdicc.com/tags/pidgin/"/>
    
  </entry>
  
  <entry>
    <title>在gnome下面使用mplayer</title>
    <link href="http://wdicc.com/use-mplayer-in-gnome/"/>
    <id>http://wdicc.com/use-mplayer-in-gnome/</id>
    <published>2008-04-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[使用mplayer其实没必要用什么前端了，多简洁，不过可能是因为我很少看有字幕的视频的缘故。smplayer是基于qt的，有兴趣可以试试看，我觉得速度有点慢。此外还有gnome-mplayer，有选项可以stop gnome的screensaver。

今天忽然兴起就想看看smplayer的最新版是否能在播放的时候屏蔽gnome screensaver，结果在他们论坛上面找到了方法。其实smplayer本身是没那个功能的，作为前端，他只是负责把 stop-xscreensaver 参数传递给mplayer而已。不过却发现了一个mpalyer的设置：
<pre class="prettyprint lang-text">heartbeat-cmd="gnome-screensaver-command -p">
这个设置不知道是从什么时候出现的，可以用来停止gnome的screensaver，放到 .mplayer/config 里面就行了。

这下子gnome-screensaver 也可以干掉了，这玩意不支持mplayer的一些快捷键，例如osd切换。在播放一些有问题的文件的时候，还经常 cpu 100% 死掉。

另外，gnome里面的文件，在nautilus里面双击默认的打开方式是由 /usr/share/applications 里面的那些desktop文件决定的，这些文件里面定义了可以打开什么类型的文件。gnome的菜单也是从这里生成的。当然，在文件上面右键-&gt;属性-&gt;打开方式也可以自定义一个。

此外，~/.local/share/applications 里面也有一些 desktop，这些是你自定义的。比如系统经过判断，rmvb的文件使用 realplayer 来打开，但是你又想用 mplayer 来打开，那么就会在这个目录下面的文件里面记录下来。

mplayer 的那个 desktop 文件里面指定的是 gmplayer 来打开文件的，我可不喜欢这个gmplayer，所以修改一下这个文件就好了。这样比自己添加自定义命令的好处是，有个图标。。。还有可以打开 smb:// 的文件。
</pre>]]></content>
    
    <summary type="html">
    
      使用mplayer其实没必要用什么前端了，多简洁，不过可能是因为我很少看有字幕的视频的缘故。smplayer是基于qt的，有兴趣可以试试看，我觉得速度有点慢。此外还有gnome-mplayer，有选项可以stop gnome的screensaver。

今天忽然兴起就想看看smp
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
      <category term="mplayer" scheme="http://wdicc.com/tags/mplayer/"/>
    
      <category term="screensaver" scheme="http://wdicc.com/tags/screensaver/"/>
    
  </entry>
  
  <entry>
    <title>每日播报~</title>
    <link href="http://wdicc.com/%25e6%25af%258f%25e6%2597%25a5%25e6%2592%25ad%25e6%258a%25a5/"/>
    <id>http://wdicc.com/%e6%af%8f%e6%97%a5%e6%92%ad%e6%8a%a5/</id>
    <published>2008-04-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[以后每天都来写一个~吼吼吼
]]></content>
    
    <summary type="html">
    
      以后每天都来写一个~吼吼吼

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="灌水" scheme="http://wdicc.com/tags/%E7%81%8C%E6%B0%B4/"/>
    
  </entry>
  
  <entry>
    <title>让人又爱又恨的 gnome 2.22</title>
    <link href="http://wdicc.com/gnome-222-bad-or-good/"/>
    <id>http://wdicc.com/gnome-222-bad-or-good/</id>
    <published>2008-04-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周没忍住诱惑，升级到了  gnome 2.22 。惊喜不多，问题不少。

automount 功能不能用了。以前桌面上面会出现一些别的分区的图标的，现在也没有了。这是很郁闷的一个事情。别的比如 metacity的compiz特性，alt+tab切换窗口的效果等，原来都是和compiz是一样一样的，都一样的耗费资源，shit。

不过值得欣慰的一点是 evolution 2.22 里面邮件提醒可以设置不只监控收件箱了，过滤到别的文件夹里面的邮件也会提醒了。mail-notification 可以删掉了。

scribefire 好像没办法设置 post slug？那怎么用？不设置的话，中文标题生成的链接太恶了。
]]></content>
    
    <summary type="html">
    
      上周没忍住诱惑，升级到了  gnome 2.22 。惊喜不多，问题不少。

automount 功能不能用了。以前桌面上面会出现一些别的分区的图标的，现在也没有了。这是很郁闷的一个事情。别的比如 metacity的compiz特性，alt+tab切换窗口的效果等，原来都是和com
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnome" scheme="http://wdicc.com/tags/gnome/"/>
    
  </entry>
  
  <entry>
    <title>赫赫，哦k了</title>
    <link href="http://wdicc.com/heheokle/"/>
    <id>http://wdicc.com/heheokle/</id>
    <published>2008-04-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[哈哈 终于能在老公的网站上发帖子啦，噢也~
]]></content>
    
    <summary type="html">
    
      哈哈 终于能在老公的网站上发帖子啦，噢也~

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>domin will die...</title>
    <link href="http://wdicc.com/domin-will-die/"/>
    <id>http://wdicc.com/domin-will-die/</id>
    <published>2008-03-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[05年12月份购买的，参加yahoo的smallbusiness服务，5年100多点。那会没有信用卡，让xh代买的。结果那头猪忘记了自己的帐号，我只能改改域名指向了，靠。气死我了。<br><br>给yahoo发了一个mail，不知道能不能有反馈。<br>
]]></content>
    
    <summary type="html">
    
      05年12月份购买的，参加yahoo的smallbusiness服务，5年100多点。那会没有信用卡，让xh代买的。结果那头猪忘记了自己的帐号，我只能改改域名指向了，靠。气死我了。&lt;br&gt;&lt;br&gt;给yahoo发了一个mail，不知道能不能有反馈。&lt;br&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="domain" scheme="http://wdicc.com/tags/domain/"/>
    
  </entry>
  
  <entry>
    <title>昨天去看了国家宝藏2：夺宝秘笈</title>
    <link href="http://wdicc.com/national-treasure-book-of-secrets/"/>
    <id>http://wdicc.com/national-treasure-book-of-secrets/</id>
    <published>2008-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一句话评价，至少比那个《江山美人》强多了。。。

老美的电影里面经常去搞总统，在这部片子里面，还上巴黎的白金汉宫里面玩了一把。其中有一段，是在总统府里面举办什么‘滚彩蛋’比赛，好像是给孩子们玩的。再想想国内，49周年国庆的时候，我们在天安门广场上面待了一个晚上，就是为了第二天早上能看到升旗，结果呢，到早上4，5点被清理出了广场，因为只有被安排的人才能在国旗下面看升旗，我们只是在很远的外围看了一下，我记得好像连旗子都不怎么看得见。当时还有哥们爬树上看，爱国可真不容易。

<img src="http://pic.yupoo.com/wdicc/593085491f9b/medium.jpg" alt="National Treasure: Book of Secrets" height="500" width="358">
]]></content>
    
    <summary type="html">
    
      一句话评价，至少比那个《江山美人》强多了。。。

老美的电影里面经常去搞总统，在这部片子里面，还上巴黎的白金汉宫里面玩了一把。其中有一段，是在总统府里面举办什么‘滚彩蛋’比赛，好像是给孩子们玩的。再想想国内，49周年国庆的时候，我们在天安门广场上面待了一个晚上，就是为了第二天早上
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="movie" scheme="http://wdicc.com/tags/movie/"/>
    
  </entry>
  
  <entry>
    <title>一个转换 mp3 tag 编码的东东</title>
    <link href="http://wdicc.com/mp3-tag-encoding/"/>
    <id>http://wdicc.com/mp3-tag-encoding/</id>
    <published>2008-03-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[虽然是jar的，不过还是挺好用的。网址在<a href="http://www.cs.berkeley.edu/~zf/id3iconv/" title="id3iconv" target="_blank">这里</a>。这种程序还是挺多的，python 的 mutagen 也可以。

下载以后，用下面的命令转换：
<pre class="prettyprint lang-bash">
</pre>]]></content>
    
    <summary type="html">
    
      虽然是jar的，不过还是挺好用的。网址在&lt;a href=&quot;http://www.cs.berkeley.edu/~zf/id3iconv/&quot; title=&quot;id3iconv&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;。这种程序还是挺多的，python 的 mutagen 也可
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="encoding" scheme="http://wdicc.com/tags/encoding/"/>
    
      <category term="mp3" scheme="http://wdicc.com/tags/mp3/"/>
    
  </entry>
  
  <entry>
    <title>桌面从 debian 切换到了 gentoo</title>
    <link href="http://wdicc.com/gentoo-is-good-and-powerfull/"/>
    <id>http://wdicc.com/gentoo-is-good-and-powerfull/</id>
    <published>2008-03-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天居然打开了blog的发表页面，奇迹了，那就写一篇好了。

gentoo 真不错呀，嗯，软件全，还可以自己定制。真是太爽了。套用一句某个女星给某洗衣粉作的广告“用一次，就知道是我想要的”，呵呵。

呀，好像没什么好写的了。。。汗。凑字数中。。。
]]></content>
    
    <summary type="html">
    
      今天居然打开了blog的发表页面，奇迹了，那就写一篇好了。

gentoo 真不错呀，嗯，软件全，还可以自己定制。真是太爽了。套用一句某个女星给某洗衣粉作的广告“用一次，就知道是我想要的”，呵呵。

呀，好像没什么好写的了。。。汗。凑字数中。。。

    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gentoo" scheme="http://wdicc.com/tags/gentoo/"/>
    
  </entry>
  
  <entry>
    <title>盘古的空间还能再慢么？！</title>
    <link href="http://wdicc.com/pangu-tooooo-slow/"/>
    <id>http://wdicc.com/pangu-tooooo-slow/</id>
    <published>2008-03-14T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[靠阿靠，去年7，8月份买的，那会速度好像也没现在这么慢阿。现在不论在哪里访问，速度都慢的要死，只能靠了！还花了我100多呢。

看到淘宝上面有人卖 dreamhost 的空间，最低才30块钱，汗，不知道多少人用的一个主机，不过还真是便宜阿。。。回头再研究研究，打算弄一个。嗯。
]]></content>
    
    <summary type="html">
    
      靠阿靠，去年7，8月份买的，那会速度好像也没现在这么慢阿。现在不论在哪里访问，速度都慢的要死，只能靠了！还花了我100多呢。

看到淘宝上面有人卖 dreamhost 的空间，最低才30块钱，汗，不知道多少人用的一个主机，不过还真是便宜阿。。。回头再研究研究，打算弄一个。嗯。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="空间" scheme="http://wdicc.com/tags/%E7%A9%BA%E9%97%B4/"/>
    
  </entry>
  
  <entry>
    <title>用650半个多月的感受</title>
    <link href="http://wdicc.com/about-treo-650/"/>
    <id>http://wdicc.com/about-treo-650/</id>
    <published>2008-03-14T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[还是很强大的。
刚开始对他有成见，总觉得买个二手的二手的x手不是很爽，能用多久阿？但实际上还是不错的，呵呵。

买回来基本没怎么折腾，我也听说这玩意弄不好会频繁重启，所以基本不敢大动，连什么那个 zluncher 也不敢装，总觉得这玩意动作太大，搞不好就系统崩溃了。就自带的luncher凑合吧

说palm 单线程有点不符，还是有个人说的单gui好一点。因为并不是说你看电子书的时候就不能接电话了，只不过是电话ui出来之后，电子书就退出了。但是有些程 序，比如那个听歌的ptunes，是可以让他在退出ui的时候也继续播放的。单线程这个说法也不知道谁第一个说的，让我开始以为我安装一个闹钟软件之后， 难道得一直开着这个程序才能起作用？其实不是的。这样也好，不用担心动不动给你开一堆后台程序，搞的你很郁闷，你还不知道怎么回事。比如ppc，比如 s60。。。

我装的软件有下面几个：
vbook : 看小说，这个支持txt。还能看卡上的，退出的时候会自动记录上次看到的位置。不过我有一次打开小说后直接到最后了，估计是有人拿着看给我弄的。基本上勇者还行。

rscbackup: 用来备份到卡上面的。我只备份国一次，还没有恢复过，所以具体这玩意怎么回事还说不太明白，但是大家都推荐，又没有常驻进程，那就装一个好了，呵呵。

butler: 我用了其中的提醒管理，和闹钟设定。提醒可以提醒你没看的短信，没接的电话什么的，可以设置提醒次数，和提醒时段，比如晚上11点到第二天的早上8点是睡 觉时间，没听见就算了，不用提醒。butler 的其他功能我都没用，我的想法是，能不用就不用，省得搞起来冲突，搞的重启。

pmt xl: 用来记账的，很强大。。只能这么说了，不好好整整是弄不明白怎么玩的。。。

zdic: 字典。从网上吓了一个 wiki 的词库，没事可以显摆一下。。。我好像一直没用过。。

分钟提醒： 打电话的时候 50秒的时候提醒你一下什么的，还有点别的功能，比如对方挂电话了提醒你下，省的你还在那外外。。

拨号助手： 有些外地电话波17951不是便宜么，可是电话本里面又不想直接就存上，比如有时候还想发个短信呢。装上这个就好了，选号码之后，按回车，就会出来一个菜单，让你选前面加17951 还是不加等，还可以加106什么的，还可以自己定制，比如波一个ip卡

掌易： 输入法。加上sogou的词库，很强大。。。输入太tmd的快了，就是650的按键有点小。

cardreader: 把你的650变成一个u盘。要不然你得有读卡器才能直接读写你的扩展卡不是。

sugarmemo, accessorizer, crash, rescoexplorer,, gizmo keygtime ptunes tcpmp 这些都是别人说装上就装上的，我基本没怎么用国
例如 gizmo 这个im软件，用了一下觉得不怎么好用。

我的 650 买回来后，基本能用4天。可能是我电话短信都不多把，另外装的软件也不多。不过我基本上下班晚上睡觉前都要看会电子书。
这样就是周日晚上冲上电，周一早上取下来，要等到周四晚上再冲，不过那会就剩10%多的电力了，保险的是3天应该没问题。

用 了这么久，刚那回来的时候，装一个keygen的时候按什么键都没反应了，就捅了pp。还有就是今天上午不知道什么时候电话模块关掉了，还不知道怎么回 事。别的就没什么问题了，也没重启什么的。感觉还可以亚。我的经验就是，应用软件你可以多装同样功能的，基本没问题。但是系统调整软件尽量不要这么用，容 易冲突，容易重启。相同功能的，最好删掉一个再装另一个。留一个就行了。我觉得palm的不稳定可能和他的系统太开放有关系？很多系统调用都给你了，几个 程序一抢，就重启了。但是这样也有好处，不是可以让软件能更加随心所欲一点么？

最后说一句，black berry 8700 那个垃圾都能卖到 1500，palm 650 真的不贵。。。8700是在太垃圾了，我入手一个月卖掉，亏了500，那个输入法那个系统太屎了，不是自虐别买。。。。...
]]></content>
    
    <summary type="html">
    
      还是很强大的。
刚开始对他有成见，总觉得买个二手的二手的x手不是很爽，能用多久阿？但实际上还是不错的，呵呵。

买回来基本没怎么折腾，我也听说这玩意弄不好会频繁重启，所以基本不敢大动，连什么那个 zluncher 也不敢装，总觉得这玩意动作太大，搞不好就系统崩溃了。就自带的lun
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="650" scheme="http://wdicc.com/tags/650/"/>
    
      <category term="palm" scheme="http://wdicc.com/tags/palm/"/>
    
      <category term="treo" scheme="http://wdicc.com/tags/treo/"/>
    
  </entry>
  
  <entry>
    <title>《江山美人》这个大烂片</title>
    <link href="http://wdicc.com/so-bad-jiangshanmeiren/"/>
    <id>http://wdicc.com/so-bad-jiangshanmeiren/</id>
    <published>2008-03-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[浦发信用卡弄的票，20块钱2个人，还送每人一杯可乐，一桶爆米花。还算合算，就是热线电话不好打通，多亏了我老婆了。

这个片子是个超级大烂片，实在太烂了。能不堪还是不要看了，看完了只想吐，就像吃了个坏蛋糕。没啥剧情， 陈慧琳那口“普通话”还让人听得直恶心。中间有段，山上负责暗杀的人跳下来的时候，陈和马都是站在水里面的，陈正在洗马 。抬头一看上面来人了，立刻一个猛子扎到水里面了，居然还来了一段深水混战，请注意，是“深水”。。。。马呢？我都无语了。。。

这种情况里面太多了， 还是不说了，贴一个剧照吧。

<img src="http://pic.yupoo.com/wdicc/8575653835c8/medium.jpg" alt="">
]]></content>
    
    <summary type="html">
    
      浦发信用卡弄的票，20块钱2个人，还送每人一杯可乐，一桶爆米花。还算合算，就是热线电话不好打通，多亏了我老婆了。

这个片子是个超级大烂片，实在太烂了。能不堪还是不要看了，看完了只想吐，就像吃了个坏蛋糕。没啥剧情， 陈慧琳那口“普通话”还让人听得直恶心。中间有段，山上负责暗杀的人
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>看了 长江7号</title>
    <link href="http://wdicc.com/changjiang-7/"/>
    <id>http://wdicc.com/changjiang-7/</id>
    <published>2008-02-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周五晚上去看的，这个片子感觉更适合给小孩看看，那个玩具倒是挺cute，时不时引来看电影的mm们的羡慕声。

片子里面没什么新意，对话语调类似功夫里面的，大人小孩都那样。剧情里面有些也是周星驰电影里面的，比如让那个毛球做各种表情动作，完全就是喜剧之王里面的翻版。按老婆说的，这片子看完之后脑子里面什么都没留下，看完就完了。

<img src="http://pic.yupoo.com/wdicc/65288525ab74/osf6aajk.jpg">
]]></content>
    
    <summary type="html">
    
      上周五晚上去看的，这个片子感觉更适合给小孩看看，那个玩具倒是挺cute，时不时引来看电影的mm们的羡慕声。

片子里面没什么新意，对话语调类似功夫里面的，大人小孩都那样。剧情里面有些也是周星驰电影里面的，比如让那个毛球做各种表情动作，完全就是喜剧之王里面的翻版。按老婆说的，这片子
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="长江7号" scheme="http://wdicc.com/tags/%E9%95%BF%E6%B1%9F7%E5%8F%B7/"/>
    
  </entry>
  
  <entry>
    <title>老婆明天就要回来了</title>
    <link href="http://wdicc.com/cc-will-be-back-soon/"/>
    <id>http://wdicc.com/cc-will-be-back-soon/</id>
    <published>2007-12-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[老婆回家呆了有一个星期了吧，明天总算要回来了，据说还会给带回来好多好吃的，期待ing。D字头的车贵是贵了点，不过速度真是快，4、5个小时就回来了。不过估计过年的时候买不上火车票，只能坐汽车了。挨。

今天得把屋子收拾收拾了，还要去买菜，买灯，洗衣服等。这周把黑莓手机卖掉了，用了一个半月，亏了500块钱，真是郁闷。当时太冲动了，挨。有啥办法呢，对电子产品的抵抗力太低了，啥都想玩玩，我的钱阿。。
]]></content>
    
    <summary type="html">
    
      老婆回家呆了有一个星期了吧，明天总算要回来了，据说还会给带回来好多好吃的，期待ing。D字头的车贵是贵了点，不过速度真是快，4、5个小时就回来了。不过估计过年的时候买不上火车票，只能坐汽车了。挨。

今天得把屋子收拾收拾了，还要去买菜，买灯，洗衣服等。这周把黑莓手机卖掉了，用了一
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="黑莓" scheme="http://wdicc.com/tags/%E9%BB%91%E8%8E%93/"/>
    
  </entry>
  
  <entry>
    <title>好久好久没有更新blog了</title>
    <link href="http://wdicc.com/long-time-havent-update-blog/"/>
    <id>http://wdicc.com/long-time-havent-update-blog/</id>
    <published>2007-11-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
挺长时间了好像。上班的时候没时间来写，下了班回家又懒得写，有时间去看连续剧了。《越狱》第三季确实没什么好看的，scofiled 完全没有第一季那种感觉，一切都在自己的掌握中。不过将就看了。《heroes》还算好看，不过里面有超能力的人也太多了吧，真像谁说的来着，在那里面，没有超能力都不好意思和人打招呼。现在看这个片子感觉就是在关注什么新的超能力被发现，还有超能力大战了。另外美剧好像都喜欢弄一个很大的后台，叫做company，一波一波的人都为这个公司干活，而且这个公司几乎是无所不能。

昨天老婆给买了一个羽绒服，挺好看，穿着舒服，哈哈。现在买衣服基本什么都不管了，老婆逛街的时候给捎带上就行，呵呵。 嗯，这是有老婆的一个好处。 :D

最近还在写一个perl的脚本。按照计划下周应该完工了。perl的cpan还是很强大的，不过perl的oo感觉没有python好，python的缩进有时候却又让人头疼，呵呵。可惜我们这边python好像不怎么吃香，大家还都停留在perl。php，perl都得会呀，虽然我现在只懂毛皮。
]]></content>
    
    <summary type="html">
    
      
挺长时间了好像。上班的时候没时间来写，下了班回家又懒得写，有时间去看连续剧了。《越狱》第三季确实没什么好看的，scofiled 完全没有第一季那种感觉，一切都在自己的掌握中。不过将就看了。《heroes》还算好看，不过里面有超能力的人也太多了吧，真像谁说的来着，在那里面，没有超
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="work" scheme="http://wdicc.com/tags/work/"/>
    
  </entry>
  
  <entry>
    <title>把wordpress升级到了2.3版本</title>
    <link href="http://wdicc.com/upgrade-blog-to-wp-23/"/>
    <id>http://wdicc.com/upgrade-blog-to-wp-23/</id>
    <published>2007-09-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[测试版的时候懒的弄，现在正式版了，今天有空，就升级了一下。tag使用了自带的，发现不一定就比人家 <a href="http://www.neato.co.nz/ultimate-tag-warrior/" title="Visit plugin homepage" target="_blank" rel="external">Ultimate Tag Warrior</a> 好用。修改工作倒没什么，找了一篇文章参考一下就好。

最近工作基本都切换到了 ArchLinux ，gnome的环境，为了省事吧，fvwm配置起来是很好用，可是那个配置文件几天不看就看不懂了，这实在太累了。

目前遇到的问题好象都能解决。域登陆问题还没有搞定，不知道怎么能登陆windows域，访问那个 fileserver。不过还好，不是总要去访问那个东西。

scim 和 OOo 的冲突问题很麻烦，不过使用 scim-bridge 解决了。但是又出现了 nautilus 和 scim冲突，nautilus 里面不能输入中文，鬼知道是哪个的问题了。不过不能输入中文 就算了，我输入英文总可以了，实在不行还可以去 terminal 下面修改。
]]></content>
    
    <summary type="html">
    
      测试版的时候懒的弄，现在正式版了，今天有空，就升级了一下。tag使用了自带的，发现不一定就比人家 &lt;a href=&quot;http://www.neato.co.nz/ultimate-tag-warrior/&quot; title=&quot;Visit plugin homepage&quot; target
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="wordpress" scheme="http://wdicc.com/tags/wordpress/"/>
    
      <category term="scim" scheme="http://wdicc.com/tags/scim/"/>
    
      <category term="tag" scheme="http://wdicc.com/tags/tag/"/>
    
  </entry>
  
  <entry>
    <title>给freebsd添加新硬盘</title>
    <link href="http://wdicc.com/add-disk-in-freebsd/"/>
    <id>http://wdicc.com/add-disk-in-freebsd/</id>
    <published>2007-09-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[没想到freebsd里面这么变态，linux下面可能fdisk就搞定的事情，到了这里需要好几个操作，还搞不明白怎么回事。。。

要弄清楚这个，先要了解几个概念。bsd下面的ide硬盘叫做 ad，scsi 硬盘叫做da。ad0,ad1,ad2...，按照ide接口来定的。假定新加的硬盘是 ad2。每个ad又可以分4个 slice，这样就有了 ad2s1, ad2s2...。每个slice下面呢，又可以分几个区，例如 ad2s1e, ad2s1f ，可以从 a 到 h 八个，abcd是有特殊意思的。最后实际挂载使用的就是这个 /dev/ad2s1e 了。

这样整个过程就分几个步骤。

<strong>1 先初始化硬盘</strong>
<pre class="prettyprint lang-txt">
1+0 records in
1+0 records out
1024 bytes transferred in 0.000160 secs (6400845 bytes/sec)</pre>
或者
<pre class="prettyprint lang-txt">
******* Working on device /dev/ad2 *******</pre>
此后可以用 fdisk ad2 命令看到一些信息，可以看到整个硬盘的信息。
<pre class="prettyprint lang-txt">
parameters extracted from in-core disklabel are:
cylinders=516822 heads=15 sectors/track=63 (945 blks/cyl)

Figures below won't work with BIOS for partitions not in cyl 1
parameters to be used for BIOS calculations are:
cylinders=516822 heads=15 sectors/track=63 (945 blks/cyl)

Media sector size is 512
Warning: BIOS sector numbering starts with sector 1
Information from DOS bootblock is:
The data for partition 1 is:
sysid 165,(FreeBSD/NetBSD/386BSD)
start 63, size 488396727 (238474 Meg), flag 80 (active)
beg: cyl 0/ head 1/ sector 1;
end: cyl 725/ head 14/ sector 63
The data for partition 2 is:
&lt;unused&gt;
The data for partition 3 is:
&lt;unused&gt;
The data for partition 4 is:
&lt;unused&gt;</pre>
<strong>2 使用 fdisk 命令分 slice</strong>

fdisk -i ad2 会一步一步询问4个slice的设置，比较麻烦。不过这里也可以不分，就一个slice，一样用，呵呵。

<strong>3 使用 disklabel 命令分区</strong>

这里假定我们就一个slice。为这个 slice 建立分区。
<pre class="prettyprint lang-txt">
这样就建立了一个 ad2s1c 的分区，c表示的是整个硬盘。使用下面的命令进行分区，这个还不会玩。。:(
<pre class="prettyprint lang-txt">
<strong>4 使用newfs建立文件系统</strong>

就以分一个区为例，执行下面的命令。
<pre class="prettyprint lang-txt">
这个命令会打印一堆数字，应该表示的是建立文件系统的进度，等会打印完了，分区就可以用了。

参考文章： http://bbs.fyjy.net/printthread.php?t=2037
</pre></pre></pre>]]></content>
    
    <summary type="html">
    
      没想到freebsd里面这么变态，linux下面可能fdisk就搞定的事情，到了这里需要好几个操作，还搞不明白怎么回事。。。

要弄清楚这个，先要了解几个概念。bsd下面的ide硬盘叫做 ad，scsi 硬盘叫做da。ad0,ad1,ad2...，按照ide接口来定的。假定新加的
    
    </summary>
    
    
      <category term="FreeBSD" scheme="http://wdicc.com/tags/FreeBSD/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="添加硬盘" scheme="http://wdicc.com/tags/%E6%B7%BB%E5%8A%A0%E7%A1%AC%E7%9B%98/"/>
    
  </entry>
  
  <entry>
    <title>安装配置一台 apache+php+mysql 的rh el4服务器</title>
    <link href="http://wdicc.com/setup-apache-mysql-php-in-rhel4/"/>
    <id>http://wdicc.com/setup-apache-mysql-php-in-rhel4/</id>
    <published>2007-09-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><strong>系统</strong></p> <p>rh el4 是四张盘，用第一张启动电脑。前面没啥好说的了，后面选择软件的时候，不要选x界面的东西，开发工具全选上，别的好像默认就行了，大概需要2G好像是。</p> <p><strong>Apache</strong></p> <p>apache的下载地址：<a title="http://httpd.apache.org/download.cgi" href="http://httpd.apache.org/download.cgi" target="_blank" rel="external">http://httpd.apache.org/download.cgi</a>，选一个mirror，下载就行了。</p> <p>编译选项： ./configure --prefix=/usr/local/apache/ --enable-rewrite --enable-so</p> <p>rewrite还是很有必要装上的，enable so让apache可以加载php模块。</p> <p><strong>Mysql</strong></p> <p>mysql 的下载地址(以5.0为例)：<a title="http://mysql.org/downloads/mysql/5.0.html#source" href="http://mysql.org/downloads/mysql/5.0.html#source" target="_blank" rel="external">http://mysql.org/downloads/mysql/5.0.html#source</a></p> <p>注意我们这里下载的是 source，要自己来编译。这样可以控制mysql默认的字符集是什么。</p> <p>编译选项： ./configure --prefix=/data/mysql --with-charset=gbk --with-extra-charsets=all</p> <p>这里设置的字符集是gbk，根据需要自己来设计自己的。别的安装的过程可以参考源码目录里面的INSTALL文件，基本按照那个一步一步来就行了。</p> <p><strong>libjpeg</strong></p> <p>安装php之前，先需要自己编译一个 libjpeg 和 libpng，系统安装的少东西，php编译不过去。</p> <p>libjpeg 的下载地址：<a title="ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v6b.tar.gz" href="ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v6b.tar.gz" target="_blank" rel="external">ftp://ftp.uu.net/graphics/jpeg/jpegsrc.v6b.tar.gz</a></p> <p>编译选项：./configure --enable-static --enable-shared --prefix=/usr/local/libjpeg</p> <p><strong>libpng</strong></p> <p>libpng的下载地址：<a title="http://prdownloads.sourceforge.net/libpng/libpng-1.2.20.tar.bz2?download" href="http://prdownloads.sourceforge.net/libpng/libpng-1.2.20.tar.bz2?download" target="_blank" rel="external">http://prdownloads.sourceforge.net/libpng/libpng-1.2.20.tar.bz2?download</a></p> <p>编译选项：./configure --prefix=/usr/local/libpng</p> <p><strong>php</strong></p> <p>php的下载地址(目前的最新版)：<a title="http://cn.php.net/get/php-5.2.4.tar.bz2/from/this/mirror" href="http://cn.php.net/get/php-5.2.4.tar.bz2/from/this/mirror" target="_blank" rel="external">http://cn.php.net/get/php-5.2.4.tar.bz2/from/this/mirror</a></p> <p>编译选项：</p> <p>./configure --with-apxs2=/usr/local/apache/bin/apxs --with-mysql=/data/mysql/&nbsp; --prefix=/usr/local/php5/ --with-config-file-path=/usr/local/php5/etc --with-openssl --enable-mbstring --with-iconv --with-curl --with-gd --with-zlib&nbsp; --with-png-dir=/usr/local/libpng --with-jpeg-dir=/usr/local/libjpeg</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;系统&lt;/strong&gt;&lt;/p&gt; &lt;p&gt;rh el4 是四张盘，用第一张启动电脑。前面没啥好说的了，后面选择软件的时候，不要选x界面的东西，开发工具全选上，别的好像默认就行了，大概需要2G好像是。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;Apache&lt;/strong&gt;&lt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>给ibm server设置raid</title>
    <link href="http://wdicc.com/raid-on-ibm-server/"/>
    <id>http://wdicc.com/raid-on-ibm-server/</id>
    <published>2007-09-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[昨天去给一台没拆封的ibm server装系统，头一次弄了raid，发现操作起来也不难。之前心里没底，就去yahoo搜索了一下，发现图解的都是使用server guide 那个光盘安装windows的（其实就一篇文章，n多人转载了），这次装就顺便拍了一下，呵呵。

server guide 光盘的图，用serverguide安装也挺简单的，光盘启动之后按照提示一步一步来就行了。

<img src="http://photo11.yupoo.com/20070916/085847_910633405.jpg">

<img src="http://photo11.yupoo.com/20070916/085837_2093046889.jpg">

<a id="more"></a>

拆封之后，把硬盘（最少2块，1块做什么raid？）都插上，要注意使劲往里推。然后接上电源、显示器和键盘，就可以开机了。图片都可以在<a href="http://www.yupoo.com/albums/view?id=ff80808114fa6bd801150bd0b8ab6243" target="_blank" rel="external">这里</a>看到。

<img src="http://photo5.yupoo.com/20070916/085619_251160821.jpg">

开机后第二屏信息，上面是2块网卡的信息。提示&lt;CTRL&gt;&lt;A&gt;的时候，按ctrl+a。

<img src="http://photo5.yupoo.com/20070916/085627_387692339.jpg">

按了ctrl+a之后会多出来一行提示，告诉你等会会进入raid的设置界面。

<img src="http://photo11.yupoo.com/20070916/085634_622747700.jpg">

ok，这就是这个界面了。就选第一个 Array Configuration Utility。

<img src="http://photo11.yupoo.com/20070916/085644_1443274542.jpg">

先得初始化一下硬盘。其实这会如果直接 create array的话，他也会提示你需要先初始化硬盘的。

<img src="http://photo5.yupoo.com/20070916/085653_409760939.jpg">

先查找连接上来的硬盘。

<img src="http://photo11.yupoo.com/20070916/085724_132744006.jpg">

找到2块。按insert键选择硬盘，选了之后会在右边的窗口出现。这里是需要2块全选的。选好后，按回车确定。

<img src="http://photo11.yupoo.com/20070916/085704_25723597.jpg">

提示你初始化会删除所有数据。确定，输入yes。此后就开始初始化，我这里好像很快。

<img src="http://photo11.yupoo.com/20070916/085714_1883779879.jpg">

初始化完毕之后又会返回这个菜单，这次选 create array。

<img src="http://photo5.yupoo.com/20070916/085740_911137399.jpg">

再来选硬盘。选完按回车。

<img src="http://photo5.yupoo.com/20070916/085750_1590784025.jpg">

出现raid的设置界面。我就2块硬盘，只有raid 0和1可选。选需要的。

<img src="http://photo11.yupoo.com/20070916/085759_322804327.jpg">

别的都默认好了，不清楚有什么差别。

<img src="http://photo11.yupoo.com/20070916/085807_924423596.jpg">

这就可以done了。之后会重启。

<img src="http://photo11.yupoo.com/20070916/085819_1295559709.jpg">

看到那个raid信息了吧。

<img src="http://photo5.yupoo.com/20070916/085836_2002971014.jpg">
]]></content>
    
    <summary type="html">
    
      昨天去给一台没拆封的ibm server装系统，头一次弄了raid，发现操作起来也不难。之前心里没底，就去yahoo搜索了一下，发现图解的都是使用server guide 那个光盘安装windows的（其实就一篇文章，n多人转载了），这次装就顺便拍了一下，呵呵。

server guide 光盘的图，用serverguide安装也挺简单的，光盘启动之后按照提示一步一步来就行了。

&lt;img src=&quot;http://photo11.yupoo.com/20070916/085847_910633405.jpg&quot; /&gt;

&lt;img src=&quot;http://photo11.yupoo.com/20070916/085837_2093046889.jpg&quot; /&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>gdm登陆窗口的方块乱码</title>
    <link href="http://wdicc.com/gdm-problem/"/>
    <id>http://wdicc.com/gdm-problem/</id>
    <published>2007-09-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>这几天一直有个问题解决不了，gdm的登陆窗口上面的字体是方块。我一般都是使用home下面的.fonts.conf 来配置字体的。不过gdm启动的时候好像也不会读取你home的下吧，所以还是把他放到了/etc/fonts/local.conf 里面。</p> <p>使用gdm的时候，配置为theme的时候，gdm会起不了，不停的尝试，最后出一个提示窗口，全是方块。不过应该是提示没办法启动welcome窗口的。配置为简介模式的话，gdm至少能起来，虽然上面的字体全是方块，连我输入的字也是方块，就算是英文。</p> <p>开始以为是字体设置的问题，把我的自定义设置全部去掉也不行。locale改成英文就正常了。不过还是不爽，搜了半天没找到解决办法，后来有篇文章提示了一下，会不会是字体权限的问题？我才想起来自己添加的雅黑字体，去看了一下，果然只有root可读。修改权限之后，方块的现象没了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这几天一直有个问题解决不了，gdm的登陆窗口上面的字体是方块。我一般都是使用home下面的.fonts.conf 来配置字体的。不过gdm启动的时候好像也不会读取你home的下吧，所以还是把他放到了/etc/fonts/local.conf 里面。&lt;/p&gt; &lt;p&gt;使用gdm
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>锻炼好身体迎接2008</title>
    <link href="http://wdicc.com/take-exercise/"/>
    <id>http://wdicc.com/take-exercise/</id>
    <published>2007-09-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天坐车听广播说只有332天了。其实奥运会如何和我没关系，我也不会去看。一来门票买不起，二来也买不上。尤其好看的比赛，门票就更难买了。总觉得还不如在家看电视。</p> <p>这周是我正式开始锻炼的第二周了。每天早上到健身中心在有个跑步机上面跑20分钟，在另外一个类型的跑步机上面跑15分钟，走5分钟。总共是40分钟。强度不是很大，不过练完了也是大汗淋漓了。跑步20分钟好像大概有200卡热量被消耗，虽然不知道这玩意到底代表什么，不过看着还是挺爽的，呵呵。跑完步还能洗个澡，现在都不用在家里洗澡了，哈哈。</p> <p>不过锻炼了这几天好像啥作用没起还胖了，郁闷。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天坐车听广播说只有332天了。其实奥运会如何和我没关系，我也不会去看。一来门票买不起，二来也买不上。尤其好看的比赛，门票就更难买了。总觉得还不如在家看电视。&lt;/p&gt; &lt;p&gt;这周是我正式开始锻炼的第二周了。每天早上到健身中心在有个跑步机上面跑20分钟，在另外一个类型的跑步机
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>培训结束了</title>
    <link href="http://wdicc.com/see-u-forver/"/>
    <id>http://wdicc.com/see-u-forver/</id>
    <published>2007-08-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>看似很长的2个星期的培训就这么结束了，昨天晚上大家一起在ktv的时候，感觉真像是又毕业了一次。不过这次少了从学校毕业的一些伤感，毕竟培训完了大家也还在一个公司嘛，不像从学校毕业后就各奔东西了，或许就再也没有机会相见了。</p> <p>以前经历过2个公司，一个国企，一个sp公司。国企里面就算有集体活动，也大都以那些高姿态的领导为“核心”了，而且主要是组织活动的人大都是快要退休的脑子已经固化的人，活动基本没什么意思。也可能是我呆的那个国企的平均年龄太大的缘故，活跃不起来。</p> <p>在第二个公司里面，第一次参加了拓展，不过基本是室内的活动，室外就做了那个“牵手”活动。虽然简单，但这一次还是让我感受到了拓展的魅力。在活动里面，教练很会调动大家的积极性，让你毫不害羞的当着大家的面来参加一些活动或者做一些动作。就算你本身很内向，在这里面，也会把你埋藏的很深的那些火热的激情释放出来。</p> <p>而这次的培训不止是在教你如何工作、如何团队合作了，这次是在教你如何做人。公司为什么肯投入这么大的经历来做这个事情呢？我的想法是，要学做事、先学做人。我想人品如果有问题，办出来的事估计也不会好到哪里去。害群之马、一块臭肉坏了整锅汤等，说的不就是个别人影响整个团队么？就像六脉神剑里面要求的，只有团队里面的每个人都诚信、都爱岗敬业、都富有激情，才能谈得上上面一层的团队合作，这些都是团队真正能合作很好的基础。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;看似很长的2个星期的培训就这么结束了，昨天晚上大家一起在ktv的时候，感觉真像是又毕业了一次。不过这次少了从学校毕业的一些伤感，毕竟培训完了大家也还在一个公司嘛，不像从学校毕业后就各奔东西了，或许就再也没有机会相见了。&lt;/p&gt; &lt;p&gt;以前经历过2个公司，一个国企，一个sp公
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="培训" scheme="http://wdicc.com/tags/%E5%9F%B9%E8%AE%AD/"/>
    
      <category term="感想" scheme="http://wdicc.com/tags/%E6%84%9F%E6%83%B3/"/>
    
  </entry>
  
  <entry>
    <title>我能漂起来了，哈哈</title>
    <link href="http://wdicc.com/i-can-float/"/>
    <id>http://wdicc.com/i-can-float/</id>
    <published>2007-08-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>算起来，今天是第三次游泳了吧。我能漂起来了，哈哈。自我感觉还挺好，写写经验。</p> <p>学游泳首先要练的就是憋气。有人会说这个没用，呵呵，我也确实看到了有人头一直露在上面在游，这当然不需要憋气了，不过这个怎么做到的我是真不明白了，所有人教我的时候都是让我把头先伸到水里再说。</p> <p>学会憋气其实也能克服一下对水的恐惧心理。我之前头往水里一浸就害怕，特紧张，就感觉随时都憋不住了。其实后来我和我老婆比赛憋气的时候，我还是能憋好一会的。</p> <p>现在水浅的地方练习憋气，练好之后就去水深的地方，比如到脖子的那种。深水里面水压更大，如果这里面憋气都没问题的话就好说了。</p> <p>憋气的时候，手扶着边，然后脚就做那个自由泳的动作，就是快速的上下摆动，你就会发现你的脚会漂起来露出水面，同时手那里需要的依靠就小了。这基本就漂起来了。</p> <p>之后可以尝试让朋友伸出双手扶着你的手，慢慢往前游看看，应该也没问题了。后面怎么玩我还没学会，哈哈。我现在手一离开依赖就特别害怕，下一步得克服这个。初步想的是找一个有扶梯的地方，扶着水下的部分看看，然后慢慢离开那个依赖。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;算起来，今天是第三次游泳了吧。我能漂起来了，哈哈。自我感觉还挺好，写写经验。&lt;/p&gt; &lt;p&gt;学游泳首先要练的就是憋气。有人会说这个没用，呵呵，我也确实看到了有人头一直露在上面在游，这当然不需要憋气了，不过这个怎么做到的我是真不明白了，所有人教我的时候都是让我把头先伸到水里再
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="游泳" scheme="http://wdicc.com/tags/%E6%B8%B8%E6%B3%B3/"/>
    
  </entry>
  
  <entry>
    <title>yahoo 全能搜索</title>
    <link href="http://wdicc.com/yahoo-search/"/>
    <id>http://wdicc.com/yahoo-search/</id>
    <published>2007-08-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>yahoo新推出的全能搜索感觉很新颖，尤其那个人物关系图，国内好像还没有别家做，呵呵。不过不知道这个图是怎么维护的，如果是人工，那还是很费事的，也不知道这玩意怎么做到智能，我估计还是得人工设置关键字之间的关系。</p> <p>下面是一个介绍的视频。地址在<a href="http://www.yahoo.cn/homepage/flash.html" target="_blank" rel="external">这里</a>。</p> <p>&nbsp;</p> <object codebase="http://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" height="480" width="640" align="middle" classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"><param name="_cx" value="16933"><param name="_cy" value="12700"><param name="FlashVars" value=""><param name="Movie" value="http://www.yahoo.cn/swf/onesearch.swf"><param name="Src" value="http://www.yahoo.cn/swf/onesearch.swf"><param name="WMode" value="Window"><param name="Play" value="-1"><param name="Loop" value="-1"><param name="Quality" value="High"><param name="SAlign" value=""><param name="Menu" value="-1"><param name="Base" value=""><param name="AllowScriptAccess" value="sameDomain"><param name="Scale" value="ShowAll"><param name="DeviceFont" value="0"><param name="EmbedMovie" value="0"><param name="BGColor" value="FFFFFF"><param name="SWRemote" value=""><param name="MovieData" value=""><param name="SeamlessTabbing" value="1"><param name="Profile" value="0"><param name="ProfileAddress" value=""><param name="ProfilePort" value="0"><param name="AllowNetworking" value="all"><param name="AllowFullScreen" value="false"> <embed src="http://www.yahoo.cn/swf/onesearch.swf" quality="high" bgcolor="#ffffff" allowscriptaccess="sameDomain" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" align="middle" height="480" width="640"> </object>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;yahoo新推出的全能搜索感觉很新颖，尤其那个人物关系图，国内好像还没有别家做，呵呵。不过不知道这个图是怎么维护的，如果是人工，那还是很费事的，也不知道这玩意怎么做到智能，我估计还是得人工设置关键字之间的关系。&lt;/p&gt; &lt;p&gt;下面是一个介绍的视频。地址在&lt;a href=&quot;h
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="yahoo" scheme="http://wdicc.com/tags/yahoo/"/>
    
      <category term="搜索" scheme="http://wdicc.com/tags/%E6%90%9C%E7%B4%A2/"/>
    
  </entry>
  
  <entry>
    <title>难道我的广告卖出去了？</title>
    <link href="http://wdicc.com/my-alimama-ad-sold/"/>
    <id>http://wdicc.com/my-alimama-ad-sold/</id>
    <published>2007-08-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>今天总算可以上会网了，看看阿里妈妈上面，发现广告卖出去了？状态是投放中，可是blog应该显示广告的地方显示的是一片空白？很怪异，我也不知道咋回事了。</p> <p>发现alimama上面很多大网站也开始上了，alimama 的成功值日可待啊，呵呵。投放广告之前就可以广告可能的展示次数，还是不错的，可以广告的投放客户很透明的知道这个网站的pv，不过是如果这个网站不想要透露这个信息的话，也是比较麻烦的一个问题。google的adsense广告的话，网站自己可以知道广告的pv，投放广告的就不清楚能不能知道了。不过至少第三方是不清楚这个信息的。他们之间的交易是如何的，可能只有google知道了。alimama 的透明、诚信还是有他的道理的。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;今天总算可以上会网了，看看阿里妈妈上面，发现广告卖出去了？状态是投放中，可是blog应该显示广告的地方显示的是一片空白？很怪异，我也不知道咋回事了。&lt;/p&gt; &lt;p&gt;发现alimama上面很多大网站也开始上了，alimama 的成功值日可待啊，呵呵。投放广告之前就可以广告可能
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="alimama" scheme="http://wdicc.com/tags/alimama/"/>
    
      <category term="广告" scheme="http://wdicc.com/tags/%E5%B9%BF%E5%91%8A/"/>
    
  </entry>
  
  <entry>
    <title>该死的 KB928366</title>
    <link href="http://wdicc.com/damned-kb928366/"/>
    <id>http://wdicc.com/damned-kb928366/</id>
    <published>2007-08-14T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>自从领了笔记本，安装过几次更新之后，就发现有一个更新死活就装不上了。黄盾牌出来后，点安装，等一会提示已经安装成功了。可是过一会黄盾牌就又出来了，依然是刚才的那个补丁。这个补丁是针对 .net frameword 1.1 sp1 的，我已经安装了 .net 的 1.1，2.0，3.0，声明一下不是我自愿的，人家就这么安排的，不清楚为啥装这么多。这个补丁叫 KB928366 。</p> <p>搜索了一下，发现遇到这个问题的还真不少。理解了一下，造成这个问题的原因应该是 .net 1.1 安装完毕之后就将安装文件删掉了，但是安装这个补丁的时候呢，还需要这个安装文件，所以就这样了。解决办法是重新下载一次 .net 1.1 ，然后解出来里面的文件，安装 kb928366 的时候指定一下安装位置。我看有些人就这么解决了。可是我发现我这里运行 kb928366 根本没反应，硬盘灯闪一会，什么窗口都没出来，更别说指定位置了。这招行不通了。</p> <p>另外一个解决办法就是先将 2.0，3.0 ，1.1 都卸载掉，然后重新安装一遍，安装2.0，3.0之前安装那个补丁就好了。我就是这么做的。期间卸载 1.1 的时候遇到了卸载不了的问题，可以参考<a href="http://support.microsoft.com/kb/824643" target="_blank" rel="external">这里</a>。那个 Msizap.exe 可以在 WindowsXP-KB838079-SupportTools-ENU 这个里面找到，不用下载那个 sdk，那个 sdk 太大了。</p> <p>那个黄色盾牌总算不出来了，nnd。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;自从领了笔记本，安装过几次更新之后，就发现有一个更新死活就装不上了。黄盾牌出来后，点安装，等一会提示已经安装成功了。可是过一会黄盾牌就又出来了，依然是刚才的那个补丁。这个补丁是针对 .net frameword 1.1 sp1 的，我已经安装了 .net 的 1.1，2.0
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
      <category term="kb928366" scheme="http://wdicc.com/tags/kb928366/"/>
    
  </entry>
  
  <entry>
    <title>阿里妈妈来了</title>
    <link href="http://wdicc.com/alimama-is-coming/"/>
    <id>http://wdicc.com/alimama-is-coming/</id>
    <published>2007-08-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>不知道什么是<a href="http://www.alimama.com/" target="_blank" rel="external">阿里妈妈</a>？那你老土了，哈哈。第一次听说的时候，大家都在问，那有阿里爷爷，阿里儿子没？呵呵。<a title="http://www.alimama.com/" href="http://www.alimama.com/" target="_blank" rel="external">http://www.alimama.com/</a>&nbsp;是阿里妈妈的网址，这两天刚上线。</p> <p>alimama 是一个广告的c2c平台。什么是c2c？c2c=Consumer To Consumer，b2b=Business to Business。你可以把你网站的广告位放到这个平台上面去卖，我看了一下，有卖50元/一周的，也有卖0.5元/一周的，呵呵，就看你网站的pv，uv了。</p> <p>btw：还是装了一个livewriter，blog后台打开太慢了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不知道什么是&lt;a href=&quot;http://www.alimama.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;阿里妈妈&lt;/a&gt;？那你老土了，哈哈。第一次听说的时候，大家都在问，那有阿里爷爷，阿里儿子没？呵呵。&lt;a title=&quot;http://
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="alimama" scheme="http://wdicc.com/tags/alimama/"/>
    
  </entry>
  
  <entry>
    <title>有好几天没有更新blog了</title>
    <link href="http://wdicc.com/update-blog-and-setup-wiki/"/>
    <id>http://wdicc.com/update-blog-and-setup-wiki/</id>
    <published>2007-08-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[新的公司感觉大家都在忙忙碌碌的工作，我虽然事情不多，但是需要学的东西还是有的，所以上班也就没功夫来整这些东西了。不过忙里偷闲，晚上回来还是把我的<a href="http://wiki.wdicc.com" title="wiki" target="_blank" rel="external"> wiki</a> 弄好了，以后技术内容可以放那里了。感觉还是wiki比较适合组织这些东西。

wiki程序用的是 douku wiki，感觉像是中国人取的名字。。。不过看网址又不像，不知道了就。用起来还挺好用的。mediawiki 需要php5，twiki需求更麻烦，perl的，租的空间也不容易满足。doukuwiki还挺好用的，不需要数据库，编辑起来格式也简单，界面还算清新。

live writer还没有安装，所以只能来blog后台来写了，好久没用后台了都。
]]></content>
    
    <summary type="html">
    
      新的公司感觉大家都在忙忙碌碌的工作，我虽然事情不多，但是需要学的东西还是有的，所以上班也就没功夫来整这些东西了。不过忙里偷闲，晚上回来还是把我的&lt;a href=&quot;http://wiki.wdicc.com&quot; title=&quot;wiki&quot; target=&quot;_blank&quot; rel=&quot;ex
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="blog" scheme="http://wdicc.com/tags/blog/"/>
    
      <category term="wiki" scheme="http://wdicc.com/tags/wiki/"/>
    
  </entry>
  
  <entry>
    <title>特制面条的做法</title>
    <link href="http://wdicc.com/spacial-noodles/"/>
    <id>http://wdicc.com/spacial-noodles/</id>
    <published>2007-07-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>我家乡的做法，嗯。上次给一个人说了半天如何做，打了不少字，就copy下来了，放这里好了。</p> <p>做法挺简单的。</p> <ol> <li>先把材料准备好，西红柿1个，土豆2，3个，豆腐半个，肉一点，葱姜花椒末，尖椒3，4个。</li> <li>都切好，西红柿可以最后切。土豆切小指宽的条。葱切碎末。豆腐和土豆一样。肉切末比较好，也可以切块切条，如果是末的话，可以在出国前撒锅里，如果是块的话，就最早放锅里，肉变色了再放别的。</li> <li>先放油，油开了放花椒末，放葱，放肉，肉变色放尖椒，然后放鸡精，炒一下放土豆，翻炒几下，放酱油，让土豆能变色就行了，多少无所谓，会影响到最后出锅的汤的颜色深浅。</li> <li>然后翻炒几下，放水。看你的食量放水，等水开。这时可以切西红柿，切豆腐放进去。</li> <li>水开后，放面条，再开放鸡蛋。</li> <li>注意不要糊锅，别盖锅盖。等鸡蛋熟了面条软硬合适，关火，放切好的葱末和鲜姜末，搅匀就可以吃了，最后那一步鲜姜很重要。</li></ol> <p>回头看哪天弄一个图片上来，我老婆说我的面条已经到了“神仙画画”的地步了，呵呵。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;我家乡的做法，嗯。上次给一个人说了半天如何做，打了不少字，就copy下来了，放这里好了。&lt;/p&gt; &lt;p&gt;做法挺简单的。&lt;/p&gt; &lt;ol&gt; &lt;li&gt;先把材料准备好，西红柿1个，土豆2，3个，豆腐半个，肉一点，葱姜花椒末，尖椒3，4个。&lt;/li&gt; &lt;li&gt;都切好，西红柿可以最后
    
    </summary>
    
    
      <category term="Food" scheme="http://wdicc.com/tags/Food/"/>
    
      <category term="noodle" scheme="http://wdicc.com/tags/noodle/"/>
    
  </entry>
  
  <entry>
    <title>测试看看还乱码不</title>
    <link href="http://wdicc.com/test-live-writer-3/"/>
    <id>http://wdicc.com/test-live-writer-3/</id>
    <published>2007-07-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>迁移了一下之后，live writer 发布的时候总乱码，不知道咋回事。再测试看看。</p> <p>在<a href="http://e-spacy.com/blog/1894.html" target="_blank" rel="external">这里</a>找到一个乱码问题的解决方法，测试看看。</p> <p>下面这个图是空调车。。。</p> <p><img src="http://photo8.yupoo.com/20070717/091948_1908862546.jpg"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;迁移了一下之后，live writer 发布的时候总乱码，不知道咋回事。再测试看看。&lt;/p&gt; &lt;p&gt;在&lt;a href=&quot;http://e-spacy.com/blog/1894.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;找到一个乱
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>Blog 做了一下迁移</title>
    <link href="http://wdicc.com/move-blog-to-paangood/"/>
    <id>http://wdicc.com/move-blog-to-paangood/</id>
    <published>2007-07-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[因为要从这边离职了，不能蹭公司的服务器了，所以得找个新的地方。看来看去，dreamhost肯定是很爽的，可是也太贵了，咱现在还没这个资本去买这个空间，后来还是买了盘古的空间了。150一年，100M空间。不过北京网通访问起来速度不是很快。凑合用了，反正也就100多块钱。而刚好我在<a href="http://blog.wdicc.com/wordpress/about-mycity/" target="_blank" rel="external">博邻</a>的奖金也是150.。。。这就给这边花了，呵呵。老婆还说奖金可以去吃好多顿火锅呢，看来没戏了，哈哈。

我原来的数据库用的是　mysql 4.1.x ，新的是 4.0.x ，版本看起来差别不大，可是变化挺大。4.1支持每个库，每个表设置  charset，4.0还没有。4.0导入4.1好多人都乱码了。我从4.1 导入 4.0 开始也乱码了。后来搜了一下，找到一个方法，4.1 的mysqldump  有个 compactable 选项，指定是 mysql40 就行了。现在 phpmyadmin 里面看，中文也正常了。

迁移的时候顺手就换了一个  theme，弄了一天才弄好。不太喜欢这种用ftp上传的方法，都习惯用vim直接编辑文件了，本地没有环境，只能修改一下上传一次。盘古的ftp发呆时间还比较短，隔一会就得重新连接一下。感觉好墨迹。

老婆这几天一定要我写写她，可是写什么呢，她一天到晚都呆在家里，我觉得都要发霉了，让她去晒晒太阳好茁壮成长都懒得去，没办法。不过前几天她突发奇想写了一首改编自《小白兔，白又白》那个儿歌的儿歌，我贴到水木上面，加了好多个x，还是被不可re了，就看到有人发了一个帖子说“我靠，那个儿歌太x了。。。”，不过此文也被立刻删掉啦。不能re了肯定上不了十大了，也挺郁闷的，呵呵。
]]></content>
    
    <summary type="html">
    
      因为要从这边离职了，不能蹭公司的服务器了，所以得找个新的地方。看来看去，dreamhost肯定是很爽的，可是也太贵了，咱现在还没这个资本去买这个空间，后来还是买了盘古的空间了。150一年，100M空间。不过北京网通访问起来速度不是很快。凑合用了，反正也就100多块钱。而刚好我在&lt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="mysql" scheme="http://wdicc.com/tags/mysql/"/>
    
      <category term="blog" scheme="http://wdicc.com/tags/blog/"/>
    
      <category term="乱码" scheme="http://wdicc.com/tags/%E4%B9%B1%E7%A0%81/"/>
    
      <category term="cc" scheme="http://wdicc.com/tags/cc/"/>
    
      <category term="博邻" scheme="http://wdicc.com/tags/%E5%8D%9A%E9%82%BB/"/>
    
  </entry>
  
  <entry>
    <title>涉及到linux系统安全的几个文件</title>
    <link href="http://wdicc.com/some-importent-files-in-linux/"/>
    <id>http://wdicc.com/some-importent-files-in-linux/</id>
    <published>2007-07-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>部分内容转自<a href="http://man.chinaunix.net/linux/debian/debian_learning/index.html" target="_blank">这里</a></p> <p><strong>1 cron.allow,cron.deny</strong></p> <blockquote> <p>If the cron.allow file exists, then you must be listed therein in order to  be  allowed  to  use  this  command.   If  the  cron.allow  file  does  not  exist but the cron.deny file does exist, then you must not be listed in the cron.deny file in order to use this command.  If neither of these files exists, only the super user will be allowed to use this command.</p></blockquote> <p>上面是引用 man crontab 里面的一段解释。如果 cron.allow 存在，那里面的用户可以使用crontab命令。如果cron.allow 不存在，而 cron.deny 存在，那么列在里面的用户不可以使用crontab命令。如果都不存在，那么只允许super用户来使用这个命令。 </p><p>安装rh的时候，默认就会存在一个 cron.deny 的空文件，所以普通用户也可以使用crontab。 </p><p><strong>2 at.allow,at.deny</strong> <blockquote> <p>The  superuser  may  use  these  commands  in  any case.  For other users, permission to use at is determined by the files<br>/etc/at.allow and /etc/at.deny. </p> <p>If the file /etc/at.allow exists, only usernames mentioned in it are allowed to use at. </p> <p>If /etc/at.allow does not exist, /etc/at.deny is checked, every username not mentioned in it is then allowed to use at.  </p><p>If neither exists, only the superuser is allowed use of at.  </p><p>An empty /etc/at.deny means that every user is allowed use these commands, this is the default configuration.</p></blockquote> </p><p>这个其实和上面那个是类似的。默认也是有个空的 at.deny 文件，允许所有用户使用at。 </p><p><strong>3 /etc/security/access.conf</strong> <blockquote> <p># Login access control table.<br># <br># When someone logs in, the table is scanned for the first entry that<br># matches the (user, host) combination, or, in case of non-networked<br># logins, the first entry that matches the (user, tty) combination.  The<br># permissions field of that table entry determines whether the login will <br># be accepted or refused.</p></blockquote> </p><p>login 权限控制表。可以控制允许登陆的ip，登陆的tty等信息。 <blockquote> <p># Disallow console logins to all but a few accounts.<br>#<br>#-:ALL EXCEPT wheel shutdown sync:LOCAL</p></blockquote> </p><p>比如可以设置只允许某些用户从本地登陆。建议设置root用户不能从本地登陆。 </p><p><strong>4 /etc/securetty</strong> </p><p>该文件可控制根用户登录的设备，该文件里记录的是可以作为根用户登录的设备名，如tty1、tty2等。用户是不能从不存在于该文件里的设备登录为根用户的。这种情况用户只能以普通用户登录进来，再用su命令转为根用户。/etc/securetty文件的格式如下：<pre># /etc/securetty: list of terminals on which root is allowed to login.
# See securetty(5) and login(1).
console

# for people with serial port consoles
ttyS0

# for devfs
tts/0

# Standard consoles
tty1
tty2
tty3
...
</pre>
</p><p>如果/etc/securetty是一个空文件，则根用户就不能从任务的设备登录系统。只能以普通用户登录，再用su命令转成根用户。如果/etc/securetty文件不存在，那么根用户可以从任何地方登录。这样会引发安全问题，所以/etc/securetty文件在系统中是一定要存在的。
</p><p><strong>5  /etc/login.defs</strong></p>
<p>login.defs是设置用户帐号限制的文件，在这里我们可配置密码的最大过期天数，密码的最大长度约束等内容。该文件里的配置对root用户无效。如果/etc/shadow文件里有相同的选项，则以/etc/shadow里的设置为准，也就是说/etc/shadow的配置优先级高于 /etc/login.defs。下面内容是该文件的节选：<pre>...
#
# Password aging controls:
#
#       PASS_MAX_DAYS   Maximum number of days a password may be used.
#       PASS_MIN_DAYS   Minimum number of days allowed between password change.
#       PASS_WARN_AGE   Number of days warning given before a password expires.
#
PASS_MAX_DAYS 99999
PASS_MIN_DAYS 0
PASS_WARN_AGE 7
...
#
# Number of significant characters in the password for crypt().
# Default is 8, don't change unless your crypt() is better.
# If using MD5 in your PAM configuration, set this higher.
#
PASS_MAX_LEN            8
...
</pre>
</p><p><strong>6 /etc/pam.d/su</strong></p>
<p>通过pam来限制su命令的使用。比如可以设置哪些组，哪些用户才能使用。</p>
<p>#auth       sufficient   /lib/security/$ISA/pam_wheel.so trust use_uid<br># Uncomment the following line to require a user to be in the "wheel" group.<br>auth       required     /lib/security/$ISA/pam_wheel.so group=admin</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;部分内容转自&lt;a href=&quot;http://man.chinaunix.net/linux/debian/debian_learning/index.html&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;1 cron.allow,cron.
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="secure" scheme="http://wdicc.com/tags/secure/"/>
    
  </entry>
  
  <entry>
    <title>帖一些相片，嘿嘿</title>
    <link href="http://wdicc.com/some-pics/"/>
    <id>http://wdicc.com/some-pics/</id>
    <published>2007-07-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://static.zooomr.com/images/2679936_ffb63a009d_m.jpg"> <img src="http://static.zooomr.com/images/2679932_45d14a4f03_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2679930_b51c3fbfd2_m.jpg"> <img src="http://static.zooomr.com/images/2679928_ee9dafa8fe_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2667181_f939e0ac36.jpg?r=360"> </p> <p><img src="http://static.zooomr.com/images/2666817_de6ea1fc4e.jpg?r=360"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://static.zooomr.com/images/2679936_ffb63a009d_m.jpg&quot;&gt; &lt;img src=&quot;http://static.zooomr.com/images/2679932_45d14a4f03_m.jpg&quot;&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="cc" scheme="http://wdicc.com/tags/cc/"/>
    
      <category term="婚纱照" scheme="http://wdicc.com/tags/%E5%A9%9A%E7%BA%B1%E7%85%A7/"/>
    
  </entry>
  
  <entry>
    <title>非常不错的 utorrent</title>
    <link href="http://wdicc.com/utorrent-is-the-best-bittorrent-client/"/>
    <id>http://wdicc.com/utorrent-is-the-best-bittorrent-client/</id>
    <published>2007-07-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最早发现bt这玩意的时候，还是2003年。那会上 btchina 找新资源是一种乐趣。那会用的是官方的那个下载软件，就一个界面，下载几个开几个窗口，下载速度不能控制。后来慢慢有了能控制速度的版本，但是界面还基本都那么单一。再后来就用上了 bitsprit，bitcomet这些。bitcomet用了很长时间，内网速度很好，占资源又少。但是自从 0.7（好像是这个版本）之后，就没用过了，下载速度不见长，还往下掉，运行也越来越慢。那会我就开始用bitsprite了，虽然也不怎么样，但是下载还是有速度的。。。</p> <p>今天无聊试了下utorrent，发现速度还是上不去，就几k，这真没办法用。翻了一下utorrent 的论坛，<font color="#008080">取消了“upnp映射”这个选项</font>的选择后，发现速度上去了！现在长时间都是 100多k，还是比较爽的。还用上了 utorrent 的webui，类似 mldonkey 了现在，可以远程操纵 utorrent。感觉良好，呵呵。</p> <p>webui 地址： <a href="http://forum.utorrent.com/viewtopic.php?id=14565" target="_blank">这里</a>，最新的 utorrent 1.7 beta 可以用。看看 webui的readme就知道怎么安装了。</p> <p>另外还有一个 fx 的扩展： <a href="http://forum.utorrent.com/viewtopic.php?id=15619" target="_blank">这里</a></p> <p><a href="http://www.zooomr.com/photos/wd/2660430/" target="_blank" atomicselection="true"><img src="http://static.zooomr.com/images/2660430_10aa0a1b1e.jpg?r=360"></a></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最早发现bt这玩意的时候，还是2003年。那会上 btchina 找新资源是一种乐趣。那会用的是官方的那个下载软件，就一个界面，下载几个开几个窗口，下载速度不能控制。后来慢慢有了能控制速度的版本，但是界面还基本都那么单一。再后来就用上了 bitsprit，bitcomet这
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="utorrent" scheme="http://wdicc.com/tags/utorrent/"/>
    
  </entry>
  
  <entry>
    <title>smsd 发送中文短信乱码</title>
    <link href="http://wdicc.com/smsd-and-chinese/"/>
    <id>http://wdicc.com/smsd-and-chinese/</id>
    <published>2007-07-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>smsd是使用mysql数据库的，所以这个乱码很容易把人搞晕。我之前<a href="http://blog.wdicc.com/wordpress/gnokii_howto_chinese_sms/" target="_blank" rel="external">写过</a>gnokii发送短信是和locale有关系的，只要在utf8的locale下面就可以正常发送中文短信了。而smsd也和这个类似，也需要utf8的locale。但是还需要注意的一点就是mysql也是有编码设置的。所以可能会认为，文本插入数据库之前是不是也需要对数据库做utf8的设置呢？其实是不需要的，这么做反而会造成乱码。</p> <p>smsd连接mysql用的是mysql默认的字符集，那么我们插入文本的时候，也同样需要使用这个字符集，需要注意的是，这个文本也需要是utf8编码的。mysql默认的字符集通常是 “default-character-set&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latin1”。</p> <p>我写的一个python的用来插入数据库要发送的信息的程序。</p> <p><pre lang="python">#!/usr/bin/env python2.3
#coding=utf-8
import sys
import MySQLdb

#  inbox
#+------------+------------------+------+-----+---------------------+----------------+
#| Field      | Type             | Null | Key | Default             | Extra          |
#+------------+------------------+------+-----+---------------------+----------------+
#| id         | int(10) unsigned |      | PRI | NULL                | auto_increment |
#| number     | varchar(20)      |      |     |                     |                |
#| smsdate    | datetime         |      |     | 0000-00-00 00:00:00 |                |
#| insertdate | timestamp        | YES  |     | CURRENT_TIMESTAMP   |                |
#| text       | varchar(160)     | YES  |     | NULL                |                |
#| phone      | tinyint(4)       | YES  |     | NULL                |                |
#| processed  | tinyint(4)       |      |     | 0                   |                |
#+------------+------------------+------+-----+---------------------+----------------+

#  outbox
#+----------------+------------------+------+-----+---------------------+----------------+
#| Field          | Type             | Null | Key | Default             | Extra          |
#+----------------+------------------+------+-----+---------------------+----------------+
#| id             | int(10) unsigned |      | PRI | NULL                | auto_increment |
#| number         | varchar(20)      |      |     |                     |                |
#| processed_date | timestamp        | YES  |     | CURRENT_TIMESTAMP   |                |
#| insertdate     | timestamp        | YES  |     | 0000-00-00 00:00:00 |                |
#| text           | varchar(160)     | YES  |     | NULL                |                |
#| phone          | tinyint(4)       | YES  |     | NULL                |                |
#| processed      | tinyint(4)       |      |     | 0                   |                |
#| error          | tinyint(4)       |      |     | -1                  |                |
#| dreport        | tinyint(4)       |      |     | 0                   |                |
#| not_before     | time             |      |     | 00:00:00            |                |
#| not_after      | time             |      |     | 23:59:59            |                |
#+----------------+------------------+------+-----+---------------------+----------------+

class Mydb:
        def __init__(self):
                try:
                        self.db=MySQLdb.Connection(host="localhost",user="gnokii",
                                passwd="gnokii",db="gnokii")

                except MySQLdb.OperationalError, message:
                        errorMessage = "Error %d:\n%s" % (message[ 0 ], message[ 1 ] )
                        print errorMessage
                        sys.exit(1)
                else:   
                        self.cursor = self.db.cursor()
#                       self.cursor.execute("SET NAMES 'utf8'")
                        return
                        
        def insert(self,sql):
                self.cursor.execute(sql)
        
        def showdata(self,sql):
                self.cursor.execute(sql)
                return self.cursor.fetchall()
                
        def __del__(self):
                self.cursor.close
                self.db.close

text = sys.stdin.read()
db = Mydb()

if len(sys.argv) &gt; 1 and len(text):
        number = sys.argv[1]
        sql = 'insert into outbox (number,text) VALUES ("' + number + '","' + text + '")'
        
        db.insert(sql)

else:   
        print 
        print "    ********** outbox ********** "
        for rs in db.showdata("select * from outbox"):
                print rs[0],rs[1],rs[2],rs[-7],rs[-5]
        
        print "    ********** inbox *********"
        for rs2 in db.showdata("select * from inbox"):
                print rs2[0],rs2[1],rs2[-3]</pre>
</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;smsd是使用mysql数据库的，所以这个乱码很容易把人搞晕。我之前&lt;a href=&quot;http://blog.wdicc.com/wordpress/gnokii_howto_chinese_sms/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;写过&lt;/
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="gnokii" scheme="http://wdicc.com/tags/gnokii/"/>
    
      <category term="smsd" scheme="http://wdicc.com/tags/smsd/"/>
    
  </entry>
  
  <entry>
    <title>今天是老婆生日</title>
    <link href="http://wdicc.com/happy-birthday-to-cc-2/"/>
    <id>http://wdicc.com/happy-birthday-to-cc-2/</id>
    <published>2007-07-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><img src="http://static.zooomr.com/images/2610988_289076f6e9_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2610528_a2783d34d0_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2610438_046cef82a2_m.jpg"> </p> <p>这是老婆过生日她同学送的花篮，呵呵。zoomr传了半天失败了n次才把这个图片传上去，真郁闷。</p> <p>老婆又生日了，和我认识的第4个了。2004年5月份认识，也就是在她的生日前后在一起的。在一个桑拿天去了嘉年华，那汗把我一件新T恤上面的图案都洗了，北京的天气真bt，不过也可能是我的T恤的问题。。。。</p> <p>刚想起来和老婆在一起后的一个小故事，呵呵。有天早上我走的时候，顺手从冰箱里面拿出来一袋牛奶，本来想自己带的，结果放桌子上面忘记了。老婆后起来的，看到那个牛奶还挺感动，以为是我怕牛奶太凉早上喝不合适，提前给她拿出来的，哈哈呵呵嘿嘿。。。</p> <p>老婆<font color="#008000" size="4">生日快乐</font>哦。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;img src=&quot;http://static.zooomr.com/images/2610988_289076f6e9_m.jpg&quot;&gt; &lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://static.zooomr.com/images/2610528_a2783d34d0
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="生日" scheme="http://wdicc.com/tags/%E7%94%9F%E6%97%A5/"/>
    
  </entry>
  
  <entry>
    <title>oracle 的 job 又遇到问题了</title>
    <link href="http://wdicc.com/oracle-jobs/"/>
    <id>http://wdicc.com/oracle-jobs/</id>
    <published>2007-06-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>还是高级复制的问题，这次可能是因为job执行过程中，对方机器刚好重启导致的。反正job是卡在那里了，都10多天了。</p> <p>查看 dba_jobs_running 表，可以看到卡住的job的 job_id 和 sid 。查看 dba_jobs 表，可以看到相应 job 的信息，this_date 如果有数据的话，表示的是 job 开始执行的时间，next_date 是下次执行 job 的时间，如果 job 正常执行完毕，那么 this_date 应该是空的。根据 sid 还可以查看 v$session_wait 和 v$session 里面的这个 job 的一些状态。</p> <p>尝试了下面的方法来重新运行job，当时好像不好用，不过今天来看的时候，job是执行了。现在也不清楚是不是我这个操作起作用了，真晕。</p> <p><pre lang="txt">SQL&gt; exec dbms_job.broken(109,true);

PL/SQL procedure successfully completed.

SQL&gt; commit;

Commit complete.

SQL&gt; select job,sid from dba_jobs_running;

       JOB        SID
---------- ----------
       109        656

SQL&gt; select saddr,sid,serial#,paddr,username,status from v$session where username = 'REPADMIN';

SADDR           SID    SERIAL# PADDR    USERNAME                       STATUS
-------- ---------- ---------- -------- ------------------------------ --------
973CF8C4        626         27 98F96BB8 REPADMIN                       ACTIVE
973D2E7C        629         10 98F88670 REPADMIN                       ACTIVE
973F11F4        656         10 98F88174 REPADMIN                       ACTIVE

SQL&gt; alter system kill session '656,10';

System altered.

SQL&gt; select saddr,sid,serial#,paddr,username,status from v$session where username = 'REPADMIN';

no rows selected

SQL&gt; select job,sid from dba_jobs_running;

no rows selected

SQL&gt; select job,log_user,last_date,next_date from dba_jobs where log_user='REPADMIN';

       JOB LOG_USER                       LAST_DATE
---------- ------------------------------ -------------------
NEXT_DATE
-------------------
       106 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43

       109 REPADMIN                       2007-06-28 16:07:38
4000-01-01 00:00:00

       110 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43


SQL&gt; exec dbms_job.broken(109,false,sysdate);

PL/SQL procedure successfully completed.

SQL&gt; commit;

Commit complete.

SQL&gt; select job,log_user,last_date,next_date from dba_jobs where log_user='REPADMIN';

       JOB LOG_USER                       LAST_DATE
---------- ------------------------------ -------------------
NEXT_DATE
-------------------
       106 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43

       109 REPADMIN                       2007-06-28 16:07:38
2007-06-28 16:28:40

       110 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43
</pre>
</p><p>此后就我所知道的，就只能等着了。dbms_job.run(job_id) 也可以让 job 立即执行。关键是看 this_date ，他的值就是开始执行 job 的时间，job 如果执行时间太长，而下次执行又太快的话，可能也会导致问题。所以还可以尝试手动执行 job 看看。 dba_jobs 的 waht 字段就是对于的语句。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;还是高级复制的问题，这次可能是因为job执行过程中，对方机器刚好重启导致的。反正job是卡在那里了，都10多天了。&lt;/p&gt; &lt;p&gt;查看 dba_jobs_running 表，可以看到卡住的job的 job_id 和 sid 。查看 dba_jobs 表，可以看到相应 job
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="job" scheme="http://wdicc.com/tags/job/"/>
    
      <category term="高级复制" scheme="http://wdicc.com/tags/%E9%AB%98%E7%BA%A7%E5%A4%8D%E5%88%B6/"/>
    
  </entry>
  
  <entry>
    <title>爆笑幼儿园（转载）</title>
    <link href="http://wdicc.com/funny-words-of-child/"/>
    <id>http://wdicc.com/funny-words-of-child/</id>
    <published>2007-06-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>转自<a href="http://www.leehare.cn/read.php?3560" target="_blank" rel="external">这里</a>。</p> <p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1号幼儿园 <br></strong>问题一：如果有一天大海里没有水了，鱼怎么办呢？ <br>　　小朋友A：鱼到小河里去呗。（想了想，继续）哦，不行，那鲸鱼怎么办？太大了，进不去。（真体贴啊） <br>　　小朋友B：变化石呗。（鱼们狂吐血……） <br>问题二：牛奶是从哪里来的？ <br>　　小朋友A：奶牛肚子下面有几个嘴，从那里流出来的。（你真的确定那是嘴吗？） <br>　　继续问：那椰奶怎么来的？ <br>　　小朋友B：椰奶是羊奶吧。（扯太远了吧，兄弟） <br>　　继续问到底：羊奶是什么？ <br>　　小朋友B：羊奶就是酸奶吧，我们家不喝的，我们家订的是光明牛奶。（好可怕的逻辑） <br>问题三：小朋友的脸是干吗用的？ <br>　　小朋友A：给妈妈亲的。 <br>　　追问：那给不给爸爸亲？ <br>　　小朋友A：给爸爸亲。 <br>　　继续追问：那你的脸到底是给谁亲的？ <br>　　小朋友A：给妈妈亲的。（爸爸泪流满面） <br>　　小朋友B：贴纸头用的。（你的脸难道是布告栏？） <br>问题四：为什么小孩子是从妈妈肚子里出来的，不是从爸爸肚子里出来的？ <br>　　小朋友A：女孩子是从妈妈肚子里出来的，男孩子是从爸爸肚子里出来的。（真会蒙人） <br>　　小男孩B：因为男生可爱！（小女孩们一起叫：男生不可爱！） <br>问题五：小朋友的头发有什么用？ <br>　　小女孩A：用来梳头发的。 <br>　　提问小男孩B：那你的头发不能扎辫子，有什么用呢？ <br>　　小朋友B：用来给理发店剃头的。（可贵的奉献精神） </p>
<a id="more"></a>
 <p><strong>2号幼儿园 </strong><br>问题一：人为什么只有两条腿？ <br>　　小朋友A：因为我们不是动物。（鸭子难道是四条腿？） <br>　　小朋友B：人长不出四条腿。（这是上天的安排，最大） <br>　　小朋友C：（自己大笑）长四条腿就要打架了。 <br>　　追问：可是狗狗长得四条腿跑得很快啊？ <br>　　小朋友C：（发呆）……（众小朋友纷纷大叫：我比狗跑得快！） <br>问题二：怎样才能让胖子马上瘦下来？ <br>　　小朋友A：吃减肥饼干。（还算聪明） <br>　　追问：吃减肥饼干不能立即瘦，怎样才能一下子变瘦？ <br>　　小朋友A: 那不吃减肥饼干。（你耍我？） <br>问题三：怎样才能让瘦子马上胖起来？ <br>　　小朋友A：喝牛奶。（牛奶又不是猪饲料） <br>　　小朋友B：吃很多饭就能当公安。（公安都是胖子？） <br>问题四：为什么有气球会飞到天上去？ <br>　　小朋友A：因为它有气。（没气能叫气球吗？） <br>　　追问：那为什么有的气球不能飞上天？ <br>　　小朋友A：因为里面气太少。（真会胡扯） <br><strong>3号幼儿园</strong><br>问题一：什么动物两只脚，早上太阳公公起来的时候，它会叫你起床？ <br>　　小朋友A：鸡，公鸡。（另一个小孩叫道：父鸡） <br>　　很好奇地问：什么叫父鸡？ <br>　　小朋友：母鸡叫母鸡，公鸡就叫父鸡。（恍然大悟……） <br>　　小朋友B：妈妈。 <br>　　小朋友C：太阳。（汗……太阳它8是动物啊） <br>　　继续问：太阳长脚吗？ <br>　　小朋友C：太阳有五只脚。（另一个小孩反驳：七只，彩虹是七种颜色的） <br>问题二：什么叫七嘴八舌？ <br>　　小朋友A：就是七个嘴巴，八个舌头，说话很乱。（有道理）又补充道：我们现在就是七嘴八舌。（还是有自知之明的） <br>　　小朋友B：变出很多个舌头。（好可怕……） <br>问题三：怎么分辨男女？ <br>　　小朋友A：看头发，长头发的是女孩，短头发的是男孩。（旁边一个短头发女孩泪奔……） <br>　　小朋友B：偷看他（她）小便，站着的是男生，蹲着的是女生。（这点年纪就好色……） <br>　　小朋友C：看他（她）穿什么袜子，红的是女生，蓝的是男生。（好纯情……） <br>　　小朋友D：看眼神。（好飘忽……） <br>问题四：如果朝鱼塘里扔块石头，会发生什么现象？ <br>　　小朋友A：水会变成波波。（……） <br>　　小朋友B：鱼会漂上来。（渔民很开心……） <br>　　小朋友C：罚款五块。（汗……） <br><strong>4号幼儿园</strong><br>问题一：汤山为什么叫汤山？ <br>　　小朋友A：因为是喝汤的山。（还真是望文生义啊……） <br>　　小朋友B：汤山是个温泉，洗澡的地方。（答非所问……） <br>　　小朋友C：下面很烫，所以叫汤山呗。（汗……原来是烫山……） <br>　　小朋友D：汤山是谁？（……） <br>问题二：有个老爷爷丢了一匹马，你认为马还会回来吗？ <br>　　小朋友A：不会，因为马在路上玩呢。（贪玩的马……） <br>　　小朋友B：不会，马它不会看年轮。（没见过马走路还要看年轮的……） <br>　　小朋友C：不会，马去和别的马结婚了。（还真是个浪漫的小孩……） <br>　　小朋友D：不会，老爷爷对那马不好，马去找新主人了。（现实很残酷，马也需要跳槽……） <br>问题三：医院里发药的阿姨为什么要戴口罩？ <br>　　小朋友A：因为院长怕她们偷吃。（难道药好吃？） <br>　　立即有个小朋友抢着说道：那些拿手术刀的叔叔戴口罩是不是怕他们聚餐啊？（晕……） <br>　　小朋友B：因为要讲卫生，怕口水流下来。（戴口罩原来是不让口水流下来啊…） <br><strong>5号幼儿园 </strong><br>问题一：可口可乐和百事可乐有什么不一样？ <br>　　小朋友A：名字不一样。（这个连火星人都知道） <br>　　小朋友B：可口可乐的罐子是红的，百事可乐是蓝色的。（我知道你不是色盲啦，乖） <br>　　小朋友C：百事可乐有周杰伦，可口可乐有香草（口味）。 <br>　　小朋友D：可口可乐是酸酸的，喝了鼻子会冒气！（会冒气说明那是罐敬业的可乐） <br>问题二：为什么地铁要在地底下开呢？ <br>　　小朋友A：因为地铁有个“地”字，所以要在地下开。（我就猜到有人会这么回答） <br>　　小朋友B：地铁没有轮子，不能在地上开。（有轮子吗？没有吗？有吗？） <br>问题三：世界上是先有鸡还是先有蛋？ <br>　　小朋友A：先有蛋。 <br>　　问：没有鸡的话，蛋从哪里来呢？ <br>　　小朋友A：…… <br>　　小朋友B：先有母鸡，然后下蛋。 <br>　　小朋友C：一共有30只蛋！ <br>　　惊讶：啥？？？30只蛋，没听错吧？ <br>　　小朋友C：因为有2只老母鸡，每个下了15个蛋，所以有30个！（小朋友您好神啊） <br>问题四：4月1日是什么节？ <br>　　小朋友A：母亲节。 <br>　　小朋友B：妇女节。 <br>　　提醒：妇女节是3月8号啦。 <br>　　小朋友B：那就是植树节！ <br>　　忍不住了：愚人节是几月几号？ <br>　　小朋友C：是1月8号！（这个……） <br>　　小朋友D：我知道了，4月1号是司机叔叔过节！（你是怎么想出来的，好奇中） <br>问题五：怎么样才能变漂亮？ <br>　　小朋友A：贴黄瓜，我妈妈天天在家贴。 <br>　　小朋友B：贴木瓜，我阿姨老是贴。 <br>　　小朋友C：贴鸡蛋！（难度真大） <br>　　小朋友D：贴土豆，我婆婆给我贴过手。 <br>　　小男孩E：我贴过芒果皮！（那是你瞎折腾的吧） <br><strong>总结：一个比一个神奇，DIY果然风行。</strong></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;转自&lt;a href=&quot;http://www.leehare.cn/read.php?3560&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt; &lt;p&gt;&lt;strong&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp; 1号幼儿园 &lt;br&gt;&lt;/strong&gt;问题一：如果有一天大海里没有水了，鱼怎么办呢？ &lt;br&gt;　　小朋友A：鱼到小河里去呗。（想了想，继续）哦，不行，那鲸鱼怎么办？太大了，进不去。（真体贴啊） &lt;br&gt;　　小朋友B：变化石呗。（鱼们狂吐血……） &lt;br&gt;问题二：牛奶是从哪里来的？ &lt;br&gt;　　小朋友A：奶牛肚子下面有几个嘴，从那里流出来的。（你真的确定那是嘴吗？） &lt;br&gt;　　继续问：那椰奶怎么来的？ &lt;br&gt;　　小朋友B：椰奶是羊奶吧。（扯太远了吧，兄弟） &lt;br&gt;　　继续问到底：羊奶是什么？ &lt;br&gt;　　小朋友B：羊奶就是酸奶吧，我们家不喝的，我们家订的是光明牛奶。（好可怕的逻辑） &lt;br&gt;问题三：小朋友的脸是干吗用的？ &lt;br&gt;　　小朋友A：给妈妈亲的。 &lt;br&gt;　　追问：那给不给爸爸亲？ &lt;br&gt;　　小朋友A：给爸爸亲。 &lt;br&gt;　　继续追问：那你的脸到底是给谁亲的？ &lt;br&gt;　　小朋友A：给妈妈亲的。（爸爸泪流满面） &lt;br&gt;　　小朋友B：贴纸头用的。（你的脸难道是布告栏？） &lt;br&gt;问题四：为什么小孩子是从妈妈肚子里出来的，不是从爸爸肚子里出来的？ &lt;br&gt;　　小朋友A：女孩子是从妈妈肚子里出来的，男孩子是从爸爸肚子里出来的。（真会蒙人） &lt;br&gt;　　小男孩B：因为男生可爱！（小女孩们一起叫：男生不可爱！） &lt;br&gt;问题五：小朋友的头发有什么用？ &lt;br&gt;　　小女孩A：用来梳头发的。 &lt;br&gt;　　提问小男孩B：那你的头发不能扎辫子，有什么用呢？ &lt;br&gt;　　小朋友B：用来给理发店剃头的。（可贵的奉献精神） &lt;/p&gt;
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
      <category term="童言无忌" scheme="http://wdicc.com/tags/%E7%AB%A5%E8%A8%80%E6%97%A0%E5%BF%8C/"/>
    
  </entry>
  
  <entry>
    <title>2007年高考语文北京作文一篇（转载）</title>
    <link href="http://wdicc.com/gaokao-zuowen/"/>
    <id>http://wdicc.com/gaokao-zuowen/</id>
    <published>2007-06-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>转载自<a href="http://www.leehare.cn/read.php?3544" target="_blank" rel="external">这里</a>。</p> <blockquote> <p>" 细雨湿衣看不见，闲花落地听无声"是唐朝诗人刘长卿在《别严士元》中的诗句。<br>曾经有人这样理解这句诗：1、这是歌颂春天的美好意境。 2、闲花、细雨表达了不为人知的寂寞。3、看不见、听不见不等于无所作为，是一种恬淡的处世之道。4 、这种意境已经不适合当今的世界……根据你的看法写一篇作文。题目自拟，体裁不限。字数800以上。</p></blockquote> <p>盛夏，夜，深夜。<br>景山山颠。<br>山上有人，两个人，一男一女。<br>这两人就是当今武林名声最响的两位杀手，男的名秋细雨，女的叫叶闲花，江湖人称"细雨闲花"。<br>诗人刘长卿曾用"细雨湿衣看不见，闲花落地听无声"来描述这两个可怕的杀手。细雨湿衣，湿衣的是鲜血；闲花落地，落地的是人头。这两人杀人来无影去无踪，如果他们想杀你，当你还没看到他们人影没听到他们声音的时候，你就已经死了。<br>秋细雨三天前接到一份帖子，指名要杀叶闲花。事成之后，不但有三百万两冥币，更可以让他在" 红楼梦中人"选秀节目中担任曹雪芹的角色！<br>但是杀死叶闲花比杀死比尔还要困难得多。<br>江湖中没有一个人清楚叶闲花的武功来历，性格脾气，但是每个人都知道叶闲花的故事。<br>叶闲花有一双迷人的大眼睛，据说她曾一动不动地瞪死过赵薇和高圆圆，而那一年她才十七岁。<br>叶闲花声音有如黄莺般幽婉醉人，传说听过她说话后林志玲身体酥麻了整整一年，你说要不要命？<br>叶闲花轻功独步武林，踏雪无痕，落地无声，号称超过当年青翼蝠王韦一笑。有人见她上星期在高速公路上偷了刘翔奥运会入场证，刘翔追出一万公里最后被活活累倒。</p>
<a id="more"></a>
 <p>一般人听到叶闲花的故事早就吓得去买尿不湿了，但是秋细雨没有去买。<br>秋细雨不是一般人。<br>他知道，杀人不但要靠技术，还要拼人品！<br>秋细雨很镇定，他正用一把指甲刀修整着手指甲，他的手指修长有力。他要等待，等待对方先沉不住气。高手相争，不允许一丝一毫的失误，先沉不住气的人就会露出破绽。<br>致命的破绽！<br>因此秋细雨一言不发，只是静静地玩弄着指甲刀。<br>没想到叶闲花更是好整以暇，自己悠然自得地涂口红，喷香水。<br>秋细雨只好先发制人，道："你知道我找你出来是为什么。"<br>叶闲花温柔道："在我们动手之前，不能先谈谈么？"<br>秋细雨道："我是来杀人的，不是来聊天的。"<br>叶闲花道："你有把握杀我？"<br>秋细雨道："我从不做没有把握的事情。"<br>叶闲花道："我要提醒你一件事。"<br>秋细雨道："你说。"<br>叶闲花道："百晓生作杀手谱，小女子是杀手榜排名第一，阁下区区第二，你真能杀得了我么？"<br>秋细雨道："我也要提醒你一件事。"<br>叶闲花道："你说。"<br>秋细雨道："论杀手实力，我本在你之前，只是那次排名百晓生采用了短信投票系统，中国'花痴'人数过于庞大才让你得了第一。"<br>叶闲花的脸色一变，道："我更要提醒你，我的粉丝团叫'花粉 '，不叫'花痴'！"<br>秋细雨道："我最后要提醒你，你的那些'花粉'全都是花痴。还有，我们已经跑题了。"<br>叶闲花道："我们这样拼命厮杀，你难道不怕麻烦么？"<br>秋细雨道："你以后再也不用怕麻烦了，天下只有一种人永远不怕麻烦，死人！ "<br>叶闲花道："这么说你非逼我出手不可？"<br>秋细雨没有回答，他已不用回答。<br>秋细雨道："亮兵器！"<br>叶闲花道："我用刀。"<br>秋细雨道："你用刀？刀在何处？"<br>叶闲花道："我就是刀！"<br>叶闲花露出甜甜的笑容，忽然间褪下了自己的衣服，全身上下只剩下蕾丝比基尼和黑色丝袜。<br>叶闲花的脸美得让人窒息，再配上这样的身材，这样的服饰，充满了一种原始的诱惑力。<br>她的眼睛会说话，她的媚笑会说话，她的手，她的胸膛，她的腿……她身上每分每寸都会说话。<br>她知道，只要是个不瞎的男人，现在肯定会被她迷得神魂颠倒。<br>秋细雨是个男人，而且是个不瞎的男人。<br>可他现在却偏偏好像瞎了一样，完全无动于衷。<br>他知道，美丽的女人是一把刀，当你沉醉的时候，刀就会切进你的胸口。<br>秋细雨沉吟道："我只想问你一件事。"<br>叶闲花娇笑着：" 请讲。"<br>秋细雨道："大夏天的，穿这么少你丫不怕蚊子叮啊？"<br>叶闲花沉默了半晌，幽幽地道："你一定以为刚才我在喷香水，是不是？我告诉你，我喷的是六神花露水！"<br>叶闲花又道："不过这不是普通的六神，是我特别提炼的药水，无色无味无毒，不过却会慢慢扩散在空气中，闻到它的人会四肢麻痹不能动弹。"<br>秋细雨一惊，忽然觉得身体已经麻木不听使唤，不由得一身冷汗。<br>叶闲花又道："你以为我和你扯淡是因为我害怕，以为我脱掉衣服是想色诱你，其实这都是为了拖延时间让药水能扩散到你周围。"<br>秋细雨面上不动声色，道："难道你自己不怕药水的厉害？"<br>叶闲花得意地道： "一开始我涂的口红就是解药，所以我仍然可以自由行动。"<br>叶闲花逼视着秋细雨，问道："现在你还认为你能杀了我么？"<br>秋细雨道：" 我能。"<br>叶闲花道："你不能动而我能动，你却能杀了我，这不是很好笑么？ "<br>秋细雨道："是很好笑，但是你一定会被我杀死。"<br>叶闲花道："为什么我会被你杀死？"<br>秋细雨忽然反问道："飞刀能不能杀人？"<br>叶闲花道："好像能。"<br>秋细雨道："我有没有手？"<br>叶闲花道："的确有。"<br>秋细雨道："我手上有没有刀？ "<br>叶闲花道："你手上好像只有指甲刀。"<br>秋细雨道："足够了。"<br>叶闲花道："足够了？"<br>秋细雨道："我有手有刀，就能置人死地。"<br>叶闲花道："指甲刀也能杀人？实在可笑！"<br>秋细雨道："以前江湖中有七十三个人觉得我这把指甲刀很可笑。"<br>叶闲花道："现在呢？"<br>秋细雨道："现在人都已死了，死在这把刀下。"<br>叶闲花道："你的手还能动？"<br>秋细雨道："你要不要试试？"<br>叶闲花脸上的笑容渐渐凝固，忽然间，她已出手！<br>一招" 冒牌九阴白骨爪"直逼秋细雨天灵盖，这一招她已练过七年四个月零二十九天，她完全有把握相信没有任何人可以抵挡得了这一招。<br>可这一次她错了。<br>刀光一闪，"盗版小李飞刀"已插入她的咽喉。<br>她到死也不相信，一把指甲刀可以要了她的命！<br>闲花终于落地！<br>三个时辰后，药水的药效渐渐淡去，秋细雨终于可以动弹了。<br>望着叶闲花的尸体，秋细雨道："虽然你已经死了，但是我还要告诉你两件事。第一，我一直用甲刀修整着手指甲是为了调整手和刀之间的同步率，说白了就是找手感。第二，我杀你的真正目的不是为了钱或者名利。"<br>一边说，秋细雨一边从叶闲花衣服的口袋里搜出了刘翔的奥运会入场证。<br>秋细雨坚定地说："我爱北京，我要看奥运！"<br>从此，再也没有人见过秋细雨。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;转载自&lt;a href=&quot;http://www.leehare.cn/read.php?3544&quot;&gt;这里&lt;/a&gt;。&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;&quot; 细雨湿衣看不见，闲花落地听无声&quot;是唐朝诗人刘长卿在《别严士元》中的诗句。&lt;br&gt;曾经有人这样理解这句诗：1、这是歌颂春天的美好意境。 2、闲花、细雨表达了不为人知的寂寞。3、看不见、听不见不等于无所作为，是一种恬淡的处世之道。4 、这种意境已经不适合当今的世界……根据你的看法写一篇作文。题目自拟，体裁不限。字数800以上。&lt;/p&gt;&lt;/blockquote&gt; &lt;p&gt;盛夏，夜，深夜。&lt;br&gt;景山山颠。&lt;br&gt;山上有人，两个人，一男一女。&lt;br&gt;这两人就是当今武林名声最响的两位杀手，男的名秋细雨，女的叫叶闲花，江湖人称&quot;细雨闲花&quot;。&lt;br&gt;诗人刘长卿曾用&quot;细雨湿衣看不见，闲花落地听无声&quot;来描述这两个可怕的杀手。细雨湿衣，湿衣的是鲜血；闲花落地，落地的是人头。这两人杀人来无影去无踪，如果他们想杀你，当你还没看到他们人影没听到他们声音的时候，你就已经死了。&lt;br&gt;秋细雨三天前接到一份帖子，指名要杀叶闲花。事成之后，不但有三百万两冥币，更可以让他在&quot; 红楼梦中人&quot;选秀节目中担任曹雪芹的角色！&lt;br&gt;但是杀死叶闲花比杀死比尔还要困难得多。&lt;br&gt;江湖中没有一个人清楚叶闲花的武功来历，性格脾气，但是每个人都知道叶闲花的故事。&lt;br&gt;叶闲花有一双迷人的大眼睛，据说她曾一动不动地瞪死过赵薇和高圆圆，而那一年她才十七岁。&lt;br&gt;叶闲花声音有如黄莺般幽婉醉人，传说听过她说话后林志玲身体酥麻了整整一年，你说要不要命？&lt;br&gt;叶闲花轻功独步武林，踏雪无痕，落地无声，号称超过当年青翼蝠王韦一笑。有人见她上星期在高速公路上偷了刘翔奥运会入场证，刘翔追出一万公里最后被活活累倒。&lt;/p&gt;
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
      <category term="搞笑作文" scheme="http://wdicc.com/tags/%E6%90%9E%E7%AC%91%E4%BD%9C%E6%96%87/"/>
    
  </entry>
  
  <entry>
    <title>稍微深入了解了一下cacti的thold插件的邮件通知</title>
    <link href="http://wdicc.com/change-trigger-setting-for-thold/"/>
    <id>http://wdicc.com/change-trigger-setting-for-thold/</id>
    <published>2007-06-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>通过cacti的thold插件，可以做到snmp抓取到的数值低于你规定的值的时候进行邮件通知，例如我用他来监控磁盘空间，当磁盘空间低于某个数的时候就会给指定的email发邮件。但是有一点郁闷的是，有时候，可能是由于网络原因，抓取会超时，这样就会导致触发trigger，给你发送邮件。5分钟抓取一次，我这里的情况是几乎每个小时总会有2，3封这种邮件，很烦人，而且根本没意义。早就想屏蔽掉这种情况了，看了代码挺复杂就懒得弄，今天实在受不了了，深入了解了一下。</p> <p>其实thold本身已经考虑到了这种情况，在 thold 的设置里面，就有一项 Default Trigger Count （Number of consecutive times the data source must be in breach of the threshold for an alert to be raised），就是连续触发几次才认为他真的低于 thold 了，才发送邮件。我尝试过修改这个设置，发现不管用。看了代码才了解，每个 <strong>Thresholds</strong>&nbsp;都有自己的 trigger 值，那个 default trigger count 只对新建的 thresholds 才有用。所以针对现有的，需要逐个去修改才行。如果不设置这个选项，那么使用的就是上面设置的那个默认的，所以没特殊需要，还是不要针对每个 thresholds 设置自己的 trigger 值比较好，这样方便修改。我通过修改数据库的方法，直接把这些都修改了。</p> <p><pre lang="sql">update thold_data set thold_fail_trigger = NULL;</pre>
</p><p>修改了之后还没有收到，这下应该清净了吧？</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;通过cacti的thold插件，可以做到snmp抓取到的数值低于你规定的值的时候进行邮件通知，例如我用他来监控磁盘空间，当磁盘空间低于某个数的时候就会给指定的email发邮件。但是有一点郁闷的是，有时候，可能是由于网络原因，抓取会超时，这样就会导致触发trigger，给你发
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="cacti" scheme="http://wdicc.com/tags/cacti/"/>
    
      <category term="thold" scheme="http://wdicc.com/tags/thold/"/>
    
      <category term="trigger" scheme="http://wdicc.com/tags/trigger/"/>
    
  </entry>
  
  <entry>
    <title>天气太热了</title>
    <link href="http://wdicc.com/such-hot-weather/"/>
    <id>http://wdicc.com/such-hot-weather/</id>
    <published>2007-06-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近两天天气有点变态了，闷热，北京的桑拿天又开始了。空调还没买上，晚上得整晚开风扇了。还好偶们家的风扇很强悍，风够大。早就说要把凉席弄上了，一直没时间，今天晚上回去看看。不知道周末天气如何，希望那两天能是个好天气。</p> <p>北京的交通是越来越让人郁闷了。前天早上有个超高的车在一个天桥那里卡住了，结果导致后面的车堵了得有几公里。平时十几分钟的路程走了1个小时。现在走在路上最怕的就是有事故。本来就2个车道（一个汽车道，一个自行车道，基本上自行车道都会被汽车占用，骑自行车的人都是在汽车中间穿梭），一旦发生事故，通常这条路就废了，这种路上也不时常安排几个交警，出现情况了，基本上就只能自己郁闷了，没几个小时解决不了问题。</p> <p>今天早上在车上还想，以前军训站排的时候，好像也没现在一早上站的时间长吧。从7点起来，洗脸刷牙穿衣服到车站，等车来了继续车上站着，换地铁还是站着，这一路下来也不少时间呢，现在站功也不得了了，呵呵。</p> <p>昨天和一个哥们一起喝酒，还在郁闷北京这种生活，但是郁闷归郁闷，生活还是得继续不是。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近两天天气有点变态了，闷热，北京的桑拿天又开始了。空调还没买上，晚上得整晚开风扇了。还好偶们家的风扇很强悍，风够大。早就说要把凉席弄上了，一直没时间，今天晚上回去看看。不知道周末天气如何，希望那两天能是个好天气。&lt;/p&gt; &lt;p&gt;北京的交通是越来越让人郁闷了。前天早上有个超
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="weather" scheme="http://wdicc.com/tags/weather/"/>
    
  </entry>
  
  <entry>
    <title>为resin配置oracle连接池</title>
    <link href="http://wdicc.com/resin-and-oracle/"/>
    <id>http://wdicc.com/resin-and-oracle/</id>
    <published>2007-06-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>resin 2.x 的配置方法和 3.x 的方法有区别。按照<a href="http://www.caucho.com/resin-3.1/doc/db-thirdparty.xtp" target="_blank" rel="external">官方文档</a>，做下面的配置。</p> <p><pre lang="txt"><database>
  <jndi-name>oraPool</jndi-name>
  <driver>
    <type>oracle.jdbc.pool.OracleConnectionPoolDataSource</type>
    <url>jdbc:oracle:thin:@localhost:1521:dbname</url>
    <user>username</user>
    <password>password</password>
  </driver>
#....
</database></pre>
</p><p>&nbsp;在上面的 <font color="#ff0000">.... </font>这里还可以添加<a href="http://www.caucho.com/resin-3.1/doc/database-tags.xtp" target="_blank" rel="external">其他的</a>配置信息。配置好之后启动resin，会发现提示类似下面的信息。</p>
<p><pre lang="txt">conf/resin.conf:218: java.lang.ClassNotFoundException: oracle.jdbc.pool.OracleConnectionPoolDataSource</pre>
</p><p>提示没有找到连接oracle数据库的jdbc驱动。这个驱动在oracle的安装目录里面有。比如我这里是在 /db/oracle/10.1.0/product/10g/jdbc/lib/ 。里面好多文件，具体都什么作用可以看<a href="http://www.oracle.com/technology/tech/java/sqlj_jdbc/htdocs/jdbc_faq.htm#02_07" target="_blank" rel="external">这里</a>。</p>
<p>复制这个目录里面的 classes12.jar 和 nls_charset12.jar 到resin的 lib 目录下面，重新启动 resin 就可以了。本文完成过程中参考了<a href="http://dev.csdn.net/article/29/29762.shtm" target="_blank" rel="external">这篇</a>文章。如何使用这个pool，官方文档也有<a href="http://www.caucho.com/resin-3.1/doc/config-database.xtp#usage/lookup" target="_blank" rel="external">说明</a>。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;resin 2.x 的配置方法和 3.x 的方法有区别。按照&lt;a href=&quot;http://www.caucho.com/resin-3.1/doc/db-thirdparty.xtp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;官方文档&lt;/a&gt;，做下面
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="resin" scheme="http://wdicc.com/tags/resin/"/>
    
  </entry>
  
  <entry>
    <title>sendmail 中自动抄送某个用户的邮件给别人</title>
    <link href="http://wdicc.com/howto-cc-an-email-to-others-in-sendmail/"/>
    <id>http://wdicc.com/howto-cc-an-email-to-others-in-sendmail/</id>
    <published>2007-06-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>sendmail有个 /etc/aliases 配置文件，在里面可以给某个帐号设置alias，这样给这个alias发的邮件，都会给设置好的用户转发过去。要知道sendmail的帐号是和系统帐号联系在一起的，添加mail帐号得给系统添加帐号（qmail可以实现虚拟用户，或许sendmail也可以，而我不知道罢了）。而这个alias帐号却不是必须有得有系统帐号的，只要设置了alias，就可以给alias用户发邮件，就好像系统真有这么一个帐号一样。</p> <p>关于 /etc/aliases 文件，<a href="http://www.feep.net/sendmail/tutorial/intro/aliases.html" target="_blank" rel="external">这里</a>有个文章有说明。下面复制几个例子。</p> <p><pre lang="conf"># RFC 822 规定每个域名都需要有一个 "postmaster" 
postmaster      : root

# 将 postmaster 的邮件都转发给 root 帐号，当然你下面还可以将root帐号的邮件在转发给别人。

# 转发也可以转发到文件
# 比如这个，都说了nobody了还给发邮件，邮件都丢掉
nobody          : /dev/null

# 也可以通过管道作为另一个程序的输入
# 比如给procmail，它能实现的功能可就多了，比如可以根据邮件大小转发到不同的用户，或者调用spamassian、clamav来查垃圾邮件和病毒等
# 一个自动的bug跟踪程序
program-bugs: |/usr/local/bin/program-bug-tracker

# 也可以转发到多个帐号，用逗号分隔就可以
project-list: johndoe@host1.uiuc.edu,jsmith@host2.uiuc.edu,someone@host.purdue.edu
</pre>
</p><p>可以看到功能还是很强悍的，尤其是可以 pipe 到程序，procmail、maildrop都是很不错的过滤程序，能实现很多其他的功能。</p>
<p>标题的要求是“抄送”某个帐号的邮件给别的用户，有点类似监控的意思。怎么实现呢？可能第一个想到的就是类似下面这种方法：</p>
<p><pre lang="conf">somebody:other1,other2,somebody</pre>
</p><p>这样是不是就能实现抄送呢？这样会造成死循环，呵呵。</p>
<p>看样子似乎只能通过pipe到程序实现了，看procmail、maildrop的文档还不够头疼的。其实还有个简单的方法，就是 <a href="http://www.feep.net/sendmail/tutorial/intro/forward.html" target="_blank" rel="external">.forward</a> 文件。</p>
<p>.forward 文件位于用户的 home 下面，权限是 600 。他的功能和 /etc/aliases 文件类似，不过是 aliases 文件只能由root用户来修改，而 .forward 文件用户自己就可以修改。除了上面aliases能做到的事情外，他还多了一个功能，就是标题要求的功能。</p>
<p>按照标题的要求，只需要在 somebody 用户的 .forward 文件中放入下面的内容就可以了。</p>
<p><pre lang="conf">\\somebody
other1
other2</pre>
</p><p>要注意 somebody 前面的那个\，就是用来防止转发死循环的。加了\之后，给somebody转发的时候会忽略该用户的 .forward 文件。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;sendmail有个 /etc/aliases 配置文件，在里面可以给某个帐号设置alias，这样给这个alias发的邮件，都会给设置好的用户转发过去。要知道sendmail的帐号是和系统帐号联系在一起的，添加mail帐号得给系统添加帐号（qmail可以实现虚拟用户，或许s
    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="sendmail" scheme="http://wdicc.com/tags/sendmail/"/>
    
      <category term="邮件转发" scheme="http://wdicc.com/tags/%E9%82%AE%E4%BB%B6%E8%BD%AC%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>不得不说yupoo越来越慢了。。</title>
    <link href="http://wdicc.com/slow-yupoo/"/>
    <id>http://wdicc.com/slow-yupoo/</id>
    <published>2007-06-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>刚从 <a href="http://flickr.com" target="_blank" rel="external">flickr</a> 迁移到 <a href="http://wdicc.yupoo.com" target="_blank" rel="external">yupoo</a> 的时候，速度还挺快的，当时就担心越来越慢。现在的情况是，我blog上面引用的图片好多时候都显示不了，真郁闷啊。现在flickr被盾了，难道又得找新的地方了么？</p> <p>yupoo 还是不错的，又有桌面的上传工具，又有 fx 的扩展。还是国内的，也不用担心被盾。可是。。速度为啥就不能快点呢。。。</p> <p>似乎可以考虑下 <a href="http://beta.zooomr.com/" target="_blank" rel="external">zooomr</a> ，不过是国外的，难说哪天又被盾了。真郁闷。</p> <p>我来看，<a href="http://yutube.com" target="_blank" rel="external">yutube</a> 被盾是迟早的。</p> <p>zooomr 申请了一个帐号，贴个图看看先。这是kfc的优惠券，打印了就可以用，呵呵。</p><a title="Photo Sharing" href="http://www.zooomr.com/photos/wd/2552707/" target="_blank" rel="external"><img height="500" alt="kfc" src="http://static.zooomr.com/images/2552707_f4edee8491.jpg" width="381"></a>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;刚从 &lt;a href=&quot;http://flickr.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;flickr&lt;/a&gt; 迁移到 &lt;a href=&quot;http://wdicc.yupoo.com&quot; target=&quot;_blank&quot; rel=&quot;extern
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="flickr" scheme="http://wdicc.com/tags/flickr/"/>
    
      <category term="yupoo" scheme="http://wdicc.com/tags/yupoo/"/>
    
      <category term="zooomr" scheme="http://wdicc.com/tags/zooomr/"/>
    
  </entry>
  
  <entry>
    <title>老婆送的momo熊</title>
    <link href="http://wdicc.com/momo-bear/"/>
    <id>http://wdicc.com/momo-bear/</id>
    <published>2007-06-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>昨天老婆和一个邻居出去逛街，很晚才回来。回来的时候我都睡的迷迷糊糊的了，不知道咋回事，整天困的不行，最近晚上睡的都比较早。今天早上走的时候发现手机上面多了一个吊饰，就是下图右边那个了。</p> <p><img src="http://photo6.yupoo.com/20070621/144312_797301615.jpg"> </p> <p>我觉得，这个不就是狗么？。。。老婆一定说是熊。。汗。。</p> <p>那个胳膊是可以动的，买了一对，左边的是老婆的，右边的是我的，哈哈。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;昨天老婆和一个邻居出去逛街，很晚才回来。回来的时候我都睡的迷迷糊糊的了，不知道咋回事，整天困的不行，最近晚上睡的都比较早。今天早上走的时候发现手机上面多了一个吊饰，就是下图右边那个了。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://photo6.yupoo.com/200
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="momo熊" scheme="http://wdicc.com/tags/momo%E7%86%8A/"/>
    
      <category term="吊饰" scheme="http://wdicc.com/tags/%E5%90%8A%E9%A5%B0/"/>
    
  </entry>
  
  <entry>
    <title>resin 的安装步骤</title>
    <link href="http://wdicc.com/install-resin/"/>
    <id>http://wdicc.com/install-resin/</id>
    <published>2007-06-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>resin目前已经到了3.1版本，从resin网站上面下载的resin不带jdk，需要自己去下载。resin的下载页面在<a href="http://www.caucho.com/download/index.xtp" target="_blank" rel="external">这里</a>。下载最新的 Resin Pro 3.1.1 版本。</p> <p>jdk的下载地址在 <a href="http://java.sun.com/javase/downloads/index.jsp" target="_blank" rel="external">这里</a>&nbsp;，resin 3.1需要1.5及以上版本的jdk。</p> <p>先来安装resin：</p> <p><pre lang="bash">tar zxvf resin-pro-3.1.1
cd resin-pro-3.1.1
./configure --prefix=/usr/local/resin #安装的目的地址
make &amp;&amp; make install</pre>
</p><p>安装完resin之后，安装jdk：</p>
<p><pre lang="bash">cd /usr/local
chmod +x /root/jdk-6u1-linux-i586.bin
/root/jdk-6u1-linux-i586.bin</pre>
</p><p>此后会在/usr/local/下面建立一个jdk1.6.0_01目录，jdk就安装完毕了。</p>
<p>resin 的配置文件在 /usr/loca/resin/conf 下面，主要是 resin.conf 。默认的端口是8080。</p>
<p><pre lang="txt"><http port="8080" address="*"></http></pre>
</p><p></p>
<p>然后就是添加自己的应用地址了。</p>
<p><pre lang="txt"><host id="" root-directory=".">
      <web-app id="/" root-directory="webapps/ROOT"></web-app></host></pre>
</p><p></p>
<p>在这下面添加一行</p>
<p><pre lang="txt"><web-app id="/test" root-directory="/www/test/"></web-app></pre>
</p><p></p>
<p>此后呢，访问 http://ip:8080/test 就可以访问到你的应用了。 
</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;resin目前已经到了3.1版本，从resin网站上面下载的resin不带jdk，需要自己去下载。resin的下载页面在&lt;a href=&quot;http://www.caucho.com/download/index.xtp&quot; target=&quot;_blank&quot; rel=&quot;exter
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="resin" scheme="http://wdicc.com/tags/resin/"/>
    
  </entry>
  
  <entry>
    <title>每天早上打开电脑的第一件事情</title>
    <link href="http://wdicc.com/read-rss/"/>
    <id>http://wdicc.com/read-rss/</id>
    <published>2007-06-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>不管是在上班，还是在家，每天早上打开电脑的第一件事情恐怕就是打开水木去十大看看了，呵呵。第一件事情没什么好说的，说第二件事情。第二件事情就是打开google reader看订阅的blog和新闻。</p> <p>自从rss流行起来后，就一直在换rss阅读器。最早的时候用过greatnews，feeddaemon，还有水木上面某个兄弟开发的一个软件，不过好像后来没消息了。那会不知道看什么好，不过还好greatnews里面内置了一些新闻rss，比如sina的。不过后来发现那些新闻都没啥意思就没有怎么用了。</p> <p>再之后呢，用上了fx后，频繁看到对于sarge的推荐，就又开始看了几天rss。此后看别人推荐就去了bloglines，之后就喜欢上这个了。不需要客户端，能上网的电脑就能看，而且能记住你上次看过的信息。不过后来发现了一个郁闷的地方（写到这里有个插曲需要先插播一下）</p> <p>突然不能输入中文了，考，破玩意。开始还以为是输入法的问题，换了一个输入法折腾了半天也不行，重装了live wrtier也不行，搜了一下找到一个<a href="http://crody.blogspot.com/2006/10/live-writer.html" target="_blank" rel="external">解决办法</a>。需要注意的是这个blog是blogspot上面的，被盾了，引用下里面的解决方法吧。</p> <p> <blockquote> <p>如果用live writer写文章时频繁切换中英文输入法，有可能使得中文输入法失效。</p> <p>具体表现就是可以切换到中文输入法，但输入仍然是英文。</p> <p>昨天遇到几次之后终于找到了一个解决方法:将光标移到标题栏，在这里切换到中文输入法的。</p> <p>然后再跳回到正文部分，看看，是不是已经可以输入中文了？</p> <p>估计是由于用快捷键切换输入法时与writer的key hook冲突，导致正文部分失去输入焦点。已经向作者报告BUG了，有遇到同样问题的可以试试这个土办法 ;)</p></blockquote> </p><p></p> <p>这个方法确实好用。</p> <p>再继续上面的话题，。。不说别的了，bloglines的问题以及后面的事情，都在<a href="http://blog.wdicc.com/wordpress/google-reader-and-zhuaxia/" target="_blank" rel="external">这个帖子</a>里面说清楚了，嗯，就不多说了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;不管是在上班，还是在家，每天早上打开电脑的第一件事情恐怕就是打开水木去十大看看了，呵呵。第一件事情没什么好说的，说第二件事情。第二件事情就是打开google reader看订阅的blog和新闻。&lt;/p&gt; &lt;p&gt;自从rss流行起来后，就一直在换rss阅读器。最早的时候用过gr
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="rss" scheme="http://wdicc.com/tags/rss/"/>
    
  </entry>
  
  <entry>
    <title>tmp下面有好多的sess_文件</title>
    <link href="http://wdicc.com/lots-sess_-files/"/>
    <id>http://wdicc.com/lots-sess_-files/</id>
    <published>2007-06-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>之前以为是有个<a href="http://blog.wdicc.com/wordpress/update-blog-to-2-2/" target="_blank" rel="external">did_you_path_math插件</a>的问题，可是停止这个插件后，发现还是会有这些文件出来。</p> <p><pre lang="txt">-rw-------    1 nobody   4294967295        0 Jun 20 16:01 sess_l12chvh9bjik2a7ms152ggnu36
-rw-------    1 nobody   4294967295        0 Jun 20 16:00 sess_r6gml3pbcfaribnctamiq9rk53
-rw-------    1 nobody   4294967295        0 Jun 20 16:00 sess_lnvhsb928701qq1kgf1fiiuem5
-rw-------    1 nobody   4294967295        0 Jun 20 16:00 sess_bhlk360m7jqh1c8khku000gte4
-rw-------    1 nobody   4294967295        0 Jun 20 15:58 sess_uuflltlj4c81pk116qtegr15q2
-rw-------    1 nobody   4294967295        0 Jun 20 15:57 sess_6fbdvd4fmq49pp9kvi0g68ihr5
-rw-------    1 nobody   4294967295        0 Jun 20 15:55 sess_s4o0c5untrfj2rpdqemp06lk65
-rw-------    1 nobody   4294967295        0 Jun 20 15:51 sess_9cir4ug259se527d01pcgr63j0
-rw-------    1 nobody   4294967295        0 Jun 20 15:50 sess_kj973ei5sudldg3n9bfq0cgb23
-rw-------    1 nobody   4294967295        0 Jun 20 15:49 sess_7j8h39red2jak1upe1k80c1tt7
-rw-------    1 nobody   4294967295        0 Jun 20 15:45 sess_tnhhikhc2hgui3e9ugh835i0s0
-rw-------    1 nobody   4294967295        0 Jun 20 15:44 sess_mgpr813dtuil5m6u765kbov503
-rw-------    1 nobody   4294967295        0 Jun 20 15:41 sess_8vcse5004pvd2icntct9jgt5m4
-rw-------    1 nobody   4294967295        0 Jun 20 15:39 sess_g2r1hkg2u4o9v0c919nem61724
-rw-------    1 nobody   4294967295        0 Jun 20 15:39 sess_60qoqf65giur2ulj01ce2snal0
-rw-------    1 nobody   4294967295        0 Jun 20 15:38 sess_vier69ckh0dmp9613k0gfm05m3
-rw-------    1 nobody   4294967295        0 Jun 20 15:38 sess_m57eveg1oarv2hheem2nkv45i4
-rw-------    1 nobody   4294967295        0 Jun 20 15:38 sess_hgtktf6eeeghdfm1e7blb1v4a7
-rw-------    1 nobody   4294967295        0 Jun 20 15:38 sess_qko77d166lmadk3gcn4lop7qe1
-rw-------    1 nobody   4294967295        0 Jun 20 15:36 sess_en9v49gnlbmtma56s8tkqpqbc5
-rw-------    1 nobody   4294967295        0 Jun 20 15:32 sess_aeu3nad39iljqr6kahaq7ceih5
-rw-------    1 nobody   4294967295        0 Jun 20 15:31 sess_ulboab1mt4ov930fkllrc6rlt3
-rw-------    1 nobody   4294967295        0 Jun 20 15:31 sess_47on5eflfdfnupdov6a59soui3
-rw-------    1 nobody   4294967295        0 Jun 20 15:31 sess_o98ss7kbp31jce5d2jt133n183
-rw-------    1 nobody   4294967295        0 Jun 20 15:31 sess_p97q0t0qlmtalkbpism7aa7gb6
-rw-------    1 nobody   4294967295        0 Jun 20 15:30 sess_le35e8bodjrlp4ufk33c2k6h62
-rw-------    1 nobody   4294967295        0 Jun 20 15:29 sess_9dlskkqqas3nu7t2asu4ok8ec2
-rw-------    1 nobody   4294967295        0 Jun 20 15:29 sess_a56sha53hr1737nt9rahh2nn02
-rw-------    1 nobody   4294967295        0 Jun 20 15:29 sess_2g2r8j02h4al5rmbb0mnpuu865</pre>
</p><p></p>
<p>&nbsp;见鬼了，也不知道是怎么回事。google了一下，说修改php.ini的下面几个参数。</p>
<p><pre lang="ini">; Define the probability that the 'garbage collection' process is started
; on every session initialization.
; The probability is calculated by using gc_probability/gc_divisor,
; e.g. 1/100 means there is a 1% chance that the GC process starts
; on each request.

session.gc_probability = 1
session.gc_divisor     = 1000

; After this number of seconds, stored data will be seen as 'garbage' and
; cleaned up by the garbage collection process.
session.gc_maxlifetime = 1440</pre>
</p><p>修改好像也是治标不治本，不知道有没有办法查出来这些文件是怎么会出来的，有时候会一分钟出来好几个这个文件，很烦。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;之前以为是有个&lt;a href=&quot;http://blog.wdicc.com/wordpress/update-blog-to-2-2/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;did_you_path_math插件&lt;/a&gt;的问题，可是停止这个插件后，
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="php" scheme="http://wdicc.com/tags/php/"/>
    
  </entry>
  
  <entry>
    <title>今天下班天气挺凉快</title>
    <link href="http://wdicc.com/cool-weather/"/>
    <id>http://wdicc.com/cool-weather/</id>
    <published>2007-06-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>下了公交，凉嗖嗖的，这算是最近最舒服的一个天气了。进了小区，好多绿树和小花，顺手拍了一些。</p> <p><a href="http://www.yupoo.com/photos/view?id=ff80808113090bf90113253e5d163c2f" atomicselection="true" target="_blank" rel="external"><img src="http://photo6.yupoo.com/20070613/212048_941426665_m.jpg"></a> <a href="http://www.yupoo.com/photos/view?id=ff80808113090c230113253e1c197070" atomicselection="true" target="_blank" rel="external"><img src="http://photo8.yupoo.com/20070613/212032_238552313_m.jpg"></a> </p> <p><a href="http://www.yupoo.com/photos/view?id=ff80808113090c230113253e5ac8708f" atomicselection="true" target="_blank" rel="external"><img src="http://photo6.yupoo.com/20070613/212048_1580372169_m.jpg"></a> <a href="http://www.yupoo.com/photos/view?id=ff80808113090c230113253e040c7067" atomicselection="true" target="_blank" rel="external"><img src="http://photo6.yupoo.com/20070613/212025_38375377_m.jpg"></a> </p> <p>上次出门的时候看到有个女人领着小孩在摘最后那个图里面的花玩，一会我们回来的时候，看到地上落了一地的花瓣，真是有其母必有其子啊，呵呵。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;下了公交，凉嗖嗖的，这算是最近最舒服的一个天气了。进了小区，好多绿树和小花，顺手拍了一些。&lt;/p&gt; &lt;p&gt;&lt;a href=&quot;http://www.yupoo.com/photos/view?id=ff80808113090bf90113253e5d163c2f&quot; atomi
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="好天气" scheme="http://wdicc.com/tags/%E5%A5%BD%E5%A4%A9%E6%B0%94/"/>
    
  </entry>
  
  <entry>
    <title>《飘渺之旅》看完了</title>
    <link href="http://wdicc.com/piaomiao-is-a-good-book/"/>
    <id>http://wdicc.com/piaomiao-is-a-good-book/</id>
    <published>2007-06-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>这本小说写的挺不错的，自成一个世界。最开始有人推荐的时候，看了一下就觉得这个作者写作的语言太差了，呵呵。文笔很一般。那个《搜神记》的作者就很会描述一些情况，虽然故事一般，但是讲解起来也能有声有色。《飘渺之旅》的作者很会编故事，但是场面铺的有点太大了。挖了一些坑，后来都没时间填了。之前看黄易的《覆雨翻云》的时候，也是感觉场面很大，但是人家的描写起来，好多人都有自己的性格，感觉好一些。</p> <p>总的来说，《飘渺之旅》这本书还是值得一看的。作者很会编故事，从开始的天庭星，往后的坦邦大陆，封缘星，霖明星等，主角一步一步从被逼着修炼成神。后来来了地球还又小小讽刺了一下警察、房地产商这些公敌，呵呵。</p> <p>现在在看别人给写的续集，《飘渺神之旅》，续的比原作差一点，凑合看了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;这本小说写的挺不错的，自成一个世界。最开始有人推荐的时候，看了一下就觉得这个作者写作的语言太差了，呵呵。文笔很一般。那个《搜神记》的作者就很会描述一些情况，虽然故事一般，但是讲解起来也能有声有色。《飘渺之旅》的作者很会编故事，但是场面铺的有点太大了。挖了一些坑，后来都没时间
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="飘渺" scheme="http://wdicc.com/tags/%E9%A3%98%E6%B8%BA/"/>
    
  </entry>
  
  <entry>
    <title>最近这几天太热了</title>
    <link href="http://wdicc.com/the-hot-weather/"/>
    <id>http://wdicc.com/the-hot-weather/</id>
    <published>2007-06-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>最近这几天太热了，妞妞趴在地板上面都不愿意起来，现在晚上都不上床睡了，都在窗户旁边地板上面。猫猫们倒是知道怎么安排自己，呵呵。北京的天气就是有点变态，才这会温度就要飙升到40度了，不过还好，家里所有门窗都开着的话，还有嗖嗖的小风，就是不知道再过段时间会怎么样。</p> <p>今天<font face="宋体" color="#ff0000" size="4">老婆陪我</font>去西单给自己的N70换了一个壳，现在是白色的了。Nokia手机的这个功能还是很不错的，没换之前我那个手机看着好像都用了好几年了，因为后盖被磨掉好多地方。可是换了之后，立马就是新的了，又可以显摆一段时间了。说起来这个手机有点买错方向了，3G的功能一点用都没有，还不如wifi来的实用一点。公司和家里都有wifi，上起网来，还是很方便的，不过就是速度有点慢。</p><p><img src="http://photo7.yupoo.com/20070610/215722_566099266.jpg"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;最近这几天太热了，妞妞趴在地板上面都不愿意起来，现在晚上都不上床睡了，都在窗户旁边地板上面。猫猫们倒是知道怎么安排自己，呵呵。北京的天气就是有点变态，才这会温度就要飙升到40度了，不过还好，家里所有门窗都开着的话，还有嗖嗖的小风，就是不知道再过段时间会怎么样。&lt;/p&gt; &lt;p
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="N70" scheme="http://wdicc.com/tags/N70/"/>
    
      <category term="妞妞" scheme="http://wdicc.com/tags/%E5%A6%9E%E5%A6%9E/"/>
    
  </entry>
  
  <entry>
    <title>继续测试 live writer 的 post-slug 功能</title>
    <link href="http://wdicc.com/test-live-writer-post-slug/"/>
    <id>http://wdicc.com/test-live-writer-post-slug/</id>
    <published>2007-06-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>居然没有提示就装好了，搞得我重装了好几次，下载了好几个版本。</p> <p>这次看看post-slug好用不好用。</p> <p>&nbsp;</p> <p><pre lang="bash">grep -r "shit" GFW</pre>
</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;居然没有提示就装好了，搞得我重装了好几次，下载了好几个版本。&lt;/p&gt; &lt;p&gt;这次看看post-slug好用不好用。&lt;/p&gt; &lt;p&gt;&amp;nbsp;&lt;/p&gt; &lt;p&gt;&lt;pre lang=&quot;bash&quot;&gt;grep -r &quot;shit&quot; GFW&lt;/pre&gt;
&lt;/p&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="test" scheme="http://wdicc.com/tags/test/"/>
    
  </entry>
  
  <entry>
    <title>升级了一下blog，顺便换了一个spam插件</title>
    <link href="http://wdicc.com/update-blog-to-2-2/"/>
    <id>http://wdicc.com/update-blog-to-2-2/</id>
    <published>2007-06-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[wordpress 早就升级到 2.2 了，一直懒得弄，今天升级了一下。

最近发现有spam了，那个 Did You Pass Math 插件居然没挡住？spam还会计算这个？真晕了。因为这个插件老搞出来很多session文件在/tmp目录，所以刚好换一个用用。

弄了一个 <a href="http://www.paulbutler.org/" target="_blank" rel="external">JS SpamBlock</a> ,会在comment下面隐藏一个input段，如果不支持js的浏览器访问，就得在input里面填数字才能发表。支持js的就不需要填了。spam应该都不支持的吧？。。
<p class="poweredbyperformancing">Powered by <a href="http://scribefire.com/" target="_blank" rel="external">ScribeFire</a>.</p>
]]></content>
    
    <summary type="html">
    
      wordpress 早就升级到 2.2 了，一直懒得弄，今天升级了一下。

最近发现有spam了，那个 Did You Pass Math 插件居然没挡住？spam还会计算这个？真晕了。因为这个插件老搞出来很多session文件在/tmp目录，所以刚好换一个用用。

弄了一个 &lt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="spam" scheme="http://wdicc.com/tags/spam/"/>
    
  </entry>
  
  <entry>
    <title>我的城市呼和浩特--博邻征文</title>
    <link href="http://wdicc.com/about-mycity/"/>
    <id>http://wdicc.com/about-mycity/</id>
    <published>2007-06-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[响应 <a href="http://www.365bloglink.com" target="_blank" rel="external">博邻</a> 的号召，写写我的城市。

虽然在北京已经呆了9年了，可是说到我的城市，我还是不想写他。住了这么久，好像也一直没有融入到北京这个城市里面来，北京这个城市好像缺少自己的特点。去了好多次沈阳，那种文化给人的感觉是很不一样的。

说到呼和浩特市，其实我是住郊区的，那里少了市区的喧嚣，有蓝色的天，青色的山，绿色的大草地和田地，市区那些人工的绿地没办法比的。

现在最怀念的，就是小学放暑假的时候了，长长的假期里面，好多好玩的东西。和伙伴们一起去爬山，去山里的山泉积的天然“游泳池”里面游泳，不过惭愧的很，到现在我也没学会游泳 :( 。爬山累了，吃山上的野果，喝山泉，这是最有意思的事情了。记得有次大家做了一个决定，要试试看爬到最高的那座山看看。结果爬了半天，总算到了，有句老话叫做“一山更比一山高”啊，站到在山下看到的那个最高的山上，大家那个郁闷，后面的高山还是好像很多。。。后来知道了，那个可是阴山山脉，开玩笑，能让我们爬过去么，呵呵。最后下来的时候都已经晚上9点多了，吃着家里妈妈给做的饭，那个香啊。

说到吃饭，现在特别怀念家里的一些饭菜，焖面、莜面、烩菜什么的，简直是想起来什么都那么好吃，以前不怎么喜欢的菜，现在回去吃都是美味啊。呃。。好像跑题了。。

在北京的时候，去过一次康熙草原，当时看到那片草地的时候，那个失望啊。如果这也可以叫做草原的话，我们那岂不是遍地都是草原么。。。去那里玩的最爽的结果是划船，晕。在家乡，周末或者暑假可能常得去牧马，在山下的绿草地里面，小伙伴们玩着自己的游戏，马群自己悠闲的吃着嫩绿的小草。那会有时还会把我们家的一只羊一起带过去，那只小羊不知道为什么，特喜欢跟着我弟弟跑，我弟弟又特别害怕他，所以经常被那只羊追着乱叫。

好像写了很多儿时的记忆，其实一个地方留给人们最多的，可能就是回忆了。美好的回忆总是让人难以忘记。

<p class="poweredbyperformancing">Powered by <a href="http://scribefire.com/" target="_blank" rel="external">ScribeFire</a>.</p>
]]></content>
    
    <summary type="html">
    
      响应 &lt;a href=&quot;http://www.365bloglink.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;博邻&lt;/a&gt; 的号召，写写我的城市。

虽然在北京已经呆了9年了，可是说到我的城市，我还是不想写他。住了这么久，好像也一直没有融入到北京这
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="博邻" scheme="http://wdicc.com/tags/%E5%8D%9A%E9%82%BB/"/>
    
      <category term="我的城市" scheme="http://wdicc.com/tags/%E6%88%91%E7%9A%84%E5%9F%8E%E5%B8%82/"/>
    
  </entry>
  
  <entry>
    <title>google reader 和 zhuaxia</title>
    <link href="http://wdicc.com/google-reader-and-zhuaxia/"/>
    <id>http://wdicc.com/google-reader-and-zhuaxia/</id>
    <published>2007-06-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[最早的时候用的是<a href="http://www.bloglines.com" target="_blank" rel="external">bloglines</a> ，结果发现有时候有的看过的feed会又变成没看过的，也不知道是feed的问题，还是bloglines的问题，但是这个问题让人很郁闷。后来 <a href="https://www.google.com/reader/" target="_blank" rel="external">Google reader</a> 支持帖标签分类之后，就用 Google reader 了。

Google reader 最近用的有点郁闷，有写feed有时候会有些撞墙的问题，搞的 reader 里面不能点这几个feed，点完之后别的也看不了了，很让人郁闷。然后就想起来了好多人推荐的 <a href="http://www.zhuaxia.com" target="_blank" rel="external">zhuaxia</a> 。

zhuaxia用了一段时间，发现他的切换不同的tag速度慢，最郁闷的问题是每次打开首页都会显示上次看的feed，这样没新内容还好，有新内容的时候，就会显示这些内容，这时左边的列表是合起来的，不注意不知道是哪个feed，很郁闷。今天无意中又看到了一个信息，Google reader 支持 https 访问，试了一下果然可以，那可真爽了，就不用担心撞墙了，呵呵。所以，又换回来了。 :)

<p class="poweredbyperformancing">Powered by <a href="http://scribefire.com/" target="_blank" rel="external">ScribeFire</a>.</p>
]]></content>
    
    <summary type="html">
    
      最早的时候用的是&lt;a href=&quot;http://www.bloglines.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;bloglines&lt;/a&gt; ，结果发现有时候有的看过的feed会又变成没看过的，也不知道是feed的问题，还是bloglines的问
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="reader" scheme="http://wdicc.com/tags/reader/"/>
    
      <category term="zhuaxia" scheme="http://wdicc.com/tags/zhuaxia/"/>
    
  </entry>
  
  <entry>
    <title>空调的匹数怎么算？zz</title>
    <link href="http://wdicc.com/about-air-condition/"/>
    <id>http://wdicc.com/about-air-condition/</id>
    <published>2007-06-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://www.dapenti.com/blog/more.asp?name=agile&amp;id=4332" target="_blank" rel="external">来自这里</a>

在选购空调时，销售人员通常会在推销空调时提到空调的匹数，匹数指的是电器消耗功率，1匹=1马力=735W，匹并不指制冷量。平时所说的空调是多少匹，是根据空调消耗功率估算出空调的制冷量。一般来说，习惯用1匹等于2500W的制冷量(也就是25机型)，1.5匹约等于.3500的量(也就是35机型)。26机型约为1.1匹，27机型为1.2匹，28机型约为1.3匹，32机型为1.4匹；33机型约为1.5匹，36机型为大1.5匹。

一般，1匹空调适用面积10~15平方米，1.25匹适用10~19平方米，1.5匹适用16~26平方米，1.7匹适用15~30平方米，两匹适用20~37平方米，3匹适用30~58平方米。

买空调的人都知道，根据空调匹数的不同价格也不一样。空调匹数，原指输入功率，包括压机、风扇电机及电控部分，因不同的品牌其具体的系统及电控设计差异，其输出的制冷量不同，故其制冷量以输出功率计算。

一般来说，1匹的制冷量大致力2000大卡，换算成国际单位应乘以1.162，故1匹之制冷量应力2000大卡×1．162＝2324瓦，这里的瓦（w）即表示制冷量，则1．5匹的应为2000大卡×1．5×1．162＝3486（w），以此类推。根据此情况，则大致能判定空调的匹数和制冷量。一般情况下，2200（w）~2600（w）都可称为1匹，4500（w）~5100（w）可称为两匹，3200（w）~3600（w）可称为1．5匹。制冷量确定后，即可根据目己家庭之实际情况估算制冷量，选择合适的空调机。

家用电器要消耗制冷量的较大部分，电视、电灯、冰箱等每瓦（w）功率要消耗制冷量1（w），门窗的方向也要消耗一定的制冷量，东面窗150W／m2，西面窗280W／m2，南面窗180W／m2 ，北面窗100W／m2，如是楼顶及西晒可考虑适当增加制冷量。
<p class="poweredbyperformancing">Powered by <a href="http://scribefire.com/" target="_blank" rel="external">ScribeFire</a>.</p>
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://www.dapenti.com/blog/more.asp?name=agile&amp;amp;id=4332&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;来自这里&lt;/a&gt;

在选购空调时，销售人员通常会在推销空调时提到空调的匹数，匹
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="空调" scheme="http://wdicc.com/tags/%E7%A9%BA%E8%B0%83/"/>
    
  </entry>
  
  <entry>
    <title>linux tuning</title>
    <link href="http://wdicc.com/linux-tuning/"/>
    <id>http://wdicc.com/linux-tuning/</id>
    <published>2007-06-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[地址 <a href="http://www.enigma.id.au/linux_tuning.txt" target="_blank" rel="external">http://www.enigma.id.au/linux_tuning.txt</a>

<pre class="prettyprint lang-bash">
# server with a decent amount of memory.
#
# This file should be saved as /etc/sysctl.conf
# You can source it manually if your system has booted by using:
# sysctl -e -p /etc/sysctl.conf
#
# Paul Day, paul (at) bur.st
#
# Last updated 02/03/05 and tested on 2.6.9
#

# Increase RPC slots
sunrpc.tcp_slot_table_entries = 32
sunrpc.udp_slot_table_entries = 32
# Increase size of RPC datagram queue length
net.unix.max_dgram_qlen = 50
# Log spoofed, source routed and redirects
net.ipv4.conf.default.log_martians = 1
# Don't accept source routes
net.ipv4.conf.default.accept_source_route = 0
# Don't send redirects
net.ipv4.conf.default.send_redirects = 0
# Source route verification on - incoming packets must match outgoing routing
net.ipv4.conf.default.rp_filter = 1
# Don't accept redirects
net.ipv4.conf.default.accept_redirects = 0
# Don't forward source routes
net.ipv4.conf.default.mc_forwarding = 0
# Disable forwarding 
net.ipv4.conf.default.forwarding = 0
# Log spoofed, source routed and redirects
net.ipv4.conf.all.log_martians = 1
# Don't relay bootp
net.ipv4.conf.all.bootp_relay = 0
# Don't proxy arp for anyone
net.ipv4.conf.all.proxy_arp = 0
# Don't accept source route packets
net.ipv4.conf.all.accept_source_route = 0
# Don't send redirects
net.ipv4.conf.all.send_redirects = 0
# Source route verification on - incoming packets must match outgoing routing
net.ipv4.conf.all.rp_filter = 1
# Don't accept redirects
net.ipv4.conf.all.accept_redirects = 0
# Don't forward source routes
net.ipv4.conf.all.mc_forwarding = 0
# Don't enable forwarding
net.ipv4.conf.all.forwarding = 0
# Don't allow the arp table to become bigger than this
net.ipv4.neigh.default.gc_thresh3 = 2048
# Tell the gc when to become aggressive with arp table cleaning.
# Adjust this based on size of the LAN. 256 is suitable for most
net.ipv4.neigh.default.gc_thresh2 = 1024
# Adjust where the gc will leave arp table alone - set to 32.
net.ipv4.neigh.default.gc_thresh1 = 32
# Adjust to arp table gc to clean-up more often
net.ipv4.neigh.default.gc_interval = 30
# Increase TCP
net.ipv4.neigh.default.proxy_qlen = 96
net.ipv4.neigh.default.unres_qlen = 6
# Increase size of socket buffers
net.ipv4.tcp_rmem = 4096	98304	349520
net.ipv4.tcp_wmem = 4096	65535	262142
net.ipv4.tcp_mem = 98304	262142	393216
# Turn off sack
net.ipv4.tcp_dsack = 0
# Don't use ECN because too many sites have wacky routers that can't handle it`
net.ipv4.tcp_ecn = 0
net.ipv4.tcp_reordering = 3
# Turn off sack/fack
net.ipv4.tcp_fack = 0
# Enable bad error message Protection
net.ipv4.icmp_ignore_bogus_error_responses = 1
# Ignore broadcasts pings, could become part of a Smurf
net.ipv4.icmp_echo_ignore_broadcasts = 1
# But don't ignore directed pings
net.ipv4.icmp_echo_ignore_all = 0
# Widen local port range
net.ipv4.ip_local_port_range = 33000	60000
# Bump up TCP socket queuer to help with syn floods
net.ipv4.tcp_max_syn_backlog = 2048
# Turn syn-cookie protection on
net.ipv4.tcp_syncookies = 1
# Drop it so lack of FIN times out quicker
net.ipv4.tcp_fin_timeout = 30
# How many times to retry killing an alive TCP connection
net.ipv4.tcp_retries2 = 15
net.ipv4.tcp_retries1 = 3
# Enable a fix for RFC1337 - time-wait assassination hazards in TCP
net.ipv4.tcp_rfc1337 = 1
# Drop keep-alive time
net.ipv4.tcp_keepalive_time = 3600
# Set number of times to retry a SYN-ACK in a half-open new connections
net.ipv4.tcp_synack_retries = 5
# Set number of times to retry SYN in a new connection
net.ipv4.tcp_syn_retries = 5
# Turn off sack
net.ipv4.tcp_sack = 0
# Enable really big (>65kB) TCP window scaling if we want it.
net.ipv4.tcp_window_scaling = 1
# Turn off timestamps
# Turn this back on if you're on a gigabit or very busy network
# Having it off is one less thing the IP stack needs to work on
net.ipv4.tcp_timestamps = 0
# Increase number of incoming connections backlog
net.core.somaxconn = 512
# Bump optmem_max up
net.core.optmem_max = 20480
# Increase number of incoming connections backlog
net.core.netdev_max_backlog = 1024
net.core.dev_weight = 64
# Bump up default r/wmem to max
net.core.rmem_default = 262141
net.core.wmem_default = 262141
# Bump up max r/wmem
net.core.rmem_max = 262141
net.core.wmem_max = 262141
# Increase size of file handles and inode cache
fs.file-max = 209708</pre>

<p class="poweredbyperformancing">Powered by <a href="http://scribefire.com/" target="_blank" rel="external">ScribeFire</a>.</p>
]]></content>
    
    <summary type="html">
    
      地址 &lt;a href=&quot;http://www.enigma.id.au/linux_tuning.txt&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.enigma.id.au/linux_tuning.txt&lt;/a&gt;

&lt;pre clas
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="bash" scheme="http://wdicc.com/tags/bash/"/>
    
      <category term="kernel" scheme="http://wdicc.com/tags/kernel/"/>
    
      <category term="tuning" scheme="http://wdicc.com/tags/tuning/"/>
    
  </entry>
  
  <entry>
    <title>终于把宜家的镜子装上了</title>
    <link href="http://wdicc.com/mirror-produced-by-yijia/"/>
    <id>http://wdicc.com/mirror-produced-by-yijia/</id>
    <published>2007-06-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>好像是年前从宜家买了一个镜子，因为没有工具，一直就没装。这几天总算借到了电钻，今天把镜子给装上了。</p> <p>这是安装图、镜子和钉子。</p> <p><img src="http://photo6.yupoo.com/20070603/205944_1590532430.jpg"> </p> <p><img src="http://photo8.yupoo.com/20070603/205918_1123330944.jpg"> </p> <p><img src="http://photo6.yupoo.com/20070603/205936_751480677.jpg"> </p> <p>宜家的这个钉子设计的非常好，就算钻孔不是很到位，也同样可以装好镜子。</p> <p><img src="http://photo8.yupoo.com/20070603/205941_874433667.jpg"> </p> <p>从下面往上面装，这是装了2块的效果。</p> <p><img src="http://photo6.yupoo.com/20070603/205931_1123408221.jpg"> </p> <p>装好后的效果。</p> <p><img src="http://photo7.yupoo.com/20070603/205937_641786367.jpg"></p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;好像是年前从宜家买了一个镜子，因为没有工具，一直就没装。这几天总算借到了电钻，今天把镜子给装上了。&lt;/p&gt; &lt;p&gt;这是安装图、镜子和钉子。&lt;/p&gt; &lt;p&gt;&lt;img src=&quot;http://photo6.yupoo.com/20070603/205944_1590532430
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="宜家" scheme="http://wdicc.com/tags/%E5%AE%9C%E5%AE%B6/"/>
    
      <category term="镜子" scheme="http://wdicc.com/tags/%E9%95%9C%E5%AD%90/"/>
    
  </entry>
  
  <entry>
    <title>装了一个live writer新版，测试看看</title>
    <link href="http://wdicc.com/test-live-writer/"/>
    <id>http://wdicc.com/test-live-writer/</id>
    <published>2007-05-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>测试下看看呢？</p> <p>&nbsp;</p> <p></p> <p></p> <p>好像很<font color="#ff0000">多功能</font>不错，呵呵。</p> <p align="center"><u><strike>居中？</strike></u></p> <ol> <li> <div align="left"><u><strike>awefsdf</strike></u></div> </li><li> <div align="left"><u><strike>sdfsdf</strike></u></div> </li><li> <div align="left"><u><strike>sdfsdfsdf</strike></u></div></li></ol> <p align="left">&nbsp;</p> <blockquote> <p align="left">新的asdfasdfasdfasdfasdfasdfa</p> <p align="left">sdfasdf</p></blockquote> <p align="left">下面的</p> <p align="left"><pre lang="bash">grep -r xxx aaa</pre>
</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;测试下看看呢？&lt;/p&gt; &lt;p&gt;&amp;nbsp;&lt;/p&gt; &lt;p&gt;&lt;/p&gt; &lt;p&gt;&lt;/p&gt; &lt;p&gt;好像很&lt;font color=&quot;#ff0000&quot;&gt;多功能&lt;/font&gt;不错，呵呵。&lt;/p&gt; &lt;p align=&quot;center&quot;&gt;&lt;u&gt;&lt;strike&gt;居中？&lt;/strike&gt;&lt;/u&gt;&lt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="livewriter" scheme="http://wdicc.com/tags/livewriter/"/>
    
  </entry>
  
  <entry>
    <title>惊心动魄的流血事件</title>
    <link href="http://wdicc.com/bleeding/"/>
    <id>http://wdicc.com/bleeding/</id>
    <published>2007-05-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来了公司觉得鼻子里面有点难受，撕了一块纸擤鼻涕，结果纸一拿开看到上面全是血，就和电视剧里面咳嗽的时候手帕上面的血一样，好多。然后就感觉鼻血一滴一滴就出来了，赶紧撕了一块纸堵住鼻子就去卫生间了，拿开纸以后发现滴的速度很快，纸都红了。清洗了一下鼻子周围，发现根本清理不过来，滴的太快了，就用左手挡住鼻子，右手高举起来，头后仰站了一会，结果手一拿开血还是不停的滴。赶紧回来拿了一块纸塞住鼻子，继续刚才的姿势站了一会，发现血会往咽喉那里留，一会嘴里就有血腥味了。站了一会觉得没效果，纸拿开之后，血还是继续滴，速度一点都没变。换了块纸堵住鼻子，上网搜了一下，找到点资料。

<blockquote>第一步：坐下来，全身放松，用手指压着流鼻血的鼻子中部5～10分钟（利用鼻翼压迫易出血区）；
第二步：患者头部太保持直立位。因为头低可引起头部充血，而仰头会使血液流下咽部；
第三步：口中的血液应尽量吐出，以免咽下刺激胃部引起呕吐
第四步：指压期间用冷水袋（或湿毛巾）敷前额及后颈，可促使血管收缩，减少出血。</blockquote>

<blockquote>我们知道，鼻有前鼻孔和后鼻孔，鼻出血也按部位分前鼻孔和后鼻孔出血（绝大部分是前鼻孔出血）。遇到这种情况，首先应镇定，以一手的拇指与中指或食指捏住两侧鼻翼，实行压管止血法。此时，头部位应取正位，即既不仰头也不俯首，又不歪着头。若仰头，就会出现上述病例的情况；若低头，又会加大局部血管压力而增加出血。至于用冷水拍打额部，似无必要，因为拍打本身就是一种冲击。若取冷缩血管之意，不如用冰袋敷鼻梁，但勿放松捏鼻的手指。在压迫止血的同时，若家中有麻黄素滴鼻液或鼻眼净（或滴鼻净），可滴湿棉片塞于鼻腔中再捏鼻，效果更好。</blockquote>

看来以前的偏方都是骗人的啊，我还搜到什么捆中指啥的，能管用么？

按照上面，堵住鼻孔，用手捏着鼻子，没有冷水袋没办法了，捏了一会，拿开纸，发现血还在流。。。有点害怕了，不会是啥病吧，看韩剧都是突然流鼻血不止，然后诊断得了绝症。。。恐怖啊。换了一块纸，继续捏着鼻子，一边还在想各种后果。。。又捏了一会，拿开纸，发现好像好了，血没了。这不，继续换一块纸，巩固一下，不过没捏鼻子了。

现在感觉头有点晕晕的，眼睛发花，不知道是不是流血的结果。
]]></content>
    
    <summary type="html">
    
      来了公司觉得鼻子里面有点难受，撕了一块纸擤鼻涕，结果纸一拿开看到上面全是血，就和电视剧里面咳嗽的时候手帕上面的血一样，好多。然后就感觉鼻血一滴一滴就出来了，赶紧撕了一块纸堵住鼻子就去卫生间了，拿开纸以后发现滴的速度很快，纸都红了。清洗了一下鼻子周围，发现根本清理不过来，滴的太快了
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="流鼻血" scheme="http://wdicc.com/tags/%E6%B5%81%E9%BC%BB%E8%A1%80/"/>
    
  </entry>
  
  <entry>
    <title>oracle 的高级复制出了点问题，记录下解决办法</title>
    <link href="http://wdicc.com/rep-of-oracle/"/>
    <id>http://wdicc.com/rep-of-oracle/</id>
    <published>2007-05-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[早上来了同事就来找我，有两台同步的服务器数据库没有同步成功，查查咋回事。

一台A，从B处同步。蒙了一下，果然有个dba_jobs表，呵呵。

<pre class="prettyprint lang-sql">

在A处执行上面的命令，好像repadmin的job都在正常执行。
在B处执行上面的命令，能查到类似下面的信息

<pre class="prettyprint lang-text">
---------- ------------------------------ -------------------
NEXT_DATE             FAILURES B
------------------- ---------- -
47 repadmin                           2006-05-16 19:37:29
4001-01-01 00:00:00         16 Y</pre>

显然是job挂了。查看了一下挂的时间，原来是联通机房机柜断电那天，A机器在联通机房，那天断电了6个小时。B机器上面的同步尝试了16次之后就挂起了。解决方法也不难，用repadmin用户登录，然后执行下面的语句，<strong>谁的job只能由谁来执行</strong>：

<pre class="prettyprint lang-sql">

47是job id，sysdate表示当前时间。等会再看吧，执行成功之后会把 failures 重新计数，B变成N。
</pre></pre>]]></content>
    
    <summary type="html">
    
      早上来了同事就来找我，有两台同步的服务器数据库没有同步成功，查查咋回事。

一台A，从B处同步。蒙了一下，果然有个dba_jobs表，呵呵。

&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;

在A处执行上面的命令，好像repadmin的job都在正常执行。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>又找到一个wp的coding插件的问题</title>
    <link href="http://wdicc.com/bug-of-coding-plugin/"/>
    <id>http://wdicc.com/bug-of-coding-plugin/</id>
    <published>2007-05-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在 geshi/geshi.php 里面，有个函数会将 &,>,<," 这些替换为html字符。而同时呢，wp="" 的="" wp-includes="" formatting.php="" 里面也会将这些字符做处理，这样就混乱了。解决方法也很简单，把coding插件里面的相应函数注释掉就好了（目前发现注释掉&和"就可以）。="" <pre="" class="prettyprint lang-php">
        // init

        $aTransSpecchar = array(
//            '&' => '&amp;',
//            '"' => '&quot;',
            '<' ==""> '<', '="">' => '>' 
            );            

        $aTransSpecchar = array();
.....
}
</',></'></,">]]></content>
    
    <summary type="html">
    
      在 geshi/geshi.php 里面，有个函数会将 &amp;,&gt;,&lt;,&quot; 这些替换为html字符。而同时呢，wp=&quot;&quot; 的=&quot;&quot; wp-includes=&quot;&quot; formatting.php=&quot;&quot; 里面也会将这些字符做处理，这样就混乱了。解决方法也很简单，把coding插件里面的相应
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="coding" scheme="http://wdicc.com/tags/coding/"/>
    
  </entry>
  
  <entry>
    <title>awk 数组的一个应用</title>
    <link href="http://wdicc.com/awk-array/"/>
    <id>http://wdicc.com/awk-array/</id>
    <published>2007-05-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[sed和awk这本书看了好久了，sed部分将就看完了，awk部分基本没怎么看。上次有人问起一个比较文件的问题，发现awk来解决非常的简单。

比较两个文件A、B，打印出包含在A中的，但是不包含在B中的所有行。

根据题目要求，awk的解决方法如下:
<pre class="prettyprint lang-bash">

里面NR表示行号，FNR表示当前文件中的行号。NR==FNR的时候，表示此时正在读取B文件，以B中的$0为索引，建立一个数组，并且都赋值为1。
当NR>FNR 的时候，表示此时在读取A文件，如果a[$0]为1，那么就表示这个$0是在B里面也存在的，是吧？所以，如果要B里面不存在的，那么就得是a[$0]不为1的，就是没做过赋值的。所以了，就是这个了。

进阶一下，比较两个文件A、B，打印包含在A中第一列，但是不包含在B中第二列的整行。

类似的：
<pre class="prettyprint lang-bash">

比较文件内容还可以用comm命令，还有人提出了grep命令，例如第一个问题：
<pre class="prettyprint lang-bash">
</pre></pre></pre>]]></content>
    
    <summary type="html">
    
      sed和awk这本书看了好久了，sed部分将就看完了，awk部分基本没怎么看。上次有人问起一个比较文件的问题，发现awk来解决非常的简单。

比较两个文件A、B，打印出包含在A中的，但是不包含在B中的所有行。

根据题目要求，awk的解决方法如下:
&lt;pre class=&quot;pre
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="awk" scheme="http://wdicc.com/tags/awk/"/>
    
      <category term="bash" scheme="http://wdicc.com/tags/bash/"/>
    
  </entry>
  
  <entry>
    <title>繁忙的五一</title>
    <link href="http://wdicc.com/busy-may-day/"/>
    <id>http://wdicc.com/busy-may-day/</id>
    <published>2007-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[五一陪老婆回了沈阳，这次计划中就比较充实，去了沈阳的好几个景点，也幸好有车了，要不估计得累趴下。

1号去了怪坡。怪坡就是一段大概100多米的坡度不到1°的路，上坡的时候，自行车、汽车不需要动力就可以上去，下坡的时候反而需要。据说好多人研究了没结果，呵呵，我感觉就是一个视觉差的一个坡度，不知道了就。

2号去了本溪水洞。其实就是类似南方的溶洞，里面好多钟乳石一样的东西，洞还比较长，坐船好久才往回走，还没有到头。里面水温不高，不过据说全年都这个温度，现在去里面很凉快，动态可能会感觉暖和。

3号休息了一天，去中街逛了逛，兴隆大家庭里面玩了会。老婆玩了会旱冰。晚上去看了二人转，好几个都是赵本山的徒弟，有些演的还是挺好的。

4号去了极地皇家海洋世界。地方不错，就是人太多了，由于很多过道比较窄，所以很多地方都是挤着就过去了，基本没怎么仔细看。唯一的亮点就是最后的海豚表演了。最后那个世纪丛林其实也没啥意思，不如不花那个门票钱。

5号去姥姥家，去五爱市场逛了逛，买了些衣服，呵呵。

6号上午去太原街逛了逛，下午去体育大学旁边的一个游泳馆游了会，这次算是我第一次正式学游泳了，水里泡了会，还挺好玩的，呵呵。

晚上去了好几次市府广场，玩了两次刷刷，租鞋3块钱不限时，多便宜，呵呵。北京这边我唯一知道的就是北展广场了，可惜太远。这次真是玩累了，下次去了就逛逛中街好了。
]]></content>
    
    <summary type="html">
    
      五一陪老婆回了沈阳，这次计划中就比较充实，去了沈阳的好几个景点，也幸好有车了，要不估计得累趴下。

1号去了怪坡。怪坡就是一段大概100多米的坡度不到1°的路，上坡的时候，自行车、汽车不需要动力就可以上去，下坡的时候反而需要。据说好多人研究了没结果，呵呵，我感觉就是一个视觉差的一
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="五一" scheme="http://wdicc.com/tags/%E4%BA%94%E4%B8%80/"/>
    
  </entry>
  
  <entry>
    <title>apache 的一个启动失败的问题的解决方法</title>
    <link href="http://wdicc.com/solve-apache-start-fail/"/>
    <id>http://wdicc.com/solve-apache-start-fail/</id>
    <published>2007-04-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这个问题网上好多方法，记录一下方便自己以后查看。

<pre class="prettyprint lang-text">
[Wed Apr 18 19:56:47 2007] [notice] Digest: done
[Wed Apr 18 19:56:47 2007] [warn] pid file /usr/local/apache54/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
[Wed Apr 18 19:56:47 2007] [emerg] (28)No space left on device: Couldn't create accept lock</pre>

解决方法就是
<pre class="prettyprint lang-bash">
</pre>]]></content>
    
    <summary type="html">
    
      这个问题网上好多方法，记录一下方便自己以后查看。

&lt;pre class=&quot;prettyprint lang-text&quot;&gt;
[Wed Apr 18 19:56:47 2007] [notice] Digest: done
[Wed Apr 18 19:56:47 2007] [w
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>复习了一下 OSI 7层模型 和 tcp/ip 4层模型</title>
    <link href="http://wdicc.com/osi-and-tcp-ip/"/>
    <id>http://wdicc.com/osi-and-tcp-ip/</id>
    <published>2007-04-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[老是记不住这些，每次被问道只能说知道，但是说不出来名字。刚从irc里面得到一个好记得方法。

<b>All people seemes to need data processed.</b>

这句话的字头刚好就是7层模型的字头。

A->Application 应用层    \
P->Presentation 表示层  --   应用层(HTTP、TFTP、FTP、NFS、SMTP、Telnet、SNMP、DNS)
S->Session 会话层        /
T->Transport 传输层   -----  传输层(TCP/UDP)
N->Network 网络层     -----  Internet 层(IP、ICMP、ARP、RARP)
D->Data Link 数据链路层 \
P->Physical 物理层      /  网络访问层 

这样似乎好记一点。。
]]></content>
    
    <summary type="html">
    
      老是记不住这些，每次被问道只能说知道，但是说不出来名字。刚从irc里面得到一个好记得方法。

&lt;b&gt;All people seemes to need data processed.&lt;/b&gt;

这句话的字头刚好就是7层模型的字头。

A-&gt;Application 应用层    \
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="tcp/ip" scheme="http://wdicc.com/tags/tcp-ip/"/>
    
  </entry>
  
  <entry>
    <title>今天又理解了nagios的两个配置</title>
    <link href="http://wdicc.com/nagios-conf/"/>
    <id>http://wdicc.com/nagios-conf/</id>
    <published>2007-04-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<b>Host and Service Dependencies</b>

当监控的host或者service之间有依赖关系的时候，可以通过定义dependence来让nagios知道应该通知什么。

比如我这里的服务器都在idc托管，而我的nagios却是运行在公司的一台服务器上面。这样，有时候可能就需要考虑依赖关系了。比如当公司的网络出问题的时候（事实上经常出现），比如断网，总不能让他也认为是idc托管的服务器出问题了而给你发通知吧。host dependence正好可以解决这个问题。

比如 A 是idc的，B 是公司的网关（或者某个应该一直在线的服务器，比如sina.com.cn）。当nagios检测到A连不上的时候，他会根据dependence来检测B，如果B也连不上了，那么就只通知你B连不上了。

大概的配置如下
<pre class="prettyprint lang-text">
        host_name                       B
        dependent_host_name             A
        notification_failure_criteria   d,u
        }</pre>

<b>Notification Escalations</b>

escalations 的意思就是扩大。整个这个的意思应该就是扩大通知范围。之前一直没理解是什么意思，今天看了才明白。其实就是定义出问题的时候，什么时候扩大通知。

比如A服务器挂了，他对应的contactgroup就会立刻得到通知。但是，如果这个组里面的人在睡觉或者在做什么事情忽略了这个通知，怎么办呢？当然nagios会通知多次，但是如果这些都忽略掉了或者没有收到怎么办？这样这个escalations就有作用了，他可以定义几次通知contatgroup之后就开始通知别的人。还有一些别的功能，就不多说了。
]]></content>
    
    <summary type="html">
    
      &lt;b&gt;Host and Service Dependencies&lt;/b&gt;

当监控的host或者service之间有依赖关系的时候，可以通过定义dependence来让nagios知道应该通知什么。

比如我这里的服务器都在idc托管，而我的nagios却是运行在公司的一台服务器
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="nagios" scheme="http://wdicc.com/tags/nagios/"/>
    
  </entry>
  
  <entry>
    <title>twitter ? 我知道你在干什么</title>
    <link href="http://wdicc.com/twitter-what-are-u-doing/"/>
    <id>http://wdicc.com/twitter-what-are-u-doing/</id>
    <published>2007-04-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[twitter 已经流行很久了，一直没以为怎么回事。又不能和im结合，我还总去你的网站看啊，没意思。刚又看到有人说这个，去看了一下，发现这个支持rss输出，这下就爽很多了呀，弄到lilina里面不就可以了么？不错不错。。

我的地址是   http://twitter.com/wd ，注册了这个的给一个地址呀，呵呵。
]]></content>
    
    <summary type="html">
    
      twitter 已经流行很久了，一直没以为怎么回事。又不能和im结合，我还总去你的网站看啊，没意思。刚又看到有人说这个，去看了一下，发现这个支持rss输出，这下就爽很多了呀，弄到lilina里面不就可以了么？不错不错。。

我的地址是   http://twitter.com/w
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="twitter" scheme="http://wdicc.com/tags/twitter/"/>
    
  </entry>
  
  <entry>
    <title>找到一个wp coding插件的bug</title>
    <link href="http://wdicc.com/a-bug-for-coding-plugin/"/>
    <id>http://wdicc.com/a-bug-for-coding-plugin/</id>
    <published>2007-04-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[coding插件用的是geshi来加格式的。发现贴了一个html后coding不支持，找了半天bug，总算找到了。

在 $pattern 这个正则里面，(([^]]></content>
    
    <summary type="html">
    
      coding插件用的是geshi来加格式的。发现贴了一个html后coding不支持，找了半天bug，总算找到了。

在 $pattern 这个正则里面，(([^
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>发现了一个magpie的bug</title>
    <link href="http://wdicc.com/a-bug-of-magpie/"/>
    <id>http://wdicc.com/a-bug-of-magpie/</id>
    <published>2007-04-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在 rss_parse.inc 里面，创建xml parser的时候，针对php5，用的是xml_parser_create('')，就那个''，导致了问题的出现。但是问题不是总有的，有的source可以，有的就会卡住。例如下面这个html就会卡住。

<pre class="prettyprint lang-text"><html xmlns="http://www.w3.org/1999/xhtml ">
                <head><title>Connect Error</title></head>
                <body>
                        <h1>Connect Error</h1>
                        <p>Could not connect to MySQL database.</p>             </body>
        </html></pre>
]]></content>
    
    <summary type="html">
    
      在 rss_parse.inc 里面，创建xml parser的时候，针对php5，用的是xml_parser_create(&#39;&#39;)，就那个&#39;&#39;，导致了问题的出现。但是问题不是总有的，有的source可以，有的就会卡住。例如下面这个html就会卡住。

&lt;pre class=&quot;p
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>今天仔细研究了一下lilina</title>
    <link href="http://wdicc.com/study-lilina/"/>
    <id>http://wdicc.com/study-lilina/</id>
    <published>2007-04-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[lilina 最近总是出问题，又用不惯别的，今天花了点时间看了看。

lilina 的rss解析用的是 magpie ，feed文件下载用的是 Snoopy 。下载之后 magpie 用 xml_parse 来做处理。lilina 使用 magpie 的 fetch_rss() 函数来处理rss。而在 inc/magpie/rss_fetch.php 里面又用 _fetch_remote_file() 函数来获取rss文件，文件的获取用的是 Snoopy 类。获取文件内容之后，又用 magpie 的 MagpieRSS 类的 MagpieRSS 函数来处理文件，里面用到了 xml_parse() 函数。再后面就没有仔细看了。

我遇到的问题是 Snoopy 获取文件是没问题的，出问题的是 xml_parse ,如果获取的source不是有效的xml文件，xml_parse 会死掉，所以我就在 xml_parse 前面检查了一下 source 是不是一个正常的feed。有人推荐 tidy 来验证，那太麻烦了，我就直接match了一下feed这个关键字。。。目前看好像每问题。。
]]></content>
    
    <summary type="html">
    
      lilina 最近总是出问题，又用不惯别的，今天花了点时间看了看。

lilina 的rss解析用的是 magpie ，feed文件下载用的是 Snoopy 。下载之后 magpie 用 xml_parse 来做处理。lilina 使用 magpie 的 fetch_rss() 
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>unix 进程</title>
    <link href="http://wdicc.com/unix-process/"/>
    <id>http://wdicc.com/unix-process/</id>
    <published>2007-04-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[看了 <a href="http://www-128.ibm.com/developerworks/aix/library/au-speakingunix8/?ca=dgr-lnxw01speakunix8" target="_blank" rel="external">Speaking UNIX, Part 8: UNIX processes</a> 之后做一点笔记。

<b>A real multitasker</b>

在unix、linux、freebsd、mac os x、windows等系统里面，计算任务都表现为进程。unix 看上去可以同时运行很多任务，因为每个进程都只占用一部分cpu时间。

进程就像一个容器，包括运行的程序，环境变量，程序的输入输出等。可以把进程想像为一个国家，有自己的边界，资源和产品。

每个进程也都有自己的owner（属组），owner通常是运行这个程序的人，有些系统服务的owner或许会是某个特殊的用户，或者是root。例如，为了安全，某个Apache server的owner可能是属于一个叫www的用户的，这个用户有权限来存取web服务需要的文件，这些文件别的用户是不能访问的。

一个进程的owner可能会改变，但是一个进程在同一个时间只能有一个owner。

setuid和setgid可以让一个进程获得比owner更高的权限。

一个setuid进程，例如top，运行的时候使用的是owner的权限。因此，当你运行top的时候，你的权限就被提升为root了。类似的，一个setgid进程，运行的时候具有的是group owner的权限。

例如，在Mac osx里面的wall命令（就是write all的缩写），因为他需要给每个物理或者虚拟的终端设备写信息，所以他被setgid tty。

<b>Taking inventory</b>

类似其他系统资源，unix系统里面的进程id总数虽然多，但是是有限的（实际上，一个系统几乎从来都不会出现进程id数不够的情况）。每一个新的进程，例如运行vi或者xclock，都会立刻分配一个进程id。在unix系统里面可以用ps命令查看进程。

ps -a -w -x 可以显示所有进程列表。-a显示所有在tty设备上面运行的进程，-x显示所有不是在tty设备上面运行的程序，-w使用“宽”模式显示，用来查看进程一些长的项目。

-o 还可以指定输出信息的列表。比如 -o pid,uname,command,state,stime,time 。

<b>Daddy, where do processes come from?</b>

 在unix系统里面，有些进程会从系统启动到关闭整个过程中一直运行。大部分进程从任务开始到结束都很快。

 每个新的unix进程都是从已经存在的进程产生的。另外，每个新的进程（子进程）都克隆自他的父进程。at least for an instant, until the child continues execution independently.如果每个进程都来自一个已经存在的进程，那么“第一个进程来自哪里？”，先有鸡还是先有蛋的问题。

第一个进程是由kernel在启动过程中产生的，叫做init。ps -l 1命令可以查看。
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY        TIME CMD
4 S     0     1     0  0  76   0 -   376 -      ?          0:06 init [2]  

可以看到，init的uid是0，也就是root。不像其他进程，init的ppid（父进程id）是0。

图 2,3 稍微解释一下。
<ol><li>进程A运行了几条指令。进程A有自己的资源、输入输出、环境变量等。</li><li>遇到一条fork()指令，会产生一个新的进程。进程A遇到fork之后，立刻产生一个新的进程Z。进程Z是A的克隆，有与A一行的环境变量、内存内容、程序状态、打开文件等。</li><li>进程Z一开始就从fork后面的指令继续执行，就是进程A剩下的部分。进程A也继续执行剩下的部分。</li><li>在fork指令后面的指令中，会检查当前的进程是子进程还是父进程。就是说，进程Z和进程A在后续的指令中各自分别确定自己是父进程还是子进程。区别是，fork指令会在子进程中返回0，而且父进程中返回子进程的进程id。</li><li>在前面的测试之后，进程A和进程Z各自使用独立的code path，就好像他们都来自一条路，后来选择了不同的岔路一样。</li></ol>

在fork之后，进程A也许会继续运行同样的程序。然而，进程Z或许会立刻变成另外一个程序。进程Z现在完全就是一个独立于其父进程A的进程了。

<b>Forking around</b>

可以在命令行实际体验一下fork。打开一个新的xterm，你现在应该知道xterm有自己的进程，而且，在xterm里面，shell是有xterm产生的一个单独的进程。

通过ps命令的输出可以看到，在ppid字段那里，就是父进程的id。 

使用&符号可以将程序放到后台执行。执行的时候会同时输出各个进程的id。jobs命令可以查看当前运行的进程。标签1，2，3可以用来标记不同的会话。kill %N 就是结束第N个会话。fg %N 可以将一个会话放到前台。

<b>To the great process pool in the sky</b>

有些进程是一直存在的，例如init，有些会将自己转变成其他的（例如shell）。大部分进程最终都会自然死掉，也就是程序运行完毕的时候。

你可以让一个进程suspended（挂起），也可以让他复苏。还有像前面说的，你也可以使用kill命令结束一个进程。

ctrl-Z 可以挂起一个进程。进程在前台运行的时候，ctrl+c 可以结束这个进程。在shell内部使用unix signals来对一个进程产生影响。你可以从一个进程像另一个发送signal（信号），也可以让进程自己给自己发送信号。

man 7 signal或者kill -L 可以看到所有的signal。使用kill命令可以发送这些signal。

刚针对fork测试了一下，写一个简单的c程序
<pre class="prettyprint lang-c">

main(){
        int a;
        printf("Before fork.\\n");
        a = fork();
        printf("After fork, fork returns %d\\n", a);
}</pre>

保存之后用gcc编译一下，执行一个，可以看到结果。fork之后的程序会继续执行下面的指令，唯独fork的返回值不同。
]]></content>
    
    <summary type="html">
    
      看了 &lt;a href=&quot;http://www-128.ibm.com/developerworks/aix/library/au-speakingunix8/?ca=dgr-lnxw01speakunix8&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Spea
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="signal" scheme="http://wdicc.com/tags/signal/"/>
    
      <category term="进程" scheme="http://wdicc.com/tags/%E8%BF%9B%E7%A8%8B/"/>
    
  </entry>
  
  <entry>
    <title>后挂电话的人</title>
    <link href="http://wdicc.com/off-phone/"/>
    <id>http://wdicc.com/off-phone/</id>
    <published>2007-04-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这是第二次写了。唉，真郁闷。昨天写了一拖丢了。

前天晚上值班回家的时候老婆打电话过了问我到哪里了，聊了几句就互相挂了电话。之后就想起来这个了。

打电话的时候，通常都会想像对方是在面前的，会想像对方的样子。高兴、生气、撒娇，都像对着对方一样，所以说电话是一个很伟大的发明。挂电话的死后总会有先后了，不过你要说还有一起挂的那就算了，哼，不争这个。后挂电话的人在对方电话“咔嗒”一声挂上的时候是会有失落感的，就像晚上看电视突然停电一样，对方的形象突然就没了。就像风筝断了线一样，开始还能抓住对方，能知道对方的表情，可接下来一瞬间就断了。

如果谁有一个愿意后挂电话的人，那么这个人无疑肯定是幸福的。你有没有？

之前老婆还不是老婆的时候，每次电话我都会尽量做到后挂电话，现在变成老婆了，反到少了，说完事情就挂了，可能是双方太熟悉的缘故，也不需要相互表达的很清楚，对方就知道。但是这些显然都是借口了，借口的意思就是说，这个理由说出来的比不说出效果还好 :( ，以后我要改了。
]]></content>
    
    <summary type="html">
    
      这是第二次写了。唉，真郁闷。昨天写了一拖丢了。

前天晚上值班回家的时候老婆打电话过了问我到哪里了，聊了几句就互相挂了电话。之后就想起来这个了。

打电话的时候，通常都会想像对方是在面前的，会想像对方的样子。高兴、生气、撒娇，都像对着对方一样，所以说电话是一个很伟大的发明。挂电话
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="挂电话" scheme="http://wdicc.com/tags/%E6%8C%82%E7%94%B5%E8%AF%9D/"/>
    
  </entry>
  
  <entry>
    <title>呼拉圈的问题</title>
    <link href="http://wdicc.com/about-hula-hoop/"/>
    <id>http://wdicc.com/about-hula-hoop/</id>
    <published>2007-04-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[感觉呼拉圈这玩意挺怪异的，为什么我就学不会呢？后来总结了一下，有以下2个可能。<br><br><ol><li>有啤酒肚。这样，呼拉圈好像就不太能卡到腰上。所以总往下掉。</li><li>腰扭不起来。总不能和谐的和呼拉圈一起转，这样，扭几下之后，呼拉圈就因为没有动力掉下来了。初学者可能都有这个问题。</li></ol>其实我也转起来过，偶尔能转个好几圈，那时候很有感觉，可是一高兴就掉了。然后又转不起来了。 :(<br><br>呼拉圈减肥也需要运动时间足够长，可以参考国家体委会推行的”三三三”运动：每周运动三次，每次至少三十分钟，心跳达一百三十下。由于摇呼啦圈的运动强度不够，如果要增加心跳速率，就必须要加快摇动的速度。<br><br>我看来是学不会这个了，玩玩别的吧。<br>
]]></content>
    
    <summary type="html">
    
      感觉呼拉圈这玩意挺怪异的，为什么我就学不会呢？后来总结了一下，有以下2个可能。&lt;br&gt;&lt;br&gt;&lt;ol&gt;&lt;li&gt;有啤酒肚。这样，呼拉圈好像就不太能卡到腰上。所以总往下掉。&lt;/li&gt;&lt;li&gt;腰扭不起来。总不能和谐的和呼拉圈一起转，这样，扭几下之后，呼拉圈就因为没有动力掉下来了。初学者
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="呼拉圈" scheme="http://wdicc.com/tags/%E5%91%BC%E6%8B%89%E5%9C%88/"/>
    
  </entry>
  
  <entry>
    <title>第五批 公交线路调整</title>
    <link href="http://wdicc.com/adjust-of-bus/"/>
    <id>http://wdicc.com/adjust-of-bus/</id>
    <published>2007-04-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[虽然调整没几条，但是涉及到我们小区的，倒是有三条。

<blockquote>831 改成 675 ，通州李庄-> 左家庄
通州李庄 上潞园小区 小潞邑北站 小潞邑 龙旺庄 焦王庄 结研所 北京物资学院 五里桥路口东 东十里堡村 常营路口东 常营路口西 黄渠村黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口 十里堡北里 农民日报社 农民日报社北 石佛营东里 豆各庄路口南 豆各庄路口西 朝阳公园桥东朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南 燕莎桥西 新源南路西口 新源里 左家庄
5：30-22：00</blockquote>


<blockquote>834 改成 498 ，常营民族家园->燕莎桥南
常营民族家园 常营西路 常营北路 常营 常营路口西 黄渠村 黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口北 姚家园村 万杰医院 姚家园西 姚家园西口 豆各庄路口西 朝阳公园桥东 朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南
常营民族家园5：30-21：15  燕莎桥南6：15-22：00</blockquote>


<blockquote>742 改成 506 ，常营民族家园->四惠
常营民族家园 常营西路 常营北路 常营 科技大学管庄校区 管庄路口北 管庄 周家井 双桥西 茶家坟 梆子井 高碑店桥东 四惠东站 四惠站
上林苑小区5：30—21：00  北京华侨城6：30—22：00</blockquote>


742改的挺好，以前线路太长，四惠等车的时候半天不来。反正我也从来不到南三环，刚好，哈哈。以后四惠等车就爽了，没准还有座，嘿嘿。

831就不爽了，以前往北三环走多舒服，速度很快。834还好，走城里，速度慢，所以也无所谓了。
]]></content>
    
    <summary type="html">
    
      虽然调整没几条，但是涉及到我们小区的，倒是有三条。

&lt;blockquote&gt;831 改成 675 ，通州李庄-&gt; 左家庄
通州李庄 上潞园小区 小潞邑北站 小潞邑 龙旺庄 焦王庄 结研所 北京物资学院 五里桥路口东 东十里堡村 常营路口东 常营路口西 黄渠村黄渠西站 白家楼桥东
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="公交" scheme="http://wdicc.com/tags/%E5%85%AC%E4%BA%A4/"/>
    
  </entry>
  
  <entry>
    <title>给apache加了一个compress模块，mod_deflate</title>
    <link href="http://wdicc.com/compress-apache/"/>
    <id>http://wdicc.com/compress-apache/</id>
    <published>2007-04-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[apache 1.3 里面有个压缩模块叫做 mod_gzip ，不支持 2.x。在2.x 里面有一个 <a href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html" target="_blank" rel="external">mod_deflate</a> 模块，也是类似的效果。想使用的话，很简单，编译的时候加上 --enable-deflate 就可以了。之后可以用 apachectl -l  看是不是正常加载了这个模块。

httpd.conf 添加下面的语句
<pre class="prettyprint lang-txt">

对所有指定类似的文件都应用这个模块。添加之后访问看看。

<pre class="prettyprint lang-txt">
203.86.x.x - - [02/Apr/2007:15:24:23 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">4718</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 Firefox/2.0.0.3"

203.86.x.x - - [02/Apr/2007:15:46:16 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">1684</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 irefox/2.0.0.3"</pre>

好像是小了。。。

如果error.log 里面出现了下面的错误
<pre class="prettyprint lang-txt">

 这表示apache的那个模块没有安装正确。
</pre></pre>]]></content>
    
    <summary type="html">
    
      apache 1.3 里面有个压缩模块叫做 mod_gzip ，不支持 2.x。在2.x 里面有一个 &lt;a href=&quot;http://httpd.apache.org/docs/2.0/mod/mod_deflate.html&quot; target=&quot;_blank&quot; rel=&quot;exte
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>awstats 如何统计以前的日志？</title>
    <link href="http://wdicc.com/awstats-log/"/>
    <id>http://wdicc.com/awstats-log/</id>
    <published>2007-04-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[突然想安装一个awstats了，参考 <a href="http://www.chedong.com/tech/awstats.html" target="_blank" rel="external">车东</a> 的文章，安装了一个。可是发现一个问题，设置了logfile为 access_log.%YYYY-24%MM-24%DD-24.log 之后，发现只能把昨天的日志统计进来，可是我的log下面还有好多呢，想统计以前的，怎么弄呢？幸好，awstats已经考虑到这个问题了。

awstats.pl 脚本支持在命令行指定logfile，这样简单了，改变这个参数就可以了。不过要注意的是，如果你的data里面已经处理新的日志，那么指定logfile也没用了，以前的没办法更新进来了。只能是删掉data里面的内容，然后重新从最早的开始生成一遍。我写了一个脚本来做这个事情。

<pre class="prettyprint lang-bash">

awstats_dir=/opt/tt2/awstats/wwwroot/cgi-bin
logfile_dir="/usr/local/apache/logs/"

cd $awstats_dir

for file in `find $logfile_dir -name "access_log.2*" | sort`;do
        #echo "$file"
        ./awstats.pl －update -config=wd -LogFile=$file
done</pre>

保存为 awstats.sh ，然后执行就可以了。他会查找 logfile_dir 下面所有的 access_log.2 开头的文件，作为参数来更新记录。
]]></content>
    
    <summary type="html">
    
      突然想安装一个awstats了，参考 &lt;a href=&quot;http://www.chedong.com/tech/awstats.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;车东&lt;/a&gt; 的文章，安装了一个。可是发现一个问题，设置了logfile为 a
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
      <category term="awstats" scheme="http://wdicc.com/tags/awstats/"/>
    
  </entry>
  
  <entry>
    <title>对子网的一些理解</title>
    <link href="http://wdicc.com/sub-network/"/>
    <id>http://wdicc.com/sub-network/</id>
    <published>2007-03-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[每个子网的第一个ip是 <font color="#3333FF">网络地址</font> ，最后一个ip是 <font color="#3333FF">广播地址</font> 。

计算两个ip在不在一个子网的方法是，分别将ip地址和掩码取“逻辑与”，如果结果想同，那么就是一个子网的。

比如 192.168.1.18/255.255.255.252 这个ip，怎么计算和他一个子网的其他ip呢？很简单，252表示这个子网总共有 256-252=4 个ip，那么每遇到4的倍数，就是一个子网的 网络地址 。这样，192.168.1.18 对应的 网络地址 就是18/4取整然后乘以4，也就是16，也就是 192.168.1.16，这样同一个网段的就有 192.168.1.16 ~ 192.168.1.19 这几个ip。
]]></content>
    
    <summary type="html">
    
      每个子网的第一个ip是 &lt;font color=&quot;#3333FF&quot;&gt;网络地址&lt;/font&gt; ，最后一个ip是 &lt;font color=&quot;#3333FF&quot;&gt;广播地址&lt;/font&gt; 。

计算两个ip在不在一个子网的方法是，分别将ip地址和掩码取“逻辑与”，如果结果想同，那么就是一个
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="子网" scheme="http://wdicc.com/tags/%E5%AD%90%E7%BD%91/"/>
    
  </entry>
  
  <entry>
    <title>把户口本给领了</title>
    <link href="http://wdicc.com/hukouben/"/>
    <id>http://wdicc.com/hukouben/</id>
    <published>2007-03-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<img src="http://photo1.yupoo.com/20070328/111649_1793103679.jpg"><br><br>总算领上了，不用拿那个户口页到处晃了。而且，好像还省了一笔钱。恩。<br>
]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;http://photo1.yupoo.com/20070328/111649_1793103679.jpg&quot;&gt;&lt;br&gt;&lt;br&gt;总算领上了，不用拿那个户口页到处晃了。而且，好像还省了一笔钱。恩。&lt;br&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="户口" scheme="http://wdicc.com/tags/%E6%88%B7%E5%8F%A3/"/>
    
  </entry>
  
  <entry>
    <title>戴眼镜的小毛</title>
    <link href="http://wdicc.com/glasses-and-maomao/"/>
    <id>http://wdicc.com/glasses-and-maomao/</id>
    <published>2007-03-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<img src="http://photo1.yupoo.com/20070328/111646_1474112226.jpg"><br><img src="http://photo1.yupoo.com/20070328/111643_180303892.jpg"><br>
]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;http://photo1.yupoo.com/20070328/111646_1474112226.jpg&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://photo1.yupoo.com/20070328/111643_180303892.jpg&quot;&gt;&lt;br&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="小毛" scheme="http://wdicc.com/tags/%E5%B0%8F%E6%AF%9B/"/>
    
  </entry>
  
  <entry>
    <title>蛋炒饭</title>
    <link href="http://wdicc.com/egg-and-rice/"/>
    <id>http://wdicc.com/egg-and-rice/</id>
    <published>2007-03-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周邻居过来吃饭，米饭弄多了。这两天周末吃了三顿蛋炒饭，都是我做的，呵呵。<br><br><img src="http://photo1.yupoo.com/20070325/211953_1885917037.jpg"><br><br>看看如何，自我感觉还不错，呵呵。不足的是差点绿色。葱也是白色的。<br>
]]></content>
    
    <summary type="html">
    
      上周邻居过来吃饭，米饭弄多了。这两天周末吃了三顿蛋炒饭，都是我做的，呵呵。&lt;br&gt;&lt;br&gt;&lt;img src=&quot;http://photo1.yupoo.com/20070325/211953_1885917037.jpg&quot;&gt;&lt;br&gt;&lt;br&gt;看看如何，自我感觉还不错，呵呵。不足的是差
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="蛋炒饭" scheme="http://wdicc.com/tags/%E8%9B%8B%E7%82%92%E9%A5%AD/"/>
    
  </entry>
  
  <entry>
    <title>Irssi script howto</title>
    <link href="http://wdicc.com/irssi-script-howto/"/>
    <id>http://wdicc.com/irssi-script-howto/</id>
    <published>2007-03-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[为 irssi 写一些简单的脚本其实不是很难。我大概讲解一下如何写作。

<b>== 理解 signal ==</b>

写过 vb 程序的都应该知道，vb 都是按照事件来触发执行程序的。例如你给某个窗体的 单击事件 写了代码，那么当这个窗体被单击的时候，就会执行你写的代码。

在 irssi 也是类似，不过他的不是事件，是 signal 。你所要做的就是针对不同的 signal 写不同代码即可。

irssi 的 signal 在这个 <a href="http://irssi.org/documentation/signals" target="_blank" rel="external">文档</a> 里面都写的很全了，此外安装 irssi 的时候也会安装 irssi 的一些文档，里面也有 signal 的相关文档。

<b>== 一个简单脚本 ==</b>

脚本头部要包含一些脚本的信息，例如下面。

<pre class="prettyprint lang-perl">
use vars qw($VERSION %IRSSI);
use Irssi;

$VERSION = '1.00';
%IRSSI = (
    authors     => 'wd',
    contact     => 'wd#wdicc.com',
    name        => 'My first Script',
    description => 'This script notify ' .
                   'you when recive msg.',
    license     => 'Public Domain',
);

sub recive_msg{
    my ($server, $msg, $nick, $address, $target) = @_;
    #do nothing 

}

Irssi::signal_add_first('message public',  'recive_msg');</pre>

最下面那行就是截获 irssi 的 signal 了。“message public”这个 signal 是在 irssi 接收到 public message 的时候产生，上面的脚本截获这个 signal 之后，执行后面的 revice_msg 函数 。查一下上面的 signal 文档可以找到下面的内容。

 "message public", SERVER_REC, char *msg, char *nick, char *address, char *target

这表示 irssi 在产生 message public 这个 signal 之后，还会同时传递后面的那些信息。上面那个脚本里面，这些信息都传递给了 recive_msg 函数。这样 recive_msg 函数的第一行就是设置一些变量来接收这些信息。

这就是一个简单的 signal 的处理过程，当然，上面的这个脚本在截获 signal 之后其实什么都没有做。那么怎么让脚本和 irssi 交互呢？

<b>== 和 irssi 交互 ==</b>

按照上面的例子，可以用 $server->command() 或者 $server->print() 来和 irssi 交互。

$server->command 可以在 irssi 里面执行一个 irssi 命令。例如

 $server->command("msg wd hi");

这样相当于在 irssi 里面输入 "/msg wd hi" 这个命令。其他命令类推一下。

$server->print 可以在 irssi 里面打印一些信息，这些信息别人是看不到的，这些信息类似于 irssi 给你的消息。例如

 $server->print("$server","a test msg");

这些信息会在1号窗口（这个不一定，看连接了几个server）里面显示。

有了 print 就可以在 irssi 里面测试 recive_msg 函数接收的信息都是什么意义了。试试看下面的命令

 $server->print("$server","$nick send you a msg : $msg");

<b>== 设置一些选项 ==</b>

可以为脚本设置一些选项，这样也可以让脚本适合更多人使用。

 Irssi::settings_add_str("wd","test","just for test");
 Irssi::settings_add_bool('blah', 'blah_color', 1);;

上面这两行设置了两个变量，一个是字符串 test，初始值为 "just for test"，另一个是布尔变量 blah_color ，初始值是1。第一个参数是设置将变量显示在哪个段，用 /set 命令查看的时候会看到。

使用下面的命令可以获取设置。

 $a = Irssi::settings_get_str("test");
 $b = Irssi::settings_get_bool('blah_color');

这样按照上面的设置， $a 的值就是 "just for test" ， $b 的值就是 1。当然，用户如果用 /set 命令来设置了这些参数，那么取回的信息就不一定是这些了。

<b>== 参考资料 ==</b>

<a href="http://juerd.nl/site.plp/irssiscripttut" target="_blank" rel="external">Scripting Irssi</a>
]]></content>
    
    <summary type="html">
    
      为 irssi 写一些简单的脚本其实不是很难。我大概讲解一下如何写作。

&lt;b&gt;== 理解 signal ==&lt;/b&gt;

写过 vb 程序的都应该知道，vb 都是按照事件来触发执行程序的。例如你给某个窗体的 单击事件 写了代码，那么当这个窗体被单击的时候，就会执行你写的代码。


    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="irssi" scheme="http://wdicc.com/tags/irssi/"/>
    
  </entry>
  
  <entry>
    <title>Irssi How to</title>
    <link href="http://wdicc.com/irssi-how-to/"/>
    <id>http://wdicc.com/irssi-how-to/</id>
    <published>2007-03-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://irssi.org" target="_blank" rel="external">irssi</a> 是一款 linux 下面的 irc 聊天软件，它是基于console下面的，所以不需要 x 界面的支持，并且支持 <a href="http://irssi.org/scripts" target="_blank" rel="external">plugin</a> 扩展功能，在 irc 软件里面，它用起来感觉还是很不错的。

<b>== 安装 irssi ==</b>

在 <a href="http://www.archlinux.org/" target="_blank" rel="external">ArchLinux</a> 下面，使用下面得命令即可安装 irssi 。如果需要使用 nicklist 插件，那么同时需要安装 screen 这个软件。

<pre class="prettyprint lang-bash">

<b>== 启动、退出 irssi ==</b>

启动 irssi 的方法也很简单，执行下面的命令即可。启动之后会看到一些提示内容。

<pre class="prettyprint lang-bash">

如果要退出 irssi ，可以在下面的输入框输入 "/quit [退出原因]" 命令，其中退出原因可以不写。

<b>== 删除内置的一些 server 和 network 列表 ==</b>

默认情况下， irssi 会给你设置一些 server 和 network 列表，可以使用下面的命令来查看。

<pre class="prettyprint lang-bash">
/server list
/channel list</pre>

这些都可以先删掉，如果你想保留的话，可以跳过这一步。

<pre class="prettyprint lang-bash">
/server remove [server_name]
/channel remove [chan_name]</pre>

删掉之后比较清爽，呵呵。我喜欢这样。

<b>== 添加自己的 server 和 network 列表 ==</b>

这里以 linuxsir 的 archlinux 的 irc 频道为例来介绍一下。服务器是  irc.oftc.net ，端口是6667，频道是 #arch-cn。

先添加 network 。 oftc 可以注册用户名，方法后面再说。下面命令中的  autosendcmd 后面的内容就是和服务器验证用户名的命令，如果你没这个需求，可以直接删掉那些内容。

<pre class="prettyprint lang-bash">/network add -autosendcmd "/^msg nickserv identify passwd;wait 2000">

接下来添加 server 。其中的 -auto 选项可以让 irssi 启动的时候就自动连接这个 server 。

<pre class="prettyprint lang-bash">

接下来添加自动加入的 channel 。 auto 参数同上。

<pre class="prettyprint lang-bash">

ok ，这就都添加完了，可以使用前面提到的list命令来查看添加的列表是否正确。退出 irssi 之后，重新启动， irssi 应该已经在自动连接 server ，并且连接之后还能自动加入刚才添加的频道了。

irssi 里面切换标签用的是 alt+数字 ，界面下面会提示哪个 window 是 active 的，按 alt+那个数字就可以切换过去。

<b>== 注册用户名 ==</b>

irc 里面修改昵称的命令是 “/nick new_nick”，设置好自己的 nick 之后，还可以在 oftc 注册，这样以后别人使用你这个昵称的时候，你可以抢回来。:)

注册昵称的命令如下。 password 改成密码， e-mail 改成邮箱。

<pre class="prettyprint lang-bash">

注册之后，以后可以使用下面的命令来告诉 oftc 你是谁。可以看到这个命令在前面出现过，就是添加 network 的时候，如果按照本文提示的那样做了的话，每次启动 irssi 连接到这个 network 所属的 server 之后，会自动执行这个命令。

<pre class="prettyprint lang-bash">

其他的一些注册用户名相关的信息可以通过 "/msg nickserv help" 来查看。

作了上面这些操作之后， irssi 用起来已经基本很顺手了。其他的一些 irc 命令可以自己去发现，或者上 irc 问其他的用户。

<b>== 显示 nicklist 列表 ==</b>

用一段时间会发现， irssi 里面查看当前有哪些用户在聊天不是很方便。这里需要安装一个 nicklist 插件，地址是<a href="http://irssi.org/scripts/scripts/nicklist.pl" target="_blank" rel="external">这里</a>，保存到 ~/.irssi/scripts 目录下面，然后在这个目录下面新建一个 autorun 目录，然后将 nicklist.pl 在那个目录下做一个链接，这么做的目的是使得 irssi 启动的时候就可以加载 nicklist.pl 这个插件。

ok ，重新启动 irssi ，然后在频道里面执行一下“/nicklist screen" 命令，右边是不是出来 nicklist 了？

<b>== 消息通知 ==</b>

使用一段时间就会发现，有时候 irc 里面有人和你说话的时候没有提示，不像即时通讯软件那样会弹出一个窗口提醒你。 irssi 通过插件可以来实现这个。

下载 <a href="http://irssi.org/scripts/scripts/beep_beep.pl" target="_blank" rel="external">beep</a> 插件，放到 .irssi/scripts 目录下面，然后在 irssi 中使用下面的命令加载这个插件。

 /script load beep_beep.pl

执行之后会在1号窗口看到加载成功与否的提示。加载之后 irssi 就多了两个参数可以设置， beep_flood 和 beep_cmd ，可以使用 /set 命令来设置他们。 beep_flood 的单位是毫秒，所以1000表示1秒。

设置完毕这些之后，还需要设置一下哪些情况下通知你，就是  beep_msg_level 这个参数。这个参数可以设置的内容可以用 /help levels 来查看。
<pre class="prettyprint lang-text">
    CRAP          - ?
    MSGS          - Match messages privately sent to you.
    PUBLIC        - Match messages sent to public channels.
    NOTICES       - Match NOTICE messages.
    SNOTES        - Match server notices.
    CTCPS         - Match CTCP messages.
    ACTIONS       - Match CTCP actions.
    JOINS         - Match join messages.
    PARTS         - Match part messages.
    QUITS         - Match quit messages.
    KICKS         - Match kick messages.
    MODES         - Match mode changes.
    TOPICS        - Match topic changes.
    WALLOPS       - Match wallops.
    INVITES       - Match invite requests.
    NICKS         - Match nickname changes.
    DCC           - DCC related messages.
    DCCMSGS       - Match DCC chat messages.
    CLIENTNOTICE  - Irssi's notices.
    CLIENTCRAP    - Miscellaneous irssi messages.
    CLIENTERROR   - Irssi's error messages.
    ALL           - All previous message levels combined.
    HILIGHT       - Match highlighted messages.
    NOHILIGHT     - Don't check a message's highlighting.
    NO_ACT        - Don't trigger channel activity.
    NEVER         - Never ignore, never log.
    LASTLOG       - Never ignore, never log.</pre>

我的设置是  "MSGS DCC INVITES HILIGHT" 。设置好之后也可以把它放到 autorun 里面去自动加载。

如果单纯设置 beep_cmd 这种方式你不满足的话，可以自己修改那个脚本，这里有我写的一篇 irssi_script_howto。

<b>== 其他的一些设定 ==</b>

使用"/ctcp user_name version"命令可以查看对方的一些信息，各个软件返回的信息不太一样，例如 xchat 自己的版本，还会返回操作系统的一些信息， chatzllia 也会返回自己的版本信息。默认情况下， irssi 也是返回自己的版本，但是我们可以自己定制一下 :)

执行 "/set" 命令，你会看到会返回很多信息，这些都是 irssi 的设置项，可以设置 theme 什么的，要设置 ctcp version 的返回信息，需要设置 ctcp_version_reply 这个选项， "/set ctcp_version_reply :)" 就可以了。对方查看的时候，只能看到:)这个返回信息。

在 irssi 里面，如果用 screen 启动的话，翻页使用的是 page down/page up 按键。

<b>== 参考资料 ==</b>

irssi的官方网站上面的 <a href="http://irssi.org/documentation" target="_blank" rel="external">文档</a> 很详细，建议去看看。本文就是参考 <a href="http://irssi.org/documentation/startup" target="_blank" rel="external">Startup HOWTO</a> 里面的 <b>Server and channel automation</b> 而写。
</pre></pre></pre></pre></pre></pre></pre>]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://irssi.org&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;irssi&lt;/a&gt; 是一款 linux 下面的 irc 聊天软件，它是基于console下面的，所以不需要 x 界面的支持，并且支持 &lt;a href=&quot;http:/
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="irssi" scheme="http://wdicc.com/tags/irssi/"/>
    
  </entry>
  
  <entry>
    <title>oracle在rh里面的安装流程</title>
    <link href="http://wdicc.com/install-oracle-in-rh/"/>
    <id>http://wdicc.com/install-oracle-in-rh/</id>
    <published>2007-03-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<b>第1部分 安装操作系统</b>

首先需要安装系统....Red Hat Enterprise Linux 2.1，Red Hat Enterprise Linux 3，Novell SUSE Linux Enterprise Server 8 是通过 oracle 10g认证的三个linux发行套件，不知道oracle 10.3有没有对这个修改。默认情况下，oracle 10g只能在rh的这两个版本安装，如果不是上面两个，运行安装程序会直接打印错误。不过也有方法在别的版本安装的，后面有说明。

按照<a href="http://blog.wdicc.com/wordpress/2007/03/14/307/" target="_blank" rel="external">上一篇文章</a>，安装linux的时候可以不选择图形界面，这样还可以节省不少空间。按照oracle的文档，说需要安装下面的这些软件包。

<pre class="prettyprint lang-bash">
compat-gcc-c++ compat-libstdc++ compat-libstdc++-devel</pre>

我实际安装过程中，compat-gcc compat-gcc-c++ compat-libstdc++ compat-libstdc++-devel 这几个包我没有安装也可以安装oracle。
<a id="more"></a>
<b>第2部分 针对oracle配置linux</b>

oracle 对系统硬件配置的一些要求。

<blockquote>内存 > 512MB
swap > 1GB
oracle软件 > 2.5GB
数据文件  > 1.2GB
/tmp  > 400MB</blockquote>

创建oracle用户和组
<pre class="prettyprint lang-bash">
/usr/sbin/groupadd dba
/usr/sbin/useradd -m -g oinstall -G dba oracle
id oracle</pre>

要记得为oracle用户设置密码。 
<pre class="prettyprint lang-bash">

创建oracle的安装目录，要注意前面对分区的大小要求。

<pre class="prettyprint lang-bash">
mkdir -p /u02/oradata
chown -R oracle:oinstall /u01/app/oracle /u02/oradata
chmod -R 775 /u01/app/oracle /u02/oradata</pre>

配置linux内核参数

<pre class="prettyprint lang-bash">
kernel.shmall = 2097152
kernel.shmmax = 2147483648
kernel.shmmni = 4096
kernel.sem = 250 32000 100 128
fs.file-max = 65536
net.ipv4.ip_local_port_range = 1024 65000
EOF
/sbin/sysctl -p</pre>

为 oracle 用户设置 Shell 限制。
<pre class="prettyprint lang-bash">
oracle               soft    nproc   2047
oracle               hard    nproc   16384
oracle               soft    nofile  1024
oracle               hard    nofile  65536
EOF

cat >> /etc/pam.d/login <<eof session="" required lib="" security="" pam_limits.so="" eof="" cat="">> /etc/profile <<eof 16384="" 65536="" if="" [="" \$user="oracle" ];="" then="" \$shell="/bin/ksh" ulimit="" -p="" -n="" else="" -u="" fi="" umask="" 022="" eof="" cat="">> /etc/csh.login <<eof 16384="" 65536="" if="" (="" \$user="=" "oracle"="" )="" then="" limit="" maxproc="" descriptors="" umask="" 022="" endif="" eof<="" pre="">

设置oracle 用户的环境变量。通过修改 .bash_profile 来完成。
<pre class="prettyprint lang-bash">
ORACLE_BASE=/u01/app/oracle; export ORACLE_BASE
ORACLE_SID=demo1; export ORACLE_SID</pre>

其他的变量等安装完了再设置。

<b>第3部分 安装 Oracle</b>

使用一个修改好的rsp文件，然后执行下面的命令。
<pre class="prettyprint lang-bash">

然后就等着吧，看那些log或者看屏幕输出都可以看到安装进度。

第4部分 可能会遇到的问题

下面这些是从网上找到的，我用到的就是第1和9条，还没有遇到其他问题。

1、运行runInstaller，错误提示如下：
Checking requirements...
Checking operating system version: must be redhat-2.1,redhat-3,SuSE-9,SuSE-8,UnitedLinux-1.0
Failed<<<<
解决方法：
方法一：
在/etc下创建UnitedLinux-release文件
#cat > /etc/UnitedLinux-release << EOF
>UnitedLinux 1.0 (i586)
>VERSION=1.0
>EOF
然后就可以正常启动安装程序。注意不要使用vi编辑该文件，否则可能会引起ORA-12547: TNS: lost contact的错误。

方法二：
运行runInstaller -ignoreSysPrereqs，这样会跳过检查

方法三：
修改Oracle 的/.../disk1/install/linux/oraparam.ini这个参数文件

2、安装界面或者netca界面、dbca界面显示很多"口口"样子的乱码

解决办法:查看locale输出
# locale
LANG=zh_CN.GB18030
LC_CTYPE=zh_CN.GB18030
LC_NUMERIC="zh_CN.GB18030"
LC_TIME="zh_CN.GB18030"
LC_COLLATE="zh_CN.GB18030"
LC_MONETARY="zh_CN.GB18030"
LC_MESSAGES="zh_CN.GB18030"
LC_PAPER="zh_CN.GB18030"
LC_NAME="zh_CN.GB18030"
LC_ADDRESS="zh_CN.GB18030"
LC_TELEPHONE="zh_CN.GB18030"
LC_MEASUREMENT="zh_CN.GB18030"
LC_IDENTIFICATION="zh_CN.GB18030"
LC_ALL=
执行#export LANG=en_US 然后重新调用安装程序.


3、Oracle10g自动检查操作系统是否符合安装的条件。当按照上面的脚本对系统进行配置后，会有警告提示。[Retry]会看到如下提示：

Checking for openmotif-2.1.30-11; found Not found. Failed <<<<
Check complete. The overall result of this check is: Failed <<<<
Problem: Some recommended packages are missing (see above)

下载并安装openmotif-2.1.30-11软件包后，通过验证。

备注：有oracle文档说明：对于在RHELAS3上安装oracle10g，需要openmotif-2.2.2-16或更高版本；
但下载openmotif-2.2.2-16.src.rpm，在机器上编译安装，oracle自动检查仍然有警告提示。


4、安装程序在进行到74%的时，按照提示用root身份运行$ORACLE_HOME/root.sh，出现以下错误：

./root.sh: line 227: /var/opt/oracle/srvConfig.loc: 没有那个文件或目录
./root.sh: line 228: /var/opt/oracle/srvConfig.loc: 没有那个文件或目录
/bin/chown: 无法取得 ‘/var/opt/oracle/srvConfig.loc’的属性：没有那个文件或目录
/bin/chgrp: 无法取得 ‘/var/opt/oracle/srvConfig.loc’的属性：没有那个文件或目录
/bin/chmod: 无法取得 ‘/var/opt/oracle/srvConfig.loc’的属性：没有那个文件或目录
Successfully accumulated necessary OCR keys.
Creating OCR keys for user 'root', privgrp 'root'..
OCR create keys failed, OCR error 26
Failed to initialize Oracle Cluster Registry for cluster

解决方法：
# mkdir /var/opt/oracle
# chown -R oracle.dba /var/opt/oracle
# ./root.sh

5、 数据库启动：
$sqlplus /nolog
SQL>connect / as sysdba
SQL>startup

ORA-00371: not enougsh shared pool memory, should be atleast 52132659 bytes.

解决方法：
这个错误并非是内核参数设置的问题，也和系统的物理内存大小无关。编辑$ORACLE_HOME/dbs/init$GID.ora文件：
shared_pool_size = 52132659


6、 数据库启动：
$sqlplus /nolog
SQL>connect / as sysdba
SQL>startup

ora-01102: cannot mount database in EXCLUSIVE mode

解决方法：
完全关闭数据库,更改$ORACLE_HOME/dbs/init.ora文件里的db_name为建库时定义的“全局数据库名”，然后再重新启动数据库

7、 数据库启动：
$sqlplus /nolog
SQL>connect / as sysdba
SQL>startup

ora-00205:error in identifying conrolfile, check alert log for more info

解决方法：
SQL>show parameter control_files
SQL>CREATE CONTROLFILE
将$ORACLE_BASE/admin/$GID/pfile/init$SID.ora***************拷贝到$ORACLE_HOME/dbs下，命名为init$SID.ora,即可解决。

8、数据库启动：
$sqlplus /nolog
SQL>connect / as sysdba
SQL>startup

ORA-01990:error opening password file '$ORACLE_NAME/dbs/orapw'
ORA-27037:unable to obtain file status
Linux Error:2: No such file or directory
Additional information: 3

解决方法：
将$ORACLE_HOME/dbs下的orapw$db_name文件拷贝生成一个orapw文件。


8、建库的过程中或者连接数据库的时候提示：
ORA-12547: TNS: lost contact
引起该错误的环境比较复杂，原因可能是：
1、用vi编辑的/etc/UnitedLinux-release文件
2、内核参数设置不正确
3、察看一下listener是否正常启动: lsnrct1 status
4、机器负载过大

9、 emca 的web界面的乱码

http://www.eygle.com/archives/2006/03/oracle10g_em_font_change.html

一直没怎么用10g的EM工具,今天打开来看看,发现也有相传已久的乱码问题.网上也流传着N种解决方案,仔细看一下,其实这个问题很好解决.

如果安装时,我们系统环境变量设置的是中文环境,那么就不会有这个问题.这个问题根本原因在于安装时,JDK/JRE字符集的自动选择.

在 $ORACLE_HOME/jdk/jre/lib 和 $ORACLE_HOME/jre/1.4.2/lib/ 目录下都有多种字符集字体配置文件:

[oracle@danaly ~]$ cd $ORACLE_HOME/jdk/jre/lib
[oracle@danaly lib]$ ls font*zh_CN*
font.properties.zh_CN.Redhat  font.properties.zh_CN.Redhat2.1  
font.properties.zh_CN.Sun  font.properties.zh_CN_UTF8.Sun

[oracle@danaly lib]$ cd $ORACLE_HOME/jre/1.4.2/lib/
[oracle@danaly lib]$ ls font*zh_CN*
font.properties.zh_CN.Redhat  font.properties.zh_CN.Redhat2.1  
font.properties.zh_CN.Sun  font.properties.zh_CN_UTF8.Sun 

我们只要用合适的中文字符集文件替换缺省文件即可,我选择使用font.properties.zh_CN.Redhat来替换缺省字体定义文件:

[oracle@danaly lib]$ cp font.properties.zh_CN.Redhat font.properties 

替换之后需要清理一下Cache,重启EM即可.

Cache路径通常位于:

$ORACLE_HOME/oc4j/j2ee/oc4j_applications/applications/em/em/cabo/images/cache/zhs 

清除所有gif文件即可.然后重新启动EM:

[oracle@danaly zhs]$ emctl stop dbconsole
TZ set to PRC
Oracle Enterprise Manager 10g Database Control Release 10.2.0.1.0  
Copyright (c) 1996, 2005 Oracle Corporation.  All rights reserved.
http://danaly.hurrray.com.cn:1158/em/console/aboutApplication
Stopping Oracle Enterprise Manager 10g Database Control ... 
 ...  Stopped. 
[oracle@danaly zhs]$ emctl start dbconsole
TZ set to PRC
Oracle Enterprise Manager 10g Database Control Release 10.2.0.1.0  
Copyright (c) 1996, 2005 Oracle Corporation.  All rights reserved.
http://danaly.hurrray.com.cn:1158/em/console/aboutApplication
Starting Oracle Enterprise Manager 10g Database Control .............. started. 
------------------------------------------------------------------
Logs are generated in directory 
/opt/oracle/product/10.2.0/danaly.hurrray.com.cn_danaly/sysman/log  

现在登陆Web页面,EM显示就可以正常显示中文了.

参考文章： <a href="http://www.oracle.com/technology/global/cn/pub/articles/smiley_10gdb_install.html" target="_blank" rel="external">这里</a>
</pre></eof></eof></eof></pre></pre>]]></content>
    
    <summary type="html">
    
      &lt;b&gt;第1部分 安装操作系统&lt;/b&gt;

首先需要安装系统....Red Hat Enterprise Linux 2.1，Red Hat Enterprise Linux 3，Novell SUSE Linux Enterprise Server 8 是通过 oracle 10g认证的三个linux发行套件，不知道oracle 10.3有没有对这个修改。默认情况下，oracle 10g只能在rh的这两个版本安装，如果不是上面两个，运行安装程序会直接打印错误。不过也有方法在别的版本安装的，后面有说明。

按照&lt;a href=&quot;http://blog.wdicc.com/wordpress/2007/03/14/307/&quot;&gt;上一篇文章&lt;/a&gt;，安装linux的时候可以不选择图形界面，这样还可以节省不少空间。按照oracle的文档，说需要安装下面的这些软件包。

&lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
compat-gcc-c++ compat-libstdc++ compat-libstdc++-devel&lt;/pre&gt;

我实际安装过程中，compat-gcc compat-gcc-c++ compat-libstdc++ compat-libstdc++-devel 这几个包我没有安装也可以安装oracle。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>oracle 文本界面的安装</title>
    <link href="http://wdicc.com/oracle-text-install/"/>
    <id>http://wdicc.com/oracle-text-install/</id>
    <published>2007-03-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[oracle 的手册里面讲的通常都是图形界面下面的安装，就是用oracle登录桌面，然后运行安装程序的方法。可实际上维护服务器的时候，大多用的还是<font color="#3333ff">远程</font>文本界面。这样很有必要看看如何通过文本界面来安装oracle。

oracle本身的安装程序也提供了这个方法，就是使用 responseFile 。这个 responseFile 其实就是在图形界面安装的时候的一些选择，保存到文件之后，直接告诉安装程序从这里读取设置就好了。将oracle的安装文件 ship.db.lnx32.cpio.gz 解压：

<pre class="prettyprint lang-bash">
cpio -idmv < ship.db.cpio</pre>

这样可以看到有个Disk1的文件夹，里面有个response目录，里面好多response文件，不过我还不知道这些有什么区别，里面设置项也很多，还没弄明白。我使用的不是这里的response文件。是通过下面的方法获取的rsp文件。

可以通过在记录模式中运行软件或通过手动编辑示例响应文件来创建响应文件。以下是一个基本演示：

   1. 用此命令启动 OUI 来创建响应文件：

      ./runInstaller -record -destinationFile /tmp/recorded.rsp
       
   2. 选择您需要的所有部分（源目标目录、主目录、主目录名、产品）。
   3. 当您看到 Summary 屏幕时，不要单击 Install，而是单击 Cancel。
   4. 仔细查看在 tmp/recorded.rsp 中创建的结果响应文件。如果需要，可以手动编辑该文件，只要您遵守使用规定的格式即可（请参见文档）。
   5. 现在如下执行静默安装：

      ./runInstaller -silent -responseFile /tmp/recorded.rsp

      在运行脚本时将会报告安装的进度。

如果您由于响应文件中的条目不正确而遇到安装故障，安装将失败并显示一条诊断消息。详细信息可在 oraInventory/logs 目录中找到。在每次使用响应文件运行 OUI 时，会创建具有 installActions-<时间戳>.log 和 silentInstall<时间戳>.log 格式名称的日志。

这样，只需要找台机器在图形界面下面运行一下安装程序，生成一个rsp文件，然后放到真正需要安装的服务器上面，修改一下安装路径，设置一下sys密码，就可以开始安装了。
</时间戳></时间戳>]]></content>
    
    <summary type="html">
    
      oracle 的手册里面讲的通常都是图形界面下面的安装，就是用oracle登录桌面，然后运行安装程序的方法。可实际上维护服务器的时候，大多用的还是&lt;font color=&quot;#3333ff&quot;&gt;远程&lt;/font&gt;文本界面。这样很有必要看看如何通过文本界面来安装oracle。

ora
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>我手机上面使用的软件</title>
    <link href="http://wdicc.com/software-in-my-phone/"/>
    <id>http://wdicc.com/software-in-my-phone/</id>
    <published>2007-03-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[买N70就是为了可以装软件，可以很强的自定义功能。闲来没事讲讲里面的软件。

第一个就是输入法。用过A4和<b>国笔输入法</b>，感觉国笔的设计还是不错的。这里说的国笔是国笔2006前的那个版本，2006没有那个版本好用。说几个特点
<ol><li>输入汉字的状态下，可以直接输入数字。</li><li>输入汉字的状态下，可以直接输入字母。</li><li>可以同步通讯录到词组，输入人名的时候很方便。</li><li>别的还没想起来。不过有上面几点足够了。</li></ol>

快捷精灵<strong>smart setting</strong>，也是不错的软件。可以自定义你的左软键，变成一个菜单。比如我把常用的几个软件加入到了这里，这样就不用每次去我的助理里面找了，速度快很多。他还可以自定义锁键盘后的解锁键和提示信息。

<b>handy clock</b>，一个时间软件。N70自带的闹钟只能设置一个，还只能天天设置。这个软件用来设置多个闹铃，同时可以定义哪天响，比如只工作日响什么的。别的功能就没多大用了。

<b>qreader</b>，电子书阅读软件。1.9x版可以读umd和txt格式的，txt格式需要保存成unicode编码，否则会出现乱码。可以用convertz这个软件来批量转换，挺好用的。

<b>区号秀</b>，用来显示来电或者短信的地区，这样来电的时候，能大概知道电话是哪里打来的。

<b>minute beep</b>，通话提示软件。可以设置打电话的时候多长时间提醒一下。

<b>seleq</b>和<b>fileman</b>，都是文件管理软件，各有千秋，都装上了。

<b>remind me</b>，未接来电和短信提醒软件。可以自定义哪个时间段内，多久开始提醒，以及提醒的次数，声音，音量等。很有用的软件。3.01好像不能设置提醒的音量。我用的3.0。

<b>eprofiles</b>，增强情景模式软件。可以设置时间自动切换情景模式，比如我设置工作日的早上7点半切换为户外，因为那会我在坐车，9点切换到标准，因为到了公司后可不想用那么大声音的铃声了，会吓坏的。还有些别的设置，就不说了。

<b>sbirthday</b>，可以说是通讯录的一个增强软件吧。通讯录可以设置生日，但是不会提醒。这个软件可以搜索通讯录，然后在日历里面自动设置生日提醒。

<b>名片备份</b>，这个的英文名忘记了，是一个用来备份通讯录的软件，可以导出成csv格式，这样可以用excel打开编辑。编辑完记得保存成unicode格式，否则中文会乱码。

<b>resco photo viewer</b>，一个看图软件，比自带的快很多。

别的软件就没什么我喜欢的了。上面几个中，可以说都比较依赖，感觉都挺有用的。就是手机上面装软件不要求新，要求稳定，新的不一定就好。

这些软件都可以从 <a href="http://www1.3g365.com/forum-4-1.html" target="_blank" rel="external">3g365</a> 的网站找到下载。
]]></content>
    
    <summary type="html">
    
      买N70就是为了可以装软件，可以很强的自定义功能。闲来没事讲讲里面的软件。

第一个就是输入法。用过A4和&lt;b&gt;国笔输入法&lt;/b&gt;，感觉国笔的设计还是不错的。这里说的国笔是国笔2006前的那个版本，2006没有那个版本好用。说几个特点
&lt;ol&gt;&lt;li&gt;输入汉字的状态下，可以直接输
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="N70" scheme="http://wdicc.com/tags/N70/"/>
    
  </entry>
  
  <entry>
    <title>升级了一下cacti</title>
    <link href="http://wdicc.com/upgrade-cacti/"/>
    <id>http://wdicc.com/upgrade-cacti/</id>
    <published>2007-03-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[cacti几个月前就提示我<a href="http://cactiusers.org/" target="_blank" rel="external">Architecture</a>插件有升级了，一直懒得弄。今天发现cacti也升级了，就去看了看，顺便升级了一下。记录一下升级需要注意点的东西。

debian 里面的cacti设置的比较好，log、rra、resource目录都是分开放的，不在cacti目录下面，做了一个链接过去。其他系统升级的时候注意要先备份这三个目录先。建议使用debian的这种方法，这样下次升级省事了。

然后就是很简单的，下载cacti，覆盖，修改config文件，浏览器连接，提示升级，按照步骤来就行了。然后再打上Architecture补丁，再修改config文件就行了。
]]></content>
    
    <summary type="html">
    
      cacti几个月前就提示我&lt;a href=&quot;http://cactiusers.org/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Architecture&lt;/a&gt;插件有升级了，一直懒得弄。今天发现cacti也升级了，就去看了看，顺便升级了一下。记录一下升级
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="cacti" scheme="http://wdicc.com/tags/cacti/"/>
    
  </entry>
  
  <entry>
    <title>测试一下performancing看看</title>
    <link href="http://wdicc.com/test-performancing/"/>
    <id>http://wdicc.com/test-performancing/</id>
    <published>2007-03-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[实在受不了后台的打开速度了，试试看fx的performancing插件，这个在推荐插件列表上面好久了。而且也支持我的wp，发一个帖子看看效果如何。

<pre class="prettyprint lang-bash">
WLS=/usr/local/wls
APACHE=/usr/local/apache/bin/apachectl
URL_STATUS=0
echo -e $"Starting $PROG:"
        cd $WLS
        WEBCHECK_LOGIC_START >/dev/null &
        echo -n "waiting...."</pre>

再看看<b>粗体</b>什么<u>的，</u>好像还行。还能有<font color="#cc0000">颜色</font>？
]]></content>
    
    <summary type="html">
    
      实在受不了后台的打开速度了，试试看fx的performancing插件，这个在推荐插件列表上面好久了。而且也支持我的wp，发一个帖子看看效果如何。

&lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
WLS=/usr/local/wls
APACHE=/us
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="performancing" scheme="http://wdicc.com/tags/performancing/"/>
    
  </entry>
  
  <entry>
    <title>Prison Break人物绰号详解</title>
    <link href="http://wdicc.com/people-in-prison-break/"/>
    <id>http://wdicc.com/people-in-prison-break/</id>
    <published>2007-03-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
<p><strong>1. Haywire： Charles "Haywire"Patoshik<br></strong><br>adjective. 1. crazy, mad. 2. To go haywire = to go nuts.<br>eg. That guy's been to the war and gone haywire.<br>tags: crazy mad nuts looney insane<br><br>片中的疯子。绰号本身就是疯子的意思。<br><br>Hay 的意思是"干草"，wire的意思是"铁丝网"，haywire的意思也就是"捆绑干草的铁丝"。农民一般都是用一根细的铁丝把乾草一捆捆地捆起来。但是，haywire不知道什么时候就会忽然崩开或弹起来，不能很稳定系统的工作。也象一个人神经失控一样。铁丝这种四处乱弹乱跳的现象就形成了美国人常用的一个俗语，也就是：to go haywire，意思是"临时的、效率低的，出毛病"或者" 陷于混乱、兴奋得发狂、精神失常"。所以haywire的意思就扩展成可以形容任何公司和经营是"组织混乱的"和"不能正常工作的"。后来它也可以用来形容人，意思是"疯狂的"。</p>

<a id="more"></a>

<br><br><strong>2. C-Note ： Benjamin "C-Note" Franklin</strong><br><br>"C" signifying the quantity of 100 in roman numerals, "note" signifying federal reserve note, thus "cnote" signifies 100 dollars.<br>eg. Got change for a cnote?<br><br>指百元大钞。C-Note擅长交易，其演员也在访谈中说，是因为他不管给别人买再小的东西，也要收100元，所以叫C－Note。而且，$100美元上印有 Benjamin Franklin的头像，和片中人物同名。Benjamin Franklin是18世纪美国著名的科学家和政治家，参与起草《独立宣言》。<br><br><strong>3. Tweener : David "Tweener"Apolskis</strong><br><br>A young White man confused about his culture and ressembles a Black man. He is in between.. he is a Tweener.<br>eg. Yo Tweener, that hoe is a quebecunt fo sho!<br><br>Tweener好多意思，任何in between的东西都可以叫tweener。指他在支持白人和黑人之间徘徊. 具体参看T-BAG摸他膝盖那一集,这个名字似乎是T-BAG给的"a regular tweener"<br><br><br><strong>4. Linc "the sink" ： Lincon Burrows:</strong><br><br>Lincoln is known to be a tough, hard fighter among the cons at Fox River. Usually, when someone comes at you, they give you "everything but the kitchen sink". Lincoln, or 'Linc', gives off more of an effort than that and is referred to as the "sink". Hence, "Linc(k) the Sink".<br>在ep1 里，讲到：在FOX RIVER的那些犯人里边，LINC属于是比较能打的壮汉。一般来说，当别人来打你的时候，你会把什么东西都拿来打他（everything but the kitchen sink是老美的SLANG），可LINC不一样，他会把这个东西也拿去砸人，加上他的名字LINC和SINK就一个音不一样，所以大家就那么叫他了。<br><br><a href="http://www.24xuexi.com/Article/voa/xgyy/200412/2496.html" target="_blank">http://www.24xuexi.com/Article/voa/xgyy/200412/2496.html</a><br><br>Everything but the kitchen sink英文的解释<br><br>Everything but the kitchen sink is what you brought with you when you included almost everything you could think to bring. Example: "Wow, your suitcase is huge. What do you have in there? Everything but the kitchen sink?"<br><br>When we we are deciding what to bring with us, we try to take everything possible. But some things, like the kitchen sink, are just not convenient. Example: "Every time we go camping my wife packs everything but the kitchen sink."<br><br>Everything but the kitchen sink means that you included almost everything you could think to include. Example: "My dad's new luxury car is great. It has everything but the kitchen sink."<br><br>Everything but the kitchen sink的字面意思是除了厨房水池什么都有，实际意思是你能想到的东西都包括了，lincoln绰号是sink，就是说他连你想不到的都包括了，感觉上就是他是everything，或者说他无敌的意思。<br><br><br><strong>5. Cherry: Seth " Cherry" Hoffner</strong><br><br>Something looks pretty and fresh. slang term for a woman's hymen.<br><br>是上吊自杀的那个小男孩儿。本指樱桃，是他长得俊美，年纪嫩。Like a virgin.<br><br><br><br><strong>6. T-Bag: Theodore"T-Bag" Bagwell</strong><br><br>When a girl is lying on her back and blowing you, you grab your cock and lift it out of the way and dip your nuts in and out of her mouth like you dipping a tea bag ..<br><br>这个绰号给他还是有XXX味道的。<br><br>Rob K. 在G4的访问中说，他在拍PB以前也不是特别了解，芝加哥人才都知道T－Bag是什么意思。 他说PB的编剧很聪明，给他起Bagwell这样的姓，就很顺理成章缩写成T－Bag，就可以自然而然这样叫他，而不让观众觉得"太过分了"。<br><br><br><strong>7. Maytag: Jason "Maytag" Buchanan</strong><br><br>A prison term for a young inmate who performs sexual favors for a dominate top in exchange for protection.<br><br>eg. I gotta get me a new Maytag...'cause my boy just got sprung.<br><br>T-bag 在前几集的"女朋友"和室友。此绰号正是这个意思。<br><br>海尔曾经要收购的美国家用电器生产厂商也叫Maytag。估计本指"服务的女人"的意思，在监狱里被引申啦。
<p>来自 <a href="http://www.newsmth.net/bbscon.php?bid=904&amp;id=23771" target="_blank">这里</a>。最近又开始跟最新的越狱了。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;1. Haywire： Charles &quot;Haywire&quot;Patoshik&lt;br/&gt;&lt;/strong&gt;&lt;br/&gt;adjective. 1. crazy, mad. 2. To go haywire = to go nuts.&lt;br/&gt;eg. That guy&#39;s been to the war and gone haywire.&lt;br/&gt;tags: crazy mad nuts looney insane&lt;br/&gt;&lt;br/&gt;片中的疯子。绰号本身就是疯子的意思。&lt;br/&gt;&lt;br/&gt;Hay 的意思是&quot;干草&quot;，wire的意思是&quot;铁丝网&quot;，haywire的意思也就是&quot;捆绑干草的铁丝&quot;。农民一般都是用一根细的铁丝把乾草一捆捆地捆起来。但是，haywire不知道什么时候就会忽然崩开或弹起来，不能很稳定系统的工作。也象一个人神经失控一样。铁丝这种四处乱弹乱跳的现象就形成了美国人常用的一个俗语，也就是：to go haywire，意思是&quot;临时的、效率低的，出毛病&quot;或者&quot; 陷于混乱、兴奋得发狂、精神失常&quot;。所以haywire的意思就扩展成可以形容任何公司和经营是&quot;组织混乱的&quot;和&quot;不能正常工作的&quot;。后来它也可以用来形容人，意思是&quot;疯狂的&quot;。&lt;/p&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>lvm 学习笔记</title>
    <link href="http://wdicc.com/lvm-note/"/>
    <id>http://wdicc.com/lvm-note/</id>
    <published>2007-03-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[lvm出来很久了，一直没弄过。当初的了解就是使用他之后就获得动态调整分区的特性。昨天装了一个rh，先尝试了一下使用这个lvm。

<strong>lvm里面用到的一些概念</strong>

lvm其实就是将一些“物理”分区，比如 /dev/hda1，/dev/hda6 ，或者“物理”硬盘，比如 /dev/hda，/dev/hdb 这些，都弄到一起，然后在外面看来，他们是一个整体，也就是一个VG（Volume Group，卷组），其实就类似于一块硬盘了。

而这些“物理”分区，或者“物理”硬盘，就是 /dev/hda1，/dev/hdb 这些，就是一个个PV（Physical Volume，物理卷）。可以看到PV可以是一个分区，也可以是一块硬盘。

有了VG我们还不能直接使用他，就和我们还需要给硬盘分区一样，我们也需要给VG分区，也就是创建LV（Logical Volume，逻辑卷）。这样，LV的数据其实就分布到了LV所在的VG里面，也就是所有的PV对应的分区或者硬盘里面。

掌握了VG，PV，LV这些概念之后，操作起来就很容易了。

<a id="more"></a>

<strong>lvm的一些操作</strong>

首先就是创建PV了，有了PV才能组建VG嘛。创建PV用 pvcreate 命令。

# pvcreate /dev/hda6
<pre class="prettyprint lang-text">Physical volume "/dev/hda6">
# pvdisplay
<pre class="prettyprint lang-text">
PV Name               /dev/hda6
VG Name
PV Size               9.77 GB
Allocatable           NO
PE Size (KByte)       0
Total PE              0
Free PE               0
Allocated PE          0
PV UUID               jGIjyo-lukG-LdRg-tmwe-Mgxf-09ZW-loquUZ</pre>
这样可以看到，创建了一个PV。同样操作可以创建多个。下面创建VG。

# vgcreate wd /dev/hda6
<pre class="prettyprint lang-text">Volume group "wd">
# vgdisplay
<pre class="prettyprint lang-text">
VG Name               wd
System ID
Format                lvm2
Metadata Areas        1
Metadata Sequence No  1
VG Access             read/write
VG Status             resizable
MAX LV                0
Cur LV                0
Open LV               0
Max PV                0
Cur PV                1
Act PV                1
VG Size               9.77 GB
PE Size               4.00 MB
Total PE              2500
Alloc PE / Size       0 / 0
Free  PE / Size       2500 / 9.77 GB
VG UUID               NwUlxW-AmAi-LyqA-h39E-zS7q-YRj3-scZucL</pre>
再看刚才创建的pv。

# pvdisplay
<pre class="prettyprint lang-text">
PV Name               /dev/hda6
VG Name               wd
PV Size               9.77 GB / not usable 0
Allocatable           yes
PE Size (KByte)       4096
Total PE              2500
Free PE               2500
Allocated PE          0
PV UUID               jGIjyo-lukG-LdRg-tmwe-Mgxf-09ZW-loquUZ</pre>
可以看到多了一些信息，他已经属于叫做wd的VG了。同时可以看到PE的大小是4096K，也就是4M。下面创建真正可用的LV。

# lvcreate -L 200M -n test wd
<pre class="prettyprint lang-text">Logical volume "test">
# lvdisplay
<pre class="prettyprint lang-text">
LV Name                /dev/wd/test
VG Name                wd
LV UUID                sPy1bM-Nz13-v0x7-bk0V-BKSH-Udzl-7ov5jM
LV Write Access        read/write
LV Status              available
# open                 0
LV Size                200.00 MB
Current LE             50
Segments               1
Allocation             inherit
Read ahead sectors     0
Block device           253:0</pre>
可以看到，已经创建了一个叫做test的LV，也可以不使用-n参数指定LV的名称，这样系统会给取一个名字。
再来看看VG和PV的信息。

# vgdisplay
<pre class="prettyprint lang-text">
VG Name               wd
System ID
Format                lvm2
Metadata Areas        1
Metadata Sequence No  4
VG Access             read/write
VG Status             resizable
MAX LV                0
Cur LV                1
Open LV               0
Max PV                0
Cur PV                1
Act PV                1
VG Size               9.77 GB
PE Size               4.00 MB
Total PE              2500
Alloc PE / Size       50 / 200.00 MB
Free  PE / Size       2450 / 9.57 GB
VG UUID               NwUlxW-AmAi-LyqA-h39E-zS7q-YRj3-scZucL</pre>
# pvdisplay
<pre class="prettyprint lang-text">
PV Name               /dev/hda6
VG Name               wd
PV Size               9.77 GB / not usable 0
Allocatable           yes
PE Size (KByte)       4096
Total PE              2500
Free PE               2450
Allocated PE          50
PV UUID               jGIjyo-lukG-LdRg-tmwe-Mgxf-09ZW-loquUZ</pre>
可以看到VG已经使用了50个PE，也就是200M空间。PV上面也是，使用了50个PE。

这样LV已经有了，怎么使用他呢？其实和普通分区的使用方法一样。先格式化，创建文件系统，然后挂载。

# mkfs.ext3 /dev/wd/test
<pre class="prettyprint lang-text">
max_blocks 209715200, rsv_groups = 25600, rsv_gdb = 256
Filesystem label=
OS type: Linux
Block size=1024 (log=0)
Fragment size=1024 (log=0)
51200 inodes, 204800 blocks
10240 blocks (5.00%) reserved for the super user
First data block=1
Maximum filesystem blocks=67371008
25 block groups
8192 blocks per group, 8192 fragments per group
2048 inodes per group
Superblock backups stored on blocks:
8193, 24577, 40961, 57345, 73729

Writing inode tables: done
inode.i_blocks = 3074, i_size = 67383296
Creating journal (4096 blocks): done
Writing superblocks and filesystem accounting information: done

This filesystem will be automatically checked every 38 mounts or
180 days, whichever comes first.  Use tune2fs -c or -i to override.</pre>
# mount /dev/wd/test /opt
]# df -h
<pre class="prettyprint lang-text">
/dev/hda9             4.0G  148M  3.6G   4% /
/dev/hda1              99M  8.3M   86M   9% /boot
/dev/hda3              29G  1.1G   27G   4% /data
none                  252M     0  252M   0% /dev/shm
/dev/hda7             9.7G   55M  9.1G   1% /home
/dev/hda10            3.9G   40M  3.7G   2% /tmp
/dev/hda5             9.7G  1.9G  7.4G  20% /usr
/dev/hda8             7.7G   90M  7.3G   2% /var
/dev/mapper/wd-test   194M  5.6M  179M   4% /opt</pre>
最后这行就是挂载的LV。下面调整LV的大小。先umount挂载的LV。

# umount /opt

# lvresize -L +100M /dev/wd/test
<pre class="prettyprint lang-text">
Logical volume test successfully resized</pre>
# lvdisplay
<pre class="prettyprint lang-text">
LV Name                /dev/wd/test
VG Name                wd
LV UUID                sPy1bM-Nz13-v0x7-bk0V-BKSH-Udzl-7ov5jM
LV Write Access        read/write
LV Status              available
# open                 0
LV Size                300.00 MB
Current LE             75
Segments               1
Allocation             inherit
Read ahead sectors     0
Block device           253:0</pre>
然后需要使用resize2fs命令调整LV分区大小。我这里用的是rh el4，没有这个命令。rh el3里面有这个命令。el4里面用ext2online命令调整，用ext2online命令调整的话，需要把要调整的分区挂载上去。

# mount /dev/wd/test /opt
# ext2online /dev/wd/test
<pre class="prettyprint lang-text">
# df -h
<pre class="prettyprint lang-text">
/dev/hda9             4.0G  148M  3.6G   4% /
/dev/hda1              99M  8.3M   86M   9% /boot
/dev/hda3              29G  1.1G   27G   4% /data
none                  252M     0  252M   0% /dev/shm
/dev/hda7             9.7G   55M  9.1G   1% /home
/dev/hda10            3.9G   40M  3.7G   2% /tmp
/dev/hda5             9.7G  1.9G  7.4G  20% /usr
/dev/hda8             7.7G   90M  7.3G   2% /var
/dev/mapper/wd-test   291M  6.1M  270M   3% /opt</pre>
<strong>lvm的恢复</strong>

姑且就叫做恢复吧，因为我其实没有实际测试过。不过是假设我的这台电脑启动不了了，然后用knoppix尝试恢复其中的数据。

# lvmdiskscan
<pre class="prettyprint lang-text">
/dev/wd/test [      332.00 MB]
/dev/ram1    [       97.66 MB]
/dev/hda1    [      101.94 MB]
/dev/ram2    [       97.66 MB]
/dev/hda2    [        1.95 GB]
/dev/ram3    [       97.66 MB]
/dev/hda3    [       29.29 GB]
/dev/ram4    [       97.66 MB]
/dev/ram5    [       97.66 MB]
/dev/hda5    [        9.77 GB]
/dev/ram6    [       97.66 MB]
/dev/hda6    [        9.77 GB] LVM physical volume
/dev/ram7    [       97.66 MB]
/dev/hda7    [        9.77 GB]
/dev/ram8    [       97.66 MB]
/dev/hda8    [        7.81 GB]
/dev/ram9    [       97.66 MB]
/dev/hda9    [        3.97 GB]
/dev/ram10   [       97.66 MB]
/dev/hda10   [        3.91 GB]
/dev/ram11   [       97.66 MB]
/dev/ram12   [       97.66 MB]
/dev/ram13   [       97.66 MB]
/dev/ram14   [       97.66 MB]
/dev/ram15   [       97.66 MB]
1 disk
24 partitions
0 LVM physical volume whole disks
1 LVM physical volume</pre>

# vgdisplay -v
<pre class="prettyprint lang-text">
Finding volume group "wd"
--- Volume group ---
VG Name               wd
System ID
Format                lvm2
Metadata Areas        1
Metadata Sequence No  9
VG Access             read/write
VG Status             resizable
MAX LV                0
Cur LV                1
Open LV               0
Max PV                0
Cur PV                1
Act PV                1
VG Size               9.77 GB
PE Size               4.00 MB
Total PE              2500
Alloc PE / Size       83 / 332.00 MB
Free  PE / Size       2417 / 9.44 GB
VG UUID               NwUlxW-AmAi-LyqA-h39E-zS7q-YRj3-scZucL

--- Logical volume ---
LV Name                /dev/wd/test
VG Name                wd
LV UUID                sPy1bM-Nz13-v0x7-bk0V-BKSH-Udzl-7ov5jM
LV Write Access        read/write
LV Status              available
# open                 0
LV Size                332.00 MB
Current LE             83
Segments               1
Allocation             inherit
Read ahead sectors     0
Block device           254:0

--- Physical volumes ---
PV Name               /dev/hda6
PV UUID               jGIjyo-lukG-LdRg-tmwe-Mgxf-09ZW-loquUZ
PV Status             allocatable
Total PE / Free PE    2500 / 2417</pre>

# vgchange -a y wd
<pre class="prettyprint lang-text">1 logical volume(s) in volume group "wd">

这样之后就可以使用mount命令挂载/dev/wd下面的设备了。

lvm的配置在 /etc/lvm/backup 下面。
参考自 <a href="http://www.linuxforum.net/books/LVM-HOWTO.html" target="_blank" rel="external">这里</a>。
</pre></pre></pre></pre></pre>]]></content>
    
    <summary type="html">
    
      lvm出来很久了，一直没弄过。当初的了解就是使用他之后就获得动态调整分区的特性。昨天装了一个rh，先尝试了一下使用这个lvm。

&lt;strong&gt;lvm里面用到的一些概念&lt;/strong&gt;

lvm其实就是将一些“物理”分区，比如 /dev/hda1，/dev/hda6 ，或者“物理”硬盘，比如 /dev/hda，/dev/hdb 这些，都弄到一起，然后在外面看来，他们是一个整体，也就是一个VG（Volume Group，卷组），其实就类似于一块硬盘了。

而这些“物理”分区，或者“物理”硬盘，就是 /dev/hda1，/dev/hdb 这些，就是一个个PV（Physical Volume，物理卷）。可以看到PV可以是一个分区，也可以是一块硬盘。

有了VG我们还不能直接使用他，就和我们还需要给硬盘分区一样，我们也需要给VG分区，也就是创建LV（Logical Volume，逻辑卷）。这样，LV的数据其实就分布到了LV所在的VG里面，也就是所有的PV对应的分区或者硬盘里面。

掌握了VG，PV，LV这些概念之后，操作起来就很容易了。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="LVM" scheme="http://wdicc.com/tags/LVM/"/>
    
  </entry>
  
  <entry>
    <title>看样子是今年最后一场雪了吧</title>
    <link href="http://wdicc.com/seems-last-snow/"/>
    <id>http://wdicc.com/seems-last-snow/</id>
    <published>2007-03-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://blog.wdicc.com/wordpress/2006/12/30/286/" target="_blank" rel="external">第一场雪之后</a>，今天估计应该是最后一场雪了。本来还打算这个周末去滑雪的，看样子没去还挺幸运。。。昨天下了雨，今天下了雪。。。他们去滑雪的不知道情况如何。

<img src="http://photo1.yupoo.com/20070304/104518_1883243794.jpg" height="375" width="500">

<img src="http://photo1.yupoo.com/20070304/104610_1257144738.jpg" height="375" width="500">

<img src="http://photo1.yupoo.com/20070304/104520_1015849718.jpg" height="375" width="500">

<a href="http://wdicc.yupoo.com/" target="_blank" rel="external">这里</a>还有一些图片。
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://blog.wdicc.com/wordpress/2006/12/30/286/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;第一场雪之后&lt;/a&gt;，今天估计应该是最后一场雪了。本来还打算这个周末去滑雪的，看样子没去还挺幸运。。。
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="下雪" scheme="http://wdicc.com/tags/%E4%B8%8B%E9%9B%AA/"/>
    
  </entry>
  
  <entry>
    <title>做客服真不容易</title>
    <link href="http://wdicc.com/hard-work/"/>
    <id>http://wdicc.com/hard-work/</id>
    <published>2007-03-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[不投机倒把的话，赚钱都不容易。给电信网通这些做客服赚钱可更不容易了。之前有一个<a href="http://plod.popoever.com/archives/000590.html" title="猫吃卡" target="_blank">动感地带的猫</a>这个事件，现在又有了<a href="http://bbs.e222.com/dispbbs.asp?boardID=113&ID=8453" target="_blank">被股市大跌逼疯的人</a>。前面一个还是恶搞，郁闷归郁闷，至少还没有粗话。后面这个电信mm可就可怜多了，估计一接电话的那段开场白就把mm给吓坏了，那个人骂了好长时间之后，那个mm才回过神来开始说话。客服也应该对这种情况建立一种应急预案了吧。
]]></content>
    
    <summary type="html">
    
      不投机倒把的话，赚钱都不容易。给电信网通这些做客服赚钱可更不容易了。之前有一个&lt;a href=&quot;http://plod.popoever.com/archives/000590.html&quot; title=&quot;猫吃卡&quot; target=&quot;_blank&quot;&gt;动感地带的猫&lt;/a&gt;这个事件，现在
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>又折腾了一下blog</title>
    <link href="http://wdicc.com/study-blog/"/>
    <id>http://wdicc.com/study-blog/</id>
    <published>2007-02-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[下载一个全新的wp   2.1.1，然后解压，复制到web目录下面，文件夹改名为wp-new。将旧的wp修改为wp-old，新的wp-new修改为wp，打开浏览器访问admin，会提示升级。升级之后，将wp-old 里面的wp-content目录cp过来覆盖，然后登录后台去一个一个启用插件。

好像现在还没有遇到问题。。。
]]></content>
    
    <summary type="html">
    
      下载一个全新的wp   2.1.1，然后解压，复制到web目录下面，文件夹改名为wp-new。将旧的wp修改为wp-old，新的wp-new修改为wp，打开浏览器访问admin，会提示升级。升级之后，将wp-old 里面的wp-content目录cp过来覆盖，然后登录后台去一个一
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>过年归来</title>
    <link href="http://wdicc.com/i-am-back/"/>
    <id>http://wdicc.com/i-am-back/</id>
    <published>2007-02-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[年很快就过完了，又老了一岁，而且发现自己快30了，天哪。现在在舅舅们面前，总觉得自己还是以前的那个小孩子，看着弟弟妹妹们也总觉得他们还是小孩子。可是一想就恐怖，都快30了。。。天那

过年回家基本也就吃了睡睡了玩了，亲戚家逛了好几天，天天麻将。老婆倒是打麻将打爽了，那天在我们家还打了个通宵， 不过就是没赢钱，输了几十，呵呵。说实话，她技术太差，嗯。嘿嘿

昨天在北京家自己包了一顿饺子，第一次的结果还不错，就是时间长点，弄了一个下午。下次弄就有经验了，应该会快。拌馅的时候都没有尝一下咸淡，到了一些酱油，倒了一些盐，结果最后出来味道刚好，哈哈，真是太牛了。面有点软，回头研究研究怎么弄。

blog好像有问题了，打开写日志的页面的时候速度太慢了，回头得修理修理他。
]]></content>
    
    <summary type="html">
    
      年很快就过完了，又老了一岁，而且发现自己快30了，天哪。现在在舅舅们面前，总觉得自己还是以前的那个小孩子，看着弟弟妹妹们也总觉得他们还是小孩子。可是一想就恐怖，都快30了。。。天那

过年回家基本也就吃了睡睡了玩了，亲戚家逛了好几天，天天麻将。老婆倒是打麻将打爽了，那天在我们家还
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="过年" scheme="http://wdicc.com/tags/%E8%BF%87%E5%B9%B4/"/>
    
  </entry>
  
  <entry>
    <title>中了二等奖</title>
    <link href="http://wdicc.com/secend-price/"/>
    <id>http://wdicc.com/secend-price/</id>
    <published>2007-02-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[记忆中好像没中过什么奖，奖奖金最多的一次好像就是呷哺吃出来的50的免餐券了。这次中的算是一个大的了，呵呵。

周五公司去怀柔开年会，晚上活动抽奖，中了一个二等奖，奖品是个帐篷，呵呵，太不实用了，我一直以为是个移动硬盘，好歹我还没有这玩意，也方便来回倒腾东西。上淘宝查了一下，帐篷值400来块钱。一等奖是个ipod nano，实在是可惜了，我和一等奖的号码就差一个，唉。

第一次参加非国企的公司年会，感觉真的很不错。以前在出版社，每个人发的东西都是一样的，因为要保证公平嘛。另外还强迫各个部门去出节目，还和小学生似的摊派任务，这样很难调动大家的积极性。更重要的是，以前出版社里面平均年龄实在太大，都一些老头老太太，活动不起来，而且还标榜文化单位，也不屑一些看似媚俗的节目。

这次年会好像是委托了一个拓展公司来组织，他们出一个主持人，我们出一个。除去抽奖环节，大部分节目都是全民参与，很有意思。而就算是惩罚类的单人节目， 也是有主持人带领来做一些有趣的动作什么的，完全不会因为腼腆而冷场。第一次参加这种拓展，感觉还是挺有意思的。不过也有一些遗憾，组织不是很到位，导致大家在就餐和活动之间的等待太多，浪费了很多时间。

周六就是去滑雪了，早上7点多起来， 吃早点，去雪场，到穿上滑雪服装踩上雪板，已经是10点多了。这中间除去路上时间大概半个小时，就是太多的等待了。吃完早点等退房，到了雪场等买票，买了票等领滑雪用具的卡，很是磨机。本来之前说可以滑一个上午的时候，还觉得时间足够了，结果到11点半集合时间只有1个多小时了，很多时间都是站在那里看着人越来越多。

因为玩过轮滑 ，所以虽然第一次玩，但是上了雪场适应了一下，就能控制滑行速度了。在初级那里的坡度最小的雪道滑了一次之后，忍受不了那么多人，就去初级最陡的坡道那里去了，之后就一直在那里玩了，不过也同样到后来人很多。

滑雪最大的乐趣可能就是速度感了，轮滑的乐趣还有一部分是在人群里面穿梭的感觉，呵呵。刚开始滑的时候，一直努力控制着速度，慢慢到了后面，就开始享受这种速度了，张开手臂，能看到影子里面的自己的头发都立起来了。滑雪比轮滑省力气多了，呵呵，因为他是个下坡。不过看到有人在平地上面也能加速，看了半天好像类似轮滑，但是自己没琢磨出来怎么玩，平地上面走实在费力。

这次活动要是安排到周四开会，周五滑雪就真是完美了，周五没那么多人吧。

周三上午就要座汽车回家了，第一次座回家的汽车，不知道如何，但愿车还不错吧。
]]></content>
    
    <summary type="html">
    
      记忆中好像没中过什么奖，奖奖金最多的一次好像就是呷哺吃出来的50的免餐券了。这次中的算是一个大的了，呵呵。

周五公司去怀柔开年会，晚上活动抽奖，中了一个二等奖，奖品是个帐篷，呵呵，太不实用了，我一直以为是个移动硬盘，好歹我还没有这玩意，也方便来回倒腾东西。上淘宝查了一下，帐篷值
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="年会" scheme="http://wdicc.com/tags/%E5%B9%B4%E4%BC%9A/"/>
    
      <category term="拓展" scheme="http://wdicc.com/tags/%E6%8B%93%E5%B1%95/"/>
    
      <category term="滑雪" scheme="http://wdicc.com/tags/%E6%BB%91%E9%9B%AA/"/>
    
  </entry>
  
  <entry>
    <title>看到一个有意思的，反映了现在的一些学习风气</title>
    <link href="http://wdicc.com/a-joke-8/"/>
    <id>http://wdicc.com/a-joke-8/</id>
    <published>2007-02-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[新手A：7+8=？
老鸟A：呵呵，这个问题牵扯到我们用的十进制算数加法计算，还有进位问题，另外还要注意到.....
新手A：Stop！我就要知道7+8=？
老鸟A：7+8=15
新手A：可是为什么7+8=15？
老鸟A：搜索前面贴子，刚才回答了。
新手A：我搜了，搜不到，是老鸟就要帮助新手！
老鸟A：........ man 初级数学
新手A：我不懂英文，全都man了要你们老鸟干吗？
老鸟A从此潜水

新手B：6+9=？
老鸟B：搜索前面贴子
新手B：搜了，没答案，只有个烂人讲7+8，这哪是人能看懂的阿，我就要知道6+9=？
老鸟B：看《初级数学 handbook》，看懂就会做了
新手B：算个6+9都这么麻烦，这什么破操作系统阿！
老鸟B从此潜水

新手C：5+10=？
新手C：？？
新手C：没人？
新手C发帖：《为什么不能对初学者提供春风般的温暖》？
老鸟ABCDE群起攻之：这年头新手大爷，怎么这么难伺候，老鸟还怎么活！潜水去了！
]]></content>
    
    <summary type="html">
    
      新手A：7+8=？
老鸟A：呵呵，这个问题牵扯到我们用的十进制算数加法计算，还有进位问题，另外还要注意到.....
新手A：Stop！我就要知道7+8=？
老鸟A：7+8=15
新手A：可是为什么7+8=15？
老鸟A：搜索前面贴子，刚才回答了。
新手A：我搜了，搜不到，是老鸟就
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>春的信息</title>
    <link href="http://wdicc.com/msg-of-sprring/"/>
    <id>http://wdicc.com/msg-of-sprring/</id>
    <published>2007-02-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天去给猫买猫粮，进了市场里面，发现有几个店铺都变红色了，都是红色的挂饰和红色的对联，这才感觉到春节就要来了。回来和老婆打电话，说今天立春，我死活不信，刚才查了一下，果然是。

2007年 立春
农历 二零零六年十二月十七 丙戌 狗 
公历 2007年2月4日 星期日 立春
 
这么说，已经是春天啦。
]]></content>
    
    <summary type="html">
    
      今天去给猫买猫粮，进了市场里面，发现有几个店铺都变红色了，都是红色的挂饰和红色的对联，这才感觉到春节就要来了。回来和老婆打电话，说今天立春，我死活不信，刚才查了一下，果然是。

2007年 立春
农历 二零零六年十二月十七 丙戌 狗 
公历 2007年2月4日 星期日 立春
 

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="春节" scheme="http://wdicc.com/tags/%E6%98%A5%E8%8A%82/"/>
    
  </entry>
  
  <entry>
    <title>给小毛拍了几张相片</title>
    <link href="http://wdicc.com/photos-for-maomao/"/>
    <id>http://wdicc.com/photos-for-maomao/</id>
    <published>2007-01-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[可以来<a href="http://wdicc.yupoo.com" target="_blank" rel="external">这里</a>看看。

小毛在看电视
<img src="http://photo1.yupoo.com/20070128/091856_1204741568.jpg" height="375" width="500">

小毛穿披风
<img src="http://photo1.yupoo.com/20070128/091854_599264536.jpg" height="375" width="500">
<img src="http://photo1.yupoo.com/20070128/091852_544501578.jpg">
<img src="http://photo1.yupoo.com/20070128/091850_1593044062.jpg" height="375" width="500">
]]></content>
    
    <summary type="html">
    
      可以来&lt;a href=&quot;http://wdicc.yupoo.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;看看。

小毛在看电视
&lt;img src=&quot;http://photo1.yupoo.com/20070128/091856_12047
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
      <category term="小毛" scheme="http://wdicc.com/tags/%E5%B0%8F%E6%AF%9B/"/>
    
  </entry>
  
  <entry>
    <title>今天真是冷呀</title>
    <link href="http://wdicc.com/too-cold-today/"/>
    <id>http://wdicc.com/too-cold-today/</id>
    <published>2007-01-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[早上出门，寒风里面等车还真是郁闷，眼泪好像都自己出来了……，不过上车居然有个座，嘿嘿。

明天老婆就回沈阳了，可能要等到过年之前或者过完年才能见了。第一个结婚周年纪念日得往后推一下了，嗯。不知道我妈他们能不能买到今天的火车票，如果可以的话，明天就可以到了，这下又可以吃几天好吃的了。
<pre class="prettyprint lang-bash">
</pre>]]></content>
    
    <summary type="html">
    
      早上出门，寒风里面等车还真是郁闷，眼泪好像都自己出来了……，不过上车居然有个座，嘿嘿。

明天老婆就回沈阳了，可能要等到过年之前或者过完年才能见了。第一个结婚周年纪念日得往后推一下了，嗯。不知道我妈他们能不能买到今天的火车票，如果可以的话，明天就可以到了，这下又可以吃几天好吃的了
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="过年" scheme="http://wdicc.com/tags/%E8%BF%87%E5%B9%B4/"/>
    
  </entry>
  
  <entry>
    <title>我的 .fvwm2rc 文件</title>
    <link href="http://wdicc.com/my-fvwm2rc/"/>
    <id>http://wdicc.com/my-fvwm2rc/</id>
    <published>2007-01-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
########
#set Environment variables

SetEnv fvwm_img $[FVWM_USERDIR]/images
SetEnv fvwm_icon $[FVWM_USERDIR]/icons
SetEnv fvwm_scrpt $[FVWM_USERDIR]/scripts
SetEnv fvwm_wallpapers $[FVWM_USERDIR]/wallpaper

SetEnv fvwm_webbrowser /usr/bin/firefox
SetEnv fvwm_term /usr/bin/urxvtc
SetEnv fvwm_mail /usr/bin/mutt
#SetEnv fvwm_media_player /usr/bin/xmms
SetEnv fvwm_video_player /usr/bin/mplayer

#这部分设置fvwm的一些变量，这样方便以后如果有变化的话，不需要全文去修改，只修改这里就可以了。
#后面使用 $[var_name] 来引用
##################################
<a id="more"></a>
#####
# Set the image path

#ImagePath +:$HOME/.fvwm/icons:
ImagePath $[fvwm_icon]:$[fvwm_icon];.png:$[fvwm_wallpapers]:+

#设置图片路径，没有指明路径的图片来这里查找。
#可以使用变量指定。
##################################

#####
# Virtual Desktops

DesktopSize 3x1
DesktopName 0 Main
DesktopName 1 Work
DesktopName 2 Games
EdgeThickness 1
EdgeScroll 0 0
EdgeResistance 250 100

#DesktopSize 设置桌面大小和数目，3x1表示三个桌面，每个桌面1页。水平方向上面切换的是桌面，竖直方向上面是一个桌面内部切换。
#DesktopName 设置各个桌面的名称。
#EdgeScroll 设置拖动窗口到桌面左右两边上时，百分之多少的桌面开始滚动切换到下一个。0表示不滚动。
#EdgeResistance scrolling moving 这是用来设定当滑鼠游标碰触到萤幕的边界的时候，FVWM应该要如何动作。scrolling 是告诉FVWM当滑鼠游标碰触到萤幕边界多少milliseconds之後，才会移动目前的工作桌面。moving则是设定当视窗超出画面多少像点之後，才要切换目前的工作桌面到别的桌面上。
#EdgeThickness 设置当 EdgeScroll 效果出现的时候，桌面的周围显示的边框线的像素。
################################

#####
# Mouse and Focus Behavior
###########
ClickTime 350
MoveThreshold 3
Style * SloppyFocus,MouseFocusClickRaises
IgnoreModifiers L25

#ClickTime 设置fvwm认为是单击的按下鼠标和放开鼠标的时间间隔，单位是毫秒。如果超出这个时间，就认为是“hold”。
#MoveThreshold 设置移动几个像素的时候，fvwm才认为你是在移动窗口。上面这些主要是后面在写函数的时候有用，那里对不同的操作响应不同的动作。
#style 用来给fvwm里面配置各种各样的风格，比如你想让窗口如何响应动作，窗口显示的内容、外观等。 * 是一个通配符，表示所有窗口。第三个参数是风格参数，用逗号间隔。SloppyFocus 表示当鼠标进入窗口的时候窗口就获得焦点，但是除去root window等一些特殊窗口（比如conky的窗口，你不希望他获得焦点吧）。和他同类的，比如还有ClickFocus，表示当鼠标单击窗口的时候窗口获得焦点，这些都可以查 fvwm 的man page可以看到，同类的属性一般用 / 间隔。
# style里面的选项很多都可以直接从字面理解其意思，关于style的其他选项的意思就去看看man page吧，后面涉及到这部分的也不多讲了。
################################

############ default Styles: ####################

Style * BorderWidth 1, HandleWidth 1, DepressableBorder
Style * MWMFunctions, MWMDecor, MWMButtons, HintOverride
Style * DecorateTransient, NoPPosition, SmartPlacement
Style * Font "xft:Sans:Bold:pixelsize=12:minispace=True:encoding=iso10646-1"
Style * HilightFore black, HilightBack gainsboro
Style * IconBox 0 0 200 -260, IconFill t l, StickyIcon
Style * WindowShadeShrinks, WindowShadeSteps 100

#Style "beep*"    Icon bmp.xpm,      MiniIcon i_bmp.xpm
#Style "Firefox*" Icon firefox.xpm,  MiniIcon i_firefox.xpm
#Style "Gaim"     Icon gaim.xpm,     MiniIcon i_gaim.xpm
#Style "gqview"   Icon gqview.xpm,   MiniIcon i_gqview.xpm
#Style "rox"      Icon rox.xpm,      MiniIcon i_rox.xpm
#Style "stardict" Icon stardict.xpm  MiniIcon i_stardict.xpm
#Style "urxvt"    Icon rxvt.xpm,     MiniIcon i_term.xpm
#Style "gvim"     Icon vim.xpm,      MiniIcon i_vim.xpm
#Style "Xpdf"     Icon xpdf.xpm,     MiniIcon i_xpdf.xpm

#####
# Basic Functions
#
#fvwm 里面的函数格式类似下面的，先用 DestroyFunc 清除掉可能已经应用的效果，然后用 AddToFunc 来创建新的。
#在别的地方调用函数的时候可以使用 FuncName "$0" "$1" "$2" "$3" "$4" ，$0-4是传递给这个函数的参数，可以在函数里面引用。
#
# DestroyFunc FuncName
# AddToFunc   FuncName
# + I (立即执行的动作)
# + C (鼠标单击时执行的动作)
# + D (鼠标双击时执行的动作)
# + H (鼠标 hold 时执行的动作)
# + M (鼠标 motion 时执行的动作)
#
###########
DestroyFunc FvwmDeleteOrDestroy
AddToFunc   FvwmDeleteOrDestroy
+ H Nop
+ M Nop
+ C Delete
+ D Destroy

# 在单击的时候 Delete 窗口，在双击的时候 Destroy 窗口。Nop表示不动作。

DestroyFunc FvwmIconifyOrShade
AddToFunc   FvwmIconifyOrShade
+ C Iconify
+ D WindowShade

DestroyFunc FvwmMaximize
AddToFunc   FvwmMaximize
+ H Nop
+ M Nop
+ C Maximize $0 $1

# 你可以使用类似 FvwmMaximize 100 100 这种格式来调用这个函数，这样表示在单击的时候，将窗口在水平和垂直方向都100%占用屏幕。100 0 将在水平方向100%，垂直方向保持不变。

DestroyFunc FvwmMoveOrIconify
AddToFunc   FvwmMoveOrIconify
+ M Move
+ D Iconify

DestroyFunc FvwmWindowShade
AddToFunc   FvwmWindowShade
+ D WindowShade $0

######################## Initialization Functions ############################
#当fvwm启动或者退出的时候，会执行下面几个函数
#
#

DestroyFunc StartFunction
AddToFunc StartFunction
+ I Exec exec fvwm-root $[fvwm_wallpapers]/0.png
+ I Exec exec conky

DestroyFunc InitFunction
AddToFunc InitFunction
+ I Exec exec xscreensaver -no-splash

DestroyFunc ExitFunction
AddToFunc ExitFunction
+ I All (conky) Close
+ I All (xscreensaver) Close

###################### Key bindings ####################
# 按键绑定，也就是设置快捷键。
# Key X Context Modifier Action
# Mouse X Context Modifier Action
# 上面两行是绑定命令的格式，X 表示是哪个按钮， Context 是指当前鼠标在屏幕或者窗口的哪个位置，这个位置可以参考这个图 http://www.zensites.net/fvwm/guide/window_layout.png。图中 R - the root window, I - Icon, F - frame corners, S - frame sides, T - title bar, W - application window 和 0-9 - buttons 。A 表示所有的地方。
# Modifier 是指 (A)ny, (C)ontrol, (S)hift, (M)eta, (N)othing, 或者 1-5( X Modifiers mod1-mod5 参看 xmodmap的man)。
#

Key Tab A M WindowList Root c c CurrentDesk, NoGeometry, CurrentAtEnd, NoIcons
Key T    A 4    Exec exec urxvtc     # win+t -&gt; run terminal

Key W   A  4    Menu RootMenu root o0 o100    # Win+S -&gt; pop main manu from left-bottom
Key M    W  4    Menu Window-Ops Nop        # Win+M -&gt; pop win menu
Key M   WI M    Iconify                 # Alt+M -&gt; Iconfy
Key F4  A  M    Close                    # Alt+F4 -&gt; close window
Key X   W  M    Maximize 100 0            # Alt+f3 -&gt; max window in H
Key R    W  M    Resize                    # Alt+R  -&gt; resize window
#Key 1     A  M    GotoPage 0 0
#Key 2     A  M    GotoPage 0 1
#Key 3     A  M    GotoPage 0 2
#Key 4     A  M    GotoPage 0 3

Mouse 1    R      A   Menu RootMenu Nop
Mouse 1 A     M     Menu RootMenu Nop

Mouse 3 WI    SC    CloseOrNot
Mouse 3 A    S    Move
Mouse 3 R    N    WindowList CurrentAtEnd, NoIcons Nop
Mouse 3 A    M    Menu Window-Ops Nop     # Alt+RightMouse -&gt; win ops

DestroyFunc CloseOrNot
AddToFunc CloseOrNot
+ C Silent Close
+ M Nop

DestroyFunc RaiseFocus
AddToFunc RaiseFocus
+ I Raise
+ I Focus

#   for other parts of the window/borders/icons:
Mouse 1    F    A    Resize-or-Raise
Mouse 1    TS    A    Move-or-Raise
Mouse 1    I    A    Move-or-Iconify

######################## Menus ###################
#
# Menu Style

Colorset 0 fg black, bg grey, Translucent #c6cbd6 90
Colorset 1 fg black, bg #6b83b5, hi #dcdcdc, sh #dcdcdc
MenuStyle * Hilight3DThin, PopupOffset 0 100, PopupDelay 300
MenuStyle * Font "8x16"
MenuStyle * MenuColorset 0, HilightBack, ActiveColorset 1
MenuStyle * BorderWidth 1, TitleUnderlines1, SeparatorsLong, 
TrianglesSolid, Animation
MenuStyle * ItemFormat "%.2|%.5i%.5l%.5i%2.3&gt;%2|"
MenuStyle * VerticalItemSpacing 3 4

CopyMenuStyle * WindowList
MenuStyle WindowList VerticalItemSpacing 1 2
ChangeMenuStyle WindowList Window-Ops

#####
# FvwmRootMenu
###########
DestroyMenu RootMenu
AddToMenu   RootMenu "Root Menu" Title
+ "Programs%menu/programs.png%"  Popup FvwmProgramsMenu
+ "Console%menu/terminal.png%"  FvwmATerm
+ "FVWM Console%menu/terminal.png%"  Module FvwmConsole
+ "" Nop
+ "Help%menu/help.png%"  Popup FvwmManPagesMenu
+ "Restart FVWM%menu/restart.png%"  Restart
+ "Quit FVWM%menu/quit.png%"  Quit

# 这里定义了 menu 之后还需要绑定一个按键调用这个menu才行。
#
########################

################ Window Decor ##################
# 这部分设置窗口标题栏的样式，那些 ButtonStyle n 是设置窗口标题栏那些按钮的样子。
# FVWM预设了10个按钮的位置。标题栏按扭的排列是 1 3 5 7 9 0 8 6 4 2 ，可以参考上面的那个图。
# Vector 画如何画图 google 一下吧，我理解的也不是很深刻，或者说就没去理解，呵呵。
#

DestroyDecor MyDecor
AddToDecor   MyDecor
+ TitleStyle LeftJustified Height 18
+ ButtonStyle 1 ActiveUp Vector 4 30x30@3 60x60@3 60x30@4 30x60@3 -- Flat
+ ButtonStyle 1 ActiveDown Vector 4 30x30@3 60x60@3 60x30@4 30x60@3 -- Flat
+ ButtonStyle 1 Inactive Vector 4 30x30@3 60x60@3 60x30@4 30x60@3 -- Flat
+ ButtonStyle 3 ActiveUp Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3 -- Flat
+ ButtonStyle 3 ActiveDown Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3 -- Flat
+ ButtonStyle 3 Inactive Vector 5 30x60@3 60x60@3 60x50@3 30x50@3 30x60@3 -- Flat
+ ButtonStyle 5 ActiveUp Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3 -- Flat
+ ButtonStyle 5 ActiveDown Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3 -- Flat
+ ButtonStyle 5 Inactive Vector 7 30x30@3 30x60@3 60x60@3 60x30@3 30x30@3 30x35@3 60x35@3 -- Flat
+ TitleStyle -- Flat
+ BorderStyle Simple -- NoInset Flat
+ ButtonStyle All -- UseTitleStyle

Style "*" UseDecor MyDecor

Mouse 1 1 A FvwmDeleteOrDestroy
Mouse 1 3 A FvwmIconifyOrShade
Mouse 1 5 A FvwmMaximize 100 100
Mouse 2 5 A FvwmMaximize 0 100
Mouse 3 5 A FvwmMaximize 100 0

#给各个按钮绑定鼠标动作，必须绑定了动作，才会在标题栏显示。
#
#############################################

######################## Sample Functions ##########################
DestroyFunc Move-or-Raise
AddToFunc Move-or-Raise        I Raise
+                "M" Move
+                  "D" WindowShade
DestroyFunc Move-or-Raise2
AddToFunc Move-or-Raise2    "M" Raise
+                "M" Move
+                  "D" Lower
DestroyFunc Maximize-Func
AddToFunc Maximize-Func        "M" Maximize     0 100
+                "C" Maximize     0 80
+                "D" Maximize     100 98
DestroyFunc Maximize-Func2
AddToFunc Maximize-Func2    "M" Maximize     100 0
+                "C" Maximize     80 0
+                "D" Maximize     100 98
DestroyFunc Move-or-Iconify
AddToFunc Move-or-Iconify    I Raise
+                "M" Move
+                "D" Iconify
DestroyFunc Resize-or-Raise
AddToFunc Resize-or-Raise    I Raise
+                "M" Resize
+                "D" Lower
DestroyFunc Resize-or-Raise2
AddToFunc Resize-or-Raise2    "M" Raise
+                "M" Resize
+                "D" Lower
DestroyFunc Iconify-and-Raise
AddToFunc Iconify-and-Raise     I Iconify
+                               I Raise

##########   END   ############

#
# 到这里就都结束了，这个是基于 http://www.zensites.net/fvwm/guide/index.html 网站的介绍写的。
# 这个rc文件比网站介绍的还要简单，所以还可以去看看那个网站的内容。
# 有错误的地方，给我发邮件指出来 wd&lt;at&gt;wdicc.com 。
]]></content>
    
    <summary type="html">
    
      ########
#set Environment variables

SetEnv fvwm_img $[FVWM_USERDIR]/images
SetEnv fvwm_icon $[FVWM_USERDIR]/icons
SetEnv fvwm_scrpt $[FVWM_USERDIR]/scripts
SetEnv fvwm_wallpapers $[FVWM_USERDIR]/wallpaper

SetEnv fvwm_webbrowser /usr/bin/firefox
SetEnv fvwm_term /usr/bin/urxvtc
SetEnv fvwm_mail /usr/bin/mutt
#SetEnv fvwm_media_player /usr/bin/xmms
SetEnv fvwm_video_player /usr/bin/mplayer

#这部分设置fvwm的一些变量，这样方便以后如果有变化的话，不需要全文去修改，只修改这里就可以了。
#后面使用 $[var_name] 来引用
##################################
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="fvwm" scheme="http://wdicc.com/tags/fvwm/"/>
    
  </entry>
  
  <entry>
    <title>安装了一个 Gregarius</title>
    <link href="http://wdicc.com/install-gregarius/"/>
    <id>http://wdicc.com/install-gregarius/</id>
    <published>2007-01-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[lilina 的速度有点慢，就尝试换一个看看，装好了 Gregarius ，使用了下感觉还行，打开页面的时候比较慢，不知道是卡在哪里。lilina 那个以后不更新了，就使用 <a href="http://rss.wdicc.com" target="_blank" rel="external">Gregarius</a> 了。

wordpress 也更新了，到 2.1 了。好像增加了一些新功能，等会升级看看。
]]></content>
    
    <summary type="html">
    
      lilina 的速度有点慢，就尝试换一个看看，装好了 Gregarius ，使用了下感觉还行，打开页面的时候比较慢，不知道是卡在哪里。lilina 那个以后不更新了，就使用 &lt;a href=&quot;http://rss.wdicc.com&quot; target=&quot;_blank&quot; rel=&quot;e
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="wordpress" scheme="http://wdicc.com/tags/wordpress/"/>
    
      <category term="lilina" scheme="http://wdicc.com/tags/lilina/"/>
    
      <category term="Gregarius" scheme="http://wdicc.com/tags/Gregarius/"/>
    
  </entry>
  
  <entry>
    <title>又到周末了</title>
    <link href="http://wdicc.com/another-weekend/"/>
    <id>http://wdicc.com/another-weekend/</id>
    <published>2007-01-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[7点半爬起来，到公司楼下买了四根大油条一袋豆浆，刚刚才吃完，吃撑了。

今天来公司值班，一路都有座位，路上花的时间还比平时少了很多， 要是每天上班都这样多好啊。公交改革之后，本来以前每天早上座742有的座的，可是现在没了……，不过还好了，比那些需要座空调车的舒服多了，那些车更加拥挤。不过地铁倒是人少了，车上没那么挤了，可以方便我看小说，呵呵。哈利波特看了两部了，正在看第三部《阿兹卡班的囚犯》，目前电视播到了第四部《火焰杯》，我得加紧了，在第五部电影拍出来之前赶紧看完。小说写的逻辑性还是更加严密一点。第一部最后的那个boss就是被伏地魔附身了，要借魔法石来复活。第二部的那个密室里面操纵大蟒蛇的瑞德其实就是伏地魔的16岁之前保留在日记里面的记忆，伏地魔其实也是那个魔法学校毕业的，是邓不利多的学生。这些好像我看了电影之后都不知道，看了小说才知道来龙去脉。第二部也讲到了，伏地魔小的时候也是拿三好奖章的学生，很聪明，不知道是怎么进入魔道的，估计后面会说吧，呵呵。

明天有个同学要结婚，上周已经有一个了，所以这几次的礼钱让我很吐血，好几百块钱。而且，看样子这个周末也没什么休息了。希望下周能好好休息一下。
]]></content>
    
    <summary type="html">
    
      7点半爬起来，到公司楼下买了四根大油条一袋豆浆，刚刚才吃完，吃撑了。

今天来公司值班，一路都有座位，路上花的时间还比平时少了很多， 要是每天上班都这样多好啊。公交改革之后，本来以前每天早上座742有的座的，可是现在没了……，不过还好了，比那些需要座空调车的舒服多了，那些车更加拥
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>元旦之后就是春节</title>
    <link href="http://wdicc.com/Spring-Festival/"/>
    <id>http://wdicc.com/Spring-Festival/</id>
    <published>2007-01-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[元旦三天转眼就过完了，好像除了多睡了会觉没啥特别的感觉。元旦之后大节日就是春节了，查了一下是2月18号，也很快了。

元旦几个同学一起来聚了聚，吃了一顿火锅。不过那火锅好像没有期待中那么好吃了， 老大总提起以前在宿舍吃火锅的时候。那会一个小铝锅，几个固体酒精，买点肉，买点菜，一个宿舍就围着这个锅吃上了。竞争很激烈，往往锅刚开，动作慢的就没得吃了。那会好像一人能吃一斤肉……挺恐怖的一个事情。现在再也吃不出来那会的味道了，呵呵。

过两天一个很要好的同学就结婚了。其实已经在家里办了婚礼了，这次是请北京的同学吃个饭，去了估计能见到不少以前的同学和老乡了。98年到北京上学，到明年08年，就是整十年了，日子过的真是很快。

准备好怎么过春节了么？呵呵。
]]></content>
    
    <summary type="html">
    
      元旦三天转眼就过完了，好像除了多睡了会觉没啥特别的感觉。元旦之后大节日就是春节了，查了一下是2月18号，也很快了。

元旦几个同学一起来聚了聚，吃了一顿火锅。不过那火锅好像没有期待中那么好吃了， 老大总提起以前在宿舍吃火锅的时候。那会一个小铝锅，几个固体酒精，买点肉，买点菜，一个
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>让wp的tag可以显示彩色效果</title>
    <link href="http://wdicc.com/colorful-tag/"/>
    <id>http://wdicc.com/colorful-tag/</id>
    <published>2007-01-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[wp的tag列表可以让他用彩色形式显示，不过效果不喜欢。不满意的地方不好形容，用过就知道了。我看了源代码，他是让rgb三色一起递减或者递加的，我喜欢让所有颜色都出现。

最后的效果看我的blog就知道了。 实现的方法是修改 ultimate-tag-warrior-core.php 文件里面的 GetColorForWeight 函数，修改如下。
<pre class="prettyprint lang-php">
global $maxtagcolour, $mintagcolour;
if ($weight) {
$weight = $weight/100;

$new_color_min = hexdec($mintagcolour);
$new_color_max = hexdec($maxtagcolour);
$new_color = dechex(intval(($new_color_max - $new_color_min) * $weight + $new_color_min));
return "#$new_color";
/*                      $minr = hexdec(substr($mintagcolour, 1, 2));
$ming = hexdec(substr($mintagcolour, 3, 2));
$minb = hexdec(substr($mintagcolour, 5, 2));

$maxr = hexdec(substr($maxtagcolour, 1, 2));
$maxg = hexdec(substr($maxtagcolour, 3, 2));
$maxb = hexdec(substr($maxtagcolour, 5, 2));

$r = dechex(intval((($maxr - $minr) * $weight) + $minr));
$g = dechex(intval((($maxg - $ming) * $weight) + $ming));
$b = dechex(intval((($maxb - $minb) * $weight) + $minb));

if (strlen($r) == 1) $r = "0" . $r;
if (strlen($g) == 1) $g = "0" . $g;
if (strlen($b) == 1) $b = "0" . $b;

return "#$r$g$b";
*/
}
}</pre>
很简单的一个修改，再去后台设置一下tag的颜色渐变的起始值就可以了。
]]></content>
    
    <summary type="html">
    
      wp的tag列表可以让他用彩色形式显示，不过效果不喜欢。不满意的地方不好形容，用过就知道了。我看了源代码，他是让rgb三色一起递减或者递加的，我喜欢让所有颜色都出现。

最后的效果看我的blog就知道了。 实现的方法是修改 ultimate-tag-warrior-core.ph
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>使用perl操作mysql数据库</title>
    <link href="http://wdicc.com/perl-and-mysql/"/>
    <id>http://wdicc.com/perl-and-mysql/</id>
    <published>2007-01-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[东抄西抄拼凑的代码。关于perl dbi的文档可以查看<a href="http://search.cpan.org/~timb/DBI/DBI.pm" target="_blank" rel="external">这里</a>。
<pre class="prettyprint lang-perl">
use DBI;
use strict;
#use Data::Dumper;

my $mobile = @ARGV[0];
my $msg = @ARGV[1];
my $db = "gnokii";
my $host = 'localhost';
my $user = 'gnokii';
my $password = 'pwd';
my $in = 'inbox';
my $out = 'outbox';

my $dbh = DBI->connect("DBI:mysql:database=$db;host=$host",$user, $password, {RaiseError => 1});

print "$msgn";
my $sql = qq{ insert into $out (number,text) values ("$mobile","$msg")};

#my $sql = qq{ SELECT * from $out };
my $sth = $dbh->prepare( $sql );
$sth->execute();
#my @result;

#while (@result = $sth->fetchrow_array){
#       print "$result[0],$result[1],$result[4]n";
# }

$sth->finish();
$dbh->disconnect();</pre>
]]></content>
    
    <summary type="html">
    
      东抄西抄拼凑的代码。关于perl dbi的文档可以查看&lt;a href=&quot;http://search.cpan.org/~timb/DBI/DBI.pm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;。
&lt;pre class=&quot;prettyprint 
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>下雪了</title>
    <link href="http://wdicc.com/snowing-again/"/>
    <id>http://wdicc.com/snowing-again/</id>
    <published>2006-12-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[早上6点多醒来，看到外面变白了，意识今年冬天的第一场雪来了。

<img align="middle" src="http://photo4.yupoo.com/20061230/114634_642705975.jpg">

<img align="middle" src="http://photo4.yupoo.com/20061230/114545_688044251.jpg">
]]></content>
    
    <summary type="html">
    
      早上6点多醒来，看到外面变白了，意识今年冬天的第一场雪来了。

&lt;img align=&quot;middle&quot; src=&quot;http://photo4.yupoo.com/20061230/114634_642705975.jpg&quot;&gt;

&lt;img align=&quot;middle&quot; src=&quot;h
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>恢复grub</title>
    <link href="http://wdicc.com/recover-grub/"/>
    <id>http://wdicc.com/recover-grub/</id>
    <published>2006-12-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[安装双系统的时候，如果后安装的 win ，那么就会把mbr的grub信息干掉。通常的建议是先安装win后安装linux。

今天遇到的情况是通过 vmware  安装 suse 到物理硬盘的时候，没有将 grub 安装到 mbr，这样需要重新安装一下grub。

我的方法是找了一个 knoppix ，然后启动到 level 2 ，启动之后执行下面的命令先。
<pre class="prettyprint lang-bash">
mount -o proc none /mnt/hdax/proc
mount --bind /dev/ /mnt/hdax/dev</pre>
这样操作之后，就可以chroot到硬盘上面的系统了。
<pre class="prettyprint lang-bash">
然后自己修改 /boot/grub/menu.1st 文件。之后执行 grub 命令。
<pre class="prettyprint lang-bash">
grub> setup (hd0)</pre>
我这里操作的时候遇到一个问题，suse好像往grub的map.xxx.gz里面写了关于fd0的信息，这样运行grub命令的时候会尝试去读取软驱。我在bios里面禁用了软驱才ok。
</pre>]]></content>
    
    <summary type="html">
    
      安装双系统的时候，如果后安装的 win ，那么就会把mbr的grub信息干掉。通常的建议是先安装win后安装linux。

今天遇到的情况是通过 vmware  安装 suse 到物理硬盘的时候，没有将 grub 安装到 mbr，这样需要重新安装一下grub。

我的方法是找了一
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="grub" scheme="http://wdicc.com/tags/grub/"/>
    
  </entry>
  
  <entry>
    <title>圣诞节，平安夜</title>
    <link href="http://wdicc.com/marry_christmas/"/>
    <id>http://wdicc.com/marry_christmas/</id>
    <published>2006-12-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[昨天晚上就是传说中的平安夜了。

早在上周一，公司的大厦就把楼外面的干树枝上面妆点上了彩灯，远远看效果还不错，早早就感受了圣诞的节日气氛。昨天我值班，到了晚上回家的时候，又感受了一把平安夜。

在复兴门的时候，平时应该空荡荡的地铁站，突然间人山人海的，都是小年轻，男男女女的，坐地铁到王府井。本来平时到四惠打黑车的时候，都是20到家。可是今天不一样了，好多人下车，搞的黑车司机也飘飘然起来，25都不走，一定要拼车。有个司机本来说好一个，然后加我和我老婆就差不多一车了，那司机还不走，还想拉一个。结果那个mm人家打别的车走了，我们也去找别的车了，这下子这哥们啥都没捞着。

最终还是说服一个的哥不打票，25送我们回去。 下车的时候司机说我们骗他，打票得三十五，呵呵。

不明白洋节怎么越来越流行了。情人节，愚人节，圣诞节，象圣诞节，都不信教，还非要去什么教堂玩，唉，真是的。
]]></content>
    
    <summary type="html">
    
      昨天晚上就是传说中的平安夜了。

早在上周一，公司的大厦就把楼外面的干树枝上面妆点上了彩灯，远远看效果还不错，早早就感受了圣诞的节日气氛。昨天我值班，到了晚上回家的时候，又感受了一把平安夜。

在复兴门的时候，平时应该空荡荡的地铁站，突然间人山人海的，都是小年轻，男男女女的，坐地
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>一个简单问题的三种实现方法</title>
    <link href="http://wdicc.com/3-solve-way/"/>
    <id>http://wdicc.com/3-solve-way/</id>
    <published>2006-12-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[#arch-cn irc上面rock提出了一个需求，将一行太长的文字让他自动按照要求换行。

刚开始拿到这个问题的时候，感觉sed或者awk好像实现不了亚，没那么智能的，可是简单分析一下，“按照要求” 我们假定要求是 “每5个字符” 就换行一次。这样这个问题就明朗了。再换句话说，需求就是 “每5个字符插入一个换行符”。

第一种方法，用sed：
<pre class="prettyprint lang-bash">
第二种方法，用gawk（sssslang提供）：
<pre class="prettyprint lang-bash">cat $content | gawk --re-interval '{gsub(/(.){2}/,"&n">
第三种方法，好像有点bt，用perl：
<pre class="prettyprint lang-perl">
@content = `tail /var/log/postfix.log`;
foreach (@content) {
for ($i=0; $i < length($_); $i+=$cut) {
                print substr("$_",$i,$cut)."\n";
        }
}</pre>
反斜杠\都被过滤掉了，不知道咋回事，自己看着加上。。
</pre></pre>]]></content>
    
    <summary type="html">
    
      #arch-cn irc上面rock提出了一个需求，将一行太长的文字让他自动按照要求换行。

刚开始拿到这个问题的时候，感觉sed或者awk好像实现不了亚，没那么智能的，可是简单分析一下，“按照要求” 我们假定要求是 “每5个字符” 就换行一次。这样这个问题就明朗了。再换句话说，
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>我的第一个perl脚本</title>
    <link href="http://wdicc.com/irssi_bot/"/>
    <id>http://wdicc.com/irssi_bot/</id>
    <published>2006-12-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[是给irssi写的，只不过通过他和irssi接口，所有功能都是bash脚本实现的，回头看看如何转到perl。
<pre class="prettyprint lang-perl">
use vars qw($VERSION %IRSSI);

use Irssi;
$VERSION = '1.00';
%IRSSI = (
authors     => 'wd',
contact     => 'wd@wdicc.com',
name        => 'My First Script',
description => 'This script allows ' .
'you to query weather and other info ' .
'using some command.',
license     => 'Public Domain',
);

sub send_msg {
my ($server, $who, @result) = @_;
my $count;
$count = 1;
while ($count <= @result)="" {="" $server-="">command("msg $who $result[$count-1]");
$count++;
}
}

sub pre_send {
my ($server, $who) =@_;
$server->command("msg $who 0I'm working,Waiting me...");
}

sub end_send {
my ($server, $who) =@_;
$server->command("msg $who 0...The end.");
}

sub msg_public {
my ($server, $msg, $nick, $address, $target) = @_;
my @result;my $who;

$who = $target;
if ($target eq "") { $who = $nick; }

if ($msg =~ /^!([Dd]ict|[Ww]eather|[Gg]oogle|[Hh]elp|nslookup|rss).*$/) {
&pre_send($server,$who);
$msg =~ s/!//;
if ($msg =~ /^[Hh]elp.*$/) {
@result = ("Usage:",
"!dict ur_word",
"   eg: !dict license",
"!weather location [today|tomorrow]",
"   eg: !weather beijing",
"!google sth.",
"   eg: !google archlinux",
"!nslookup domin_name",
"   eg: !nslookup archlinux.org",
"!rss feed_url",
"   eg: !rss http://blog.wdicc.com/wordpress/feed/");
} else {
@result = `/home/stef/get $msg`;
}
#$server->print("#arch-cn", "$nick, $target, $who");
&send_msg($server, $who, @result);
&end_send($server, $who);
}
}

Irssi::signal_add_first('message public', 'msg_public');
Irssi::signal_add_first('message private', 'msg_public');</=></pre>
]]></content>
    
    <summary type="html">
    
      是给irssi写的，只不过通过他和irssi接口，所有功能都是bash脚本实现的，回头看看如何转到perl。
&lt;pre class=&quot;prettyprint lang-perl&quot;&gt;
use vars qw($VERSION %IRSSI);

use Irssi;
$VERSIO
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>继续来解决gnokii中文问题</title>
    <link href="http://wdicc.com/gnokii_howto_chinese_sms/"/>
    <id>http://wdicc.com/gnokii_howto_chinese_sms/</id>
    <published>2006-12-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这玩意原来和 <a href="http://groups.google.com/group/mailing.unix.gnokii/browse_thread/thread/a006ae68df36d863/2931523e4eafaa06%232931523e4eafaa06" target="_blank" rel="external">locale</a> 有关系。一个utf8编码的文件（里面包含中文），只要执行gnokii之前设置一下正确的locale手机收到就是正常的。比如我建立了下面的一个发送短信的命令。
<pre class="prettyprint lang-bash">
LC_ALL=zh_CN.utf8
/usr/local/gnokii/bin/gnokii $@</pre>
这样cat utf8_text | gnokii_utf8 --sendsms ur_phone_num发送就没问题了。看样子和smsd和mysql的版本是没有关系的。之前尝试在debian上面升级mysql虽然失败了，不过看样子也没多大影响。 :)
]]></content>
    
    <summary type="html">
    
      这玩意原来和 &lt;a href=&quot;http://groups.google.com/group/mailing.unix.gnokii/browse_thread/thread/a006ae68df36d863/2931523e4eafaa06%232931523e4eafaa06
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>iptables做端口映射的一点新的心得</title>
    <link href="http://wdicc.com/iptables-and-portmap/"/>
    <id>http://wdicc.com/iptables-and-portmap/</id>
    <published>2006-12-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[iptables做端口映射很简单的一个事情，我之前也写了<a href="http://blog.wdicc.com/wordpress/2006/05/09/153/" target="_blank" rel="external">如何来实现</a>这个咚咚。今天要用到的时候，遇到了问题，写写怎么解决的。

写好SNAT和DNAT相关语句之后，在INPUT、FORWARD和OUTPUT里面针对各个端口都开放了权限，可是就是访问不了，看tcpdump可以看到，SNAT肯定是进行了，因为有对方回来的信息。后来仔细分析了一下整个转换的过程，发现了问题所在。

这里总共涉及到三台电脑，假设A是我们的server，B是中转server，C是希望通过B来访问A的客户端，所以一次完整的请求如下图。
<pre class="prettyprint lang-text">
所以呢，以25端口为例，需要开放的端口依次是：
<pre class="prettyprint lang-text">
B : INPUT (目标端口25)
B : FORWARD (目标端口25)
B : OUTPUT (目标端口25)
A : INPUT (目标端口25)
--->上面是请求，下面开始回应请求
A : OUTPUT (源端口25)
B : INPUT (源端口25)
B : FORWARD (源端口25)
B : OUTPUT (源端口25)
C : INPUT (源端口25)</pre>
如此，一次请求发送过去的时候，所有数据包的目的端口都是25（假设B开放的转发端口也是25），源端口是1024-65535之间的某个数值，反回来所有数据包的源端口都是25，目的端口对应前面的那个端口。

我的问题就是光开放了B的FORWARD的目的端口25，源端口25没有打开，这样数据不能正确返回给C，打开就好了。
</pre>]]></content>
    
    <summary type="html">
    
      iptables做端口映射很简单的一个事情，我之前也写了&lt;a href=&quot;http://blog.wdicc.com/wordpress/2006/05/09/153/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;如何来实现&lt;/a&gt;这个咚咚。今天要用到的时候，
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>debian下面解决gnokii读取短信的bug</title>
    <link href="http://wdicc.com/gnokii_cant_get_sms/"/>
    <id>http://wdicc.com/gnokii_cant_get_sms/</id>
    <published>2006-12-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上一篇文章提到过gnokii读取AT模式下设备的短信的时候会有<a href="http://blog.wdicc.com/wordpress/2006/12/05/277/" target="_blank" rel="external">问题</a>，从xh那里看到了解决方法，自己也goolgle了<a href="http://thread.gmane.org/gmane.linux.drivers.gnokii/7918/focus=7922" target="_blank" rel="external">一下</a>，总结一下debian（sarge）下面解决这个问题的方法。

故障现象如下：
<pre class="prettyprint lang-text">
[...]
Message sent: 0x12 / 0x0009
41 54 2b 43 50 4d 53 3f 0d                      | AT+CPMS?
write: [AT+CPMS?]
read : [AT+CPMS?+CPMS:
"SM",2,30,"SM",2,30OK]
Message received: 0x12 / 0x002d
02 41 54 2b 43 50 4d 53 3f 0d 0d 0a 2b 43 50 4d |  AT+CPMS?   +CPM
53 3a 20 22 53 4d 22 2c 32 2c 33 30 2c 22 53 4d | S: "SM",2,30,"SM
22 2c 32 2c 33 30 0d 0a 0d 0a 4f 4b 0d          | ",2,30    OK
Received message type 12
GetSMS SM 1 failed! (Command failed.)
Serial device: closing device</pre>
还有一个smsd的问题：
<pre class="prettyprint lang-text">
解决这个问题需要给gnokii打一个补丁，debian下面就需要自己来制作一个包，参考 <a href="http://debian.linuxsir.org/doc/inthedebianway/debian_build_package.html" target="_blank" rel="external">构建 Debian 软件包</a> 这篇文章，操作如下。

首先下载包的源代码：
<pre class="prettyprint lang-bash">
此时他会在当前目录下面下载并解压gnokii的源代码包，并且打上debian需要的patch。此时需要将下面的patch给gnokii打上，修改都是针对common/phones/atgen.c的。
<pre class="prettyprint lang-diff">
+++ atgen.c     2006-12-06 12:40:59.201314062 +0800
@@ -537,22 +537,15 @@
{
at_driver_instance *drvinst = AT_DRVINST(state);
gn_data data;
-       gn_sms_status sms_status;
char req[32];
gn_error ret = GN_ERR_NONE;

if (mt != drvinst->smsmemorytype) {
gn_data_clear(&data);
-               data.sms_status = &sms_status;
-               ret = AT_GetSMSStatus(&data, state);
+               sprintf(req, "AT+CPMS=\"%s\"r", memorynames[mt]);
+               ret = sm_message_send(13, GN_OP_Init, req, state);
if (ret != GN_ERR_NONE)
return ret;
-
-               sprintf(req, "AT+CPMS=\"%s\",\"%s\",\"%s\"r", memorynames[mt], memorynames[mt],
-                       memorynames[data.sms_status->new_message_store]);
-               ret = sm_message_send(23, GN_OP_Init, req, state);
-               if (ret != GN_ERR_NONE)
-                       return GN_ERR_NOTREADY;
ret = sm_block_no_retry(GN_OP_Init, &data, state);
if (ret == GN_ERR_NONE)
drvinst->smsmemorytype = mt;
@@ -1355,7 +1348,10 @@

if (sscanf(buf.line2, "+CPMS: \"%*c%*c\",%d,%*d,\"%*c%*c\",%*d,%*d,\"%c%c\",%*d,%*d",
&data->sms_status->number, &store[0], &store[1]) != 3)
-               return GN_ERR_FAILED;
+
+               if (sscanf(buf.line2, "+CPMS: \"%c%c\",%d,%*d,\"%*c%*c\",%*d,%*d",
+                                       &store[0], &store[1], &data->sms_status->number) != 3)
+                       return GN_ERR_FAILED;

data->sms_status->unread = 0;
data->sms_status->changed = 0;</pre>
把上面的内容保存一下，比如取名为cant_get_sms.patch，或者来<a href="http://blog.wdicc.com/wordpress/download/cant_get_sms.patch" target="_blank" rel="external">这里</a>下载，然后执行下面的命令：
<pre class="prettyprint lang-bash">
apt-get -b source gnokii</pre>
此时会看到debian正在编译gnokii（编译之前可能需要下载编译需要的dev库，按照提示来就可以了），编译完成之后会将打包成6个deb文件，用dpkg -i命令重装一下你需要的就可以了。 此时再试试看gnokii --getsms SM 1命令，是不是没问题了？
</pre></pre>]]></content>
    
    <summary type="html">
    
      上一篇文章提到过gnokii读取AT模式下设备的短信的时候会有&lt;a href=&quot;http://blog.wdicc.com/wordpress/2006/12/05/277/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;问题&lt;/a&gt;，从xh那里看到了解决方法，
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>lilina里面不能正确生成前一天的cache的问题</title>
    <link href="http://wdicc.com/lilina-cache/"/>
    <id>http://wdicc.com/lilina-cache/</id>
    <published>2006-12-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[lilina可以生成好几天的cache，可以看到上面有每天的链接可以访问，可是这两天发现，在today里面明明看到前一天晚上23:40多有rss，结果点击到前一天生成的链接却发现，没有？见鬼了。

仔细研究下，似乎是23:00之后的rss都不会做cache，咋回事哩，翻了一下源代码，发现问题所在了。

index.php里面有下面一句：
<pre class="prettyprint lang-php">$saven_file = realpath(".")."/".date('Ymd').".html">
这是设置cache文件的名称和位置的语句，可以看到文件名里面用的是当前的日期。单独这一点不会有问题，问题在于我的cron里面是每隔一个小时的0分钟执行一次，也就是1:00，2:00……23:00，0:00，这样，23:00之后0:00之前的rss就被吞掉了。解决方法就是将cron修改为类似下面的，让他每隔整点的58分执行更新。
<pre class="prettyprint lang-bash">
</pre></pre>]]></content>
    
    <summary type="html">
    
      lilina可以生成好几天的cache，可以看到上面有每天的链接可以访问，可是这两天发现，在today里面明明看到前一天晚上23:40多有rss，结果点击到前一天生成的链接却发现，没有？见鬼了。

仔细研究下，似乎是23:00之后的rss都不会做cache，咋回事哩，翻了一下源代
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="lilina" scheme="http://wdicc.com/tags/lilina/"/>
    
      <category term="rss" scheme="http://wdicc.com/tags/rss/"/>
    
  </entry>
  
  <entry>
    <title>看到一篇有意思的文章-[上帝与Google，玉帝与Baidu]</title>
    <link href="http://wdicc.com/a-joke-10/"/>
    <id>http://wdicc.com/a-joke-10/</id>
    <published>2006-12-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://www.newsmth.net/bbscon.php?bid=951&id=28755" target="_blank" rel="external">http://www.newsmth.net/bbscon.php?bid=951&id=28755</a>

最早的时候,上帝很无聊,平时只能看看电视听听广播,偶尔玩玩超级玛丽,再就是和圣母玛丽亚通通电话.时间长了,这种生活越发枯燥.上帝觉得这样的生活太乏味,于是他说:“要有网”.然后就有了互联网,计算机都可以连在一起,这是第一天.

光是有互联网也不行，起码得有点东西看吧。上帝说：“要有网站”。然后就有了全世界各种各样的大小网站，上帝在网站上看新闻、看图片，顺便还到论坛上发发贴，觉得互联网有些意思，这是第二天。

圣母玛丽亚看上帝这两天没怎么打电话，比较生气，威胁上帝说要把互联网毁了，上帝觉得这样不好，于是上帝说：“要有即时通讯”。然后就有了即时通讯软件，上帝和圣母玛丽亚在互联网上视频语音聊天，圣母玛丽亚也觉得互联网很好玩，这是第三天。

网站的数量太多了，也不知道那个网站更好看，上帝觉得这样太杂乱，于是上帝说：“要有导航网站”，然后就有了导航网站，上帝觉得分类目录挺好的，这是第四天。

没想到，网站越来越多，网页也越来越多，找分类目录都找不过来了，上帝觉得比较郁闷，心想找个东西怎么这么难呢？但这难不倒上帝，上帝说：“要有搜 索引擎”，然后就有了搜索引擎，上帝使用搜索引擎，很快的就可以找到自己想要的东西，上帝觉得非常有成就感，这是第五天。<a id="more"></a>

在第一天上帝搞互联网的时候，远在天界东边的玉皇大帝就从千里眼和顺风耳那里得到了线报。玉帝有点迷惑，“这哥们搞什么东东呢？”问了所有神仙，大 家都不知道，玉帝觉得这样不行，我们得与时俱进，向西方学习。玉帝说：“要有中国互联网”。于是中国也有了互联网。

第二天，玉帝上互联网，全是英文网站，除了图片以外，什么都看不懂，玉帝很头大。玉帝说：“要有中文网站”。于是中文网站雨后春笋般的出现了。

第三天，玉帝不爽了，为什么？联系不方便啊，还是要叫千里眼和顺风耳，丫的，太麻烦了，可是ICQ、MSN都是英文的啊？玉帝说：“要有中文的及时通讯。”于是有了QQ。玉帝玩上了QQ，跟王母娘娘聊的很开心。

第四天，中文网站也太多了，看的玉帝眼花缭乱，心情也比较烦乱，就问太白金星怎么办。太白金星这个老家伙说：“好，一得给他们分类，二得推荐些好网 站，三得经常有新东西……”玉帝觉得他很罗嗦。玉帝说，你说什么“好一二三”？然后，hao123就解决了玉帝和中国大众上网导航的问题。

第五天，面对几亿的中文网页，虽然有hao123，但要找某些具体的信息实在太难了。玉帝发脾气了：“要找我去年在天庭的新闻发言稿怎么那么难呢？”太白 金星凑过来说，上帝那有个Google，挺不错的，推荐你用用。于是玉帝上Google，一眼看过去，全是英文的，玉帝直接爆炸了，回头把太白金星骂了个 狗血喷头：“你这什么馊主意？让我用他们搞的东西？没听过国货当自强吗？这个玩意我们得自己搞！”玉帝转过身问文曲星该怎么办，文曲星慢条斯里的吟开场 白：“众里寻她千百度，那人却在……”，玉帝说：“千你个头啊，百度！”这一瞬间，百度中文搜索引擎诞生了！

玉帝很 满意百度。在百度，不但可以便捷的找到想要的信息，还可以在百度mp3搜索上找些小曲听听，更可以躲开王母偷偷的在百度图片搜索弄几张嫦娥的写真照片看 看，更绝的，是玉帝在百度贴吧开了个“玉皇大帝”吧来了解天下百姓对自己的歌功颂德——而这些是Google所没有的。时间长了，甚至在众神仙为某个事上 吵个不停的时候，玉帝就会说：“有问题，百度一下！”然后就没问题了。

然而众神仙不明白，为什么玉帝不喜欢同样有中文版的Google，仅仅因为百度更符合中国大众使用习惯吗？后来，玉帝终于自揭谜底：这些洋网站总说用户是上帝，用户是上帝，用户真的是上帝？在中国，用户是玉帝！”大家恍然大悟。
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://www.newsmth.net/bbscon.php?bid=951&amp;id=28755&quot;&gt;http://www.newsmth.net/bbscon.php?bid=951&amp;id=28755&lt;/a&gt;

最早的时候,上帝很无聊,平时只能看看电视听听广播,偶尔玩玩超级玛丽,再就是和圣母玛丽亚通通电话.时间长了,这种生活越发枯燥.上帝觉得这样的生活太乏味,于是他说:“要有网”.然后就有了互联网,计算机都可以连在一起,这是第一天.

光是有互联网也不行，起码得有点东西看吧。上帝说：“要有网站”。然后就有了全世界各种各样的大小网站，上帝在网站上看新闻、看图片，顺便还到论坛上发发贴，觉得互联网有些意思，这是第二天。

圣母玛丽亚看上帝这两天没怎么打电话，比较生气，威胁上帝说要把互联网毁了，上帝觉得这样不好，于是上帝说：“要有即时通讯”。然后就有了即时通讯软件，上帝和圣母玛丽亚在互联网上视频语音聊天，圣母玛丽亚也觉得互联网很好玩，这是第三天。

网站的数量太多了，也不知道那个网站更好看，上帝觉得这样太杂乱，于是上帝说：“要有导航网站”，然后就有了导航网站，上帝觉得分类目录挺好的，这是第四天。

没想到，网站越来越多，网页也越来越多，找分类目录都找不过来了，上帝觉得比较郁闷，心想找个东西怎么这么难呢？但这难不倒上帝，上帝说：“要有搜 索引擎”，然后就有了搜索引擎，上帝使用搜索引擎，很快的就可以找到自己想要的东西，上帝觉得非常有成就感，这是第五天。
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>给nagios添加故障时短信通知</title>
    <link href="http://wdicc.com/nagios-sms-alert/"/>
    <id>http://wdicc.com/nagios-sms-alert/</id>
    <published>2006-12-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[nagios可以配置为在故障的时候发送Email，执行什么程序等。光执行程序这项可以实现的功能就太多了，没有做不到只有想不到。说说看我是怎么给nagios添加短信通知的。

首先需要一个能发送短信的东东，有些专门用来发送短信的猫，插上一张sim卡就可以用了，当然也可以找一个手机来做这个事情。然后用gnokii来通过sim卡发送短信，他主要是linux下面用来管理nokia手机的一个软件，当然所有支持AT指令的都可以使用。

debian上面安装好gnokii之后，/etc/gnokiirc是他的配置文件，主要修改两个地方：
model = AT
serial_baudrate = 9600
然后还需要将nagios用户（也就是启动nagios的用户）或者其他需要操作猫的用户加入dialout组，这样才有权限操作/dev/ttyS0这个设备，也就是第一个串口设备。
我的短信猫是通过串口连接到电脑的，如果你的是usb的或者其他类型的方式，比如蓝牙红外什么的，需要加载特定的模块，具体方法参考gnokii的网站。连接短信猫之后，可以用minicom测试一下是不是连接正确，他是类似于win下面的超级终端的一个程序。要注意连接的比特率，如果设备不支持可能不会有效果。设置好之后输入个AT，看是不是返回OK，如果返回那就连接正确了。

然后可以试试看执行gnokii --identify，我这里输出下面的内容：
<pre class="prettyprint lang-bash">
GNOKII Version 0.6.5
IMEI         : 500182395xxxxxx
Manufacturer : WAVECOM MODEM
Model        : MULTIBAND  900E  1800
Revision     : 533b09gg.2C2 1742344 061002 11:23</pre>
这样表示我的猫被正确识别了。如果有问题，可以修改gnokiirc文件，打开debug模式，看看问题所在。发个短信试试看：
<pre class="prettyprint lang-bash">#echo -e "testntest 2">
GNOKII Version 0.6.5
Send succeeded!</pre>
收到短信了么？呵呵。之后修改nagios的misccommands.cfg文件，添加你的cmd：
<pre class="prettyprint lang-bash">
command_name    host-notify-by-sms
command_line    /bin/echo -e "$HOSTADDRESS$($NOTIFICATIONNUMBER$)n$HOSTSTATE$n$OUTPUT$n$SHORTDATETIME$" | /usr/bin/gnokii --sendsms $CONTACTPAGER$ 2>>/dev/null
}

define command{
command_name    notify-by-sms
command_line    /bin/echo -e "$HOSTADDRESS$($NOTIFICATIONNUMBER$)n$SERVICEDESC$-$SERVICESTATE$n$OUTPUT$n$SHORTDATETIME$" | /usr/bin/gnokii --sendsms $CONTACTPAGER$ 2>>/dev/null
}</pre>
然后修改contacts.cfg，设置service_notification_commands、host_notification_commands，并且设置pager为电话号码。cmd里面可以通知的内容参考nagios doc里面的Using Macros In Commands。

可以试试看让一台服务器down了测试一下了。

以前用猫附带的一个软件（或许也可能是我们写的，因为听说附带软件的话比较贵）发送短信，总是会重复发送，有时一条短信会发送好多次。那个软件的原理是这样的，我将需要发送的短信按照一定的格式写入数据库，然后这个软件从数据库读取没发送的进行发送，然后将其修改为已发送。我猜可能重复发送的原因是“修改为已发送 ”这个过程中出问题了，修改了很多次才成功。

现在gnokii还有个问题可能就是读取短信的时候会提示失败，据说是个bug，xh这里有<a title="AT model使用gnokii来收取短消息" href="http://www.grisword.com/tt/Grisword/126" target="_blank" rel="external">解决办法</a>，有兴趣可以看看，我这里暂时好像还不需要读取短信。
]]></content>
    
    <summary type="html">
    
      nagios可以配置为在故障的时候发送Email，执行什么程序等。光执行程序这项可以实现的功能就太多了，没有做不到只有想不到。说说看我是怎么给nagios添加短信通知的。

首先需要一个能发送短信的东东，有些专门用来发送短信的猫，插上一张sim卡就可以用了，当然也可以找一个手机来
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>咱也玩玩lilina</title>
    <link href="http://wdicc.com/my-lilina/"/>
    <id>http://wdicc.com/my-lilina/</id>
    <published>2006-11-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[好像不知道从什么时候开始流行起了lilina，自己捣鼓捣鼓也装了一个，<a href="http://blog.wdicc.com/lilina/index.html" target="_blank" rel="external">我的lilina</a>。其实google reader挺好的，不过就是google有时候会被GFW干掉，这样reader也不能访问了。最近这种情况好像还出现很频繁，真是头痛，其实google reader挺好用的，不过现在就试试看lilina了。

今天也看到一些关于干掉GFW的文章<a href="http://yesure.blogspot.com/2006/11/ssh-tunnelfuck-gfw.html" target="_blank" rel="external">[1]</a><a href="http://blog.cathayan.org/item/1508" target="_blank" rel="external">[2]</a>，但是需要国外的ssh服务器，偶没有。。不过这个ssh tunnel倒是个不错的东西，比装代理服务器简单，嗯。

用了lilina之后，发现sina的rss好像总是在最前面，而实际上他们更新却是以前的事情了，肯定是他们的rss输出有问题，感觉这样很无耻。
]]></content>
    
    <summary type="html">
    
      好像不知道从什么时候开始流行起了lilina，自己捣鼓捣鼓也装了一个，&lt;a href=&quot;http://blog.wdicc.com/lilina/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;我的lilina&lt;/a&gt;。其实google re
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="gfw" scheme="http://wdicc.com/tags/gfw/"/>
    
      <category term="lilina" scheme="http://wdicc.com/tags/lilina/"/>
    
      <category term="rss" scheme="http://wdicc.com/tags/rss/"/>
    
  </entry>
  
  <entry>
    <title>给wp的一个关键字插件做了一下修改</title>
    <link href="http://wdicc.com/wp-keyword-plugin/"/>
    <id>http://wdicc.com/wp-keyword-plugin/</id>
    <published>2006-11-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[参考<a title="访问插件主页" href="http://adsense-wordpress-plugin.ayanev.com/" target="_blank" rel="external">AdSense Earnings Reports</a>插件将wp的一个关键字插件<a title="访问插件主页" href="http://blog.tassoman.com/wordpress-plugins/tradedoubler-filter" target="_blank" rel="external">Trade Doubler Filter</a>修改了一下，之前只能通过修改源代码来添加关键字，现在可以在后台添加了。

附件是修改之后的文件。

http://blog.wdicc.com/wordpress/wp-content/uploads/2006/11/keyword.jpg
]]></content>
    
    <summary type="html">
    
      参考&lt;a title=&quot;访问插件主页&quot; href=&quot;http://adsense-wordpress-plugin.ayanev.com/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AdSense Earnings Reports&lt;/a&gt;插件将wp的一个关键
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="关键字" scheme="http://wdicc.com/tags/%E5%85%B3%E9%94%AE%E5%AD%97/"/>
    
      <category term="插件" scheme="http://wdicc.com/tags/%E6%8F%92%E4%BB%B6/"/>
    
  </entry>
  
  <entry>
    <title>午饭和晚饭</title>
    <link href="http://wdicc.com/lunch-and-supper/"/>
    <id>http://wdicc.com/lunch-and-supper/</id>
    <published>2006-11-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在公司吃了半年多公司饭之后，也装模作样开始带饭了，呵呵。

刚开始来公司的时候，是和其他几个同事一起去附近的饭馆拼桌，要几个炒菜一起吃，然后AA。后来一个比较老的同事离职之后，我和另外一个和我差不多新的同事就没了主意，后来就开始吃大厦的食堂。后来大厦里面的有个广东餐馆竞争，也开始提供自助餐。这样，吃到现在，这些地方都吃腻了。所以开始带饭。

中午吃完满满一盒饭菜，就发现撑的荒，呵呵。 等到下午3，4点的时候，好像还觉得有点饱，这样晚上就完全不用吃饭了。就像今天，估计晚上又省了。。。这样也不错，还有利于减肥。。。
]]></content>
    
    <summary type="html">
    
      在公司吃了半年多公司饭之后，也装模作样开始带饭了，呵呵。

刚开始来公司的时候，是和其他几个同事一起去附近的饭馆拼桌，要几个炒菜一起吃，然后AA。后来一个比较老的同事离职之后，我和另外一个和我差不多新的同事就没了主意，后来就开始吃大厦的食堂。后来大厦里面的有个广东餐馆竞争，也开始
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="减肥" scheme="http://wdicc.com/tags/%E5%87%8F%E8%82%A5/"/>
    
      <category term="午餐" scheme="http://wdicc.com/tags/%E5%8D%88%E9%A4%90/"/>
    
  </entry>
  
  <entry>
    <title>周末在家吃火锅</title>
    <link href="http://wdicc.com/chaffy-dish-weekend/"/>
    <id>http://wdicc.com/chaffy-dish-weekend/</id>
    <published>2006-11-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上个周末过得比较腐败，没有了其它安排，周六下午睡到了9点，起来玩了会游戏，又继续睡，睡的头都晕了……。周日cc的同学过来，考虑到最简单的吃法，就是吃火锅了。

去超市没有买到小肥羊的锅底，用了一个什么重庆的，挺辣的。想起来上次去双安吃的那个重庆火锅了，吃了半天除了辣就没有别的味道了，真是很没意思。不过我们昨天吃的除了辣还有一个味道，就是咸。刚开始吃还不觉得，后来 cc 说了咸之后，大家才醒悟，开始一直注意辣了，没想到这玩意确实挺咸的。后来想想，可能是因为我们锅比较小的缘故吧。

四个人吃，锅底小料加菜总共花了得有100左右，想想看吧， cc 同学走了之后，就发现剩下的东西还够四个人吃两顿的……，真晕。这几天看样子还得吃一个火锅了。

不过这次火锅比较好的结果就是， cc 对这个的味道感觉还行，当然她一如既往吃的是鸡肉，这样的话，就不用老跑去呷哺吃了，在家解决。 :)
]]></content>
    
    <summary type="html">
    
      上个周末过得比较腐败，没有了其它安排，周六下午睡到了9点，起来玩了会游戏，又继续睡，睡的头都晕了……。周日cc的同学过来，考虑到最简单的吃法，就是吃火锅了。

去超市没有买到小肥羊的锅底，用了一个什么重庆的，挺辣的。想起来上次去双安吃的那个重庆火锅了，吃了半天除了辣就没有别的味道
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="周末" scheme="http://wdicc.com/tags/%E5%91%A8%E6%9C%AB/"/>
    
      <category term="呷哺" scheme="http://wdicc.com/tags/%E5%91%B7%E5%93%BA/"/>
    
      <category term="火锅" scheme="http://wdicc.com/tags/%E7%81%AB%E9%94%85/"/>
    
  </entry>
  
  <entry>
    <title>给blog的后台发文章添了一点功能</title>
    <link href="http://wdicc.com/add-some-feature-to-blog/"/>
    <id>http://wdicc.com/add-some-feature-to-blog/</id>
    <published>2006-11-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[给blog加了一个插件 <a href="http://trac.labnotes.org/cgi-bin/trac.cgi/wiki/WPPlugin/AdvancedWysiwyg" target="_blank" rel="external">Advanced WYSIWYG Editor</a> ，可以打开wp使用的tinymce编辑器的一些功能。例如他网站上面列出来的那些：
<ul>
	<li>Format selection: paragraph, formatted, headers, etc.</li>
	<li>Underline.</li>
	<li>Full justification.</li>
	<li>Anchor.</li>
	<li>Horizontal line.</li>
	<li>Copy, cut, paste.</li>
	<li>Insert table.</li>
	<li>Subscript, superscript.</li>
	<li>Foreground color, background color.</li>
	<li>Character map.</li>
	<li>Full screen editing.</li>
</ul>
<a id="more"></a>吸引我的功能是那个insert table。按照其它插件的安装方法，激活之后，再看发表文章的编辑器，发现确实多了很多按钮。不过多了太多了，工具栏一行都显示不下啦，怎么分行呢？wp还是很牛的，好像就已经预料到这种问题了，直接修改<font color="#ff00ff">advanced-wysiwyg.php</font>就可以了。例如我的：
<pre class="prettyprint lang-php">
return array(
"formatselect", "bold", "italic", "underline", "strikethrough", "separator",
"bullist", "numlist", "indent", "outdent", "separator",
"justifyleft", "justifycenter", "justifyright", "justifyfull","separator",
"link", "unlink", "anchor", "image", "hr");
}function extended_editor_mce_buttons_2($buttons) {
// Add buttons on the second toolbar line
//    return $buttons;
return array(
"cut", "copy", "paste", "undo", "redo", "separator",
"sub", "sup", "forecolor", "backcolor", "charmap", "separator",
"code", "fullscreen", "wordpress", "wphelp","separator","tablecontrols");
}</pre>
这样就分两行了，当然还可以编辑<font color="#ff00ff">extended_editor_mce_buttons_3</font>函数让他出来第三行。

好了，看着是不是挺爽的？可是发现我要的insert table功能怎么没出来？再仔细看作者的网页，有个提示”需要去tinymce的网站上面下载关于table等的plugin，默认的wp 2.0版本没有包括这些“。这样去下载了，将其中的plugin里面的东西放出来，找到table和fullscreen文件夹，放到服务器的tinymce的plugin下面，再访问一下发帖页面，是不是发现工具栏都变巨丑的按钮了？呵呵。

用Firefox的话，打开错误控制台，可以看到刚加的tinymce的plugin出错了。提示是：

tinyMCE.addPlugin is not a function

找到plugin里面的js文件看看，和其它比较一下，确实是多了这么一个函数调用。删掉之后工具栏能出来了，可是还是没有这个按钮，是啥问题呢？上作者<a href="http://blog.labnotes.org" target="_blank" rel="external">blog</a>看了一下，原来是tinymce的版本太高了。
<blockquote>eduo Says: March 19th, 2006 at 5:08 pm

To all having issues with the rich editor disappearing:
Yes, the version of TinyMCE changed. I’ve been checking the versions and it’s possible to download the latest one that works with this plug-in (which in reality just extends the stock WP-included TinyMCE, itself a very good thing) from the “older versions” page of the TinyMCE SF site included as part of the 2.02 files:
<a href="http://sourceforge.net/project/showfiles.php?group_id=103281&package_id=11143" target="_blank" rel="external">http://sourceforge.net/project/showfiles.php?group_id=103281&package_id=11143</a>0

The page for direct download is: <a href="http://prdownloads.sourceforge.net/tinymce/tinymce_1_45.tgz?download" target="_blank" rel="external">http://prdownloads.sourceforge.net/tinymce/tinymce_1_45.tgz?download</a>

Using the “table” and “fullscreen” from this file is all that’s needed. Other plug-ins from this same package should work as well.</blockquote>
除了使用上面的版本，还可以使用一个<a href="http://prdownloads.sourceforge.net/tinymce/tinymce_2_0RC4.tgz" target="_blank" rel="external">2.0 RC4</a>这个版本。
<blockquote>PS: The table controls and full screen editing rely on additional TinyMCE plugins. So if you want these two features as well, you’ll have to download TinyMCE plugins and install those separately. For WordPress 2.0.4 users, try the TinyMCE 2.0 RC4 plugins. Or check the comments to find out what works for other people.</blockquote>
这个版本的table功能更加高级一点，推荐使用这个。
]]></content>
    
    <summary type="html">
    
      给blog加了一个插件 &lt;a href=&quot;http://trac.labnotes.org/cgi-bin/trac.cgi/wiki/WPPlugin/AdvancedWysiwyg&quot;&gt;Advanced WYSIWYG Editor&lt;/a&gt; ，可以打开wp使用的tinymce编辑器的一些功能。例如他网站上面列出来的那些：
&lt;ul&gt;
	&lt;li&gt;Format selection: paragraph, formatted, headers, etc.&lt;/li&gt;
	&lt;li&gt;Underline.&lt;/li&gt;
	&lt;li&gt;Full justification.&lt;/li&gt;
	&lt;li&gt;Anchor.&lt;/li&gt;
	&lt;li&gt;Horizontal line.&lt;/li&gt;
	&lt;li&gt;Copy, cut, paste.&lt;/li&gt;
	&lt;li&gt;Insert table.&lt;/li&gt;
	&lt;li&gt;Subscript, superscript.&lt;/li&gt;
	&lt;li&gt;Foreground color, background color.&lt;/li&gt;
	&lt;li&gt;Character map.&lt;/li&gt;
	&lt;li&gt;Full screen editing.&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>Filesystems (ext3, reiser, xfs, jfs) comparison on Debian Etch（翻译）</title>
    <link href="http://wdicc.com/filesystems-comparison/"/>
    <id>http://wdicc.com/filesystems-comparison/</id>
    <published>2006-11-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[粗略翻译了一下 <a target="_blank" href="http://www.debian-administration.org/articles/388">Filesystems (ext3, reiser, xfs, jfs) comparison on Debian Etch</a> 这篇文章。

有很多的关于linux文件系统比较的文章，但是他们大部分都是anecdotal的，都是基于人为的一些任务或者都是在老的内核下面完成的。这篇评论是基于11项真实存在于一台硬件比较老（奔腾 II/III ，EIDE硬盘）的文件服务器上的任务。

<strong>为什么会有另外一个测试？</strong>

我发现两个quantitative和reproductible（可重现的？）的测试，在使用2.6.x内核的时候（参见参考文章）。Benoit（2003)在一台有512M内存的奔腾II 500的服务器上使用大文件（超过1GB）进行了12次测试。这些测试非常有用，但是结果已经太老了（2.6.0内核），并且他们都是应用于操作专有大文件的（比如多媒体、科学、数据库）。

Piszcz（2006)进行了21项测试，在一台有768M内存，400G EIDE133硬盘的奔腾III 500的机器上模拟了一个变化的文件操作。到目前为止，这些测试似乎是在2.6内核上面最全面的了。然而，因为很多测试都是“人为”的（例如，复制和删除10000空的目录，创建10000文件，递归的分割文件），所以这些或许很难为现实世界带来什么结论。

所以，这个测试的目标就是完成Piszcz（2006)的一些结论，通过在小型商务文件系统服务器（参考测试描述）上面的实际操作。

<a id="more"></a><strong>测试设置</strong>

* 处理器 : Intel Celeron 533
* 内存 : 512MB RAM PC100
* 主板 : ASUS P2B
* 硬盘 : WD Caviar SE 160GB (EIDE 100, 7200 RPM, 8MB Cache)
* 控制器 : ATA/133 PCI (Silicon Image)

* 操作系统 Debian Etch (kernel 2.6.15), distribution upgraded on April 18, 2006
* 其它不需要的服务都关掉了 (cron,ssh,saMBa,etc.)

* 文件系统 Ext3 (e2fsprogs 1.38)
* ReiserFS (reiserfsprogs 1.3.6.19)
* JFS (jfsutils 1.1.8)
* XFS (xfsprogs 2.7.14)

<strong>对于选择的测试的描述</strong>

<strong><em>操作大文件（ISO文件，700M）</em></strong>
* 将ISO文件从第二块硬盘复制到测试硬盘上面。
* 在测试硬盘上面重新复制ISO文件。
* 删除两个复制的ISO。

<strong><em>操作一个目录树（7500个文件，900个目录，1.9G）</em></strong>
* 将目录树从第二块硬盘复制到测试硬盘上面。
* 在测试硬盘上面重新复制目录树。
* 删除两个复制的目录树。

<strong><em> 在目录树中操作</em></strong>
* 用递归方式列出目录树中的所有内容，并且保存到测试硬盘上面。
* 在目录树中查找匹配指定通配符的文件。

<em><strong>关于文件系统的操作</strong></em>
* 创建文件系统(mkfs)(所有文件系统都使用默认设置创建)。
* 挂载文件系统。
* 卸载文件系统。

11项测试（从创建文件系统到卸载文件系统）的顺序是按照一个Bash脚本来运行的，总共运行三次（会报告平均时间）。每个序列大概需要7分钟。完成测试的时间，cpu占用百分比等都是通过GNU time utility（1.7版本）来计算的。

<strong>测试结果</strong>

<strong><em>分区容量</em></strong>
初始的（在创建文件系统之后）和剩余的（在删除所有文件之后）分区容量是使用可使用的blocks除以整个分区的blocks计算出来的。EXT3的初始分区容量最差，其它的都几乎可以使用最大的分区容量。有趣的是，Ext3和ReiserFS剩余分区容量和初始分区容量是一样的，JFS、XFS损失了0.02%的分区容量，(建议这些文件系统可以动态增长，但是不要在删除文件之后完全恢复他们的初始状态（和大小）。)
<table width="234" border="0" style="height: 118px">
<tr>
<td>&nbsp;</td>
<td>初始分区容量</td>
<td>损失</td>
</tr>
<tr>
<td>Ext3</td>
<td>92.77%</td>
<td>0</td>
</tr>
<tr>
<td>ReiserFS</td>
<td>99.83%</td>
<td>0</td>
</tr>
<tr>
<td>JFS</td>
<td>99.82%</td>
<td>0.02%</td>
</tr>
<tr>
<td>XFS</td>
<td><font color="#990000">99.95%</font></td>
<td>0.02%</td>
</tr>
</table>
结论：想要使用分区的最大容量，请选择ReiserFS、JFS、XFS。

<strong><em>文件系统的创建，挂载和卸载</em></strong>

为20G的分区创建文件系统。
<table width="553" border="0" style="height: 122px">
<tr>
<td>&nbsp;</td>
<td>创建时间</td>
<td>挂载时间</td>
<td>卸载时间</td>
<td>创建时CPU占用</td>
<td>挂载时CPU占用</td>
<td>卸载时CPU占用</td>
</tr>
<tr>
<td>Ext3</td>
<td><font color="#990000">14.7s</font></td>
<td>0.2s</td>
<td>0.2s</td>
<td>|</td>
<td>6-9%</td>
<td>37%</td>
</tr>
<tr>
<td>ReiserFS</td>
<td>2.2s</td>
<td><font color="#990000">2.3s</font></td>
<td>0.4s</td>
<td>59%(Lo)</td>
<td>|</td>
<td>14%</td>
</tr>
<tr>
<td>JFS</td>
<td>1.3s</td>
<td>0.2s</td>
<td>0.2s</td>
<td>74%(Hi)</td>
<td>|</td>
<td>27%</td>
</tr>
<tr>
<td>XFS</td>
<td>0.7s</td>
<td>0.5s</td>
<td><font color="#990000">0.5s</font></td>
<td>|</td>
<td>|</td>
<td>45%</td>
</tr>
</table>
结论：为了快速创建、挂载和卸载文件系统，请使用JFS或者XFS。

<strong><em>操作大文件（ISO文件，700M）</em></strong>
<table width="599" border="0" style="height: 118px">
<tr>
<td></td>
<td>第一次复制</td>
<td>第二次复制</td>
<td>删除文件</td>
<td>第一次复制CPU占用</td>
<td>第二次复制CPU占用</td>
<td>删除时CPU占用</td>
<td>minor page faults</td>
</tr>
<tr>
<td>Ext3</td>
<td>38.2s</td>
<td>37.3s</td>
<td>2.5s</td>
<td>46-51%</td>
<td>38-50%</td>
<td>10%</td>
<td>|</td>
</tr>
<tr>
<td>ReiserFS</td>
<td>41.8s</td>
<td>43.9s</td>
<td>1.5s</td>
<td>|</td>
<td>|</td>
<td>49%</td>
<td>661</td>
</tr>
<tr>
<td>JFS</td>
<td>35.1s</td>
<td>39.4s</td>
<td>0.02s</td>
<td>|</td>
<td>|</td>
<td>10%</td>
<td>|</td>
</tr>
<tr>
<td>XFS</td>
<td>34.8s</td>
<td>33.1s</td>
<td>0.02s</td>
<td>|</td>
<td>|</td>
<td>10%</td>
<td>600</td>
</tr>
</table>
结论：为了快速操作大文件，请使用JFS或者XFS。如果你需要最小的cpu占用，请使用JFS。

<strong><em>操作目录树（7500个文件，900个目录，1.9G）</em></strong>
<table width="607" border="0" style="height: 124px">
<tr>
<td></td>
<td>第一次复制</td>
<td>第二次复制</td>
<td>删除</td>
<td>第一次复制CPU占用</td>
<td>第二次复制CPU占用</td>
<td>删除时CPU占用</td>
<td>minor page faults</td>
</tr>
<tr>
<td>Ext3</td>
<td>158.3s</td>
<td>120s</td>
<td>22s</td>
<td>27-36%</td>
<td>|</td>
<td>15%</td>
<td>14000-1490</td>
</tr>
<tr>
<td>ReiserFS</td>
<td>172.1s</td>
<td>136.9s</td>
<td>8.2s</td>
<td>|</td>
<td>45%(Hi)</td>
<td>86%</td>
<td>5843</td>
</tr>
<tr>
<td>JFS</td>
<td>180.1s</td>
<td>151s</td>
<td>12.5s</td>
<td>|</td>
<td>29%(Lo)</td>
<td>15%</td>
<td>14000-1490</td>
</tr>
<tr>
<td>XFS</td>
<td>166.1s</td>
<td>135.2s</td>
<td>10.5s</td>
<td>|</td>
<td>|</td>
<td>65%</td>
<td>14000-1490</td>
</tr>
</table>
结论：为了快速操作大文件树，请选择Ext3或者XFS。其它作者的测试中显示，ReiserFS对于大量的小文件有优势。然而结果显示，操作包含上千的大小变化的文件（10K到5M）时建议使用Ext3或者XFS，他们或许更适合实际使用。JFS有最下的CPU占用，但是需要指出的是在操作大量文件的时候他也有值得注意的较高的延迟。

<strong><em>在之前的目录树中列表目录和文件查找</em></strong>
<table width="564" border="0" style="height: 107px">
<tr>
<td></td>
<td>列表目录</td>
<td>文件查找</td>
<td>列表目录CPU占用</td>
<td>文件查找CPU占用</td>
<td>minor page faults</td>
</tr>
<tr>
<td>Ext3</td>
<td>2.5s</td>
<td>4.6s</td>
<td>35%</td>
<td>6%</td>
<td>704-712</td>
</tr>
<tr>
<td>ReiserFS</td>
<td>1.4s</td>
<td>0.8s</td>
<td>71%</td>
<td>36%</td>
<td>1991</td>
</tr>
<tr>
<td>JFS</td>
<td>3.1s</td>
<td>5.0s</td>
<td>35%</td>
<td>6%</td>
<td>704-712</td>
</tr>
<tr>
<td>XFS</td>
<td>1.8s</td>
<td>2.8s</td>
<td>70%</td>
<td>10%</td>
<td>704-712</td>
</tr>
</table>
结论：根据这些测试，ReiserFS和XFS操作速度快，但是有比较多的CPU占用，Ext3和JFS操作速度慢，但是有较少的CPU占用。XFS似乎是最好的选择，他有相对比较快的查找速度，中等的cpu占用，以及可以接受的page faults比率。

<strong>综合结论</strong>

这些结果重现了Piszcz(2006)关于Ext3是最少的可用分区容量的系统，ReiserFS是最长挂载时间的系统，Ext3创建时间最长的系统。此外，和这份报告中的内容一样，都发现JFS是CPU占用最少的系统。最后，这份报告是第一个显示ReiserFS在通常的文件操作中有较高的page faults。

认识到各个文件系统的优缺点之后，每个 分区/磁盘 只可以安装一个文件系统。基于上面的测试，XFS似乎是最适合于家用文件服务器或者小型商务服务器使用：

* 他可以最大限度的使用你的硬盘。
* 他是创建、挂载、卸载速度最快的文件系统。
* 他是操作大文件（>500M）速度最快的文件系统。
* 他对于大量的中小文件和目录的操作是第二快的。
* 在大的目录树列表和查找操作中，他在操作时间和CPU占用间找到了很好的平衡。
* 他不是占用资源最少的文件系统，但是他在比较老的硬件上面的资源占用还可以接受。

Piszcz(2006)没有明确的推荐XFS，他总结说“个人认为，我会因为性能和可靠性而选择XFS”。我支持他的结论。
]]></content>
    
    <summary type="html">
    
      粗略翻译了一下 &lt;a target=&quot;_blank&quot; href=&quot;http://www.debian-administration.org/articles/388&quot;&gt;Filesystems (ext3, reiser, xfs, jfs) comparison on Debian Etch&lt;/a&gt; 这篇文章。

有很多的关于linux文件系统比较的文章，但是他们大部分都是anecdotal的，都是基于人为的一些任务或者都是在老的内核下面完成的。这篇评论是基于11项真实存在于一台硬件比较老（奔腾 II/III ，EIDE硬盘）的文件服务器上的任务。

&lt;strong&gt;为什么会有另外一个测试？&lt;/strong&gt;

我发现两个quantitative和reproductible（可重现的？）的测试，在使用2.6.x内核的时候（参见参考文章）。Benoit（2003)在一台有512M内存的奔腾II 500的服务器上使用大文件（超过1GB）进行了12次测试。这些测试非常有用，但是结果已经太老了（2.6.0内核），并且他们都是应用于操作专有大文件的（比如多媒体、科学、数据库）。

Piszcz（2006)进行了21项测试，在一台有768M内存，400G EIDE133硬盘的奔腾III 500的机器上模拟了一个变化的文件操作。到目前为止，这些测试似乎是在2.6内核上面最全面的了。然而，因为很多测试都是“人为”的（例如，复制和删除10000空的目录，创建10000文件，递归的分割文件），所以这些或许很难为现实世界带来什么结论。

所以，这个测试的目标就是完成Piszcz（2006)的一些结论，通过在小型商务文件系统服务器（参考测试描述）上面的实际操作。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>申请了google adsense</title>
    <link href="http://wdicc.com/google-adsense/"/>
    <id>http://wdicc.com/google-adsense/</id>
    <published>2006-11-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[以前好像申请过，不过没有通过。这次试试看又申请了一次，通过了，呵呵。尝试在网页上面添加了一下东东，不知道管用不管用，试试看了。google的那个公益广告其实有点意思，“你知道xxx吗？”我觉得挺吸引人的，我也选择了没关键字的时候显示公益广告了，可是看了半天好像也没显示公益广告。

前几天maillist看到有人说通过adsense一个月可以收入450$，这个吓了一跳，真不少呢。不过我只希望他能给我把域名的钱赚回来就好了，如果还有富余，就去买块国外的空间，呵呵。

adsense让一些小网站有了希望，至少，开一个网站不赔钱，或许应该没问题吧。现在域名加一小块空间，好像也不是很贵，所以指望adsense还是可以的。

adsense同时也鼓励这些小网站能作出内容来，有内容，才会有人来访问，才有可能赚点钱。其实这样挺好的。
]]></content>
    
    <summary type="html">
    
      以前好像申请过，不过没有通过。这次试试看又申请了一次，通过了，呵呵。尝试在网页上面添加了一下东东，不知道管用不管用，试试看了。google的那个公益广告其实有点意思，“你知道xxx吗？”我觉得挺吸引人的，我也选择了没关键字的时候显示公益广告了，可是看了半天好像也没显示公益广告。

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="adsense" scheme="http://wdicc.com/tags/adsense/"/>
    
  </entry>
  
  <entry>
    <title>Linux下面动态调整cpu频率</title>
    <link href="http://wdicc.com/cpufreq-turning/"/>
    <id>http://wdicc.com/cpufreq-turning/</id>
    <published>2006-11-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[笔记本的cpu的频率是可调整的，一般用电池的时候，就会降频使用，延长电池使用时间。上周末忘记把笔记本的电源带回来了，用电池在linux下工作，发现降频真是个好东东，用了一个小时，电池显示还能用3个多小时，并且cpu温度从20多度才涨到40来度。为了让本本更凉一点，就看了看cpufreqd的工作原理。

cpufreqd采用的是打分制，每条rule的总分是100分，比如有个rule里面有4条规则，如果满足了其中3条，那么总分就是75分，以此类推 。使用分数最多的规则，如果两条规则的分数相同，使用当前正在使用的规则，或者使用位置靠前的规则。下面来说说看这个东西怎么玩。

比如按照我的工作情况，我有下面的需求：
1 如果使用了mplayer,gcc等，那么用最高频率。
2 如果使用了firefox，那么用中间频率。
3 如果没有满足上面两条，那么用最低频率。

这样就相当于设置了三个运行级别，你可以按照自己的需求来定义运行的程序。

从上面的需求可以看出来，我们设置1这种情况下分数为100，那么没有mplayer的时候，1的分数应该是50。这样其他的两个要至少在50以上才行。而且3还得是在2匹配和不匹配的分数的中间。我的设置如下：

[Rule]
name=firefox
ac=on
programs=firefox-bin
programs=sss
acpi_temperature=0-60
profile=Performance Low
[/Rule]

[Rule]
name=Movie Watcher
ac=on
programs=xine,mplayer,gmplayer,wdmplayer,gcc
profile=Performance High
[/Rule]

[Rule]
name=AC Rule
ac=on                    # (on/off)
programs=aaa
acpi_temperature=0-60
profile=On Demand Low
[/Rule]

这样，基本可以实现我上面的需求。条目是可以多次出现的，所以比如可以多加几条programs=gcc，让gcc在使用的时候和不在使用的时 候得分差很多，这样方便安排其他的情况。

windows下面可没这么灵活的设置亚，呵呵。
]]></content>
    
    <summary type="html">
    
      笔记本的cpu的频率是可调整的，一般用电池的时候，就会降频使用，延长电池使用时间。上周末忘记把笔记本的电源带回来了，用电池在linux下工作，发现降频真是个好东东，用了一个小时，电池显示还能用3个多小时，并且cpu温度从20多度才涨到40来度。为了让本本更凉一点，就看了看cpuf
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="cpufreqd" scheme="http://wdicc.com/tags/cpufreqd/"/>
    
      <category term="降频" scheme="http://wdicc.com/tags/%E9%99%8D%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>悠闲的周末</title>
    <link href="http://wdicc.com/nice-weekend/"/>
    <id>http://wdicc.com/nice-weekend/</id>
    <published>2006-11-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[自从买了鞋柜和茶几之后，要买的大件物品总算是买完了。所以，上个周末就难得的有了自己的空闲时间。周六早上去超市买了一些东西，回来和物业商讨了橱柜的事情，就等着厂家把鞋柜送过来了。送来之后发现和样品不符，这下可找着机会让我把之前的一口恶气出一下了。之后厂家把鞋柜拉走了，晚上给我们打电话，又痛骂了一次那个销售，说好2周内给我从新做一个送过来。

加上茶几之后，屋子里面就差不多就这样了，拍了一些相片放在了<a target="_blank" href="http://wdicc.yupoo.com/">网上</a>。

本来之前说一些同学周日过来一起吃饭， 可是后来都没有过来。不过来拉倒，和老婆两个人去吃了好吃的，买了羽毛球，回来打了半个多小时羽毛球，感觉还真不错，呵呵。晚上又看了会电视。看了两天电视就发现，实在没有好看的，停留时间最长的就是苏版《倚天》和那个《男才女貌》。电视实在是越做越差。

这个周末怎么安排呢？ 嗯。
]]></content>
    
    <summary type="html">
    
      自从买了鞋柜和茶几之后，要买的大件物品总算是买完了。所以，上个周末就难得的有了自己的空闲时间。周六早上去超市买了一些东西，回来和物业商讨了橱柜的事情，就等着厂家把鞋柜送过来了。送来之后发现和样品不符，这下可找着机会让我把之前的一口恶气出一下了。之后厂家把鞋柜拉走了，晚上给我们打电
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="周末" scheme="http://wdicc.com/tags/%E5%91%A8%E6%9C%AB/"/>
    
  </entry>
  
  <entry>
    <title>昨天操作了好多次oracle的备份和恢复</title>
    <link href="http://wdicc.com/oracle-backup-and-recover/"/>
    <id>http://wdicc.com/oracle-backup-and-recover/</id>
    <published>2006-11-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[oracle的数据库文件一旦建立就会一直占用磁盘空间，表空间用尽的时候，就需要为表空间添加数据文件。可是，从表里面删除数据的时候，表空间却不会释放，所以磁盘空间占用只会越来越大。前段时间一个数据库的表空间不足了，放数据的分区也磁盘空间不足了，必须得想办法释放一下空间才行，操作说起来其实也简单，就是倒腾。

操作值钱咱先给现在的表空间做一个备份。然后新建一个用户，给这个用户建立表空间，按照备份的大小添加数据文件。然后将备份导入新的表空间，切换应用使用的用户。删除之前用户的表空间，删除数据文件。然后给他重新建立表空间数据文件，切换回来。然后将新的用户里面的数据导出，导入到旧的用户下面。这样就操作完了。

导出导入的时候可以按照exp和imp帮助里面的那个例子，row=n表示不倒数据，只导结构。这样导出似乎也会有些问题，什么seq不会倒出来，需要重新弄，不太明白这个。
]]></content>
    
    <summary type="html">
    
      oracle的数据库文件一旦建立就会一直占用磁盘空间，表空间用尽的时候，就需要为表空间添加数据文件。可是，从表里面删除数据的时候，表空间却不会释放，所以磁盘空间占用只会越来越大。前段时间一个数据库的表空间不足了，放数据的分区也磁盘空间不足了，必须得想办法释放一下空间才行，操作说起
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="恢复" scheme="http://wdicc.com/tags/%E6%81%A2%E5%A4%8D/"/>
    
      <category term="备份" scheme="http://wdicc.com/tags/%E5%A4%87%E4%BB%BD/"/>
    
  </entry>
  
  <entry>
    <title>Linux下面的网上邻居</title>
    <link href="http://wdicc.com/network-neiborhood-in-linux/"/>
    <id>http://wdicc.com/network-neiborhood-in-linux/</id>
    <published>2006-11-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[linux下面有个samba可以mount网上邻居的共享到本地，然后进行访问什么的。可是这样做就需要你事先知道有谁共享了什么，或者需要自己通过一 些命令来查看有谁共享了什么。那么，有没有更加弱智一点的操作方法呢？就像windows里面，有个文件夹，打开之后里面就是网上邻居里面的一些电脑呢？ 有的。

首先安装smbnetfs这个包，同时他会关联fuse这个包，安装fuse之后，会提示你需要将fuse模块加入内核。
$sudo modprobe fuse

自己修改rc.conf，把他加上，每次启动会自己加载。

然后呢，启动smbnetfs。
$sudo /etc/rc.d/smbnetfs start

他会给你把网上邻居mount到/mnt/smbnet，去那里看看，是不是网上邻居都出来了？
如果进某台电脑进不去，我也不知道怎么解决，也不知道是什么问题不行就试试看fusesmb吧。

smbnetfs的配置文件都在/etc/smbnet/.smb下面，smb.conf可以直接cp /etc/samba/smb.conf，smbnetfs.conf是他的配置文件，里面的内容根据自己需要修改。

smbnetfs.auth,smbnetfs.host这俩个文件里面可能涉及到密码，所以设置合适的权限。

auth文件的格式类似如下：
auth "xfs" "SIC.COM/wd" "wdddd"
auth "FS" "wd" "wwwwd"

调试好了之后，你就可以把smbnetfs加到rc.conf的启动列表里面了，这样每次开机之后，直接访问/mnt/smbnet就是网上邻居了。

除了smbnetfs之外，还有fusesmb也可以实现类似功能，不过效果都差不多。fusesmb源里面没有，aur有，需要自己编译。

ps:经过一段时间的使用比较之后，发现fusesmb比smbnetfs效果好。smbnetfs经常出现电脑打不开的情况，还有更新不及时的问题。fusesmb就好多了。fusesmb的配置文件在~/.smb/下面，格式可以通过man来查看，配置起来感觉比smbnetfs简单。 需要更新网上邻居列表的时候，执行fusesmb.cache命令就可以。
]]></content>
    
    <summary type="html">
    
      linux下面有个samba可以mount网上邻居的共享到本地，然后进行访问什么的。可是这样做就需要你事先知道有谁共享了什么，或者需要自己通过一 些命令来查看有谁共享了什么。那么，有没有更加弱智一点的操作方法呢？就像windows里面，有个文件夹，打开之后里面就是网上邻居里面的一
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
      <category term="fuse" scheme="http://wdicc.com/tags/fuse/"/>
    
      <category term="fusesmb" scheme="http://wdicc.com/tags/fusesmb/"/>
    
      <category term="smbnetfs" scheme="http://wdicc.com/tags/smbnetfs/"/>
    
      <category term="网上邻居" scheme="http://wdicc.com/tags/%E7%BD%91%E4%B8%8A%E9%82%BB%E5%B1%85/"/>
    
  </entry>
  
  <entry>
    <title>ip_conntrack: table full</title>
    <link href="http://wdicc.com/ip_conntrack-table-full/"/>
    <id>http://wdicc.com/ip_conntrack-table-full/</id>
    <published>2006-11-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天值班的时候发现网络不稳定，ping sina 50%以上的丢包率，ping 网关也差不多，所以服务器都开始报警了。一遍骂这个
]]></content>
    
    <summary type="html">
    
      今天值班的时候发现网络不稳定，ping sina 50%以上的丢包率，ping 网关也差不多，所以服务器都开始报警了。一遍骂这个

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="cacti" scheme="http://wdicc.com/tags/cacti/"/>
    
      <category term="ip_conntrack" scheme="http://wdicc.com/tags/ip-conntrack/"/>
    
  </entry>
  
  <entry>
    <title>还是cacti的问题</title>
    <link href="http://wdicc.com/problem-in-cacti/"/>
    <id>http://wdicc.com/problem-in-cacti/</id>
    <published>2006-11-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前面那个帖子似乎没有解决问题，查看了一下log，有些异常：
cactid ERROR: SNMP timeout detected [500 milliseconds]
搜了一下，找到一个<a target="_blank" href="http://forums.cacti.net/about5487.html">文章</a>，似乎说升级就ok了，可是那个日期是2005年的，我的应该没那么老吧。不过还是上cacti的<a target="_blank" href="http://cacti.net/">主页</a>看了看，看到cacti和cactid都升级了，就打算升级一下看看。debian上面怎么玩呢？cacti还好说，之前升级过一次，不需要编译，直接按照<a target="_blank" href="http://www.cacti.net/downloads/docs/html/upgrade.html">文档</a>升级就好，cactid可得编译，我也不打算直接覆盖安装（其实真这么装没准还简单了），还是做一个deb包吧，一直没有体验过deb如何做，刚好机会来了。

搜了半天，找到一个<a target="_blank" href="http://debian.linuxsir.org/doc/inthedebianway/debian_build_package.html">文档</a>，按照里面的步骤，下载了diff、dsc等文件， 解压之后修改control文件和一些depands，然后编译打包，好像没什么问题，试着装了一下，装上了，运行了一下，好像也没问题，呵呵，就这么搞定了。

之后按照同样的步骤搞cacti，结果安装打包的文件后，出问题了，呵呵。不过还好，东弄西弄，总算还是弄好了。按照cacti的文档手动升级了一下，也没遇到问题。不过plugin-arch也需要同时升级一下。还有poller.php和cmd.php都需要加执行权限。

cactid i这个版本似乎执行的时候输出没有g那么多了，很好，要不然log会搞的很大。cmd.php的输出倒是没多少内容，不过没有cactid的多线程爽亚，呵呵。执行cactid之后，会发现还有些问题:
Host[6] DS[46] WARNING: Result from SNMP not valid. Partial Result: ...

搜了一下，找到一个<a href="http://forums.cacti.net/post-63188.html" target="_blank" rel="external">文章</a>， 里面说到了问题的所在。我这里是因为一些有问题的data souce导致，比如这些本来就获取不到数据、或者之前的设备比如网卡现在没有了等等，都会导致cactid获取不到需要的数据，就会提示那个错误。按照里面提示的DS[46]，在http://your_ip/cacti/data_sources.php?action=ds_edit&id=num这个链接的num那里直接输入数字就能知道是哪个ds出问题了，删掉或者更新就ok了。
]]></content>
    
    <summary type="html">
    
      前面那个帖子似乎没有解决问题，查看了一下log，有些异常：
cactid ERROR: SNMP timeout detected [500 milliseconds]
搜了一下，找到一个&lt;a target=&quot;_blank&quot; href=&quot;http://forums.cacti.n
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="cacti" scheme="http://wdicc.com/tags/cacti/"/>
    
      <category term="cactid" scheme="http://wdicc.com/tags/cactid/"/>
    
      <category term="upgrade" scheme="http://wdicc.com/tags/upgrade/"/>
    
  </entry>
  
  <entry>
    <title>mutt的两个问题以及解决办法</title>
    <link href="http://wdicc.com/2-problems-in-mutt/"/>
    <id>http://wdicc.com/2-problems-in-mutt/</id>
    <published>2006-10-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[mutt<a target="_blank" href="http://blog.wdicc.com/wordpress/2006/09/03/242/">用了一段时间</a>之后发现对方发过来的附件的名字都是乱码，多次之后就觉得比较郁闷，每次都得自己修改名字，还得猜文件类型，很郁闷。google了一下，发现了<a target="_blank" title="gnus/mutt 邮件乱码问题" href="http://learn.tsinghua.edu.cn:8080/2002315162/muttpatched.html">解决办法</a>，是因为mutt默认使用的是rfc2331来解码的，所以添加一个set rfc2047_parameters=yes就可以了，这样对方发过来的邮件就可以正常显示文件名称了。但是同时从那个网址得知，我发出去的附件，也是用rfc2331来编码的，这样到了对方那里，显然会乱码了。测试了一下，outlook里面提示有附件，可是打开是乱码，并且附件名称也不是实际的附件名称。foxmail里面不提示有附件，内容后面会显示几个乱码。

按照前面那个网址，找到了<a target="_blank" title="mutt的rfc2047补丁" href="http://www.emaillab.org/mutt/download1510.html.en">mutt的补丁</a>，尝试了半天，不能在muttng上面正常使用，没办法只好不用muttng用mutt了。打上补丁之后，设置了 set create_rfc2047_parameters=yes  发出去的邮件就正常了。在mutt的<a target="_blank" title="mutt patch list" href="http://wiki.mutt.org/index.cgi?PatchList">patch list</a>列表里面找到<a target="_blank" title="mutt的sidebar补丁" href="http://lunar-linux.org/index.php?page=mutt-sidebar">sidebar补丁</a>，给mutt打了sidebar的补丁，用起来也还行了。同时，也把我的mutt升级到了1.5.13，比源里面的都新了。呵呵。

此外，还有一个问题就是如何对应不同的账号使用不同的smtp server。 本来从网上找了一个文章说到了这个操作如何实现，我也照搬了，发现似乎可以实现这个功能。可是最近才发现，我完全错了，实际上用的总是msmtp里面设置的那个default smtp server，郁闷坏啦，给头以及同事发了好多邮件了，用的都是我的gmail邮箱。

现在我已经解决了这个问题，用的是send-hook，如下。
send-hook . 'my_hdr from:wd@aaa.com'
send-hook . 'set sendmail="/usr/bin/msmtp -a gmail"'
send-hook '~t .*@bbb\.com\.cn$' 'my_hdr from:stef@bbb.com.cn'
send-hook '~t .*@bbb\.com\.cn$' 'set sendmail="/usr/bin/msmtp -a bbb"'

这样，针对不同的mail，使用不同的sendmail程序。

发现mutt发送邮件的时候使用的是我的gmail邮箱的时候，我很郁闷，再加上发现他发送的附件在别人那里居然不认，让我就更郁闷了。立刻安装了thunderbird，并且设置好了他，打算以后就用他了。但是发现我已经习惯了mutt了，所以还是回头来给mutt打了补丁，做了修改，让他按照我的习惯来了。 用thunderbird后发现，很多事情不能按照我的意思来，很郁闷。
]]></content>
    
    <summary type="html">
    
      mutt&lt;a target=&quot;_blank&quot; href=&quot;http://blog.wdicc.com/wordpress/2006/09/03/242/&quot;&gt;用了一段时间&lt;/a&gt;之后发现对方发过来的附件的名字都是乱码，多次之后就觉得比较郁闷，每次都得自己修改名字，还得猜文件类型，很
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="乱码" scheme="http://wdicc.com/tags/%E4%B9%B1%E7%A0%81/"/>
    
      <category term="msmtp" scheme="http://wdicc.com/tags/msmtp/"/>
    
      <category term="mutt" scheme="http://wdicc.com/tags/mutt/"/>
    
      <category term="gmail" scheme="http://wdicc.com/tags/gmail/"/>
    
      <category term="thunderbird" scheme="http://wdicc.com/tags/thunderbird/"/>
    
  </entry>
  
  <entry>
    <title>这周末让人高兴的两件事情</title>
    <link href="http://wdicc.com/happy-weekend/"/>
    <id>http://wdicc.com/happy-weekend/</id>
    <published>2006-10-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一就是有线弄好了。之前一直不清楚，昨天朝阳电视台的过来给看了看，拿他们那个仪器测了一下，结果发现经过我那个线之后，信号衰减的很厉害。然后用他们自己带的线测试了一下，发现原来不清楚的台变清楚了。这样，所有的问题都出在这根线上面了。他们那里没有线，只能自己去买。他们据说免费给了开发商好多线，结果物业20块钱一条，都给卖完了。我这里刚好有很多线，找了一根看着还不错的，自己做了一根，有线立刻清楚了。现在60多个台，只有1,2个还有问题，不过不影响了。呵呵。

然后就是煤气通了。入住一个多月以来，最让人郁闷的就是煤气不通了。电磁炉用起来怪怪的，不习惯。昨天终于通煤气了，不过足足花了一天事件来做这个事情。通煤气是一条竖线上面的一起通的，不能只通一户两户，所以必须全部业主到场才能通。这样，时间都花在等这些业主上面去了。不过还好，通了，不用今天再等一天了。楼下看到通知说别的楼今天还得继续等，因为昨天人没来齐。昨天晚上用煤气热的饭，感觉舒服多了，看着淡蓝色的火焰，感觉好爽。呵呵。

今天早上还出去刷了一圈，技术严重下降。出门有个斜坡都不敢走了，真丢人。以后要多刷刷才行。
]]></content>
    
    <summary type="html">
    
      一就是有线弄好了。之前一直不清楚，昨天朝阳电视台的过来给看了看，拿他们那个仪器测了一下，结果发现经过我那个线之后，信号衰减的很厉害。然后用他们自己带的线测试了一下，发现原来不清楚的台变清楚了。这样，所有的问题都出在这根线上面了。他们那里没有线，只能自己去买。他们据说免费给了开发商
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="周末" scheme="http://wdicc.com/tags/%E5%91%A8%E6%9C%AB/"/>
    
  </entry>
  
  <entry>
    <title>深夜骑车</title>
    <link href="http://wdicc.com/riding-in-deep-night/"/>
    <id>http://wdicc.com/riding-in-deep-night/</id>
    <published>2006-10-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[昨天骑车回去的时候，还没到高碑店的时候，有条往北走的路，看着也挺宽的，就转上去了。结果最后走的是朝阳路回的家。朝阳路其实很不好走，开始还好，走了一段之后开始走辅路的时候，就发现很郁闷了。主路和辅路之间种了好多树，平时看到这些树肯定很高兴了，现在很少见绿色了（写到这里想起来了98年到北京的时候，北航东门外面的那些大树了，那会还没有北四环四呢）。晚上的时候，路灯是照在主路上面的，辅路只能透过大树才能有点光线，这样，就导致辅路上面全是树影，骑车的时候不敢骑快了。因为，报纸上面报道的掉到井里面的人也不是一个两个了，我可不想明天的报纸上面出现王某某掉井里了。。。所以呢，整个路程回家的速度就不是很快了。不过也很庆幸，路上没有遇到很怪异的路面，还算平整。

不过最后还是遇到险情了。都到了双桥了，路上有条沟，一颠，车把就转了一下。因为我之前把车把给改装了么，可能螺丝没有拧紧。不过幸好，当时的速度不是很快，因为刚好是一个路口。后来还后怕，要是前面在树影里面遇到这个情况，估计得摔一跤了。周末得好好弄弄这个车了。

一路上听的是103.9电台，我记得好像是交通台。不过很奇怪，晚上不是说交通，而是在说感情，很晕。听了不少老歌，呵呵。
]]></content>
    
    <summary type="html">
    
      昨天骑车回去的时候，还没到高碑店的时候，有条往北走的路，看着也挺宽的，就转上去了。结果最后走的是朝阳路回的家。朝阳路其实很不好走，开始还好，走了一段之后开始走辅路的时候，就发现很郁闷了。主路和辅路之间种了好多树，平时看到这些树肯定很高兴了，现在很少见绿色了（写到这里想起来了98年
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="骑车" scheme="http://wdicc.com/tags/%E9%AA%91%E8%BD%A6/"/>
    
  </entry>
  
  <entry>
    <title>想把自行车改造一下</title>
    <link href="http://wdicc.com/change-bike/"/>
    <id>http://wdicc.com/change-bike/</id>
    <published>2006-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天早上骑自行车到的四惠东，总共用时30分钟。昨天晚上下班之后，换了一个车座，花了10块钱，虽然也不怎么样，不过总比以前的爽了。本来想把车把提高一点，结果弄了半天没成功。后来我回去把车把翻转了一下，这样那个弯弯就到上面来了，这下子爽了，呵呵。不过就是车闸不好捏了。

今天上午去水母的自行车版问了一下怎么改装车闸，结果把我给封了，说是因为讨论黑车。 之后我才想起来，那个版的都是有钱人，都是买得起上 k的新车玩的人，自然鄙视我们这种骑黑车的了。但是之所以买黑车，还不是因为怕丢么？花100块钱买一个凑合骑骑就是了，犯不着花1k,2k的买一辆天天心惊胆战的。无所谓了，反正我从来也不去那个版。。

今天值班，晚上下班要11点了。到了四惠东估计快 12点了，骑回家估计12点多，呵呵，看速度了。等会等研究一条回家骑车最好走的路线。京通路的辅路人多车多，要是能走朝阳北路就好了。

眼看又要周末了，这周还有报告听，蛮爽的。
]]></content>
    
    <summary type="html">
    
      今天早上骑自行车到的四惠东，总共用时30分钟。昨天晚上下班之后，换了一个车座，花了10块钱，虽然也不怎么样，不过总比以前的爽了。本来想把车把提高一点，结果弄了半天没成功。后来我回去把车把翻转了一下，这样那个弯弯就到上面来了，这下子爽了，呵呵。不过就是车闸不好捏了。

今天上午去水
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="骑车" scheme="http://wdicc.com/tags/%E9%AA%91%E8%BD%A6/"/>
    
  </entry>
  
  <entry>
    <title>长途跋涉</title>
    <link href="http://wdicc.com/long-way/"/>
    <id>http://wdicc.com/long-way/</id>
    <published>2006-10-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[昨天早上6点多爬起来，赶往老大那里骑车。从他那里8点多又骑车去上班，一路快骑，好容易8:50到了公司，没有迟到。不过就这么半个小时，屁股已经开始疼了，想想晚上还要骑回去，就一阵郁闷。

下午下班，先骑车去菜市口打印了手机花费的发票，然后就开始一路往家走了。路线如下：

菜市口->西单->长安街往东->天安门->王府井->东二环->东三环->东四环->转北->朝阳北路往东->青年路口->东五环->常营路口->到家

到家的时候大概是8点半不到，如果除去菜市口开发票，那么应该是2个小时到家。其间推着车走了两次。幸好一路有手机收音机可听，要不铁定坚持不下来了。自行车的车座实在太硬了，不知道比赛的那种公路赛车的车座是不是也是这样的，反正我得换一个了，哪怕换一个及其老土的。

路上走了多少公里不知道了，不过路上还在想，如果我刷刷的话， 可能还会比骑车轻松一些吧。

<img align="middle" alt="回家路线" title="回家路线" src="http://static.flickr.com/115/278786104_e525d77539_o.png">
]]></content>
    
    <summary type="html">
    
      昨天早上6点多爬起来，赶往老大那里骑车。从他那里8点多又骑车去上班，一路快骑，好容易8:50到了公司，没有迟到。不过就这么半个小时，屁股已经开始疼了，想想晚上还要骑回去，就一阵郁闷。

下午下班，先骑车去菜市口打印了手机花费的发票，然后就开始一路往家走了。路线如下：

菜市口-&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="骑车" scheme="http://wdicc.com/tags/%E9%AA%91%E8%BD%A6/"/>
    
  </entry>
  
  <entry>
    <title>新房入住一个多月了</title>
    <link href="http://wdicc.com/1-mounth-in-new-house/"/>
    <id>http://wdicc.com/1-mounth-in-new-house/</id>
    <published>2006-10-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[转眼就一个多月了，这段时间房子慢慢的充实起来了，十一的时候买了床、床头柜、衣柜，这样大卧室基本上就满了。客厅的话，大学同学送了一个餐桌，加上之前买的一个沙发，十一又买了电视、电视柜，也差不多就那样了吧。等以后在买一个茶几和一个大一点的沙发就全了。这几天在弄灯，等灯都装好了，就差不多折腾完了吧。

等周一弄好灯，收拾完屋子，就可以拍一下照片啦。入住以来还没有拍相片呢。主要是刚开始来了空荡荡的，也没什么好拍的，呵呵。

入住都这么久了，煤气还没通，唉，真是没办法。物业有问题你和它急吧，可是人家不急，总说给你解决，可是实际上，能拖多久就多久。 是在没办法了。

现在大家一起玩的时候有两个地方玩了，xh那里或者我这里。玩晚了，也可以说上一句“大家就别走了，有地方睡觉”，哈哈。想起以前租房的时候，不是水泥地就是地板砖，地板砖算是最好的了，上面睡人也很郁闷的。现在好了，都是木地板，呵呵。岳母还给带过来好几个被子，来人也足够睡觉啦。所以了，欢迎大家来我家玩，呵呵。
]]></content>
    
    <summary type="html">
    
      转眼就一个多月了，这段时间房子慢慢的充实起来了，十一的时候买了床、床头柜、衣柜，这样大卧室基本上就满了。客厅的话，大学同学送了一个餐桌，加上之前买的一个沙发，十一又买了电视、电视柜，也差不多就那样了吧。等以后在买一个茶几和一个大一点的沙发就全了。这几天在弄灯，等灯都装好了，就差不
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="新房" scheme="http://wdicc.com/tags/%E6%96%B0%E6%88%BF/"/>
    
  </entry>
  
  <entry>
    <title>jfreechart 乱码之解决</title>
    <link href="http://wdicc.com/jfreechart-encoding/"/>
    <id>http://wdicc.com/jfreechart-encoding/</id>
    <published>2006-10-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[如果想要java程序显示中文，就会用到jre的fonts的设置，这个位于jdk/jre/lib下面，挺多font.properties文件，这些文件就是关键。

jdk会按照如下顺序查找相应的字体设置文件。
1 先看locale，例如如果设置了zh_CN，那么会查找文件名包含zh_CN的文件，如果找不到，就用font.properties文件。
2 然后看系统，如果是Redhat，那么找包含Redhat的，如果找不到就用，font.properties.zh_CN文件。
3 如果上面这些查找过之后没有合适的，那么就使用font.properties文件了。

所以，其实解决方法也比较简单，找一个没乱码的系统，复制相应的font.properties文件就可以了。不过也得仔细查看文件中的设置，>里面提到的字体你的系统里面是不是存在。
]]></content>
    
    <summary type="html">
    
      如果想要java程序显示中文，就会用到jre的fonts的设置，这个位于jdk/jre/lib下面，挺多font.properties文件，这些文件就是关键。

jdk会按照如下顺序查找相应的字体设置文件。
1 先看locale，例如如果设置了zh_CN，那么会查找文件名包含zh
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="乱码" scheme="http://wdicc.com/tags/%E4%B9%B1%E7%A0%81/"/>
    
      <category term="jfreechart" scheme="http://wdicc.com/tags/jfreechart/"/>
    
  </entry>
  
  <entry>
    <title>随便写点</title>
    <link href="http://wdicc.com/seems-nonething/"/>
    <id>http://wdicc.com/seems-nonething/</id>
    <published>2006-10-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[刚才写了一堆，结果发表的时候丢掉了，实在没心情再写了，简单回顾一下写了什么好了。

十一的时候cc父母过来帮忙置办了好多东西，感谢他们了。

这周两个人过生日，两个报告，高兴。
]]></content>
    
    <summary type="html">
    
      刚才写了一堆，结果发表的时候丢掉了，实在没心情再写了，简单回顾一下写了什么好了。

十一的时候cc父母过来帮忙置办了好多东西，感谢他们了。

这周两个人过生日，两个报告，高兴。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="生日" scheme="http://wdicc.com/tags/%E7%94%9F%E6%97%A5/"/>
    
      <category term="cc" scheme="http://wdicc.com/tags/cc/"/>
    
      <category term="十一" scheme="http://wdicc.com/tags/%E5%8D%81%E4%B8%80/"/>
    
  </entry>
  
  <entry>
    <title>使用公匙密匙来登录ssh</title>
    <link href="http://wdicc.com/public-key-in-ssh/"/>
    <id>http://wdicc.com/public-key-in-ssh/</id>
    <published>2006-09-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[ssh一种更加安全的登录方式是使用rsa/dsa方式来做验证。密码口令很可能被猜出来，但是用dsa方式验证的ssh，除非他弄到你的私匙，否则肯定是安全的。

ssh-keygen命令可以用来生成rsa/dsa方式的公匙密匙。
ssh-keygen或者ssh-keygen -t rsa生成rsa方式的密匙。ssh-keygen -d 或者 ssh-keygen -t dsa生成dsa方式的密匙。具体rsa和dsa的区别看 <a href="http://www-128.ibm.com/developerworks/cn/linux/security/openssh/part1/index.html" target="_blank" rel="external">这里</a> 。

上面的命令会在~/.ssh文件夹中生成公匙（id_*sa.pub）和密匙（id_*sa），将pub文件中的内容copy到远程服务器你的home目录下面的.ssh目录中的authorized_keys[2]这个文件中，有没有最后的那个2要看你用的是ssh1还是ssh2方式，通常都有2。

然后就是远程服务器的这些文件需要有正确的权限，.ssh目录是700，authorized_keys2文件是644。

此后再登录服务器的时候应该就不需要输入密码了。

有一个小tip，就是给服务器的ip设置一个好记的形式，那么多的ip记住不容易阿，而且每次还得一个一个输入。具体方法就是修改hosts文件，添加类似下面的内容就可以了，相当于自己做了一个dns，呵呵。
#销售server
218.x.2.128 s128 xs xiaoshou
#db server
218.x.23.189 s189 db oracle
这样，以后访问s128或者s189就可以了，当然后面的xs、xiaoshou、db、oracle也都是别名，都可以用来访问。

还有一个tip，是关于term的。如果用的是urxvt，访问的远程服务器的时候可能会遇到“unknow terminal : rxvt-unicode” 类似的错误，如果出现了类似错误，会导致在服务器端vim和ls都没有颜色。解决方法是在.Xdefaults文件中添加URxvt.termName: xterm，或者.bash_profile里面自己设置一下TERM类型。
]]></content>
    
    <summary type="html">
    
      ssh一种更加安全的登录方式是使用rsa/dsa方式来做验证。密码口令很可能被猜出来，但是用dsa方式验证的ssh，除非他弄到你的私匙，否则肯定是安全的。

ssh-keygen命令可以用来生成rsa/dsa方式的公匙密匙。
ssh-keygen或者ssh-keygen -t r
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
      <category term="urxvt" scheme="http://wdicc.com/tags/urxvt/"/>
    
      <category term="公匙" scheme="http://wdicc.com/tags/%E5%85%AC%E5%8C%99/"/>
    
      <category term="密匙" scheme="http://wdicc.com/tags/%E5%AF%86%E5%8C%99/"/>
    
  </entry>
  
  <entry>
    <title>入住新房</title>
    <link href="http://wdicc.com/live-in-new-house/"/>
    <id>http://wdicc.com/live-in-new-house/</id>
    <published>2006-09-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[不管怎么说，昨天住进去了。再也不关心房价了，再也不用和房东打交到了。

这几次找的搬家公司都挺便宜的，第一次从春园搬到秀园，几步路的距离吧，花了100，问别的公司可都开口150起呢。第二次从青塔到国美第一城，距离好远，从西四环外，搬到东四环外。这次花费200。第三次就是从国美第一城搬到了现在的万象新天，10几分钟车程吧，花费160。

昨天晚上回去买了托把，垃圾桶。粗略收拾了一下卧室，并且把冰箱、微波炉都擦干净了。现在东西还有很多没收拾，都再客厅里面，不过还好客厅够大，呵呵。

现在最紧要的是购买衣柜、纱窗、窗帘。昨天去小区里面的一个商家问了问，价格不便宜。纱窗三个窗口需要1200，窗帘1米78，衣柜做好了可能需要3k。纱窗那个就不用说了，实在太黑了，要价上面给打了8折还那么贵，我说我装个新的门也够了。窗帘我们问了附近的批发市场里面的，最贵的也就40一米。衣柜的话价格倒差不多，他这个是定做，样式都可以自己设计。

昨天晚上蚊子还真不少，翻了半天也没有翻到蚊香，不过我晚上好像没怎么被咬，不知道cc如何，呵呵。不是说高层没有蚊子么？蚊子怎么飞上来的啊？他们还真不嫌累。
]]></content>
    
    <summary type="html">
    
      不管怎么说，昨天住进去了。再也不关心房价了，再也不用和房东打交到了。

这几次找的搬家公司都挺便宜的，第一次从春园搬到秀园，几步路的距离吧，花了100，问别的公司可都开口150起呢。第二次从青塔到国美第一城，距离好远，从西四环外，搬到东四环外。这次花费200。第三次就是从国美第一
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="newhouse" scheme="http://wdicc.com/tags/newhouse/"/>
    
  </entry>
  
  <entry>
    <title>寄宿在老大家里</title>
    <link href="http://wdicc.com/live-in-syms-house/"/>
    <id>http://wdicc.com/live-in-syms-house/</id>
    <published>2006-09-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周六总算看到了房子，问题还真是多啊。和老婆两个人房子里面转了2个小时，发现的问题都记在本本上了，今天老婆过去督促他们修去了。最早估计不到周末就可以搬家入住吧。现在在老大这里寄宿，和老婆两个人挤在一个小床垫上，呵呵，睡惯了我们的大床垫，还真有点不习惯，总觉得要掉下去。老大那里晚上可真安静，比我们以前路边的感觉好很多啊，呵呵，晚上一直听着他那个散热风扇在转。

两只猫跟着我们也是吓了一路，坐车都坐了快2个小时了。看着他们吓的发抖，真是心疼啊，不过昨天晚上他们闹腾起来，却又让人生恨，呵呵。不管怎么说，快了，就快可以住自己的家了，大的落地窗户旁边，随便他们怎么睡。
]]></content>
    
    <summary type="html">
    
      上周六总算看到了房子，问题还真是多啊。和老婆两个人房子里面转了2个小时，发现的问题都记在本本上了，今天老婆过去督促他们修去了。最早估计不到周末就可以搬家入住吧。现在在老大这里寄宿，和老婆两个人挤在一个小床垫上，呵呵，睡惯了我们的大床垫，还真有点不习惯，总觉得要掉下去。老大那里晚上
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Account Locking</title>
    <link href="http://wdicc.com/account-locking/"/>
    <id>http://wdicc.com/account-locking/</id>
    <published>2006-09-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://download-west.oracle.com/docs/cd/B19306_01/network.102/b14266/policies.htm#i1012688" target="_blank" rel="external">这里</a>

7.4.1 Account Locking

When a particular user exceeds a designated number of failed login attempts, the server automatically locks that user account. You specify the permissible number of failed login attempts using the CREATE PROFILE statement. You can also specify the amount of time accounts remain locked.

In the following example, the maximum number of failed login attempts for the user johndoe is four, and the amount of time the account will remain locked is 30 days. The account will unlock automatically after the passage of 30 days.

CREATE PROFILE prof LIMIT
FAILED_LOGIN_ATTEMPTS 4
PASSWORD_LOCK_TIME 30;
ALTER USER johndoe PROFILE prof;


If you do not specify a time interval for unlocking the account, then PASSWORD_LOCK_TIME assumes the value specified in a default profile. If you specify PASSWORD_LOCK_TIME as UNLIMITED, then the account must be explicitly unlocked using an ALTER USER statement. For example, assuming that PASSWORD_LOCK_TIME UNLIMITED is specified for johndoe, then the following statement must be used to unlock the account:

ALTER USER johndoe ACCOUNT UNLOCK;


After a user successfully logs into an account, the unsuccessful login attempt count for the user, if it exists, is reset to 0.

The security officer can also explicitly lock user accounts. When this occurs, the account cannot be unlocked automatically, and only the security officer should unlock the account. The CREATE USER or ALTER USER statements are used to explicitly lock or unlock user accounts. For example, the following statement locks the user account, susan:

ALTER USER susan ACCOUNT LOCK;
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://download-west.oracle.com/docs/cd/B19306_01/network.102/b14266/policies.htm#i1012688&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;


    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>dns劫持</title>
    <link href="http://wdicc.com/hijack-dns/"/>
    <id>http://wdicc.com/hijack-dns/</id>
    <published>2006-09-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这个词不知道熟悉不熟悉。听说过劫机，劫车的，劫持dns有什么用？用处大了，呵呵。之前有浏览器劫持，就是流氓插件将你访问的网址导向他自己的网站，不管你访问什么网址，都给你导过去。很流氓的做法吧，现在有些dns也在做<a href="http://blog.cathayan.org/item/1440" target="_blank" rel="external">类似的事情</a>。

我前几天就遇到了类似的问题，不过和这个又不像。工行的网站是 http://www.icbc.com.cn ，而 http://icbc.com.cn 是连接不上的，我输入了后面这个ip，就打开一个什么纠错的网址，然后一不小心多按了一个回车，就提示我安装好了中文上网插件，当时真想骂3721祖宗十八代。用ie也是没办法的事情，工行的网站只能用ie，用firefox访问那个网址的时候就提示访问不了，不会出现转向，所以我这个情况应该是和浏览器有关。

用了 <a href="http://www.opendns.com/what/" target="_blank" rel="external">opendns</a> 之后呢，再访问不存在的网址，还是会转，不过会转到一个英文的网站，没有3721了，呵呵。
]]></content>
    
    <summary type="html">
    
      这个词不知道熟悉不熟悉。听说过劫机，劫车的，劫持dns有什么用？用处大了，呵呵。之前有浏览器劫持，就是流氓插件将你访问的网址导向他自己的网站，不管你访问什么网址，都给你导过去。很流氓的做法吧，现在有些dns也在做&lt;a href=&quot;http://blog.cathayan.org/
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="3721" scheme="http://wdicc.com/tags/3721/"/>
    
      <category term="dns" scheme="http://wdicc.com/tags/dns/"/>
    
  </entry>
  
  <entry>
    <title>今天的天气真是好阿</title>
    <link href="http://wdicc.com/what-a-nice-day/"/>
    <id>http://wdicc.com/what-a-nice-day/</id>
    <published>2006-09-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这么好的天气呆在家里实在是浪费，唉。已经很久没有刷刷了，都不知道穿上鞋还会不会走了。北航的刷刷团体看样子就这么消失了。到了新家每天得去刷几圈才行。说起来还比较渴望早点搬进去，希望10.1能搞定，到时叫同学们过去happy，呵呵。 想起来那边是地热采暖，这下两只猫肯定爽了，冬天也就趴到地上睡了，看来他们晚上不会钻被子了。
]]></content>
    
    <summary type="html">
    
      这么好的天气呆在家里实在是浪费，唉。已经很久没有刷刷了，都不知道穿上鞋还会不会走了。北航的刷刷团体看样子就这么消失了。到了新家每天得去刷几圈才行。说起来还比较渴望早点搬进去，希望10.1能搞定，到时叫同学们过去happy，呵呵。 想起来那边是地热采暖，这下两只猫肯定爽了，冬天也就
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>使用irssi上irc</title>
    <link href="http://wdicc.com/login-in-irc-use-irssi/"/>
    <id>http://wdicc.com/login-in-irc-use-irssi/</id>
    <published>2006-09-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[/SERVER ADD -auto -network oftc irc.oftc.net 6667
/NETWORK ADD -autosendcmd "/^msg nickserv identify pass;wait 2000" OFTC
/CHANNEL ADD -auto #arch-cn OFTC

这样可以实现起动irc自动登录，并且加入频道

<a target="_blank" href="http://www.irssi.org">irssi</a> 的 <a target="_blank" href="http://www.irssi.org/documentation/manual">manual</a> 以及一个<a target="_blank" href="http://www.irssi.org/documentation/startup">Howto</a> 。
]]></content>
    
    <summary type="html">
    
      /SERVER ADD -auto -network oftc irc.oftc.net 6667
/NETWORK ADD -autosendcmd &quot;/^msg nickserv identify pass;wait 2000&quot; OFTC
/CHANNEL ADD -auto
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="irssi" scheme="http://wdicc.com/tags/irssi/"/>
    
  </entry>
  
  <entry>
    <title>差不多配置好了urxvt</title>
    <link href="http://wdicc.com/urxvt-conf/"/>
    <id>http://wdicc.com/urxvt-conf/</id>
    <published>2006-09-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这
]]></content>
    
    <summary type="html">
    
      这

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="urxvt" scheme="http://wdicc.com/tags/urxvt/"/>
    
  </entry>
  
  <entry>
    <title>fetchmail,procmail,mutt,msmtp</title>
    <link href="http://wdicc.com/fetchmail-procmail-mutt-msmtp/"/>
    <id>http://wdicc.com/fetchmail-procmail-mutt-msmtp/</id>
    <published>2006-09-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[linux下面恐怕很多人都会推荐这种组合了。这个组合中的fetchmail负责将远方的pop,imap之类的mail收下来。然后procmail负责将这些mail投递到本地用户那里。mutt呢，就是用来管理查看这些邮件的了。msmtp用来联接远程的smtp服务器发送邮件。这
]]></content>
    
    <summary type="html">
    
      linux下面恐怕很多人都会推荐这种组合了。这个组合中的fetchmail负责将远方的pop,imap之类的mail收下来。然后procmail负责将这些mail投递到本地用户那里。mutt呢，就是用来管理查看这些邮件的了。msmtp用来联接远程的smtp服务器发送邮件。这

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="fetchmail" scheme="http://wdicc.com/tags/fetchmail/"/>
    
      <category term="msmtp" scheme="http://wdicc.com/tags/msmtp/"/>
    
      <category term="mutt" scheme="http://wdicc.com/tags/mutt/"/>
    
  </entry>
  
  <entry>
    <title>纯 console 下用 screen 实现同屏两窗口</title>
    <link href="http://wdicc.com/screen-hotkey/"/>
    <id>http://wdicc.com/screen-hotkey/</id>
    <published>2006-08-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[原文在 <a href="http://linuxsir.org/bbs/showthread.php?t=247156" target="_blank" rel="external">这里</a>

<pre class="prettyprint lang-txt">
Ctrl-a c 
</pre>]]></content>
    
    <summary type="html">
    
      原文在 &lt;a href=&quot;http://linuxsir.org/bbs/showthread.php?t=247156&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;这里&lt;/a&gt;

&lt;pre class=&quot;prettyprint lang-txt&quot;&gt;
Ctrl
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="screen" scheme="http://wdicc.com/tags/screen/"/>
    
  </entry>
  
  <entry>
    <title>最近在追的三部美剧</title>
    <link href="http://wdicc.com/3-sitcom/"/>
    <id>http://wdicc.com/3-sitcom/</id>
    <published>2006-08-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[韩剧看的更多的是喜剧效果，和东方美女。美剧呢，更加引人入胜一点，往往不知不觉就看完了好几集，然后就在期待下面的。韩剧一集1个多小时，看的时候往往会让人生闷，忍不住拖着看。美剧就不会了，看的时候巴不得每个镜头都不要错过，每个镜头都那么吸引人。

韩剧自从看了<a href="http://lib.verycd.com/2005/01/10/0000034551.html" target="_blank" rel="external">《豪杰春香》</a>之后，就再没有看过了，因为那之后看了<a href="http://lib.verycd.com/2005/08/31/0000063290.html" target="_blank" rel="external">《越狱》</a>，看了美剧之后，实在对韩剧提不起兴趣了，所以后来下载的<a href="http://lib.verycd.com/2005/12/15/0000079877.html" target="_blank" rel="external">《my girl》</a>没看就直接删掉了。

说说最近看的三部美剧。第一部就要首推<a href="http://lib.verycd.com/2005/08/31/0000063290.html" target="_blank" rel="external">《越狱》</a>了。第一季已经播完，总共22集。第二季正在播，今天应该可以看到第二集了。

<a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/229701964/123_100_6fdbafa5ace0926.html" target="_blank" rel="external"><img width="361" height="500" border="0" alt="123_100_6fdbafa5ace0926" src="http://static.flickr.com/69/229701964_52c4e18dd6.jpg"></a>

第二部就是 <a href="http://lib.verycd.com/2006/06/27/0000108444.html" target="_blank" rel="external">《4400》</a>了。已经播到第三季了，第一季是5集，第二季是12集，第三季目前播到了13集。

<a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/229705692/4400.html" target="_blank" rel="external"><img width="500" height="375" border="0" alt="4400" src="http://static.flickr.com/75/229705692_ef0e5772c0.jpg"></a>

第三部就是<a href="http://lib.verycd.com/2006/02/24/0000091563.html" target="_blank" rel="external">《Lost》</a>了。这个刚开始看，我第一季还没有看完，不过也不用急了，美剧总是播的很慢的。已经播完第一季，共25集。第二季也播完了好像，24集。

<a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/229708920/lost.html" target="_blank" rel="external"><img width="500" height="400" border="0" alt="lost" src="http://static.flickr.com/57/229708920_ea4154021e.jpg"></a>
]]></content>
    
    <summary type="html">
    
      韩剧看的更多的是喜剧效果，和东方美女。美剧呢，更加引人入胜一点，往往不知不觉就看完了好几集，然后就在期待下面的。韩剧一集1个多小时，看的时候往往会让人生闷，忍不住拖着看。美剧就不会了，看的时候巴不得每个镜头都不要错过，每个镜头都那么吸引人。

韩剧自从看了&lt;a href=&quot;htt
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="4400" scheme="http://wdicc.com/tags/4400/"/>
    
      <category term="lost" scheme="http://wdicc.com/tags/lost/"/>
    
      <category term="movie" scheme="http://wdicc.com/tags/movie/"/>
    
      <category term="越狱" scheme="http://wdicc.com/tags/%E8%B6%8A%E7%8B%B1/"/>
    
  </entry>
  
  <entry>
    <title>PING命令中TTL的具体含义zz</title>
    <link href="http://wdicc.com/ttl-in-ping/"/>
    <id>http://wdicc.com/ttl-in-ping/</id>
    <published>2006-08-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[有台服务器ping的时候老出现 Time to live exceeded 这个错误，这样就会误报服务器挂掉，很烦人。找了半天似乎找到了解决方法了。

ping的时候返回的包的ttl值是根据对方系统的设置来的，默认情况下，win是128,linux是64,返回的时候，每经过一个节点，就减1,这样，根据返回包的ttl值就可以判断经过了几个路由节点。而节点要是比较多的话，会导致这个ttl值为0,这样就出现上面提到的问题了。当然，要是遇到包进了环路，也会产生这样的问题，详细的内容可以看下面的转载文章。

这样，解决这个问题的方法就是修改对方系统的默认ttl 值，比如修改为255，这样如果还产生上面的错误的话，那就没准是哪里的问题了。呵呵。

<font color="#333333" style="line-height: 18px"> Linux下修改方法:

方法1(重启后有效)：
#sysctl -w net.ipv4.ip_default_ttl=N
(N=0~255),若N>255,则ttl=0
方法2(重启后无效)：
#echo N(N为0～255) > /proc/sys/net/ipv4/ip_default_ttl</font>

原文地址：<a href="http://blog.zol.com.cn/blog/wjf_top/35836.html" target="_blank" rel="external">这里</a>
<div align="left" style="width: 98%"><span class="neirong1_12u" style="overflow: hidden; width: 100%"> 								PING命令中TTL的具体含义
提供者 vitty简单来说，TTL全程Time to Live，意思就是生存周期。
首先要说明ping命令是使用的网络层协议ICMP，所以TTL指的是一个网络层的网络数据包（package）的生存周期，这句话不懂的先回去复习OSI7层协议去。

第一个问题，为什么要有生存周期这个概念。

很 显然，一个package从一台机器到另一台机器中间需要经过很长的路径，显然这个路径不是单一的，是很复杂的，并且很可能存在环路。如果一个数据包在传 输过程中进入了环路，如果不终止它的话，它会一直循环下去，如果很多个数据包都这样循环的话，那对于网络来说这就是灾难了。所以需要在包中设置这样一个 值，包在每经过一个节点，将这个值减1，反复这样操作，最终可能造成2个结果：包在这个值还为正数的时候到达了目的地，或者是在经过一定数量的节点后，这 个值减为了0。前者代表完成了一次正常的传输，后者代表包可能选择了一条非常长的路径甚至是进入了环路，这显然不是我们期望的，所以在这个值为0的时候， 网络设备将不会再传递这个包而是直接将他抛弃，并发送一个通知给包的源地址，说这个包已死。
其实TTL值这个东西本身并代表不了什么，对于使用者来说，关心的问题应该是包是否到达了目的地而不是经过了几个节点后到达。但是TTL值还是可以得到有意思的信息的。

每 个操作系统对TTL值得定义都不同，这个值甚至可以通过修改某些系统的网络参数来修改，例如Win2000默认为128，通过注册表也可以修改。而 Linux大多定义为64。不过一般来说，很少有人会去修改自己机器的这个值的，这就给了我们机会可以通过ping的回显TTL来大体判断一台机器是什么 操作系统。
<a id="more"></a>
以我公司2台机器为例
看如下命令
D:Documents and Settingshx&gt;ping 61.152.93.131

Pinging 61.152.93.131 with 32 bytes of data:

Reply from 61.152.93.131: bytes=32 time=21ms TTL=118
Reply from 61.152.93.131: bytes=32 time=19ms TTL=118
Reply from 61.152.93.131: bytes=32 time=18ms TTL=118
Reply from 61.152.93.131: bytes=32 time=22ms TTL=118

Ping statistics for 61.152.93.131:
Packets: Sent = 4， Received = 4， Lost = 0 (0% loss
Approximate round trip times in milli-seconds:
Minimum = 18ms， Maximum = 22ms， Average = 20ms

D:Documents and Settingshx&gt;ping 61.152.104.40

Pinging 61.152.104.40 with 32 bytes of data:

Reply from 61.152.104.40: bytes=32 time=28ms TTL=54
Reply from 61.152.104.40: bytes=32 time=18ms TTL=54
Reply from 61.152.104.40: bytes=32 time=18ms TTL=54
Reply from 61.152.104.40: bytes=32 time=13ms TTL=54

Ping statistics for 61.152.104.40:
Packets: Sent = 4， Received = 4， Lost = 0 (0% loss
Approximate round trip times in milli-seconds:
Minimum = 13ms， Maximum = 28ms， Average = 19ms
第一台TTL为118，则基本可以判断这是一台Windows机器，从我的机器到这台机器经过了10个节点，因为128-118=10。而第二台应该是台Linux，理由一样64-54=10。
了解了上面的东西，可能有人会有一些疑问，例如以下：

1，不是说包可能走很多路径吗，为什么我看到的4个包TTL都是一样的，没有出现不同？

这是由于包经过的路径是经过了一些最优选择算法来定下来的，在网络拓扑稳定一段时间后，包的路由路径也会相对稳定在一个最短路径上。具体怎么算出来的要去研究路由算法了，不在讨论之列。

2，对于上面例子第二台机器，为什么不认为它是经过了74个节点的Windows机器？因为128-74=54。

对于这个问题，我们要引入另外一个很好的ICMP协议工具。不过首先要声明的是，一个包经过74个节点这个有些恐怖，这样的路径还是不用为好。

要介绍的这个工具是tracert（*nix下为traceroute），让我们来看对上面的第二台机器用这个命令的结果
D:Documents and Settingshx&gt;tracert 61.152.104.40

Tracing route to 61.152.104.40 over a maximum of 30 hops

1 13 ms 16 ms 9 ms 10.120.32.1
2 9 ms 9 ms 11 ms 219.233.244.105
3 12 ms 10 ms 10 ms 219.233.238.173
4 15 ms 15 ms 17 ms 219.233.238.13
5 14 ms 19 ms 19 ms 202.96.222.73
6 14 ms 17 ms 13 ms 202.96.222.121
7 14 ms 15 ms 14 ms 61.152.81.86
8 15 ms 14 ms 13 ms 61.152.87.162
9 16 ms 16 ms 28 ms 61.152.99.26
10 12 ms 13 ms 18 ms 61.152.99.94
11 14 ms 18 ms 16 ms 61.152.104.40

Trace complete.

从这个命令的结果能够看到从我的机器到服务器所走的路由，确实是11个节点（上面说10个好像是我犯了忘了算0的错误了，应该是64-54+1，嘿嘿），而不是128的TTL经过了70多个节点。
既然已经说到这里了，不妨顺便说说关于这两个ICMP命令的高级一点的东西。
首先是ping命令，其实ping有这样一个参数，可以无视操作系统默认TTL值而使用自己定义的值来发送ICMP Request包。
例如还是用那台Linux机器，用以下命令：
D:Documents and Settingshx&gt;ping 61.152.104.40 -i 11

Pinging 61.152.104.40 with 32 bytes of data:

Reply from 61.152.104.40: bytes=32 time=10ms TTL=54
Reply from 61.152.104.40: bytes=32 time=13ms TTL=54
Reply from 61.152.104.40: bytes=32 time=10ms TTL=54
Reply from 61.152.104.40: bytes=32 time=13ms TTL=54

Ping statistics for 61.152.104.40:
Packets: Sent = 4， Received = 4， Lost = 0 (0% loss)，
Approximate round trip times in milli-seconds:
Minimum = 10ms， Maximum = 13ms， Average = 11ms

D:Documents and Settingshx&gt;
这个命令我们定义了发包的TTL为11，而前面我们知道，我到这台服务器是要经过11个节点的，所以这个输出和以前没什么不同。现在再用这个试试看：
D:Documents and Settingshx&gt;ping 61.152.104.40 -i 10

Pinging 61.152.104.40 with 32 bytes of data:

Reply from 61.152.99.94: TTL expired in transit.
Reply from 61.152.99.94: TTL expired in transit.
Reply from 61.152.99.94: TTL expired in transit.
Reply from 61.152.99.94: TTL expired in transit.

Ping statistics for 61.152.104.40:
Packets: Sent = 4， Received = 4， Lost = 0 (0% loss)，
Approximate round trip times in milli-seconds:
Minimum = 0ms， Maximum = 0ms， Average = 0ms

D:Documents and Settingshx&gt;

可 以看到，结果不一样了，我定义了TTL为10来发包，结果是TTL expired in transit.就是说在到达服务器之前这个包的生命周期就结束了。注意看这句话前面的ip，这个ip恰好是我们前面tracert结果到服务器之前的最 后1个ip，包的TTL就是在这里减少到0了，根据我们前面的讨论，当TTL减为0时设备会丢弃包并发送一个TTL过期的ICMP反馈给源地址，这里的结 果就是最好的证明。
通过这里再次又证明了从我机器到服务器是经过了11个节点而不是70多个，呵呵。
最后再巩固一下知识，有人可能觉得tracer这个命令很神奇，可以发现一个包所经过的路由路径。其实这个命令的原理就在我们上面的讨论中。

想象一下，如果我给目的服务器发送一个TTL为1的包，结果会怎样？
根据前面的讨论，在包港出发的第一个节点，TTL就会减少为0，这时这个节点就会回应TTL失效的反馈，这个回应包含了设备本身的ip地址，这样我们就得到了路由路径的第一个节点的地址。
因此，我们继续发送TTL=2的包，也就受到第二个节点的TTL失效回应

依次类推，我们一个一个的发现，当最终返回的结果不是TTL失效而是ICMP Response的时候，我们的tracert也就结束了，就是这么简单。

顺便补一句ping命令还有个-n的参数指定要发包的数量，指定了这个数字就会按照你的要求来发包了而不是默认的4个包。如果使用-t参数的话，命令会一直发包直到你强行中止它。
</span></div>
<!-- 分割 -->
]]></content>
    
    <summary type="html">
    
      有台服务器ping的时候老出现 Time to live exceeded 这个错误，这样就会误报服务器挂掉，很烦人。找了半天似乎找到了解决方法了。

ping的时候返回的包的ttl值是根据对方系统的设置来的，默认情况下，win是128,linux是64,返回的时候，每经过一个节点，就减1,这样，根据返回包的ttl值就可以判断经过了几个路由节点。而节点要是比较多的话，会导致这个ttl值为0,这样就出现上面提到的问题了。当然，要是遇到包进了环路，也会产生这样的问题，详细的内容可以看下面的转载文章。

这样，解决这个问题的方法就是修改对方系统的默认ttl 值，比如修改为255，这样如果还产生上面的错误的话，那就没准是哪里的问题了。呵呵。

&lt;font color=&quot;#333333&quot; style=&quot;line-height: 18px&quot;&gt; Linux下修改方法:

方法1(重启后有效)：
#sysctl -w net.ipv4.ip_default_ttl=N
(N=0~255),若N&gt;255,则ttl=0
方法2(重启后无效)：
#echo N(N为0～255) &gt; /proc/sys/net/ipv4/ip_default_ttl&lt;/font&gt;

原文地址：&lt;a href=&quot;http://blog.zol.com.cn/blog/wjf_top/35836.html&quot;&gt;这里&lt;/a&gt;
&lt;div align=&quot;left&quot; style=&quot;width: 98%&quot;&gt;&lt;span class=&quot;neirong1_12u&quot; style=&quot;overflow: hidden; width: 100%&quot;&gt; 								PING命令中TTL的具体含义
提供者 vitty简单来说，TTL全程Time to Live，意思就是生存周期。
首先要说明ping命令是使用的网络层协议ICMP，所以TTL指的是一个网络层的网络数据包（package）的生存周期，这句话不懂的先回去复习OSI7层协议去。

第一个问题，为什么要有生存周期这个概念。

很 显然，一个package从一台机器到另一台机器中间需要经过很长的路径，显然这个路径不是单一的，是很复杂的，并且很可能存在环路。如果一个数据包在传 输过程中进入了环路，如果不终止它的话，它会一直循环下去，如果很多个数据包都这样循环的话，那对于网络来说这就是灾难了。所以需要在包中设置这样一个 值，包在每经过一个节点，将这个值减1，反复这样操作，最终可能造成2个结果：包在这个值还为正数的时候到达了目的地，或者是在经过一定数量的节点后，这 个值减为了0。前者代表完成了一次正常的传输，后者代表包可能选择了一条非常长的路径甚至是进入了环路，这显然不是我们期望的，所以在这个值为0的时候， 网络设备将不会再传递这个包而是直接将他抛弃，并发送一个通知给包的源地址，说这个包已死。
其实TTL值这个东西本身并代表不了什么，对于使用者来说，关心的问题应该是包是否到达了目的地而不是经过了几个节点后到达。但是TTL值还是可以得到有意思的信息的。

每 个操作系统对TTL值得定义都不同，这个值甚至可以通过修改某些系统的网络参数来修改，例如Win2000默认为128，通过注册表也可以修改。而 Linux大多定义为64。不过一般来说，很少有人会去修改自己机器的这个值的，这就给了我们机会可以通过ping的回显TTL来大体判断一台机器是什么 操作系统。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="ping" scheme="http://wdicc.com/tags/ping/"/>
    
  </entry>
  
  <entry>
    <title>测试一下微软的livewrite</title>
    <link href="http://wdicc.com/test-for-live-write/"/>
    <id>http://wdicc.com/test-for-live-write/</id>
    <published>2006-08-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[感觉好像还不错，呵呵。不过似乎没有写tag的地方。
]]></content>
    
    <summary type="html">
    
      感觉好像还不错，呵呵。不过似乎没有写tag的地方。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>tomcat和apache桥接</title>
    <link href="http://wdicc.com/tomcat-apache-bridge/"/>
    <id>http://wdicc.com/tomcat-apache-bridge/</id>
    <published>2006-08-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 下载，安装tomcat，jdk和mod_jk

下载jdk  <a href="http://java.sun.com/javase/downloads/index.jsp" target="_blank" rel="external">http://java.sun.com/javase/downloads/index.jsp</a>
tomcat 5.5 需要jre 1.5才可以。下载之后是一个bin文件
<pre class="prettyprint lang-bash">
$chmod +x xx.bin
$./xx.bin</pre>

他会将jdk解压到当前目录下面，然后作一个链接
<pre class="prettyprint lang-bash">

以后访问jdk文件夹即可，此处我们用JAVA_HOME来表示jdk文件夹的路径。

下载tomcat <a href="http://tomcat.apache.org/download-55.cgi" target="_blank" rel="external">http://tomcat.apache.org/download-55.cgi</a>
下载 Core 那个版本就可以，下载之后解压，选择放置地方之后，做一个链接
<pre class="prettyprint lang-bash">

以后访问tomcat文件夹即可，此处我们用TOMCAT_HOME来表示tomcat的安装路径。

下载 mod_jk ，这个是用来完成apache和tomcat桥接的模块，<a href="http://www.apache.org/dist/tomcat/tomcat-connectors/jk/" target="_blank" rel="external"> http://www.apache.org/dist/tomcat/tomcat-connectors/jk/</a> 。
可以下载已经编译好的模块，不过要注意要和自己的apache版本对应才行。也可以下载source自己编译，这里我们自己编译。

下载source之后，解压，进入解压后的目录，然后
<pre class="prettyprint lang-bash">
$./configure --with-apxs=/usr/local/apache/bin/apxs #后面是apxs的目录
也可以
$./configure --with-apache=/usr/local/apache #apache的目录
$make
</pre>
编译完成之后，复制桥接模块到apache的modules目录
<pre class="prettyprint lang-bash">

2 配置

jdk的环境需要配置一个系统变量JAVA_HOME，可以写到/etc/profile中，或者修改tomcat的启动停止脚本来设置java环境也可以（这
</pre></pre></pre>]]></content>
    
    <summary type="html">
    
      1 下载，安装tomcat，jdk和mod_jk

下载jdk  &lt;a href=&quot;http://java.sun.com/javase/downloads/index.jsp&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://java.sun.com
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
      <category term="tomcat" scheme="http://wdicc.com/tags/tomcat/"/>
    
      <category term="桥接" scheme="http://wdicc.com/tags/%E6%A1%A5%E6%8E%A5/"/>
    
  </entry>
  
  <entry>
    <title>上个周末happy了两天</title>
    <link href="http://wdicc.com/2-days-happy/"/>
    <id>http://wdicc.com/2-days-happy/</id>
    <published>2006-08-20T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>好爽的一个周末，两个报告，呵呵。不过我比较愿意两个报告分开两周来听，不过这样也好，下周就努力将老大的报告实现了。抱得美人归，总得意思意思，好歹给大家介绍介绍认识一下，要不都不知道该称呼啥。</p>
<p>周日去唱歌又郁闷了，一定要努力学歌，去了不唱好像很亏得样子，为了不亏，一定要学会。嗯。
</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;好爽的一个周末，两个报告，呵呵。不过我比较愿意两个报告分开两周来听，不过这样也好，下周就努力将老大的报告实现了。抱得美人归，总得意思意思，好歹给大家介绍介绍认识一下，要不都不知道该称呼啥。&lt;/p&gt;
&lt;p&gt;周日去唱歌又郁闷了，一定要努力学歌，去了不唱好像很亏得样子，为了不亏，
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="ktv" scheme="http://wdicc.com/tags/ktv/"/>
    
      <category term="周末" scheme="http://wdicc.com/tags/%E5%91%A8%E6%9C%AB/"/>
    
  </entry>
  
  <entry>
    <title>针对nagios得两款小软件</title>
    <link href="http://wdicc.com/software-for-nagios/"/>
    <id>http://wdicc.com/software-for-nagios/</id>
    <published>2006-08-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a href="http://sourceforge.net/projects/ntrayc" target="_blank" rel="external">ntrayc</a> 和 <a href="http://sourceforge.net/projects/nagiostrayicon" target="_blank" rel="external">nagiostrayicon</a>

都是在tray那里显示nagios是否报错得。到时会有声音或者窗口弹出来。

前者不需要安装，后者需要安装。界面功能来看都差不多。

刚装上有台服务器就down了，呵呵。比较了一下，觉得ntrayc比较好。下面是他们得设置界面。

ntrayc如下，两幅图，后面那个是他得console，可以同时得到服务得大概信息。不知道他哪里设置声音，下载得安装包里面没有声音文件。每次检测到问题都会弹出窗口。

<img alt="ntrayc2.png" id="image233" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/ntrayc2.png">
<img alt="ntrayc.png" id="image232" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/ntrayc.png">
nagios tray icon得设置界面如下，出问题得时候他不会弹出窗口，会出声叫。不过第二次检测就不叫了，icon变红色。
<img alt="trayicon.png" id="image231" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/trayicon.png">
]]></content>
    
    <summary type="html">
    
      &lt;a href=&quot;http://sourceforge.net/projects/ntrayc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ntrayc&lt;/a&gt; 和 &lt;a href=&quot;http://sourceforge.net/projects/nagios
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="nagios" scheme="http://wdicc.com/tags/nagios/"/>
    
  </entry>
  
  <entry>
    <title>第一场秋雨？</title>
    <link href="http://wdicc.com/first-rain/"/>
    <id>http://wdicc.com/first-rain/</id>
    <published>2006-08-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[最近一个星期以来真是闷热的恐怖啊，还好昨天晚上下了一场雨，早上起来凉爽多了。今年的天气一直就比较怪异，按照往年的情况，6，7月份北京应该已经热的不行了，可是今年却是凉爽居多，那段时间还总是下雨，都是晚上下，早上停的，倒是不影响上班。不过北京的交通实在太差了，遇上几次下班时候下雨的，出了地铁就全是人了，平时人多的公交车反而比较空，而出租车却死活打不上。那天是站在雨里等了n久才打上车，浑身上下都湿透了。

前几天立秋了，这在我们那里就表示早晚已经开始变凉了。北京这里却还没有变化，记得刚来北京上学的时候，是9月中吧，那会还是比较热的，我们那边早晚都得穿外套了。好像北京10.1都不凉快，唉。不过初步打算10.1回家，避暑去，嘿嘿。
]]></content>
    
    <summary type="html">
    
      最近一个星期以来真是闷热的恐怖啊，还好昨天晚上下了一场雨，早上起来凉爽多了。今年的天气一直就比较怪异，按照往年的情况，6，7月份北京应该已经热的不行了，可是今年却是凉爽居多，那段时间还总是下雨，都是晚上下，早上停的，倒是不影响上班。不过北京的交通实在太差了，遇上几次下班时候下雨的
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="雨" scheme="http://wdicc.com/tags/%E9%9B%A8/"/>
    
  </entry>
  
  <entry>
    <title>毛毛旧照</title>
    <link href="http://wdicc.com/maomao-photo/"/>
    <id>http://wdicc.com/maomao-photo/</id>
    <published>2006-08-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/210049529/IMG_0027.html" target="_blank" rel="external"><img height="375" alt="IMG_0027" src="http://static.flickr.com/76/210049529_0c706d393e.jpg" width="500" border="0"></a> <a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/210049445/IMG_0022.html" target="_blank" rel="external"><img height="375" alt="IMG_0022" src="http://static.flickr.com/62/210049445_fdb84f0ae6.jpg" width="500" border="0"></a>
]]></content>
    
    <summary type="html">
    
      &lt;a class=&quot;tt-flickr&quot; href=&quot;http://blog.wdicc.com/wordpress/Photos/photo/210049529/IMG_0027.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;img height=
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
      <category term="毛毛" scheme="http://wdicc.com/tags/%E6%AF%9B%E6%AF%9B/"/>
    
  </entry>
  
  <entry>
    <title>美国, 香港, 中国大陆三地警察</title>
    <link href="http://wdicc.com/caps-in-usa-hk-and-china/"/>
    <id>http://wdicc.com/caps-in-usa-hk-and-china/</id>
    <published>2006-08-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[为了测试美国, 香港, 中国大陆三地警察的实力, 联合国将三只兔子放在三个森林中, 看 三地警察谁先找出兔子.

任务:找出兔子
第一个森林前是美国警察, 他们先花整整半天时间开会制定作战计划, 严格分工, 然后派 特种部队快速进入森林进行地毯式搜索, 结果开会耽搁了时间, 兔子跑了, 任务失败!!!!
然后轮到香港警察, 他们派了一百多号人和几十辆警车在身临其境外一字排开, 由带头人 用喇叭喊话:"兔子,兔子,你已经被包围了, 快出来投降......" 半天过去了, 没动静. 飞 虎队进入森林, 搜索一遍, 没结果, 任务失败!!!!
最后是中国大陆警察, 只有四个, 先打了一天麻将, 黄昏时一人拿一警棍进入森林,没五分钟, 听到森林里传来一阵动物的惨叫, 中国警察一人抽着一根烟有说有笑的出来, 后面拖着一 只鼻青脸肿的熊,熊奄奄一息的说到:"不要再打了, 我就是兔子.....
]]></content>
    
    <summary type="html">
    
      为了测试美国, 香港, 中国大陆三地警察的实力, 联合国将三只兔子放在三个森林中, 看 三地警察谁先找出兔子.

任务:找出兔子
第一个森林前是美国警察, 他们先花整整半天时间开会制定作战计划, 严格分工, 然后派 特种部队快速进入森林进行地毯式搜索, 结果开会耽搁了时间, 兔子
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
      <category term="兔子" scheme="http://wdicc.com/tags/%E5%85%94%E5%AD%90/"/>
    
  </entry>
  
  <entry>
    <title>Oracle维护常用SQL语句</title>
    <link href="http://wdicc.com/usefull-sql/"/>
    <id>http://wdicc.com/usefull-sql/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[查看所有用户
<pre class="prettyprint lang-sql">
select username,password from dba_users;
</pre>
1、查看表空间的名称及大小
<pre class="prettyprint lang-sql">
select t.tablespace_name, round(sum(bytes/(1024*1024)),0) ts_size
from dba_tablespaces t, dba_data_files d
where t.tablespace_name = d.tablespace_name
group by t.tablespace_name;
</pre>
2、查看表空间物理文件的名称及大小
<pre class="prettyprint lang-sql">
select tablespace_name, file_id, file_name,
round(bytes/(1024*1024),0) total_space
from dba_data_files
order by tablespace_name;
</pre>
<a id="more"></a>
3、查看回滚段名称及大小
<pre class="prettyprint lang-sql">
select segment_name, tablespace_name, r.status,
(initial_extent/1024) InitialExtent,(next_extent/1024) NextExtent,
max_extents, v.curext CurExtent
From dba_rollback_segs r, v$rollstat v
Where r.segment_id = v.usn(+)
order by segment_name ;
</pre>
4、查看控制文件
<pre class="prettyprint lang-sql">
select name from v$controlfile;
</pre>
5、查看日志文件
<pre class="prettyprint lang-sql">
select member from v$logfile;
</pre>
6、查看表空间的使用情况
<pre class="prettyprint lang-sql">
select sum(bytes)/(1024*1024) as free_space,tablespace_name
from dba_free_space
group by tablespace_name;

SELECT A.TABLESPACE_NAME,A.BYTES TOTAL,B.BYTES USED, C.BYTES FREE,
(B.BYTES*100)/A.BYTES "% USED",(C.BYTES*100)/A.BYTES "% FREE"
FROM SYS.SM$TS_AVAIL A,SYS.SM$TS_USED B,SYS.SM$TS_FREE C
WHERE A.TABLESPACE_NAME=B.TABLESPACE_NAME AND A.TABLESPACE_NAME=C.TABLESPACE_NAME;
</pre>
7、查看数据库库对象
select owner, object_type, status, count(*) count# from all_objects group by owner, object_type, status;

8、查看数据库的版本
Select version FROM Product_component_version
Where SUBSTR(PRODUCT,1,6)='Oracle';

9、查看数据库的创建日期和归档方式
Select Created, Log_Mode, Log_Mode From V$Database;

10、捕捉运行很久的SQL
column username format a12
column opname format a16
column progress format a8
select username,sid,opname,
round(sofar*100 / totalwork,0) || '%' as progress,
time_remaining,sql_text
from v$session_longops , v$sql
where time_remaining <> 0
and sql_address = address
and sql_hash_value = hash_value
/

11、查看数据表的参数信息
SELECT partition_name, high_value, high_value_length, tablespace_name,
pct_free, pct_used, ini_trans, max_trans, initial_extent,
next_extent, min_extent, max_extent, pct_increase, FREELISTS,
freelist_groups, LOGGING, BUFFER_POOL, num_rows, blocks,
empty_blocks, avg_space, chain_cnt, avg_row_len, sample_size,
last_analyzed
FROM dba_tab_partitions
--WHERE table_name = :tname AND table_owner = :towner
ORDER BY partition_position

12、查看还没提交的事务
select * from v$locked_object;
select * from v$transaction;

13、查找object为哪些进程所用
select
p.spid,
s.sid,
s.serial# serial_num,
s.username user_name,
a.type object_type,
s.osuser os_user_name,
a.owner,
a.object object_name,
decode(sign(48 - command),
1,
to_char(command), 'Action Code #' || to_char(command) ) action,
p.program oracle_process,
s.terminal terminal,
s.program program,
s.status session_status
from v$session s, v$access a, v$process p
where s.paddr = p.addr and
s.type = 'USER' and
a.sid = s.sid and
a.object='SUBSCRIBER_ATTR'
order by s.username, s.osuser

14、回滚段查看
select rownum, sys.dba_rollback_segs.segment_name Name, v$rollstat.extents
Extents, v$rollstat.rssize Size_in_Bytes, v$rollstat.xacts XActs,
v$rollstat.gets Gets, v$rollstat.waits Waits, v$rollstat.writes Writes,
sys.dba_rollback_segs.status status from v$rollstat, sys.dba_rollback_segs,
v$rollname where v$rollname.name(+) = sys.dba_rollback_segs.segment_name and
v$rollstat.usn (+) = v$rollname.usn order by rownum

15、耗资源的进程(top session)
select s.schemaname schema_name, decode(sign(48 - command), 1,
to_char(command), 'Action Code #' || to_char(command) ) action, status
session_status, s.osuser os_user_name, s.sid, p.spid , s.serial# serial_num,
nvl(s.username, '[Oracle process]') user_name, s.terminal terminal,
s.program program, st.value criteria_value from v$sesstat st, v$session s , v$process p
where st.sid = s.sid and st.statistic# = to_number('38') and ('ALL' = 'ALL'
or s.status = 'ALL') and p.addr = s.paddr order by st.value desc, p.spid asc, s.username asc, s.osuser asc

16、查看锁(lock)情况
select /*+ RULE */ ls.osuser os_user_name, ls.username user_name,
decode(ls.type, 'RW', 'Row wait enqueue lock', 'TM', 'DML enqueue lock', 'TX',
'Transaction enqueue lock', 'UL', 'User supplied lock') lock_type,
o.object_name object, decode(ls.lmode, 1, null, 2, 'Row Share', 3,
'Row Exclusive', 4, 'Share', 5, 'Share Row Exclusive', 6, 'Exclusive', null)
lock_mode, o.owner, ls.sid, ls.serial# serial_num, ls.id1, ls.id2
from sys.dba_objects o, ( select s.osuser, s.username, l.type,
l.lmode, s.sid, s.serial#, l.id1, l.id2 from v$session s,
v$lock l where s.sid = l.sid ) ls where o.object_id = ls.id1 and o.owner
<> 'SYS' order by o.owner, o.object_name

17、查看等待(wait)情况
SELECT v$waitstat.class, v$waitstat.count count, SUM(v$sysstat.value) sum_value
FROM v$waitstat, v$sysstat WHERE v$sysstat.name IN ('db block gets',
'consistent gets') group by v$waitstat.class, v$waitstat.count

18、查看sga情况
SELECT NAME, BYTES FROM SYS.V_$SGASTAT ORDER BY NAME ASC

19、查看catched object
SELECT owner, name, db_link, namespace,
type, sharable_mem, loads, executions,
locks, pins, kept FROM v$db_object_cache

20、查看V$SQLAREA
SELECT SQL_TEXT, SHARABLE_MEM, PERSISTENT_MEM, RUNTIME_MEM, SORTS,
VERSION_COUNT, LOADED_VERSIONS, OPEN_VERSIONS, USERS_OPENING, EXECUTIONS,
USERS_EXECUTING, LOADS, FIRST_LOAD_TIME, INVALIDATIONS, PARSE_CALLS, DISK_READS,
BUFFER_GETS, ROWS_PROCESSED FROM V$SQLAREA

21、查看object分类数量
select decode (o.type#,1,'INDEX' , 2,'TABLE' , 3 , 'CLUSTER' , 4, 'VIEW' , 5 ,
'SYNONYM' , 6 , 'SEQUENCE' , 'OTHER' ) object_type , count(*) quantity from
sys.obj$ o where o.type# > 1 group by decode (o.type#,1,'INDEX' , 2,'TABLE' , 3
, 'CLUSTER' , 4, 'VIEW' , 5 , 'SYNONYM' , 6 , 'SEQUENCE' , 'OTHER' ) union select
'COLUMN' , count(*) from sys.col$ union select 'DB LINK' , count(*) from

22、按用户查看object种类
select u.name schema, sum(decode(o.type#, 1, 1, NULL)) indexes,
sum(decode(o.type#, 2, 1, NULL)) tables, sum(decode(o.type#, 3, 1, NULL))
clusters, sum(decode(o.type#, 4, 1, NULL)) views, sum(decode(o.type#, 5, 1,
NULL)) synonyms, sum(decode(o.type#, 6, 1, NULL)) sequences,
sum(decode(o.type#, 1, NULL, 2, NULL, 3, NULL, 4, NULL, 5, NULL, 6, NULL, 1))
others from sys.obj$ o, sys.user$ u where o.type# >= 1 and u.user# =
o.owner# and u.name <> 'PUBLIC' group by u.name order by
sys.link$ union select 'CONSTRAINT' , count(*) from sys.con$

23、有关connection的相关信息

1)查看有哪些用户连接
select s.osuser os_user_name, decode(sign(48 - command), 1, to_char(command),
'Action Code #' || to_char(command) ) action, p.program oracle_process,
status session_status, s.terminal terminal, s.program program,
s.username user_name, s.fixed_table_sequence activity_meter, '' query,
0 memory, 0 max_memory, 0 cpu_usage, s.sid, s.serial# serial_num
from v$session s, v$process p where s.paddr=p.addr and s.type = 'USER'
order by s.username, s.osuser

2)
]]></content>
    
    <summary type="html">
    
      查看所有用户
&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
select username,password from dba_users;
&lt;/pre&gt;
1、查看表空间的名称及大小
&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
select t.tablespace_name, round(sum(bytes/(1024*1024)),0) ts_size
from dba_tablespaces t, dba_data_files d
where t.tablespace_name = d.tablespace_name
group by t.tablespace_name;
&lt;/pre&gt;
2、查看表空间物理文件的名称及大小
&lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
select tablespace_name, file_id, file_name,
round(bytes/(1024*1024),0) total_space
from dba_data_files
order by tablespace_name;
&lt;/pre&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>711也不保了，出现小偷</title>
    <link href="http://wdicc.com/thief-in-711/"/>
    <id>http://wdicc.com/thief-in-711/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[之前坐小九的时候，遇到过一次小偷。那家伙一上车就坐到了最后面一个坐。我站在他旁边，有两次这家伙往起一站都碰到头了。当时我没有想到是这家伙太注意目标了，所以才碰头，有人说丢手机的时候才想起来。丢手机的是个将手机跨在腰间的哥们，所以啊，一定不要用那种手机套了，太危险了，不过现在似乎很少有人用了。

今天坐711的时候，又有人丢东西了。开始是一个mm冲着一个男的问他干吗呢，那个男的小声的和那个mm说了句什么，后来那个mm也没说什么了，好像给110打电话了，说有个男的怎么怎么样。那个哥们也就在打电话的时候挤着下车跑了。然后就听见一个兄弟说手机丢了，他的手机似乎是放在上衣的口袋里面的。然后大家就开始议论那个小偷，之前那个mm也说了一下为什么要冲那个小偷问话，原来是小偷掏她钱包被发现了，钱包掉地上了。大家就说那你怎么不说啊，你说了那个小偷铁定不能让他下车啊，你不说大家都不知道怎么回事呢。

很挤的公交车上面很容易滋生小偷的，大家坐车的时候千万要注意。地铁上面似乎还没有遇到过小偷，可能对于小偷来说地铁逃起来太难吧。
]]></content>
    
    <summary type="html">
    
      之前坐小九的时候，遇到过一次小偷。那家伙一上车就坐到了最后面一个坐。我站在他旁边，有两次这家伙往起一站都碰到头了。当时我没有想到是这家伙太注意目标了，所以才碰头，有人说丢手机的时候才想起来。丢手机的是个将手机跨在腰间的哥们，所以啊，一定不要用那种手机套了，太危险了，不过现在似乎很
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="公交" scheme="http://wdicc.com/tags/%E5%85%AC%E4%BA%A4/"/>
    
      <category term="小偷" scheme="http://wdicc.com/tags/%E5%B0%8F%E5%81%B7/"/>
    
  </entry>
  
  <entry>
    <title>Oracle数据库日常维护手册</title>
    <link href="http://wdicc.com/oracle-handbook/"/>
    <id>http://wdicc.com/oracle-handbook/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<h4 align="center" style="text-align: center; line-height: 13.5pt"><span lang="EN-US" style="color: black">Oracle</span><span style="color: black">数据库日常维护手册<span lang="EN-US"></span></span></h4>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">在<span lang="EN-US">Oracle</span>数据库运行期间，<span lang="EN-US">DBA</span>应该对数据库的运行日志及表空间的使用情况进行监控，及早发现数据库中存在的问题。<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">一、<span lang="EN-US">Oracle</span>警告日志文件监控 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">Oracle</span><span style="font-size: 9pt; color: black">在运行过程中，会在警告日志文件<span lang="EN-US">(alert_SID.log)</span>中记录数据库的一些运行情况<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●数据库的启动、关闭，启动时的非缺省参数<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●数据库的重做日志切换情况，记录每次切换的时间，及如果因为检查点<span lang="EN-US">(checkpoint)</span>操作没有执行完成造成不能切换，会记录不能切换的原因<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●对数据库进行的某些操作，如创建或删除表空间、增加数据文件<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●数据库发生的错误，如表空间不够、出现坏块、数据库内部错误<span lang="EN-US">(ORA-600) </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">DBA</span><span style="font-size: 9pt; color: black">应该定期检查日志文件，根据日志中发现的问题及时进行处理<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">问题处理<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">启动参数不对检查初始化参数文件<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">因为检查点操作或归档操作没有完成造成重做日志不能切换如果经常发生这样的情况，可以考虑增加重做日志文件组<span lang="EN-US">;</span>想办法提高检查点或归档操作的效率<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">有人未经授权删除了表空间检查数据库的安全问题，是否密码太简单<span lang="EN-US">;</span>如有必要，撤消某些用户的系统权限<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">出现坏块检查是否是硬件问题<span lang="EN-US">(</span>如磁盘本生有坏块<span lang="EN-US">)</span>，如果不是，检查是那个数据库对象出现了坏块，对这个对象进行重建<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">表空间不够增加数据文件到相应的表空间<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">出现<span lang="EN-US">ORA-600</span>根据日志文件的内容查看相应的<span lang="EN-US">TRC</span>文件，如果是<span lang="EN-US">Oracle</span>的<span lang="EN-US">bug</span>，要及时打上相应的补丁</span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><a id="more"></a>
<strong><span style="font-size: 9pt; font-family: 宋体; color: black">    二、数据库表空间使用情况监控<span lang="EN-US">(</span>字典管理表空间<span lang="EN-US">) </span></span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">数据库运行了一段时间后，由于不断的在表空间上创建和删除对象，会在表空间上产生大量的碎片，<span lang="EN-US">DBA</span>应该及时了解表空间的碎片和可用空间情况，以决定是否要对碎片进行整理或为表空间增加数据文件。<span lang="EN-US"> </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">select tablespace_name, </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">count(*) chunks , </span></code>
<code><span style="font-family: 新宋体">max(bytes/1024/1024) max_chunk </span></code>
<code><span style="font-family: 新宋体">from dba_free_space </span></code>
<code><span style="font-family: 新宋体">group by tablespace_name; </span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">上面的<span lang="EN-US">SQL</span>列出了数据库中每个表空间的空闲块情况<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">其中，<span lang="EN-US">CHUNKS</span>列表示表空间中有多少可用的空闲块<span lang="EN-US">(</span>每个空闲块是由一些连续的<span lang="EN-US">Oracle</span>数据块组成<span lang="EN-US">)</span>，如果这样的空闲块过多，比如平均到每个数据文件上超过了<span lang="EN-US">100</span>个，那么该表空间的碎片状况就比较严重了，可以尝试用以下的<span lang="EN-US">SQL</span>命令进行表空间相邻碎片的接合<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">alter tablespace </span><span style="font-size: 9pt; color: black">表空间名<span lang="EN-US"> coalesce; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">对表空间的扩充对表空间的数据文件大小进行扩展，或向表空间增加数据文件，例如：<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">alter database datafile ‘filename’ resize 2g;</span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">alter tablespace add datafile ‘filename’ size 2g;</span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">三、查看数据库的连接情况 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">DBA</span><span style="font-size: 9pt; color: black">要定时对数据库的连接情况进行检查，看与数据库建立的会话数目是不是正常，如果建立了过多的连接，会消耗数据库的资源。同时，对一些<span lang="EN-US">“</span>挂死<span lang="EN-US">”</span>的连接，可能会需要<span lang="EN-US">DBA</span>手工进行清理。<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">以下的<span lang="EN-US">SQL</span>语句列出当前数据库建立的会话情况<span lang="EN-US">: </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">select sid,serial#,username,program,machine,status </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">from v$session;</span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"> </span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果<span lang="EN-US">DBA</span>要手工断开某个会话，则执行<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">alter system kill session 'SID,SERIAL#'; </span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">四、备份 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">控制文件的备份：<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">在数据库结构发生变化时，如增加了表空间，增加了数据文件或重做日志文件这些操作，都会造成<span lang="EN-US">Oracle</span>数据库控制文件的变化，<span lang="EN-US">DBA</span>应及进行控制文件的备份，备份方法是<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">执行<span lang="EN-US">SQL</span>语句<span lang="EN-US">: </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">alter database </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">backup controlfile to '/home/backup/control.bak'; </span></code>
</span><span style="font-size: 9pt; color: black">或<span lang="EN-US">: </span></span>

</p><p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">alter database </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">backup controlfile to trace; </span></code>
</span><span style="font-size: 9pt; color: black">这样，会在<span lang="EN-US">USER_DUMP_DEST(</span>初始化参数文件中指定<span lang="EN-US">)</span>目录下生成创建控制文件的<span lang="EN-US">SQL</span>命令。 <span lang="EN-US"></span></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">数据逻辑备份：<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">导出：<span lang="EN-US">exp wd/******* file=***.dmp owner=wd</span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">导入：<span lang="EN-US">imp wd/******* file=***.dmp fromuser=wd touser=wd</span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span lang="EN-US" style="font-size: 9pt; font-family: 宋体; color: black"> </span></strong></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">五、检查数据库文件的状态 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">DBA</span><span style="font-size: 9pt; color: black">要及时查看数据库中数据文件的状态<span lang="EN-US">(</span>如被误删除<span lang="EN-US">)</span>，根据实际情况决定如何进行处理，检查数据文件的状态的<span lang="EN-US">SQL</span>如下<span lang="EN-US">: </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">select file_name,status </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">from dba_data_files;</span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"> </span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果数据文件的<span lang="EN-US">STATUS</span>列不是<span lang="EN-US">AVAILABLE</span>，那么就要采取相应的措施，如对该数据文件进行恢复操作，或重建该数据文件所在的表空间。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">六、检查数据库定时作业的完成情况 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果数据库使用了<span lang="EN-US">Oracle</span>的<span lang="EN-US">JOB</span>来完成一些定时作业，要对这些<span lang="EN-US">JOB</span>的运行情况进行检查<span lang="EN-US">: </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">select job,log_user,last_date,failures </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">from dba_jobs; </span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果<span lang="EN-US">FAILURES</span>列是一个大于<span lang="EN-US">0</span>的数的话，说明<span lang="EN-US">JOB</span>运行失败，要进一步的检查。<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">七、数据库坏块的处理 </span></strong><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">当<span lang="EN-US">Oracle</span>数据库出现坏块时，<span lang="EN-US">Oracle</span>会在警告日志文件<span lang="EN-US">(alert_SID.log)</span>中记录坏块的信息<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">ORA-01578: ORACLE data block corrupted (file # 7, block # ) </span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">ORA-01110: data file : '/oracle1/oradata/V920/oradata/V816/users01.dbf' </span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">其中， 代表坏块所在数据文件的绝对文件号， 代表坏块是数据文件上的第几个数据块<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">出现这种情况时，应该首先检查是否是硬件及操作系统上的故障导致<span lang="EN-US">Oracle</span>数据库出现坏块。在排除了数据库以外的原因后，再对发生坏块的数据库对象进行处理。<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">1.</span><span style="font-size: 9pt; color: black">确定发生坏块的数据库对象<span lang="EN-US"> </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">SELECT tablespace_name, </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">segment_type, </span></code>
<code><span style="font-family: 新宋体">owner, </span></code>
<code><span style="font-family: 新宋体">segment_name </span></code>
<code><span style="font-family: 新宋体">FROM dba_extents </span></code>
<code><span style="font-family: 新宋体">WHERE file_id = </span></code>
<code><span style="font-family: 新宋体">AND </span></code>
<code><span style="font-family: 新宋体">between block_id AND block_id+blocks-1; </span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">2.</span><span style="font-size: 9pt; color: black">决定修复方法<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果发生坏块的对象是一个索引，那么可以直接把索引<span lang="EN-US">DROP</span>掉后，再根据表里的记录进行重建<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果发生坏块的表的记录可以根据其它表的记录生成的话，那么可以直接把这个表<span lang="EN-US">DROP</span>掉后重建<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果有数据库的备份，则恢复数据库的方法来进行修复<span lang="EN-US">; </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">如果表里的记录没有其它办法恢复，那么坏块上的记录就丢失了，只能把表中其它数据块上的记录取出来，然后对这个表进行重建。<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">3.</span><span style="font-size: 9pt; color: black">用<span lang="EN-US">Oracle</span>提供的<span lang="EN-US">DBMS_REPAIR</span>包标记出坏块<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">exec DBMS_REPAIR.SKIP_CORRUPT_BLOCKS(' ',''); </span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">4.</span><span style="font-size: 9pt; color: black">使用<span lang="EN-US">Create table as select</span>命令将表中其它块上的记录保存到另一张表上<span lang="EN-US"> </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">create table corrupt_table_bak </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">as </span></code>
<code><span style="font-family: 新宋体">select * from corrupt_table; </span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">5.</span><span style="font-size: 9pt; color: black">用<span lang="EN-US">DROP TABLE</span>命令删除有坏块的表<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">drop table corrup_tatble; </span></code><span lang="EN-US" style="font-size: 9pt; color: black"></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">6.</span><span style="font-size: 9pt; color: black">用<span lang="EN-US">alter table rename</span>命令恢复原来的表<span lang="EN-US"> </span></span></p>

<p style="text-indent: 24pt; line-height: 13.5pt"><code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">alter table corrupt_table_bak </span></code><span lang="EN-US" style="font-size: 10pt; font-family: 新宋体; color: black">
<code><span style="font-family: 新宋体">rename to corrupt_table; </span></code></span><span lang="EN-US" style="font-size: 9pt; color: black"></span>
</p><p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">7.</span><span style="font-size: 9pt; color: black">如果表上存在索引，则要重建表上的索引<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; font-family: 宋体; color: black">八、操作系统相关维护 <span lang="EN-US"></span></span></strong></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">DBA</span><span style="font-size: 9pt; color: black">要注意对操作系统的监控<span lang="EN-US">: </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●文件系统的空间使用情况<span lang="EN-US">(df -k)</span>，必要时对<span lang="EN-US">Oracle</span>的警告日志及<span lang="EN-US">TRC</span>文件进行清理<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●如果<span lang="EN-US">Oracle</span>提供网络服务，检查网络连接是否正常<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●检查操作系统的资源使用情况是否正常<span lang="EN-US"> </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">●检查数据库服务器有没有硬件故障，如磁盘、内存报错<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><strong><span style="font-size: 9pt; color: black">九、数据库背景知识<span lang="EN-US"></span></span></strong></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">配置文件<span lang="EN-US">   </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">spfile</span><span style="font-size: 9pt; color: black">，位于<span lang="EN-US">$ORACLE_HOME/dbs/spfile<oracle_sid>.ora,</oracle_sid></span>是一个二进制文件，不能直接编辑，<span lang="EN-US">Oracle9i</span>之后默认使用<span lang="EN-US">spfile</span>。可以通过<span lang="EN-US">alter system set </span>×××<span lang="EN-US">=</span>×××<span lang="EN-US">;</span>来修改参数，大部分参数修改后不用重启数据库。可以通过执行<span lang="EN-US">show parameter spfile</span>来查看是否使用了<span lang="EN-US">spfile</span>，如果执行结果为空，则数据库没有使用<span lang="EN-US">spfile</span>。执行<span lang="EN-US">create spfile from pfile; </span>然后重启数据库就启用了<span lang="EN-US">spfile</span>。<span lang="EN-US">   </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">pfile</span><span style="font-size: 9pt; color: black">，位于<span lang="EN-US">$ORACLE_HOME/dbs/init<oracle_sid>.ora</oracle_sid></span>，是一个<span lang="EN-US">ASCII</span>文件可以编辑，修改参数后需要重启数据库。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">tnsnames.ora, </span><span style="font-size: 9pt; color: black">位于<span lang="EN-US">$ORACLE_HOME/network/admin/tnsnames.ora, </span>记录了服务明的信息。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">listener.ora, </span><span style="font-size: 9pt; color: black">位于<span lang="EN-US">$ORACLE_HOME/network/admin/listener.ora</span>，记录了<span lang="EN-US">listener</span>的信息。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">日志文件<span lang="EN-US">   </span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">alert, </span><span style="font-size: 9pt; color: black">位于<span lang="EN-US">$ORACLE_BASE/admin/$ORACLE_SID/bdump/alert<$oracle_sid>.log, Oracle</$oracle_sid></span>的报警日志，如数据库出错可以在此文件中查看。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">redo, </span><span style="font-size: 9pt; color: black">位于<span lang="EN-US">$ORACLE_BASE/oradata/redo</span>××<span lang="EN-US">.log</span>，<span lang="EN-US">Orale</span>重做日志。<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">启动<span lang="EN-US">/</span>停止<span lang="EN-US">ORACLE</span>：<span lang="EN-US"></span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">以<span lang="EN-US">sysdba</span>权限登陆<span lang="EN-US">sqlplus</span>，<span lang="EN-US"></span></span></p>
<p style="text-indent: 42pt; line-height: 13.5pt"><span style="font-size: 9pt; color: black">停止：<span lang="EN-US">shutdown immediate</span></span></p>
<p style="text-indent: 24pt; line-height: 13.5pt"><span lang="EN-US" style="font-size: 9pt; color: black">    </span><span style="font-size: 9pt; color: black">启动：<span lang="EN-US">startup</span></span></p>
]]></content>
    
    <summary type="html">
    
      &lt;h4 align=&quot;center&quot; style=&quot;text-align: center; line-height: 13.5pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;color: black&quot;&gt;Oracle&lt;/span&gt;&lt;span style=&quot;color: black&quot;&gt;数据库日常维护手册&lt;span lang=&quot;EN-US&quot;&gt;&lt;/span&gt;&lt;/span&gt;&lt;/h4&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;在&lt;span lang=&quot;EN-US&quot;&gt;Oracle&lt;/span&gt;数据库运行期间，&lt;span lang=&quot;EN-US&quot;&gt;DBA&lt;/span&gt;应该对数据库的运行日志及表空间的使用情况进行监控，及早发现数据库中存在的问题。&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;strong&gt;&lt;span style=&quot;font-size: 9pt; font-family: 宋体; color: black&quot;&gt;一、&lt;span lang=&quot;EN-US&quot;&gt;Oracle&lt;/span&gt;警告日志文件监控 &lt;/span&gt;&lt;/strong&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size: 9pt; color: black&quot;&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size: 9pt; color: black&quot;&gt;Oracle&lt;/span&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;在运行过程中，会在警告日志文件&lt;span lang=&quot;EN-US&quot;&gt;(alert_SID.log)&lt;/span&gt;中记录数据库的一些运行情况&lt;span lang=&quot;EN-US&quot;&gt;: &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;●数据库的启动、关闭，启动时的非缺省参数&lt;span lang=&quot;EN-US&quot;&gt;; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;●数据库的重做日志切换情况，记录每次切换的时间，及如果因为检查点&lt;span lang=&quot;EN-US&quot;&gt;(checkpoint)&lt;/span&gt;操作没有执行完成造成不能切换，会记录不能切换的原因&lt;span lang=&quot;EN-US&quot;&gt;; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;●对数据库进行的某些操作，如创建或删除表空间、增加数据文件&lt;span lang=&quot;EN-US&quot;&gt;; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;●数据库发生的错误，如表空间不够、出现坏块、数据库内部错误&lt;span lang=&quot;EN-US&quot;&gt;(ORA-600) &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span lang=&quot;EN-US&quot; style=&quot;font-size: 9pt; color: black&quot;&gt;DBA&lt;/span&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;应该定期检查日志文件，根据日志中发现的问题及时进行处理&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;问题处理&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;启动参数不对检查初始化参数文件&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;因为检查点操作或归档操作没有完成造成重做日志不能切换如果经常发生这样的情况，可以考虑增加重做日志文件组&lt;span lang=&quot;EN-US&quot;&gt;;&lt;/span&gt;想办法提高检查点或归档操作的效率&lt;span lang=&quot;EN-US&quot;&gt;; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;有人未经授权删除了表空间检查数据库的安全问题，是否密码太简单&lt;span lang=&quot;EN-US&quot;&gt;;&lt;/span&gt;如有必要，撤消某些用户的系统权限&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;出现坏块检查是否是硬件问题&lt;span lang=&quot;EN-US&quot;&gt;(&lt;/span&gt;如磁盘本生有坏块&lt;span lang=&quot;EN-US&quot;&gt;)&lt;/span&gt;，如果不是，检查是那个数据库对象出现了坏块，对这个对象进行重建&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;表空间不够增加数据文件到相应的表空间&lt;span lang=&quot;EN-US&quot;&gt; &lt;/span&gt;&lt;/span&gt;&lt;/p&gt;
&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;&lt;span style=&quot;font-size: 9pt; color: black&quot;&gt;出现&lt;span lang=&quot;EN-US&quot;&gt;ORA-600&lt;/span&gt;根据日志文件的内容查看相应的&lt;span lang=&quot;EN-US&quot;&gt;TRC&lt;/span&gt;文件，如果是&lt;span lang=&quot;EN-US&quot;&gt;Oracle&lt;/span&gt;的&lt;span lang=&quot;EN-US&quot;&gt;bug&lt;/span&gt;，要及时打上相应的补丁&lt;/span&gt;&lt;/p&gt;

&lt;p style=&quot;text-indent: 24pt; line-height: 13.5pt&quot;&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="监控" scheme="http://wdicc.com/tags/%E7%9B%91%E6%8E%A7/"/>
    
  </entry>
  
  <entry>
    <title>可以关闭的linux系统服务</title>
    <link href="http://wdicc.com/service-can-stop/"/>
    <id>http://wdicc.com/service-can-stop/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[转自车东的blog

sudo /sbin/chkconfig --list| grep 3:on | awk '{print "/sbin/chkconfig "$1" off"}'
/sbin/chkconfig acpid off
/sbin/chkconfig anacron off
/sbin/chkconfig apmd off
/sbin/chkconfig auditd off
/sbin/chkconfig autofs off
/sbin/chkconfig bluetooth off
/sbin/chkconfig cpuspeed off
/sbin/chkconfig cups off
/sbin/chkconfig gpm off
/sbin/chkconfig haldaemon off
/sbin/chkconfig iptables off
/sbin/chkconfig isdn off
/sbin/chkconfig kudzu off
/sbin/chkconfig mDNSResponder off
/sbin/chkconfig mdmonitor off
/sbin/chkconfig messagebus off
/sbin/chkconfig netfs off
/sbin/chkconfig nfslock off
/sbin/chkconfig nifd off
/sbin/chkconfig pcmcia off
/sbin/chkconfig portmap off
/sbin/chkconfig rhnsd off
/sbin/chkconfig rpcgssd off
/sbin/chkconfig rpcidmapd off
/sbin/chkconfig sendmail off
/sbin/chkconfig xfs off
]]></content>
    
    <summary type="html">
    
      转自车东的blog

sudo /sbin/chkconfig --list| grep 3:on | awk &#39;{print &quot;/sbin/chkconfig &quot;$1&quot; off&quot;}&#39;
/sbin/chkconfig acpid off
/sbin/chkconfig anacr
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>数据恢复步骤</title>
    <link href="http://wdicc.com/recover-date/"/>
    <id>http://wdicc.com/recover-date/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-sql">
切换到oracle用户
sqlplus
conn / as sysdba
drop user <user> cascade;
create user <user> identified by <password> default tablespace <tablespace>;
exit
imp <user>/<password> file=<file_name> fromuser=<user> touser=<user>
</user></user></file_name></password></user></tablespace></password></user></user></pre>

<pre class="prettyprint lang-txt">
*<user>为要恢复的用户，<password>为其密
</password></user></pre>]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
切换到oracle用户
sqlplus
conn / as sysdba
drop user &lt;user&gt; cascade;
create user &lt;user&gt; identified by &lt;password
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="恢复" scheme="http://wdicc.com/tags/%E6%81%A2%E5%A4%8D/"/>
    
  </entry>
  
  <entry>
    <title>Oracle10g EM乱码之快速解决</title>
    <link href="http://wdicc.com/oracle-em-encoding/"/>
    <id>http://wdicc.com/oracle-em-encoding/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来源 <a target="_blank" href="http://www.eygle.com/archives/2006/03/oracle10g_em_font_change.html">这里</a>

一直没怎么用10g的EM工具,今天打开来看看,发现也有相传已久的乱码问题.网上也流传着N种解决方案,仔细看一下,其实这个问题很好解决.

如果安装时,我们系统环境变量设置的是中文环境,那么就不会有这个问题.这个问题根本原因在于安装时,JDK/JRE字符集的自动选择.

在 $ORACLE_HOME/jdk/jre/lib 和 $ORACLE_HOME/jre/1.4.2/lib/ 目录下都有多种字符集字体配置文件:
<a id="more"></a>
[oracle@danaly ~]$ cd $ORACLE_HOME/jdk/jre/lib
[oracle@danaly lib]$ ls font*zh_CN*
font.properties.zh_CN.Redhat  font.properties.zh_CN.Redhat2.1
font.properties.zh_CN.Sun  font.properties.zh_CN_UTF8.Sun

[oracle@danaly lib]$ cd $ORACLE_HOME/jre/1.4.2/lib/
[oracle@danaly lib]$ ls font*zh_CN*
font.properties.zh_CN.Redhat  font.properties.zh_CN.Redhat2.1
font.properties.zh_CN.Sun  font.properties.zh_CN_UTF8.Sun

我们只要用合适的中文字符集文件替换缺省文件即可,我选择使用font.properties.zh_CN.Redhat来替换缺省字体定义文件:

[oracle@danaly lib]$ cp font.properties.zh_CN.Redhat font.properties

替换之后需要清理一下Cache,重启EM即可.

Cache路径通常位于:

$ORACLE_HOME/oc4j/j2ee/oc4j_applications/applications/em/em/cabo/images/cache/zhs

清除所有gif文件即可.然后重新启动EM:

[oracle@danaly zhs]$ emctl stop dbconsole
TZ set to PRC
Oracle Enterprise Manager 10g Database Control Release 10.2.0.1.0
Copyright (c) 1996, 2005 Oracle Corporation.  All rights reserved.
http://danaly.hurrray.com.cn:1158/em/console/aboutApplication
Stopping Oracle Enterprise Manager 10g Database Control ...
...  Stopped.
[oracle@danaly zhs]$ emctl start dbconsole
TZ set to PRC
Oracle Enterprise Manager 10g Database Control Release 10.2.0.1.0
Copyright (c) 1996, 2005 Oracle Corporation.  All rights reserved.
http://danaly.hurrray.com.cn:1158/em/console/aboutApplication
Starting Oracle Enterprise Manager 10g Database Control .............. started.
------------------------------------------------------------------
Logs are generated in directory
/opt/oracle/product/10.2.0/danaly.hurrray.com.cn_danaly/sysman/log

现在登陆Web页面,EM显示就可以正常显示中文了.
]]></content>
    
    <summary type="html">
    
      来源 &lt;a target=&quot;_blank&quot; href=&quot;http://www.eygle.com/archives/2006/03/oracle10g_em_font_change.html&quot;&gt;这里&lt;/a&gt;

一直没怎么用10g的EM工具,今天打开来看看,发现也有相传已久的乱码问题.网上也流传着N种解决方案,仔细看一下,其实这个问题很好解决.

如果安装时,我们系统环境变量设置的是中文环境,那么就不会有这个问题.这个问题根本原因在于安装时,JDK/JRE字符集的自动选择.

在 $ORACLE_HOME/jdk/jre/lib 和 $ORACLE_HOME/jre/1.4.2/lib/ 目录下都有多种字符集字体配置文件:
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
      <category term="乱码" scheme="http://wdicc.com/tags/%E4%B9%B1%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>weblogic安装</title>
    <link href="http://wdicc.com/install-weblogic/"/>
    <id>http://wdicc.com/install-weblogic/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[WebLogic Server (LINUX平台)简明安装手册

首先下载weblogic。在公司的fs服务器上面有已经下载好的版本。

将要安装的版本（以813为例）上传到服务器，然后下面都用root用户操作。这里讲解的都是远程安装，没有使用图形界面。

#chmod   +x   server81x_linux32.bin
#./ server813_linux32.bin

稍等片刻会出来weblogic的安装界面。

<a id="more"></a>
Extracting 0%....................................................................................................100%
<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Welcome:
--------
This installer will guide you through the installation of WebLogic Server 8.1 SP3. Type "Next" or enter to proceed to the next prompt.  If you want to change data entered previously, type "Previous".  You may quit the installer at any time by typing "Exit".
Enter [Exit][Next]>Next

直接按回车。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
BEA Systems License Agreement:
------------------------------
BEA SYSTEMS, INC. SOFTWARE LICENSE AGREEMENT
USE OF SOFTWARE ORDERED FROM BEA SYSTEMS, INC. ("BEA") IS PROVIDED ONLY UNDER LICENSE FROM BEA. PLEASE
READ THE FOLLOWING LICENSE CAREFULLY AND INDICATE YOUR ACCEPTANCE BY CLICKING THE ACCEPTANCE BOX. CERTAIN
CAPITALIZED TERMS ARE DEFINED IN SECTION  11.
1.      LICENSE TERMS
a.      Workshop Free Use.  The terms of this Section 1(a) are applicable to you if you have registered as a Workshop Free customer. Subject to the terms of this Agreement, BEA grants to you a non-exclusive,
non-transferable, royalty-free license to use Workshop Free solely for Development Use and Scale-Limited
Personal Use for the number of users and/or developers and the number of CPU's, Servers and/or at the
Sites, as specified at the time of registration. Third party software products or modules supplied by BEA, if any, may be used solely with the Software. All rights not specifically granted to you herein are
retained by BEA.
b.      Workshop Pro Use.  The terms of this Section 1(b) are applicable to you if you have registered as
a Workshop Pro customer. Subject to the terms of this Agreement, BEA grants to you a non-exclusive,
non-transferable, fee-bearing license to use Workshop Pro solely for Development Use and Scale-Limited
Commercial Use for the number of users and/or developers and the number of CPU's, Servers and/or at the
Sites, as specified on BEA's invoice. Third party software products or modules supplied by BEA, if any,
may be used solely with the Software. All rights not specifically granted to you herein are retained by
Select Option:
1 - Yes, I agree with the terms of the license
2 - No, I do not agree with the terms of the license
Enter option number to select OR [Down][Exit][Previous]>1

这里问是否同意weblogic的协议，输入1回车。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose BEA Home Directory:
--------------------------
*BEA home choice
1|Create a new BEA Home [/root/bea]
->2|Use an existing BEA Home [/usr/local/bea]
Enter index number to select OR [Exit][Previous][Next]>1

让选择一个bea的目录，这里我们要设置为/usr/local/wls813/bea。先选1，会出来下面的界面。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose BEA Home Directory:
--------------------------
"BEA Home" = [/root/bea]
Input new BEA Home OR [Exit][Previous][Next]> /usr/local/wls813/bea

输入bea的目录，也就是/usr/local/wls813/bea。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose BEA Home Directory:
--------------------------
*BEA home choice
->1|Yes, Use this BEA home directory [/usr/local/wls813/bea]
2|No, return to BEA home directory selection
Enter index number to select OR [Exit][Previous][Next]> 1

让确认一下。选1确认。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose Install Type:
--------------------
->1|Complete
|Install the complete BEA WebLogic Platform.
2|Custom Installation
|Choose software components to install and perform optional configuration.
Enter index number to select OR [Exit][Previous][Next]> 2

选择安装类型，我们选择2，自定义安装。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose Components to install:
-----------------------------
Release 8.1.3.0
|_____WebLogic Server [1]
|    |_____Server [1.1]
|    |_____Server Examples [1.2]
|_____WebLogic Workshop [2]
|_____Workshop Runtime Framework [2.1]
|_____WebLogic Workshop Application Developer Edition [2.2]
|_____Workshop Samples [2.3]
Enter number exactly as it appears in brackets to toggle selection OR [Exit][Previous][Next]> 1

选择要安装的组件，选1，只安装weblogic server。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose Components to install:
-----------------------------
Release 8.1.3.0
|_____WebLogic Server [1] x
|    |_____Server [1.1] x
|    |_____Server Examples [1.2] x
|_____WebLogic Workshop [2]
|_____Workshop Runtime Framework [2.1]
|_____WebLogic Workshop Application Developer Edition [2.2]
|_____Workshop Samples [2.3]
Enter number exactly as it appears in brackets to toggle selection OR [Exit][Previous][Next]> Next

选好之后按回车继续

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose Components to install:
-----------------------------
->1|Yes, use these component selections
2|No, return to component selection
Enter index number to select OR [Exit][Next]> 1

选1确认组件选择。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Choose Product Directory:
-------------------------
"Product Installation Directory" = [/usr/local/wls813/weblogic81]
Input new Product Installation Directory OR [Exit][Previous][Next]>/usr/local/wls813

选择安装路径，这里要输入/usr/local/wls813。此后还有一个确认。

<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Installing files..
0%          25%          50%          75%          100%
[------------|------------|------------|------------]
[***************************************************]
<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">
Installing JDK....
0%          25%          50%          75%          100%
[------------|------------|------------|------------]
[***************************************************]
<-------------------------------- bea="" installer="" -="" weblogic="" server="" 8.1="" sp3="" -------------------------------="">

开始安装，此时会出现一个模拟的进度条，耐心等待，直到100%。

Installation Complete
Congratulations! WebLogic Server 8.1 SP3 has been successfully installed to /usr/local/wls813.
Press any key to continue OR [Exit]>

至此，Weblogic8.1 sp3已成功安装到目录/usr/local/wls813下。

安装完之后，还需要新建一个域。新建域的方法是使用/usr/local/wls813/common/bin/config.sh命令。

-------------------------------------------- BEA WebLogic Configuration Wizard ------------------------------------------->

Create or Extend a Configuration:
---------------------------------

Choose between creating and extending a configuration. Based on your selection, the Configuration Wizard guides you through
the steps to generate a new or extend an existing configuration.

->1|Create a new WebLogic configuration
|    Start here to create a WebLogic configuration in your projects directory.

2|Extend an existing WebLogic configuration
|    Start here to extend an existing WebLogic configuration.  Use this option to add applications and services,
|including Database access (JDBC) and Messaging (JMS). This option also enables you to extend functionality by enabling
|WebLogic Workshop.

Enter index number to select OR [Exit][Next]>

选1，新建一个域。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Select a Domain Template:
-------------------------

Please select a template from the list or select another directory of templates.

* [/usr/local/wls813/common/templates/domains]

->1|Basic WebLogic Server Domain 8.1.3.0
|  BEA Systems, Inc.
|  Create a basic WebLogic Server domain without installing sample applications.

2|WebLogic Server Examples Domain 8.1.3.0
|  BEA Systems, Inc.
|  Create the WebLogic Server Examples domain in a directory outside of the installed kit.  The Examples domain contains     |a collection of examples to show best practices for coding individual J2EE APIs.

3|Avitek Medical Records Sample Domain 8.1.3.0
|  BEA Systems, Inc.
|  Create the Avitek Medical Records domain in a directory outside of the installed kit.  The Avitek Medical Records is
|a WebLogic Server sample application suite that concisely demonstrates all aspects of the J2EE platform.

4|Select another directory location

Enter index number to select OR [Exit][Previous][Next]>

选1，基本的wls域。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Choose Configuration Option:
----------------------------

*Do you want to run the wizard in express mode?

->1|Yes

2|No

Enter index number to select OR [Exit][Previous][Next]>

选1。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Configure Administrative Username and Password:
-----------------------------------------------

Create a user automatically assigned to the Administrative Role. This user is the default administrator used to start
development mode servers.

|          Name           |              Value              |
_|_________________________|_________________________________|
1|       *User name:       |            weblogic             |
2|     *User password:     |                                 |
3| *Confirm user password: |                                 |
4|      Description:       | The default administration user |

Select Option:
1 - Modify "User name"
2 - Modify "User password"
3 - Modify "Confirm user password"
4 - Modify "Description"

Enter option number to select OR [Exit][Previous][Next]>

在这个界面设置user name为system，并设置密码。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Configure Administrative Username and Password:
-----------------------------------------------

Create a user automatically assigned to the Administrative Role. This user is the default administrator used to start
development mode servers.

|          Name           |              Value              |
_|_________________________|_________________________________|
1|       *User name:       |             system              |
2|     *User password:     |            ********             |
3| *Confirm user password: |            ********             |
4|      Description:       | The default administration user |

Select Option:
1 - Modify "User name"
2 - Modify "User password"
3 - Modify "Confirm user password"
4 - Modify "Description"
5 - Discard Changes

Enter option number to select OR [Exit][Previous][Next]>

都设置好之后，回车继续。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Domain Mode Configuration:
--------------------------

Enable Development or Production Mode for this domain.

->1|Development Mode

2|Production Mode

Enter index number to select OR [Exit][Previous][Next]>

这里选择1，使用开发模式。因为我们经常需要重新启动weblogic，而使用产品模式的话，停止weblogic的时候是需要输入用户名密码的。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Java SDK Selection:
-------------------

->1|JRockit SDK 1.4.2_04-8130 @ /usr/local/wls813/bea/jrockit81sp3_142_04
2|Sun SDK 1.4.2_04 @ /usr/local/wls813/bea/jdk142_04
3|Other Java SDK

Enter index number to select OR [Exit][Previous][Next]>

根据应用需要选择sdk，通常选择1。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Select the target domain directory for this configuration:
----------------------------------------------------------

"Target Location" = [/usr/local/wls813/user_projects/domains]

Input new Target Location OR [Exit][Previous][Next]>

选择域的安装位置，这里我们选择/usr/local/wls813/。

<-------------------------------------------- bea="" weblogic="" configuration="" wizard="" -------------------------------------------="">

Edit Domain Information:
------------------------

|  Name  |  Value   |
_|________|__________|
1| *Name: | mydomain |

Enter value for "Name" OR [Exit][Previous][Next]>

设置域名，，具体是anymusic还是xstyle，看需要。在下一步确认。然后就会出现安装的进度条，等待片刻即可安装完毕。

域安装完毕之后，要为域做一个链接
ln -s /usr/local/wls813/anymusic /usr/local/wls

这样，以后访问/usr/local/wls就可以访问到域目录。

接下来还需要给安装的weblogic添加license，否则只能接收3个ip的连接。fs上面有相关文件，解压之后将weblogic_sp.jar放到/usr/local/wls813/server/lib/下面，将license.bea放到/usr/local/wls813/bea下面。

启动weblogic的命令为
/usr/local/wls/startWebLogic.sh
第一次启动可能需要用户名密码。启动时看到
</--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></--------------------------------></-------------------------------->]]></content>
    
    <summary type="html">
    
      WebLogic Server (LINUX平台)简明安装手册

首先下载weblogic。在公司的fs服务器上面有已经下载好的版本。

将要安装的版本（以813为例）上传到服务器，然后下面都用root用户操作。这里讲解的都是远程安装，没有使用图形界面。

#chmod   +x   server81x_linux32.bin
#./ server813_linux32.bin

稍等片刻会出来weblogic的安装界面。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>mysql安装</title>
    <link href="http://wdicc.com/install-mysql-2/"/>
    <id>http://wdicc.com/install-mysql-2/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 download mysql5.0
2
shell> groupadd mysql
shell> useradd -g mysql mysql
shell> cd /usr/local
shell> gunzip < /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -
shell> ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql
shell> cd mysql
shell> scripts/mysql_install_db --user=mysql
<a id="more"></a>
如下提示信息:

Installing all prepared tables
Fill help tables

To start mysqld at boot time you have to copy support-files/mysql.server
to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:
./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h czhand password 'new-password'
See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &

You can test the MySQL daemon with the benchmarks in the 'sql-bench' directory:
cd sql-bench ; perl run-all-tests

Please report any problems with the ./bin/mysqlbug script!

The latest information about MySQL is available on the web at
http://www.mysql.com
Support MySQL by buying support/licenses at https://order.mysql.com

shell> chown -R root  .
shell> chown -R mysql data
shell> chgrp -R mysql .

/home/my.cnf

basedir=/usr/local/mysql
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/data/mysql.sock
#err-log=/var/log/mysqld.log
pid-file=/usr/local/mysql/data/mysqld.pid

shell> bin/mysqld_safe --user=mysql &

事实上，mysql.sock放到data目录是会出现问题的，因为data目录只有mysql用户可读，用php连接数据库的时候就会出现问题。所以，上面的最好修改一下。
]]></content>
    
    <summary type="html">
    
      1 download mysql5.0
2
shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db --user=mysql
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="mysql" scheme="http://wdicc.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>几道有趣的数学题</title>
    <link href="http://wdicc.com/funny-math/"/>
    <id>http://wdicc.com/funny-math/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144582/%EF%BF%BD%EF%BF%BD%EF%BF%BD_2.html" target="_blank" rel="external"><img width="240" height="172" border="0" alt="æ�°å­¦é¢�_2" src="http://static.flickr.com/73/207144582_bfa3cf060e_m.jpg"></a> <a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144580/%EF%BF%BD%EF%BF%BD%EF%BF%BD_1.html" target="_blank" rel="external"><img width="240" height="220" border="0" alt="æ�°å­¦é¢�_1" src="http://static.flickr.com/60/207144580_12b95f5196_m.jpg"></a> <a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144582/%EF%BF%BD%EF%BF%BD%EF%BF%BD_2.html" target="_blank" rel="external"><a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144583/%EF%BF%BD%EF%BF%BD%EF%BF%BD_3.html" target="_blank" rel="external"><a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144583/%EF%BF%BD%EF%BF%BD%EF%BF%BD_3.html" target="_blank" rel="external"><img width="194" height="240" border="0" alt="æ�°å­¦é¢�_3" src="http://static.flickr.com/97/207144583_f46da70ce6_m.jpg"></a>   <a class="tt-flickr" href="http://blog.wdicc.com/wordpress/Photos/photo/207144584/%EF%BF%BD%EF%BF%BD%EF%BF%BD_4.html" target="_blank" rel="external"><img width="240" height="176" border="0" alt="æ�°å­¦é¢�_4" src="http://static.flickr.com/88/207144584_2d591c805e_m.jpg"></a> <img id="image225" alt="6465.gif" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/6465.gif">
</a></a>]]></content>
    
    <summary type="html">
    
      &lt;a class=&quot;tt-flickr&quot; href=&quot;http://blog.wdicc.com/wordpress/Photos/photo/207144582/%EF%BF%BD%EF%BF%BD%EF%BF%BD_2.html&quot; target=&quot;_blank&quot; rel=&quot;e
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
      <category term="funny" scheme="http://wdicc.com/tags/funny/"/>
    
  </entry>
  
  <entry>
    <title>oracle修改用户密码</title>
    <link href="http://wdicc.com/change-username-in-oracle/"/>
    <id>http://wdicc.com/change-username-in-oracle/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[如果用户是在服务器端使用数据库，那么可以用Oracle提供的SQLPlus进行数据库操作，假设要更改用户口令，可以这样做：

sqlplus user/password

sql>alter user sys identified by new_password;

sql>exit
]]></content>
    
    <summary type="html">
    
      如果用户是在服务器端使用数据库，那么可以用Oracle提供的SQLPlus进行数据库操作，假设要更改用户口令，可以这样做：

sqlplus user/password

sql&gt;alter user sys identified by new_password;

sql&gt;ex
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>Weblogic服务器性能调优</title>
    <link href="http://wdicc.com/weblogic-turning/"/>
    <id>http://wdicc.com/weblogic-turning/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来源 <a target="_blank" href="http://www.mikecat.net/BlogView.asp?logID=1489">这里</a>

注：在下面做的介绍都是以Weblogic8.1为例的，其它版本的Weblogic可能会有些许不同。

1) 设置JAVA参数；

a) 编辑Weblogic Server启动脚本文件；

BEA_HOME\user_projects\domains\domain-name\startWebLogic.cmd(startWebLogic.sh on Unix)

BEA_HOME\user_projects\domains\domain-name\startManagedWebLogic.cmd(startManagedWebLogic.sh on Unix)

b) 编辑set JAVA_OPTIONS命令，如：set JAVA_OPTIONS=-Xms256m –Xmx256m；

c) 保存，重启即可。

注：在WebLogic中，为了获得更好的性能，BEA公司推荐最小Java堆等于最大Java堆。
<a id="more"></a>
2) 开发模式 vs. 产品模式；

开发模式和产品模式的一些参数的默认值不同，可能会对性能造成影响，下面是对性能有影响的参数列表：

参数

开发模式默认值

产品模式默认值

Execute Queue: Thread Count

15 threads

25 threads

JDBC Connection Pool: MaxCapacity

15 connnections

25 connections

通过启动管理控制台，在域（如：mydomain）> 配置 > 常规选择产品模式。

3) 尽量开启本地I/O；

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）> 配置 > 调整选择启用本地I/O。

注：此值也可通过手动的修改config.xml配置文件。

4) 调优执行队列线程；

a) 修改默认执行线程数

在这里，执行队列的线程数表示执行队列能够同时执行的操作的数量。但此值不是设的越大越好，应该恰到好处的去设置它，太小了，执行队列中将会积累很多待处理的任务，太大了，则会消耗大量的系统资源从而影响整体的性能。在产品模式下默认为25个执行线程。

为了设置理想的执行队列的线程数，我们可以启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）> 监视 > 性能中监控最大负载时执行队列的吞吐量和队列中的等待请求数，据此确定理想的数值。

理想的默认执行线程数是由多方面的因素决定的，比如机器CPU性能、总体体系架构、I/O、操作系统的进程调度机制、JVM的线程调度机制。随着CPU个数的增加，WebLogic可以近乎线性地提高线程数。线程数越多，花费在线程切换的时间也就越多；线程数越小，CPU可能无法得到充分的利用。为获取一个理想的线程数，需要经过反复的测试。在测试中，可以以25*CPU个数为基准进行调整。当空闲线程较少，CPU利用率较低时，可以适当增加线程数的大小（每五个递增）。对于PC Server和Windows 2000，则最好每个CPU小于50个线程，以CPU利用率为90%左右为最佳。

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）> Execute Queue > weblogic.kernel.Defalt > 配置中修改线程计数。

b) 设定执行队列的溢出条件；

Weblogic Server提供给默认的执行队列或用户自定义的执行队列自定义溢出条件的功能，当满足此溢出条件时，服务器改变其状态为“警告”状态，并且额外的再分配一些线程去处理在队列中的请求，而达到降低队列长度的目的。

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）> Execute Queue > weblogic.kernel.Defalt > 配置下面几项：

l         队列长度：此值表示执行队列中可容纳的最大请求数，默认值是65536，最后不要手动改变此值。

l         队列长度阈值百分比：此值表示溢出条件，在此服务器指出队列溢出之前可以达到的队列长度大小的百分比。

l         线程数增加：当检测到溢出条件时，将增加到执行队列中的线程数量。如果CPU和内存不是足够的高，尽量不要改变默认值“0”。因为Weblogic一旦增加后不会自动缩减，虽然最终可能确实起到了降低请求的作用，但在将来的运行中将影响程序的性能。

l         最大线程数：为了防止创建过多的线程数量，可以通过设定最大的线程数进行控制。

在实际的应用场景中，应根据具体情况适当的调整以上参数。

c) 设定执行队列监测行为

Weblogic Server 能够自动监测到当一个执行线程变为“阻塞”。变为“阻塞”状态的执行线程将无法完成当前的工作，也无法再执行新请求。如果执行队列中的所有执行线程都变为 “阻塞”状态，Weblogic server可能改变状态为“警告”或“严重”状态。如果Weblogic server变为“严重”状态，可以通过 Node Manager来自动关闭此服务器并重新启动它。具体请参考：Node Manager Capabilities文档。

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）>配置 > 调整下可配置下面几项：

l         阻塞线程最长时间：在此服务器将线程诊断为阻塞线程之前，线程必须连续工作的时间长度(秒)。默认情况下，WebLogic Server 认为线程在连续工作 600 秒后成为阻塞线程。

l         阻塞线程计时器间隔：WebLogic Server 定期扫描线程以查看它们是否已经连续工作了 "阻塞线程最长时间" 字段中指定的时间长度的间隔时间(秒)。默认情况下，WebLogic Server 将此时间间隔设置为 600 秒。

5) 调优TCP连接缓存数；

WebLogic Server 用Accept Backlog参数规定服务器向操作系统请求的队列大小，默认值为50。当系统重载负荷时,这个值可能过小,日志中报 Connection Refused,导致有效连接请求遭到拒绝,此时可以提高Accept Backlog 25%直到连接拒绝错误消失。对于 Portal类型的应用,默认值往往是不够的。Login Timeout和SSL Login Timeout参数表示普通连接和SSL连接的超时时间,如果客户连接被服务器中断或者SSL容量大,可以尝试增加该值。

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）>配置 > 调整下可配置“接受预备连接”。

6) 改变Java编译器；

标准的Java编译器是javac，但编译JSP servlets速度太慢，为了提高编译速度，可以使用sj或jikes编译器取代javac编译器。下面说说更改Java编译器：

通过启动管理控制台，在域（如：mydomain）> 服务器 > server实例（如：myserver）>配置 > 常规下改变Java 编译器，默认为javac。输入完整路径，如：c:\visualcafe31\bin\sj.exe。然后打开高级选项，在预规划到类路径填写编译 Java 代码时为 Java 编译器类路径预规划的选项，如：BEA_HOME\jdk141_02\jre\lib\rt.jar。

7) 使用Webogic Server集群提高性能；

具体关于如何配置Weblogic集群，我就不细说了。详情可参考：Introduction to WebLogic Server Clustering。

8) Weblogic EJB调优

由于EJB2.0已经很少项目在用了，EJB3.0再成熟一点，我再补充这一部分吧！

9) JDBC应用调优

JDBC Connection Pool 的调优受制于WebLogic Server线程数的设置和数据库进程数,游标的大小。通常我们在一个线程中使用一个连接,所以连接数并不是越多越好,为避免两边的资源消耗，建议设置连接池的最大值等于或者略小于线程数。同时为了减少新建连接的开销,将最小值和最大值设为一致。

增加 Statement Cache Size对于大量使用PreparedStatement对象的应用程序很有帮助,WebLogic能够为每一个连接缓存这些对象,此值默认为10。在保证数据库游标大小足够的前提下,可以根据需要提高Statement Cache Size。比如当你设置连接数为 25,Cache Size为10时,数据库可能需要打开25*10=250个游标。不幸的是,当遇到与PreparedStatement Cache 有关的应用程序错误时,你需要将Cache Size设置为0。

尽管JDBC Connection Pool提供了很多高级参数,在开发模式下比较有用,但大部分在生产环境下不需调整。这里建议最好不要设置测试表, 同时Test Reserved Connections和 Test Released Connections也无需勾上。 当然如果你的数据库不稳定,时断时续,你就可能需要上述的参数打开。

最后提一下驱动程序类型的选择,以Oracle为例,Oracle提供thin驱动和oci驱动,从性能上来讲,oci驱动强于thin驱动,特别是大数据量的操作。但在简单的数据库操作中,性能相差不大,随着thin驱动的不断改进,这一弱势将得到弥补。而thin驱动的移植性明显强于oci驱动。所以在通常情况下建议使用thin驱动。而最新驱动器由于WebLogic server/bin目录下的类包可能不是最新的,请以Oracle网站为准: http://www.oracle.com/technology/software ... jdbc/htdocs/jdbc9201.html。

10) JSP调优

设置jsp-param pageCheckSeconds=-1；

设置serlet-reload-check=-1或ServletReloadCheckSecs=-1；

设置jsp-param precompile=true，关闭JSP预编译选项。
]]></content>
    
    <summary type="html">
    
      来源 &lt;a target=&quot;_blank&quot; href=&quot;http://www.mikecat.net/BlogView.asp?logID=1489&quot;&gt;这里&lt;/a&gt;

注：在下面做的介绍都是以Weblogic8.1为例的，其它版本的Weblogic可能会有些许不同。

1) 设置JAVA参数；

a) 编辑Weblogic Server启动脚本文件；

BEA_HOME\user_projects\domains\domain-name\startWebLogic.cmd(startWebLogic.sh on Unix)

BEA_HOME\user_projects\domains\domain-name\startManagedWebLogic.cmd(startManagedWebLogic.sh on Unix)

b) 编辑set JAVA_OPTIONS命令，如：set JAVA_OPTIONS=-Xms256m –Xmx256m；

c) 保存，重启即可。

注：在WebLogic中，为了获得更好的性能，BEA公司推荐最小Java堆等于最大Java堆。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
      <category term="性能" scheme="http://wdicc.com/tags/%E6%80%A7%E8%83%BD/"/>
    
  </entry>
  
  <entry>
    <title>PAM入门介绍</title>
    <link href="http://wdicc.com/about-pam/"/>
    <id>http://wdicc.com/about-pam/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来源 <a target="_blank" href="http://sinbad.zhoubin.com/read.html?board=UNIX&num=482">这里</a>

PAM（Pluggable Authentication Modules ）是由Sun提出的一种认证机制。它通过提供一些
动态链接库和一套统一的API，将系统提供的服务 和该服务的认证方式分开，使得系统管理
员可以灵活地根据需要给不同的服务配置不同的认证方式而无需更改服务程序，同时也便于
向系 统中添加新的认证手段。
PAM最初是集成在Solaris中，目前已移植到其它系统中，如Linux、SunOS、HP-UX 9.0等。

一、PAM的结构

PAM的整个框架结构如下图所示：


系统管理员通过PAM配置文件来制定认证策略，即指定什么服务该采用什么样的认证方法；应
用程序开发者通过在服务程序中使用PAM API而实现对认证方法的调用；而PAM服务模块（se
rvice module）的开发者则利用PAM SPI（Service Module API）来编写认证模块（主 要是
引出一些函数pam_sm_xxxx( )供libpam调用），将不同的认证机制（比如传统的UNIX认证方
法、Kerberos等）加入到系统中；PAM核 心库（libpam）则读取配置文件，以此为根据将服
务程序和相应的认证方法联系起来。<a id="more"></a>
二、PAM支持的四种管理界面：

1、认证管理（authentication management）
主要是接受用户名和密码，进而对该用户的密码进行认证，并负责设置用户的一些秘密
信息。
2、帐户管理（account management）
主要是检查帐户是否被允许登录系统，帐号是否已经过期，帐号的登录是否有时间段的
限制等等。
3、密码管理（password management）
主要是用来修改用户的密码。
4、会话管理（session management）
主要是提供对会话的管理和记账（accounting）。

三、PAM的文件：

/usr/lib/libpam.so.*                  PAM核心库
/etc/pam.conf或者/etc/pam.d/          PAM配置文件
/usr/lib/security/pam_*.so            可动态加载的PAM service module
对于RedHat，其目录不是/usr/lib，而是/lib。

四、PAM的配置：

PAM的配置是通过单个配置文件/etc/pam.conf。RedHat还支持另外一种配置方式，即通过配
置目录/etc/pam.d/，且这种的优先级要高于单 个配置文件的方式。

1、使用配置文件/etc/pam.conf

该文件是由如下的行所组成的：
service-name  module-type  control-flag  module-path  arguments

service-name 服务的名字，比如telnet、login、ftp等，服务名字“OTHER”代表所有没有
在该文件中明确配置的其它服务。
module-type  模块类型有四种：auth、account、session、password，即对应PAM所支持的
四种管理方式。同一个服务可以调用多个 PAM模块进行认证，这些模块构成一个stack。
control-flag 用来告诉PAM库该如何处理与该服务相关的PAM模块的成功或失败情况。它有四
种可能的 值：required，requisite，sufficient，optional。
required 表示本模块必须返回成功才能通过认证，但是如果该模块返回失败的话，失败
结果也不会立即通知用户，而是要等到同一stack 中的所有模块全部执行完毕再将失败结果
返回给应用程序。可以认为是一个必要条件。
requisite 与required类似，该模块必须返回成功才能通过认证，但是一旦该模块返回
失败，将不再执行同一stack内的任何模块，而是直 接将控制权返回给应用程序。是一个必
要条件。注：这种只有RedHat支持，Solaris不支持。
sufficient 表明本模块返回成功已经足以通过身份认证的要求，不必再执行同一stack
内的其它模块，但是如果本模块返回失败的话可以 忽略。可以认为是一个充分条件。
optional表明本模块是可选的，它的成功与否一般不会对身份认证起关键作用，其返回
值一般被忽略。
对于control-flag，从Linux-PAM-0.63版本起，支持一种新的语法，具体可参看Linux
PAM文档。
module-path 用来指明本模块对应的程序文件的路径名，一般采用绝对路径，如果没有给出
绝对路径，默认该文件在目录/usr/lib/security下 面。
arguments  是用来传递给该模块的参数。一般来说每个模块的参数都不相同，可以由该模块
的开发者自己定义，但是也有以下几个共同 的参数：
debug          该模块应当用syslog( )将调试信息写入到系统日志文件中。
no_warn        表明该模块不应把警告信息发送给应用程序。
use_first_pass  表明该模块不能提示用户输入密码，而应使用前一个模块从用户那里
得到的密码。
try_first_pass  表明该模块首先应当使用前一个模块从用户那里得到的密码，如果该
密码验证不通过，再提示用户输入新的密码。
use_mapped_pass 该模块不能提示用户输入密码，而是使用映射过的密码。
expose_account  允许该模块显示用户的帐号名等信息，一般只能在安全的环境下使用
，因为泄漏用户名会对安全造成一定程度的威 胁。

2、使用配置目录/etc/pam.d/（只适用于RedHat Linux）

该目录下的每个文件的名字对应服务名，例如ftp服务对应文件/etc/pam.d/ftp。如果名为x
xxx的服务所对应的配置文件/etc/pam.d/xxxx不存 在，则该服务将使用默认的配置文件/et
c/pam.d/other。每个文件由如下格式的文本行所构成：
module-type  control-flag  module-path  arguments
每个字段的含义和/etc/pam.conf中的相同。

3、配置的例子

例一：用/etc/pam.conf配置默认的认证方式。

下面的例子将拒绝所有没有在/etc/pam.conf中明确配置的服务。OTHER代表没有明确配置的
其它所有服务，pam_deny模块的作用只是简 单地拒绝通过认证。
OTHER  auth    required      /usr/lib/security/pam_deny.so
OTHER  account  required      /usr/lib/security/pam_deny.so
OTHER  password required      /usr/lib/security/pam_deny.so
OTHER  session  required      /usr/lib/security/pam_deny.so


例二：通过/etc/pam.d/rsh文件配置rsh服务的认证方式。

rsh服务认证用户时，先使用/etc/hosts.equiv和.rhosts文件的认证方式，然后再根据/etc
/nologin文件的存在与否来判断是否允许该用户使用 rsh，最后使用password database来认
证用户。

auth      required    /lib/security/pam_rhosts_auth.so
auth      required    /lib/security/pam_nologin.so
account    required    /lib/security/pam_pwdb.so
session    required    /lib/security/pam_pwdb.so


例三：通过/etc/pam.conf配置ftpd的认证方式。

下面是ftpd服务利用PAM模块进行用户认证的三个步骤。首先用pam_ftp模块检查当前用户是
否为匿名用户，如果是匿名用户，则 sufficient控制标志表明无需再进行后面的认证步骤，
直接通过认证；否则继续使用pam_unix_auth模块来进行标准的unix认证，即用/etc/ passw
d和/etc/shadow进行认证；通过了pam_unix_auth模块的认证之后，还要继续用pam_listfil
e模块来检查该用户是否出现在文件/etc/ ftpusers中，如果是则该用户被deny掉。
ftpd    auth    sufficient  /usr/lib/security/pam_ftp.so
ftpd    auth    required    /usr/lib/security/pam_unix_auth.so use_first_pass
ftpd    auth    required    /usr/lib/security/pam_listfile.so \
onerr=succeed item=user sense=deny file=/etc/ftpuser
s
]]></content>
    
    <summary type="html">
    
      来源 &lt;a target=&quot;_blank&quot; href=&quot;http://sinbad.zhoubin.com/read.html?board=UNIX&amp;num=482&quot;&gt;这里&lt;/a&gt;

PAM（Pluggable Authentication Modules ）是由Sun提出的一种认证机制。它通过提供一些
动态链接库和一套统一的API，将系统提供的服务 和该服务的认证方式分开，使得系统管理
员可以灵活地根据需要给不同的服务配置不同的认证方式而无需更改服务程序，同时也便于
向系 统中添加新的认证手段。
PAM最初是集成在Solaris中，目前已移植到其它系统中，如Linux、SunOS、HP-UX 9.0等。

一、PAM的结构

PAM的整个框架结构如下图所示：


系统管理员通过PAM配置文件来制定认证策略，即指定什么服务该采用什么样的认证方法；应
用程序开发者通过在服务程序中使用PAM API而实现对认证方法的调用；而PAM服务模块（se
rvice module）的开发者则利用PAM SPI（Service Module API）来编写认证模块（主 要是
引出一些函数pam_sm_xxxx( )供libpam调用），将不同的认证机制（比如传统的UNIX认证方
法、Kerberos等）加入到系统中；PAM核 心库（libpam）则读取配置文件，以此为根据将服
务程序和相应的认证方法联系起来。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="pam" scheme="http://wdicc.com/tags/pam/"/>
    
  </entry>
  
  <entry>
    <title>weblogic乱码问题</title>
    <link href="http://wdicc.com/weblogic-encoding/"/>
    <id>http://wdicc.com/weblogic-encoding/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 先看这里：WebLogic8.1的中文问题解决方法

http://dev2dev.bea.com.cn/techdoc/200311546.html


2 看看系统locale的设置，可以使用locale命令查看当前的locale设置，可以使用如下命令设置locale。

#LANG=en_US

没有在weblogic的手册中找到关于这部分的信息，可以测试一下系统locale对应用是否有影响。
<a id="more"></a>
3 下面是手册中关于国际化的一段说法，按照下面的说法，应该是不管有没有设置weblogic的字符集，他都会正确处理多字节字符，默认使用的是utf－8。

Often the default character sets used by WebLogic Server are adequate and you do not need to explicitly specify a character set for a Web Service. For example, if a client application specifies its preferred character set, and there is no character set specified for a Web Service, then WebLogic Server responds by using the client's preferred character set. Also, non-internationalized WebLogic Server instances use the US-ASCII character set by default, and internationalized WebLogic Server instances use the UTF-8 character set by default, and both of these character sets are compatible when one WebLogic Server instance is communicating with the other. This also means that a Web Service running on a non-internationalized WebLogic Server instance can handle multi-byte characters correctly.

具体修改的方法可以参看这里：http://e-docs.bea.com/wls/docs81/webserv/i18n.html。
生效的顺序如下：

Order of Precedence of Character Set Configuration Used By WebLogic Server

The following list shows the order by which WebLogic Server determines the character set of a WebLogic Web Service when it is creating the SOAP response to an invoke of one of its operations:

1. The value of the charset attribute in the corresponding <web-service> element of the web-services.xml deployment descriptor.

If this is not set, then WebLogic Server looks at the following:

2. The character set preferred by the client application that invoked the Web Service operation. If your client application uses the WebLogic Web Services client APIS, the character set is specified using the weblogic.webservice.binding.BindingInfo.setAcceptCharset() method.

If this is not set, then WebLogic Server looks at the following:

3. The value of the WebLogic Server system property weblogic.webservice.i18n.charset.

If this is not set, then WebLogic Server looks at the following:

4. The character set specified for the JVM. Specifically, if the JVM property user.language is set to en, then WebLogic Web Services use the US-ASCII character set. If the user.language property is set to anything else, WebLogic Web Services use the UTF-8 character set.
</web-service>]]></content>
    
    <summary type="html">
    
      1 先看这里：WebLogic8.1的中文问题解决方法

http://dev2dev.bea.com.cn/techdoc/200311546.html


2 看看系统locale的设置，可以使用locale命令查看当前的locale设置，可以使用如下命令设置locale。

#LANG=en_US

没有在weblogic的手册中找到关于这部分的信息，可以测试一下系统locale对应用是否有影响。
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="乱码" scheme="http://wdicc.com/tags/%E4%B9%B1%E7%A0%81/"/>
    
      <category term="weblogc" scheme="http://wdicc.com/tags/weblogc/"/>
    
  </entry>
  
  <entry>
    <title>在linux重新启动下如何设置oracle服务自动开启</title>
    <link href="http://wdicc.com/auto-start-of-oracle/"/>
    <id>http://wdicc.com/auto-start-of-oracle/</id>
    <published>2006-08-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[来源 <a target="_blank" href="http://community.csdn.net/Expert/FAQ/FAQ_Index.asp?id=210567">这里</a>

我装的是redhat  linux  9，oracle9.2.0.1.0,用sqlplus  "/as  sysdba"  startup可开启实例服务，用lsnrctl  start开启侦听服务，但这些都是通过手工输入操作的，能不能有办法让这些服务就象在windows一样设置为自动，让他在重启之后就可自动运行
---------------------------------------------------------------

这个问题近期有人问过好多遍了，下面是  liuyi8903(好好学习)  的关于此问题的一个回复：

下面是我在linux  as  3下做的:

1.  创建文件/etc/oratab
添加

#添加如下内容到/etc/oratab文件中,
#$ORACLE_SID是你的Oracle数据库的sid
#$ORACLE_HOME是你的Oracle数据库的Oracle_home
#Y表示要求在系统启动的时候启动Oracle数据库.N表示不要在系统启动的时候启动Oracle
$ORACLE_SID:$ORACLE_HOME:Y

<a id="more"></a>

2.  修改文件/etc/rc.local添加一下两行
su  -  oracle  -c  'dbstart'
su  -  oracle  -c  'lsnrctl  start'
---------------------------------------------------------------

以下是10G在Linux下oracle自启动的官方表述，可以参考一下，9i应该也有这方面的表述，可以去www.oracle.com找9i的文档看看：


1.Log  in  as  the  root  user.

2.Edit  the  oratab  file  for  your  platform.

To  open  the  file,  use  one  of  the  following  commands:

On  Solaris:

#  vi  /var/opt/oracle/oratab

On  AIX,  HP-UX,  Linux,  and  Tru64  UNIX:

#  vi  /etc/oratab

Database  entries  in  the  oratab  file  are  displayed  in  the  following  format:

SID:ORACLE_HOME:{Y  &brvbarN  &brvbarW}

In  this  example,  the  values  Y  and  N  specify  whether  you  want  the  scripts  to  start  up  or  shut  down  the  database,  respectively.  For  each  database  for  which  you  want  to  automate  shutdown  and  startup,  first  determine  the  instance  identifier  (SID)  for  that  database,  which  is  identified  by  the  SID  in  the  first  field.  Then,  change  the  last  field  for  each  to  Y.

You  can  set  dbstart  to  auto-start  a  single-instance  database  that  uses  an  Automatic  Storage  Management  installation  that  is  auto-started  by  Oracle  Clusterware.  This  is  the  default  behavior  for  an  Automatic  Storage  Management  cluster.  If  you  want  to  do  this,  then  you  must  change  the  oratab  entry  of  the  database  and  the  Automatic  Storage  Management  installation  to  use  a  third  field  with  the  value  W  and  N,  respectively.  These  values  specify  that  dbstart  auto-starts  the  database  only  after  the  Automatic  Storage  Management  instance  is  started.


Note:

If  you  add  new  database  instances  to  the  system  and  if  you  want  to  automate  startup  for  them,  then  you  must  edit  the  entries  for  those  instances  in  the  oratab  file.


3.Change  directory  to  one  of  the  following  depending  on  your  operating  system:

Platform  Initialization  File  Directory
AIX  /etc
Linux  and  Solaris  /etc/init.d
HP-UX  and  Tru64  UNIX  /sbin/init.d


4.Create  a  file  called  dbora,  and  copy  the  following  lines  into  this  file:


Note:

Change  the  value  of  the  ORACLE_HOME  environment  variable  to  an  Oracle  home  directory  for  the  installation.  Change  the  value  of  the  ORACLE  environment  variable  to  the  user  name  of  the  owner  of  the  database  installed  in  the  Oracle  home  directory  (typically,  oracle).


#!  /bin/sh    -x
#
#  Change  the  value  of  ORACLE_HOME  to  specify  the  correct  Oracle  home
#  directory  for  your  installation.

ORACLE_HOME=/u01/app/oracle/product/10.2.0/db_1
#
#  Change  the  value  of  ORACLE  to  the  login  name  of  the
#  oracle  owner  at  your  site.
#
ORACLE=oracle

PATH=${PATH}:$ORACLE_HOME/bin
HOST=`hostname`
PLATFORM=`uname`
export  ORACLE_HOME  PATH
#
if  [  !  "$2"  =  "ORA_DB"  ]  ;  then
if  [  "$PLATFORM"  =  "HP-UX"  ]  ;  then
remsh  $HOST  -l  $ORACLE  -n  "$0  $1  ORA_DB"
exit
else
rsh  $HOST  -l  $ORACLE    $0  $1  ORA_DB
exit
fi
fi
#
case  $1  in
'start')
$ORACLE_HOME/bin/dbstart  $ORACLE_HOME  &
;;
'stop')
$ORACLE_HOME/bin/dbshut  $ORACLE_HOME  &
;;
*)
echo  "usage:  $0  {start  &brvbarstop}"
exit
;;
esac
#
exit


Note:

This  script  can  only  stop  Oracle  Net  listener  for  which  a  password  has  not  been  set.  In  addition,  if  the  listener  name  is  not  the  default  name,  LISTENER,  then  you  must  specify  the  listener  name  in  the  stop  and  start  commands:
$ORACLE_HOME/bin/lsnrctl  {start  &brvbarstop}  listener_name



5.Change  the  group  of  the  dbora  file  to  the  OSDBA  group  (typically  dba),  and  set  the  permissions  to  750:

#  chgrp  dba  dbora
#  chmod  750  dbora

6.Create  symbolic  links  to  the  dbora  script  in  the  appropriate  run-level  script  directories  as  follows:

Platform  Symbolic  Links  Commands

Linux  #  ln  -s  /etc/init.d/dbora  /etc/rc.d/rc3.d/K01dbora
#  ln  -s  /etc/init.d/dbora  /etc/rc.d/rc3.d/S99dbora
#  ln  -s  /etc/init.d/dbora  /etc/rc.d/rc5.d/K01dbora
#  ln  -s  /etc/init.d/dbora  /etc/rc.d/rc5.d/S99dbora
---------------------------------------------------------------

Oracle在linux下的自动启动脚本

环境是redhat  9+oracle  9.2.0.4

1、在/etc/rc.d/init.d下创建脚本，名字就取为oracle，内容如下。假设oracle的安装用户是ora9。
case  "$1"  in
start)
echo  "Starting  Oracle  Databases  ...  "
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Starting  Oracle  Databasee  as  part  of  system  up."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle
su  -  ora9  -c  "dbstart"  >>  /var/log/oracle
echo  "Done."
echo  "Starting  Oracle  Listeners  ...  "
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Starting  Oracle  Listeners  as  part  of  system  up."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle
su  -  ora9  -c  "lsnrctl  start"  >>  /var/log/oracle
echo  "Done."
echo  ""
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Finished."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle
touch  /var/lock/subsys/oracle

;;
stop)
echo  "Stoping  Oracle  Listeners  ...  "
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Stoping  Oracle  Listener  as  part  of  system  down."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle
su  -  ora9  -c  "lsnrctl  stop"  >>  /var/log/oracle
echo  "Done."
rm  -f  /var/lock/subsys/oracle
echo  "Stoping  Oracle  Databases  ...  "
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Stoping  Oracle  Databases  as  part  of  system  down."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle
su  -  ora9  -c  "dbshut"  >>/var/log/oracle
echo  "Done."
echo  ""
echo  "-------------------------------------------------"  >>  /var/log/oracle
date  +"  %T  %a  %D  :  Finished."  >>  /var/log/oracle
echo  "-------------------------------------------------"  >>  /var/log/oracle

;;
restart)
$0  stop
$0  start

;;
*)
echo  "Usage:  oracle  {start  &brvbarstop  &brvbarrestart}"
exit  1
esac

2、修改/etc/rc.d/init.d/oracle的属性为755。

3、创建不同级别的link文件。
$  ln  -s  /etc/rc.d/init.d/oracle  /etc/rc.d/rc5.d/S99oracle
$  ln  -s  /etc/rc.d/init.d/oracle  /etc/rc.d/rc0.d/K01oracle
$  ln  -s  /etc/rc.d/init.d/oracle  /etc/rc.d/rc1.d/K01oracle

4、编辑/etc/oratab文件，设置需要自动启动的数据库实例。

5、在$ORACLE_HOME/dbs下，创建符号连接文件init$ORACLE_SID
cd  $ORACLE_HOME/dbs
ln  -s  spfile$ORACLE_SID.ora  init$ORACLE_SID.ora
]]></content>
    
    <summary type="html">
    
      来源 &lt;a target=&quot;_blank&quot; href=&quot;http://community.csdn.net/Expert/FAQ/FAQ_Index.asp?id=210567&quot;&gt;这里&lt;/a&gt;

我装的是redhat  linux  9，oracle9.2.0.1.0,用sqlplus  &quot;/as  sysdba&quot;  startup可开启实例服务，用lsnrctl  start开启侦听服务，但这些都是通过手工输入操作的，能不能有办法让这些服务就象在windows一样设置为自动，让他在重启之后就可自动运行
---------------------------------------------------------------

这个问题近期有人问过好多遍了，下面是  liuyi8903(好好学习)  的关于此问题的一个回复：

下面是我在linux  as  3下做的:

1.  创建文件/etc/oratab
添加

#添加如下内容到/etc/oratab文件中,
#$ORACLE_SID是你的Oracle数据库的sid
#$ORACLE_HOME是你的Oracle数据库的Oracle_home
#Y表示要求在系统启动的时候启动Oracle数据库.N表示不要在系统启动的时候启动Oracle
$ORACLE_SID:$ORACLE_HOME:Y
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>老婆去山西了</title>
    <link href="http://wdicc.com/cc-goto-shanxi/"/>
    <id>http://wdicc.com/cc-goto-shanxi/</id>
    <published>2006-08-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[周二就去了，没有去送，带着新买的psp，去happy去了。周三晚上老大送小猫过来一起吃的成都小吃，昨天晚上自己炒了一锅菜，炒的比较失败，可能因为很久没有炒过了。今天晚上继续吃昨天炒的菜。

明天又轮到值班了，老婆说周日回来，有个同事想和我换周日的我没有换，周日得去接老婆了，不过还不知道她几点到。
]]></content>
    
    <summary type="html">
    
      周二就去了，没有去送，带着新买的psp，去happy去了。周三晚上老大送小猫过来一起吃的成都小吃，昨天晚上自己炒了一锅菜，炒的比较失败，可能因为很久没有炒过了。今天晚上继续吃昨天炒的菜。

明天又轮到值班了，老婆说周日回来，有个同事想和我换周日的我没有换，周日得去接老婆了，不过还
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
  </entry>
  
  <entry>
    <title>我家的毛毛和妞妞的大头照</title>
    <link href="http://wdicc.com/my-cats-photos/"/>
    <id>http://wdicc.com/my-cats-photos/</id>
    <published>2006-08-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a class="tt-flickr" href="http://www.flickr.com/photos/wd_afei/193982060" target="_blank" rel="external"><img width="75" height="75" alt="20060717080" class="tt-flickr" src="http://static.flickr.com/72/193982060_4b3c019a68_s.jpg"></a> <a class="tt-flickr" href="http://www.flickr.com/photos/wd_afei/193982096" target="_blank" rel="external"><img width="75" height="75" alt="20060717076" class="tt-flickr" src="http://static.flickr.com/77/193982096_bf2b870d82_s.jpg"></a> <a class="tt-flickr" href="http://www.flickr.com/photos/wd_afei/193982119" target="_blank" rel="external"><img width="75" height="75" alt="20060717077" class="tt-flickr" src="http://static.flickr.com/64/193982119_332814b358_s.jpg"></a> <a class="tt-flickr" href="http://www.flickr.com/photos/wd_afei/193982148" target="_blank" rel="external"><img width="75" height="75" alt="20060717078" class="tt-flickr" src="http://static.flickr.com/53/193982148_6072c07b7f_s.jpg"></a> <a class="tt-flickr" href="http://www.flickr.com/photos/wd_afei/193982205" target="_blank" rel="external"><img width="75" height="75" alt="20060717079" class="tt-flickr" src="http://static.flickr.com/46/193982205_a2872f7544_s.jpg"></a>

用n70前面的摄像头拍的。
]]></content>
    
    <summary type="html">
    
      &lt;a class=&quot;tt-flickr&quot; href=&quot;http://www.flickr.com/photos/wd_afei/193982060&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;img width=&quot;75&quot; height=&quot;75&quot; alt=&quot;2
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
      <category term="N70" scheme="http://wdicc.com/tags/N70/"/>
    
      <category term="妞妞" scheme="http://wdicc.com/tags/%E5%A6%9E%E5%A6%9E/"/>
    
      <category term="毛毛" scheme="http://wdicc.com/tags/%E6%AF%9B%E6%AF%9B/"/>
    
      <category term="猫猫" scheme="http://wdicc.com/tags/%E7%8C%AB%E7%8C%AB/"/>
    
  </entry>
  
  <entry>
    <title>把tt转成了wordpress</title>
    <link href="http://wdicc.com/change-tt-to-wordpress/"/>
    <id>http://wdicc.com/change-tt-to-wordpress/</id>
    <published>2006-08-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[用了一个兄弟的<a href="http://dbfox.idv.tw/blog/?p=110" target="_blank">转化程序</a> ,效果非常不错。

 现在还有点问题，明天好好修理一下，呵呵。

<pre class="prettyprint lang-mysql">
UPDATE wp_posts SET post_content = replace( post_content, "[/CODE]", "[/ coolcode]" ) WHERE `post_content` LIKE '%[/CODE]%'
</pre>
]]></content>
    
    <summary type="html">
    
      用了一个兄弟的&lt;a href=&quot;http://dbfox.idv.tw/blog/?p=110&quot; target=&quot;_blank&quot;&gt;转化程序&lt;/a&gt; ,效果非常不错。

 现在还有点问题，明天好好修理一下，呵呵。

&lt;pre class=&quot;prettyprint lang-mysq
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="wordpress" scheme="http://wdicc.com/tags/wordpress/"/>
    
  </entry>
  
  <entry>
    <title>死在了fsck手里</title>
    <link href="http://wdicc.com/die-in-fsck/"/>
    <id>http://wdicc.com/die-in-fsck/</id>
    <published>2006-07-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周六断电，一台dhcp server挂了，启动的时候提示硬盘有问题，让fsck修复一下。每次启动都提示，而且在这里会停下来，很烦。那就fsck一下吧，结果。。。系统就进不去了。埃，之前还好还能进去，真郁闷。

所以，fsck之前，一定要先把重要的东西都导出来再说。

fsck的命令的几个使用方法<a id="more"></a>

指令：fsck
使用权限 : 超级使用者
使用方式 : fsck [-sACVRP] [-t fstype] [--] [fsck-options] filesys [...]
说明 ： 检查与修复 Linux 档案系统，可以同时检查一个或多个 Linux 档案系统

参数 ：
filesys ： device 名称(eg./dev/sda1)，mount 点 (eg. / 或 /usr)
-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数
-s : 依序一个一个地执行 fsck 的指令来检查
-A : 对/etc/fstab 中所有列出来的 partition 做检查
-C : 显示完整的检查进度
-d : 列印 e2fsck 的 debug 结果
-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行
-R : 同时有 -A 条件时，省略 / 不检查
-V : 详细显示模式

-a : 如果检查有错则自动修复
-r : 如果检查有错则由使用者回答是否修复

例子 :
检查 msdos 档案系统的 /dev/hda5 是否正常，如果有异常便自动修复 :
fsck -t msdos -a /dev/hda5

注意 :

此指令可与 /etc/fstab 相互参考操作来加以了解。
]]></content>
    
    <summary type="html">
    
      上周六断电，一台dhcp server挂了，启动的时候提示硬盘有问题，让fsck修复一下。每次启动都提示，而且在这里会停下来，很烦。那就fsck一下吧，结果。。。系统就进不去了。埃，之前还好还能进去，真郁闷。

所以，fsck之前，一定要先把重要的东西都导出来再说。

fsck的命令的几个使用方法
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="fsck" scheme="http://wdicc.com/tags/fsck/"/>
    
  </entry>
  
  <entry>
    <title>远程安装oracle</title>
    <link href="http://wdicc.com/oracle-remote-install/"/>
    <id>http://wdicc.com/oracle-remote-install/</id>
    <published>2006-07-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[找了很久总算找到了方法。

参考 <a href="http://www.oracle.com/technology/global/cn/pub/articles/saternos_kickstart.html" target="_blank" rel="external">这里</a>

<a id="more"></a>

主要是下面这段

<span class="parahead1"><span style="padding: 3px 1px 0px; color: #202020; background-color: #e4e4e4"><span class="parahead1">使 Oracle 安装自动化</span>Oracle Universal Installer 拥有很多自动化过程中可以利用的特性。它采用一个基于 XML的中央信息库，允许第三方应用程序识别安装了那些产品。除了简单安装之外，它还允许将现有 Oracle主目录复制到新的位置。有关该产品的更多信息，请参见 <a class="bodylink" href="http://download.oracle.com/docs/cd/B14117_01/em.101/b12140/toc.htm" target="_blank" rel="external"><em>Oracle Universal Installer 概念指南</em></a>。Oracle 关于软件安装和配置甚至数据库本身的自动化解决方案涉及到一个<em>响应文件</em> 的使用。该文件的用途与 RedHat 的 kickstart 文件相似。用户不是对交互式对话所提出的问题进行交互式回答，而是将回答存储在一个文本文件中，随后 OracleUniversal Installer (OUI) 在运行安装程序时使用该文件。这样的安装称为“静默安装”。OUI用于安装各种应用程序，因此响应文件不限于安装数据库。

可以通过在记录模式中运行软件或通过手动编辑示例响应文件来创建响应文件。以下是一个基本演示：
<ol>
<li class="bodycopy">用此命令启动 OUI 来创建响应文件：</li>
<pre class="prettyprint">
<li class="bodycopy">选择您需要的所有部分（源目标目录、主目录、主目录名、产品）。</li>
<li class="bodycopy">当您看到 Summary 屏幕时，不要单击 <strong>Install</strong>，而是单击 <strong>Cancel</strong>。</li>
<li class="bodycopy">仔细查看在 tmp/recorded.rsp 中创建的结果响应文件。如果需要，可以手动编辑该文件，只要您遵守使用规定的格式即可（请参见<a class="bodylink" href="http://download.oracle.com/docs/cd/B14117_01/em.101/b12140/4_oui_response_files.htm#sthref131" target="_blank" rel="external">文档</a>）。</li>
<li class="bodycopy">现在如下执行静默安装：
<pre class="prettyprint">
在运行脚本时将会报告安装的进度。</pre></li>
</pre></ol>
如果您由于响应文件中的条目不正确而遇到安装故障，安装将失败并显示一条诊断消息。详细信息可在 oraInventory/logs目录中找到。在每次使用响应文件运行 OUI 时，会创建具有 installActions-<时间戳>.log 和silentInstall<时间戳>.log 格式名称的日志。

</时间戳></时间戳></span>

还有关于runinstaller的使用参数

<span style="padding: 3px 1px 0px; color: #202020; background-color: #e4e4e4">Usage:
runInstaller  [-options] [(<commandlinevariable=value>)*]</commandlinevariable=value></span>

Where options include:
-clusterware oracle.crs,<crs version="">
Version of Cluster ready services installed.

-crsLocation <path></path>
Used only for cluster installs, specifies the path to the crs home location. Specifying this overrides CRS information obtained from central inventory.

-invPtrLoc <full path="" of="" orainst.loc="">
Unix only. To point to a different inventory location. The orainst.loc file contains:
inventory_loc=<location of="" central="" inventory="">
inst_group=<>

-jreLoc <location>
Path where Java Runtime Environment is installed. OUI cannot be run without it.

-logLevel <level>
To filter log messages that have a lesser priority level than <level>. Valid options are: severe, warning, info, config, fine, finer, finest, basic, general, detailed, trace. The use of basic, general, detailed, trace is deprecated.

-paramFile <location of="" file="">
Specify location of oraparam.ini file to be used by OUI.

-responseFile <path></path>
Specifies the response file and path to use.

-sourceLoc  <location of="" products.xml="">
To specify the shiphome location.

-addLangs
To add new languages to an already installed product.

-addNode
For adding node(s) to the installation.

-attachHome
For attaching homes to the OUI inventory.

-cfs
Indicates that the Oracle home specified is on cluster file system (shared). This is mandatory when '-local' is specified so that Oracle Universal Installer can register the home appropriately into the inventory.

-clone
For making an Oracle Home copy match its current environment.

-debug
For getting the debug information from OUI.

-deinstall
For deinstall operations.

-detachHome
For detaching homes from the OUI inventory without deleting inventory directory inside Oracle home.

-enableRollingUpgrade
Used in cluster environment, to enable upgrade of a product on a subset of nodes (on which the product was installed).

-executeSysPrereqs
Execute system pre-requisite checks and exit.

-force
Allowing silent mode installation into a non-empty directory.

-help
Displays above usage.

-ignorePatchConflicts
Ignore all conflicts with existing interim patches during an upgrade. The conflicting interim patches are removed from the home.

-ignoreSysPrereqs
For ignoring the results of the system pre-requisite checks.

-local
Performs the operation on the local node irrespective of the cluster nodes specified.

-printdiskusage
Log debug information for disk usage.

-printmemory
Log debug information for memory usage.

-printtime
Log debug information for time usage.

-record -destinationFile <path></path>
For record mode operation, information is recorded in the destination file path.

-removeallfiles
For removing the home directory after deinstallation of all the components.

-removeAllPatches
Remove all interim patches from the home

-silent
For silent mode operations, the inputs can be a response file or a list of command line variable value pairs.

-updateNodeList
For updating node list for this home in the OUI inventory.

-waitforcompletion
For windows. setup.exe will wait for completion instead of spawning the java engine and exiting.

-nobackground
Do not show background image

-noclusterEnabled
No cluster nodes specified.

-noconsole
For suppressing display of messages to console. Console is not allocated.

-nowarningonremovefiles
To disable the warning message before removal of home directory.

-nowait
For windows. Do not wait for user to hit Enter on the console after the task (install etc.) is complete.

-formCluster
To install the Oracle clusterware in order to form the cluster.

-remotecp <path></path>
Unix specific option. Used only for cluster installs, specifies the path to the remote copy program on the local cluster node.

-remoteshell <path></path>
Unix specific option. Used only for cluster installs, specifies the path to the remote shell program on the local cluster node.

Command Line Variables Usage
Command line variables are specified using <name=value>; for example:
[ session: | compName: | compName:version: ]variableName=" valueOfVariable"]

Session/Installer variables are specified using:
[session:]varName=value
Ex 1: session:ORACLE_HOME_NAME="OraHome"
Ex 2: ORACLE_HOME_NAME="OraHome"
The lookup order is session:varName then just varName. The session prefix is used to avoid ambiguity.

Component variables are specified using:
[compInternalName:[Version:]]varName
Ex 1: oracle.comp1:1.0.1:varName="VarValue"
Ex 2: oracle.comp1:varName="VarValue"
The lookup order is compInternalName:Version:varName, then compInternalName:varName, then just varName.
</name=value></location></location></level></level></location></location></full></crs></span>]]></content>
    
    <summary type="html">
    
      找了很久总算找到了方法。

参考 &lt;a href=&quot;http://www.oracle.com/technology/global/cn/pub/articles/saternos_kickstart.html&quot;&gt;这里&lt;/a&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="oracle" scheme="http://wdicc.com/tags/oracle/"/>
    
  </entry>
  
  <entry>
    <title>最近的几件事情</title>
    <link href="http://wdicc.com/something-lately/"/>
    <id>http://wdicc.com/something-lately/</id>
    <published>2006-07-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[上周六入手一个N70，银色的，亚太版，发现亚太版和港行确实没有什么区别，只能由卖家提供一年保修。盒子上面的IMEI和手机以及主板的不一样，不过也无所谓了，水货还能怎么要求。一直信赖Nokia的品质，相信应该不会有问题的。

周六晚上KTV给老婆过生日，现在大家都忙了，居然只有四个人吃饭。不过还好晚上唱歌的时候人多了一些，要不生日也太平静了，希望老婆玩的高兴。至于我，第一次在KTV看球，感觉还是不错的，呵呵，其实重要的是人多一起看才好，唯一的遗憾是没有啤酒 :)
]]></content>
    
    <summary type="html">
    
      上周六入手一个N70，银色的，亚太版，发现亚太版和港行确实没有什么区别，只能由卖家提供一年保修。盒子上面的IMEI和手机以及主板的不一样，不过也无所谓了，水货还能怎么要求。一直信赖Nokia的品质，相信应该不会有问题的。

周六晚上KTV给老婆过生日，现在大家都忙了，居然只有四个
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="生日" scheme="http://wdicc.com/tags/%E7%94%9F%E6%97%A5/"/>
    
      <category term="ktv" scheme="http://wdicc.com/tags/ktv/"/>
    
      <category term="N70" scheme="http://wdicc.com/tags/N70/"/>
    
  </entry>
  
  <entry>
    <title>重置weblogic密码</title>
    <link href="http://wdicc.com/reset-weblogic-password/"/>
    <id>http://wdicc.com/reset-weblogic-password/</id>
    <published>2006-07-06T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[参考网址：<a href="http://support.bea.com/application_content/product_portlets/support_patterns/wls/startWLSPattern.html" target="_blank" rel="external">这里</a>

weblogic得密码忘记了怎么办呢？总算让我找到除了重建域之外得方法了。

首先假设你得weblogic是在运行中，并且boot.properties中已经保存了加密得用户名密码。这样你除了不能登录控制台外，启动停止weblogic是没问题得。
<ol><li>备份boot.properties文件和DefaultAuthenticatorInit.ldift文件。后面操作不能实现得时候，还可以恢复。</li><li>停止weblogic。</li><li>切换到你得域目录（就是域得启动停止脚本所在得目录）。</li><li>java -cp <bea_home>\server\lib\weblogic.jar weblogic.security.utils.AdminAccount adminuser weblogic .（要注意最后有个点）</bea_home></li><li>rm myserver/ldap/DefaultAuthenticatormyrealmInit.initialized</li><li>rm boot.properties</li><li>启动weblogic，记得不要在后台启动，因为你需要输入用来启动得用户名密码，用户名是adminuser，密码是weblogic，应该是可以启动得。</li><li>上面这步没问题得话，你就可以用adminuser登录控制台修改原来用户得密码了。</li><li>改好之后，新建一个boot.properties，写上你原来得用户名和新得密码。重启一下weblogic试试看。</li></ol>除去上面得假设，如果你得服务器因为没有密码已经起不来了，或许你也可以试试看从2开始能不能设置一个新得密码。
]]></content>
    
    <summary type="html">
    
      参考网址：&lt;a href=&quot;http://support.bea.com/application_content/product_portlets/support_patterns/wls/startWLSPattern.html&quot; target=&quot;_blank&quot; rel=&quot;ex
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>今天是老婆阴历生日</title>
    <link href="http://wdicc.com/happy-birthday-to-cc/"/>
    <id>http://wdicc.com/happy-birthday-to-cc/</id>
    <published>2006-06-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[老婆生日了，老婆生日快乐 :)

<center><img src="/wordpress/wp-content/uploads/1042458668.jpg" width="128" height="128" alt=""></center>
]]></content>
    
    <summary type="html">
    
      老婆生日了，老婆生日快乐 :)

&lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/1042458668.jpg&quot; width=&quot;128&quot; height=&quot;128&quot; alt=&quot;&quot;&gt;&lt;/center&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="生日" scheme="http://wdicc.com/tags/%E7%94%9F%E6%97%A5/"/>
    
  </entry>
  
  <entry>
    <title>为什么喝酒有的人会脸红，有的人会脸发白？</title>
    <link href="http://wdicc.com/different-behave-after-drinking/"/>
    <id>http://wdicc.com/different-behave-after-drinking/</id>
    <published>2006-06-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<a target="_blank" href="http://zhidao.baidu.com/question/89581.html">http://zhidao.baidu.com/question/89581.html</a>

让我们从脸红的原因说起吧。很多人以为是酒精导致的，其实不然，是乙醛引起的。乙醛具有让毛细血管扩张的功能，而脸部毛细血管的扩张才是脸红的原因。所以喝酒脸红的人意味着能迅速将乙醇转化成乙醛，也就是说有他们有高效的乙醇脱氢酶 (alcohol dehydrogenase)。不过我们不能忘了还有一种酶，乙醛脱氢酶(aldehydedehydrogenase)。喝酒脸红的人是只有前一个酶没有后一个酶，所以体内迅速累积乙醛而迟迟不能代谢，因此会长时间涨红了脸。不过大家都有经验，当1－2个小时后红色就会渐渐腿去，这是靠肝脏里的P450慢慢将乙醛转化成乙酸，然后进入TCA循环而被代谢。
 
那么喝酒比较厉害的人是怎么回事呢？这些人往往越喝脸越白，到一个点突然不行了，烂醉如泥。那是因为这样的人高活性的乙醇脱氢酶和乙醛脱氢酶均没有，主要靠肝脏里的P450慢慢氧化（因为P450是特异性比较低的一群氧化酶）。那么，这样的人为什么会给人很能喝酒的感觉呢？那时因为他们靠体液来稀释酒精，个头越大感觉越能喝酒。在正常情况下，酒精浓度要超过0.1%他们才会昏迷，对大多数南方人来说是半斤白酒，而北方人由于体型大，可以喝到8两到一斤白酒。但不管什么人，如果他是脸越喝越白型的，最好不要超过半斤，不然有急性酒精中毒的可能性。 

如果一个人即有高活性的乙醇脱氢酶又有高活性的乙醛脱氢酶会怎样呢？他/她就是传说中的酒篓子。如何判断他/她是不是酒篓子呢？看是不是大量出汗。因为如果两个酶都高活性，酒精迅速变成乙酸进入TCA循环而发热，所以大量发热而出汗。碰到这样的人你只能自认倒霉，就是十个八个正常人也斗不过他。好在这样的人不多，大概10万分之一左右吧。 

有一点要提醒大家，喝酒脸红的人其实不容易伤肝脏，而和酒脸白的人特别容易伤肝脏。红脸的人大家一般少劝酒，因此喝得少，酒后发困，睡上15－30分钟就又精神抖擞了。而白脸的则往往不知自己的地线，在高度兴奋中饮酒过量，直到烂醉。他们体内的酒精由于没有高活性的酶处理而发生积累，导致肝脏损伤。酒精性肝损伤一般只发生在这些人身上。红脸的人可以连续几餐即便喝吐了也喝酒，而白脸的人需要更多时间的休息，因为酒精的代谢需要一两天的时间。 

顺便提一下，根据有关研究江浙两省的人（古代吴国和越国的后代）似乎是红脸基因的起源地，也就是说这些人多数带有高活性的乙醇脱氢酶。而北方人多数是白脸型的。那么如果你是北方出生的，又是红脸型的，说明什么呢？答案是明显的，因为红脸基因是显性基因。
]]></content>
    
    <summary type="html">
    
      &lt;a target=&quot;_blank&quot; href=&quot;http://zhidao.baidu.com/question/89581.html&quot;&gt;http://zhidao.baidu.com/question/89581.html&lt;/a&gt;

让我们从脸红的原因说起吧。很多人以为是酒精
    
    </summary>
    
    
      <category term="Food" scheme="http://wdicc.com/tags/Food/"/>
    
      <category term="喝酒" scheme="http://wdicc.com/tags/%E5%96%9D%E9%85%92/"/>
    
  </entry>
  
  <entry>
    <title>linux系统密码忘记的几种恢复方法</title>
    <link href="http://wdicc.com/recover-password-in-linux/"/>
    <id>http://wdicc.com/recover-password-in-linux/</id>
    <published>2006-06-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[root密码忘记的话，是需要到机器旁边来做恢复的。

1 single模式
single模式进入系统是不需要密码的，进入系统后就是root权限，直接修改root密码即可。

1）grub
grub选择系统的画面出来之后，找到需要恢复密码的系统，按e，然后找到kernel行，按e，然后在最后加上single，按回车，然后按b就可以启动了。

2）lilo
似乎在lilo命令行输入linux single就可以。

如果lilo或者grub设置了等待时间为0的话，这个方法就行不通了，另外grub还可以设置修改密码，密码不知道的话也没有办法恢复。

2 用livecd启动
找一个livecd，比如ubuntu的或者knoppix之类，启动之后将硬盘上面的分区挂载上，然后修改/etc/shadow文件，或者chroot过去用passwd命令修改。

好了，有上面两种方法，特别是第二种，基本上就没有问题了。
]]></content>
    
    <summary type="html">
    
      root密码忘记的话，是需要到机器旁边来做恢复的。

1 single模式
single模式进入系统是不需要密码的，进入系统后就是root权限，直接修改root密码即可。

1）grub
grub选择系统的画面出来之后，找到需要恢复密码的系统，按e，然后找到kernel行，按e，
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="密码" scheme="http://wdicc.com/tags/%E5%AF%86%E7%A0%81/"/>
    
  </entry>
  
  <entry>
    <title>关于css布局的一片文章</title>
    <link href="http://wdicc.com/an-article-about-css/"/>
    <id>http://wdicc.com/an-article-about-css/</id>
    <published>2006-06-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.barelyfitz.com/screencast/html-training/css/positioning/

具体内容就不转了，有示范的，转过来就不好看了
]]></content>
    
    <summary type="html">
    
      http://www.barelyfitz.com/screencast/html-training/css/positioning/

具体内容就不转了，有示范的，转过来就不好看了

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="css" scheme="http://wdicc.com/tags/css/"/>
    
  </entry>
  
  <entry>
    <title>给blog加了一个验证图片</title>
    <link href="http://wdicc.com/spam-for-blog/"/>
    <id>http://wdicc.com/spam-for-blog/</id>
    <published>2006-06-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[插件地址在 <a href="http://www.tattertools.com/bbs/view.php?id=plugin&amp;page=1&amp;sn1=&amp;divpage=1&amp;sn=off&amp;ss=on&amp;sc=on&amp;select_arrange=headnum&amp;desc=asc&amp;no=203" target="_blank" rel="external">这里</a>

下载插件后，把插件解压放到plugins目录中，然后往plugins/comment-validator这里传一个字体，英文的就好，比如我传的是comic.ttf，然后修改这个文件夹里面的index.php，把第6行的 $font = 指向刚才传的font地址。比如我的

<span style="color: rgb(155, 24, 193)">$font = "/data/web/tt2/plugins/comment-validator/comic.ttf";</span>

然后修改这个文件第32行的return地址，默认的那个似乎是针对单用户模式的，我这里多用户模式不好用，我把它修改成了下面的

<span style="color: rgb(255, 118, 53)">return "http://blog.wdicc.com/attach/temp.png";</span>

修改你的skin的skin.html，找到comment相关部分的password输入段，修改成类似下面的
<br style="color: rgb(153, 204, 102)"><span style="color: rgb(153, 204, 102)">&lt;div class="comment_item"&gt;&lt;label for="[##_rp_input_password_##]"&gt;&amp;nbsp;&amp;nbsp;Validate Code : &amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/label&gt;&lt;input type="text" maxlength="8" id="[##_rp_input_password_##]" value="[##_rp_admin_check_##]" class="comment_box" size="30" maxlength="20" /&gt;&lt;img src="[##_comment_validater_##]" border="0" /&gt;&lt;/div&gt;</span>

将其中的input的type修改为text，这样用户输入验证码的时候能看见输入的是啥。在后面加上关于验证码图片的显示部分。然后就可以了。

这样原来的password功能就没有了。谁有功夫自己研究研究怎么避免这个问题把。我是觉得那个功能实在没用。

此外还可以给验证输入那里加上有没有输入验证码的部分。
]]></content>
    
    <summary type="html">
    
      插件地址在 &lt;a href=&quot;http://www.tattertools.com/bbs/view.php?id=plugin&amp;amp;page=1&amp;amp;sn1=&amp;amp;divpage=1&amp;amp;sn=off&amp;amp;ss=on&amp;amp;sc=on&amp;amp;select
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="blog" scheme="http://wdicc.com/tags/blog/"/>
    
  </entry>
  
  <entry>
    <title>魔羯女情感世界的背后zz</title>
    <link href="http://wdicc.com/horoscope-girl/"/>
    <id>http://wdicc.com/horoscope-girl/</id>
    <published>2006-06-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.newsmth.net/bbscon.php?bid=7&amp;id=907120

魔羯女情感世界的背后（魔羯女之终极分析）《原创》

相比其他十一个星座的女孩，魔羯女是最令人费解的一个群体。她们神秘莫测，却又无比简单，她们既冷漠又火热，既现实又浪漫，是一切矛盾的综合体，对不曾接触过她们这一群体的男人产生了不可抗拒的吸引力。她们的情感世界是如此背离又如此统一，那么，在她们魔幻般的情感世界的背后，真正的本质是什么呢？————自私！！！！！ 
<br><a id="more"></a>1.魔羯女为什么慢热？ 

魔羯女难追是众所周知，也就是她们自己常说的慢热。其他十一个星座的女孩在涉足感情的时候，她们和对方的感情交流是相互的，是一个互动的过程，在交流和相互理解中就能比较快的进入恋爱状态。而魔羯女的在感情上极度自私的，她们的感情世界是封闭的，她们只顾及自己的感受，从来不想，不愿意，也懒得去顾及对方的感受。她们不存在和对方的感情交流，一切的感情流动都是单向的。对方传递过来的感情，追求她们时的性格表现，她们永远都是闷着头被动的接受，然后象鉴别通行密码一样在心里盘算着对方传递过来的信号能和自己的固有感情世界有百分之几的呼应，和自己的内在性格有多少的互补等等，如果这一契合累计值能达到她们内心设立的接受底线的话，她们就会接受这个人，如果达不到这个底线的话，无论那个人怎么努力都无法被魔羯女接受。因此，魔羯女最合适的恋爱对象并不是一个真正爱她们并且愿意为她们真心付出的人（虽然他们能给魔羯女带来一生真正的幸福），而是一个她们所痴心暗恋的人。但是魔羯女又是极端现实的，即使她们痴心暗恋一个人，她们也有一个前提，那就是那个人也必须喜欢她们。从这个角度而言，魔羯女在恋爱上是个典型的完美主义者。 

2，魔羯女一旦接受一个人，她们的爱情和婚姻为什么相对稳定的多？ 

一般而言，魔羯女在接受一个人以后，其爱情与婚姻与其他星座的女孩相比要稳定的多，但如果认为这就是因为魔羯女比其他星座的女孩更加爱自己的爱人，从而爱情和婚姻才比其他星座的女孩要更加稳定的话，那就错了。如果说其他十一个星座的女孩如果能够专一地对待自己的爱人和感情，那是因为她们在爱情和婚姻中所持有的是一种相互付出和相互理解和包容的态度，她们愿意付出，也希望对方付出，达到了这种状态，爱情和婚姻就是稳定的，一旦这种状态被破坏，两人无法相处，那么感情就将解体,而感情本来就是个唯心性比重很大的东西，因此基于感情互动的婚姻虽然更契合于爱情的本质，但外观看起来却似乎要脆弱多变的多。而魔羯女则不然，她们在接受一个人后的感情和婚姻的稳定不是基于她们和对方的相互付出和相互理解，而是完全建立在她们自己的需要之上，仍然是自私的产物。换言之，魔羯女极度缺乏安全感，安全感和稳定的归宿感是她们感情的终极目的。因此，与其说魔羯女对感情专一稳定是因为她全心全力的爱对方，不如说她处于怕感情解体之后自己还要暴露于缺乏安全感的恐惧之下。在这种心态下，魔羯女一旦接受一份感情，就会把它当作自己需要的载体，当作一件物质化的实实在在的东西而不是情感交融的载体，从而以更大的包容性来对待它，不到万不得已不会放弃。但即使在这时她们和对方相处的过程当中，魔羯女与对方的感情交流仍然是单向的，在感情上她们仍然吝于付出，她们仍然象鉴别密码一样来衡量对方传递过来的感情信号是否让自己感到舒适和安全，她们仍然有一个维持和不维持的底线，不过这个底线要低的多，那是因为这个底线已经最大化的包含了她们自己的需要。任何人在对待自己的需要的时候总是能最大程度的包容和付出。 

3，魔羯女一旦决定分手，为什么绝情冷峻和固执到几乎无法挽回的地步？ 

其他任何十一个星座的女孩的分手都没有绝情冷峻和固执到魔羯女那样的地步，她们的分手总有挽回的余地，而且很多挽回的感情都在以后的岁月中被证明是良缘佳偶。之所以如此，还是因为如前所说，魔羯女在感情上极度自私的，她们永远都只在乎自己的感受，从来不会顾及对方的感受。谈恋爱时她们觉得对方传递过来的感情信号可以达到她们的接受底线因而会接纳对方，当她们不爱对方或者基于对双方未来的不确定性而打算分手的时候，她们的决定也是基于自己的感情需要。这时候魔羯女和对方的感情交流仍然是单向的，她们的感情世界就象一个巨大的宇宙黑洞，无论对方怎么解释怎么认错怎么晓之以情怎么动之以理，所传递过来的感情信号到了魔羯女那里就犹如光被投射进了那个无边的巨大的宇宙黑洞，而别想得到一丝一毫的反馈和感动（至于那个宇宙黑洞里是怎么运行的，那只有她们自己知道了），只能让人叹息她们的绝情如斯。 

在这里可能又有人不服气，会说魔羯女不会轻易分手，一旦分手都是经过深思熟虑的。因此深思熟虑的东西是考虑周详后的产物，一旦决定决不回头。那么我要问，深思熟虑后的决定，就一定是对的吗？还是如前所说，魔羯女的情感特征是极度自私，从而在和对方的感情交流上永远是单向的，既然是单向的，就谈不到真正的理解对方。而且，说实话，魔羯女很聪明，但她们的聪明是体现在她们对这个靠不住的现实世界的透彻理解上，她们更独立，更脚踏实地，更注重现实基础给她们带来幸福的可能，从这个角度而言，她们是聪明和理智的，这是大智慧。但另一方面，她们又是一群标准的笨蛋，她们的脑子反应总比别人慢半拍，典型的反应迟钝，她们要么不说话，说出话来都是直来直去。她们表面上世故现实，骨子里就是一群长不大的孩子。她们只会凭别人的表面表现来对对方做出判断，稍微拐一个弯她们就弄不懂对方的真实感受从而导致误解。在这种情况下，她们会觉得摸不透对方从而觉得很累，最终选择分手。但她们恰恰忘了，她们需要别人对她们敞开真实的心扉，而她们却何曾向对方敞开过自己的心扉？更何况魔羯女本身就是一个连自己都和自己纠缠不清的感情世界的矛盾体？在这种情况下，只有傻子才会对她们完全袒露心扉，而且魔羯女并不会爱上傻子！ 

4,从魔羯女孩怕受伤害说起。。。 

魔羯女很善良，因此怕被伤害，她们保护自己最主要的方式就是封闭自己的感情世界，而她们也总以此做为封闭自己感情世界的合理性理由。说魔羯女孩在情感上自私并不是否定她们害怕受伤害因而加以自我保护的合理性，事实上，因为太怕受伤害了反而强化了她们情感自私的本性。当被别人指责她们在情感上自私的时候，她们自己可能会觉得挺委屈，她们会说，我是因为怕受伤害才封闭自己的感情的呀。但是反过来说，与其他十一个星座的女孩相比，魔羯女光知道自己怕受伤害，却从来没想过别的星座的女孩也不是刀枪不入的铁打金刚，也同样怕受伤害。都是同样怕受伤害，别的星座的女孩就能勇于交流感受勇于付出感情勇于回头接纳，但魔羯女却不能，这在情感上如果不正好说明了她们比其他十一个星座的女孩更加自私那么又说明了什么呢？在此我不妨回答一个众多喜欢魔羯女但又对魔羯女不了解的GG们常遇到的一个问题：魔羯女对他们为什么冷热不均？答案很简单：还是自私！当魔羯MM需要你的时候，在她们看来你就应该马上出现在她们的身边，这时候的她们就显的温情的多，而当她们有事情比较忙或者不需要你陪伴的时候，即使你需要她们，那么你也应该知趣的躲到一边不要烦她。这些想法和行为在魔羯女看来是理所应当和根本不需要给对方什么解释的，但在GG们看来，这就是所谓的冷热不均，一个误会就此发生。 

5，魔羯女总是被选择的吗？ 


在此我要顺便提到一个我感觉很有意思的问题，我原来浏览论坛的时候不止一次的看到有魔羯女孩自己感叹说魔羯女孩是善良和容易受伤害的，因为她们总是被选择。但我对此的看法却截然相反，是的，魔羯女总是被看中她们的别的男人追求，而鲜有主动去追求自己喜欢的男人，因此从形式上看，她们是被选择的。但实质上，假如一个男人想追求一个女孩，如果那个女孩是别的星座的还好说，起码感情流动是双向的，哪怕这个男人还没有被这个女孩接受，他的感情的付出大多能得到程度不同的反馈和安慰，即使被拒绝也知道个为什么，从而也不至于伤的太重。而遇到魔羯女孩则不然，在被魔羯女接受之前，你别想得到一丝一毫的反馈和感动，她们就象藏在人事部办公室大门后那个苛刻的招聘主管，不露声色的观察着一个个忐忑不安的应聘者，同时心里面拨动着自己的小算盘决定自己的取舍，让那些被刷掉的应聘者死都不知道怎么死的。魔羯女即使暗恋某个人，也除非那个人也喜欢她们，乖乖的主动来到她招聘办公室来请她们定夺才可。从这个角度来说，谁才是真正的主宰者和选择者呢？西方有句人际关系交往法则名言：较少关心人际关系者掌握最大主动权。那么这句话在魔羯女这里是否可以改成“较少付出感情者掌握最大主动权”呢？显然，魔羯女孩在这方面都是天才，而她们还在感叹她们是被选择者！ 

有的女孩在论坛上反驳我说“你光知道魔羯女孩不轻易付出，那是因为她们慎重，她们知道感情不是儿戏，而一旦付出你知道是什么概念吗？”好！那我就以此为索引，展开我的下一个看法： 

6，魔羯女为什么总觉得她们一旦接受一份感情后对对方的付出总是最大的？ 

魔羯女的观点之一就是，别看她们不好追，但一旦她们接受一份感情的话，那一定是最大的忘我的付出。乍一看，似乎有道理，但实在经不起推敲。首先我要说，不光她们，其余任何十一个星座的女孩在接受一份感情的时候，都是做了最大的付出的，因为就目前社会发展状况来说，决定一个女人一生幸福的还是她们的爱情和婚姻，事业倒在其次（有的魔羯女孩可能不同意我这句话，但事实上确实如此！），没有一个星座可以例外。既然爱情和婚姻在最大程度上决定了女性一生的幸福，那么绝大多数女孩子在接受一份感情后都是认真对待和最大程度上全力付出的，这并不是魔羯女孩的专利。所以现在面临的一个问题就是：魔羯女为什么总是觉得她们对于感情的付出是最大的？在这里我不妨做一个抽象而简单的说明。假如人类的感情在没有丝毫付出时的值是0，一般交流时的值是3，全力付出时的值是10，而接受的临界点是6。那么，当别的星座的女孩在被追求时，她们和对方的感情是互动升温的，那么没完全接受这份感情时的值为3（因为存在互动，是一般交流），一旦接受了这份感情，她们对对方的感情付出值为10，10—3=7。而魔羯女孩在被追求时，她们和对方之间的感情是单向交流的，她们只判断不付出，这时她们对对方的感情付出值是0甚至是负数比如说-2，她们一旦接受了这份感情，她们对对方的付出值为10，10—0=10，或者10—（-2）=12，然后她们就认为，我付出的绝对值为10或者12，而别的星座的女孩子为对方付出的感情绝对值才是7呢。因此她们得出结论是她们一旦接受一份感情后她们的付出是最大的，并进而认为她们是最无私和最勇于付出的，但事实上别的星座的女孩的付出和她们一样，都是10。 

更进一步讲，魔羯女一旦接受一份感情，就把它当作自己需要的载体，在形式上比如家庭生活方面等等的确是在付出，在她们看来这就是对承载自己幸福的物质载体的付出，这和别的星座的女孩没有什么两样，但在和对方的感情交流上依然是单方向的，她们的感情依然是吝于付出的，即使对对方觉得有不合适的地方也是闷在心里。其实爱的本质就是相互包容和适应，但在魔羯女这里，包容变成了忍耐（这是两个完全不同的概念，包容是因为爱对方而最大程度的容纳对方，而忍耐是基于自己的需要而观察对方有没有突破自己需要的底线，虽然这个底线可能放的非常低），适应更谈不上，她心里会要求对方能摸透她们的心思从而自己调整来适应她们，包括适应她们的需要，而她们却从来没有想过既然已经接受对方，那么自己如果真爱对方的话也应该有所调整来适应对方，哪怕这种调整只有一点点。因此，经常有对方在促不及防还没有一点预兆和心理准备的情况下就遇到了魔羯女的分手通牒（虽然这个决定也是在她们考虑，不，忍耐好久以后做出的），但因为她们和对方的感情交流是单向的，因此很难避免一定程度的误解，建立在误解上的分手是最令人遗憾和痛心的，而她们提出分手常常又是那么促不及防，令人难以接受，从这个角度而言，魔羯女最伤人处正在于此。 

7，魔羯女孩的性格特征和合适的择偶模式是什么？ 

如果说魔羯女孩的情感特征是极度自私的话，那么她们的性格特征也可以用简单的两个字来概括：矛盾！具体说来，就是外表的冷漠与内心的火热并存，极度的自恋与心底的自卑或不自信并存，对这个无情而冷漠的现实世界的天生的洞察与却容易被日常生活中事物或人的最拙劣的表象所迷惑并存，表面上的世故城府与骨子里就是个天真的孩子的本质并存，感情上的细腻敏感与大脑思维模式的僵化迟钝并存，疑神疑鬼的天生疑心病与却对什么事情都容易当真的轻信并存。甚至她们的行为都打上了矛盾的烙印，她们讨厌一个人但她们的行为却可能给那个人以相反的误导，她们喜欢一个人却因为一些别人所不理解而她们自以为是的原因而掉头走掉，她们很善良，却往往给人冷酷无情的印象，她们不愿意伤害别人，但往往把她们最不愿意伤害的人伤的体无完肤。她们就象一群行走在黑暗中的懵懂的孩童，真心爱她们的男人就如同她们手中给她们照亮道路的灯笼，她们失手打翻了手里的灯笼，只怪烫了自己的手，却没有注意手里的灯笼已经因为她们而燃烧并化成了灰烬。而她们会咬咬牙闷着头继续往前走。 

魔羯女看似冷漠现实，内心实则浪漫细腻，她们外表理智冷静，不动声色，但她们的内心却犹如几千度的岩浆在翻滚涌动，她们外表沉闷无趣但内心却渴望着能有一个疯狂放纵的机会（所以虽然在现实上她们需要一种稳定而平和的婚姻，但感情上她们最理想的爱人却是一个能够开启她们的心扉让她们内心的岩浆崩涌而出的男人，这，又是一个矛盾）。她们又是现实的，能让她们接受的男人必须要有一定的社会地位或成就，或者至少也要有一个可以预见到的有发展潜力的未来，但遗憾的是如果绕开这点不谈，单从情感角度来分析的话，适合魔羯女孩的情感模式却是可叹的。魔羯女不适合一个全心全意的爱着她的，不仅想要和她的人，而且想要和她的心融合在一起的聪明而真诚的男人。她们适合一个要么很有心机善于揣测女人的心理但并不真心对她的男人，要么适合一个真心对她但忠厚本分，面对她复杂的感情需要一窍不通从而以不变应万变来傻呵呵对待她们的男人。一个聪明而真心爱她们的男人不适合她们，因为这个男人聪明，所以他会观察她的一切细节进行判断，因为这个男人真心爱她，所以他想要走进魔羯女的内心情感世界并和她完全融合在一起，但是由于魔羯女的言行充满了太多的矛盾，所以这个男人越聪明，对魔羯女观察的越细越弄不明白她，同时由于魔羯女在情感上太自私了从而也太封闭了，所以这个男人因为弄不明白她的矛盾之处从而想走进她的内心世界去了解她的时候，却是越往里走越是走不进去，而在这样的男人看来，没有感情交融的爱情是不能叫做爱情的，所以一个聪明而真诚的男人和魔羯女是很难有结果的。但如果换做一个很有心计善于揣测女人的心理但并不真心对她的男人则恰好相反，因为这个男人对她不真心，所以他并不想去了解她的内心世界，这样一来就无形中去掉了和魔羯女交往的最大交流障碍，魔羯女的善良单纯轻信的本性一览无余地暴露出来，他可以从容不迫地以一个掠食者的眼光来打量面前这个善良而单纯的女孩，迎合她的想法以达到自己的目的。而这样的男人大多心术不正，这个时候受伤的只能是魔羯女。她们对真心爱她们者淡漠，但往往对抱着游戏态度者疯狂，因为真心爱她们者拙于表达，抱着游戏态度者花样百出，而魔羯女是典型的表面现象判断者。关于第三种男人，因为这个男人爱魔羯女，所以会真心对她，因为这个男人忠厚老实，所以可以包容魔羯女的一切复杂而矛盾的言行，他知道他不够聪明无法理解魔羯女的情感世界，因此也不想深入魔羯女的内心世界去探索，这时候，如果魔羯女能宽容地接受这样的男人的话，那么相比第二种男人的情况，这种选择对于魔羯女来说可称的上幸运的选择了，但问题是，魔羯女是否会喜欢这样的男人呢？而更多的魔羯女就在这种自我封闭，被人不理解，或者与对方的相互误解，对现实感情的失望，悲观，继而更加封闭情感的这样一种无奈的循环中，深深地体会到了“纱窗日落渐黄昏，金屋无人现泪痕，寂寞空庭春欲晚，梨花满地不开门”的孤独。。。。。 

8，我的用意是否是赞成魔羯女走向与现在的相反面：勇于交流，敞开心扉 呢？ 

答案恰恰相反，我不赞成魔羯女去象别的星座的女孩那样去对外界敞开心扉勇于交流。假如要魔羯女孩子在日常生活中就和人敞开心扉多沟通的话，这不是一个好办法，因为魔羯女孩子除了情感上的自私外，还非常单纯善良和被动，而且是典型的只凭表象去判别对方的一个群体，反倒容易被那些居心不良的人所害。而魔羯女的淡漠和自我封闭无形中却是一种对她们的一层保护色。所以我不赞成魔羯女孩子在日常生活中去和别人敞开心扉交流沟通，那样反而更害了自己。魔羯女孩子是一个需要被爱护的群体。 

所以，唯一的办法，照我看来，日常生活中对待不相干的人该怎么样就怎么样。在感情接受上也不妨照旧慢热，但是一旦接受一个男人的话，就要在情感上尽量和他多沟通，对这个特定的人把心扉敞开（但至于魔羯女怎样才能摆脱表面现象的束缚而能从本质上去判断一个人的好坏，我实在想不出什么好招来，星象上说魔羯大器晚成，估计就是要等摔足了跟斗就什么都明白了吧。不过，有些跟斗，摔一跤可能一辈子都爬不起来了）。万一双方有什么误会，也要以尽可能的耐心和包容给对方一个解释的机会，如果解释的理由可以接受的话，那就重新接纳对方，千万不要因为仅仅是心理上的固执而不愿回头，这样做应该可以最大程度上改善魔羯女的处境。毕竟，虽然魔羯女的事业心很强，但无论如何，决定女人一生幸福的最重要的因素仍然是爱情和婚姻。魔羯女也不能例外。 


在塔罗牌的解释中，魔羯被定义为：UTILIZE（利用）。这对魔羯的男女而言都适用，也是自私的另一种表示法。但“利用”这个词在她们的世界里含义和一般的理解还不一样。一般的理解中，“利用”含有心怀叵测损人利己的意思，而魔羯对人的利用几乎是一种本能的反应。而且魔羯女通常都很善良，她们不会心怀叵测损人利己，她们对人，对感情的利用也几乎是一种本能的反应。与其说是她们利用人，不如说是她们始终都在努力地使自己的现实利益最大化，她们对周围人和物的利用是如此的本能，以至于她们把别人的心已伤到极点她们自己还茫然不觉，直到别人直白地告诉她们她们才会突然明白过来：喔，怎么会这样！我本来不是这个意思啊。

有个朋友对魔羯女的评价很中肯，她们没有谈爱情的资本，只有谈生活的资本,对爱情有幻想，有激情的爱情理想主义者千万不要找魔羯女，而已经找到魔羯女的人也不要埋怨，因为那是万物构造的不同，是天注定的。魔羯女是如此的现实固执，在情感上又是如此的自私，这和男女之间在感情上的唯心性及相互付出相互交流的固有本质发生了很大的冲突。因此在感情上魔羯女很少有幸福的。但她们一旦在碰得头破血流历经坎坷后走进了某桩婚姻，她们的婚姻在物质上和稳定性上看起来却“似乎”让人羡慕。但是只有她们自己的心里，才会在岁月流淌的某一天，默默的告诉自己，她们当年曾经因为误解和固执而错过了可以真正让她们一生幸福的那一个人。。。。。
]]></content>
    
    <summary type="html">
    
      http://www.newsmth.net/bbscon.php?bid=7&amp;amp;id=907120

魔羯女情感世界的背后（魔羯女之终极分析）《原创》

相比其他十一个星座的女孩，魔羯女是最令人费解的一个群体。她们神秘莫测，却又无比简单，她们既冷漠又火热，既现实又浪漫，是一切矛盾的综合体，对不曾接触过她们这一群体的男人产生了不可抗拒的吸引力。她们的情感世界是如此背离又如此统一，那么，在她们魔幻般的情感世界的背后，真正的本质是什么呢？————自私！！！！！ 
&lt;br&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
      <category term="星座" scheme="http://wdicc.com/tags/%E6%98%9F%E5%BA%A7/"/>
    
  </entry>
  
  <entry>
    <title>apache的rewrite一点配置心得</title>
    <link href="http://wdicc.com/apache-rewrite/"/>
    <id>http://wdicc.com/apache-rewrite/</id>
    <published>2006-06-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[apache这里有一些奇怪的日志。

<span style="color: rgb(0, 0, 255)">211.90.119.118 - - [12/Apr/2006:00:00:12 +0800] "GET http://abc.com.cn/www/x.jsp HTTP/1.1" 200 2994 "-" "SEC-schx639 UP.Browser/4.1.26l"</span>

通常GET这里都是“/www/x.jsp”的，可是这个是怎么产生的呢？通过浏览器访问http://abc.com.cn/http://abc.com.cn/www/x.jsp，也不能产生这种请求，后来查看apache手册，这个引号里面表示的是“请求的第一条信息”，google了一下才知道，可以用下面的方式产生这种日志。

<span style="color: rgb(0, 0, 255)">telnet abc.com.cn 80</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">GET http://abc.com.cn/www/x.jsp HTTP/1.1</span>

<br><a id="more"></a>这样看来，这个请求应该是不正确的，“get /www/x.jsp HTTP/1.1”才对。这个请求被转发给weblogic之后，weblogic会处理不了，因为他会去找“http://abc.com.cn/http://abc.com.cn/www/x.jsp”这个文件，显然是找不到的。

不过幸好，weblogic有个PathTrim设置，将请求路径种的“http://abc.com.cn”给他去掉就可以了。

<span style="color: rgb(0, 0, 255)">&lt;IfModule mod_weblogic.c&gt;</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">WebLogicHost 192.168.0.252</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">WebLogicPort 7050</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">PathTrim http://abc.com.cn</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">MatchExpression *.jsp</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">&lt;/IfModule&gt;</span>

问题似乎解决了。不过此后又发现我们的域名不止这一个，还有def.com.cn和dfg.com.cn，解决方法似乎也很简单，多添加几个PathTrim呗，但是此后你就会发现，weblogic似乎比较弱智，只有最后一个PathTrim设置会生效……，查看了weblogic的文档也没有找到解决方法，他那里也没有说可以写几个。

这样就需要从apache这里解决，幸好apache这里还有虚拟主机。针对各个域名分别配置几个虚拟主机，建立基于域名的虚拟主机。文档可以参考<a href="http://www.douzhe.com/apm/ApacheManual/zh-cn/vhosts/name-based.html" target="_blank" rel="external">这里</a>&nbsp; 。

需要注意的是，基于域名的虚拟主机配置好之后，如果用虚拟主机里面没有的域名访问的时候，他会去匹配第一个虚拟主机，同样，用ip访问也会如此。

当一个请求到达的时候，服务器会首先检查它是否使用了一个能和 NameVirtualHost相匹配的IP地址。如果能够匹配， 它就会查找每个与这个IP地址相对应的&lt;VirtualHost&gt;配置段， 并尝试找出一个ServerName或ServerAlias配置项与请求的主机名相同的。 如果找到了，它就会使用这个服务器的配置。 否则，将使用符合这个IP地址的第一个列出的虚拟主机。

配置好虚拟主机之后，上面的问题就解决了。接着就发现有些终端不能正常访问业务了。查看全局的配置，有些rewrite rule的配置，想当然认为虚拟主机会继承全局设置。其实不是这样的，全局的对虚拟主机的没有任何影响。还需要在虚拟主机中单独设置。

<span style="color: rgb(0, 0, 255)">RewriteEngine on</span><br style="color: rgb(0, 0, 255)"><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">RewriteLog /usr/local/apache/apache_rewrite_log.log</span><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">RewriteLogLevel 2</span><br style="color: rgb(0, 0, 255)"><br style="color: rgb(0, 0, 255)"><span style="color: rgb(0, 0, 255)">RewriteRule&nbsp; xx</span>

建议加上log的设置，这样可以很好的检查rewrite有没有起作用。此外，也一定要加上RewriteEngine on，否则任何rewrite rule都不会起作用。
]]></content>
    
    <summary type="html">
    
      apache这里有一些奇怪的日志。

&lt;span style=&quot;color: rgb(0, 0, 255)&quot;&gt;211.90.119.118 - - [12/Apr/2006:00:00:12 +0800] &quot;GET http://abc.com.cn/www/x.jsp HTTP/1.1&quot; 200 2994 &quot;-&quot; &quot;SEC-schx639 UP.Browser/4.1.26l&quot;&lt;/span&gt;

通常GET这里都是“/www/x.jsp”的，可是这个是怎么产生的呢？通过浏览器访问http://abc.com.cn/http://abc.com.cn/www/x.jsp，也不能产生这种请求，后来查看apache手册，这个引号里面表示的是“请求的第一条信息”，google了一下才知道，可以用下面的方式产生这种日志。

&lt;span style=&quot;color: rgb(0, 0, 255)&quot;&gt;telnet abc.com.cn 80&lt;/span&gt;&lt;br style=&quot;color: rgb(0, 0, 255)&quot; /&gt;&lt;span style=&quot;color: rgb(0, 0, 255)&quot;&gt;GET http://abc.com.cn/www/x.jsp HTTP/1.1&lt;/span&gt;

&lt;br&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>bash中的数组变量zz</title>
    <link href="http://wdicc.com/var-in-bash/"/>
    <id>http://wdicc.com/var-in-bash/</id>
    <published>2006-06-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<h3 class="title">http://xiaowang.net/bgb-cn/ch10s02.html
</h3><h3 class="title">10.2.1. 建立数组                     </h3>                                                         <p>数组是一个包含多个值的变量。任何变量都可以在数组中使用。数组的尺寸没有最大限制，也不要求成员变量连续索引或者赋值。数组是基于0的：第一个元素的下标以0开始。</p>            <p>间接的声明使用以下的语法来声明一个变量：</p>            <div class="cmdsynopsis">               <p><code class="command"><code class="varname">ARRAY[INDEXNR]</code>=value</code>                </p>            </div>            <p> <span class="emphasis"><em>INDEXNR</em></span> 需要使用一个值为正数的数学表达式。            </p>            <p>一个数组的外部声明使用内建命令 <span><strong class="command">declare</strong></span> 来完成：            </p>            <div class="cmdsynopsis">               <p><code class="command">declare <code class="option">-a</code> <code class="varname">ARRAYNAME</code></code>                </p>            </div>            <p>一个带有索引值的声明也是可以接受的，但是索引值将被忽略。对数组的指定属性可以通过使用内建命令 <span><strong class="command">declare</strong></span> 和 <span><strong class="command">readonly</strong></span>。属性对数组中的所有变量起作用；你不能使用混合数组。            </p>            <p>数组变量也可以使用这种格式的复合赋值来建立：</p>            <div class="cmdsynopsis">               <p><code class="command"><code class="varname">ARRAY</code>=(value1 value2 ... valueN)</code>                </p>            </div>            <p>每个值将以这种形式 <span class="emphasis"><em>[indexnumber=]string</em></span> 排列。索引号是可选的。如果提供，索引号就赋给它；otherwise the index of the element assigned is the number of the last index that was assigned, plus               one.  这样的格式 <span><strong class="command">declare</strong></span> 也可以接受。如果不提供索引值，那索引自动从零开始。            </p>            <p>在数组中加入缺少或者额外的成员使用以下语法：</p>            <div class="cmdsynopsis">               <p><code class="command"><code class="varname">ARRAYNAME[indexnumber]</code>=value</code>                </p>            </div>            <p>记住 <span><strong class="command">read</strong></span> 内建命令提供 <code class="option">-a</code> 选项，来允许对一个数组的成员变量进行读取和赋值。            </p>                  <div class="sect2" lang="zh-cn">            <div class="titlepage">               <div>                  <div>                     <h3 class="title"><a name="sect_10_02_02"></a>10.2.2. 对数组的变量解引用                     </h3>                  </div>               </div>            </div>            <p>为了指明在一个数组中的项目的内容，为了指向一个数组中的一个项目的内容，使用{}。这样是必须的，正如你可以从下面的例子看出，来绕过扩展操作符的shell解释。如果索引的数字是 <span class="emphasis"><em>@</em></span> 或者 <span class="emphasis"><em>*</em></span>，一个数组的所有的成员都将被引用。            </p><pre class="screen"><code class="prompt">[bob in ~]</code> <span><strong class="command"><code class="varname">ARRAY</code>=<em class="parameter"><code>(one two three)</code></em></strong></span>

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">${ARRAY[*]}</code></strong></span>
one two three

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">$ARRAY[*]</code></strong></span>
one[*]

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">${ARRAY[2]}</code></strong></span>
three

<code class="prompt">[bob in ~]</code> <span><strong class="command"><code class="varname">ARRAY[3]</code>=<em class="parameter"><code>four</code></em></strong></span>

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">${ARRAY[*]}</code></strong></span>
one two three four
</pre><p>不提供索引号码来指向某个数组的一个数字变量的内容和指向第一个元素的内容是一样的。</p>         </div>         <div class="sect2" lang="zh-cn">            <div class="titlepage">               <div>                  <div>                     <h3 class="title"><a name="sect_10_02_03"></a>10.2.3. 删除数组变量                     </h3>                  </div>               </div>            </div>            <p> <span><strong class="command">unset</strong></span> 内建命令用来删除数组或者数组成员：            </p><pre class="screen"><code class="prompt">[bob in ~]</code> <span><strong class="command">unset <code class="varname">ARRAY[1]</code></strong></span>

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">${ARRAY[*]}</code></strong></span>
one three four

<code class="prompt">[bob in ~]</code> <span><strong class="command">unset <code class="varname">ARRAY</code></strong></span>

<code class="prompt">[bob in ~]</code> <span><strong class="command">echo <code class="varname">${ARRAY[*]}</code></strong></span>
&lt;--no output--&gt;
</pre></div>
]]></content>
    
    <summary type="html">
    
      &lt;h3 class=&quot;title&quot;&gt;http://xiaowang.net/bgb-cn/ch10s02.html
&lt;/h3&gt;&lt;h3 class=&quot;title&quot;&gt;10.2.1. 建立数组                     &lt;/h3&gt;                     
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>IP负载均衡技术zz</title>
    <link href="http://wdicc.com/ip-blance/"/>
    <id>http://wdicc.com/ip-blance/</id>
    <published>2006-06-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://zh.linuxvirtualserver.org/node/25

<div class="tree"><div class="menu"><ul><li class="leaf"><a href="http://zh.linuxvirtualserver.org/node/26" target="_blank" rel="external">通过NAT实现虚拟服务器（VS/NAT）</a></li><li class="leaf"><a href="http://zh.linuxvirtualserver.org/node/27" target="_blank" rel="external">通过IP隧道实现虚拟服务器（VS/TUN）</a></li><li class="leaf"><a href="http://zh.linuxvirtualserver.org/node/28" target="_blank" rel="external">通过直接路由实现虚拟服务器（VS/DR）</a></li><li class="collapsed"><a href="http://zh.linuxvirtualserver.org/node/29" target="_blank" rel="external">三种方法的优缺点比较</a></li><li class="leaf"><a href="http://zh.linuxvirtualserver.org/node/33" target="_blank" rel="external">小结</a></li></ul>下面是三种方法的框图。
[##_Gallery|1242465348.jpg||1053977827.jpg||1329637443.jpg||width="400" height="300"_##]
</div></div>
]]></content>
    
    <summary type="html">
    
      http://zh.linuxvirtualserver.org/node/25

&lt;div class=&quot;tree&quot;&gt;&lt;div class=&quot;menu&quot;&gt;&lt;ul&gt;&lt;li class=&quot;leaf&quot;&gt;&lt;a href=&quot;http://zh.linuxvirtualserver.org
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>豆角焖面zz</title>
    <link href="http://wdicc.com/i-love-it/"/>
    <id>http://wdicc.com/i-love-it/</id>
    <published>2006-06-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.newsmth.net/bbscon.php?bid=44&amp;id=717203963

1. 肉切片炒好盛出（稍微比正常口味咸一点）；
2. 豆角洗净去筋掰成2cm的小段，油烧热爆葱花然后丢豆角进去，炒一会儿放盐，酱油少 水，再炒至8成熟，将豆角汁盛出80%，即锅里汤汁的量刚好在豆角间起伏，肉倒入；
3. 和面，湿布将面团盖住醒15分钟，面团擀成圆形，均匀撒面粉在面片上，用擀面杖从圆&nbsp; 形的不同扇形边将面片一层层裹在上面，反复几次面片就很薄了，最后一次裹好后别展&nbsp; 开，用刀从擀面杖的左边滑向右边将面片切开，这时候的面片近似矩形，从右边的短边&nbsp; 开始切，切细一点，然后撒点面粉把面条丝抖开。均匀一层层铺在锅中的豆角肉上，盖&nbsp; 锅盖，中火；
4. 两个人吃的面条量10分钟就可以关火，闷两分钟后把刚才盛出的豆角汤汁均匀撒在面条&nbsp; 上，吃！

 &nbsp; 第一次做，还算是成功。

tip: 比较不好掌握的是闷的这十分钟里，汤汁多的话会把面条泡了少的话会糊，推荐开始汤汁留少不留多，中间可以揭开锅看看，少的话将盛出的汤汁沿锅边浇一点进去，注意别� 接浇在面条上。

<center><img src="/wordpress/wp-content/uploads/1277507719.jpg" width="540" height="0" alt=""></center>
]]></content>
    
    <summary type="html">
    
      http://www.newsmth.net/bbscon.php?bid=44&amp;amp;id=717203963

1. 肉切片炒好盛出（稍微比正常口味咸一点）；
2. 豆角洗净去筋掰成2cm的小段，油烧热爆葱花然后丢豆角进去，炒一会儿放盐，酱油少 水，再炒至8成熟，将豆角汁盛
    
    </summary>
    
    
      <category term="Food" scheme="http://wdicc.com/tags/Food/"/>
    
  </entry>
  
  <entry>
    <title>Installing and Configuring SNMP Service on Windows 2000</title>
    <link href="http://wdicc.com/Installing-and-Configuring-SNMP-Service-on-Windows-2000/"/>
    <id>http://wdicc.com/Installing-and-Configuring-SNMP-Service-on-Windows-2000/</id>
    <published>2006-06-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[再win2k启用snmp服务

http://resource.intel.com/telecom/support/releases/winnt/sr511/docs/htmlfiles/userguide/getting4.htm#1001777

<font face="Times New Roman, Times, serif">This section describeshow to install and configure SNMP for Windows 2000. For instructions oninstalling and configuring SNMP for Windows NT, see <a href="http://resource.intel.com/telecom/support/releases/winnt/sr511/docs/htmlfiles/userguide/getting3.htm#1001729" target="_blank" rel="external"><em>Section3.1.1, Installing and Configuring SNMP Service on Windows NT</em></a>.</font><h4>  <a name="1001779"> </a><font color="#000000" face="Times New Roman, Times, serif">Installing SNMP for Windows 2000</font></h4><p>  <a name="1001780"> </a><font face="Times New Roman, Times, serif">The following steps describe how to install the SNMP service on a Windows 2000 machine:</font></p><ol type="1"><font face="Times New Roman, Times, serif"><li value="1"><a name="1001781"> </a>Invoke the <strong>Windows 2000 Control Panel</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="2"><a name="1001782"> </a>Double click the <strong>Add/Remove Programs</strong> icon.</li></font><font face="Times New Roman, Times, serif"><li value="3"><a name="1001783"> </a>Select <strong>Add/Remove Windows Components</strong>. The Windows Component Wizard is displayed.</li></font><font face="Times New Roman, Times, serif"><li value="4"><a name="1001785"> </a>Check the Management and Monitoring Tools box.</li></font><font face="Times New Roman, Times, serif"><li value="5"><a name="1001786"> </a>Click the <strong>Details</strong> button.</li></font><font face="Times New Roman, Times, serif"><li value="6"><a name="1001787"> </a>Check the Simple Network Management Protocol box and click <strong>OK</strong>. The Windows Component Wizard is redisplayed.</li></font><font face="Times New Roman, Times, serif"><li value="7"><a name="1001788"> </a>Click <strong>Next</strong> to proceed through the Windows Component Wizard until it has finished.</li></font></ol><h4>  <a name="1001789"> </a><font color="#000000" face="Times New Roman, Times, serif">Configuring SNMP Service for Windows 2000</font></h4><p>  <a name="1001790"> </a><font face="Times New Roman, Times, serif">Follow the steps below to configure SNMP Service on a Windows 2000 machine:</font></p><ol type="1"><font face="Times New Roman, Times, serif"><li value="1"><a name="1001791"> </a>Invoke the <strong>Windows 2000 Control Panel</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="2"><a name="1001792"> </a>Double click the <strong>Administrative Tools </strong>icon.</li></font><font face="Times New Roman, Times, serif"><li value="3"><a name="1001793"> </a>Double click the <strong>Services</strong> icon.</li></font><font face="Times New Roman, Times, serif"><li value="4"><a name="1001794"> </a>Select <strong>SNMP Service</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="5"><a name="1001795"> </a>Choose the <strong>Agent</strong> tab.</li></font><font face="Times New Roman, Times, serif"><li value="6"><a name="1001796"> </a>Enter <strong>Contact</strong> and <strong>Location</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="7"><a name="1001797"> </a>Choose the <strong>Traps</strong> tab.</li></font><font face="Times New Roman, Times, serif"><li value="8"><a name="1001798"> </a>Enter <strong>Community Name:</strong> <font face="Times New Roman, Times, serif">public</font>.</li></font><font face="Times New Roman, Times, serif"><li value="9"><a name="1001799"> </a>Click <strong>Add to List</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="10"><a name="1001800"> </a>Under <strong>Trap Destinations</strong>, click <font face="Times New Roman, Times, serif"><strong>Add</strong></font> and enter the <strong>IP address</strong> for each management node to receive trap notifications from this managed node. </li></font><font face="Times New Roman, Times, serif"><li value="11"><a name="1001801"> </a>Click <strong>OK</strong> when done.</li></font><font face="Times New Roman, Times, serif"><li value="12"><a name="1001802"> </a>Choose the <strong>Security</strong> tab.</li></font><font face="Times New Roman, Times, serif"><li value="13"><a name="1001803"> </a>Highlight<strong> public </strong>and click <strong>Edit</strong>. Change <strong>Community Rights</strong> to READ CREATE.</li></font><font face="Times New Roman, Times, serif"><li value="14"><a name="1001804"> </a>Click <strong>OK</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="15"><a name="1002870"> </a>Stop <strong>SNMP Service</strong> (if started) and restart.</li></font><font face="Times New Roman, Times, serif"><li value="16"><a name="1002889"> </a>Double click <strong>SNMP Trap Service</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="17"><a name="1002890"> </a>Set <strong>Startup Type</strong> to 'Automatic'.</li></font><font face="Times New Roman, Times, serif"><li value="18"><a name="1002891"> </a>Click <strong>OK</strong>.</li></font><font face="Times New Roman, Times, serif"><li value="19"><a name="1002892"> </a>Stop <strong>SNMP Trap Service</strong> (if started) and restart.</li></font></ol>
]]></content>
    
    <summary type="html">
    
      再win2k启用snmp服务

http://resource.intel.com/telecom/support/releases/winnt/sr511/docs/htmlfiles/userguide/getting4.htm#1001777

&lt;font face=&quot;Ti
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>博士和小工的区别zz</title>
    <link href="http://wdicc.com/a-joke-7/"/>
    <id>http://wdicc.com/a-joke-7/</id>
    <published>2006-05-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[话说联合利华新换了一批自动香皂包装机以后，经常出现香皂盒子是空的没有香皂的情况，而在装配线一头用人工检查因为效率问题不太可能而且不保险，这不，一个由自动化，机械，机电一体化等专业的博士组成的Solution队伍来解决这个问题，没多久他们在装配线的头上开发了全自动的X光透射检查线，透射检查所有的装配线尽头等待装箱的香皂盒，如果由空的就用机械臂取走。

不巧，中国一乡镇企业生产香皂也遇到类似问题，老板吩咐线上小工务必想出对策解决之，小工拿了一个电风扇放在装配线的头上，对着最后的成品吹之，空盒子被吹走问题解决之.

这跟美国人花大血本发明太空笔和苏联人用铅笔异曲同工啊
]]></content>
    
    <summary type="html">
    
      话说联合利华新换了一批自动香皂包装机以后，经常出现香皂盒子是空的没有香皂的情况，而在装配线一头用人工检查因为效率问题不太可能而且不保险，这不，一个由自动化，机械，机电一体化等专业的博士组成的Solution队伍来解决这个问题，没多久他们在装配线的头上开发了全自动的X光透射检查线，
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>weblogic的“Too many open files”错和apache的“CONNECTION_REFUSED”错</title>
    <link href="http://wdicc.com/too-many-open-files/"/>
    <id>http://wdicc.com/too-many-open-files/</id>
    <published>2006-05-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[weblogic和apache桥接之后，访问量大的时候，遇到了weblogic报下面的错误：

<span style="color: rgb(255, 0, 0)">####<2006-5-30 ïâîç12ê±38·ö19ãë="" cst=""> <notice> <weblogicserver> <myapp.vivaful.com> <myserver> <listenthread.default> <<wls ke<="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">rnel>> <> <bea-000205> <after having="" failed="" to="" listen,="" the="" server="" is="" now="" listening="" on="" port="" 7001.=""> </after></bea-000205></span><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">####<2006-5-30 ïâîç12ê±38·ö19ãë="" cst=""> <critical> <weblogicserver> <myapp.vivaful.com> <myserver> <listenthread.default> <<wls <="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">Kernel>> <> <bea-000204> <failed 0="" to="" listen="" on="" port="" 7001,="" failure="" count:="" 1,="" failing="" for="" seconds,="" java.net.socketexception:="" t<="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">oo many open files> </span><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">####<2006-5-30 ïâîç12ê±38·ö20ãë="" cst=""> <notice> <weblogicserver> <myapp.vivaful.com> <myserver> <listenthread.default> <<wls ke<="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">rnel>> <> <bea-000205> <after having="" failed="" to="" listen,="" the="" server="" is="" now="" listening="" on="" port="" 7001.=""> </after></bea-000205></span><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">####<2006-5-30 ïâîç12ê±38·ö20ãë="" cst=""> <critical> <weblogicserver> <myapp.vivaful.com> <myserver> <listenthread.default> <<wls <="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">Kernel>> <> <bea-000204> <failed 0="" to="" listen="" on="" port="" 7001,="" failure="" count:="" 1,="" failing="" for="" seconds,="" java.net.socketexception:="" t<="" span=""><br style="color: rgb(255, 0, 0)"><span style="color: rgb(255, 0, 0)">oo many open files> </span>
<span style="color: rgb(255, 0, 0)"></span><span style="color: rgb(255, 0, 0)"></span>
weblogic产生这个错误以后，就会拒绝服务，这时通过IE已经访问不了了。所以接下来就会出现apache报下面的错误：

<span style="color: rgb(255, 0, 0)">[Tue May 30 13:00:57 2006] [error] CONNECTION_REFUSED [os error=0, line 1600 of ../nsapi/URL.cpp]: 218.206.70.193:7001 errno= 0
</span><br><a id="more"></a>这时访问apache会提示和weblogic的桥出了问题。

这个问题已经遇到很多次了，但通常都是夜间，第二天查看日志的时候，会发现那个时候确实访问量比较大。查看当时的连接情况可以看到，apache和java连接都700多。看了网上的说明，调整了系统参数、调整了weblogic的设置等，都不见效。
http://www.bea.com.cn/support_pattern/Too_Many_Open_Files_Pattern.html
http://e-docs.bea.com/wls/docs81/perform/index.html

今天又出现这个情况了，不过是白天，和web应用的作者一起对weblogic的情况进行了观察。

通过weblogic控制台，可以看到<span class="dialog-label" id="wl_control_weblogic_management_configuration_ServerMBean_lookupServerRuntime_ExecuteQueueRuntime_ServicedRequestTotalCount_label">Throughput这里大都是在处理1左右的访问，</span><span class="dialog-label" id="wl_control_weblogic_management_configuration_ServerMBean_lookupServerRuntime_ExecuteQueueRuntime_PendingRequestCurrentCount_label">Queue Length这里却在不停的涨，开始就对</span><a href="http://218.206.70.193:7001/console/actions/mbean/ListMBeansAction?wl_sort_domain_ExecuteQueueTable_config=0300&reloadNav=false&tab=config&MBeanClassName=weblogic.management.configuration.ExecuteQueueMBean&MBeanClass=weblogic.management.configuration.ExecuteQueueMBean&scopeMBean=anymusic%3AName%3Dmyserver%2CType%3DServer" target="_blank" rel="external"><span class="column-header"></span></a><span style="text-decoration: underline">T</span>hread  count做了修改，从50调整到了400，但是还是可以看到Thread会用完，一会<span class="dialog-label" id="wl_control_weblogic_management_configuration_ServerMBean_lookupServerRuntime_ExecuteQueueRuntime_PendingRequestCurrentCount_label">Queue Length就又涨起来了。

分析一下就可以知道，情况应该是Queue的线程对访问的处理速度太慢，导致需要处理的队列越来越多。需要处理队列的增长速度比队列的处理速度慢，这样不管有多少线程，肯定最后都会导致不够用。

现在大家就开始考虑问题是不是出在应用这里了，应用执行速度慢，weblogic线程就会一直占着，就会导致线程用尽。而实际上确实是应用这里的问题。

应用对访问的处理速度很快，有访问进来就先放到队列，而队列的处理速度却是500ms处理一下，这样一秒也就处理2个。这样问题的原因就很明确了，1s内外部访问应用可能有10来次，而应用才处理2个，所以自然会将线程占满了。

调整队列处理速度之后问题就解决了，空闲线程一直是400。</span><span class="dialog-label" id="wl_control_weblogic_management_configuration_ServerMBean_lookupServerRuntime_ExecuteQueueRuntime_PendingRequestCurrentCount_label"></span>
</failed></bea-000204></span></wls></listenthread.default></myserver></myapp.vivaful.com></weblogicserver></critical></2006-5-30></span></wls></listenthread.default></myserver></myapp.vivaful.com></weblogicserver></notice></2006-5-30></span></failed></bea-000204></span></wls></listenthread.default></myserver></myapp.vivaful.com></weblogicserver></critical></2006-5-30></span></wls></listenthread.default></myserver></myapp.vivaful.com></weblogicserver></notice></2006-5-30></span>]]></content>
    
    <summary type="html">
    
      weblogic和apache桥接之后，访问量大的时候，遇到了weblogic报下面的错误：

&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;####&lt;2006-5-30 ÏÂÎç12Ê±38·Ö19Ãë CST&gt; &lt;Notice&gt; &lt;WebLogicServer&gt; &lt;myapp.vivaful.com&gt; &lt;myserver&gt; &lt;ListenThread.Default&gt; &lt;&lt;WLS Ke&lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;rnel&gt;&gt; &lt;&gt; &lt;BEA-000205&gt; &lt;After having failed to listen, the server is now listening on port 7001.&gt; &lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;####&lt;2006-5-30 ÏÂÎç12Ê±38·Ö19Ãë CST&gt; &lt;Critical&gt; &lt;WebLogicServer&gt; &lt;myapp.vivaful.com&gt; &lt;myserver&gt; &lt;ListenThread.Default&gt; &lt;&lt;WLS &lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;Kernel&gt;&gt; &lt;&gt; &lt;BEA-000204&gt; &lt;Failed to listen on port 7001, failure count: 1, failing for 0 seconds, java.net.SocketException: T&lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;oo many open files&gt; &lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;####&lt;2006-5-30 ÏÂÎç12Ê±38·Ö20Ãë CST&gt; &lt;Notice&gt; &lt;WebLogicServer&gt; &lt;myapp.vivaful.com&gt; &lt;myserver&gt; &lt;ListenThread.Default&gt; &lt;&lt;WLS Ke&lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;rnel&gt;&gt; &lt;&gt; &lt;BEA-000205&gt; &lt;After having failed to listen, the server is now listening on port 7001.&gt; &lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;####&lt;2006-5-30 ÏÂÎç12Ê±38·Ö20Ãë CST&gt; &lt;Critical&gt; &lt;WebLogicServer&gt; &lt;myapp.vivaful.com&gt; &lt;myserver&gt; &lt;ListenThread.Default&gt; &lt;&lt;WLS &lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;Kernel&gt;&gt; &lt;&gt; &lt;BEA-000204&gt; &lt;Failed to listen on port 7001, failure count: 1, failing for 0 seconds, java.net.SocketException: T&lt;/span&gt;&lt;br style=&quot;color: rgb(255, 0, 0)&quot; /&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;oo many open files&gt; &lt;/span&gt;
&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;&lt;/span&gt;&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;&lt;/span&gt;
weblogic产生这个错误以后，就会拒绝服务，这时通过IE已经访问不了了。所以接下来就会出现apache报下面的错误：

&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;[Tue May 30 13:00:57 2006] [error] CONNECTION_REFUSED [os error=0, line 1600 of ../nsapi/URL.cpp]: 218.206.70.193:7001 errno= 0
&lt;/span&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
      <category term="apache" scheme="http://wdicc.com/tags/apache/"/>
    
  </entry>
  
  <entry>
    <title>为什么硬盘总是从c盘开始</title>
    <link href="http://wdicc.com/a-joke-6/"/>
    <id>http://wdicc.com/a-joke-6/</id>
    <published>2006-05-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[&nbsp;&nbsp; &nbsp;现代铁路的铁轨间距是4英尺8点5英寸，铁轨间距采用了电车轮距的标准，而电车轮距的标准则沿袭了马车的轮距标准。 
 &nbsp; &nbsp;马车的轮距为何是4英尺8点5英寸？原来，英国的马路辙迹的宽度是4英尺8点5英寸。如果马车改用其他尺寸的轮距，轮子很快就会在英国的老马路上撞坏。 
 &nbsp; &nbsp;英国马路的辙迹宽度又从何而来？这可以上溯到古罗马时期。整个欧洲(包括英国)的老路都是罗马人为其军队铺设的，4英尺8点5英寸正是罗马战车的宽度。 
 &nbsp; &nbsp;罗马战车的宽度又是怎么来的？答案很简单，它是牵引一辆战车的两匹马的屁股的总宽度。 
 &nbsp; &nbsp;段子到这里还没有结束。美国航天飞机的火箭助推器也摆脱不了马屁股的纠缠———火箭助推器造好之后要经过铁路运送，而铁路上必然有一些隧道，隧道的宽度又是根据铁轨的宽度而来。代表着尖端科技的火箭助推器的宽度，竟然被两匹马的屁股的总宽度决定了。
]]></content>
    
    <summary type="html">
    
      &amp;nbsp;&amp;nbsp; &amp;nbsp;现代铁路的铁轨间距是4英尺8点5英寸，铁轨间距采用了电车轮距的标准，而电车轮距的标准则沿袭了马车的轮距标准。 
 &amp;nbsp; &amp;nbsp;马车的轮距为何是4英尺8点5英寸？原来，英国的马路辙迹的宽度是4英尺8点5英寸。如果马车改用其他尺寸的
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>miranda im中文社区正式上线</title>
    <link href="http://wdicc.com/miranda-im-in-china/"/>
    <id>http://wdicc.com/miranda-im-in-china/</id>
    <published>2006-05-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.qiqiao.5gigs.com/?2006/5/22/4
<p>在国内，对MIM的介绍可以说少而又少，虽然有几篇介绍，但是主要以blog为住，相对来说不集中，因此导致国内学习MIM的新手苦于求助无门而放弃。</p><p><a href="http://miranda.lifevine.org/" target="_self">miranda im中文社区</a>，是由国内最早的miranda imQQ讨论群内的成员共同维护组建，由于近来学习MIM者居多，QQ群限制的人数已经不足以满足那么多的学习求助者，因此大家才建立这个社区，以方便使用MIM的网友在这里交流学习，</p><p>目前，也是国内唯一一个miranda im的中文社区，欢迎大家到那里交流学习！ 
</p>
]]></content>
    
    <summary type="html">
    
      http://www.qiqiao.5gigs.com/?2006/5/22/4
&lt;p&gt;在国内，对MIM的介绍可以说少而又少，虽然有几篇介绍，但是主要以blog为住，相对来说不集中，因此导致国内学习MIM的新手苦于求助无门而放弃。&lt;/p&gt;&lt;p&gt;&lt;a href=&quot;http://mi
    
    </summary>
    
    
      <category term="Miranda IM" scheme="http://wdicc.com/tags/Miranda-IM/"/>
    
      <category term="Miranda" scheme="http://wdicc.com/tags/Miranda/"/>
    
  </entry>
  
  <entry>
    <title>ps 命令的小tip</title>
    <link href="http://wdicc.com/tips-for-ps/"/>
    <id>http://wdicc.com/tips-for-ps/</id>
    <published>2006-05-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[显示httpd进程的pid
#ps -C httpd -o pid=

杀死所有httpd进程
#for pid in $(ps -C httpd -o pid=);do kill -9 $pid;done
]]></content>
    
    <summary type="html">
    
      显示httpd进程的pid
#ps -C httpd -o pid=

杀死所有httpd进程
#for pid in $(ps -C httpd -o pid=);do kill -9 $pid;done

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="ps" scheme="http://wdicc.com/tags/ps/"/>
    
  </entry>
  
  <entry>
    <title>Tuning Hardware, Operating System, and Network Performance</title>
    <link href="http://wdicc.com/Tuning-Hardware-Operating-System-and-Network-Performance/"/>
    <id>http://wdicc.com/Tuning-Hardware-Operating-System-and-Network-Performance/</id>
    <published>2006-05-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://e-docs.bea.com/wls/docs81/perform/HWTuning.html

http://www.bea.com.cn/support_pattern/Too_Many_Open_Files_Pattern.html

<h2 class="head2">Linux Tunin<a name="Linux_tuning"></a>g Parameters</h2><p><a name="1121229"></a>For Linux operating systems, the following settings are recommended for optimal performance.</p><p><a name="1121263"></a></p><div class="tblmargin"><p class="tabletitle"><a name="1121232"></a>Table 2-5   Suggested Linux Values</p>	<table bordercolorlight="#FFFFFF" bordercolordark="#000000" border="1" cellpadding="3" cellspacing="0"><tbody><tr bgcolor="#cccccc">		<th scope="col" align="left" valign="top">			<p class="cellheading"><a name="1121236"></a>Parameter</p>		</th>		<th scope="col" align="left" valign="top">			<p class="cellheading"><a name="1121238"></a>Suggested Value</p>		</th>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121240"></a><code style="font-family: courier">/sbin/ifconfig lo mtu</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121242"></a><code style="font-family: courier">1500</code></p>		</td>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121244"></a><code style="font-family: courier">kernel.msgmni</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121246"></a><code style="font-family: courier">1024</code></p>		</td>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121248"></a><code style="font-family: courier">kernel.sem</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121250"></a><code style="font-family: courier">1000 32000 32 512</code></p>		</td>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121252"></a><code style="font-family: courier">fs.file-max</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121254"></a><code style="font-family: courier">65535</code></p>		</td>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121256"></a><code style="font-family: courier">kernel.shmmax</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121258"></a><code style="font-family: courier">2147483648</code></p>		</td>	</tr>	<tr>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121260"></a><code style="font-family: courier">net.ipv4.tcp_max_syn_backlog</code></p>		</td>		<td scope="row" align="left" valign="top">			<p class="table"><a name="1121262"></a><code style="font-family: courier">8192</code></p></td></tr></tbody></table></div>
]]></content>
    
    <summary type="html">
    
      http://e-docs.bea.com/wls/docs81/perform/HWTuning.html

http://www.bea.com.cn/support_pattern/Too_Many_Open_Files_Pattern.html

&lt;h2 class=&quot;h
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>用split分割备份文件，和用cat恢复备份</title>
    <link href="http://wdicc.com/split-and-cat/"/>
    <id>http://wdicc.com/split-and-cat/</id>
    <published>2006-05-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[split命令的使用格式如下：
$split --help
Usage: split [OPTION] [INPUT [PREFIX]]
Output fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default
PREFIX is `x'.&nbsp; With no INPUT, or when INPUT is -, read standard input.

Mandatory arguments to long options are mandatory for short options too.
&nbsp; -a, --suffix-length=N &nbsp; use suffixes of length N (default 2)
&nbsp; -b, --bytes=SIZE &nbsp; &nbsp; &nbsp;&nbsp; put SIZE bytes per output file
&nbsp; -C, --line-bytes=SIZE &nbsp; put at most SIZE bytes of lines per output file
&nbsp; -d, --numeric-suffixes&nbsp; use numeric suffixes instead of alphabetic
&nbsp; -l, --lines=NUMBER &nbsp; &nbsp;&nbsp; put NUMBER lines per output file
 &nbsp; &nbsp;&nbsp; --verbose &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; print a diagnostic to standard error just
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; before each output file is opened
 &nbsp; &nbsp;&nbsp; --help &nbsp; &nbsp; display this help and exit
 &nbsp; &nbsp;&nbsp; --version&nbsp; output version information and exit

SIZE may have a multiplier suffix: b for 512, k for 1K, m for 1 Meg.


通常使用的都是-b参数指定分割之后的文件的大小。

我们先建立一个测试文件。
#dd if=/dev/zero of=./test bs=1M count=512
就是以1M为单位，重复512次，也就是建立一个512M的文件。

$split -b 200m test test_back
执行这个命令之后，等执行完毕会看到目录下面多了几个文件
$ls
test test_backaa test_backab test_backac

这样就完成了文件的分割。如果对于文本文件，还可以使用split的-l参数针对行数进行分割。

这样分割传输之后，还需要重新合并才能使用，可以使用cat命令来完成。
$cat test_backa* &gt; test_back

执行完毕之后，可以看一下恢复的test_back文件和test文件的md5。
$md5sum test test_back
返回值应该是一样的。

使用tar备份的时候有时也需要对大的备份文件进行分割。
$tar czvf - /data | split -b 1024m - data

]]></content>
    
    <summary type="html">
    
      split命令的使用格式如下：
$split --help
Usage: split [OPTION] [INPUT [PREFIX]]
Output fixed-size pieces of INPUT to PREFIXaa, PREFIXab, ...; default
P
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>Apache + weblogic 桥接的Connection_Refused错误</title>
    <link href="http://wdicc.com/apache-weblogic-error/"/>
    <id>http://wdicc.com/apache-weblogic-error/</id>
    <published>2006-05-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://edocs.bea.com/wls/docs81/plugins/apache.html#113649

主要是调整<code style="font-family: courier">weblogic的AcceptBackLog参数。</code>
]]></content>
    
    <summary type="html">
    
      http://edocs.bea.com/wls/docs81/plugins/apache.html#113649

主要是调整&lt;code style=&quot;font-family: courier&quot;&gt;weblogic的AcceptBackLog参数。&lt;/code&gt;

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>weblogic apache 桥接指南</title>
    <link href="http://wdicc.com/weblogic-apache-bridge/"/>
    <id>http://wdicc.com/weblogic-apache-bridge/</id>
    <published>2006-05-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[Using Web Server Plug-Ins with WebLogic Server

http://edocs.bea.com/wls/docs90/plugins/apache.html
]]></content>
    
    <summary type="html">
    
      Using Web Server Plug-Ins with WebLogic Server

http://edocs.bea.com/wls/docs90/plugins/apache.html

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="weblogic" scheme="http://wdicc.com/tags/weblogic/"/>
    
  </entry>
  
  <entry>
    <title>使用cacti获取snmp发送的自定义信息</title>
    <link href="http://wdicc.com/cacti-snmp/"/>
    <id>http://wdicc.com/cacti-snmp/</id>
    <published>2006-05-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[★ 需求

服务器运行了weblogic和apache，可是有时weblogic进程会莫名crash，业务都在这上面，所以需要能监控程序的运行。我在服务器端写了一个脚本，使用curl检测这两个服务的状态，返回一个数字来确定是哪个服务down了，然后远程通过cacti采集数据画图。

<br><a id="more"></a>★ 解决方法

snmp提供了发送自定义信息的功能。查看snmpd.conf会看到有一个小节是关于外部脚本的，Executables/scripts。这个小节里面也举了例子，告诉你怎么通过snmp发送信息。我的做法如下（下面假定你已经配置好了snmp，通过cacti已经能采集到信息了）。

在任意位置添加一行：
exec .1.3.6.1.4.1.2021.51 wlsapache /root/wlsapache status
其中wlsapache是命令的名称，后面是命令以及参数。命令的名称可以随便起。脚本执行的结果类似下面：
# ./wlsapache status
3
ALL ok.
我这个脚本的“ALL ok”其实是副产品，对于采集数据没有用。

重启snmpd，然后远程通过snmpwalk接收一下数据看看：
# snmpwalk -v 1 192.168.1.201 -c public .1.3.6.1.4.1.2021.51 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
UCD-SNMP-MIB::ucdavis.51.1.1 = INTEGER: 1
UCD-SNMP-MIB::ucdavis.51.2.1 = STRING: "wlsapache"
UCD-SNMP-MIB::ucdavis.51.3.1 = STRING: "/root/wlsapache status"
UCD-SNMP-MIB::ucdavis.51.100.1 = INTEGER: 0
UCD-SNMP-MIB::ucdavis.51.101.1 = STRING: "3"
UCD-SNMP-MIB::ucdavis.51.101.2 = STRING: "ALL ok."
UCD-SNMP-MIB::ucdavis.51.102.1 = INTEGER: 0

其中我们需要的是UCD-SNMP-MIB::ucdavis.51.101.1 = STRING: "3"这一行：
# snmpwalk -v 1 192.168.1.201 -c public .1.3.6.1.4.1.2021.51.101.1
UCD-SNMP-MIB::ucdavis.51.101.1 = STRING: "3"

能采集到数据之后，就可以配置cacti来接收了。在cacti界面中console-&gt;Templates-&gt;Data Templates，然后点击右上角的Add，Data Templates中的name是给这个数据模板的命名，Data Source中的name将来显示在Data Sources中，我这里添加“|host_description| - Network - wlsapache”，选get snmp data，Internal Data Source Name也可以随便添，这个用来给rrd文件命名。设置完后就可以save了，save之后会发现下面多了一些选项，在最下面那个添上我们需要的数据的OID“.1.3.6.1.4.1.2021.51.101.1”，可以保存了。

此后需要创建一个Graph Templates，好让cacti生成图片。在cacti界面中console-&gt;Templates-&gt;Graph Templates，然后点击右上角的Add，Templates中的name是给这个数据模板的命名，Graph Template中的name是将来显示在图片上面中间的内容，我这里添加“|host_description| - wlsapache status”，其他保持默认，保存之后上面会出来一些选项。

在Graph Template Items中添加一个item，Data Source选之前添加的，color选择一个图片的颜色，Graph Item Type选AREA，也就是区域，也可以选其他的线条，Text Format设置说明。然后再添加一个，Graph Item Type选GPRINT，Consolidation Function选LAST，也就是当前的值，Text Format输入current。你还可以添加一些Graph Item Type为COMMENT的注释说明等。
现在只要为host添加这个画图模板就可以看到画出来的图了。

<center><img src="/wordpress/wp-content/uploads/1320809656.png" width="576" height="212" alt=""></center>
]]></content>
    
    <summary type="html">
    
      ★ 需求

服务器运行了weblogic和apache，可是有时weblogic进程会莫名crash，业务都在这上面，所以需要能监控程序的运行。我在服务器端写了一个脚本，使用curl检测这两个服务的状态，返回一个数字来确定是哪个服务down了，然后远程通过cacti采集数据画图。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>root用户无法修改的一个文件</title>
    <link href="http://wdicc.com/a-file-root-cant-modify/"/>
    <id>http://wdicc.com/a-file-root-cant-modify/</id>
    <published>2006-05-14T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[# ls -al xx
-rwxr-xr-x &nbsp; &nbsp;1 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 2647 Dec &nbsp;8 16:47 xx

# stat -c %a startWebLogic.sh
755

# mv xx xx.ss
mv: cannot move `xx' to `xx.ss': Operation not permitted

这是怎么回事呢？上bbs问了一下才知道。

# lsattr xx
----i-------- xx

只需要执行如下命令即可
#chattr -i xx
]]></content>
    
    <summary type="html">
    
      # ls -al xx
-rwxr-xr-x &amp;nbsp; &amp;nbsp;1 root &amp;nbsp; &amp;nbsp; root &amp;nbsp; &amp;nbsp; &amp;nbsp; &amp;nbsp; 2647 Dec &amp;nbsp;8 16:47 xx

# stat -c %a startWebLo
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>ldap samba实现windows域管理</title>
    <link href="http://wdicc.com/ldap-samba/"/>
    <id>http://wdicc.com/ldap-samba/</id>
    <published>2006-05-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[0 准备工作

1) 一个全新安装的debian sarge。1台或者多台Win 2k/xp测试电脑。
2) 至少懂一些LDAP和Samba。
3) 假设服务器的域名是abc.com，服务器的名称为test-server。

1 安装web服务器

# apt-get install apache2 php4 libapache2-mod-php4

等待安装完毕之后，用浏览器连接服务器的域名或者ip试试看。能显示web页就说明apache2没问题了。apache2的web的根目录在/var/www，配置文件在/etc/apache2。

此后需要验证php4是否安装妥当。在/var/www目录新建一个index.php文件，内容如下。

&lt;?
 &nbsp; &nbsp;phpinfo();
?&gt;

保存之后，再次连接服务器的 http://abc.com/index.php ，会看到一个php信息的网页，表示php安装成功。
<br><a id="more"></a>2 安装Openldap和phpldapadmin

debian里面的openldap的名字是slapd。ldap-utils包里包括了一些ldap有用的命令（都是以ldap开头的）。phpldapadmin是ldap的一个web管理界面。de4.2-util是Berkeley V4.2 数据库工具包，ldap需要用到。

#apt-get install slapd ldap-utils phpldapadmin db4.2-util

下载完毕包之后，开始安装之前，会出来一些设置界面（请注意这里出现问题的数目和安装系统时的某个设置有关系）。

slapd的设置
1) DNS domain nam填写你的服务器的域名，此后会作为基准DN。例如我输入abc.com，此后的基准DN就是dc=abc,dc=com。
2) Name of your organization填写你的组织的名称，或者公司的名称。我输入test-org。
3) Admin password填写管理员的密码，这个用户是ldap最高权限的拥有者。
4) 确认密码。
5) Allow LDAPv2 protocol询问你是否允许LDAPv2协议。如果是新装选否就可以了。如果需要兼容以前的系统，选是。

phpldapadmin的设置
1) LDAP服务器的ip或者主机名。因为是管理本机的LDAP服务器，所以默认的127.0.0.1就可以。
2) 是否启用TLS，也就是是否使用加密协议。加密的话可能需要apache2也做配置支持。这里选择否。
3) 基准DN。根据你的情况输入，这里我输入dc=abc,dc=com。
4) 这一步选择phpldapadmin的认证方式，安装过phpmysqladmin的应该会比较熟悉。选择session是最保险的方式。
5) 输入登陆服务器的dn，默认即可。这里还要注意，默认的行字也就是最后登陆phpldapadmin的管理员的用户名，比较长。
6) 需要配置的服务器，这里只需要选择apache2就可以了。
7) 选择是，重启apache。

此后即开始安装。slapd的配置文件都在/etc/ldap。phpldapadmin的配置文件在/etc/phpldapadmin。用浏览器打开 http://abc.com/phpldapadmin ，会看到phpldapadmin的界面，使用cn=admin,dc=abc,dc=com登陆。

###如果是etch，phpldapadmin 0.8.8.1，登陆的时候会提示用户名或密码错误，不知道是不是phpldapadmin 0.9.8.1版本的bug。此版本还有一个问题就是登陆之后，不能新建entry。0.9.8.2版本就没有这个问题了。所以如果你也是0.9.8.1版本的话，最好还是去http://phpldapadmin.sf.net下载一个新的版本，然后把其中的phpldapadmin/htdocs/template_engine.php覆盖 /usr/share/phpldapadmin/htdocs/template_engine.php 即可，或者也可以直接全部覆盖，要注意保留config/config.php。

如果提示用户名密码错误，不用担心，还可以修改/etc/ldap/slapd.conf文件，在index后面添加两行

rootdn "cn=admin,dc=abc,dc=com"
rootpw pw

之后重启slapd（/etc/init.d/slapd restart）之后即可用密码pw登陆，登陆之后可以修改密码，修改之后可以去掉上面添加的两行（当然，不删也可以）。

debian中的admin的密码是存储在数据库里面的，而不是/etc/ldap/slapd.conf文件中，所以可以不需要rootdn和rootpw的设置。

使用下面的命令可以查看ldap中所有的条目

#ldapsearch -x -b 'dc=abc,dc=com' '(objectclass=*)'

修改/etc/syslog.conf，增加下面一行。

local4.* &nbsp; &nbsp; &nbsp; &nbsp; /var/log/ldap.log

这样ldap生成的日志就会在/var/log/ldap.log里面出现。此外还需要设置/etc/ldap/slapd.conf的loglevel。

3 安装samba

samba-doc包含了和ldap一起工作的samba schema，这个是我们需要的。

#apt-get install samba samba-doc

samba的设置
1) Workgroup/Domain Name这里输入工作组名称或者域名称。我这里输入test-domain。
2) 是否使用加密密码。windows默认都是这个。选是。
3) 修改smb.conf使用DHCP设置的WINS。选否。
4) 选daemons。
5) 是否建立samba密码数据库，选是。

复制ldap需要的samba的schema。

#cp /usr/share/doc/samba-doc/examples/LDAP/samba.schema.gz /etc/ldap/schema
#cd /etc/ldap/schema/
#gzip -d samba.schema.gz

修改/etc/ldap/slapd.conf，在include后面加上一行。

include &nbsp; &nbsp; &nbsp; &nbsp; /etc/ldap/schema/samba.schema

重启slapd。配置samba使用ldap来验证。修改/etc/samba/smb.conf文件。

找到passdb backend = tdbsam，将其替换为下面内容。

passdb backend = ldapsam:ldap://127.0.0.1
ldap suffix = dc=abc,dc=com
ldap machine suffix = ou=machines
ldap user suffix = ou=users
ldap group suffix = ou=groups
ldap admin dn = cn=admin,dc=abc,dc=com
ldap delete dn = no

# 服务器配置为主域控制器
domain logons = yes

# allow user privileges
enable privileges = yes


设置之后可以使用testparm命令测试。

为samba提供LDAP rootdn的密码。

# smbpasswd -w your_passwd
Setting stored password for "cn=admin,dc=abc,dc=com" in secrets.tdb

重启samba。打开phpldapadmin看看，可以看到dc=abc,dc=com下面已经多出来一个entry。我这里是sambaDomainName=TEST-DOMAIN。查看其属性，可以看到最下面的sambaSID，这个后面的操作会用到。也可以使用net getlocalsid命令得到。


4 安装smbldap-tools

perl脚本，用来更加方便管理用户。主要使用他来初始化LDAP中samba中的部分。

#apt-get install smbldap-tools

配置smbldap-tools。

#cd /etc/smbldap-tools
#cp /usr/share/doc/smbldap-tools/examples/smbldap{.conf.gz,_bind.conf} ./
#gzip -d smbldap.conf.gz

之后修改下面几个文件以符合你的情况。

/etc/smbldap-tools/smbldap.conf

SID="S-1-5-21-3248317815-3353503310-553435137" 
suffix="dc=abc,dc=com" 
usersdn="ou=users,${suffix}" 
computersdn="ou=machines,${suffix}" 
groupsdn="ou=groups,${suffix}" 
sambaUnixIdPooldn="sambaDomainName=TEST-DOMAIN,${suffix}" 
hash_encrypt="MD5"

/etc/smbldap-tools/smbldap_bind.conf:

slaveDN="cn=admin,dc=abc,dc=com" 
slavePw="password" 
masterDN="cn=admin,dc=abc,dc=com" 
masterPw="password"

要注意这个文件里面的密码要添明文，所以最好为这个文件设置合适的权限。

执行smbldap-populate命令

# smbldap-populate
Using workgroup name from sambaUnixIdPooldn (smbldap.conf): sambaDomainName=TEST-DOMAIN
Using builtin directory structure
entry dc=abc,dc=com already exist.
adding new entry: ou=Users,dc=abc,dc=com
adding new entry: ou=Groups,dc=abc,dc=com
adding new entry: ou=Computers,dc=abc,dc=com
adding new entry: ou=Idmap,dc=abc,dc=com
entry sambaDomainName=TEST-DOMAIN,dc=abc,dc=com already exist. Updating it...
adding new entry: uid=Administrator,ou=Users,dc=abc,dc=com
adding new entry: uid=nobody,ou=Users,dc=abc,dc=com
adding new entry: cn=Domain Admins,ou=Groups,dc=abc,dc=com
adding new entry: cn=Domain Users,ou=Groups,dc=abc,dc=com
adding new entry: cn=Domain Guests,ou=Groups,dc=abc,dc=com
adding new entry: cn=Domain Computers,ou=Groups,dc=abc,dc=com
adding new entry: cn=Administrators,ou=Groups,dc=abc,dc=com
adding new entry: cn=Print Operators,ou=Groups,dc=abc,dc=com
adding new entry: cn=Backup Operators,ou=Groups,dc=abc,dc=com
adding new entry: cn=Replicators,ou=Groups,dc=abc,dc=com

此后，可以查看一下phpldapadmin，已经新加了几个entry。

5 安装mkntpwd

phpldapadmin需要使用这个程序来生成samba的加密密码。debian没有这个包，需要自己编译，编译之前可能需要安装make，gcc和libc-dev包。

#apt-get install make gcc libc-dev
#wget http://www.nomis52.net/data/mkntpwd.tar.gz 
#tar -zxf mkntpwd.tar.gz
#cd mkntpwd
#make
#cp mkntpwd /usr/local/bin 

修改/usr/share/phpldapadmin/templates/template_config.php文件。

查找

// uncomment to set the base dn of posix groups
// default is set to the base dn of the server
//$base_posix_groups="ou=People,dc=example,dc=com";

$samba3_domains[] =
array(&nbsp; 'name' &nbsp; =&gt; 'My Samba domain Name',
 &nbsp; &nbsp; &nbsp;&nbsp; 'sid' =&gt; 'S-1-5-21-4147564533-719371898-3834029857' );

// The base dn of samba group. (CUSTOMIZE)
//$samba_base_groups = "ou=Groups,ou=samba,dc=example,dc=org";

修改为

// uncomment to set the base dn of posix groups
// default is set to the base dn of the server
$base_posix_groups="ou=groups,dc=nomis52,dc=net";

$samba3_domains[] =
array(&nbsp; 'name' &nbsp; =&gt; 'TEST-DOMAIN',
 &nbsp; &nbsp; &nbsp;&nbsp; 'sid' =&gt; 'S-1-5-21-3248317815-3353503310-553435137' );

// The base dn of samba group. (CUSTOMIZE)
$samba_base_groups = "ou=groups,dc=abc,dc=com"

6 安装libnss-ldap

用来做linux验证。使得LDAP用户就像普通linux帐号一样。

#apt-get install libnss-ldap

libnss-ldap设置
1) 默认。
2) 查找基准。输入dc=abc,dc=com。
3) 选3。
4) 选否。
5) 选是。
6) 确定。

修改/etc/nsswitch.conf。

passwd: &nbsp; &nbsp; &nbsp; &nbsp; compat ldap
group: &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; compat ldap
shadow: &nbsp; &nbsp; &nbsp; &nbsp; compat ldap

这样验证密码的时候会先搜索/etc/passwd，然后才是ldap。

使用getent命令查看一下计算机上面的用户组，在最后会看到ldap的。

#getent group
.....
Domain Admins:x:512:Administrator
Domain Users:x:513:
Domain Guests:x:514:
Domain Computers:x:515:
Administrators:x:544:
Print Operators:x:550:
Backup Operators:x:551:
Replicators:x:552:

7 安装libpam-ldap

#apt-get install libpam-ldap

libpam-ldap设置
1) 使root成为数据库的管理员？选是。
2) 选否。
3) 输入admin的dn，cm=admin,dc=abc,dc=com。
4) 输入root使用的密码，留空使用原来的root密码。
5) 选md5。

修改 /etc/pam-ldap.conf。

pam_filter !(uidNumber=0)

设置不允许root通过ldap登陆linux。

修改下面文件使得pam使用ldap。

/etc/pam.d/common-account

# 注释掉这行 
#account &nbsp; &nbsp; &nbsp;&nbsp; required &nbsp; &nbsp; &nbsp;&nbsp; pam_unix.so

# 添加下面两行
account &nbsp; &nbsp; &nbsp; &nbsp; sufficient &nbsp; &nbsp;&nbsp; pam_ldap.so
account &nbsp; &nbsp; &nbsp; &nbsp; required &nbsp; &nbsp; &nbsp;&nbsp; pam_unix.so try_first_pass

/etc/pam.d/common-auth

# 注释掉这行 
#auth &nbsp; required &nbsp; &nbsp; &nbsp;&nbsp; pam_unix.so nullok_secure

# 添加下面两行
auth &nbsp;&nbsp; sufficient &nbsp; &nbsp;&nbsp; pam_ldap.so
auth &nbsp;&nbsp; required &nbsp; &nbsp; &nbsp;&nbsp; pam_unix.so nullok_secure use_first_pass

/etc/pam.d/common-password

# 注释掉这行
#password &nbsp; required &nbsp; pam_unix.so nullok obscure min=4 max=8 md5

# 添加下面两行
password &nbsp; sufficient pam_ldap.so
password &nbsp; required &nbsp; pam_unix.so nullok obscure min=4 max=8 md5 use_first_pass

重启ssh和samba。

安装nscd。

#apt-get install nscd

8 添加用户

smbldap-useradd : to add an user account (by default a posixAccount. Using '-a' option for a sambaSAMAccount, '-w' option for a machine sambaAccount), 
smbldap-userdel : to delete an existing user account 
smbldap-usermod : to modify an user account. 
smbldap-userinfo : to allow users to modify some informations themselves

修改/etc/samba/smb.conf。

guest account = nobody
add user script = /usr/sbin/smbldap-useradd -m "%u"
#delete user script = /usr/sbin/smbldap-userdel "%u"
add machine script = /usr/sbin/smbldap-useradd -w "%u"
add group script = /usr/sbin/smbldap-groupadd -p "%g"
#delete group script = /usr/sbin/smbldap-groupdel "%g"
add user to group script = /usr/sbin/smbldap-groupmod -m "%u" "%g"
delete user from group script = /usr/sbin/smbldap-groupmod -x "%u" "%g"
set primary group script = /usr/sbin/smbldap-usermod -g "%g" "%u"
ldap passwd sync = yes


添加一个测试用户。

#smbldap-useradd -a -m testuser
#smbldap-passwd testuser
#smbldap-passwd Administrator

重启一下电脑，然后使用下面的命令。

#net rpc -U Administrator rights grant testuser SeMachineAccountPrivilege

然后使用这个用户登陆一下域看看。



$ smbcontrol smbd reload-config

and grant the necessary rights to Administrator:

$ net -U Administrator rpc rights list
 &nbsp; &nbsp; SeMachineAccountPrivilege&nbsp; Add machines to domain
 &nbsp; &nbsp;&nbsp; SePrintOperatorPrivilege&nbsp; Manage printers
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; SeAddUsersPrivilege&nbsp; Add users and groups to the domain
 &nbsp; &nbsp; SeRemoteShutdownPrivilege&nbsp; Force shutdown from a remote system
 &nbsp; &nbsp; &nbsp; SeDiskOperatorPrivilege&nbsp; Manage disk shares

$ net -U Administrator rpc rights list Administrator

$ net -U Administrator rpc rights grant Administrator SeMachineAccountPrivilege
Successfully granted rights.




9 登陆脚本

创建网络共享
# mkdir -p /data/samba/netlogon
# chgrp "Domain Admins" /data/samba/netlogon

修改/etc/samba/smb.conf

# put this in the main section
logon script = logon.bat

# share for the logon scripts
[netlogon]
 comment = Network logon service
 path = /data/samba/netlogon
 write list = "@Domain Admins"
 guest ok = Yes
 
 下载KiXtart，解压到/data/samba/netlogon。
 
 #cd /data/samba/netlogon
 #wget "http://www.adminscripteditor.com/downloads.asp?act=v&amp;id=39"
 #apt-get install unzip
 #unzip KiX2010_451.zip
 #cp ./KiX2010.451/{KIX32.EXE,KX32.dll} ./
 
 创建logon.bat。
 
 \\debian\netlogon\kix32 \\debian\netlogon\logon.kix /f
]]></content>
    
    <summary type="html">
    
      0 准备工作

1) 一个全新安装的debian sarge。1台或者多台Win 2k/xp测试电脑。
2) 至少懂一些LDAP和Samba。
3) 假设服务器的域名是abc.com，服务器的名称为test-server。

1 安装web服务器

# apt-get install apache2 php4 libapache2-mod-php4

等待安装完毕之后，用浏览器连接服务器的域名或者ip试试看。能显示web页就说明apache2没问题了。apache2的web的根目录在/var/www，配置文件在/etc/apache2。

此后需要验证php4是否安装妥当。在/var/www目录新建一个index.php文件，内容如下。

&amp;lt;?
 &amp;nbsp; &amp;nbsp;phpinfo();
?&amp;gt;

保存之后，再次连接服务器的 http://abc.com/index.php ，会看到一个php信息的网页，表示php安装成功。
&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>rsync脚本的一个例子</title>
    <link href="http://wdicc.com/rsync-script/"/>
    <id>http://wdicc.com/rsync-script/</id>
    <published>2006-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-bash">

SYNCLOGFILE="/var/log/rsync-201.log"
SYNCLOCKFILE="/var/lock/rsync-201.lock"

if [[ -f $SYNCLOCKFILE ]]; then
  # lock file already present, bail
  exit 1
fi

echo -n ">>> Sync log for " >> $SYNCLOGFILE
date >> $SYNCLOGFILE

touch $SYNCLOCKFILE
rsync -vzrtopg  --delete 192.168.0.201::www /backup  >> $SYNCLOGFILE 2>&1
rm -f $SYNCLOCKFILE
</pre>
]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-bash&quot;&gt;

SYNCLOGFILE=&quot;/var/log/rsync-201.log&quot;
SYNCLOCKFILE=&quot;/var/lock/rsync-201.lock&quot;

if [[ -f $SYNCLOCKFILE ]]
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="rsync" scheme="http://wdicc.com/tags/rsync/"/>
    
  </entry>
  
  <entry>
    <title>端口映射</title>
    <link href="http://wdicc.com/portmap/"/>
    <id>http://wdicc.com/portmap/</id>
    <published>2006-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[★ 需求

1 只有一个ip，怎么让多台电脑上网？

只讲一下主机是双网卡的时候怎么解决。windows下面可以使用winroute、wingate或者系统自带的共享网络连接的功能，都可以实现共享上网。linux下面使用iptables一句话就可以实现。

至于主机是单网卡怎么解决，自己研究研究吧。我只在win下面尝试过用wingate，可是及其不稳定。

2 怎么将某个端口映射给内网？

内网某台电脑提供了服务，怎么让外网的用户可以访问呢？某些对外的服务可能会在内网的多台电脑上面提供，这时就需要做端口映射来让这些服务器让外网可以访问。

<br><a id="more"></a>★ 解决方法

1 共享上网

1) 按照下图连接电脑。
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;isp
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;gw(用来做网关的电脑，双网卡)
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;hub(or switch)
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; |
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;---------------------------
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp;&nbsp; | ........ | &nbsp; &nbsp; &nbsp; |
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;pc1 &nbsp; pc2 ......&nbsp; pcx &nbsp;&nbsp; pcy

gw一个网卡接isp，ip设置为isp告诉你的。另外一个网卡接hub，ip设置为一个内网ip，例如192.168.0.1。

2) 在gw上面执行如下脚本。
#------------script start--------
#!/bin/sh

IPT="/sbin/iptables"

# Internet Interface
INET_IFACE="ethx"
INET_ADDRESS="x.x.x.x"

# Local Interface Information
LOCAL_IFACE="ethy"
LOCAL_IP="192.168.0.1"
LOCAL_NET="192.168.0.0/24"
LOCAL_BCAST="192.168.0.255"

#修改从外网网卡出去的包的源地址，好让外网返回的包能正确回来。
$IPT -t nat -A POSTROUTING -o $INET_IFACE -j SNAT --to-source $INET_ADDRESS

#打开系统的转发功能
echo "1" &gt; /proc/sys/net/ipv4/ip_forward

#----------script end----------

这样内网的电脑做如下设置后就应该可以上网了。

ip：&nbsp; 192.168.0.x
网关: 192.168.0.1
dns:&nbsp; 和gw的设置一样

这时的服务器已经具备一个网关的功能，不过内网的电脑想要上网，都必须手动设置ip，想做到自动获取，可以

2 端口映射

端口映射需要做的其实就是修改对方发过来包的目的地址和端口，然后帮忙转发一下，并且转发的同时修改一下源地址，好让被转发的电脑认为是gw发的包，处理完毕之后好能正常返回gw，然后由gw在负责转发给外网的ip。端口转发需要用到iptables的nat表，上面这些操作是在PREROUTING和POSTROUTING链之间完成的。

1) 映射到外网ip
整个过程可以参考下图。
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0(外网网卡) &nbsp; &nbsp;
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________________________
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;|
 &nbsp; &nbsp;&nbsp; gw的80端口 &nbsp; &nbsp; &nbsp;&nbsp; 修改目标地址(DNAT) &nbsp; &nbsp; &nbsp; 修改源地址(SNAT)
外网ip----------&gt;PREROUTING------------&gt;POSTROUTING------------&gt;外网ip

所以，例如我们要将对gw 80端口的访问都转发到外网的202.202.202.202这台电脑上面，只需要在上面的脚本中添加下面的语句即可。

# 修改从外网进来的对80端口访问的数据包的目的地址
$IPT -t nat -A PREROUTING -p tcp -i $INET_IFACE --destination-port 80 \
 &nbsp; &nbsp; -j DNAT --to-destination 202.202.202.202

那么，你可能要问，按照上面的说法，这样只修改了目的地址，还要修改源地址啊，这样包才能正确返回到gw。问的好，不过其实我们已经做了这个设置了，聪明的你可能已经想到了，就是上面让内网ip可以上网的那个脚本里的一句语句已经实现了这个功能。

#修改从外网网卡出去的包的源地址，好让外网返回的包能正确回来。
$IPT -t nat -A POSTROUTING -o $INET_IFACE -j SNAT --to-source $INET_ADDRESS

就是上面这句，他把所有从外网网卡出去的包的源地址都修改了，当然也包括去往202.202.202.202的80端口的包。

2) 映射到内网ip
整个过程可以参考下图。
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0(外网网卡) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;eth0(内网网卡)
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;________________________ &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;_______________________
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;| &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; |
 &nbsp; &nbsp;&nbsp; gw的80端口 &nbsp; &nbsp; &nbsp;&nbsp; 修改目标地址(DNAT) &nbsp; &nbsp; &nbsp; 修改源地址(SNAT) &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 修改源地址(SNAT)
外网ip----------&gt;PREROUTING------------&gt;POSTROUTING------------&gt;PREROUTING-----------&gt;POSTROUTING-----------&gt;内网ip

所以，例如我们要映射80端口到内网的192.168.1.80这台电脑上面，只需要在上面的脚本中添加下面的语句即可。

# 修改从外网进来的对80端口访问的数据包的目的地址
$IPT -t nat -A PREROUTING -p tcp -i $INET_IFACE --destination-port 80 \
 &nbsp; &nbsp; -j DNAT --to-destination 192.168.1.80
 &nbsp; &nbsp; 
# 修改从内网网卡出去的所有数据包源地址
$IPT -t nat -A POSTROUTING -o $LOCAL_IFACE \
 &nbsp; &nbsp; -j SNAT --to-source $LOCAL_IP

这个比上面多了一句，意思相信你已经明白了吧。因为访问内网ip的时候走了内网网卡，所以还需要对从内网网卡出去的包修改一下源地址。
]]></content>
    
    <summary type="html">
    
      ★ 需求

1 只有一个ip，怎么让多台电脑上网？

只讲一下主机是双网卡的时候怎么解决。windows下面可以使用winroute、wingate或者系统自带的共享网络连接的功能，都可以实现共享上网。linux下面使用iptables一句话就可以实现。

至于主机是单网卡怎么解决，自己研究研究吧。我只在win下面尝试过用wingate，可是及其不稳定。

2 怎么将某个端口映射给内网？

内网某台电脑提供了服务，怎么让外网的用户可以访问呢？某些对外的服务可能会在内网的多台电脑上面提供，这时就需要做端口映射来让这些服务器让外网可以访问。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="iptables" scheme="http://wdicc.com/tags/iptables/"/>
    
  </entry>
  
  <entry>
    <title>mysql 安装</title>
    <link href="http://wdicc.com/install-mysql/"/>
    <id>http://wdicc.com/install-mysql/</id>
    <published>2006-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[下面的内容大部分来自mysql的readme

1 download mysql5.0
2
shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db --user=mysql

如下提示信息:

Installing all prepared tables
Fill help tables

To start mysqld at boot time you have to copy support-files/mysql.server
to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:
./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h czhand password 'new-password'
See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &amp;

You can test the MySQL daemon with the benchmarks in the 'sql-bench' directory:
cd sql-bench ; perl run-all-tests

Please report any problems with the ./bin/mysqlbug script!

The latest information about MySQL is available on the web at
http://www.mysql.com
Support MySQL by buying support/licenses at https://order.mysql.com

shell&gt; chown -R root  .
shell&gt; chown -R mysql data
shell&gt; chgrp -R mysql .

/home/my.cnf

basedir=/usr/local/mysql
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/data/mysql.sock
#err-log=/var/log/mysqld.log
pid-file=/usr/local/mysql/data/mysqld.pid

shell&gt; bin/mysqld_safe --user=mysql &amp;
]]></content>
    
    <summary type="html">
    
      下面的内容大部分来自mysql的readme

1 download mysql5.0
2
shell&amp;gt; groupadd mysql
shell&amp;gt; useradd -g mysql mysql
shell&amp;gt; cd /usr/local
shell&amp;gt; gu
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="mysql" scheme="http://wdicc.com/tags/mysql/"/>
    
  </entry>
  
  <entry>
    <title>启动停止weblogic和apache的脚本</title>
    <link href="http://wdicc.com/stop-and-start-script-for-apache-and-weblogic/"/>
    <id>http://wdicc.com/stop-and-start-script-for-apache-and-weblogic/</id>
    <published>2006-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[apache和weblogic做桥接之后，启动的时候要先启动weblogic，后启动apache，停止的时候要先停止apache，后停止weblogic，这
]]></content>
    
    <summary type="html">
    
      apache和weblogic做桥接之后，启动的时候要先启动weblogic，后启动apache，停止的时候要先停止apache，后停止weblogic，这

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>find命令查找删除30天之前的文件</title>
    <link href="http://wdicc.com/del-30-day-old-file/"/>
    <id>http://wdicc.com/del-30-day-old-file/</id>
    <published>2006-05-08T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[find /data -name "xxx.*" -follow -ctime +30 -exec rm -rf {} \;

删除30天之前的文件。
-follow表示跟随链接。
]]></content>
    
    <summary type="html">
    
      find /data -name &quot;xxx.*&quot; -follow -ctime +30 -exec rm -rf {} \;

删除30天之前的文件。
-follow表示跟随链接。

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="find" scheme="http://wdicc.com/tags/find/"/>
    
  </entry>
  
  <entry>
    <title>178事故</title>
    <link href="http://wdicc.com/178-accident/"/>
    <id>http://wdicc.com/178-accident/</id>
    <published>2006-04-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[★ 由来

做服务器间相互备份的时候，到某两台服务器的时候，暂且称为A、B吧，发现他们之间不能互通，查看了ip，内网ip都是一个网段的，查看防火墙，端口也都是打开的，更加离奇的是，通过rsync从B访问A的时候，提示对方拒绝连接，同时在A上面用tcpdump监听相应端口，发现没有任何数据来往，而在A上面同时用tcpdump监听，却发现发出的请求对方都有回应。这个就太离奇了，到底是怎么回事呢？在A上面查看ip设置，注意到A有三个网卡，一个公网，两个内网ip，两个内网ip分别是10.x.x.0/24网段和192.168.0.0/24网段的，而B上面只有两块网卡，一个公网ip，一个内网ip，内网是192.168.0.0/24网段的，此时突然想起来A上面有snmpd监控，查看了一下，发现A的192.168.0.0/24 网段根本从来就没有任何流量，所以就断定肯定是网线插错了。打电话给机房也不太可能，就想着自己修改一下服务器的ip好了，反正是内网ip，即使修改出问题也不会出现连不上的情况，这样至少我远程还可以继续维护。这样，恶梦开始了。。。。

<br><a id="more"></a>★ 解决问题

修改ip是比较简单的，rh下面/etc/sysconfig/network-scripts下面几个文件修改了就好，虽然是修改内网ip，我还是对旧的配置文件做了备份，修改之后，重启了一下网络。

#service network restart

这里也有个小问题，不知道ssh怎么做到重启网络居然可以不掉线的。

重启网络之后，查看了一下ip，已经修改过来了，然后重新查看监控，发现192.168网段的网卡也有流量了，说明修改好了。再次尝试从B执行rsync从A同步数据，发现仍然连不上，A上的tcpdump仍然没有数据，B上面的仍然有回应，rsync的出错提示依然没变。这个问题太奇怪了，无意中发现在B上面监听的时候发现返回数据的主机名似乎不是A的，查看之后发现确实不是，再看同机房的服务器，发现有一台的内网ip和A的192网段的ip一样，B访问的其实是那台电脑的，那台没有开rsyc服务，所以连不上了。至此B访问A有回应的问题知道原因，那么就尝试修改一下A的192网段的ip看看。修改到另外一个ip之后，连接B，发现仍然连不上，从B也连不到A，都提示no route，可是查看route表，似乎没问题啊。到底怎么回事呢？此时突然想起来一个问题，他们不会不在一个机房吧。。。赶紧查看服务器托管信息，确定他们确实不在一起，所以访问不通是正常的。这样问题算找到原因了。

★ 新的问题

上面问题解决大概也没用多少时间，10多分钟的样子吧。正准备休息一下的时候，其他技术人员过来抱怨，说有客户反映A服务器连不上了。我看了一下我的监控，没发现问题。通过沟通之后才知道，客户访问的时候是通过内网ip来访问的，也就是10网段的ip（我的监控只能监控外网ip）。而我因为不知道情况不是刚刚修改了ip么，这也简单，改回去不就行了，况且我修改之前还做了备份呢，这里还庆幸了一下我自己想的周到。

覆盖回去，重启了一下网络，然后让他去测试一下。测试发现依然连不上，我开始觉得有点奇怪了，不是都改回去了么，想起来之前还修改过防火墙，就去恢复了防火墙设置，发现还是不行。用tcpdump监控发现似乎有10网段的ip过来访问，但是似乎没有反馈回去的数据，检查apache的日志发现没有相关的记录。而apache用公网ip访问没有任何问题。

此时就陷入了一个困境，因为我没有办法测试内网是不是还通了。其实这是我经验不足造成的，tcpdump既然能看到10网段过来的ip，那么就说明外面的内网ip连接我们这里是没问题的，那也就说明是我们服务器的问题，不会是网络的问题。

此后将防火墙清空也没有效果，tcpdump监控也一直是只有进来的，没有出去的。其实多次强调只有进来的没有出去的，我也在怀疑是不是服务器拒绝连接了？但是我手里只有这一台服务器，没有办法测试使用内网ip通过别的服务器是否能正常登陆，通过本地访问外网ip是一切正常的，可以看到apache中的日志。

这个时候老大在火车上了，有人已经打电话统治他出问题了。老大给我打电话建议我重启一下服务器。其实他这个建议没有任何意义，重启服务器也就是将重启一下网络，而我已经做过这个操作了。重启还要担一定的风险，如果起不来，还得去机房，那服务就不是停几个小时的问题了。不过没有办法中的办法，而我之前也重启一个测试服务器，没有遇到问题，所以就给服务器重启了，这样我也是争取一点时间，好想想到底哪里的问题。

此时各个小头都已经过来站在我后面了，我都能感觉手都有一点抖了。因为这台服务器是我们的主要业务之一，停几分钟就会损失不少钱，而到现在已经一个小时左右了。

重启没有遇到问题，连接上去之后就是启动服务器上面的一些服务，启动服务之后再次测试，发现问题依然，这也是意料之中的。

头脑发热中，发现来访问我们服务器的内网10网段的ip是10.0.0.0/8网段的，而我们服务器设置的是10.x.x.0/24，难道是这里的问题？修改了一下ip设置，重启了一下网络，然后用tcpdump查看，发现现在我们的服务器对10网段的ip访问有了回应了。一阵兴奋，让技术人员测试一下，发现他依然连不上。查看apache日志，似乎已经有10网段的访问记录了。那还是哪里的问题呢？

其实修改内网网段的时候就想到了，是不是路由的设置问题？这时老大提示了一下，看看之前管理服务器的技术人员留下的文档，我也突然想起来，我之前刚好对这台服务器的设置做过仔细检查，并做了备份，包括ifconfig信息，route信息，dns信息等，查看了一下，发现确实是路由表出问题了，新旧路由表不同。

★ 解决新的问题

发现问题所在就好了，接下来就是修改路由表。先修改内网ip的网段，改回10.x.x.0/24，然后修改10.0.0.0/8网段的ip的路由。修改的时候出现了对route命令不熟悉的问题，route add default gw添加了默认路由，发现不行，改来改去，手一抖，在只剩一条默认路由的情况下，执行了route del default gw命令，这样把服务器的网络给废掉了。。。

赶紧打电话联系深圳机房，花了十几二十分钟，最终联系到了机房的工作人员，可是新的问题又来了，我这里的信息没有机架位置，服务器编号等，只有ip又不能确定是哪台，还好工作人员比较好，根据我提供的服务器牌子等一些信息，找到了一台服务器。接上显示器之后，他说没有任何显示。然后说给重启了吧。其实这里他也要担一定的风险，如果这台不是我们的，他也得等着被别人投诉（不过他倒是可以有推脱的理由，可以说对方服务器莫名重启）。启动的过程很让人焦心，现在离已经过去快2个小时了，如果还不能尽快解决，恐怕我留在这个公司的时间也不多了，呵呵。

启动还算顺利，我能登陆服务器了。先启动各服务，测试发现依然连不上。然后我就查看路由，添加了255.0.0.0/8的默认路由，然后tcpdump查看，收发包正常，查看apache日志，记录也正常。让技术人员测试，也正常了。

至此，问题总算解决了。时间已经过去2个多小时了，才发现自己口干舌噪。

★ 总结一下

1) 各服务器配置情况比较混乱，一些特殊设置没有写明，这是导致服务器问题的一个原因。
2) 管理员应该及时对各服务器配置情况做备份，这样即使服务器挂了，也可以参考备份立刻恢复之前的情况。
3) 要相信系统。比如从B服务器rsync连接A服务器的时候，提示连接被拒绝。“被拒绝”说明B服务器的rsync和目的服务器进行了交流，对方不允许你连接，和连接没有响应等是有区别的。而从A服务器的tcpdump中也可以看到根本就没有对方过来的数据包，你也不要怀疑是不是被防火墙挡住了，防火墙挡住tcpdump也可以查看的。
4) 管理员应该对一些常用的命令的所有参数都比较熟悉。比如route，tcpdump，ls，tar，find等等，真正出问题的时候，你觉得还有时间让你去看man来查看某个命令是否能实现某个功能呢？你也不想当着一堆人的面现看吧。
5) 做某个操作前最好先确认一下会不会有问题，尤其是网络和防火墙相关的命令。因为要是设置出了问题，远程控制不了了，你哭都没地哭。但是工作总得做，不能因为怕出问题就不作吧，呵呵，我之前写了一篇如何给系统加防火墙的帖子，可以参考下里面的想法。
6) 压力肯定是有的，就看你怎么面对了，呵呵。平时多花些功夫，出问题了就不会手忙脚乱了。
]]></content>
    
    <summary type="html">
    
      ★ 由来

做服务器间相互备份的时候，到某两台服务器的时候，暂且称为A、B吧，发现他们之间不能互通，查看了ip，内网ip都是一个网段的，查看防火墙，端口也都是打开的，更加离奇的是，通过rsync从B访问A的时候，提示对方拒绝连接，同时在A上面用tcpdump监听相应端口，发现没有任何数据来往，而在A上面同时用tcpdump监听，却发现发出的请求对方都有回应。这个就太离奇了，到底是怎么回事呢？在A上面查看ip设置，注意到A有三个网卡，一个公网，两个内网ip，两个内网ip分别是10.x.x.0/24网段和192.168.0.0/24网段的，而B上面只有两块网卡，一个公网ip，一个内网ip，内网是192.168.0.0/24网段的，此时突然想起来A上面有snmpd监控，查看了一下，发现A的192.168.0.0/24 网段根本从来就没有任何流量，所以就断定肯定是网线插错了。打电话给机房也不太可能，就想着自己修改一下服务器的ip好了，反正是内网ip，即使修改出问题也不会出现连不上的情况，这样至少我远程还可以继续维护。这样，恶梦开始了。。。。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="route" scheme="http://wdicc.com/tags/route/"/>
    
      <category term="路由" scheme="http://wdicc.com/tags/%E8%B7%AF%E7%94%B1/"/>
    
  </entry>
  
  <entry>
    <title>使用ssh的rsa和dsa验证登陆linux</title>
    <link href="http://wdicc.com/use-rsa-and-dsa/"/>
    <id>http://wdicc.com/use-rsa-and-dsa/</id>
    <published>2006-04-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[参考地址：http://www.5ilinux.com/ssh01.html

按照文档中的方法，使用SecureCRT生成公匙密匙，然后上传公匙，没问题。

用putty使用这个密匙的时候就出问题了，验证不了。

然后用putty生成公匙密匙，上传公匙，验证不了。

后来用openssh自带的ssh-keygen生成了公匙密匙，然后用putty的keygen转换了一下，用putty登陆就可以了。
]]></content>
    
    <summary type="html">
    
      参考地址：http://www.5ilinux.com/ssh01.html

按照文档中的方法，使用SecureCRT生成公匙密匙，然后上传公匙，没问题。

用putty使用这个密匙的时候就出问题了，验证不了。

然后用putty生成公匙密匙，上传公匙，验证不了。

后来用op
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>限制ssh访问的ip</title>
    <link href="http://wdicc.com/limite-ssh-access-ip/"/>
    <id>http://wdicc.com/limite-ssh-access-ip/</id>
    <published>2006-04-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[★ 需求

最近公司服务器上面某个用户的帐号密码被修改了好几次。查看了一下，确实有人用他的帐号从外网ip（国外的ip）登陆过，猜想可能是他自己的电脑中木马或者什么病毒了。用户自己没有安全意识是很头痛的一个问题，其实给他们新建帐号的时候使用的都是简单密码，但是似乎都没有人上服务器自己修改，但是你又不能要求你的用户如何如何（比如给自己电脑装防火墙、杀毒软件etc），因为那是人家自己的事情。那么我就想，有没有一个方法可以限制某个用户只能从某个ip（或者ip列表）登陆呢？下面是一些解决方法。

<br><a id="more"></a>★ 解决方案

1) 通过修改/etc/ssh/sshd_config文件，让sshd只监听内网ip。这样只有内网ip才能登陆ssh。但是这样的话就不能远程维护服务器了，有点得不偿失得感觉。

2) 通过修改/etc/hosts.allow和/etc/hosts.deny来限制某个ip的登陆。这个方式其实和上面得类似，你也不知道hacker会从哪个ip登陆，所以你没办法deny他得ip，deny他得时候可能连你自己也deny了。

3) 可以通过/etc/ssh/sshd_config文件来实现。

 &nbsp; &nbsp; AllowUsers
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; This keyword can be followed by a list of user name patterns,
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; separated by spaces.&nbsp; If specified, login is allowed only for us-
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; er names that match one of the patterns.&nbsp; Only user names are
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; valid; a numerical user ID is not recognized.&nbsp; By default, login
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; is allowed for all users.&nbsp; If the pattern takes the form US-
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ER@HOST then USER and HOST are separately checked, restricting
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; logins to particular users from particular hosts.&nbsp; The allow/deny
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; directives are processed in the following order: DenyUsers,
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; AllowUsers, DenyGroups, and finally AllowGroups.

PATTERNS
 &nbsp; &nbsp; A pattern consists of zero or more non-whitespace characters, `*' (a
 &nbsp; &nbsp; wildcard that matches zero or more characters), or `?' (a wildcard that
 &nbsp; &nbsp; matches exactly one character).&nbsp; For example, to specify a set of decla-
 &nbsp; &nbsp; rations for any host in the ``.co.uk'' set of domains, the following pat-
 &nbsp; &nbsp; tern could be used:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Host *.co.uk

 &nbsp; &nbsp; The following pattern would match any host in the 192.168.0.[0-9] network
 &nbsp; &nbsp; range:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Host 192.168.0.?

 &nbsp; &nbsp; A pattern-list is a comma-separated list of patterns.&nbsp; Patterns within
 &nbsp; &nbsp; pattern-lists may be negated by preceding them with an exclamation mark
 &nbsp; &nbsp; (`!').&nbsp; For example, to allow a key to be used from anywhere within an
 &nbsp; &nbsp; organisation except from the ``dialup'' pool, the following entry (in au-
 &nbsp; &nbsp; thorized_keys) could be used:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; from="!*.dialup.example.com,*.example.com"

比如不允许test用户从192.168.0.x登陆，那么可以添加一行

denyusers test@192.168.0.

按照上面的PATTERNS说明，似乎可以加叹号来排除某个ip，但是尝试过没有成功，不知道什么原因了。

按照文档，deny是级别最高的，而设置了allow之后，就只能allow的用户访问了，所以如果想限制某个用户只能从某个ip段登陆，用这个似乎实现不了。

4) 使用ssh得RSA/DSA key。

参考地址:http://www.5ilinux.com/ssh01.html 

用ssh-keygen命令生成一对公匙密匙，然后把密匙给用户，并且限制ssh只能通过RSA方式认证。这样会导致所有ssh用户都得用这种方式登陆了，会更加郁闷。

这种方式可以在用户得authorized_keys2文件中，加入from="!192.168.1.158,*"来让用户只能通过158登陆。（这个没有做过验证）


PATTERNS
 &nbsp; &nbsp; A pattern consists of zero or more non-whitespace characters, `*' (a
 &nbsp; &nbsp; wildcard that matches zero or more characters), or `?' (a wildcard that
 &nbsp; &nbsp; matches exactly one character).&nbsp; For example, to specify a set of decla-
 &nbsp; &nbsp; rations for any host in the ``.co.uk'' set of domains, the following pat-
 &nbsp; &nbsp; tern could be used:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Host *.co.uk

 &nbsp; &nbsp; The following pattern would match any host in the 192.168.0.[0-9] network
 &nbsp; &nbsp; range:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Host 192.168.0.?

 &nbsp; &nbsp; A pattern-list is a comma-separated list of patterns.&nbsp; Patterns within
 &nbsp; &nbsp; pattern-lists may be negated by preceding them with an exclamation mark
 &nbsp; &nbsp; (`!').&nbsp; For example, to allow a key to be used from anywhere within an
 &nbsp; &nbsp; organisation except from the ``dialup'' pool, the following entry (in au-
 &nbsp; &nbsp; thorized_keys) could be used:

 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; from="!*.dialup.example.com,*.example.com"



5) 用pam。

参考地址:http://www.linuxmine.com/1078.html 

看看/etc/pam.d/login文件，有没有pam_access.so的设置。我的debian系统中，ssh相关的都在/etc/pam.d/ssh文件中设置。加入一行

account&nbsp; required &nbsp; &nbsp; &nbsp; pam_access.so

然后修改他的配置文件/etc/security/access.conf文件。加入一行

-:wd:192.168.1. EXCEPT 192.168.1.158

这样，wd用户从192.168.1.x（192.168.1.158除外）的登陆权限被去掉了。也就是说，wd这个用户就只能从158这个ip以及外网ip登陆了。

大功告成。 :)
]]></content>
    
    <summary type="html">
    
      ★ 需求

最近公司服务器上面某个用户的帐号密码被修改了好几次。查看了一下，确实有人用他的帐号从外网ip（国外的ip）登陆过，猜想可能是他自己的电脑中木马或者什么病毒了。用户自己没有安全意识是很头痛的一个问题，其实给他们新建帐号的时候使用的都是简单密码，但是似乎都没有人上服务器自己修改，但是你又不能要求你的用户如何如何（比如给自己电脑装防火墙、杀毒软件etc），因为那是人家自己的事情。那么我就想，有没有一个方法可以限制某个用户只能从某个ip（或者ip列表）登陆呢？下面是一些解决方法。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="ssh" scheme="http://wdicc.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title>为远程服务器设置防火墙</title>
    <link href="http://wdicc.com/iptables-on-remote-server/"/>
    <id>http://wdicc.com/iptables-on-remote-server/</id>
    <published>2006-04-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[如果服务器不在本地，又需要对防火墙做设置的时候，操作一定要注意，
]]></content>
    
    <summary type="html">
    
      如果服务器不在本地，又需要对防火墙做设置的时候，操作一定要注意，

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="iptables" scheme="http://wdicc.com/tags/iptables/"/>
    
  </entry>
  
  <entry>
    <title>VIM查找替换归纳总结zz</title>
    <link href="http://wdicc.com/search-in-vim/"/>
    <id>http://wdicc.com/search-in-vim/</id>
    <published>2006-04-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p><a href="http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry" target="_blank" rel="external">http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry</a>

VIM中常用的替换模式总结。</p><p>1，简单替换表达式</p><p>替换命令可以在全文中用一个单词替换另一个单词：</p><p>:%s/four/4/g</p><br><a id="more"></a><p>"%" 范围前缀表示在所有行中执行替换。最后的 "g" 标记表示替换行中的所有匹配点。如果仅仅对当前行进行操作，那么只要去掉%即可</p><p>&nbsp; 如果你有一个象 "thirtyfour" 这样的单词，上面的命令会出错。这种情况下，这个单词会被替换成"thirty4"。要解决这个问题，用 "\&lt;" 来指定匹配单词开头：</p><p>&nbsp; &nbsp; &nbsp;&nbsp; :%s/\&lt;four/4/g</p>
<p>显然，这样在处理 "fourty" 的时候还是会出错。用 "\&gt;" 来解决这个问题：</p><p>&nbsp; &nbsp; &nbsp;&nbsp; :%s/\&lt;four\&gt;/4/g</p>
<p>如果你在编码，你可能只想替换注释中的 "four"，而保留代码中的。由于这很难指定，可以在替换命令中加一个 "c" 标记，这样，Vim 会在每次替换前提示你：</p><p>&nbsp; &nbsp; &nbsp;&nbsp; :%s/\&lt;four\&gt;/4/gc</p>
<p>2，删除多余的空格</p><p>要删除这些每行后面多余的空格，可以执行如下命令：</p><p>&nbsp; &nbsp; &nbsp;&nbsp; :%s/\s\+$//</p>
<p>命令前面指明范围是 "%"，所以这会作用于整个文件。"substitute" 命令的匹配模式是</p><p>"\s\+$"。这表示行末（$）前的一个或者多个（\+）空格（\s）。替换命令的 "to" 部分是空的："//"。这样就会删除那些匹配的空白字符。</p>
<p>3，匹配重复性模式</p><p>星号项 "*" 规定在它前面的项可以重复任意次。因此:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /a*</p><p>匹配 "a"，"aa"，"aaa"，等等。但也匹配 "" (空字串)，因为零次也包含在内。星号 "*" 仅仅应用于那个紧邻在它前面的项。因此 "ab*" 匹配 "a"，"ab"，"abb","abbb"，等等。如要多次重复整个字符串，那么该字符串必须被组成一个项。组成一项的方法就是在它前面加 "\("，后面加 "\)"。因此这个命令:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /\(ab\)*</p>
<p>匹配: "ab"，"abab"，"ababab"，等等。而且也匹配 ""。</p>
<p>要避免匹配空字串，使用 "\+"。这表示前面一项可以被匹配一次或多次。</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /ab\+</p><p>匹配 "ab"，"abb"，"abbb"，等等。它不匹配 后面没有跟随 "b" 的 "a"。</p>
<p>要匹配一个可选项，用 "\="。 例如:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /folders\=</p><p>匹配 "folder" 和 "folders"。</p>
<p>4，指定重复次数</p><p>要匹配某一项的特定次数重复，使用 "\{n,m}" 这样的形式。其中 "n" 和 "m" 都是数字。在它前面的那个项将被重复 "n" 到 "m" 次 (|inclusive| 包含 "n" 和 "m")。例如:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /ab\{3,5}</p><p>匹配 "abbb"，"abbbb" 以及 "abbbbb"。</p><p>&nbsp; 当 "n" 省略时，被默认为零。当 "m" 省略时，被默认为无限大。当 ",m" 省略时，就表示重复正好 "n" 次。例如:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; 模式 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 匹配次数 </p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{,4} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0，1，2，3 或 4</p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{3,} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 3，4，5，等等</p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{0,1} &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 0 或 1，同 \=</p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{0,} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 0 或 更多，同 *</p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{1,} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; 1 或 更多，同 \+</p><p>&nbsp; &nbsp; &nbsp;&nbsp; \{3} &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; 3</p>
<p>5，多选一匹配</p><p>在一个查找模式中，"或" 运算符是 "\|"。例如:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /foo\|bar</p><p>这个命令匹配了 "foo" 或 "bar"。更多的抉择可以连在后面:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /one\|two\|three</p><p>匹配 "one"，"two" 或 "three"。</p>
<p>&nbsp; 如要匹配其多次重复，那么整个抉择结构须置于 "\(" 和 "\)" 之间:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /\(foo\|bar\)\+</p><p>这个命令匹配 "foo"，"foobar"，"foofoo"，"barfoobar"，等等。</p>
<p>&nbsp; 再举个例子:</p><p>&nbsp; &nbsp; &nbsp;&nbsp; /end\(if\|while\|for\)</p><p>这个命令匹配 "endif"，"endwhile" 和 "endfor"。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;a href=&quot;http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry&quot;&gt;http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry&lt;/a&gt;

VIM中常用的替换模式总结。&lt;/p&gt;&lt;p&gt;1，简单替换表达式&lt;/p&gt;&lt;p&gt;替换命令可以在全文中用一个单词替换另一个单词：&lt;/p&gt;&lt;p&gt;:%s/four/4/g&lt;/p&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="vim" scheme="http://wdicc.com/tags/vim/"/>
    
  </entry>
  
  <entry>
    <title>debian中man不能翻页的解决方法</title>
    <link href="http://wdicc.com/man-in-debian/"/>
    <id>http://wdicc.com/man-in-debian/</id>
    <published>2006-04-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[安装debian基本系统之后会发现man的时候往下翻页可以用ctrl＋F，可是怎么都翻不上去。包括方向键也都不起作用。

解决方法其实非常简单，只要安装less就可以了。呵呵。
#apt-get install less
]]></content>
    
    <summary type="html">
    
      安装debian基本系统之后会发现man的时候往下翻页可以用ctrl＋F，可是怎么都翻不上去。包括方向键也都不起作用。

解决方法其实非常简单，只要安装less就可以了。呵呵。
#apt-get install less

    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>添加删除路由</title>
    <link href="http://wdicc.com/manage-route/"/>
    <id>http://wdicc.com/manage-route/</id>
    <published>2006-04-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[#route add -net 192.168.0.0/24
#route add -host 192.168.0.23
#route del -net 192.168.0.0/24

#route add default gw 192.168.0.1
#route del default gw 192.168.0.1
]]></content>
    
    <summary type="html">
    
      #route add -net 192.168.0.0/24
#route add -host 192.168.0.23
#route del -net 192.168.0.0/24

#route add default gw 192.168.0.1
#route del de
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>debian下面的防火墙设置</title>
    <link href="http://wdicc.com/iptables-in-debian/"/>
    <id>http://wdicc.com/iptables-in-debian/</id>
    <published>2006-04-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>rh下面的防火墙设置是保存在/etc/sysconfig/iptables文件中的，这样每次重启都会恢复防火墙设置。

debian木有这个文件，但是他提供了更加灵活的方式。
<a href="http://www.debian.org/doc/manuals/securing-debian-howto/ch-sec-services.en.html#s-firewall-setup" target="_blank" rel="external">http://www.debian.org/doc/manuals/securing-debian-howto/ch-sec-services.en.html#s-firewall-setup</a>

看了下，似乎比较简单的就是设置interfaces文件了。

5.14.3.3 Configuring firewall rules through ifup
You can use also the network configuration in /etc/network/interfaces to setup your firewall rules. For this you will need to: </p><p>Create your firewalling ruleset for when the interface is active. 
Save your ruleset with iptables-save to a file in /etc, for example /etc/iptables.up.rules 
Configure etc/network/interfaces to use the configured ruleset: 
 &nbsp; &nbsp; iface eth0 inet static
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; address x.x.x.x
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [.. interface configuration ..]
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pre-up iptables-restore &lt; /etc/iptables.up.rules
You can optionally also setup a set of rules to be applied when the network interface is down creating a set of rules, saving it in /etc/iptables.down.rules and adding this directive to the interface configuration: </p><p> &nbsp; &nbsp; &nbsp; &nbsp; post-down iptables-restore &lt; /etc/iptables.down.rules
For more advanced firewall configuration scripts through ifupdown you can use the hooks available to each interface as in the *.d/ directories called with run-parts (see run-parts(8)). </p><p>可以去<a href="http://easyfwgen.morizot.net/gen/" target="_blank" rel="external">http://easyfwgen.morizot.net/gen/</a> 在线生成一个防火墙脚本，然后pre-up指定一下。</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;rh下面的防火墙设置是保存在/etc/sysconfig/iptables文件中的，这样每次重启都会恢复防火墙设置。

debian木有这个文件，但是他提供了更加灵活的方式。
&lt;a href=&quot;http://www.debian.org/doc/manuals/securi
    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>今天坐地铁遇到两起吵架</title>
    <link href="http://wdicc.com/affray-in-subway/"/>
    <id>http://wdicc.com/affray-in-subway/</id>
    <published>2006-04-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[地铁实在是恐怖，人挤人都要被挤死的时候，地铁广播还在说请大家不要拥挤，实在是有点搞笑了。

今天到了五颗松，上来两个人，突然就吵起来了，一个男的一个女的，都得有40多了吧。那个女的说那个男的不是男人，那个男的说我不是又怎么了，那个女的似乎很郁闷，呵呵。起因好像是上车的时候，两个人相互推挤了一下。

到了复兴门，我上车后看见过来一堆人，推推搡搡的，那个年纪大点的一直要扑着过去打那个年纪轻的，有个女的一直拉着，呵呵。

以前地铁可能也就上下班时间人多，现在的地铁是啥时候人都多，没有办法，这是最快捷的交通方式了。不知道新的地铁线开通之后能不能缓解一下，不过可能也难，像一些换其他线比较方便的线路，肯定人会更多。

bless北京的交通。。。
]]></content>
    
    <summary type="html">
    
      地铁实在是恐怖，人挤人都要被挤死的时候，地铁广播还在说请大家不要拥挤，实在是有点搞笑了。

今天到了五颗松，上来两个人，突然就吵起来了，一个男的一个女的，都得有40多了吧。那个女的说那个男的不是男人，那个男的说我不是又怎么了，那个女的似乎很郁闷，呵呵。起因好像是上车的时候，两个人
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>nagios，监控多组服务器的利器</title>
    <link href="http://wdicc.com/about-nagios/"/>
    <id>http://wdicc.com/about-nagios/</id>
    <published>2006-04-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[面试的时候被有时会被问道的问题就是，如果让你去管理100台服务器，你打算怎么做？

老实说偶只弄过1台服务器，没事上去看看，还是可以的，100台，一台看一眼那就是多长时间啊。1台的时候可以用logwatch每天生成一份日志，每天看一眼日志。或者每天看看awstatus分析后的web日志。可是100台的时候基本不适用了，每天早上看100封mail会疯掉的，况且这个还不实时。。。

听xh介绍之后，看了一下nagios，才知道有人早就想到这些问题了。其实我之前遇到第一个人问我的时候就应该去了解一下的。

nagios是通过nagios进程管理下，定时运行某些检测程序，然后通过web方式来显示检测结果的，比如说ping、pop3、smtp、http，还有switch、router等等，甚至本机登陆用户、运行进程、磁盘空间等，还可以设置服务器的主从关系，比如哪个http服务器是位于某个router下面等，这样提示的时候会一并告诉你（这个还没有测试，不过是看到配置文件有这项设置）。

nagios的安装和配置 <a href="http://www.totkat.org/pages/nagios.shtml" target="_blank" rel="external">http://www.totkat.org/pages/nagios.shtml</a>

类似nagios的还有cacti，这个似乎是用来检测本机的，本机的磁盘空间、流量、负载等，还没有弄太清楚。

Splunk是个商业的日志分析软件，运行于Unix环境，可以支持任何服务器产生的日志，并对日志进行高效索引，以便管理员可以对日志中的各种情况进行搜索，并可以通过图形化方式表现，虽然是商业软件，但是它提供了可以自由使用的splunk server，只是如果需要更多的LiveSplunks，Splunk Sync等功能才需要购买授权。

下面这个地址是Nagios和Splunk的联合使用介绍<p> <a href="http://www.nagios.org/products/enterprisesolutions/splunk/" target="_blank" class="liexternal">http://www.nagios.org/products/enterprisesolutions/splunk/</a></p>
]]></content>
    
    <summary type="html">
    
      面试的时候被有时会被问道的问题就是，如果让你去管理100台服务器，你打算怎么做？

老实说偶只弄过1台服务器，没事上去看看，还是可以的，100台，一台看一眼那就是多长时间啊。1台的时候可以用logwatch每天生成一份日志，每天看一眼日志。或者每天看看awstatus分析后的we
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>邮件如何从A点到达B点zz</title>
    <link href="http://wdicc.com/how-mail-from-a-to-b/"/>
    <id>http://wdicc.com/how-mail-from-a-to-b/</id>
    <published>2006-03-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<p>当一个主机上的用户想要发送一个邮件给另一个主机上的用户时, 许多事情发生了, 这个场景后面的东西很多是不必要知道的那么确切的. </p>  <p>假设一个用户 Alice, alice@alpha.example.com 想要发送一个邮件给 Bob, bob@beta.example.com,     下面是发送接收过程: </p>  <p>1. Alice 用她的邮件用户代理(MUA)编写邮件, 比如使用 mutt 或者 pine. 她在 To 这一栏指定接收者, Subject 这一栏填写邮件主题,     加上邮件本身的文本部分. 整个邮件看起来是下面这样的: </p><pre>    To: bob@beta
    Subject: lunch

    How about pizza?
</pre>  <p>2. 当她觉得这封邮件已经满意之后, 她指派 MUA 发送邮件. </p>  <p>3. 这时候, MUA 会加上附加的邮件头部分, 比如日期 Date 和邮件ID(Message-Id) 并且修改Alice输入的值(例如, 将 bob@beta     替换为"Bob &lt;bob@beta.example.com&gt;") 下一步, MUA 将邮件注入邮件系统. 有两种方式进行注入:     MUA 运行一个由邮件系统提供的为注入邮件为目的的程序; 或者使用SMTP协议和本地或者远程邮件服务器建立连接, 举个例子, 我们假定 MUA 使用本地注入程序将邮件传送给     MTA, 对于不同的MTA, 注入细节都是不同的, 不过对于UNIX系统, 使用sendmail 程序注入已经成了事实上的标准. 使用这种方式, MUA     可以将邮件头和邮件主体放置在一个文件内, 由空行分隔, 然后传递这个文件到 sendmail 程序. </p>  <p>4. 如果注入成功--邮件句法正确, 并且 sendmail 调用适当--那么现在邮件已经在 MTA 的职责内了. 不同的 MTA 细节是完全不同的,     通常MTA首先检查邮件头决定邮件将发往何处. 然后建立一个到主机beta的SMTP连接, 转发邮件给 beta 系统上的MTA. SMTP对话要求邮件被分成两部分发送:     信封, 这个部分确定了接收者的地址(bob@beta.example.com)和返回地址(alice@alpha.example.com), 以及邮件本身,     包括邮件头和邮件主体. </p>  <p>5. 如果beta主机的MTA拒绝这个邮件, 可能原因是在beta系统上没有这个bob用户, 在alpha 上的MTA发送一个反弹邮件给返回地址, 也就是     alice@alpha, 通知她邮件发送出现了问题. </p>  <p>6. 如果 beta主机上的 MTA接收了邮件, 它查看接收者地址, 决定是发送给本地local 还是远程 remote系统的邮件. 这个例子里面,     接收者是本地用户, 然后MTA或者传送邮件给 mail delivery agent (MDA), 比如 /bin/mail或者传送给 procmail.   </p>  <p>7. 如果传输失败了, 可能是Bob的邮箱超过了使用限额, beta 主机上的 MTA 将发送一个反弹信息给信封上的返回地址, 即 alice@alpha.   </p>  <p>8. 如果传输成功, 邮件将在Bob的邮箱中等待, 直到他使用MUA来阅读和显示邮件. </p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;当一个主机上的用户想要发送一个邮件给另一个主机上的用户时, 许多事情发生了, 这个场景后面的东西很多是不必要知道的那么确切的. &lt;/p&gt;  &lt;p&gt;假设一个用户 Alice, alice@alpha.example.com 想要发送一个邮件给 Bob, bob@beta.ex
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>Qmail邮件队列工作原理zz</title>
    <link href="http://wdicc.com/qmail-queue/"/>
    <id>http://wdicc.com/qmail-queue/</id>
    <published>2006-03-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.gbunix.com/htmldata/2005_06/15/25/article_1223_1.html

以下是qmail的数据流简图

 qmail-smtpd --- &gt;&gt;qmail-queue ---&gt;&gt; qmail-send &lt;&lt;--- qmail-rspawn &lt;&lt;--- qmail-remote
 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | 
 &nbsp; &nbsp; &nbsp; qmail-inject _/ qmail-clean \_ qmail-lspawn &lt;&lt;--- qmail-local

 &nbsp; &nbsp;qmail中，每一条消息都发送到中央队列等待发送，由qmail-queue进程控制。它在以下情况被调用：
 &nbsp; &nbsp;1、当产生本地消息时，qmail-inject进程调用qmail-queue。
 &nbsp; &nbsp;2、qmail-smtpd准备SMTP协议下的投递邮件任务时调用它。
 &nbsp; &nbsp;3、向前（forwarded）发送邮件时，qmail－local调用它。
 &nbsp; &nbsp;4、退回邮件时，qmail－send调用它。

 &nbsp; &nbsp;每封邮件接着由qmail-lspawn 和qmail-rspawn协助qmail－sned进程完成投递，最后由qmail－clean清除邮件队列。这四个进程是系统由始至终都在运行的，十分重要。

由smtpd从域外接受邮件之后，会交给queue处理（也就是2），之后转到qmal-send，然后看是域内还是域外，域内用qmail-lspawn，域外用qmail-rspawn。域内邮件调用qmail-local处理，如果遇到.qmail文件转发邮件（也就是上面的3），还会交给queue处理，如果没有，就直接投递给用户（？）。域外邮件调用qmail-remote处理，如果对方拒收邮件，他就会产生一个新的邮件（bounce），交给qmail-send，然后交给queue（也就是4？）。

本地用户发送mail的时候调用qmail-inject，然后交给queue（也就是1）。

有几个问题。
1&nbsp; 收到域外邮件之后，判断本机是否有这个用户后才接受邮件呢，还是先接受进来放到queue里等qmail-local处理的时候再说？

2&nbsp; qmail-clean这个程序是怎么工作的？实时扫描queue的文件夹？
]]></content>
    
    <summary type="html">
    
      http://www.gbunix.com/htmldata/2005_06/15/25/article_1223_1.html

以下是qmail的数据流简图

 qmail-smtpd --- &amp;gt;&amp;gt;qmail-queue ---&amp;gt;&amp;gt; qmail-sen
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>TCP三次握手及原理 zz</title>
    <link href="http://wdicc.com/about-tcp-ip/"/>
    <id>http://wdicc.com/about-tcp-ip/</id>
    <published>2006-03-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<span class="unnamed3">TCP/IP是很多的不同的协议组成，实际上是一个协议组，TCP用户数据报表协议(也称作TCP传输控制协议，Transport ControlProtocol。可靠的主机到主机层协议。这里要先强调一下，传输控制协议是OSI网络的第四层的叫法，TCP传输控制协议是TCP/IP传输的6个基本协议的一种。两个TCP意思非相同。)。TCP是一种可靠的面向连接的传送服务。它在传送数据时是分段进行的，主机交换数据必须建立一个会话。它用比特流通信，即数据被作为无结构的字节流。通过每个TCP传输的字段指定顺序号，以获得可靠性。是在OSI参考模型中的第四层，TCP是使用IP的网间互联功能而提供可靠的数据传输，IP不停的把报文放到网络上，而TCP是负责确信报文到达。在协同IP的操作中TCP负责：握手过程、报文管理、流量控制、错误检测和处理（控制），可以根据一定的编号顺序对非正常顺序的报文给予从新排列顺序。关于TCP的RFC文档有RFC793、RFC791、RFC1700。
<p>　　在TCP会话初期，有所谓的“三握手”：对每次发送的数据量是怎样跟踪进行协商使数据段的发送和接收同步，根据所接收到的数据量而确定的数据确认数及数据发送、接收完毕后何时撤消联系，并建立虚连接。为了提供可靠的传送，TCP在发送新的数据之前，以特定的顺序将数据包的序号，并需要这些包传送给目标机之后的确认消息。TCP总是用来发送大批量的数据。当应用程序在收到数据后要做出确认时也要用到TCP。由于TCP需要时刻跟踪，这需要额外开销，使得TCP的格式有些显得复杂。下面就让我们看一个TCP的经典案例，这是后来被称为MITNICK攻击中KEVIN开创了两种攻击技术： </p><p>　　TCP会话劫持 
　　SYN FLOOD（同步洪流） </p>
<br><a id="more"></a><p>　　在这里我们讨论的时TCP会话劫持的问题。 </p><p>　　先让我们明白TCP建立连接的基本简单的过程。为了建设一个小型的模仿环境我们假设有3台接入互联网的机器。A为攻击者操纵的攻击机。B为中介跳板机器（受信任的服务器）。C为受害者使用的机器（多是服务器），这里把C机器锁定为目标机器。A机器向B机器发送SYN包，请求建立连接，这时已经响应请求的B机器会向A机器回应SYN/ACK表明同意建立连接，当A机器接受到B机器发送的SYN/ACK回应时，发送应答ACK建立A机器与B机器的网络连接。这样一个两台机器之间的TCP通话信道就建立成功了。 </p><p>　　B终端受信任的服务器向C机器发起TCP连接，A机器对服务器发起SYN信息，使C机器不能响应B机器。在同时A机器也向B机器发送虚假的C机器回应的SYN数据包，接收到SYN数据包的B机器（被C机器信任）开始发送应答连接建立的SYN/ACK数据包，这时C机器正在忙于响应以前发送的SYN数据而无暇回应B机器，而A机器的攻击者预测出B机器包的序列号（现在的TCP序列号预测难度有所加大）假冒C机器向B机器发送应答ACK这时攻击者骗取B机器的信任，假冒C机器与B机器建立起TCP协议的对话连接。这个时候的C机器还是在响应攻击者A机器发送的SYN数据。 </p><p>　　TCP协议栈的弱点：TCP连接的资源消耗，其中包括：数据包信息、条件状态、序列号等。通过故意不完成建立连接所需要的三次握手过程，造成连接一方的资源耗尽。 </p><p>　　通过攻击者有意的不完成建立连接所需要的三次握手的全过程，从而造成了C机器的资源耗尽。序列号的可预测性，目标主机应答连接请求时返回的SYN/ACK的序列号时可预测的。（早期TCP协议栈，具体的可以参见1981年出的关于TCP雏形的RFC793文档） </p><p>　　TCP头结构 </p><p>　　TCP协议头最少20个字节，包括以下的区域（由于翻译不禁相同，文章中给出相应的英文单词）： </p><p>　　<strong>TCP源端口(Source Port)</strong>：16位的源端口其中包含初始化通信的端口。源端口和源IP地址的作用是标示报问的返回地址。 </p><p>　　<strong>TCP目的端口(Destination port)</strong>：16位的目的端口域定义传输的目的。这个端口指明报文接收计算机上的应用程序地址接口。 </p><p>　　<strong>TCP序列号（序列码,Sequence Number）</strong>：32位的序列号由接收端计算机使用，重新分段的报文成最初形式。当SYN出现，序列码实际上是初始序列码（ISN），而第一个数据字节是ISN+1。这个序列号（序列码）是可以补偿传输中的 不一致。 </p><p>　　<strong>TCP应答号(Acknowledgment Number)</strong>：32位的序列号由接收端计算机使用，重组分段的报文成最初形式。，如果设置了ACK控制位，这个值表示一个准备接收的包的序列码。 </p><p>　　<strong>数据偏移量(HLEN)</strong>：4位包括TCP头大小，指示何处数据开始。 </p><p>　　<strong>保留(Reserved)</strong>：6位值域，这些位必须是0。为了将来定义新的用途所保留。 </p><p>　　<strong>标志(Code Bits)</strong>：6位标志域。表示为：紧急标志、有意义的应答标志、推、重置连接标志、同步序列号标志、完成发送数据标志。按照顺序排列是：URG、ACK、PSH、RST、SYN、FIN。 </p><p>　　<strong>窗口(Window)</strong>：16位，用来表示想收到的每个TCP数据段的大小。 </p><p>　　<strong>校验位(Checksum)</strong>：16位TCP头。源机器基于数据内容计算一个数值，收信息机要与源机器数值 结果完全一样，从而证明数据的有效性。 </p><p>　　<strong>优先指针（紧急,Urgent Pointer）</strong>：16位，指向后面是优先数据的字节，在URG标志设置了时才有效。如果URG标志没有被设置，紧急域作为填充。加快处理标示为紧急的数据段。 </p><p>　　<strong>选项(Option)</strong>：长度不定，但长度必须以字节。如果 没有 选项就表示这个一字节的域等于0。 </p><p>　　<strong>填充</strong>：不定长，填充的内容必须为0，它是为了数学目的而存在。目的是确保空间的可预测性。保证包头的结合和数据的开始处偏移量能够被32整除，一般额外的零以保证TCP头是32位的整数倍。 标志控制功能 </p><p>　<strong>　URG</strong>：紧急标志 

　　紧急(The urgent pointer) 标志有效。紧急标志置位， </p><p>　　<strong>ACK</strong>：确认标志 

　　确认编号(Acknowledgement Number)栏有效。大多数情况下该标志位是置位的。TCP报头内的确认编号栏内包含的确认编号(w+1，Figure：1)为下一个预期的序列编号，同时提示远端系统已经成功接收所有数据。 </p><p>　　<strong>PSH</strong>：推标志 </p><p>　　该标志置位时，接收端不将该数据进行队列处理，而是尽可能快将数据转由应用处理。在处理 telnet 或 rlogin 等交互模式的连接时，该标志总是置位的。 </p><p>　　<strong>RST</strong>：复位标志 </p><p>　　复位标志有效。用于复位相应的TCP连接。 </p><p>　　<strong>SYN</strong>：同步标志 </p><p>　　同步序列编号(Synchronize SequenceNumbers)栏有效。该标志仅在三次握手建立TCP连接时有效。它提示TCP连接的服务端检查序列编号，该序列编号为TCP连接初始端(一般是客户端)的初始序列编号。在这里，可以把TCP序列编号看作是一个范围从0到4，294，967，295的32位计数器。通过TCP连接交换的数据中每一个字节都经过序列编号。在TCP报头中的序列编号栏包括了TCP分段中第一个字节的序列编号。 </p><p>　　<strong>FIN</strong>：结束标志 </p><p>　　带有该标志置位的数据包用来结束一个TCP回话，但对应端口仍处于开放状态，准备接收后续数据。 </p><p>　　服务端处于监听状态，客户端用于建立连接请求的数据包(IP packet)按照TCP/IP协议堆栈组合成为TCP处理的分段(segment)。 </p><p>　　<strong>分析报头信息</strong>： TCP层接收到相应的TCP和IP报头，将这些信息存储到内存中。 </p><p>　　<strong>检查TCP校验和(checksum)</strong>：标准的校验和位于分段之中(Figure：2)。如果检验失败，不返回确认，该分段丢弃，并等待客户端进行重传。 </p><p>　　<strong>查找协议控制块(PCB{})</strong>：TCP查找与该连接相关联的协议控制块。如果没有找到，TCP将该分段丢弃并返回RST。(这就是TCP处理没有端口监听情况下的机制)如果该协议控制块存在，但状态为关闭，服务端不调用connect()或listen()。该分段丢弃，但不返回RST。客户端会尝试重新建立连接请求。</p><p>　　<strong>建立新的socket</strong>：当处于监听状态的socket收到该分段时，会建立一个子socket，同时还有socket{}，tcpcb{}和pub{}建立。这时如果有错误发生，会通过标志位来拆除相应的socket和释放内存，TCP连接失败。如果缓存队列处于填满状态，TCP认为有错误发生，所有的后续连接请求会被拒绝。这里可以看出SYN Flood攻击是如何起作用的。 </p><p>　　<strong>丢弃</strong>：如果该分段中的标志为RST或ACK，或者没有SYN标志，则该分段丢弃。并释放相应的内存。 </p><p>　　发送序列变量 </p><p>　　SND.UNA ： 发送未确认 </p><p>　　SND.NXT ： 发送下一个 </p><p>　　SND.WND ： 发送窗口 </p><p>　　SND.UP ： 发送优先指针 </p><p>　　SND.WL1 ： 用于最后窗口更新的段序列号 </p><p>　　SND.WL2 ： 用于最后窗口更新的段确认号 </p><p>　　ISS ： 初始发送序列号 </p><p>　　接收序列号 </p><p>　　RCV.NXT ： 接收下一个 </p><p>　　RCV.WND ： 接收下一个 </p><p>　　RCV.UP ： 接收优先指针 </p><p>　　IRS ： 初始接收序列号 </p><p>当前段变量 </p><p>　　SEG.SEQ ： 段序列号 </p><p>　　SEG.ACK ： 段确认标记 </p><p>　　SEG.LEN ： 段长 </p><p>　　SEG.WND ： 段窗口 </p><p>　　SEG.UP ： 段紧急指针 </p><p>　　SEG.PRC ： 段优先级 </p><p>　　CLOSED表示没有连接，各个状态的意义如下： </p><p>　　LISTEN ： 监听来自远方TCP端口的连接请求。 </p><p>　　SYN-SENT ： 在发送连接请求后等待匹配的连接请求。 </p><p>　　SYN-RECEIVED ： 在收到和发送一个连接请求后等待对连接请求的确认。 </p><p>　　ESTABLISHED ： 代表一个打开的连接，数据可以传送给用户。 </p><p>　　FIN-WAIT-1 ： 等待远程TCP的连接中断请求，或先前的连接中断请求的确认。 </p><p>　　FIN-WAIT-2 ： 从远程TCP等待连接中断请求。 </p><p>　　CLOSE-WAIT ： 等待从本地用户发来的连接中断请求。 </p><p>　　CLOSING ： 等待远程TCP对连接中断的确认。 </p><p>　　LAST-ACK ： 等待原来发向远程TCP的连接中断请求的确认。 </p><p>　　TIME-WAIT ： 等待足够的时间以确保远程TCP接收到连接中断请求的确认。 </p><p>　　CLOSED ： 没有任何连接状态。 </p><p>　　TCP连接过程是状态的转换，促使发生状态转换的是用户调用：OPEN，SEND，RECEIVE，CLOSE，ABORT和STATUS。传送过来的数据段，特别那些包括以下标记的数据段SYN，ACK，RST和FIN。还有超时，上面所说的都会时TCP状态发生变化。 </p><p>　　序列号 </p><p>　　请注意，我们在TCP连接中发送的字节都有一个序列号。因为编了号，所以可以确认它们的收到。对序列号的确认是累积性的。TCP必须进行的序列号比较操作种类包括以下几种： </p><p>　　①决定一些发送了的但未确认的序列号。 </p><p>　　②决定所有的序列号都已经收到了。 </p><p>　　③决定下一个段中应该包括的序列号。 </p><p>　　对于发送的数据TCP要接收确认，确认时必须进行的： </p><p>　　SND.UNA = 最老的确认了的序列号。 </p><p>　　SND.NXT = 下一个要发送的序列号。 </p><p>　　SEG.ACK = 接收TCP的确认，接收TCP期待的下一个序列号。 </p><p>　　SEG.SEQ = 一个数据段的第一个序列号。 </p><p>　　SEG.LEN = 数据段中包括的字节数。 </p><p>　　SEG.SEQ+SEG.LEN-1 = 数据段的最后一个序列号。 </p><p>　　如果一个数据段的序列号小于等于确认号的值，那么整个数据段就被确认了。而在接收数据时下面的比较操作是必须的： </p><p>　　RCV.NXT = 期待的序列号和接收窗口的最低沿。 </p><p>　　RCV.NXT+RCV.WND：1 = 最后一个序列号和接收窗口的最高沿。 </p><p>　　SEG.SEQ = 接收到的第一个序列号。 </p><p>　　SEG.SEQ+SEG.LEN：1 = 接收到的最后一个序列号.</p></span>
]]></content>
    
    <summary type="html">
    
      &lt;span class=&quot;unnamed3&quot;&gt;TCP/IP是很多的不同的协议组成，实际上是一个协议组，TCP用户数据报表协议(也称作TCP传输控制协议，Transport ControlProtocol。可靠的主机到主机层协议。这里要先强调一下，传输控制协议是OSI网络的第四层的叫法，TCP传输控制协议是TCP/IP传输的6个基本协议的一种。两个TCP意思非相同。)。TCP是一种可靠的面向连接的传送服务。它在传送数据时是分段进行的，主机交换数据必须建立一个会话。它用比特流通信，即数据被作为无结构的字节流。通过每个TCP传输的字段指定顺序号，以获得可靠性。是在OSI参考模型中的第四层，TCP是使用IP的网间互联功能而提供可靠的数据传输，IP不停的把报文放到网络上，而TCP是负责确信报文到达。在协同IP的操作中TCP负责：握手过程、报文管理、流量控制、错误检测和处理（控制），可以根据一定的编号顺序对非正常顺序的报文给予从新排列顺序。关于TCP的RFC文档有RFC793、RFC791、RFC1700。
&lt;p&gt;　　在TCP会话初期，有所谓的“三握手”：对每次发送的数据量是怎样跟踪进行协商使数据段的发送和接收同步，根据所接收到的数据量而确定的数据确认数及数据发送、接收完毕后何时撤消联系，并建立虚连接。为了提供可靠的传送，TCP在发送新的数据之前，以特定的顺序将数据包的序号，并需要这些包传送给目标机之后的确认消息。TCP总是用来发送大批量的数据。当应用程序在收到数据后要做出确认时也要用到TCP。由于TCP需要时刻跟踪，这需要额外开销，使得TCP的格式有些显得复杂。下面就让我们看一个TCP的经典案例，这是后来被称为MITNICK攻击中KEVIN开创了两种攻击技术： &lt;/p&gt;&lt;p&gt;　　TCP会话劫持 
　　SYN FLOOD（同步洪流） &lt;/p&gt;
&lt;br&gt;
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>AWK：Linux 管理员的智能工具包zz</title>
    <link href="http://wdicc.com/about-awk/"/>
    <id>http://wdicc.com/about-awk/</id>
    <published>2006-03-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[引用地址：http://www.oracle.com/technology/global/cn/pub/articles/dulaney_awk.html
还可以参考：http://www.example.net.cn/archives/2005/01/awknieec.html

<p><span class="boldbodycopy">您正在学习 Linux 吗？本文对于非常有用的 AWK 文本操作工具进行了介绍，非常有价值。</span></p><p>&lt;!--use&gt; <span class="bodycopy">AWK实用工具带有其自己的自包含语言，它不仅是 Linux中也是任何环境中现有的功能最强大的数据处理引擎之一。这种编程及数据操作语言（其名称得自于它的创始人 Alfred Aho、PeterWeinberger 和 Brian Kernighan姓氏的首个字母）的最大功能取决于一个人所拥有的知识。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能。</span></p><p><span class="parahead1"><br><a id="more"></a><p><span class="parahead1">AWK 是什么？</span></p><p><span class="bodycopy">最简单地说，AWK 是一种用于处理文本的编程语言工具。AWK 实用工具的语言在很多方面类似于shell 编程语言，尽管 AWK 具有完全属于其本身的语法。在最初创造 AWK时，其目的是用于文本处理，并且这种语言的基础是，只要在输入数据中有模式匹配，就执行一系列指令。该实用工具扫描文件中的每一行，查找与命令行中所给定内容相匹配的模式。如果发现匹配内容，则进行下一个编程步骤。如果找不到匹配内容，则继续处理下一行。</span></p><p><span class="bodycopy">尽管操作可能会很复杂，但命令的语法始终是：</span></p><pre>awk '{pattern + action}' {filenames} 
</pre><p><span class="bodycopy">其中 </span><tt>pattern</tt><span class="bodycopy"> 表示 AWK 在数据中查找的内容，而 action 是在找到匹配内容时所执行的一系列命令。花括号 ({}) 不需要在程序中始终出现，但它们用于根据特定的模式对一系列指令进行分组。</span></p><p> <span class="parahead1">了解字段</span></p><p><span class="bodycopy">实用工具将每个输入行分为记录和字段。</span><span class="italicbodycopy">记录</span><span class="bodycopy">是单行的输入，而每条记录包含若干字段。默认的字段分隔符是空格或制表符，而记录的分隔符是换行。虽然在默认情况下将制表符和空格都看作字段分隔符（多个空格仍然作为一个分隔符），但是可以将分隔符从空格改为任何其它字符。</span></p><p><span class="bodycopy">为了进行演示，请查看以下保存为 emp_names 的员工列表文件：</span></p><pre>46012   DULANEY     EVAN        MOBILE   AL
46013   DURHAM      JEFF        MOBILE   AL
46015   STEEN       BILL        MOBILE   AL
46017   FELDMAN     EVAN        MOBILE   AL
46018   SWIM        STEVE       UNKNOWN  AL
46019   BOGUE       ROBERT      PHOENIX  AZ
46021   JUNE        MICAH       PHOENIX  AZ
46022   KANE        SHERYL      UNKNOWN  AR
46024   WOOD        WILLIAM     MUNCIE   IN
46026   FERGUS      SARAH       MUNCIE   IN
46027   BUCK        SARAH       MUNCIE   IN
46029   TUTTLE      BOB         MUNCIE   IN
</pre><p><span class="bodycopy">当 AWK 读取输入内容时，整条记录被分配给变量 </span><tt>$0</tt><span class="bodycopy">。每个字段以字段分隔符分开，被分配给变量 </span><tt>$1、$2、$3</tt><span class="bodycopy"> 等等。一行在本质上可以包含无数个字段，通过字段号来访问每个字段。因此，命令</span></p><pre>awk '{print $1,$2,$3,$4,$5}' names
</pre><p><span class="bodycopy">将会产生的打印输出是</span></p><pre>46012 DULANEY EVAN MOBILE AL
46013 DURHAM JEFF MOBILE AL
46015 STEEN BILL MOBILE AL
46017 FELDMAN EVAN MOBILE AL
46018 SWIM STEVE UNKNOWN AL
46019 BOGUE ROBERT PHOENIX AZ
46021 JUNE MICAH PHOENIX AZ
46022 KANE SHERYL UNKNOWN AR
46024 WOOD WILLIAM MUNCIE IN
46026 FERGUS SARAH MUNCIE IN
46027 BUCK SARAH MUNCIE IN
46029 TUTTLE BOB MUNCIE IN
</pre><p><span class="bodycopy">值得注意的一项重要内容是，AWK 解释由空格分隔的五个字段，但当它打印显示内容时，在每个字段间只有一个空格。利用为每个字段指定了唯一号码的功能，您可以选择只打印特定的字段。例如，只打印每条记录的姓名时，只需选择第二个和第三个字段进行打印：</span></p><pre>$ awk '{print $2,$3}' emp_names
DULANEY EVAN
DURHAM JEFF
STEEN BILL
FELDMAN EVAN
SWIM STEVE
BOGUE ROBERT
JUNE MICAH
KANE SHERYL
WOOD WILLIAM
FERGUS SARAH
BUCK SARAH
TUTTLE BOB
$
</pre><p><span class="bodycopy">您还可以指定按任何顺序打印字段，而无论它们在记录中是如何存在的。因此，只需要显示姓名字段，并且使其顺序颠倒，先显示名字再显示姓氏：</span></p><pre>$ awk '{print $3,$2}' emp_names
EVAN DULANEY
JEFF DURHAM
BILL STEEN
EVAN FELDMAN
STEVE SWIM
ROBERT BOGUE
MICAH JUNE
SHERYL KANE
WILLIAM WOOD
SARAH FERGUS
SARAH BUCK
BOB TUTTLE
$
</pre><p><span class="parahead1">使用模式</span></p><p><span class="bodycopy">通过包含一个必须匹配的模式，您可以选择只对特定的记录而不是所有的记录进行操作。模式匹配的最简单形式是搜索，其中要匹配的项目被包含在斜线 (</span><tt>/pattern/</tt><span class="bodycopy">) 中。例如，只对那些居住在阿拉巴马州的员工执行前面的操作：</span></p><pre>$ awk '/AL/ {print $3,$2}' emp_names
EVAN DULANEY
JEFF DURHAM
BILL STEEN
EVAN FELDMAN
STEVE SWIM
$
</pre><p><span class="bodycopy">如果您不指定要打印的字段，则会打印整个匹配的条目：</span></p><pre>$ awk '/AL/' emp_names
46012   DULANEY     EVAN     MOBILE     AL
46013   DURHAM      JEFF     MOBILE     AL
46015   STEEN       BILL     MOBILE     AL
46017   FELDMAN     EVAN     MOBILE     AL
46018   SWIM        STEVE    UNKNOWN    AL
$
</pre><p><span class="bodycopy">对同一数据集的多个命令可以用分号 (</span><tt>;</tt><span class="bodycopy">) 分隔开。例如，在一行中打印姓名，而在另一行中打印城市和州名：</span></p><pre>$ awk '/AL/ {print $3,$2 ; print $4,$5}' emp_names
EVAN DULANEY
MOBILE AL
JEFF DURHAM
MOBILE AL
BILL STEEN
MOBILE AL
EVAN FELDMAN
MOBILE AL
STEVE SWIM
UNKNOWN AL
$
</pre><p><span class="bodycopy">如果没有使用分号 (</span><tt>print $3,$2,$4,$5</tt><span class="bodycopy">)，则会在同一行中显示所有内容。另一方面，如果分别给出两个打印语句，则会产生完全不同的结果：</span></p><pre>$ awk '/AL/ {print $3,$2} {print $4,$5}' emp_names
EVAN DULANEY
MOBILE AL
JEFF DURHAM
MOBILE AL
BILL STEEN
MOBILE AL
EVAN FELDMAN
MOBILE AL
STEVE SWIM
UNKNOWN AL
PHOENIX AZ
PHOENIX AZ
UNKNOWN AR
MUNCIE IN
MUNCIE IN
MUNCIE IN
MUNCIE IN
$
</pre><p><span class="bodycopy">只有在列表中找到 </span><tt>AL</tt><span class="bodycopy"> 时才会给出字段三和字段二。但是，字段四和字段五是无条件的，始终打印它们。只有第一组花括号中的命令对前面紧邻的命令 (</span><tt>/AL/</tt><span class="bodycopy">) 起作用。</span></p><p><span class="bodycopy">结果非常不便于阅读，可以使其稍微更清晰一些。首先，在城市与州之间插入一个空格和逗号。然后，在每两行显示之后放置一个空行：</span></p><pre>$ awk '/AL/ {print $3,$2 ; print $4", "$5"\n"}' emp_names
EVAN DULANEY
MOBILE, AL

JEFF DURHAM
MOBILE, AL

BILL STEEN
MOBILE, AL

EVAN FELDMAN
MOBILE, AL

STEVE SWIM
UNKNOWN, AL
$
</pre><p><span class="bodycopy">在第四和第五个字段之间，添加一个逗号和一个空格（在引号之间），在第五个字段后面，打印一个换行符 (</span><tt>\n</tt><span class="bodycopy">)。在 AWK 打印语句中还可以使用那些可在 </span><tt>echo</tt><span class="bodycopy"> 命令中使用的所有特殊字符，包括：</span></p><ul><li><tt>\n</tt><span class="bodycopy">（换行）</span></li><li><tt>\t</tt><span class="bodycopy">（制表）</span></li><li><tt>\b</tt><span class="bodycopy">（退格）</span></li><li><tt>\f</tt><span class="bodycopy">（进纸）</span></li><li><tt>\r</tt><span class="bodycopy">（回车）</span></li></ul><p><span class="bodycopy">因此，要读取全部五个最初由制表符分隔开的字段，并且也利用制表符打印它们，您可以编程如下</span></p><pre>$ awk '{print $1"\t"$2"\t"$3"\t"$4"\t"$5}' emp_names
46012   DULANEY     EVAN     MOBILE    AL
46013   DURHAM      JEFF     MOBILE    AL
46015   STEEN       BILL     MOBILE    AL
46017   FELDMAN     EVAN     MOBILE    AL
46018   SWIM        STEVE    UNKNOWN   AL
46019   BOGUE       ROBERT   PHOENIX   AZ
46021   JUNE        MICAH    PHOENIX   AZ
46022   KANE        SHERYL   UNKNOWN   AR
46024   WOOD        WILLIAM  MUNCIE    IN
46026   FERGUS      SARAH    MUNCIE    IN
46027   BUCK        SARAH    MUNCIE    IN
46029   TUTTLE      BOB      MUNCIE    IN
$
</pre><p><span class="bodycopy">通过连续设置多项标准并用管道 (</span><tt>|</tt><span class="bodycopy">) 符号将其分隔开，您可以一次搜索多个模式匹配：</span></p><pre>$ awk '/AL|IN/' emp_names
46012   DULANEY     EVAN     MOBILE    AL
46013   DURHAM      JEFF     MOBILE    AL
46015   STEEN       BILL     MOBILE    AL
46017   FELDMAN     EVAN     MOBILE    AL
46018   SWIM        STEVE    UNKNOWN   AL
46024   WOOD        WILLIAM  MUNCIE    IN
46026   FERGUS      SARAH    MUNCIE    IN
46027   BUCK        SARAH    MUNCIE    IN
46029   TUTTLE      BOB      MUNCIE    IN
$
</pre><p><span class="bodycopy">这样可找到每个阿拉巴马州和印第安那州居民的匹配记录。但是在试图找出居住在亚利桑那州的人时，出现了一个问题：</span></p><pre>$ awk '/AR/' emp_names
46019   BOGUE       ROBERT   PHOENIX   AZ
46021   JUNE        MICAH    PHOENIX   AZ
46022   KANE        SHERYL   UNKNOWN   AZ
46026   FERGUS      SARAH    MUNCIE    IN
46027   BUCK        SARAH    MUNCIE    IN
$
</pre><p><span class="bodycopy">员工 46026 和 46027 没有住在亚利桑那州；但是他们的名字中包含所搜索的字符序列。切记，当在 AWK 中进行模式匹配时，例如 </span><tt>grep、sed</tt><span class="bodycopy"> 或者大部分其他 Linux/Unix 命令，将在记录（行）中的任何位置查找匹配，除非指定进行其他操作。为解决这一问题，必须将搜索与特定字段联系起来。通过利用代字号 (˜) 以及对特定字段的说明，可以达到这一目的，如下例所示：</span></p><pre>$ awk '$5 ˜ /AR/' emp_names
46019   BOGUE       ROBERT   PHOENIX   AZ
46021   JUNE        MICAH    PHOENIX   AZ
46022   KANE        SHERYL   UNKNOWN   AZ
$
</pre><p><span class="bodycopy">代字号（表示匹配）的对应符号是一个前面带有感叹号的代字号 (!˜)。这些字符通知程序，如果搜索序列没有出现在指定字段中，则找出与搜索序列相匹配的所有行：</span></p><pre>$ awk '$5 !˜ /AR/' names
46012   DULANEY     EVAN     MOBILE    AL
46013   DURHAM      JEFF     MOBILE    AL
46015   STEEN       BILL     MOBILE    AL
46017   FELDMAN     EVAN     MOBILE    AL
46018   SWIM        STEVE    UNKNOWN   AL
46024   WOOD        WILLIAM  MUNCIE    IN
46026   FERGUS      SARAH    MUNCIE    IN
46027   BUCK        SARAH    MUNCIE    IN
46029   TUTTLE      BOB      MUNCIE    IN
$
</pre><p><span class="bodycopy">在这种情况下，将显示第五个字段中没有 AR 的所有行 — 包括两个 Sarah 条目，这两个条目确实包含 AR，但却是在第三个字段而不是第五个字段中。</span></p><p><span class="parahead1">花括号和字段分隔符</span></p><p><span class="bodycopy">括号字符在 AWK 命令中起着很重要的作用。出现在括号之间的操作指出将要发生什么以及何时发生。当只使用一对括号时：</span></p><pre>{print $3,$2}
</pre><p><span class="bodycopy">括号间的所有操作同时发生。当使用多于一对的括号时：</span></p><pre>{print $3}{print $2}
</pre><p><span class="bodycopy">执行第一组命令，在该命令完成后执行第二组命令。注意以下两列清单的区别：</span></p><pre>$ awk '{print $3,$2}' names
EVAN DULANEY
JEFF DURHAM
BILL STEEN
EVAN FELDMAN
STEVE SWIM
ROBERT BOGUE
MICAH JUNE
SHERYL KANE
WILLIAM WOOD
SARAH FERGUS
SARAH BUCK
BOB TUTTLE
$

$ awk '{print $3}{print $2}' names
EVAN
DULANEY
JEFF
DURHAM
BILL
STEEN
EVAN
FELDMAN
STEVE
SWIM
ROBERT
BOGUE
MICAH
JUNE
SHERYL
KANE
WILLIAM
WOOD
SARAH
FERGUS
SARAH
BUCK
BOB
TUTTLE
$
</pre><p><span class="bodycopy">要利用多组括号进行重复查找，执行第一组中的命令直到完成为止；然后处理第二组命令。如果有第三组命令，则在第二组命令完成后执行它，以此类推。在所生成的打印输出中，有两个分隔的打印命令，因此先执行第一个命令，随后执行第二个命令，这样导致每个条目显示在两行而不是一行中。</span></p><p><span class="bodycopy">区分两个字段的字段分隔符不一定始终是空格；它可以是任何可识别的字符。为进行演示，假定 </span><tt>emp_names</tt><span class="bodycopy"> 文件利用冒号而不是制表符来分隔字段：</span></p><pre>$ cat emp_names
46012:DULANEY:EVAN:MOBILE:AL
46013:DURHAM:JEFF:MOBILE:AL
46015:STEEN:BILL:MOBILE:AL
46017:FELDMAN:EVAN:MOBILE:AL
46018:SWIM:STEVE:UNKNOWN:AL
46019:BOGUE:ROBERT:PHOENIX:AZ
46021:JUNE:MICAH:PHOENIX:AZ
46022:KANE:SHERYL:UNKNOWN:AR
46024:WOOD:WILLIAM:MUNCIE:IN
46026:FERGUS:SARAH:MUNCIE:IN
46027:BUCK:SARAH:MUNCIE:IN
46029:TUTTLE:BOB:MUNCIE:IN
$
</pre><p><span class="bodycopy">如果试图通过指定所需要的第二个字段来打印姓氏</span></p><pre>$ awk '{print $2}' emp_names
</pre><p><span class="bodycopy">您最后会得到十二个空行。因为文件中没有空格，除了第一个字段之外没有可认别的字段。为解决这一问题，必须通知 AWK 是空格之外的另一个字符作为分隔符，有两种方法可通知 AWK 使用新的字段分隔符：使用命令行参数 </span><tt>-F</tt><span class="bodycopy">，或在程序中指定变量 FS。两种方法的效果相同，只有一种例外情况，如下例所示：</span></p><pre>$ awk '{FS=":"}{print $2}' emp_names

DURHAM
STEEN
FELDMAN
SWIM
BOGUE
JUNE
KANE
WOOD
FERGUS
BUCK
TUTTLE
$

$ awk -F: '{print $2}' emp_names
DULANEY
DURHAM
STEEN
FELDMAN
SWIM
BOGUE
JUNE
KANE
WOOD
FERGUS
BUCK
TUTTLE
$
</pre><p><span class="bodycopy">在第一个命令中，头一条记录返回不正确的空行，而其他结果正确。直到读取第二条记录时，才识别字段分隔符并正确地执行。通过使用 </span><tt>BEGIN</tt><span class="bodycopy"> 语句可以纠正这一缺点（在后文详述）。</span><tt>-F</tt><span class="bodycopy"> 的功能非常类似于 </span><tt>BEGIN</tt><span class="bodycopy">，能够正确地读取第一条记录并按要求执行。</span></p><p><span class="bodycopy">在本文开始处我曾提到，默认的显示/输出字段分隔符是空格。通过使用输出字段分隔符 (</span><tt>OFS</tt><span class="bodycopy">) 变量，可以在程序中更改此特性。例如，要读取文件（由冒号分隔）并以短划线显示，则命令是</span></p><pre>$ awk -F":" '{OFS="-"}{print $1,$2,$3,$4,$5}' emp_names
46012-DULANEY-EVAN-MOBILE-AL
46013-DURHAM-JEFF-MOBILE-AL
46015-STEEN-BILL-MOBILE-AL
46017-FELDMAN-EVAN-MOBILE-AL
46018-SWIM-STEVE-UNKNOWN-AL
46019-BOGUE-ROBERT-PHOENIX-AZ
46021-JUNE-MICAH-PHOENIX-AZ
46022-KANE-SHERYL-UNKNOWN-AR
46024-WOOD-WILLIAM-MUNCIE-IN
46026-FERGUS-SARAH-MUNCIE-IN
46027-BUCK-SARAH-MUNCIE-IN
46029-TUTTLE-BOB-MUNCIE-IN
$
</pre><p><tt>FS </tt><span class="bodycopy"> 和 </span><tt>OFS</tt><span class="bodycopy"> 是（输入）字段分隔符和输出字段分隔符，它们只是一对可以在 AWK 实用工具中使用的变量。例如，要在打印时为每行编号，可以采用以下方式使用 </span><tt>NR</tt><span class="bodycopy"> 变量：</span></p><pre>$ awk -F":" '{print NR,$1,$2,$3}' emp_names
1 46012 DULANEY EVAN
2 46013 DURHAM JEFF
3 46015 STEEN BILL
4 46017 FELDMAN EVAN
5 46018 SWIM STEVE
6 46019 BOGUE ROBERT
7 46021 JUNE MICAH
8 46022 KANE SHERYL
9 46024 WOOD WILLIAM
10 46026 FERGUS SARAH
11 46027 BUCK SARAH
12 46029 TUTTLE BOB
$
</pre><p><span class="bodycopy">找出员工号码处于 46012 和 46015 之间的所有行：</span></p><pre>$ awk -F":" '/4601[2-5]/' emp_names
46012   DULANEY EVAN  MOBILE AL
46013   DURHAM  JEFF  MOBILE AL
46015   STEEN   BILL  MOBILE AL
$
</pre><p><span class="parahead1">添加文本</span></p><p><span class="bodycopy">可以按照添加控制序列或其他字符的相同方式将文本添加到显示中。例如，要将分隔符从空格改为冒号，则命令是</span></p><pre>awk '{print $1":"$2":"$3":"$4":"$5}' emp_names &gt; new_emp_names
</pre><p><span class="bodycopy">在这种情况下，字符 (</span><tt>:</tt><span class="bodycopy">) 包含在引号 (</span><tt>"/"</tt><span class="bodycopy">) 中，它被添加到每个字段之间。在引号之间的值可以是任何内容。例如，创建一个关于居住在阿拉巴马州的员工的外观类似数据库的显示：</span></p><pre>$ awk '$5 ~ /AL/ {print "NAME: "$2", "$3"\nCITY-STATE:
  "$4", "$5"\n"}' emp_names

NAME: DULANEY, EVAN
CITY-STATE: MOBILE, AL

NAME: DURHAM, JEFF
CITY-STATE: MOBILE, AL

NAME: STEEN, BILL
CITY-STATE: MOBILE, AL

NAME: FELDMAN, EVAN
CITY-STATE: MOBILE, AL

NAME: SWIM, STEVE
CITY-STATE: UNKNOWN, AL
$
</pre><p><span class="parahead1">数学操作</span></p><p><span class="bodycopy">AWK 除了提供文本功能，还提供全部范围的算术操作符，包括以下符号：</span></p><p><tt>+    </tt><span class="bodycopy">将数字相加</span>
 <tt>-    </tt><span class="bodycopy">减</span>
 <tt>*    </tt><span class="bodycopy">乘</span>
 <tt>/    </tt><span class="bodycopy">除</span>
 <tt>^    </tt><span class="bodycopy">执行指数运算</span>
 <tt>%    </tt><span class="bodycopy">提供模</span>
 <tt>++   </tt><span class="bodycopy">将变量值加一</span>
 <tt>+=   </tt><span class="bodycopy">将其他操作的结果分配给变量</span>
 <tt>— </tt><span class="bodycopy">将变量减一</span>
 <tt>-=   </tt><span class="bodycopy">将减法操作的结果分配给变量</span>
 <tt>*=   </tt><span class="bodycopy">分配乘法操作的结果</span>
 <tt>/=   </tt><span class="bodycopy">分配除法操作的结果</span>
 <tt>%=   </tt><span class="bodycopy">分配求模操作的结果</span></p><p><span class="bodycopy">例如，假定您的机器上存在以下的文件，详细地列出硬件商店中的物品：</span></p><pre>$ cat inventory
hammers 5       7.99
drills  2      29.99
punches 7       3.59
drifts  2       4.09
bits   55       1.19
saws  123      14.99
nails 800        .19
screws 80        .29
brads 100        .24
$
</pre><p><span class="bodycopy">第一项业务定单是通过将第二个字段（数量）的值乘以第三个字段（价格）的值，计算每种物品的库存价值：</span></p><pre>$ awk '{print $1,"QTY: "$2,"PRICE: "$3,"TOTAL: "$2*$3}' inventory
hammers QTY: 5 PRICE: 7.99 TOTAL: 39.95
drills QTY: 2 PRICE: 29.99 TOTAL: 59.98
punches QTY: 7 PRICE: 3.59 TOTAL: 25.13
drifts QTY: 2 PRICE: 4.09 TOTAL: 8.18
bits QTY: 55 PRICE: 1.19 TOTAL: 65.45
saws QTY: 123 PRICE: 14.99 TOTAL: 1843.77
nails QTY: 800 PRICE: .19 TOTAL: 152
screws QTY: 80 PRICE: .29 TOTAL: 23.2
brads QTY: 100 PRICE: .24 TOTAL: 24
$
</pre><p><span class="bodycopy">如果这些行本身并不重要，您只是希望确定商店中有多少件物品，则可以分配一个普通变量，按照每条记录中的物品数量增加：</span></p><pre>$ awk '{x=x+$2} {print x}' inventory
5
7
14
16
71
194
994
1074
1174
$
</pre><p><span class="bodycopy">根据这一数据，商店中有 1174 件物品。第一次执行时，变量 x 没有值，因此它采用第一行第二个字段的值。第二次执行时，它保留了第一行的值并加上第二行的值，以此类推，直到达到累计的总合。</span></p><p><span class="bodycopy">可以应用相同的过程来确定现有库存的总价值：</span></p><pre>$ awk '{x=x+($2*$3)} {print x}' inventory
39.95
99.93
125.06
133.24
198.69
2042.46
2194.46
2217.66
2241.66
$
</pre><p><span class="bodycopy">因此，1174 件物品的价值是 $2,241.66。虽然这一过程可以获得总计值，但它的外观很差，需要加工成实际的报表。利用一些附加项，很容易使显示变得更整洁：</span></p><pre>$ awk '{x=x+($2*$3)}{print $1,"QTY: "$2,"PRICE: "$3,"TOTAL: "$2*$3,"BAL: "x}' inventory
hammers QTY: 5 PRICE: 7.99 TOTAL: 39.95 BAL: 39.95
drills QTY: 2 PRICE: 29.99 TOTAL: 59.98 BAL: 99.93
punches QTY: 7 PRICE: 3.59 TOTAL: 25.13 BAL: 125.06
drifts QTY: 2 PRICE: 4.09 TOTAL: 8.18 BAL: 133.24
bits QTY: 55 PRICE: 1.19 TOTAL: 65.45 BAL: 198.69
saws QTY: 123 PRICE: 14.99 TOTAL: 1843.77 BAL: 2042.46
nails QTY: 800 PRICE: .19 TOTAL: 152 BAL: 2194.46
screws QTY: 80 PRICE: .29 TOTAL: 23.2 BAL: 2217.66
brads QTY: 100 PRICE: .24 TOTAL: 24 BAL: 2241.66
$
</pre><p><span class="bodycopy">该过程提供了每条记录的清单，同时将总价值分配给库存值，并保持商店资产的运作平衡。</span></p><p><tt><strong>BEGIN</strong></tt><span class="bodycopy"> 和 </span><tt><strong>END</strong></tt></p><p><span class="bodycopy">使用 </span><tt>BEGIN</tt><span class="bodycopy"> 和 </span><tt>END</tt><span class="bodycopy"> 语句可以分别指定在处理实际开始之前或者完成之后进行操作。</span><tt>BEGIN</tt><span class="bodycopy"> 语句最常用于建立变量或显示标题。另一方面，</span><tt>END</tt><span class="bodycopy"> 语句可用于在程序结束后继续进行处理。</span></p><p><span class="bodycopy">在前面的示例中，利用以下例程生成了物品的总价值：</span></p><pre>awk '{x=x+($2*$3)} {print x}' inventory
</pre><p><span class="bodycopy">该例程在运行总计累加时显示了文件中的每一行。没有其他方法可以指定它，而不让在每一行进行打印也导致它始终不打印出来。但是，利用 </span><tt>END</tt><span class="bodycopy"> 语句可以避免这一问题：</span></p><pre>$ awk '{x=x+($2*$3)} END {print "Total Value of Inventory:"x}' inventory
Total Value of Inventory: 2241.66
$
</pre><p><span class="bodycopy">定义了变量 </span><tt><em>x</em></tt><span class="bodycopy">，它对每一行进行处理；但是，在所有处理完成之前不会生成显示。尽管可以作为独立例程使用，它也可以置入到先前的代码列表，添加更多信息并生成更完整的报表：</span></p><pre>$ awk '{x=x+($2*$3)} {print $1,"QTY: "$2,"PRICE: 
    "$3,"TOTAL: "$2*$3} END {print "Total Value of Inventory: " x}' inventory

hammers QTY: 5 PRICE: 7.99 TOTAL: 39.95
drills QTY: 2 PRICE: 29.99 TOTAL: 59.98
punches QTY: 7 PRICE: 3.59 TOTAL: 25.13
drifts QTY: 2 PRICE: 4.09 TOTAL: 8.18
bits QTY: 55 PRICE: 1.19 TOTAL: 65.45
saws QTY: 123 PRICE: 14.99 TOTAL: 1843.77
nails QTY: 800 PRICE: .19 TOTAL: 152
screws QTY: 80 PRICE: .29 TOTAL: 23.2
brads QTY: 100 PRICE: .24 TOTAL: 24
Total Value of Inventory: 2241.66
$
</pre><p><span class="bodycopy"></span><tt>BEGIN</tt><span class="bodycopy"> 命令与 </span><tt>END</tt><span class="bodycopy"> 的工作方式相同，但它建立了那些需要在完成其他工作之前所做的项目。该过程最常见的目的是创建报表的标题。此例程的语法类似于</span></p><pre>$ awk 'BEGIN {print "ITEM   QUANTITY   PRICE   TOTAL"}'
</pre><p><span class="parahead1">输入、输出和源文件</span></p><p><span class="bodycopy">AWK 工具可以从文件中读取其输入，正如在此之前所有示例所做的那样，它也可以从其他命令的输出中获取输入。例如：</span></p><pre>$ sort emp_names | awk '{print $3,$2}'
</pre><p><span class="bodycopy"></span><tt>awk</tt><span class="bodycopy"> 命令的输入是排序操作的输出。除了 </span><tt>sort</tt><span class="bodycopy">，还可以使用任何其他的 Linux 命令 — 例如 </span><tt>grep</tt><span class="bodycopy">。该过程允许您在离开所选定字段前对文件执行其他操作。</span></p><p><span class="bodycopy">类似于解释程序，AWK 使用输出改向操作符 </span><tt>&gt;</tt><span class="bodycopy"> 和 </span><tt>&gt;&gt;</tt><span class="bodycopy"> 将其输出放入文件中而不是标准输出设备。这些符号的作用类似于它们在解释程序中的对应符号，因此 </span><tt>&gt;</tt><span class="bodycopy"> 在不存在文件时创建文件，而 </span><tt>&gt;&gt;</tt><span class="bodycopy"> 追加到现有文件的尾部。请看以下的示例：</span></p><pre>$ awk '{print NR, $1 ) &gt; "/tmp/filez" }' emp_names
$ cat /tmp/filez
1	46012
2	46013
3	46015
4	46017
5	46018
6	46019
7	46021
8	46022
9	46024
10	46026
11	46027
12	46029
$
</pre><p><span class="bodycopy">检查该语句的语法，您会看到输出改向是在打印语句完成后进行的。必须将文件名包含在引号中，否则它只是一个未初始化的 AWK 变量，而将指令联接起来会在 AWK 中产生错误。（如果不正确地使用改向符号，则 AWK无法了解该符号意味着“改向”还是一个关系操作符。）</span></p><p><span class="bodycopy">在 AWK 中输出到管道也类似于解释程序中所实现的相同操作。要将打印命令的输出发送到管道中，可以在打印命令后附加管道符号以及命令的名称，如下所示：</span></p><pre>$ awk '{ print $2 | "sort" }' emp_names
BOGUE
BUCK
DULANEY
DURHAM
FELDMAN
FERGUS
JUNE
KANE
STEEN
SWIM
TUTTLE
WOOD
$
</pre><p><span class="bodycopy">这是输出改向的情况，必须将命令包含在引号中，而管道的名称是被执行命令的名称。</span></p><p><span class="bodycopy">AWK 所使用的命令可以来自两个地方。首先，可以在命令行中指定它们，如示例中所示。其次，它们可以由源文件提供。如果是这种情况，通过 </span><tt>-f</tt><span class="bodycopy"> 选项将这种情况向 AWK 发出警告。演示如下：</span></p><pre>$ cat awklist
{print $3,$2}
{print $4,$5,"\n"}
$

$ awk -f awklist emp_names
EVAN DULANEY
MOBILE AL

JEFF DURHAM
MOBILE AL

BILL STEEN
MOBILE AL

EVAN FELDMAN
MOBILE AL

STEVE SWIM
UNKNOWN AL

ROBERT BOGUE
PHOENIX AZ

MICAH JUNE
PHOENIX AZ

SHERYL KANE
UNKNOWN AR

WILLIAM WOOD
MUNCIE IN

SARAH FERGUS
MUNCIE IN

SARAH BUCK
MUNCIE IN

BOB TUTTLE
MUNCIE IN

$
</pre><p><span class="bodycopy">注意，在源文件中的任何地方或者在命令行中调用它时，不使用单引号。单引号只用于区别命令行中的命令与文件名称。</span></p><p><span class="bodycopy">如果简单的输出不能处理您的程序中所需要的复杂信息，则可以尝试由 </span><tt>printf</tt><span class="bodycopy"> 命令获得的更加复杂的输出，其语法是</span></p><pre>printf( format, value, value ...)
</pre><p><span class="bodycopy">该语法类似于 C 语言中的 </span><tt>printf</tt><span class="bodycopy"> 命令，而格式的规格是相同的。通过插入一项定义如何打印数值的规格，可以定义该格式。格式规格包含一个跟有字母的 %。类似于打印命令，</span><tt>printf</tt><span class="bodycopy"> 不必包含在圆括号中，但是可以认为使用圆括号是一种良好的习惯。</span></p><p><span class="bodycopy">下表列出 </span><tt>printf</tt><span class="bodycopy"> 命令提供的各种规格。</span></p><table align="left" bgcolor="#ffffff" border="0" cellpadding="5" hspace="5" vspace="5" width="100%"><tbody><tr><td width="15%"><span class="boldbodycopy">规格</span></td><td width="85%"><span class="boldbodycopy">说明</span></td></tr><tr><td><tt>%c</tt></td><td><span class="bodycopy">打印单个 ASCII 字符</span></td></tr><tr><td><tt>%d</tt></td><td><span class="bodycopy">打印十进制数</span></td></tr><tr><td><tt>%e</tt></td><td><span class="bodycopy">打印数字的科学计数表示</span></td></tr>		                                                             <tr><td><tt>%f</tt></td><td><span class="bodycopy">打印浮点表示</span></td></tr><tr><td><tt>%g</tt></td><td><span class="bodycopy">打印 %e 或 %f；两种方式都更简短</span></td></tr><tr><td><tt>%o</tt></td><td><span class="bodycopy">打印无符号的八进制数</span></td></tr><tr><td><tt>s</tt></td><td><span class="bodycopy">打印 ASCII 字符串</span></td></tr><tr><td><tt>%x</tt></td><td><span class="bodycopy">打印无符号的十六进制数</span></td></tr><tr><td><tt>%%</tt></td><td><span class="bodycopy">打印百分号；不执行转换</span></td></tr></tbody></table>
<p><span class="bodycopy">可以在 % 与字符之间提供某些附加的格式化参数。这些参数进一步改进数值的打印方式：</span></p><table align="left" bgcolor="#ffffff" border="0" cellpadding="5" hspace="5" vspace="5" width="100%"><tbody><tr><td width="25%"><span class="boldbodycopy">参数</span></td><td width="75%"><span class="boldbodycopy">说明</span></td></tr><tr><td><tt>-</tt></td><td><span class="bodycopy">将字段中的表达式向左对齐</span></td></tr><tr><td><tt>,width</tt></td><td><span class="bodycopy">根据需要将字段补齐到指定宽度（前导零使用零将字段补齐） </span></td></tr><tr><td><tt>.prec</tt></td><td><span class="bodycopy">小数点右面数字的最大字符串宽度或最大数量</span></td></tr></tbody></table><p><span class="bodycopy"></span><tt>printf</tt><span class="bodycopy"> 命令能够控制并将数值从一种格式转换为另一种格式。当需要打印变量的值时，只需提供一种规格，指示 </span><tt>printf</tt><span class="bodycopy"> 如何打印信息（通常包含在双引号中）即可。必须为每个传递到 </span><tt>printf</tt><span class="bodycopy"> 的变量包含一个规格参数；如果包含过少的参数，则 </span><tt>printf</tt><span class="bodycopy"> 不会打印所有的数值。</span></p><p><span class="parahead1">处理错误</span></p><p><span class="bodycopy">AWK 工具报告所发生错误的方式很令人恼火。一个错误会阻碍任何操作的进行，所提供的错误信息非常含混不清：</span></p><pre>awk: syntax error near line 2
awk: bailing out near line 2
</pre><p><span class="bodycopy">您可能会花几小时的时间查看第 2 行，试图找出它为什么阻碍程序运行；这就是支持使用源文件的一个有力论据。</span></p>
<p><span class="bodycopy">切记有两条规则可以帮助您避免出现语法错误：</span></p><p><span class="bodycopy">1. 确保命令位于括号中，而括号位于单引号中。没有使用这些字符之一必然导致程序无法运行。</span></p><p><span class="bodycopy">2. 搜索命令需要位于斜线之间。要找出住在印第安那州的员工，您必须使用“</span><tt>/IN/</tt><span class="bodycopy">”而不是“</span><tt>IN</tt><span class="bodycopy">”。</span></p><p><span class="parahead1">结论</span></p><p><span class="bodycopy">尽管 AWK 完全代表另外的含意，但它应该是管理员智能工具包的首字母缩写。连同 SED一起，AWK 实用工具是 Linux管理员所拥有的功能最强大和灵活的工具之一。通过了解其语言的一些特性，您可以开辟出能够简化任务的领域，否则这些任务将会是非常费时和困难的。 </span></p>
</span></p>
]]></content>
    
    <summary type="html">
    
      引用地址：http://www.oracle.com/technology/global/cn/pub/articles/dulaney_awk.html
还可以参考：http://www.example.net.cn/archives/2005/01/awknieec.html

&lt;p&gt;&lt;span class=&quot;boldbodycopy&quot;&gt;您正在学习 Linux 吗？本文对于非常有用的 AWK 文本操作工具进行了介绍，非常有价值。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&amp;lt;!--use&amp;gt; &lt;span class=&quot;bodycopy&quot;&gt;AWK实用工具带有其自己的自包含语言，它不仅是 Linux中也是任何环境中现有的功能最强大的数据处理引擎之一。这种编程及数据操作语言（其名称得自于它的创始人 Alfred Aho、PeterWeinberger 和 Brian Kernighan姓氏的首个字母）的最大功能取决于一个人所拥有的知识。它允许您创建简短的程序，这些程序读取输入文件、为数据排序、处理数据、对输入执行计算以及生成报表，还有无数其他的功能。&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span class=&quot;parahead1&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>LNS防火墙中级使用指南zz</title>
    <link href="http://wdicc.com/lns-firewall/"/>
    <id>http://wdicc.com/lns-firewall/</id>
    <published>2006-03-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://bbs.zol.com.cn/index20060306/index_40_72576.html

<p><span style="font-size: 12px">安装方法： 

双击运行LooknStop_Setup_205p2.exe即可！ 

注意：安装时会弹出一个没有通过 Windows 徽标测试的提示窗口，点击仍然继续即可！ 


汉化方法： 

将汉化补丁文件内的语言文件chinese.lng及语言插件复制到look'n'stop的安装目录下(默认是C:\ProgramFiles\Soft4Ever\looknstop)，然后打开look'n'stop就应该是中文界面了，如果仍是英文界面，可以按下面的步骤操作： 

1) 点击"Options"选项卡的"Advanced Options"按钮； 
2) 点击"Plugins"按钮； 
3) 在"Avilable_plugins"框中打勾"plugin_language.dll"； 
4) 点击"Configure"按钮； 
5) 选中"简体中文"，确定。 

注册方法： 

切换到"注册"选项卡，然后复制"代码"里的注册代码，接着运行"注册机.exe"即可取得序列号！ 

注意： 

1.如果安装look'n'stop后无法上网，可以这样解决：切换到主界面的"互联网过滤"，然后双击最后一条规则<a name="3"></a>"All oter packets"，把以"太网 : 类型"的中的"全部"改为"IP"，保存后应用即可！ 
2.该防火墙功能强大，但设置也非常繁多复杂，因此建议一般用户请谨慎使用！ 

注意：你在使用下述图解时，<span style="color: rgb(255, 0, 0)">请一定先打开“选项”—&gt;选中“高级模式”</span>，切记。 
</span></p><p><span style="font-size: 12px"><br><a id="more"></a><p><span style="font-size: 12px">1.应用程序过滤----专门对程序进行设定，决定应用程序行为的控制。
<img style="width: 591px; height: 443px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96947.jpg" rel="lightbox">
先看看红色编号1区，这个区显示是正连接在网络上或者曾经连接过网络目前还没有关闭的软件清单。 

重点是看绝色编号2区，这个区才是重点，有N多的门道在里面。这个区猛一看是已允许的相信的程序，仔细看看，偶已经列出了11种属性，当然也是可能的全部属性了。 

现在按此区的“列”来开讲^_^，之前必需选中黑色编号13“应用程序过滤已启用”，否则所做的任何设置都不起作用，嘿嘿。 

第一列只有此二种属性，简而言之就是启用或者禁用该规则，单击实现二种属性之间的切换。见黑色编号1，黑色编号2。 

黑色编号1，是指启用为它所在行的那个程序制定的规则，也就是说让该程序按既定的规则运行，此所谓的应用程序过滤。如果你不想为这个程序设置的规则起作用的话，那么点击一下，就会变成黑色编号2所指的样子。 

第二列有三种属性，分别是允许（黑色编号5）、禁止（黑色编号4）、自定义（黑色编号3）。单击则在允许与禁止之间切换，如果有自定义属性，则在三者之间进行切换。 
黑色编号3：黄色圆饼标志。当你为此程序制定了特殊规则，如指定程序只能连接远程的哪些端口、或者不允许连接哪些端口；允许连接哪些地址、禁止连接哪些地址时，则出现黄色的圆。（功能强大，设置之灵活让人唏嘘。）具体看看如下： 

双击某个程序（当然也可以通过点击点击黑色编号12来实现），就会出现如图二所示的“选择端口和IP地址”窗口，此时你可以设置具体的内容了。 
<img src="http://www.magicwinmail.com/course/looknstop/images/22_96948.jpg" if(this.width="" alt="">
比如，偶的TW，偶只允许它连接远程的80端口，不允许连接其它端口，那么就按上面的设置；此时对IP地址没有限制。如果你想让他只连接远程的某个IP地址，那么就在IP地址栏输入。当然没有人会这么对待浏览器。 

这个自定义功能不会只是如此简单吧？当然不是，其实重要的不是允许去什么地方，而是禁止它去什么去什么地方。比如，你的CuteFTP一启动就想去它的主站验证一下它的合法性，那么你就可以在这里设置一下了，而又不影响其它程序（如IE）访问CuteFTP的主站（目前偶还没有发现哪个防火墙能这样设置的，嘿嘿，如果有恕偶无知）。 

说了半天，允许和禁止在这里是看不出区别的，该怎么办？其它很简单，允许访问的端口或者IP，则直接输入在上面就行。如果你要禁止某个端口或者地址，呵呵，只要在端口前面加上一个感叹号“！”就行了，是不是真的简单？对了，如果是多个IP或者端口，不要忘记在它们之间加上一个半角的分号“；”哦。 

黑色编号4：红色禁止标志。此标志表示禁止该程序连接网络。 

黑色编号5：绿色允许标志。此标志表示允许该程序连接网络。 

现在来看第三列，此列只有二种属性，单击则实现二种属性之间的切换。见黑色编号7、黑色编号9。这一列是强大功能的一个体现，作用是允许或者禁止此程序调用另一个程序并且使用被调用的这个程序连接网络，也就是说：A程序启动了B程序，B程序有连网企图，此属性就是对这种情况进行控制的。必须打开“高级选项”中的“高级模式”才会出现此列。 

黑色编号7：双箭头标志。当为此标志时则意味着允许当前程序去调用另外一个要使其连接网络的程序。如果发生这种情况，则出现提示窗。 

黑色编号9：红色禁止标志。当为此标志时不允许当前程序去调用另外一个要使其连接网络的程序，当然如果被调用的程序没有连接网络的企图，则防火墙是不出现提示的。 

第四列，此列有三种属性，其中二种属性与第一列的属性配合才能看到效果。黑色编号6、黑色编号10、黑色编号11。 

黑色编号11：如果是这个标志，则什么也不发生。相当于此属性被禁用。 

黑色编号10：单感叹号标志。此标志表示在日志中记录该应用程序的连网“企图”，此时要与第一列配合使用，第一列的属性必须是禁止标志才起作用。这个功能的好处太多了，比如：一个被你禁止了的程序，可能也已经关闭了，但频频试图连网，估计它也不是什么好东西，木马常常这么干！ 

黑色编号6： 双感叹号标志。此标志表示无论该程序是禁止还是允许连网，都在日志中记录。 

好了，应用程序过滤篇到此完毕。可以看出，LNS对程序的控制非常灵活且强大，10个属性有36种不同组合。仅一个页面可以实现允许禁止、记录与否、单程序访问控制、进程调用四种功能的控制。
<span id="text2" style="font-size: 12px">2.互联网过滤----专门对防火墙规则进行设定，也有少量设定涉及到程序。决定网络连接及数据包行为的控制。 

图三是互联网过滤，继续按“列”进行讲解。此页面部分功能与“选项”时的“消息框”、“声音”、“日志”配合使用。

<img src="http://www.magicwinmail.com/course/looknstop/images/22_96949.jpg" if(this.width="" alt="">
第一列，有三种属性。自定义的启动该规则属性、默认的启用该规则属性、不启用该规则属性，分别对应黑色编号3、黑色编号1和黑色编号2。三种属性之间点击进行切换，但如果没有进行自定义，则只在二种属性间切换。 

黑色编号1：绿色带勾标志。此标志表示启用该规则，且该规则没有进行特别的自定义。 

黑色编号2：灰色小圆点标志。此标示表示不使用该规则，也就是说防火墙对网络连接请进行检查时不与该规则进行匹配操作。相当于这条规则只是临时放在这里，并没有什么作用。 

黑色编号3：暗红色带勾标志。此标志表明这条规则只对特定的程序起作用，当此特定的程序启动后，此标志则变为绝色带勾标志，表示规则启用了，否则为暗红色带勾标志，表示这规则暂时未被启用。这种设置方式似乎也没有在其它防火墙中见到，极其特别，也是LNS灵活的一个体现。它的好象是什么呢？显示易见，当该特定程序没有启动时，就相当于少了一条规则，少一条规则多一分安全是主要的；其次可以加快对规则匹配操作的时间。设置特定程序的方法为双击当前规则，出现一个设置窗如图四所示。 

<img style="width: 596px; height: 467px" src="http://www.magicwinmail.com/course/looknstop/images/22_96950.jpg" if(this.width="" alt="">
双击一条规则后会出现如红色编号1的窗口，点击些窗口上的“应用程序…”按钮，出现如红色编号2所示的窗口，将此窗口中右侧的程序双击添加到左侧，然后一路确定就可以了。图示是偶为BT添加的自定义规则，只有当BT启动后它才启用，平时这条规则相当于不存在，呵呵，否则会浪费偶的资源的。 

第二列，有二种属性。分别是禁止与允许，对应于黑色编号4。此列主要用途是，允许执行与此规则匹配的连接请求，还是禁止与此规则匹配的连接请求。 

黑色编号4：红色禁止标志。此标志表示，当某个连接请求或者操作与此规则匹配时，则禁止该连接请求或者操作。如果是灰色圆点标志，则表示此允许此连接请求或者操作。此属性的好处是，可以用来限制某些特定的操作而又不产生全局影响，而当你需要时又可以打开这一特定规则。 

第三列，二种属性。记录或者不记录与该规则匹配的操作信息。 

黑色编号6：单感叹号标志。表示当某个连网请求或者操作与此规则匹配时，则记录些操作的信息，这些信息一定会在日志标签的窗口里显示出来。如果你启用了“选项”标签中的日志文件功能，则这些信息保存在日志文件中，如果没有启用日志文件功能，则不保存。另一灰色圆点标志表示不记录也不保存这些信息。本人建议把LNS的记录功能打开，这样一旦某些软件不能正常上网时，可以在日志中发现并生成规则（后面讲到如何用日志生成适用规则）。 

第四列，二种属性。分别对应黑色编号7、黑色编号8。功能比较简单，但却非常的有用啊。 

黑色编号7：黄色下箭头标志。些标志表示，如果某个操作与此规则匹配时，则直接进行相应的操作（即第一列、第二列、第三列所定义的属性及具体规则内容进行操作），不再继续匹配后续的其它规则，因为LNS匹配规则的顺序是自上而下的（故大家最好不要调整那些LNS默认生成的规则的上下顺序，否则可能什么程序也上不了网）。这种属性产生的操作带来的好处是：不用将所有规则匹配一遍，极大地减少了LNS规则匹配操作所用的时间；其次如果你添加了一条过于宽泛自己不知道有没有漏洞的规则，那么你可以关闭此属性，则当有某个操作与此规则匹配后，后续规则继续对其进行检测，以发现问题。 

黑色编号8：灰色圆点标志。此标志表示匹配完此规则后，再继续匹配后续规则。 

第五列，三种属性。对应于黑色编号9、黑色编号10。作用是当有某操作与此规则匹配时，以什么方式来报警。 

黑色编号9：小喇叭标志。此标志表示某操作与此规则匹配时，以发生声音的方式报警。打开此属性必须同时在“选项”标签中选中“声音”功能。 

黑色编号10：双感叹号标志。此标志表示某操作与此规则匹配时，不但发出声音报警，而且跳出消息框报警。也必须同时打开“选项”标签中的“声音”与“消息框”功能，否则不起作用。 

灰色小圆点标志，表示不需要报警。 
此列的属性建议对系统默认的规则打开，此时能看到一些异常操作，及时采用措施。对于其它的频繁正常操作，如果打开了会不胜其烦的。比如在你为BT设置的规则上设置此属性，消息框会跳满一屏幕，呵呵。 

最后再说一下，如果你取消对图三右下角的“互联网过滤已启用”选中的话，则此规则表中所有规则都相当于不存在，基本上是门户大开啊。切记！
<span id="text3" style="font-size: 12px">3.规则编辑----定义符号你自己需要的规则。 
在LNS里定义规则有两种方法，在“互联网过滤”里“添加”规则是最难的一种；另一种方法是从“日志”标签里进行添加，则简单得多了，后面再讲到。 

图五是规则编辑窗的界面，分为8个区域，按“区”讲吧。分别为“规则名称”、“方向”、“规则说明”、“以太网”、“IP”、“标识”、“来源”、“目标”8个区。


<img style="width: 587px; height: 440px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96962.jpg" if(this.width="">
首先，LNS防火墙在编辑时规则是中性的，也就是说在编辑界面上，我们不能够确定该规则是禁止了某个操作还是允许了某个操作，一旦“确定”后，LNS默认这个规则是允许与之匹配的操作的；如果你编制规则的目的是想禁止某种操作，那么你只要把规则说清楚，“确定”后再点图四所示的第二列的“红色禁止”标志就行了，此时在该规则也会出现一个禁止标志，意思就是禁止那些与此规则匹配的操作。这一点与任何防火墙都不同。 

LNS防火墙的规则的信任关系是基于IP地址+MAC地址的，这是一种理想的信任关系模式。IP地址是可以欺骗的，MAC地址也同样，但IP+MAC的欺骗就困难得多，所以LNS安全性能可想而知。因此在图五中大家会看到“以太网：类型”和“以太网：地址”区域，使设置显得复杂常常令人困惑。其实了解了它的作用就不感到复杂了。

“规则名称”区 
黑色编号1：规则名称，不用多说。 

“方向”区 
黑色编号2：设定此规则的数据方向。你可以定义这条规则只对传入的连接（数据）起作用，或是对传出的生效，或对传入传出都起作用。此设置与“来源”和“目标”区有关联，选中“传入”或者“传出”则“来源”和“目标”内容有变化，此时更直接；但选中“两者”时，“来源”和“目标”区域显得复杂。 

“规则说明”区 
黑色编号3：可以对该规则进行说明，以便记忆或了解。 

“以太网:类型”区 
黑色编号4：可能也是让大家头痛的地方，常常不知道如何设置这个地方。“以太网：类型”其实就是告诉防火墙你的机器是局域网中的机器还是独立的一台机器，或者你理解“以太网：类型”就是要告诉LNS此条规则是适用于网域局中的通讯或者适用于互联网中的通讯。在这里就得多唠叨几句。这个类型里有四种选择，分别是“全部”、“IP”、“ARP”、“其它”，“全部”即指包括“IP、ARP、其它”的全部类型。 
“全部”类型极少用到，除非你的机器处于混合网络（如同时有windows、Linux、Unix、Mac os、VAX、Netware等操作系统的机器）中，可能会同时存在多种不同的局域网协议时。因此不赞成独立PC和单纯局域网选择该类型。 
"IP”类型，网际协议类型，用于把数据包从源地址发往目的地，多数情况下选择这种类型是合适的，尤其你的机器是通过非代理非网关直接上网时至少得（选择“全部”当然可以，但开放了不必要的协议）选择此类型，制定那些与互联网连接相关的规则时必须选择它，当然如果规则是局域相关的也同样可以选择它。 
“ARP”类型，地址解析协议，它的作用是把IP地址解析（转换）为与此IP对应的MAC地址，从而找到该机器，只能用于与局域网相关的规则中，用在与互联网相关的规则中会造成该规则不起作用。除非你是在局域网中使用本机，否则不要生成选中此类型的规则；如果你是在局域网中通过代理或者网关上网，那么LNS默认有一条规则使用的此类型，规则名是“ARP : Authorize all ARP packets”，则必须打开并允许此规则，否则你无法上互联网。 

“IP”区 
黑色编号5：也就是为当前规则指定协议，共有8种类型。最常用的是TCP和UDP，偶一般人用这2个协议足够，其它协议给高手们用。编号右侧的“碎片偏移”和“碎片标志”俺不知道是个啥，所以通常用“全部”没有不良影响，呵呵。如果选择了TCP协议，则右侧的“TCP标志”是可选的；如果选择了ICMP/IGMP，侧“标志”内容也不同。 

“来源”区，我想它后面的一串文字和方向，是造成大家不好理解的重要原因。与其它任何防火墙不同的是：在LNS的这个规则编辑器里，“来源”完全表示本地，“目标”则表示远程，而不管实际的连接请求或者数据包方向，大家在此一定要转变思路。所以，“来源”区所填写的数据都是与本地有关的，比如你要打开或者关闭本机的某个端口、允许或禁止本地的某个IP（当LNS安装在网关或者代理服务器上时有用），都可以把端口、IP地址信息输入在这里，理解了这一点，规则就好编了。 

黑色编号的7、8：用来限定MAC地址的，当编号7选择了“全部”时，后面的不用填任何地址，填了也没用；只有当编号7选择了“等于”或者“不等于”时填MAC地址才有用，而且此时LNS也应该在代理服务器或者网关上才真正有用。它的作用就是限制内网的一个或某些机器的特定操作的，具体是什么特定操作还要看其它设置的配合情况。 

黑色编号9：用来对IP地址进行各种组合和排除的，共10种方法，真是了得！当选择了“全部”时，它下面黑色编号11的地址栏是灰色不能进行输入的，否则要进行输入。但LNS有个BUG，即在此输入的IP地址无法输入3位数，解决方法是先能输入多少输入多少，保存后，用文本工具打开LNS目录的对应的规则文件，按你在此所定义的规则名称，找到你所输入的内容后把IP地址改为3位数保存后，重启LNS就行了，呵呵，这个BUG真不应该。 

黑色编号10：用来定义具体的端口号的，此时建议尽量选择你想要的协议，然后输入端口号。如果不选择协议就输入端口号，则此端口号对所有协议开放，安全性应该会下降。同样黑色编号12有7种方法，以便对端口号进行排除。 

黑色编号13：用来指定程序的。也就是说，当你指定了程序后，该规则只对此程序起作用，当该程序没有启动时，该规则是不执行的，因而也不会影响到其它程序。比如你为BT制定了特殊的<strong>规</strong>规则，那么就可以在这里设置好，当BT启动后该规则也自动加载。有此功能，就既可以定义特殊规则，又不会让此规则影响到全部程序了。 

“目标”区，此区是与“来源”区相对应的，一定要注意，你的本地的信息永远不要出现在这个区，虽然它叫“目标”，但它完全是指远程机器的，那怕你的本地机器被全宇宙的黑客当成“目标”！所以在这个区出现的IP地址、端口号都是批你想要访问或者你不想要访问，再或者你不想让它来访问你的那些远程机器的IP和端口号。我想现在大家知道了“来源”和“目标”的实质，编规则也好办了。那么此区的“以太网：地址”、“IP地址”、“TCP/UDP端口”的设置方法与“来源”区所讲到的完全相同，不用再说了，不同的是它们是指的远程！！！</span> </span></span></p><p><span style="font-size: 12px"><span style="font-size: 12px"><span id="text4" style="font-size: 12px">“规则编辑”看来不讲例子是不行的，下面先讲一个开放特殊端口的例子，以BT为例，见图

<img style="width: 596px; height: 421px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96963.jpg" if(this.width="">
事先说明偶的BT监听的端口是10521，Bt（Emule、Edonkey都是工作原理类似的软件）比较特殊，它与其它下载工具的工作原理不同，偶认为BT是用其它端口发送连接请求等等信息，而用10521端口来专门进行数据包的传输，故10521端口是不主动向外发送信息，因而当其它的远程BT端收到本地BT发出的信息后，便把回应信息向10521端口发送，此时在LNS里便认为这个操作有隐患，故而拦截。那么便需要对LNS进行设置，让它放这种信息一马，这样BT才能正常工作。（随便说一下，多数防火墙基于程序的信任程度更高一些，在此类防火墙里，应用程序所打开的所有端口都是对外开放的，也就是说外部程序可以主动联系该程序打开的所有端口，因而不用进行端口设置。看起来没有在LNS里这么麻烦，但仔细想想，安全性要低一些。就象是在一个正常卖票的窗口旁边有一个本来不是卖票的关着窗口，但当有人去敲了敲，窗口竞然打开了或许还进行了某种交易？！） 
言归正传，下面说如何为BT打开这个被动的端口，通过下述设置偶在BT里每任务最大100个连接，当有80个左右的用户时，下载速度可以轻松达到120KB以上。 

?首先给该规则起个名，定义方向，略加说明，如图六中的1、2、4所示； 
?然后在“以太网：类型”里选择“IP”，等于告诉LNS这是一条通关于数据包往来的规则，如3所示； 

?在黑色编号5的“IP”里选择“TCP或UDP”，告诉LNS这是基于TCP或者UDP协议的数据包的规则（通常在BT里只用TCP协议，但偶在日志中发现它偶有用到UDP，所以也打开了，偶对BT的机制并不熟悉）； 

?在黑色编号7里不用填任何MAC地址，本规则是对本机的，不需要进行MAC地址的排除组合等（但如果LNS安装在网关上，而BT在你的机器上，则可以在MAC地址里填写上你的MAC地址，呵呵，则只有你可以用BT了因为MAC地址在局域网里有唯一性，尤其它你们的局域网是自动分配IP地址的话。）； 

?黑色编号8，IP地址选择“等于本机”就不用手工输入了。同样，如果你的机器在内网，而LNS在网关上，你就可以指定哪些IP可以使用BT而哪些机器不能使用了；比如你的内部机器IP=192.168.2.4，此时可以在“IP地址”里选择“等于”，并把192.168.2.4填写在正文，那么只有这台机器的10521端口可以被外部其它机器连接。大家多试试就可以体会。 

?黑色编号9，选择“等于”，然后填写你的BT监听的端口号。 

?点“应用程序”，如果黑色编号13、14所示，把你的Bt软件添加上，然后一路确定，回到“互联网过滤”界面，保存和应用就可以了（OK，此时打开BT开始下载，看看“日志”里有没有大量的记录，如果没有恭喜了，如果有大量的与端口有关的记录，说明某个地方弄错了，再仔细检查一下该规则）。这样该条规则就是BT专用的了，绝对不影响其它程序。 
同样的道理，如果你是想禁用远程机器与本地/本机的某个端口进行连接，那么只要在图三所示的“第二列”为该规则打上禁止标示就可以了，那么此时与该IP地址或者Mac地址匹配的机器的10521端口就永远无法被其它连接，且该端口也无法向外发送信息了。</span> </span></span></p><p><span style="font-size: 12px"><span style="font-size: 12px"><span id="text5" style="font-size: 12px">上面的例子是控制本地/本机资源的，那么如何限制你本地/本机应用程序对远程机器的访问，将在下面再举一例。见图七。 

<img style="width: 595px; height: 418px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96964.jpg" if(this.width="">
虽然在“应用程序过滤”里已经讲到了如何限制对远程的访问，但它不具有全局性，也就是说“应用程序过滤”里的规则优先级低于“互联网过滤”，LNS先匹配“应用程序过滤”然后再匹配“互联网过滤”，如果在“应用程序过滤”里已经禁止了的，在“互联网过滤”里将继续禁止；如果在“应用程序过滤”里允许了的，那么还得经过“互联网过滤”的审查。在这里编写的规则具有全局性，当然也可以针对某个特定程序。 

讲一个禁止与远程某个端口连接的例子，或者理解为禁止本地与远程某个端口进行通讯，此例子规则的意思为：禁止与12.10.2.20地址的77777端口进行双向联系。编写一条禁止规则通常有二个步骤。 

第一步：远程机器的信息只能设置在图七所示的目标区，黑色编号1选择“IP”类型，编号2选择“TCP”或者其它协议，如果不能确定，填上“TCP或者UDP”也不会有问题。 

在“目标”区域，如果你要禁止具体的某个远程主机，则在“IP地址”里选择“等于”（如果是对所有的远程主机则选择“全部”），然后再下面填写具体IP地址（例子里随便写了个12.10.2.20），“TCP/UDP端口”里填上端口号77777。 

如果这个禁止规则是与某个具体程序对应的，那么点“应用程序”，把具体的程序加入就行了；如果是对本机所有程序的，侧不需要添加任何程序。一路确定，回到“互联网过滤”界面。 

第二步：点击如图三所示的“第二列”（当然位置要与此条规则对应），当出现红色禁止标志时，点击“保存”和“应用”，OK！此时12.10.2.20地址的77777端口不能联系你的机器，你的机器也不能联系12.10.2.20机器的77777端口。当然其它端口是可以双向联系的。 

如果你想写一条禁止本地/本机的具体地址的具体端口与远程的具体地址的具体端口进行连接的规则时，则在“目标”区域填写你的本地/本机的IP和端口信息，而在“目标”区域填写远程机器的IP和端口信息，完成后再在“互联网过滤”界面上打上禁止标志就行了。通常很难存在一条这样的“允许”规则的。</span> </span></span></p><p><span style="font-size: 12px"><span style="font-size: 12px"><span id="text6" style="font-size: 12px">4.日志标签---告诉你当前阻止了哪些连接；允许了哪些连接（如果你也设置了记录的话，LNS默认对阻止的规则进行记录）；可以用来建立特殊规则。如图八所示。
<img style="width: 597px; height: 447px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96965.jpg" if(this.width="">
当你使用了某些软件并允许了它上网但却不能正常使用，此时可以查看“日志标签”，只是此时日志中不显示对应的程序名称，会显示连续的规则名称相同的一些信息。首先你确保这些信息是因为阻止了此类连接而生成的（通过规则名称在“互联网过滤标签”里看此规则前面是否有禁止标志），然后再看在端口号上有没有规律性，当规则名称相同、端口号也有规律性时，就可以用它来生成规则了。 

以例子说明，图八所示为BT在没有打开端口时的日志情况。黑色编号4区显示的是规则名称，几乎完全一样；黑色编号3区是端口；黑色编号2区所示为有一致性的端口号，都为10521（偶的BT监听端口）。从日志可以明显看出，BT的10521端口不允许被外界连接，也就是造成BT下载速度慢的全部原因（虽然已经把BT设置为任凭程序了，但对它的端口还是有限制的。）。

设置方法：在任意一条记录上点鼠标右键，会出现图八黑色编号1所示的菜单，菜单上总共会出现2个选择，你应该用鼠标点在黑色编号3区域中看到的那个频繁出现的端口所在的选择项。如本例中在黑色编号3区域中看到的频繁出现的端口号是10521，则在此菜单上就选择“允许Port10521-服务器”（此外的“服务器”意思是本机被其它机器连接，有点服务器的味道P），选择后会返回到“互联网过滤”标签，此时可以看到LNS已经为你自动增加了一条规则，并为此规则起了一个名称和简单的说明，你可以双击此规则改变规则名称和说明以使你清楚知道此规则的作用。 

回到日志来继续看，如果在某条日志上双击，则出现如图九中红色编号1所示的窗口，在此窗口中可以看到该条日志的详细信息（可惜没有与程序具体对应），有源/目标的IP地址、端口、数据报等详细内容，有经验的用户可以就此进行深入分析，以手工建立规则。在此不详细讲了。 
<img style="width: 596px; height: 447px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_96966.jpg" if(this.width=""></span></span></span></p><p><span style="font-size: 12px"><span style="font-size: 12px;"><span style="font-size: 12px;"><span id="text7" style="font-size: 12px;">5.选项标签-高级设置及其它杂项，如图十所示 


<img style="width: 592px; height: 224px" alt="Click here to open new window" src="http://www.magicwinmail.com/course/looknstop/images/22_97053.jpg" if(this.width="">
这一部分没有什么内容可讲，当鼠标停留在某个选项上时，都会自动跳出提示的。主要说说选择网络接口的操作。 
图中红色编号1区即为选择界面，通常按“自动选择”方式就能很好的工作，如果不能时，请按图十二所示按自己的上网方式进行选择。
<img style="width: 598px; height: 430px" src="http://www.magicwinmail.com/course/looknstop/images/22_97055.jpg" if(this.width="" alt="">
点击红色编号2，则出现如图十一所示的“高级选项”界面，这个也大概说一下。
<img src="http://www.magicwinmail.com/course/looknstop/images/22_97054.jpg" if(this.width="" alt="">
除了黑色编号3所在区域，其它编号区当鼠标指向时都有提示跳出，而且容易理解，不详细讲了，如果以后有时间再补充。重点讲黑色编号4、5、6、7区的。先来看看黑色编号3区的。 

“高级模式”----选中它，则在“应用程序过滤”、“互联网过滤”标签里才有一些高级属性出现。大家视自己的情况决定，不过偶建议打开。 
“原始日志”----选中它，则在日志文件中记录更多的信息，也就是日志文件更加详细，提供更多的基层信息，而且需要用第三方的工具才能打开察看日志文件。一般人没有必要打开，而且偶不建议记录日志文件，一来作用不大，二来记录日志文件的话，会增加CPU使用量。 
“退出时确认”----不用说。 
“TCP全状态包检测”----读为“TCP全状态?包检测”，一种数据包过滤技术，通过对报文的TCP标志进行检测而实现的。建议大家打开此功能；但这个功能默认是记录日志的，不能更改。 
“在此程序退出后保持互联网过滤处于活动状态”----2000以上有用。作用是当退出LNS，互联网过滤规则也在后台运行。偶想不出这个功能的必要性，故不建议大家打开，尤其是新安装LNS还处于调试阶段时更不要打开这个功能。否则可能会造成退出LNS了，上网还不正常。 
“监视DNS呼叫”----2000以上才起作用，用于监视应用程序向DNS服务器发出地址解析请求的。建议打开，但如果打开它LNS经常导致机器蓝屏，请关闭它。另外，在2003下千万不要打开，否则肯定蓝屏。 
“监视线程侵加（恶意代码插入）”----2000以上有用。也就是对付内存数据改写之类操作的，建议打开。 
最后面二条一看就明白，建议选中。 

黑色编号7，当你在图十中选中了网络界面接口的“自动选择”时，这个功能必较有用。它是用来排除那些不用检测的网卡的，比如说，你机器上有2个以上的网卡，其中一个是连接互联网的，其它的是连接不同网段的，那么你就把其它网段的IP输入在这里，以保证LNS能正常检测到你的上网网卡。可以在这里输入多个网段，之间用半角的分号分隔开。 

黑色编号4，点击后出现图十三所示的界面。 
<img src="http://www.magicwinmail.com/course/looknstop/images/22_97089.jpg" if(this.width="" alt="">
黑色编号1为本机现有网络协议以及LNS是否允许此协议，当前哪些协议处于活动状态等信息。不同的操作系统显示的不同，2000以上系统只有NETBT.SYS和TCPIP.SYS二种。这二种协议的属性都是默认，且不可更改。当有其它协议时，比如图中的NPF.sys（网络监视），可以用“拦截”来控制是否允许它，也可以用“移除”删除它而不对该协议进行监控。 

黑色编号2，此区域决定了是否对已经激活的协议进行过滤（控制与该协议相关的网络操作），当选择禁用时不对当前活动的协议进行过滤，如果启用了则进行过滤，以增加安全性。建议打开“启用”。 

当点击图十一中的黑色编号5“插件”时，则出现一个已安装插件的选择窗口，选择了某个插件后就具备相关的扩展功能。这个不多讲了，除了多语言支持插件以外，其它都太高深了，偶们一般也用不到。 

当点击图十一中的黑色编号6“动态链接库”，会出现如图十四所示的动态链接库设置的窗口。此时勾“启用动态链接库检测”则当程序第一次加载一个DLL时LNS会询问允许或禁止，经过一些时间的学习后就不询问了。但当某个DLL的数字签名发生了变化，则LNS会再询问以保证DLL是合法修改，确保系统安全性；当然你也可以手工直接添加那些你认为有必要进行检测的DLL。2000以上系统才有此功能。使用windows2003的兄弟注意了，在2003下不要打开这个功能，否则Crash。这个功能也就是ZA、OP等的“组件功能”，但应该说LNS的这种处理方式更安全一些。</span> </span></span></span></p><p><span style="font-size: 12px;"><span style="font-size: 12px;"><span style="font-size: 12px;"><span id="text8" style="font-size: 12px;">三、特定事件处理 
1.阻止网络执法官控制 

　　网络执法官是利用的ARp欺骗的来达到控制目的的。　　 
　　ARP协议用来解析IP与MAC的对应关系，所以用下列方法可以实现抗拒网络执法官的控制。 
如果你的机器不准备与局域网中的机器通讯，那么可以使用下述方法： 
　　A.在“互联网过滤”里面有一条“ARP : Authorize all ARP packets”规则，在这个规则前面打上禁止标志； 
　　B.但这个规则默认会把网关的信息也禁止了，处理的办法是把网关的MAC地址（通常网关是固定的）放在这条规则的“目标”区，在“以太网：地址”里选择“不等于”，并把网关的MAC地址填写在那时；把自己的MAC地址放在“来源”区，在“以太网：地址”里选择“不等于”。 
　　C.在最后一条“All other packet”里，修改这条规则的“目标”区，在“以太网：地址”里选择“不等于”，MAC地址里填FF:FF:FF:FF:FF:FF；把自己的MAC地址放在“来源”区，在“以太网：地址”里选择“不等于”。其它不改动。 
　　这样网络执法官就无能为力了。此方法适用于不与局域网中其它机器通讯，且网关地址是固定的情况下。 
　　如果你的机器需要与局域网中的机器通讯，仅需要摆脱网络执法官的控制，那么下述方法更简单实用（此方法与防火墙无关）： 
　　进入命令行状态，运行“ARP -s 网关IP 网关MAC”就可以了，想获得网关的MAC，只要Ping一下网关，然后用Arp-a命令查看，就可以得到网关的IP与MAC的对应。此方法应该更具通用性，而且当网关地址可变时也很好操作，重复一次“ARP -s 网关IP网关MAC”就行了。此命令作用是建立静态的ARP解析表。 

2.安装后不能上网 

　　安装LNS后不能上网的问题很是奇怪，可能与个人的具体上网方式关系较大。此时先确保在LNS中的网络接口选择是正确的（参见图十二）。 
　　其次看看LNS的“欢迎”标签里的“已连接”前面有没有勾，并且在“IP地址”里面有没有地址，如果这二项都没有问题，那么请把“互联网过滤”的规则表最后一条规则的“以太网：类型”中的“全部”改为“IP”再试，一般应该可以解决。如果这样做都无法解决上网，请再后面发帖，详细说明上网方式和LNS的设置情况，偶研究一下。^^_ 

3.记不住规则
　　LNS记不住规则的情况是：当你的应用程序安装在一个中文目录中时。所以你重新安装应用程序，不要安装在中文目录下就可以解决。 

4.“已连接”没有选中 

　　“已连接”前面没有出现一个勾，此时并不意味着LnS不正常工作。出现此现象时，说明LNS并不确定网络接口选择的是否正确，特殊的上网方式或者一台机器安装有几块网卡时会出现此现象，而且要注意自己的IP地址是否与“高级选项”中的“网络自动检测时排除的IP”中的地址有冲突。 
　　解决办法是：先排除不是由于“网络自动检测时排除的IP”中包含了本机IP，如果是此情况，请删除“网络自动检测时排除的IP”列表中与自己IP冲突的数值；如果不是此情况，请手工在“网络接口”窗口中选择接口，直到“已连接”前面出现勾，且“IP地址”栏里出现正确的本机IP为止。 

5.关机超慢 

　　关机慢通常是由于没有退出网络连接造成的（通过网关上网的机器应该没有此现象），解决办法是关闭连接（比如断开ADSL连接）后再关机。 

四、LNS的优化 

（一）.应用程序过滤区的优化 

　　对应用程序过滤区的优化可以把程序类型分为操作系统软件和第三方软件。 
　　1.对于操作系统自己的文件，允许连网的数量越少越好，但数量取决于你希望系统提供哪些服务。比如，偶在内网，通过网关代理上网，本机不开任何其它服务，访问局域网中的其它机器的共享文件，那么偶只允许SVChost.exe通过防火墙（虽然SVChost.exe自己不上网，只加载其它程序）。而SVchost.exe想要做什么呢？它调用了其它系统某个网络应用（偶不知道是哪个）去进行域名解析，也就是连接到你的DNS的53端口，这样就可以在LNS里对Svchost.exe的行为进行限定。 
　　方法是： 
　　A.双击“应用程序过滤”列表里的Svchost.exe，在出现的窗口中端口填写53，IP填写你自己所在地的域名解析服务器的IP地址； 
　　B.点SVChost.exe所在行的绿色双箭头标志，让它变为红色的禁止标志； 
　　C.其它所有如Explorer.exe等系统程序都禁止通过。 
　　这样，SVChost.exe所调用的系统文件、包括所调用的其它程序也只能访问这个地址和53号端口；且当系统启动后Svchost.exe也不能再调用并运行其它程序了。好处是让SVChost.exe只访问一个IP的一个端口，即使中了一些利用Svchost.exe调用以运行并且连网的病毒也不怕此病毒下载安装其它东东。 
　　2.第三方应用软件，则尽量根据各软件的特点，设定对应的端口就行了，IP地址不做限制。 
A.邮件客户端软件。则在前面所说的端口里只打开110和25端口就好了，方法是输入“110;25”不包括双引号。这样邮件客户端就只连接远程的这二个端口。 
　　B.FTP客户端软件。则打开FTP端口和高端口，方法是输入“20-24;60000-65000”不包括双引号。有些FTP服务端打开的可能是21、22、23端口；而发数据通常是60000以上的端口。有人可能说：“应用程序过滤”的优先级低于“互联网过滤”的优先级，在这里打开60000以上端口会不会也需要制定一条专门的规则呢（因为BT就得专门开一个端口）？其实不用，FTP的原理与BT不同，BT的监听端口是被动的，而FTP的高端口是主动的。</span> </span></span></span></p></span></p>
]]></content>
    
    <summary type="html">
    
      http://bbs.zol.com.cn/index20060306/index_40_72576.html

&lt;p&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;安装方法： 

双击运行LooknStop_Setup_205p2.exe即可！ 

注意：安装时会弹出一个没有通过 Windows 徽标测试的提示窗口，点击仍然继续即可！ 


汉化方法： 

将汉化补丁文件内的语言文件chinese.lng及语言插件复制到look&#39;n&#39;stop的安装目录下(默认是C:\ProgramFiles\Soft4Ever\looknstop)，然后打开look&#39;n&#39;stop就应该是中文界面了，如果仍是英文界面，可以按下面的步骤操作： 

1) 点击&quot;Options&quot;选项卡的&quot;Advanced Options&quot;按钮； 
2) 点击&quot;Plugins&quot;按钮； 
3) 在&quot;Avilable_plugins&quot;框中打勾&quot;plugin_language.dll&quot;； 
4) 点击&quot;Configure&quot;按钮； 
5) 选中&quot;简体中文&quot;，确定。 

注册方法： 

切换到&quot;注册&quot;选项卡，然后复制&quot;代码&quot;里的注册代码，接着运行&quot;注册机.exe&quot;即可取得序列号！ 

注意： 

1.如果安装look&#39;n&#39;stop后无法上网，可以这样解决：切换到主界面的&quot;互联网过滤&quot;，然后双击最后一条规则&lt;a name=&quot;3&quot;&gt;&lt;/a&gt;&quot;All oter packets&quot;，把以&quot;太网 : 类型&quot;的中的&quot;全部&quot;改为&quot;IP&quot;，保存后应用即可！ 
2.该防火墙功能强大，但设置也非常繁多复杂，因此建议一般用户请谨慎使用！ 

注意：你在使用下述图解时，&lt;span style=&quot;color: rgb(255, 0, 0)&quot;&gt;请一定先打开“选项”—&amp;gt;选中“高级模式”&lt;/span&gt;，切记。 
&lt;/span&gt;&lt;/p&gt;&lt;p&gt;&lt;span style=&quot;font-size: 12px&quot;&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>详解：IP的分类、寻址规则及子网掩码zz</title>
    <link href="http://wdicc.com/about-ip/"/>
    <id>http://wdicc.com/about-ip/</id>
    <published>2006-03-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.edu.cn/20031208/3095629.shtml
<p>　　随着电脑技术的普及和因特网技术的迅猛发展，因特网已作为二十一世纪人类的一种新的生活方式而深入到寻常百姓家。谈到因特网，IP地址就不能不提，因为无论是从学习还是使用因特网的角度来看，IP地址都是一个十分重要的概念，INTERNET的许多服务和特点都是通过IP地址体现出来的。 </p><p>　　<strong>一、IP地址的概念</strong></p><p>　　我们知道因特网是全世界范围内的计算机联为一体而构成的通信网络的总称。联在某个网络上的两台计算机之间在相互通信时，在它们所传送的数据包里都会含有某些附加信息，这些附加信息就是发送数据的计算机的地址和接受数据的计算机的地址。象这样，人们为了通信的方便给每一台计算机都事先分配一个类似我们日常生活中的电话号码一样的标识地址，该标识地址就是我们今天所要介绍的IP地址。根据TCP/IP协议规定，IP地址是由32位二进制数组成，而且在INTERNET范围内是唯一的。例如，某台联在因特网上的计算机的IP地址为： </p><p>　　11010010 01001001 10001100 00000010 </p><p>　　很明显，这些数字对于人来说不太好记忆。人们为了方便记忆，就将组成计算机的IP地址的32位二进制分成四段，每段8位，中间用小数点隔开，然后将每八位二进制转换成十进制数，这样上述计算机的IP地址就变成了：210.73.140.2。</p><br><a id="more"></a><p>　　<strong>二、IP地址的分类</strong></p><p>　　我们说过因特网是把全世界的无数个网络连接起来的一个庞大的网间网，每个网络中的计算机通过其自身的IP地址而被唯一标识的，据此我们也可以设想，在INTERNET上这个庞大的网间网中，每个网络也有自己的标识符。这与我们日常生活中的电话号码很相像，例如有一个电话号码为0515163，这个号码中的前四位表示该电话是属于哪个地区的，后面的数字表示该地区的某个电话号码。与上面的例子类似，我们把计算机的IP地址也分成两部分，分别为网络标识和主机标识。同一个物理网络上的所有主机都用同一个网络标识，网络上的一个主机(包括网络上工作站、服务器和路由器等)都有一个主机标识与其对应?IP地址的4个字节划分为2个部分，一部分用以标明具体的网络段，即网络标识；另一部分用以标明具体的节点，即主机标识，也就是说某个网络中的特定的计算机号码。例如，盐城市信息网络中心的服务器的IP地址为210.73.140.2，对于该IP地址，我们可以把它分成网络标识和主机标识两部分，这样上述的IP地址就可以写成：</p><p>　　网络标识：210.73.140.0</p><p>　　主机标识：　　　　　2</p><p>　　合起来写：210.73.140.2</p><p>　　由于网络中包含的计算机有可能不一样多，有的网络可能含有较多的计算机，也有的网络包含较少的计算机，于是人们按照网络规模的大小，把32位地址信息设成三种定位的划分方式，这三种划分方法分别对应于A类、B类、C类IP地址。</p><p>　　1.A类IP地址</p><p>　　一个A类IP地址是指，在IP地址的四段号码中，第一段号码为网络号码，剩下的三段号码为本地计算机的号码。如果用二进制表示IP地址的话，A类IP地址就由1字节的网络地址和3字节主机地址组成，网络地址的最高位必须是“0”。A类IP地址中网络的标识长度为7位，主机标识的长度为24位，A类网络地址数量较少，可以用于主机数达1600多万台的大型网络。</p><p> &nbsp; &nbsp;&nbsp; <span style="color: rgb(255, 0, 0)">A类网络地址的最高位必须是“0”，也就是说第一位必须是00000000~01111111，换算过来就是0~127(2^7-1)，也就是从0.0.0.0~127.255.255.255，总共128个A类网络。每一个可以包含255x255x255=16581375台主机（其中应该除去127.x.x.x和0.0.0.0类型的ip，127开头的ip被保留用作回路测试，0.0.0.0用于启动后不再使用的主机）。A类网址的掩码最后三位都是0。</span>
</p><p>　　2.B类IP地址</p><p>　　一个B类IP地址是指，在IP地址的四段号码中，前两段号码为网络号码，剩下的两段号码为本地计算机的号码。如果用二进制表示IP地址的话，B类IP地址就由2字节的网络地址和2字节主机地址组成，网络地址的最高位必须是“10”。B类IP地址中网络的标识长度为14位，主机标识的长度为16位，B类网络地址适用于中等规模规模的网络，每个网络所能容纳的计算机数为6万多台。</p><p> &nbsp; &nbsp;&nbsp; <span style="color: rgb(255, 0, 0)">B类网络地址的最高位必须是“10”，也就是说第一位必须是10000000~10111111，换算过来就是128(2^7)~191(2^7+2^6-1)，从128.0.0.0~191.255.255.255，总共64x255=16320个B类网络。每一个可以包含255x255=65025台主机。B类网址的掩码最后两位是0。</span> </p><p>　　3.C类IP地址 </p><p>　　一个C类IP地址是指，在IP地址的四段号码中，前三段号码为网络号码，剩下的一段号码为本地计算机的号码。如果用二进制表示IP地址的话，C类IP地址就由3字节的网络地址和1字节主机地址组成，网络地址的最高位必须是“110”。C类IP地址中网络的标识长度为21位，主机标识的长度为8位，C类网络地址数量较多，适用于小规模的局域网络，每个网络最多只能包含254台计算机。</p><p> &nbsp; &nbsp;&nbsp; <span style="color: rgb(255, 0, 0)">C类网络地址的最高位必须是“110”，也就是说第一位必须是11000000~11011111，换算过来就是192(2^7+2^6)~223(2^7+2^6+2^5-1=128+64+32-1)，从192.0.0.0~223.255.255.255，总共32x255x255=2080800个C类网络。每一个可以包含255台主机。C类网络的掩码最后一位是0。</span> </p><p>　　除了上面三种类型的IP地址外，还有几种特殊类型的IP地址，TCP/IP协议规定，凡IP地址中的第一个字节以“lll0”开始的地址都叫多点广播地址。因此，任何第一个字节大于223小于240的IP地址是多点广播地址；IP地址中的每一个字节都为0的地址(“0.0.0.0”)对应于当前主机；IP地址中的每一个字节都为1的IP地址(“255.255.255.255”)是当前子网的广播地址；IP地址中凡是以“llll0”的地址都留着将来作为特殊用途使用；IP地址中不能以十进制“127”作为开头，127.x.x.x用于回路测试，同时网络ID的第一个6位组也不能全置为“0”，全“0”表示本地网络。 </p><p>　　<strong>三、IP的寻址规则　</strong></p><p>　　1.网络寻址规则 </p><p>　　A、 网络地址必须唯一。 </p><p>　　B、 网络标识不能以数字127开头。在A类地址中，数字127保留给内部回送函数。 </p><p>　　C、 网络标识的第一个字节不能为255。数字255作为广播地址。 </p><p>　　D、 网络标识的第一个字节不能为“0”，“0”表示该地址是本地主机，不能传送。 </p><p>　　2.主机寻址规则 </p><p>　　A、主机标识在同一网络内必须是唯一的。 </p><p>　　B、主机标识的各个位不能都为“1”，如果所有位都为“1”，则该机地址是广播地址，而非主机的地址。 </p><p>　　C、主机标识的各个位不能都为“0”，如果各个位都为“0”，则表示“只有这个网络”，而这个网络上没有任何主机。 </p><p>　　<strong>四、IP子网掩码概述　</strong></p><p>　　1.子网掩码的概念 </p><p>　　子网掩码是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识，并说明该IP地址是在局域网上，还是在远程网上。 </p><p>　　2.确定子网掩码数 </p><p>　　用于子网掩码的位数决定于可能的子网数目和每个子网的主机数目。在定义子网掩码前，必须弄清楚本来使用的子网数和主机数目。 </p><p>　　定义子网掩码的步骤为： </p><p>　　A、确定哪些组地址归我们使用。比如我们申请到的网络号为 “210.73.a.b”，因为c类网络从192~223，所以该网络地址为c类IP地址，网络标识为“210.73”，主机标识为“a.b”。 </p><p>　　B、根据我们现在所需的子网数以及将来可能扩充到的子网数，用宿主机的一些位来定义子网掩码。比如我们现在需要12个子网，将来可能需要16个。用第三个字节的前四位确定子网掩码。前四位都置为“1”，即第三个字节为“11110000”，这个数我们暂且称作新的二进制子网掩码。 </p><p>　　C、把对应初始网络的各个位都置为“1”，即前两个字节都置为“1”，第四个字节都置为“0”，则子网掩码的间断二进制形式为：“11111111.11111111.11110000.00000000” </p><p>　　D、把这个数转化为间断十进制形式为：“255.255.240.0”</p><p> &nbsp; &nbsp;&nbsp; 也可以这么计算，因为是C类网络，所以掩码的最后一位肯定是0，从255往下算16个C类网络，应该到240就够了，所以掩码应该是255.255.240.0。
 </p><p>　　这个数为该网络的子网掩码。 </p><p>　　3.IP掩码的标注 </p><p>　　A、无子网的标注法 </p><p>　　对无子网的IP地址，可写成主机号为0的掩码。如IP地址210.73.140.5，掩码为255.255.255.0，也可以缺省掩码，只写IP地址。 </p><p>　　B、有子网的标注法 </p><p>　　有子网时，一定要二者配对出现。以C类地址为例。 </p><p>　　1.IP地址中的前3个字节表示网络号，后一个字节既表明子网号，又说明主机号，还说明两个IP地址是否属于一个网段。如果属于同一网络区间，这两个地址间的信息交换就不通过路由器。如果不属同一网络区间，也就是子网号不同，两个地址的信息交换就要通过路由器进行。例如：对于IP地址为210.73.140.5的主机来说，其主机标识为00000101，对于IP地址为210.73.140.16的主机来说它的主机标识为00010000，以上两个主机标识的前面三位全是000，说明这两个IP地址在同一个网络区域中。 </p><p>　　2.掩码的功用是说明有子网和有几个子网，但子网数只能表示为一个范围，不能确切讲具体几个子网，掩码不说明具体子网号，有子网的掩码格式(对C类地址):主机标识前几位为子网号，后面不写主机，全写0。 </p><p>　　<strong>五、IP的其他事项　</strong></p><p>　　1.一般国际互联网信息中心在分配IP地址时是按照网络来分配的，因此只有说到网络地址时才能使用A类、B类、C类的说法； </p><p>　　2.在分配网络地址时，网络标识是固定的，而计算机标识是可以在一定范围内变化的，下面是三类网络地址的组成形式： </p><p>　　A类地址：73.0.0.0 </p><p>　　B类地址：160.153.0.0 </p><p>　　C类地址：210.73.140.0 </p><p>　　上述中的每个0均可以在0~255之间进行变化。 </p><p>　　3.因为IP地址的前三位数字已决定了一个IP地址是属于何种类型的网络，所以A类网络地址将无法再分成B类IP地址，B类IP地址也不能再分成C类IP地址。 </p><p>　　4.在谈到某一特定的计算机IP地址时不宜使用A类、B类、C类的说法，但可以说主机地址是属于哪一个A类、B类、C类网络了。 </p><p>　　通过上面的学习，大家对IP地址肯定有了了解。有了IP地址大家就可以发送电子邮件了，并且可以获得Internet网上的其他信息，例如可以获得Internet上的WWW服务、BBS服务、FTP服务等等。</p>
]]></content>
    
    <summary type="html">
    
      http://www.edu.cn/20031208/3095629.shtml
&lt;p&gt;　　随着电脑技术的普及和因特网技术的迅猛发展，因特网已作为二十一世纪人类的一种新的生活方式而深入到寻常百姓家。谈到因特网，IP地址就不能不提，因为无论是从学习还是使用因特网的角度来看，IP地址都是一个十分重要的概念，INTERNET的许多服务和特点都是通过IP地址体现出来的。 &lt;/p&gt;&lt;p&gt;　　&lt;strong&gt;一、IP地址的概念&lt;/strong&gt;&lt;/p&gt;&lt;p&gt;　　我们知道因特网是全世界范围内的计算机联为一体而构成的通信网络的总称。联在某个网络上的两台计算机之间在相互通信时，在它们所传送的数据包里都会含有某些附加信息，这些附加信息就是发送数据的计算机的地址和接受数据的计算机的地址。象这样，人们为了通信的方便给每一台计算机都事先分配一个类似我们日常生活中的电话号码一样的标识地址，该标识地址就是我们今天所要介绍的IP地址。根据TCP/IP协议规定，IP地址是由32位二进制数组成，而且在INTERNET范围内是唯一的。例如，某台联在因特网上的计算机的IP地址为： &lt;/p&gt;&lt;p&gt;　　11010010 01001001 10001100 00000010 &lt;/p&gt;&lt;p&gt;　　很明显，这些数字对于人来说不太好记忆。人们为了方便记忆，就将组成计算机的IP地址的32位二进制分成四段，每段8位，中间用小数点隔开，然后将每八位二进制转换成十进制数，这样上述计算机的IP地址就变成了：210.73.140.2。&lt;/p&gt;&lt;br&gt;
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>测试一下</title>
    <link href="http://wdicc.com/a-test/"/>
    <id>http://wdicc.com/a-test/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在xh这里蹭了一块地方，哈哈哈，不知道能蹭多久。先测试一下有没有问题。yahoo的dns修改了2天才生效，这个郁闷啊。
]]></content>
    
    <summary type="html">
    
      在xh这里蹭了一块地方，哈哈哈，不知道能蹭多久。先测试一下有没有问题。yahoo的dns修改了2天才生效，这个郁闷啊。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>WSUS,Microsoft Windows Server Update Services</title>
    <link href="http://wdicc.com/WSUSMicrosoft-Windows-Server-Update-Services/"/>
    <id>http://wdicc.com/WSUSMicrosoft-Windows-Server-Update-Services/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.winsvr.org/info/info.php?sessid=&infoid=12

<strong>1 什么是wsus</strong>

WSUS（Microsoft Windows Server Update Services）是微软推出的免费的Windows更新管理服务，目前最新版本为2.0.0.2472，除了支持Windows系统（Windows 2000全系列、Windows XP全系列和Windows server 2003全系列）的更新管理外，还可以支持SQL Server、Exchange 2000/2003、Office XP/2003等系统的更新管理，并且在以后，WSUS将实现微软全系列产品的更新管理。

<strong>2 为什么要用wsus</strong>

在小规模的企业网络中，客户端计算机通过自动更新连接Microsoft Update来进行系统更新并不会对企业的外部网络带宽造成太大的影响，例如有5台客户端计算机每台下载20M的更新程序，那么总占用的企业外部网络流量只是100M；但是在中大规模的企业网络中，如果每台客户端计算机都通过连接到Microsoft Update来实现更新，则会极大的影响企业的外部网络带宽，例如有500台客户端计算机每台下载20M的更新程序，就会占用10G的流量。更新变成了下面的流程“Microsoft Update->本地企业网络中的WSUS服务器->客户端计算机”。

<br><a id="more"></a><strong>3 wsus需要的配置</strong>

wsus服务器通过80和443端口从Mircosoft update获取更新，WSUS服务器到以下Web站点的HTTP/HTTPS获取更新。

http://windowsupdate.microsoft.com 
http://*.windowsupdate.microsoft.com 
https://*.windowsupdate.microsoft.com 
http://*.update.microsoft.com 
https://*.update.microsoft.com 
http://*.windowsupdate.com 
http://download.windowsupdate.com 
http://download.microsoft.com 
http://*.download.windowsupdate.com 
http://wustat.windows.com 
http://ntservicepack.microsoft.com 

WSUS与IIS服务器结合创建Web站点来实现更新程序的分发，可以配置WSUS Web站点共享使用默认Web站点（服务端口为TCP 80）或者使用其他的端口为客户端计算机提供服务。在安装WSUS服务器时，如果不选择使用默认的Web站点，那么WSUS将创建自定义的Web站点并在TCP端口8530侦听HTTP连接请求，建议使用默认的Web站点。 

<strong>4 wsus客户端的配置</strong>

WSUS服务器要求客户端计算机上运行WSUS客户端，WSUS客户端可以在打过SP3及以上补丁的Windows 2000全系列产品、Windows XP全系列产品、Windows server 2003全系列产品上运行，换言之，WSUS服务器支持运行这些操作系统的客户端计算机从其获得更新程序。其中Windows XP SP2以及Windows server 2003 SP1已经内建了WSUS客户端；而其他的操作系统中除了没有安装过任何SP的Windows XP外，内建的自动更新组件均具有自我更新特性，可以通过WSUS提供的自我更新程序包自动更新至WSUS客户端；对于没有安装过任何SP的Windows XP，你必须安装SUS客户端，从而通过SUS客户端来实现自我更新至WSUS客户端。 

由于客户端计算机的自动更新组件只能通过服务端口TCP 80来实现自我更新，因此，如果你在安装WSUS时不使用默认的Web站点而自定义一个Web站点，你也必须在侦听TCP 80端口的Web站点中创建一个名为Selfupdate的虚拟目录来为客户端计算机提供自我更新程序包，否则非WSUS客户端计算机不能正常的进行自我更新，从而不能从WSUS服务器获取更新程序。 

<strong>5 链式WSUS服务器环境</strong>

WSUS服务器不仅仅可以从Windows Update中获取更新程序，也可以从其他WSUS服务器中获取更新程序。所以大规模的企业可以配置多台wsus服务器，形成链式WSUS服务器环境。

<strong>6 wsus的工作模式</strong>

wsus服务器支持两种工作模式：集中管理和分布管理。

集中管理模式的WSUS服务器采用独立管理服务器和复制服务器这两种角色，它的含义是单个服务器（主服务器）作为独立管理服务器，而一个或多个从属服务器（复制服务器）只是复制主服务器上的数据。

分布管理模式只允许你配置每台WSUS服务器为独立管理服务器。

<strong>7 wsus使用的数据库</strong>

WSUS数据库存储以下信息：WSUS服务器配置信息；用于描述更新程序作用的元数据；客户端计算机、更新程序信息以及客户端计算机所进行的更新情况。每个WSUS服务器需要自己的数据库，如果具有多个WSUS服务器，必须具有多个WSUS数据库。

<strong>8 更新存储位置</strong>

更新可以分为两个部分：元数据和更新文件。元数据存储在wsus数据库中，而更新文件可以存储在Microsoft update服务器上，或者存储在本地wsus服务器。第一种方式wsus部署更新之后，客户端从Microsoft update服务器上面获取更新，这样可以节省本地服务器的空间，但是客户端较多的时候，更新时会占用大量带宽。第二种方式为默认选项，wsus下载更新后存储在本地，客户端更新时从wsus服务器下载。

<strong>9 性能相关的设置</strong>

wsus允许设置为只有在批准更新时才下载更新文件，还可以对更新做过滤，只下载需要的更新。还有一个快速更新的设置，设置之后占用的外部带宽会增加，而内部带宽会减少。
]]></content>
    
    <summary type="html">
    
      http://www.winsvr.org/info/info.php?sessid=&amp;infoid=12

&lt;strong&gt;1 什么是wsus&lt;/strong&gt;

WSUS（Microsoft Windows Server Update Services）是微软推出的免费的Windows更新管理服务，目前最新版本为2.0.0.2472，除了支持Windows系统（Windows 2000全系列、Windows XP全系列和Windows server 2003全系列）的更新管理外，还可以支持SQL Server、Exchange 2000/2003、Office XP/2003等系统的更新管理，并且在以后，WSUS将实现微软全系列产品的更新管理。

&lt;strong&gt;2 为什么要用wsus&lt;/strong&gt;

在小规模的企业网络中，客户端计算机通过自动更新连接Microsoft Update来进行系统更新并不会对企业的外部网络带宽造成太大的影响，例如有5台客户端计算机每台下载20M的更新程序，那么总占用的企业外部网络流量只是100M；但是在中大规模的企业网络中，如果每台客户端计算机都通过连接到Microsoft Update来实现更新，则会极大的影响企业的外部网络带宽，例如有500台客户端计算机每台下载20M的更新程序，就会占用10G的流量。更新变成了下面的流程“Microsoft Update-&gt;本地企业网络中的WSUS服务器-&gt;客户端计算机”。

&lt;br&gt;
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>flickr,免费相册</title>
    <link href="http://wdicc.com/flickr-free-photo-album/"/>
    <id>http://wdicc.com/flickr-free-photo-album/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[其实很早就知道flickr了，不过是发现那上面的图片似乎只能看小图，不能看大图，那多郁闷。刚才又去看了一下，发现可以看大图了，哇哇。。。这个真不错，推荐大家使用。

比较详细的使用说明
<a href="http://www.mugou.com/user3/13903/archives/2006/8374.shtml" target="_blank" rel="external">http://www.mugou.com/user3/13903/archives/2006/8374.shtml</a>
]]></content>
    
    <summary type="html">
    
      其实很早就知道flickr了，不过是发现那上面的图片似乎只能看小图，不能看大图，那多郁闷。刚才又去看了一下，发现可以看大图了，哇哇。。。这个真不错，推荐大家使用。

比较详细的使用说明
&lt;a href=&quot;http://www.mugou.com/user3/13903/archi
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>L3 switch</title>
    <link href="http://wdicc.com/L3-switch/"/>
    <id>http://wdicc.com/L3-switch/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://vbb3.twftp.org/archive/index.php/t-4016.html

一般常用的交換器 Switch 是屬於第二層交換器 Layer 2 Switch，這種交換器是利用 OSI 第二層 MAC 位址的資訊來進行資料交換，它可以記憶學習第一個 Port 連接的 MAC 位址，透過 MAC 位址及封包目的的位址的辨別，L2 Switch 會將該封包直接傳送至連接目的地的 Port，而不會將該封包傳送到其他的 Port。若並無此目的地 IP 的資訊時，則 L2 Switch 會廣播至所有的連接埠上，待目的 IP 回應時，將新的連接埠對應學習起來，那麼下次就不用廣播而直接傳送。

如果再把路由表的功能加入 L2 Switch，那麼它就會變成 L3 Switch，可以為 VLAN 建立適當的路由表，讓效能更加提昇。L3 的交換器又稱為 IP Switch 或 Switch Router，透過專屬的 ASIC 晶片來解析第三層表頭（如 IP Header）以達到傳送目的，因此通常可以提高到每秒百萬封包的效能以及數十個高速乙太網路連接埠之容量。L3 Switch 的路由表可以對 VLAN 做更有效的管制，讓廣播封包不會無限制的傳送。
http://140.111.152.100/archives/2004_09.html
]]></content>
    
    <summary type="html">
    
      http://vbb3.twftp.org/archive/index.php/t-4016.html

一般常用的交換器 Switch 是屬於第二層交換器 Layer 2 Switch，這種交換器是利用 OSI 第二層 MAC 位址的資訊來進行資料交換，它可以記憶學習第一個 P
    
    </summary>
    
    
      <category term="Windows" scheme="http://wdicc.com/tags/Windows/"/>
    
  </entry>
  
  <entry>
    <title>tt 1.0.1中CODE</title>
    <link href="http://wdicc.com/code-in-tt/"/>
    <id>http://wdicc.com/code-in-tt/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[借鉴的是tt 0.9.6中的方法。

修改blog目录下的

category/index.php
archive/index.php,item.php
entry/index.php
search/index.php
tag/index.php
keylog/index.php
notice/index.php,item.php
index.php
item.php

文件，找到function bindTags($id,$content)这个函数，其实所有包含这个函数的都需要做如下修改，不知道为啥不单独将这个函数写到一个文件，修改起来好麻烦。

在这个函数的第一行前面添
]]></content>
    
    <summary type="html">
    
      借鉴的是tt 0.9.6中的方法。

修改blog目录下的

category/index.php
archive/index.php,item.php
entry/index.php
search/index.php
tag/index.php
keylog/index.php
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>LDAP,Lightweight Directory Access Protocol</title>
    <link href="http://wdicc.com/LDAPLightweight-Directory-Access-Protocol/"/>
    <id>http://wdicc.com/LDAPLightweight-Directory-Access-Protocol/</id>
    <published>2006-03-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<strong>1 什么是LDAP</strong>

LDAP的英文全称是Lightweight Directory Access Protocol，一般都简称为LDAP。

LDAP目录中可以存储各种类型的数据：电子邮件地址、邮件路由信息、人力资源数据、公用密匙、联系人列表，等等。通过把LDAP目录作为系统集成中的一个重要环节，可以简化员工在企业内部查询信息的步骤，甚至连主要的数据源都可以放在任何地方。

<br><a id="more"></a><strong>2 LDAP目录的优势</strong>

使用Win下面的IIS＋acess（or sql server），或者Linux下面的Apache＋mysql（or oracle）之类的后台，这种数据库也可以针对某个用户对数据库、表等作一些权限设置，最低只能到表一级，不能控制到记录一级。并且使用数据库需要不停的对数据类型做验证等，也会导致系统的整体性能一定程度的降低。

目录主要面向数据的查询服务，查询操作比修改操作多很多时，适宜使用目录服务。LDAP协议是跨平台的一个
]]></content>
    
    <summary type="html">
    
      &lt;strong&gt;1 什么是LDAP&lt;/strong&gt;

LDAP的英文全称是Lightweight Directory Access Protocol，一般都简称为LDAP。

LDAP目录中可以存储各种类型的数据：电子邮件地址、邮件路由信息、人力资源数据、公用密匙、联系人列表，等等。通过把LDAP目录作为系统集成中的一个重要环节，可以简化员工在企业内部查询信息的步骤，甚至连主要的数据源都可以放在任何地方。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>可能是最后一场雪了吧</title>
    <link href="http://wdicc.com/may-be-last-snow/"/>
    <id>http://wdicc.com/may-be-last-snow/</id>
    <published>2006-02-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[早上起来，看见外面白茫茫的，以为是下大雾呢，出门才发现，原来地上也是白茫茫一片。阴了好几天了，总算下来雪了。上了公车，看到路边的汽车不管是黑色的红色的，隔着有水汽的车窗往外看，都是白色的了，呵呵。


[##_Gallery|1290633992.jpg||1031278377.jpg||width="449" height="339"|_##]
顺便测试一下tt1.0的新功能。
]]></content>
    
    <summary type="html">
    
      早上起来，看见外面白茫茫的，以为是下大雾呢，出门才发现，原来地上也是白茫茫一片。阴了好几天了，总算下来雪了。上了公车，看到路边的汽车不管是黑色的红色的，隔着有水汽的车窗往外看，都是白色的了，呵呵。


[##_Gallery|1290633992.jpg||1031278377.
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>刷子有自留地了</title>
    <link href="http://wdicc.com/website-for-skaters/"/>
    <id>http://wdicc.com/website-for-skaters/</id>
    <published>2006-02-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[自从花园限制ip之后，刚好也赶上了冬天，不适和活动，所以一直没有和组织联系了。这下好了，<a href="http://grisword.com/bbs/index.php" target="_blank">自留地</a>开通了。欢迎刷刷爱好者来加入。 

另外，也得考虑要搞搞活动了，春游或者刷刷。嗯。
]]></content>
    
    <summary type="html">
    
      自从花园限制ip之后，刚好也赶上了冬天，不适和活动，所以一直没有和组织联系了。这下好了，&lt;a href=&quot;http://grisword.com/bbs/index.php&quot; target=&quot;_blank&quot;&gt;自留地&lt;/a&gt;开通了。欢迎刷刷爱好者来加入。 

另外，也得考虑要搞搞活
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>我结婚了</title>
    <link href="http://wdicc.com/get-married/"/>
    <id>http://wdicc.com/get-married/</id>
    <published>2006-02-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[2006.2.14是我的结婚0周年纪念日。

去年就计划着情人节去领证，这下子，成事实了，呵呵。从登记处出来后，实在是按耐不住心头的兴奋，不过不善言辞的我也没有把内心的这种激动表现出来，而是和老婆开玩笑的说："这下子你完蛋了，以后都跑不掉了，哈哈哈"，老婆郁闷的冲我哼了几声，呵呵。

那天登记的人特别多，前一天xh还建议我们早点去的，紧赶慢赶结果到了那里已经快11点了都。排了一个号，351，也就是说，前面还有300多对比我们到的早.....后来有一个9电多来的人告诉我们，他们的号也是300左右，这样我们心里还平衡一点了，不知道领1号的那个人是什么时候到的。

在那里呆了一会，出去逛了一会，再去看一会，得出来一个小时只能弄50对的结论，算一下，我们最早也要下午5点才能领上了。在双安和双安对面的一个胡同里面的小店逛了好几圈，等啊等，等的我都困了。

不过还好，在那个胡同里面发现一个卖埃及银饰的小店，进去订做了两个戒指，上面刻的都是古埃及的象形文字，说是象形，其实不对着那个表铁定认不出来。

领证的人里面有一个mm特别胖，而那个gg长的体型还算可以吧，身高也够，我和老婆合计这个gg八成是被逼的，呵呵。其中还有一个30、40岁的一对，好像有一方还领着一个小孩，小孩长的还不错，呵呵。一对一对领完证一般都是一人拿一个证，边走边看。我和老婆领完了，我拿着两个证出来了，老婆也不找我要一个，不知道是不是怕看到那么多人羞的不行。

领证之前就讨论了一个问题，以后管她妈叫啥啊？这个问题还得问问xh怎么处理的。

这几天老婆说我变得不如以前对她好了，呵呵。其实怎么可能，现在是名副其实的老婆了，只会对你更好，怎么会不如以前呢？新年的工作压力比较大，结婚之后更加有了压力，所以也要体谅一下我，我会努力让老婆过上幸福日子的。

今天早上坐车的时候，问老婆我们什么时候办婚宴啊，老婆掐指头算了算，说2010年吧。。。。
]]></content>
    
    <summary type="html">
    
      2006.2.14是我的结婚0周年纪念日。

去年就计划着情人节去领证，这下子，成事实了，呵呵。从登记处出来后，实在是按耐不住心头的兴奋，不过不善言辞的我也没有把内心的这种激动表现出来，而是和老婆开玩笑的说：&quot;这下子你完蛋了，以后都跑不掉了，哈哈哈&quot;，老婆郁闷的冲我哼了几声，呵呵
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
      <category term="结婚" scheme="http://wdicc.com/tags/%E7%BB%93%E5%A9%9A/"/>
    
  </entry>
  
  <entry>
    <title>短信zz</title>
    <link href="http://wdicc.com/a-joke-5/"/>
    <id>http://wdicc.com/a-joke-5/</id>
    <published>2006-01-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[夜，夫于床看书，不时伸手摸妻两腿之处，妻脱衣撒娇曰：做否？夫摇头言：不做，湿湿手，好翻书。谨以此寓言致吾兄弟，望勉励苦读，不要沉迷女色中。
]]></content>
    
    <summary type="html">
    
      夜，夫于床看书，不时伸手摸妻两腿之处，妻脱衣撒娇曰：做否？夫摇头言：不做，湿湿手，好翻书。谨以此寓言致吾兄弟，望勉励苦读，不要沉迷女色中。

    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>学妹，你那里有CD吗? (from ptt)</title>
    <link href="http://wdicc.com/a-joke-4/"/>
    <id>http://wdicc.com/a-joke-4/</id>
    <published>2006-01-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[今天上MSN的时候，本来要问学妹说有没有CD....

结果只打了∶"学妹有C"就不小心按到Enter送了出去......XD

学妹∶"讨厌，我不只吧？"

<br><a id="more"></a>我一时慌乱，即时补上∶"D吗?"





















学妹∶"嗯，差不多！"

真强者学妹....XD
]]></content>
    
    <summary type="html">
    
      今天上MSN的时候，本来要问学妹说有没有CD....

结果只打了∶&quot;学妹有C&quot;就不小心按到Enter送了出去......XD

学妹∶&quot;讨厌，我不只吧？&quot;

&lt;br&gt;
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>Qmail的主要配置文件</title>
    <link href="http://wdicc.com/qmail-conf-file/"/>
    <id>http://wdicc.com/qmail-conf-file/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1．Qmail的主要配置文件

    qmail的配置文件是由多个文件组成的，不是集中在一个文件中，每个文件控制相应
部分的功能和属性，一个可执行程序可能有多个配置文件控制，所有的配置文件共同决
定了qmail运行的实现和模式。这些配置文件都在qmail的control目录中，本文的配置文
件位于/var/qmail/control目录中

    1.1、badmailfrom

    这个配置文件是控制邮件系统拒绝接收的邮件地址和邮件域，主要是为了防止垃圾
邮件。如果一个邮件地址或者邮件域被列入到这个文件中，系统就会拒绝接收这个邮件
地址发来的邮件，或者拒绝邮件域下所有邮件地址发来的邮件。不过这个配置文件只是
一般的垃圾邮件防范手段，对于比较全面的垃圾邮件过滤技术还要靠第三方软件来实现
。该文件的格式如下：

    11@11.com //拒绝这个地址发来的邮件
    22@2w.com
    @33.com //拒绝这个邮件域下的所有帐号发来的邮件
    @44.com
<br><a id="more"></a>1.2、boucefrom

    bouceform是定义当邮件投递失败时系统返回给发送者一个包含失败信息的邮件时的
发送者。如果不存在这个文件，默认的发送者是MAILER-DAEMON。比如本文的

    echo postmaster > /var/qmail/control/bouncefrom

    就是定义投递者为postmaster，这样所有投递失败的返回邮件的发送者就成了postm
aster。

    1.3、concurrencylocal

     这个文件定义了qmail可以同时投递的本地邮件的个数。这个参数的缺省值是10，
也就是说系统允许同时有10个邮件在本地投递。concurrencylocal这个参数的最大值是
由编译时的conf-spawn参数来决定的，缺省值是120，最大值是255。

    1.4、concurrencyremote

    这个参数定义了qmail可以同时投递的远端邮件的个数，这个参数的缺省值是20。这
个参数的最大值也是由conf-spawn来决定的。

    1.5、defaultdomain

    它主要用于邮件用户在投递给同一邮件服务器的邮件用户时的邮件投递处理，比如
邮件服务器cnunix.com.cn用户user发送邮件给另一个邮件用户user1@cnunix，这实qmai
l-inject会将defaultdomain中定义的邮件域名加入到这个邮件的目标地址中，qmail会
自动认为这个邮件的目标地址是user1@cnunix.com.cn，并按照这个地址进行投递。当这
个文件不存在的时候，qmail会从配置文件me中读取这个参数。如果系统变量DEFAULTDOM
AIN已经设置，defaultdomain定义的参数将被忽略。

    1.6、defaulthost

    它和defaultdomain类似，当邮件系统接收到没有目标主机名的邮件时，这个设置文
件定义了系统往这个邮件中加入的目标主机名名称。在缺省情况下，qmail-inject会将d
efaulthost中定义的名称加入到没有定义投递邮件地址的邮件的目标主机名中，如果def
aulthost不存在，加入的目标主机名将时字符串“defaulthost”，defaulthost主要用
于邮件用户在投递给同一邮件服务器的邮件进行投递处理。如果系统变量QMAILDEFAULTH
OST已经设置，defaulthost定义的参数将被忽略。

    1.7、databyes

    它定义了qmail-smtpd所允许接收的邮件的最大字节数。这个参数的缺省值为0，表
示对接收邮件的字节数没有限制。如果要限制最大的接收为10M，操作如下：

    echo 10485760 > /var/qmail/control/databytes

    这是任何大于10M的邮件都会被拒绝。这个参数最好设置上，以避免恶意的对你服务
器发送大量的超大邮件，产生邮件服务器负荷过大，甚至系统崩溃的危险。

    1.8、doublebouncehost

    这个配置文件定义了出现“双重反弹”的时候，系统转发的邮件的主机名称。“双
重反弹”就是当系统因为投递失败将邮件返回给发送者时，发送者又将此邮件返回，这
个时候qmail将会把这个邮件转发到另一个邮件地址，一般这个地址就是管理员的地址。
doublebouncehost就是定义这个转发的邮件地址的主机名部分，而这个邮件地址的用户
名部分是由doublebouceto来定义的，因此这两个配置文件一般都是结合起来使用的。当
doublebouncehost不存在的时候，系统将会从配置文件me中读取这个参数。

    1.9、doublebounceto

    这个参说是结合blebouncehost来使用的，当这个参数不存在的时候，系统缺省值是
postmaster用户。

    1.10、helohost

    这个配置文件定义了当程序qmail-remote和远程邮件系统建立连接时所使用的主机
名。如果这个配置文件不存在，系统将会从配置文件me中读取这个参数值，如果me不存
在，qmail-remote将不能正常运行工作。

    1.11、locals

    这个配置文件是定义本地邮件域的，在qmail-send处理邮件投递时，将会使用local
s定义的值和邮件的目标地址进行比较，如果相同，系统就会将这个邮件投递到本地交给
qmail-lspawn来处理。如果一个邮件的目标主机名在locals找不到，系统将会把这个邮
件投递到远端邮件服务器系统，即使这个邮件的目标地址可能是本地邮件系统的。如果l
ocals不存在，系统将会从配置文件me中读取这个参数，如果me不存在，qmail-send将不
能正常运行。

    1.12、me

    这个配置文件是qmail系统十分重要的一个文件，如果这个文件不存在，qmail系统
将无法运行。me是用来定义本地邮件服务器的主机名的，上面已经介绍到了，有多个配
置文件是和me有关联的，如果那些配置文件不存在系统默认会从me中读取参数值的。me
这个配置文件一般都是在qmail系统安装时使用configure-fast来创建的，在上面qmail
系统安装的时候已经使用过了这个参数。

    1.13、queuelifetime

    这个配置文件是定义一个邮件在邮件队列中存活的时间，缺省值为7天(604800s)，
这个期限掉了以后qmail-send将会进行最后一次的投递尝试，如果投递失败，该邮件将
会从邮件队列中删除。

    1.14、rcphosts

     这个配置文件也是qmail一个十分重要的文件，这个文件是定义系统允许转发邮件
的邮件域，如果这个文件不存在或者为空，你的系统将会接收Internet上所有的域的邮
件转发，即你的系统是Open relay。配置文件rcpthosts最多可以支持50个主机名和域名
，如果超个这个数字，就需要保存到他的扩充配置文件morercphosts中，然后使用qmail
的命令程序qmail-newmrh(在本系统中，该文件在/var/qmail/bin目录下)来生成二进制
的morercpthosts.cdb文件，这样qmail-smtpd才可以从这个二进制文件中读取信息。

    1.15、virtualdomains

    这也是qmail的一个非常重要的配置文件，它定义了qmail的虚拟邮件域，qmail结合
vpopmail的虚拟域管理功能可以定义多个虚拟邮件域。

    1.16、smtproutes

    这个配置文件是定义qmail邮件系统的静态SMTP路由表信息的，他的格式应该是：

     HOST: targetHOST    //HOST可以是主机名或者域名。这行所表示的是意思是将所
有目标是HOST的邮件转发到targetHOST邮件服务器中，这个是最常规的表示方式。

      下面给一些例子和一些特殊的表示方法：

       cnunix.com.cn:cnunix.com   //这行表示的意思是将所有发往cnunix.com.cn的
邮件全部转发到cnunix.com这个邮件服务器。qmail不会在cnunix.com.cn邮件服务器中
投递时查询DNS中的MX记录，直接投递到cnunix.com邮件服务器中，加快了投递的速度。


     .cnunix.net:     //这行表示强迫qmail对DNS的MX记录进行查询，因为没有定义
转发的主机名，qmail将在DNS中查询任何以.cnunix.net结尾的邮件服务器

     :mail.cnunix.com.cn:2525    //这行定义表示所有发往该机器的所有邮件都将会
转发到mail.cnunix.com.cn这个邮件服务器，并且转发到对方的2525端口，这个方式一
般都是做邮件网关时用的到的。

    注意：smtproutes如果设置不正确或者DNS的变动会产生邮件的循环投递。

    1.17、timeoutconnect

    这个配置文件定义了qmail-remote在和远端SMTP服务器在SMTP连接断开以前接受一
个新的连接等待的最大时间(单位为秒s),默认值为一分钟(60s)。如果你的网络连接速率
比较低，就需要相应的调整这个参数到一个适合的值。

    1.18、timeoutremote

    这个配置文件定义了qmail-remote等待远端的SMTP服务器相应时等待的最大时间，
默认值为20分钟(1200s),如果到达这个最大值没有相应，qmail才和对方断开连接并且把
失败的记录写到qmail的日志中。

    1.19、smtpgreeting

     这个配置文件定义了用户在登录SMTP服务时显示的系统欢迎信息。修改这个信息可
以掩盖一些你的系统的本身的信息，可以相对的迷惑一下登录者:)
]]></content>
    
    <summary type="html">
    
      1．Qmail的主要配置文件

    qmail的配置文件是由多个文件组成的，不是集中在一个文件中，每个文件控制相应
部分的功能和属性，一个可执行程序可能有多个配置文件控制，所有的配置文件共同决
定了qmail运行的实现和模式。这些配置文件都在qmail的control目录中，本文的配置文
件位于/var/qmail/control目录中

    1.1、badmailfrom

    这个配置文件是控制邮件系统拒绝接收的邮件地址和邮件域，主要是为了防止垃圾
邮件。如果一个邮件地址或者邮件域被列入到这个文件中，系统就会拒绝接收这个邮件
地址发来的邮件，或者拒绝邮件域下所有邮件地址发来的邮件。不过这个配置文件只是
一般的垃圾邮件防范手段，对于比较全面的垃圾邮件过滤技术还要靠第三方软件来实现
。该文件的格式如下：

    11@11.com //拒绝这个地址发来的邮件
    22@2w.com
    @33.com //拒绝这个邮件域下的所有帐号发来的邮件
    @44.com
&lt;br&gt;
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>proftpd limit段</title>
    <link href="http://wdicc.com/proftpd-limit-conf/"/>
    <id>http://wdicc.com/proftpd-limit-conf/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[写命令 APPE DELE MKD RMD RNTO STOR XMKD XRMD
读命令 RETR SITE SIZE STAT
列表命令 CDUP CWD LIST MDTM NLST PWD RNFR XCUP XCWD XPWD
]]></content>
    
    <summary type="html">
    
      写命令 APPE DELE MKD RMD RNTO STOR XMKD XRMD
读命令 RETR SITE SIZE STAT
列表命令 CDUP CWD LIST MDTM NLST PWD RNFR XCUP XCWD XPWD

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>proftpd 配置</title>
    <link href="http://wdicc.com/proftpd-conf/"/>
    <id>http://wdicc.com/proftpd-conf/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[www.proftpd.org

ServerName                      "Caph ftp server..."
ServerType                      standalone
DefaultServer                   on
Port                            21
Umask                           002
MaxInstances                    30
User                            ftp
Group                           ftp

DisplayLogin .welcome.msg
DeferWelcome on
ServerIdent Off
UseReverseDNS off
IdentLookups off
MaxLoginAttempts 3
MaxClientsPerHost 2
MaxClients 20
MaxInstances 100
ListOptions ""

DirFakeUser On ftp
DirFakeGroup On ftp
DeferWelcome On
LogFormat awstats "%t   %h  %u  %m  %f  %s  %b"
ExtendedLog /var/log/xferlog read,write awstats
TransferLog none
SystemLog /var/log/proftpd.log
ServerIdent off
WtmpLog off

DefaultRoot ~ ftp
<limit> Order allow,deny
DenyGroup !ftp </limit><directory>
AllowOverwrite                on
AllowStoreRestart             on
#  AllowForeignAddress             on
<limit>
DenyUser ftp
</limit>
<limit>
AllowUser it
</limit>
</directory>

<directory>
<limit>
AllowUser ftp
</limit>
</directory>
]]></content>
    
    <summary type="html">
    
      www.proftpd.org

ServerName                      &quot;Caph ftp server...&quot;
ServerType                      standalone
DefaultServer              
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
      <category term="proftpd" scheme="http://wdicc.com/tags/proftpd/"/>
    
  </entry>
  
  <entry>
    <title>igenus</title>
    <link href="http://wdicc.com/igenus/"/>
    <id>http://wdicc.com/igenus/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[igenus需要给vpopmail数据库里添加几个表，同时还需要修改vpopmail表。添加了一个pw_id字段。没有这个这个字段，igenus里面不能修改密码（我就遇到这么一个情况）。
]]></content>
    
    <summary type="html">
    
      igenus需要给vpopmail数据库里添加几个表，同时还需要修改vpopmail表。添加了一个pw_id字段。没有这个这个字段，igenus里面不能修改密码（我就遇到这么一个情况）。

    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>Howto Qmail with spamassassin</title>
    <link href="http://wdicc.com/howto-qmail-with-spamassassin/"/>
    <id>http://wdicc.com/howto-qmail-with-spamassassin/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://sylvestre.ledru.info/howto/howto_qmail_spamassassin.php

By Sylvestre Ledru June 2003
Version francaise
Return to the linux page

(02/04/2002), Bug fix :
I just add a little bug fix for some OS which remove the +x on qmail-queue (the qmail-scanner is not concerned)
(01/11/2003), Qmail-scanner :
I had a new way of calling spamassassin client using qmail-scanner.
(23/07/2003), Preferences :
Matthew Francis sent me a quite good howto explaining how to get user preferences for spamassassin. It is available here.
(08/06/2003), Localisation :
If you want to change the language of the spam report (ie why the email has been tagged as a spam), just change the locales to your language (dpkg-reconfigure locales under debian) and install gettext (apt-get install gettext) and you will have the appropriate version (french for example)...
(11/03/2005), Update :
After almost two years without updates, my other howto about qmail is much more complet and uptodate, I clean this one :
- first method deprecated
- new version of spamassassin 3.0.X
- use of netqmail instead of qmail
- new version of qmail-scanner with the q-s-st patch (activation of Spamassassin just for a domain)

If you like this howto and you want to thank me for my work : here is my wishlist on Amazon - France or my Amazon US wishlist :)
If you are a corporation and you make some business thanks to my howto, we'll love to have a present from you (or just tell me who is using my howto).
Thank to Scott Kinkade for his cash donation. I really do appreciate.

If you want more informations about the intallation of qmail, I wrote a long howto about.
I wrote this howto because there is a lack of documentation about qmail with spamassassin.

This howto has been designed for qmail with vpopmail but it should work without a lot of modifications with something else than vpopmail.

Spamassassin is a very powerfull program which checks if the receveid email is a spam or not. The analys is based on a list of mark. If the sum of all the mark exceed a specified amount (for example 5), the email will be tagged (****SPAM**** in the topic).
With this, it is very easy to create a rule which will move all emails into a specific directory (i.e. trash:)

If you want to link Qmail with spamassassin, it is quite easy.
First, install spamassassin and install razor and pyzor if you want to use it.
Under debian :
apt-get install spamassassin You should use the "debian unstable or testing" version of spamassassin which, most of the time, will find more spam.

Under other system (Redhat, Suse, Solaris ...) : The latest version of spamassassin today is the version 3.0.2. The installation is almost the same, only a few directives changed.
wget http://useast.spamassassin.org/released/Mail-SpamAssassin-2.55.tar.gz
tar -zxvf Mail-SpamAssassin-2.55.tar.gz
cd Mail-SpamAssassin-2.55
perl Makefile.PL
make
make install
cp spamd/debian-rc-script.sh /etc/init.d/spamassassin You can replace debian by redhat, solaris, netbsd, suse ...
chmod +x /etc/init.d/spamassassin

Then, edit /etc/spamassassin/local.cf
Version 2.5X :
required_hits 6.0
rewrite_subject 1
report_header 1
use_terse_report 1
defang_mime 1
dns_available yes
dcc_add_header 1
use_pyzor 1 (Only if you have installed pyzor)
use_razor2 (Only if you have installed razor2)
use_dcc 1
Version 3 :
#Number of points to tag the spam required_hits 5.0 # Add the result in the header always_add_headers 1 # change the subject rewrite_subject 1 report_safe 1 use_terse_report 1 # dns checks (warning : increase the process length) dns_available yes dcc_add_header 0 # Don't skip the relay black list skip_rbl_checks 0 use_dcc 1 dcc_timeout 10 # Remote verification use_pyzor 1 pyzor_timeout 10 pyzor_add_header 1 # Never from the previous results auto_learn 1 # use the bayes filter use_bayes 1 # Where spamassassin must store these informations : bayes_path /var/qmail/spamassassin/ # Where he stores the auto white list results : auto_whitelist_path /var/qmail/spamassassin/auto_whitelist
If you want to have detailled information about spamassassin processing, add the line in the local.cf file : timelog_path /var/log/spamassassin, run the daemon with the -D option (so, specify it in the /etc/default/spamassassin file under debian), create the directory with appropriate rights (should be vpopmail). In the directory, you will have for each email a file which sum up the spamassassin process (it is a debug option !).

I use these rules. Feel free to change ! Documentation about this is available here : perldoc Mail::SpamAssassin::Conf

In /etc/default/spamassassin (if this file does not exist, create it)
Change ENABLED to 1, then add these options : - "-m 10 -v --auto-whitelist" for the version 2.5X.
- "-v -m 10 -u vpopmail --nouser-config" for the version 3
With that stuff, you can launch spamd which is bascilly a spamassassin deamon (provide great performances).
-m 10 =&gt; 10 childs
-v =&gt; vpopmail config
--auto-whitelist =&gt; Use auto whitelist (friend list)
Instead of spamassassin, you have to use spamc in order to test email.
There are some options "-c -u vpopmail" which enabled the creation of preferences for a domain or a user but it does not work very well for me.
/etc/init.d/spamassassin start

Next, the modification of qmail in order to check emails.
Basically, there are two kind of configuration for qmail :
- the fastest/easiest way is to change the qmail-queue in order to "introduce" the spamasssin check.Deprecated
- the cleanest way is to use qmail-scanner.
Changing the qmail-queue program
cp /var/qmail/bin/qmail-queue /var/qmail/bin/qmail-queue.orig
chown qmailq:qmail qmail-queue
chown qmailq:qmail qmail-queue.orig
chmod u+s qmail-queue.orig
chmod o+r,+x qmail-queue.orig qmail-queue Not fundamental but sometime it is necessary (depends the system)

mkdir /home/vpopmail/.spamassassin
cd /home/vpopmail
chmod 777 /home/vpopmail/.spamassassin

chown -R qmailq:qmail .spamassassin
chmod u=rwx,g=rx,o= /home/vpopmail/.spamassassin
Now, delete the content of the executable which manage the queue.
echo -n &gt; /var/qmail/bin/qmail-queue
Then, edit the qmail-queue file and add this inside :
#!/bin/sh
/usr/bin/spamc | /var/qmail/bin/qmail-queue.orig
I agree that it is a quick/dirty method. It causes some issues with the injection of a bounce in the queue. (qmail-queue is not planned to work this way).
With qmail-scanner - Visit http://sylvestre.ledru.info/howto/howto_qmail_vpopmail.php for more informations
First, you have to patch qmail with the qmailqueue-patch or install netqmail which has already this plugin.
Qmail with the patch :
wget http://qmail.agarik.com/qmail-1.03.tar.gz
tar -zxvf qmail-1.03.tar.gz
cd qmail-1.03
wget http://qmail.mirrored.ca/moni.csi.hu/pub/glibc-2.3.1/qmail-1.03.errno.patch
wget http://sylvestre.ledru.info/howto/qmail/qmailqueue-patch
patch -p1 &lt; qmail-1.03.errno.patch
patch -p1 &lt; qmailqueue-patch
With netqmail :
wget http://qmail.agarik.com/netqmail-1.05.tar.gz
tar -zxvf netqmail-1.05.tar.gz
cd netqmail-1.05/
./collate.sh
cd netqmail-1.05
Add the QMAILQUEUE parameter to the /etc/tcp.smtp file :
127.0.0.1:allow,RELAYCLIENT="",QMAILQUEUE="/var/qmail/bin/qmail-scanner-queue.pl"
198.168.1.:allow,RELAYCLIENT="",QMAILQUEUE="/var/qmail/bin/qmail-scanner-queue.pl"
:allow,QMAILQUEUE="/var/qmail/bin/qmail-scanner-queue.pl"
Rehash tcpserver :
/usr/local/bin/tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp
chmod 644 /etc/tcp.smtp.cdb
And then, install qmail-scanner with qmail-scanner-st
. qmail-scanner-st is a patched version a qmail-scanner which enabled great features like auto delete/reject/quarantine spam over a specified score but also to select which scanners will be used for a domain and even for a user, then, it is possible to configure the spamassassin / antivirus just for one domain/user.
wget http://unc.dl.sourceforge.net/sourceforge/qmail-scanner/qmail-scanner-1.25.tgz wget http://xoomer.virgilio.it/j.toribio/qmail-scanner/download/q-s-1.25st-20050207.patch.gz
gunzip q-s-1.25st-20050207.patch.gz
tar -zxvf qmail-scanner-1.25.tgz
cd qmail-scanner-1.25/
patch -p1 &lt; ../q-s-1.25st-20050207.patch
groupadd qscand
useradd -c "Qmail-Scanner Account" -g qscand -s /bin/false qscand
./configure --qs-user qscand --qs-group qscand --spooldir /var/spool/qmailscan --qmaildir /var/qmail --bindir /var/qmail/bin --qmail-queue-binary /var/qmail/bin/qmail-queue --admin-fromname "Mail admin" --admin postmaster --domain vladimir.avence.info --notify sender,admin,recips --local-domains `cat /var/qmail/control/rcpthosts | tr "\n" " "` --silent-viruses auto --unzip 1 --add-dscr-hdrs 1 --archive 0 --redundant yes --log-crypto 0 --scanners "fast_spamassassin" --scanners-per-domain yes --sa-subject "*****SPAM*****" --sa-delete 5 --install 1
After the installation, if you want to change your preferences, you have to edit the /var/qmail/bin/qmail-scanner-queue.pl file. In this file, you can also add option for the spamassassin client.
If you want to enable/disable some scanners, edit the /var/spool/qmailscan/scanners_per_domain.txt
To rehash the scanner per domain file : /var/qmail/bin/qmail-scanner-queue.pl -p
To rehash the quarantine attachement file : /var/qmail/bin/qmail-scanner-queue.pl -g
trunks.ecranbleu.org:sa,ps,clamdscan_scanner

# sa = spamassassin
# ps = perl scanner

This should be enough to use SpamAssassin on the whole system.
I have to try to find how it can be linked with vpopmail in order to create preference for a specific domain or a specific user. (if someone knows : sylvestre@ecranbleu.org)

Problems :
- link with vpopmail
This howto is inspired and corrected from :
http://www.euronet.nl/users/erhnam/linux/qmail/qmail.htm.
]]></content>
    
    <summary type="html">
    
      http://sylvestre.ledru.info/howto/howto_qmail_spamassassin.php

By Sylvestre Ledru June 2003
Version francaise
Return to the linux page

(02
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="qmail" scheme="http://wdicc.com/tags/qmail/"/>
    
  </entry>
  
  <entry>
    <title>qmail中的几个error的产生的原因和解决方法</title>
    <link href="http://wdicc.com/solve-qmail-error/"/>
    <id>http://wdicc.com/solve-qmail-error/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[deferral: Unable_to_chdir_to_maildir._(#4.2.1)

   这个是qmail找不到用户的收信目录所致。如果你是用vpopmail的虚拟域名来管理的，那看看你的control/locals文件，里面不能有虚拟域名，只能有实际域名（这个实际域名的意思应该是使用系统用户作为用户的域，而不是使用vpopmail的虚拟用户的域）。因此呢，如果不是用 vpopmail，那么可能是系统用户的目录权限设置不正确。

如果发生这个错误，首先保证你没有对user/assign做过手动修改，添加域名都是使用vpopmail的vadddomin命令来添加的，没有修改过~vopmail/domins目录以及其下面目录的权限和属主，然后修改了locals文件之后重启应该就没有问题了。

deferral: Uh-oh:_.qmail_has_prog_delivery_but_has_x_bit_set._(#4.7.0)

   这个是因为你的.qmail文件设置了x属性，把.qmail文件的x去掉就ok了。这个.qmail文件就在你的domins/xxx.com下面，包括比如.qmail-default之类的文件，修改一下权限，去掉x就ok了。

454 oops, unable to write pipe and I can&#39;t auth (#4.3.0)

  这个错误是在你打了smtp auth的补丁之后，却发现不能正常auth，输入了正确的用户名密码还是提示不正确。可以通过下面的命令来测试。

[root@caph qmail-smtpd]# telnet localhost 25
Trying 127.0.0.1...
Connected to localhost.
Escape character is &#39;^]&#39;.
220 xxx.com ESMTP
ehlo
250-xxx.com
250-PIPELINING
250-8BITMIME
250-SIZE 104857600
250 AUTH LOGIN PLAIN CRAM-MD5 //显示这个通常表示你已经打好了补丁，不过这个是可以通过修改qmail-smtpd.c文件来定制的。
auth login
334 VXNlcm5hbWU6
awefaq23rasdf
334 UGFzc3dvcmQ6
awefwaef
454 oops, unable to write pipe and I can&#39;t auth (#4.3.0)
quit
221 xxx.com
Connection closed by foreign host.

出现了这种问题是因为smtp运行脚本没有设置正确的用户所致。将你的smtp的tcpserver命令的运行用户和组指定一下。

QMAILDUID=`id -u vpopmail`
QMAILDGID=`id -g vpopmail`

/usr/local/bin/tcpserver -v -H -R -l "$LOCAL" -x /etc/tcp.smtp.cdb -c "$MAXSMTPD"
        -u "$QMAILDUID" -g "$QMAILDGID" 0 smtp /usr/local/bin/rblsmtpd -r relays.ordb.org
        /var/qmail/bin/qmail-smtpd
        /home/vpopmail/bin/vchkpw /bin/true /bin/cmd5checkpw /bin/true 2>&1

不需要修改~vpopmail/bin/vchkpw的属性。

451 qq write error or disk full (#4.3.0)

通常产生这个可能有2个原因：（1）你的qmail queue所在的磁盘空间不足。（2）qmail-scanner-queue的.pl权限设置不正确或者文件有问题。

qq temporary problem (#4.3.0)

看到的都是说不是suidperl就是qmail-scanner-queue.pl的权限设置不对这两个可能。
-rwsr-xr-x 1 qscand qscand 98594 12月 21 10:18 qmail-scanner-queue.pl

vchkpw-smtp: vpopmail user not found

查看/home/vpopmail/bin/vchkpw的属性和smtpd启动的用户名和组有没有问题。
]]></content>
    
    <summary type="html">
    
      deferral: Unable_to_chdir_to_maildir._(#4.2.1)

   这个是qmail找不到用户的收信目录所致。如果你是用vpopmail的虚拟域名来管理的，那看看你的control/locals文件，里面不能有虚拟域名，只能有实际域名（这个实际域
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>caphit web 配置</title>
    <link href="http://wdicc.com/caphit-web-conf/"/>
    <id>http://wdicc.com/caphit-web-conf/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[httpd.conf
ServerName caph
AddDefaultCharset GB2312
NameVirtualHost *

ServerAdmin webmaster@caphbook.com
DocumentRoot /www
ServerName 210.72.203.226

AllowOverride None
Options +ExecCGI
AddHandler cgi-script .cgi .pl
Order allow,deny
Allow from all

ServerAdmin webmaster@caphbook.com
DocumentRoot /www/caphbook
ServerName www.caphbook.com
ServerAlias caphbook.com caphbook.com.cn www.caphbook.com.cn
ErrorLog logs/caphbook.com-error_log
CustomLog logs/caphbook.com-access_log common

#
# ServerAdmin webmaster@aphit.com.cn
# DocumentRoot /www/caphit
# ServerName www.aphit.com.cn
# ServerAlias aphit.com.cn
#
# Options Indexes
#
#
#mail

ServerAdmin webmaster@caphbook.com
DocumentRoot /www/igenus
ServerName mail.caphbook.com
ServerAlias mail.caphbook.com.cn mail.aphit.com.cn
ErrorLog logs/mail-error_log
CustomLog logs/mail-access_log common

ssl.conf

此后
service httpd restart
chkconfig --level 345 httpd on

php.ini
register_globals = On
max_execution_time = 60 ; Maximum execution time of each script, in seconds
max_input_time = 120 ; Maximum amount of time each script may spend parsing request data
memory_limit = 20M
php.ini
LimitRequestBody 52428800
apache配置完毕
]]></content>
    
    <summary type="html">
    
      httpd.conf
ServerName caph
AddDefaultCharset GB2312
NameVirtualHost *

ServerAdmin webmaster@caphbook.com
DocumentRoot /www
ServerName 210.7
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>caphit qmail 配置</title>
    <link href="http://wdicc.com/caphit-qmail-conf/"/>
    <id>http://wdicc.com/caphit-qmail-conf/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[参考网址
http://lifewithqmail.org(中文版http://lifewithqmail.org/LWQ-CN.html)
http://qmail.te8.com/rpms/glibc-2.3.1/(patch下载地址)
http://www.fehcom.de/qmail/qmail.html
http://www.pipeline.com.au/staff/mbowe/isp/vpopmail-mysql.htm
http://bbs.chinaunix.net/forum/viewtopic.php?t=254662

ucspi-tcp
http://cr.yp.to/ucspi-tcp.html
ucspi-tcp-0.88.a_record.patch，ucspi-tcp-0.88.errno.patch，ucspi-tcp-0.88.nodefaultrbl.patch
（或者）ucspi-tcp-0.88.a_record.patch，ucspi-tcp-0.88.errno.patch，ucspi-tcp-0.88.nobase.patch
patch -d ucspi-tcp.xxx -p1 &lt; ucspi-tcp-xxx.patch
make&amp;&amp;make setup check

daemontools
http://cr.yp.to/daemontools.html
daemontools-0.76.errno.patch
package/install
Adding svscanboot to inittab...init should start svscan now.

cmd5checkpw
http://www.fehcom.de/qmail/auth/cmd5checkpw-030_tgz.bin
make&amp;&amp;make setup

qmail 1.03
http://cr.yp.to/qmail.html
http://www.fehcom.de/qmail/qmail.html
http://www.fehcom.de/qmail/spamcontrol/spamcontrol-2311_tgz.bin
tar zxvf spamcontrol-2311_tgz.bin
编辑conf-spamcontrol
建立用户组
groupadd nofiles
useradd -g nofiles -d /var/qmail qmaild -s /sbin/nologin
useradd -g nofiles -d /var/qmail qmaill -s /sbin/nologin
useradd -g nofiles -d /var/qmail qmailp -s /sbin/nologin
useradd -g nofiles -d /var/qmail/alias alias -s /sbin/nologin
groupadd qmail
useradd -g qmail -d /var/qmail qmailq -s /sbin/nologin
useradd -g qmail -d /var/qmail qmailr -s /sbin/nologin
useradd -g qmail -d /var/qmail qmails -s /sbin/nologin
./install_spamcontrol.sh
make setup check
./config-fast xxxx.com

vpopmail
http://sourceforge.net/projects/vpopmail/
groupadd vchkpw;useradd vpopmail
CREATE DATABASE vpopmail;
GRANT select,insert,update,delete,create,drop ON vpopmail.* TO vpopmailuser@localhost IDENTIFIED BY 'vpoppasswd';
配置(用igenus需要enable-many-domains)
./configure   --enable-logging=p
--enable-domain-quotas=y
--enable-auth-module=mysql
--enable-tcprules-prog=/usr/local/bin/tcprules
--enable-tcpserver-file=/etc/tcp.smtp
--disable-mysql-limits
--enable-mysql-logging
--enable-many-domains
make&amp;&amp;make install-strip
vi vpopmail.mysql
vi vlimits.default
echo "xxxx.com" &gt; /home/vpopmail/etc/defaultdomain
vi /home/vpopmail/domains/.quotawarn.msg
From: CAPH Postmaster
<postmaster@xxx.com> Reply-To: postmaster@xxx.com
To: SomeCompany User:;
Subject: Mail quota warning
Mime-Version: 1.0
Content-Type: text/plain; charset=iso-8859-1
Content-Transfer-Encoding: 7bit</postmaster@xxx.com>

Your mailbox on the server is now more than 90% full.

So that you can continue to receive mail,
you need to remove some messages from your mailbox.

If you require assistance with this,
please contact our support department :

email : postmaster@xxx.com
Tel   : 010 68372647
echo "Message rejected. Not enough storage space in user's mailbox to accept message." &gt; /home/vpopmail/domains/.over-quota.msg

/var/qmail/rc
vi /var/qmail/rc
#!/bin/sh

# Using stdout for logging
# Using control/defaultdelivery from qmail-local to deliver messages by default

exec env - PATH="/var/qmail/bin:$PATH"
qmail-start "`cat /var/qmail/control/defaultdelivery`"

echo ./Maildir/ &gt;/var/qmail/control/defaultdelivery
chmod 755 /var/qmail/rc
mkdir /var/log/qmail

/var/qmail/bin/qmailctl

vi /var/qmail/bin/qmailctl
#!/bin/sh

# description: the qmail MTA

PATH=/var/qmail/bin:/bin:/usr/bin:/usr/local/bin:/usr/local/sbin
export PATH
LOG_AUTH=1
export LOG_AUTH

QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`

case "$1" in
start)
echo "Starting qmail"
if svok /service/qmail-send ; then
svc -u /service/qmail-send /service/qmail-send/log
else
echo "qmail-send supervise not running"
fi
if svok /service/qmail-smtpd ; then
svc -u /service/qmail-smtpd /service/qmail-smtpd/log
else
echo "qmail-smtpd supervise not running"
fi
if svok /service/qmail-pop3d ; then
svc -u /service/qmail-pop3d /service/qmail-pop3d/log
else
echo qmail-pop3d supervise not running
fi
if [ -d /var/lock/subsys ]; then
touch /var/lock/subsys/qmail
fi
;;
stop)
echo "Stopping qmail..."
echo "  qmail-smtpd"
svc -d /service/qmail-smtpd /service/qmail-smtpd/log
echo "  qmail-smtpd"
svc -d /service/qmail-smtpd /service/qmail-smtpd/log
echo "  qmail-send"
svc -d /service/qmail-send /service/qmail-send/log
echo "  qmail-pop3d"
svc -d /service/qmail-pop3d /service/qmail-pop3d/log
if [ -f /var/lock/subsys/qmail ]; then
rm /var/lock/subsys/qmail
fi
;;
stat)
svstat /service/qmail-send
svstat /service/qmail-send/log
svstat /service/qmail-smtpd
svstat /service/qmail-smtpd/log
svstat /service/qmail-pop3d
svstat /service/qmail-pop3d/log
qmail-qstat
;;
doqueue|alrm|flush)
echo "Flushing timeout table and sending ALRM signal to qmail-send."
/var/qmail/bin/qmail-tcpok
svc -a /service/qmail-send
;;
queue)
qmail-qstat
qmail-qread
;;
reload|hup)
echo "Sending HUP signal to qmail-send."
svc -h /service/qmail-send
;;
pause)
echo "Pausing qmail-send"
svc -p /service/qmail-send
echo "Pausing qmail-smtpd"
svc -p /service/qmail-smtpd
echo "Pausing qmail-pop3d"
svc -p /service/qmail-smtpd
echo "Pausing qmail-pop3d"
svc -p /service/qmail-pop3d
;;
cont)
echo "Continuing qmail-send"
svc -c /service/qmail-send
echo "Continuing qmail-smtpd"
svc -c /service/qmail-smtpd
echo "Continuing qmail-pop3d"
svc -c /service/qmail-pop3d
;;
restart)
echo "Restarting qmail:"
echo "* Stopping qmail-smtpd."
svc -d /service/qmail-smtpd /service/qmail-smtpd/log
echo "* Sending qmail-send SIGTERM and restarting."
svc -t /service/qmail-send /service/qmail-send/log
echo "* Restarting qmail-smtpd."
svc -u /service/qmail-smtpd /service/qmail-smtpd/log
echo "* Restarting qmail-pop3d."
svc -t /service/qmail-pop3d /service/qmail-pop3d/log
;;
cdb)
tcprules /etc/tcp.smtp.cdb /etc/tcp.smtp.tmp &lt; /etc/tcp.smtp
tcprules /etc/tcp.pop3.cdb /etc/tcp.pop3.tmp &lt; /etc/tcp.pop3
chmod 644 /etc/tcp.smtp.cdb
chmod 644 /etc/tcp.pop3.cdb
echo "Reloaded /etc/tcp.smtp."
echo "Reloaded /etc/tcp.pop3."
;;
help)
cat &lt;   stop -- stops mail service (smtp connections refused, nothing goes out)
start -- starts mail service (smtp connection accepted, mail can go out)
pause -- temporarily stops mail service (connections accepted, nothing leaves)
cont -- continues paused mail service
stat -- displays status of mail service
cont -- continues paused mail service
stat -- displays status of mail service
cdb -- rebuild the tcpserver cdb file for smtp
restart -- stops and restarts smtp, sends qmail-send a TERM &amp; restarts it
doqueue -- schedules queued messages for immediate delivery
reload -- sends qmail-send HUP, rereading locals and virtualdomains
queue -- shows status of queue
alrm -- same as doqueue
flush -- same as doqueue
hup -- same as reload
HELP
;;
*)
echo "Usage: $0 {start|stop|restart|doqueue|flush|reload|stat|pause|cont|cdb|queue|help}"
exit 1
;;
esac

exit 0

chmod 755 /var/qmail/bin/qmailctl
ln -s /var/qmail/bin/qmailctl /usr/bin
echo 20 &gt; /var/qmail/control/concurrencyincoming
chmod 644 /var/qmail/control/concurrencyincoming

supervise 脚本
mkdir -p /var/qmail/supervise/qmail-send/log
mkdir -p /var/qmail/supervise/qmail-smtpd/log
mkdir -p /var/qmail/supervise/qmail-pop3d/log

qmail-send

/var/qmail/supervise/qmail-send/run

#!/bin/sh
exec /var/qmail/rc

/var/qmail/supervise/qmail-send/log/run

#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t /var/log/qmail

qmail-smtpd

/var/qmail/supervise/qmail-smtpd/run

#!/bin/sh

#QMAILDUID=`id -u qmaild`
NOFILESGID=`id -g qmaild`
QMAILDUID=`id -u vpopmail`
QMAILDGID=`id -g vpopmail`

MAXSMTPD=`cat /var/qmail/control/concurrencyincoming`
LOCAL=`head -1 /var/qmail/control/me`
if [ -z "$QMAILDUID" -o -z "$NOFILESGID" -o -z "$MAXSMTPD" -o -z "$LOCAL" ]; then
echo QMAILDUID, NOFILESGID, MAXSMTPD, or LOCAL is unset in
echo /var/qmail/supervise/qmail-smtpd/run
exit 1
fi
if [ ! -f /var/qmail/control/rcpthosts ]; then
echo "No /var/qmail/control/rcpthosts!"
echo "Refusing to start SMTP listener because it'll create an open relay"
exit 1
fi
exec /usr/local/bin/softlimit -m 30000000
/usr/local/bin/tcpserver -v -H -R -l "$LOCAL" -x /etc/tcp.smtp.cdb -c "$MAXSMTPD"
-u "$QMAILDUID" -g "$QMAILDGID" 0 smtp /usr/local/bin/rblsmtpd -r relays.ordb.org
/var/qmail/bin/qmail-smtpd
/home/vpopmail/bin/vchkpw /bin/true /bin/cmd5checkpw /bin/true 2&gt;&amp;1

/var/qmail/supervise/qmail-smtpd/log/run

#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t
/var/log/qmail/smtpd

qmail-pop3d

/var/qmail/supervise/qmail-pop3d/run

#!/bin/sh

LOCAL=`head -1 /var/qmail/control/me`

exec /usr/local/bin/softlimit -m 30000000
/usr/local/bin/tcpserver -x /etc/tcp.pop3.cdb
-H -l $LOCAL
-v -c 20 -R 0 pop3
/var/qmail/bin/qmail-popup $LOCAL
/home/vpopmail/bin/vchkpw /var/qmail/bin/qmail-pop3d Maildir 2&gt;&amp;1

/var/qmail/supervise/qmail-pop3d/log/run

#!/bin/sh
exec /usr/local/bin/setuidgid qmaill /usr/local/bin/multilog t
/var/log/qmail/pop3d

chmod 755 /var/qmail/supervise/qmail-send/run;chmod 755 /var/qmail/supervise/qmail-send/log/run
chmod 755 /var/qmail/supervise/qmail-smtpd/run;chmod 755 /var/qmail/supervise/qmail-smtpd/log/run
chmod 755 /var/qmail/supervise/qmail-pop3d/run;chmod 755 /var/qmail/supervise/qmail-pop3d/log/run
mkdir -p /var/log/qmail/smtpd;chown qmaill /var/log/qmail /var/log/qmail/smtpd
ln -s /var/qmail/supervise/qmail-send /var/qmail/supervise/qmail-smtpd /var/qmail/supervise/qmail-pop3d /service
touch .qmail-root .qmail-postmaster
ln -s .qmail-postmaster /var/qmail/alias/.qmail-mailer-daemon
chmod 644 /var/qmail/alias/.qmail-root /var/qmail/alias/.qmail-postmaster

clamav
http://www.clamav.net/
groupadd clamav
useradd -g clamav -s /sbin/nologin clamav -d /tmp
./configure
make check
make install

maildrop

./configure
make;make install-strip;make install-man

spamassassin

perl Makefile.PL
make
make install
cp spamd/redhat-rc-script.sh /etc/init.d/spamd

qmail-scanner

groupadd qscand;useradd -g qscand -s /sbin/nologin qscand -d /tmp
./configure --spooldir /var/qmailscan --qmaildir /var/qmail --bindir /var/qmail/bin --qmail-queue-binary
/var/qmail/bin/qmail-queue  --admin postmaster --domain xxx.com --notify sender,admin --local-domains "xxx.com,xxx.com.cn,xxx.com.cn" --silent-viruses auto --debug yes --unzip 1
--block-password-protected 0 --add-dscr-hdrs 0 --archive 0 --redundant yes --log-details syslog --log-crypto 0
--fix-mime 2  --ignore-eol-check 0 --scanners "clamscan,fast_spamassassin"

cp qmail-scanner-queue.pl /var/qmail/bin
chown qscand:qscand /var/qmail/bin/qmail-scanner-queue.pl
chmod 4755 /var/qmail/bin/qmail-scanner-queue.pl
vi /etc/tcp.smtp

127.:allow,RELAYCLIENT="",MFDNSCHECK="",BADMIMETYPE="",RBLSMTPD="",QMAILQUEUE="/var/
qmail/bin/qmail-scanner-queue.pl"

qmailctl cdb
qmailctl restart
contrib/test_installation.sh -doit测试
]]></content>
    
    <summary type="html">
    
      参考网址
http://lifewithqmail.org(中文版http://lifewithqmail.org/LWQ-CN.html)
http://qmail.te8.com/rpms/glibc-2.3.1/(patch下载地址)
http://www.fehcom.d
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
      <category term="qmail" scheme="http://wdicc.com/tags/qmail/"/>
    
  </entry>
  
  <entry>
    <title>历史上最强最强的跨专业的考研人zz</title>
    <link href="http://wdicc.com/a-joke-3/"/>
    <id>http://wdicc.com/a-joke-3/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[　　1、现在跨专业跨学校考研已经是一种趋势。某君学习图书馆学n年，也是觉得发腻。于是决定考个理科的研究生，在广泛的调查和研究之后。他毅然决定考天大的化院来挑战一下自己。看看一个连苯烷都不会写的人是否可以大跨度考研成功。他做了以下几步：
坐火车到天大，找到自己未来的研究生导师。先恭敬的鞠上一躬，然后对老先生说：我想考您的研究生，随后递上自己的简历。老先生先是一脸鄙夷，想你们XX大学图书馆学虽然是全国第一，但又怎么知道我们数学的博大精深。不过他没有当面拒绝，而是写了十几个问题对小伙子说：不急，先把这些问题搞清楚再来找我。也就是说，先搞清楚才有资格。这个强人并没有生气，把问题清单收了起来。

　　2、回到学校，把问题翻译成英语，然后给哈佛大学化学系某教授发了一封e-mail，信中写道：我想考贵院的研究生，这是我对专业的一点问题，可以帮我解答一下吗？同时加上自己的简历。哈佛教授看后很激动，因为发现了一个东方化学奇人，虽然不是专业人才但是专业问题问得很深。于是他们认认真真解答了问题，并列出一些其他的问题对小伙子做进一步的考核。

　　3、收到哈佛的回信后，某君把问题翻译成汉语，再去找天大的老先生。先把答案给了老先生，老先生一看已经半疯，想小伙子不错，水平比我还高，已经达到国外哈佛的水平了。这时某君又拿出写满问题的那张纸，对老先生说：老师的问题我回答了，这是我对本专业的一些问题，请老师解答一下。老头看了问题，倒吸了一口凉气，傻眼了。这时某君装着要走。老先生急了，说：小伙子，别走！我要定你了，专业课不用考了，我包你过。公共课去回去复习一下，只要过线就行，只要过线。

　　4、 回到学校，没过几天，收到老先生花了几个通宵、查了大量资料写好的哈佛教授所提问题的答案。某君把答案翻译成英语，给哈佛教授又发过去。他们在确认东方奇人后，提出了一年给某君4万美金的奖学金。一边是保研一边是全奖出国，到底选哪边？某君犯难了。

　　5、当然是选保研，因为哈佛是淘汰制。而天大的老先生只会拍拍小伙子的肩膀说：孩子，好好学，谁让我当时瞎了眼把你收来呢。
]]></content>
    
    <summary type="html">
    
      　　1、现在跨专业跨学校考研已经是一种趋势。某君学习图书馆学n年，也是觉得发腻。于是决定考个理科的研究生，在广泛的调查和研究之后。他毅然决定考天大的化院来挑战一下自己。看看一个连苯烷都不会写的人是否可以大跨度考研成功。他做了以下几步：
坐火车到天大，找到自己未来的研究生导师。先恭
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>qss不正常显示的问题</title>
    <link href="http://wdicc.com/a-bug-of-qss/"/>
    <id>http://wdicc.com/a-bug-of-qss/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 php3.x版本以上不正常显示

设置php.ini的<font color="#FF0000">register_globals = On</font>

或者

修改getGraph.php添加
<font color="#FF0000">$data=$_GET[&#39;data&#39;];
$t=$_GET[&#39;t&#39;];
修改getGraph1.php添加
$data=$_GET[&#39;data&#39;];
$s=$_GET[&#39;s&#39;];</font>

2 还不能正常显示

那可能你的qmail-scanner的版本是1.2以上的，此版本以上的log文件格式有些变化，qss却没有做相应更新，所以会有问题。你可以看看你的log文件的日期是不是下面这种格式
Mon, 03 Jan 2005 04:01:57 CST
如果是，那么差不多就是这个问题了。

解决方法是在index.php里面查找
<font color="#FF0000"># Calc the date timestamp</font>
把他下面的5行语句用下面的替换
<font color="#FF0000">   if ( eregi("(^[0-9]+)", $val[0]) )
   {
      # Calc the date timestamp
      $date = explode("/",$val[0]);
      $dateT = $date[0];
      $date[0] = $date[1];
      $date[1] = $dateT;
      $date = strtotime(implode("/",$date));
   }
   else
   {
      $date = strtotime ($val[0]);
   };
</font>

参考网址
<a href="http://www.tnpi.biz/internet/mail/toaster/faq.shtml#how_do_i_get_qmailscanner_statistics_to_work" target="_blank">here</a>
]]></content>
    
    <summary type="html">
    
      1 php3.x版本以上不正常显示

设置php.ini的&lt;font color=&quot;#FF0000&quot;&gt;register_globals = On&lt;/font&gt;

或者

修改getGraph.php添加
&lt;font color=&quot;#FF0000&quot;&gt;$data=$_GET[&amp;#39
    
    </summary>
    
    
      <category term="Mail" scheme="http://wdicc.com/tags/Mail/"/>
    
  </entry>
  
  <entry>
    <title>cvs</title>
    <link href="http://wdicc.com/cvs/"/>
    <id>http://wdicc.com/cvs/</id>
    <published>2006-01-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[客户端配置最重要的是CVSROOT环境变量的配置。

其格式是： :pserver:username@hostname(或者IP地址):CVS仓库路径

例如，我在使用我们实验室的CVS服务器时的配置为：

:pserver:car@192.168.2.2:/had/src

每一个实验室的成员应该是用自己的mail服务器账户作为usernam，密码也是mail服务器的密码。

上面是摘抄的一段，用cvs需要先

cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/pureftpd login 

登陆，或者设置$CVSROOT环境变量，之后用

cvs -d :pserver:anonymous@cvs.sourceforge.net:/cvsroot/pureftpd checkout pureftpd

就可以checkout更新了。
]]></content>
    
    <summary type="html">
    
      客户端配置最重要的是CVSROOT环境变量的配置。

其格式是： :pserver:username@hostname(或者IP地址):CVS仓库路径

例如，我在使用我们实验室的CVS服务器时的配置为：

:pserver:car@192.168.2.2:/had/src

每
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>下雪了</title>
    <link href="http://wdicc.com/snowing-now/"/>
    <id>http://wdicc.com/snowing-now/</id>
    <published>2006-01-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[这个冬天的第一场雪可能都不能算是雪，据说是某些地方下了几颗肉眼刚好看到的雪粒粒，而且还是就早晨一会，反正我没看到。

第二场似乎应该就是元旦那次了吧，是元旦那天，还是元旦前夜，我忘记了，反正据说是下了，看到据说了吧，说明我还是没看到。呵呵。那两天都在家里呆着，没有出门，只是听说下雪之后站在阳台看了一眼，12层楼往下看，似乎没看到白色的积雪，也没看到哗哗的雪片。可能是我看的时候人家早停了吧，北京的雪基本上都是掉下来就化，所以地上没有积雪也正常的。

这次算是第三次了吧。因为座位不靠窗，所以没有注意到，到隔壁办公室的时候，听他们说起来才注意到，外面的雪片还真大。早上走的时候其实就在下了，不过都是小颗粒，还没想到居然成大气候了，呵呵。

雪现在还在下，在角落里面已经有了一些积雪了，走人走车的地方的雪基本都化了，地上好多水。北京的天气比较来说不够冷，但是够湿润，所以比较容易看到下雪，但是不容易看到积雪。我们家那里比较干燥，冬天就是干冷，下雪少，偶尔来一次就是大的，这一次之后，可能整个冬天都能到处看到积雪，尤其是村子后面的山头上，都白白的。
]]></content>
    
    <summary type="html">
    
      这个冬天的第一场雪可能都不能算是雪，据说是某些地方下了几颗肉眼刚好看到的雪粒粒，而且还是就早晨一会，反正我没看到。

第二场似乎应该就是元旦那次了吧，是元旦那天，还是元旦前夜，我忘记了，反正据说是下了，看到据说了吧，说明我还是没看到。呵呵。那两天都在家里呆着，没有出门，只是听说下
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Linux下双网接入高级路由配置脚本zz</title>
    <link href="http://wdicc.com/linux-bridge-script/"/>
    <id>http://wdicc.com/linux-bridge-script/</id>
    <published>2006-01-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://lwfs.net/2005/11/28/10/
<pre class="prettyprint lang-bash">
    #!/bin/bash

    IP0=<ip of="" your="" eth0="">
    IP1=<ip of="" your="" eth1="">
    GW0=<gateway of="" your="" first="" net="">
    GW1=<gateway of="" your="" second="" net="">
    NET0=<network address="" of="" your="" first="" net:="" network="" netmask="">
    NET1=<same as="" above,="" the="" second="" net="">
    DEV0=eth0
    DEV1=eth1

    # comment the next two line after first run this script.
    echo 200 cernet >>/etc/iproute2/rt_tables
    echo 210 chinanet >>/etc/iproute2/rt_tables

    ip route add ${NET0} dev ${DEV0} src ${IP0} table cernet
    ip route add default via ${GW0} table cernet
    ip route add ${NET1} dev ${DEV1} src ${IP1} table chinanet
    ip route add default via ${GW1} table chinanet
    ip route add ${NET0} dev ${DEV0} src ${IP0}
    ip route add ${NET1} dev ${DEV1} src ${IP1}

    # delete old rule
    ip rule del from ${IP0}
    ip rule del from ${IP1}
    # setup new rule
    ip rule add from ${IP0} table cernet
    ip rule add from ${IP1} table chinanet 
</same></network></gateway></gateway></ip></ip></pre>
]]></content>
    
    <summary type="html">
    
      http://lwfs.net/2005/11/28/10/
&lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
    #!/bin/bash

    IP0=&lt;ip of=&quot;&quot; your=&quot;&quot; eth0=&quot;&quot;&gt;
    IP1=&lt;ip of=&quot;&quot; you
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>isoqlog</title>
    <link href="http://wdicc.com/isoqlog/"/>
    <id>http://wdicc.com/isoqlog/</id>
    <published>2006-01-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[isoqlog是用来统计域里面的邮件的。通过查看qmail的log文件，来统计进出的邮件。

配置文件在/usr/local/etc下面，isoqlog.conf
<pre class="prettyprint lang-txt">
#isoqlog Configuration file 

logtype     = "qmail-multilog"                          # log type qmai-multilog, qmail-syslog, sendmail, postfix
logstore    = "/var/log/qmail"                          #
domainsfile = "/usr/local/etc/isoqlog.domains"          #
outputdir   = "/www/isoqlog/log"                        # html output directory
htmldir     = "/usr/local/share/isoqlog/htmltemp"
langfile    = "/usr/local/share/isoqlog/lang/english"
hostname    = "xxx.com"

maxsender   = 100
maxreceiver = 100
maxtotal    = 100  

maxbyte     = 100</pre>
]]></content>
    
    <summary type="html">
    
      isoqlog是用来统计域里面的邮件的。通过查看qmail的log文件，来统计进出的邮件。

配置文件在/usr/local/etc下面，isoqlog.conf
&lt;pre class=&quot;prettyprint lang-txt&quot;&gt;
#isoqlog Configuration 
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>看强人怎么砍价的zz</title>
    <link href="http://wdicc.com/a-joke-2/"/>
    <id>http://wdicc.com/a-joke-2/</id>
    <published>2006-01-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[事迹一，去利客隆买彩电，液晶国产海信，原价4000多。  

死砍，砍到三千七。 然后问赠品。说有，500块的耳机。  

然后我很过分地说，…耳机我不要了，你再便宜给我500块吧……  

他说便宜五十。  

我说敢骗老娘，明明是50块的耳机，敢对老娘说值500。  

他们说，其实耳机值一百多块……  

我说，那好，耳机一百块卖给你了，你一百多块钱再转手给别人吧  

他们……  

我就走啦，苏宁去了。砍啊砍……最后营业员不行了，说我去请示一下店长请示完，告诉我，最低3550。  

<br><a id="more"></a>没有任何赠品。好了，我算是知道底价了  

又走，跑国美去了。  

碰到老乡，亲切。一家人不说两家话，上来直奔主题。人家能报给我3500的价（骗骗他）你能给多少？  

他：%·#%·#￥%·#  

最后他说，已经很低了，我也只能给你这个价……要不，我去请示一下厂商……然后再多送点东西给你……  

说，那边实在谈不下来，要不这样，我给你开3500，然后自己再帮你贴一张50的赠券……  

ok，价格谈妥了，然后磨赠品  

说，人家送耳机的耶……  

他说，行，我也送……  

送了一副耳机……  

我说能接电脑的吧？  

他说能，我说那你得给我根接电脑的线，不然我拿回去怎么试啊  

他：行，线的新旧你就别在意了，我这边有根用过的，不过肯定是好的，电脑线入手……  

我：听说……现在DVD接电视机一般都用S-video端子  

他：是啊，这样比较清晰  

我：呀，还没见过长什么样呢，你去拿一根来给我看看，我就看看，买的时候就不会买错了  

他吭哧吭哧去拿了一根来，时值盛夏，他满头大汗  

我：哎呀，热坏了吧？  

他：嗯  

我：要不，这跟SV线我帮你带走了，省得你多跑一次还要放回去  

他：#^@#%@#%$@%  

我：SV线有了，dvd机器家里也有……就是没碟片  

他：我去帮你拿几张，好看与否别管  

我：辛苦了。。。碟片到手……  

准备走了  

我：对了对了，电视机是挂墙上的还是放桌上的？  

他：哦，对，忘记了，有两种架子，一种是放桌上的，一种挂墙上的，你告诉我，我通知发货的人  

我：我打算一开始放桌上，过一阵子挂墙上  

他：行了行了，我帮你发两个架子，到时候你验收一下。。。。两个架子入手  

最后……我说，对了，国美好像在搞打老虎的活动耶  

他说……是。打老虎就是打电老虎。三个月的电费帐单，7月份报销30%，8月份报销60%，9月份报销90%  

当时是8月份。我问他，只要是电费帐单就可以吗？  

他：不可以，必须是收货地址的帐单。  

我：。。。不送到这个地址了，帮我换个送货地址  

他：汗。  

改成了我姐家的地址。我家当时除了电灯，又没任何别的电器的，老姐家三台空调呢。  

就这样……0月份我去报销电费单，报了四百多块。。。。报销的小姐：天，这么多，我这边报销最多的也只有一百多块。  

换了四百多块的购物券。自己贴了点钱，买了个五百块的电饭锅。  

收获如下：1台电视机，5张碟片，2个架子，1根电脑线，1根SV线，1副无线耳机（包装上写价值499），1个电饭煲，N多勺铲叉，1个围裙，1个锅垫，1个淘米箩，1个微波炉手套……————。。用赠券买电饭煲的时候也缠了人家很久……  

买电饭煲那天……还买了个微波炉，又是一大堆赠品  

。。。出门的时候，营业员说，我帮你一起拿出去  

我：没关系，我一个人就可以了……  

营业员：我不陪你出去保安不会放你走的……  

真的是这样，保安看着我的发票，问，你就买了两个？那……其他的东西都是赠品？
]]></content>
    
    <summary type="html">
    
      事迹一，去利客隆买彩电，液晶国产海信，原价4000多。  

死砍，砍到三千七。 然后问赠品。说有，500块的耳机。  

然后我很过分地说，…耳机我不要了，你再便宜给我500块吧……  

他说便宜五十。  

我说敢骗老娘，明明是50块的耳机，敢对老娘说值500。  

他们说，其实耳机值一百多块……  

我说，那好，耳机一百块卖给你了，你一百多块钱再转手给别人吧  

他们……  

我就走啦，苏宁去了。砍啊砍……最后营业员不行了，说我去请示一下店长请示完，告诉我，最低3550。  

&lt;br&gt;
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>clamav</title>
    <link href="http://wdicc.com/clamav/"/>
    <id>http://wdicc.com/clamav/</id>
    <published>2006-01-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[网址：http://www.clamav.net

安装命令
<pre class="prettyprint lang-bash">
#./configure --sysconfdir=/etc/clamav
#make;make check;make install</pre>
安装之后需要多关注升级log，新版本出来就会有提示
<pre class="prettyprint lang-txt">
Received signal: wake up
ClamAV update process started at Wed Jan 11 04:02:26 2006
WARNING: Your ClamAV installation is OUTDATED!
WARNING: Local version: 0.86.1 Recommended version: 0.88
DON'T PANIC! Read http://www.clamav.net/faq.html
main.cvd is up to date (version: 35, sigs: 41649, f-level: 6, builder: tkojm)
WARNING: Your ClamAV installation is OUTDATED!
WARNING: Current functionality level = 5, recommended = 6
DON'T PANIC! Read http://www.clamav.net/faq.html
daily.cvd updated (version: 1237, sigs: 470, f-level: 7, builder: diego)
WARNING: Your ClamAV installation is OUTDATED!
WARNING: Current functionality level = 5, recommended = 7
DON'T PANIC! Read http://www.clamav.net/faq.html
Database updated (42119 signatures) from db.cn.clamav.net (IP: 221.6.197.162)</pre>
看到之后只需要去下载最新版本，然后重新安装即可。

启动系统时运行/usr/local/bin/freshclam -d定时更新程序。配置文件在/etc/clamav
]]></content>
    
    <summary type="html">
    
      网址：http://www.clamav.net

安装命令
&lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
#./configure --sysconfdir=/etc/clamav
#make;make check;make install&lt;/pre&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>到年底了</title>
    <link href="http://wdicc.com/last-of-a-year/"/>
    <id>http://wdicc.com/last-of-a-year/</id>
    <published>2006-01-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[年底比较期待的一件事情就是tatter tools 1.0，功能更加强大了。希望能无缝升级。

现在不得不承认和老婆两个人都太懒了。该我洗的碗非要推到第二天做饭前，该老婆打扫的地板一拖就是好几天，猫沙本来应该一天一清理，可非要等到看着似乎都没地方的才动手。得改改这些烂习惯了。

得考虑年底给家里带点什么东西了。cc家里的话，回头再商量商量给买什么好。还是带点东西好。嗯。
]]></content>
    
    <summary type="html">
    
      年底比较期待的一件事情就是tatter tools 1.0，功能更加强大了。希望能无缝升级。

现在不得不承认和老婆两个人都太懒了。该我洗的碗非要推到第二天做饭前，该老婆打扫的地板一拖就是好几天，猫沙本来应该一天一清理，可非要等到看着似乎都没地方的才动手。得改改这些烂习惯了。


    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>随便写点</title>
    <link href="http://wdicc.com/write-something/"/>
    <id>http://wdicc.com/write-something/</id>
    <published>2006-01-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[明天要去书展值班，比较郁闷，本来和我们毫不相关的事情，却要我们去干活，这个很不合理。可是目前这个公司就这样的，没办法。在这里呆了快4年了，不合理的事情见的太多了，也懒得去多想了，看大家的说法，国企可能都这个德性，而且私企也慢慢的在学这种风气。到底什么是好的工作环境，真不知道了。

这几天天气还算可以，周六早上早早的起来了，觉得这个周末时间好长，想想还是不要把那么多时间浪费在睡觉上比较好，年轻是资本，还是多积累一下吧。
]]></content>
    
    <summary type="html">
    
      明天要去书展值班，比较郁闷，本来和我们毫不相关的事情，却要我们去干活，这个很不合理。可是目前这个公司就这样的，没办法。在这里呆了快4年了，不合理的事情见的太多了，也懒得去多想了，看大家的说法，国企可能都这个德性，而且私企也慢慢的在学这种风气。到底什么是好的工作环境，真不知道了。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>这</title>
    <link href="http://wdicc.com/another-arch/"/>
    <id>http://wdicc.com/another-arch/</id>
    <published>2006-01-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[debian和arch换来换去，还是觉得arch最舒服，虽然源比较少，可其实真正用到的软件也没那么多，常用的自然有人会考虑作一个包。

使用utf8 的locale的时候，mount win分区需要使用utf8，如下：
<pre class="prettyprint lang-txt">
/dev/hda2 / ext3 defaults 0 1
/dev/hda5 /mnt/d vfat utf8,umask=000 0 0
/dev/hda6 /mnt/e vfat utf8,umask=000 0 0
</pre>

使用gdm的时候，scim的启动可以放到~/.profile里面：
<pre class="prettyprint lang-bash">
export GTK_IM_MODULE=scim
export QT_IM_MODULE=scim
/usr/bin/scim -d
</pre>

mplayer关于宽屏的设置：
<pre class="prettyprint lang-txt">
</pre>

在rc.conf里面适当使用
]]></content>
    
    <summary type="html">
    
      debian和arch换来换去，还是觉得arch最舒服，虽然源比较少，可其实真正用到的软件也没那么多，常用的自然有人会考虑作一个包。

使用utf8 的locale的时候，mount win分区需要使用utf8，如下：
&lt;pre class=&quot;prettyprint lang-t
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>新年了</title>
    <link href="http://wdicc.com/new-year/"/>
    <id>http://wdicc.com/new-year/</id>
    <published>2005-12-31T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[昨天晚上4点多才睡觉，终于看完了 <a href="http://blog.wdicc.com/index.php?pl=73&ct1=5" target="_blank">豪杰春香</a> 。刚过0点的时候发了一堆新年快乐，发现还没睡的人也很多啊，赫赫。

新年要有新的气象，嗯。不过昨晚上kboss啥都木右，看来运气不是很好啊。。。要努力了。
]]></content>
    
    <summary type="html">
    
      昨天晚上4点多才睡觉，终于看完了 &lt;a href=&quot;http://blog.wdicc.com/index.php?pl=73&amp;ct1=5&quot; target=&quot;_blank&quot;&gt;豪杰春香&lt;/a&gt; 。刚过0点的时候发了一堆新年快乐，发现还没睡的人也很多啊，赫赫。

新年要有新的气象，嗯
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Uhello</title>
    <link href="http://wdicc.com/Uhello/"/>
    <id>http://wdicc.com/Uhello/</id>
    <published>2005-12-29T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[之前在网上看到一个网址，就是一个100万像素格子的图片，卖这些格子。忘记网址了，刚才去找了一下发现原来国外很多这种网站，比如 <a href="http://www.pixelsitelinks.com/" target="_blank">http://www.pixelsitelinks.com/</a> 。不过国内还没有看到过。

刚才看到 <a href="http://www.8ie.cn/post/241.html" target="_blank">七巧仔</a> 对 <a href="http://uhello.com/chushibiao/" target="_blank">uhello</a> 的介绍，就去看了看，也满有意思的，呵呵。这个东东全靠那个网站的流量来赚钱了，我看也有51.la的统计，不过看不到。做这个网站的方法到很简单，只要想怎么提高流量就好，呵呵。

有兴趣的可以过去看看，现在还有 <a href="http://uhello.com/forum/viewtopic.php?t=25" target="_blank">优惠</a> 。

做了一个图案。

<center><img src="/wordpress/wp-content/uploads/1264199857.jpg" width="45" height="45"></center>
]]></content>
    
    <summary type="html">
    
      之前在网上看到一个网址，就是一个100万像素格子的图片，卖这些格子。忘记网址了，刚才去找了一下发现原来国外很多这种网站，比如 &lt;a href=&quot;http://www.pixelsitelinks.com/&quot; target=&quot;_blank&quot;&gt;http://www.pixelsite
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>通过mod_limitipconn模块来限制apache的并发连接数</title>
    <link href="http://wdicc.com/apache-limit-module/"/>
    <id>http://wdicc.com/apache-limit-module/</id>
    <published>2005-12-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://bbs.chinaunix.net/viewthread.php?tid=3129

<b>下载mod_limitipconn.c</b>

http://dominia.org/djao/limitipconn.html

<b>修改httpd.conf</b>
<pre class="prettyprint lang-txt">
LoadModule limitipconn_module modules/mod_limitipconn.so

ExtendedStatus On

<ifmodule mod_limitipconn.c="">
    <location somewhere="">
	MaxConnPerIP 3
	# exempting images from the connection limit is often a good
	# idea if your web page has lots of inline images, since these
	# pages often generate a flurry of concurrent image requests
	NoIPLimit image/*
    </location>
#需要注意的是，路径应该是相对服务器的路径。
    <location mp3="">
	MaxConnPerIP 1
	# In this case, all MIME types other than audio/mpeg and video*
	# are exempt from the limit check
	OnlyIPLimit audio/mpeg video
    </location>
</ifmodule></pre>
]]></content>
    
    <summary type="html">
    
      http://bbs.chinaunix.net/viewthread.php?tid=3129

&lt;b&gt;下载mod_limitipconn.c&lt;/b&gt;

http://dominia.org/djao/limitipconn.html

&lt;b&gt;修改httpd.conf&lt;/b&gt;

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>动态iptables 防火墙</title>
    <link href="http://wdicc.com/dynamic-iptables/"/>
    <id>http://wdicc.com/dynamic-iptables/</id>
    <published>2005-12-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www-128.ibm.com/developerworks/cn/linux/network/dif/index.html

<a href="http://www-128.ibm.com/developerworks/cn/linux/network/dif/index.html#author" target="_blank">Daniel Robbins</a>, 总裁兼 CEO, Gentoo Technologies, Inc.

    防火墙非常有趣，但在需要对防火墙规则进行快速且复杂的更改时，您会做些什么？很简单。请使用本文中演示的 Daniel Robbins 的动态防火墙脚本。可以使用这些脚本来增
]]></content>
    
    <summary type="html">
    
      http://www-128.ibm.com/developerworks/cn/linux/network/dif/index.html

&lt;a href=&quot;http://www-128.ibm.com/developerworks/cn/linux/network/dif/i
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>显示一个文件或者文件夹的数字形式的权限</title>
    <link href="http://wdicc.com/usefull-command/"/>
    <id>http://wdicc.com/usefull-command/</id>
    <published>2005-12-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[stat -c %a
]]></content>
    
    <summary type="html">
    
      stat -c %a

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>四道题让你变成超级大猪头，有胆子就来试试啊zz</title>
    <link href="http://wdicc.com/a-joke/"/>
    <id>http://wdicc.com/a-joke/</id>
    <published>2005-12-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[四道题让你变成超级大猪头，有胆子就来试试啊
你是猪头吗? 你现在清醒吗?以下有4道题目，在看完题目后立即作答......不准慢慢想
..ok?看下你是否真的清醒......
　　
　　ready?
　　
　　go! (<font color="#FF0000">慢慢拉下看</font>...)

<br><a id="more"></a>　　第一题:
　　你正在参加赛跑，几惊辛苦， 你终于超过第二位的健儿，
　　你现在是第几位?
　　.
　　.
　　.
　　.
　　.
　　.
　　.
　　.
.
.
.
.
.
.
.
　　answer:
　　
　　如果你答第一，你就完全错啦!如果你超前原本第二的人，你便取代他的位置，即是
第二......
　　
　　第二题:（不可以用多过第一题的时间， 要快!）
　　
　　如果你跑呀跑， 超前最后一名， 而你现在是第几?
　　.
　　.
　　.
　　.
　　.
.
.
.
.
.
.
.
　　.
　　.
　　.answer:
　　
　　如果你答尾二， 你又错啦!
　　你又怎么可能超前最后人，他都是最尾咯...？你怎么还会在他后面?
　　
　　第三题:（开始觉得自己有点猪头了吧......）
　　
　　数学心算题题... 不准用笔，纸或计数器、， 只可以心算......
　　1000 加上40 ......得未... 再加1000 ... 再加30...
　　再多1000... 又再加20... 现在再加多1000... 再加10...
　　总和是多少?
　　马上回答!?
　　
　　.
　　.
　　
.
.
.
.
.
.
.
.
　　.
　　.
　　.
　　.
　　.
　　.5000? 唉...又错啦... ？个计数找个计算器check一下啦......
　　
　　answer.
　　
　　4100 猪头!
　　
　　你真是超笨呀......最后给你一次机会!
　　
　　第四题，（英文题:）
　　
　　mary‘s father has five daughters: 1. nana， 2. nene， 3. nini，
　　4.nono.
　　what is the name of the fifth daughter?
　　
　　nunu?
　　
　　no! of course not.
　　
　　.
　　.
　　.
　　
.
.
.
.
.
.
.
.
　　.
　　.
　　.
　　.
　　answer.
　　
　　her name is mary. read the question again
　　
　　祝贺你终于实现了自己的梦想---做一个大猪头！
]]></content>
    
    <summary type="html">
    
      四道题让你变成超级大猪头，有胆子就来试试啊
你是猪头吗? 你现在清醒吗?以下有4道题目，在看完题目后立即作答......不准慢慢想
..ok?看下你是否真的清醒......
　　
　　ready?
　　
　　go! (&lt;font color=&quot;#FF0000&quot;&gt;慢慢拉下看&lt;/font&gt;...)

&lt;br&gt;
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>写了一篇关于Miranda IM的文章</title>
    <link href="http://wdicc.com/something-about-miranda-im/"/>
    <id>http://wdicc.com/something-about-miranda-im/</id>
    <published>2005-12-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在这里
<a href="http://blog.wdicc.com/mim/Miranda%20IM.htm" target="_blank">http://blog.wdicc.com/mim/Miranda%20IM.htm</a>
]]></content>
    
    <summary type="html">
    
      在这里
&lt;a href=&quot;http://blog.wdicc.com/mim/Miranda%20IM.htm&quot; target=&quot;_blank&quot;&gt;http://blog.wdicc.com/mim/Miranda%20IM.htm&lt;/a&gt;

    
    </summary>
    
    
      <category term="Miranda IM" scheme="http://wdicc.com/tags/Miranda-IM/"/>
    
  </entry>
  
  <entry>
    <title>圣诞了</title>
    <link href="http://wdicc.com/the-birthday-of-Jesus-Christ/"/>
    <id>http://wdicc.com/the-birthday-of-Jesus-Christ/</id>
    <published>2005-12-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前天下班就跑去xh那里了，吃了饭，他们在打牌，我在看片子，一会就睡著了，迷迷糊糊的，被托了起来，说要去k歌了，唉，那个郁闷。

去了白金，券不让用，转去钱柜，k了3小时，快5电的时候才走。钱柜新添了一个菜，炸鸡腿，和麦当劳里面的差不多，味道不错，可以去尝尝，呵呵。

昨天下午去火锅，抽中一个一等奖，送了50块钱的免餐券，呵呵，不错不错。不过可惜啊，特等奖是一个电磁炉，盯上好久了，唉。。。
]]></content>
    
    <summary type="html">
    
      前天下班就跑去xh那里了，吃了饭，他们在打牌，我在看片子，一会就睡著了，迷迷糊糊的，被托了起来，说要去k歌了，唉，那个郁闷。

去了白金，券不让用，转去钱柜，k了3小时，快5电的时候才走。钱柜新添了一个菜，炸鸡腿，和麦当劳里面的差不多，味道不错，可以去尝尝，呵呵。

昨天下午去火
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>半夜偷偷下载A片 被老婆撞个正着zz</title>
    <link href="http://wdicc.com/a-joke-about-a-film/"/>
    <id>http://wdicc.com/a-joke-about-a-film/</id>
    <published>2005-12-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[有一次，是在一个论坛上，看到一个撩人的帖子：“一群青春玉女，赤身裸体，三点全露，年龄绝不超过20岁，风吹欲破的肌肤，活泼自然的表情，让人欲罢不能……绝无病毒，无需注册。”不禁怦然心动，于是悄悄记下了下载地址，等到晚上，老婆和快到周岁的孩子全睡了，才小心翼翼地打开链接，果然无需注册，有300多兆的内容，好家伙，是一部长片啊！我的机子比较老，不过我有耐心等，我冲了杯咖啡，点了根烟，时间一分一秒地过去，屏幕上小纸片一张一张地飞，我似乎看到了一个个美女。
　　
整整用了一个多小时，眼看着片子就要下载完了。

“半夜了，怎么还不睡啊？”不知什么时候老婆进了书房，吓了我一大跳，真想立即就关掉那个页面，可又舍不得，毕竟用了我一个多小时的时间啊。
　　
老婆看出了我的异常，干脆走近了电脑：“搞什么名堂？”屏幕上出现了对话框：“是否打开？”我正想解释，老婆已点击了“打开”，我的脸一下子红了起来，半夜三更下载这种东西可真够无聊的！
　　
我尴尬地盯着电脑，画面渐渐打开，一个非常年轻而又漂亮的护士出现在画面上，我的脸红到了极点，只见那护士做了个优美的手势，随即出现一行大字：“怎样给婴儿洗澡？”画面上一个个男孩女孩，赤身裸体，果真是不超过20岁，三点全露啊。
　　
老婆忍不住笑了起来：“咱这孩子长大了不孝顺可真对不起你的一番苦心啊！”
]]></content>
    
    <summary type="html">
    
      有一次，是在一个论坛上，看到一个撩人的帖子：“一群青春玉女，赤身裸体，三点全露，年龄绝不超过20岁，风吹欲破的肌肤，活泼自然的表情，让人欲罢不能……绝无病毒，无需注册。”不禁怦然心动，于是悄悄记下了下载地址，等到晚上，老婆和快到周岁的孩子全睡了，才小心翼翼地打开链接，果然无需注册
    
    </summary>
    
    
      <category term="Joke" scheme="http://wdicc.com/tags/Joke/"/>
    
  </entry>
  
  <entry>
    <title>小重山--【宋】岳飞</title>
    <link href="http://wdicc.com/a-poem-by-yuefei/"/>
    <id>http://wdicc.com/a-poem-by-yuefei/</id>
    <published>2005-12-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[　　昨夜寒蛩不住鸣。惊回千里梦，已三更。起来独自绕阶行。人悄悄，帘外月胧明。

　　白首为功名，旧山松竹老，阻归程。欲将心事付瑶琴。知音少，弦断有谁听。
]]></content>
    
    <summary type="html">
    
      　　昨夜寒蛩不住鸣。惊回千里梦，已三更。起来独自绕阶行。人悄悄，帘外月胧明。

　　白首为功名，旧山松竹老，阻归程。欲将心事付瑶琴。知音少，弦断有谁听。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>上网实在无聊，看到点东西</title>
    <link href="http://wdicc.com/somethins-on-network/"/>
    <id>http://wdicc.com/somethins-on-network/</id>
    <published>2005-12-17T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[现在白天上网，晚上上网，做了梦了还在打网游，已经快上到了不知道该上什么网页的地步了，错了，不是快要，应该说是已经是了。

打开浏览器，去几个常去的网址浏览一下，搜索一下自己感兴趣的关键字，通常都是没什么所获，“求救”“帮我啊”“大牛来看看”，大部分都是此类，早已经失去了回帖的兴趣。

刚无意中想起来上次某人的blog提到的sina的读书频道，或许那里有几本好看的？想起来了曾经看过的《毕业了一起失恋》《龌龊后的清纯》《风往南吹》之类，或者还能看到不错的咚咚呢。

书没看到感兴趣的，倒是看到了大家的兴趣，呵呵。左下脚的经典热词里面的内容反映了大家的兴趣

<div style="padding-left:50; background-color:#F0F0F0;">经典热词
性 美女 外遇 性丑闻 同居
爆笑 激情 情人 避孕 怀孕
魔幻 恐怖 侦探 笑话 武侠
单身女性 女学生 MBA 面试
原创 减肥 家居 服饰 时尚
小资 星座 影视 明星 名人
情色 写真 广告 求职 白领
时政 军事 修养 高考 留学
英语 考研 哈佛 女生 校花
音乐 戏剧 伟人 作家 体育
地理 北京 成都 心理素质
上海男人 周杰伦 海蒂性学
人体艺术 性教育 女博士</div>

色情网站不让开，那就打擦边球好了，其实现实生活也是如此。这就让我想起来了昨天刚看得尼古拉斯凯其主演的《战争之王》，打擦边球才能赚到别人几倍的利润而又不被指认违反任何法律。

在以前资本家说“如果有300%的利润，那就敢践踏人间的一切法律”，现在就不是这样了，大家都是文明人，都是斯文人，也都是聪明人，所以要做的是不践踏法律的情况下，拿到300%或者更多的利润。

yy一下，大家不都喜欢yy么？yy无际限...
]]></content>
    
    <summary type="html">
    
      现在白天上网，晚上上网，做了梦了还在打网游，已经快上到了不知道该上什么网页的地步了，错了，不是快要，应该说是已经是了。

打开浏览器，去几个常去的网址浏览一下，搜索一下自己感兴趣的关键字，通常都是没什么所获，“求救”“帮我啊”“大牛来看看”，大部分都是此类，早已经失去了回帖的兴趣
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>网络好慢阿</title>
    <link href="http://wdicc.com/sloooow-network/"/>
    <id>http://wdicc.com/sloooow-network/</id>
    <published>2005-12-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[唉，真郁闷。以前长宽的时候还天天上内网骂，现在adsl都没地方骂。好慢的adsl阿。。。
]]></content>
    
    <summary type="html">
    
      唉，真郁闷。以前长宽的时候还天天上内网骂，现在adsl都没地方骂。好慢的adsl阿。。。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>昨天老婆的第一笔工资</title>
    <link href="http://wdicc.com/first-pay/"/>
    <id>http://wdicc.com/first-pay/</id>
    <published>2005-12-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[没发多少钱，给我买了一个鞋子，一条裤子。本来还要买衣服的，我都说不喜欢就没买。嗯，要记下来，记下来。
]]></content>
    
    <summary type="html">
    
      没发多少钱，给我买了一个鞋子，一条裤子。本来还要买衣服的，我都说不喜欢就没买。嗯，要记下来，记下来。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
  </entry>
  
  <entry>
    <title>为debian unstable做镜像</title>
    <link href="http://wdicc.com/mirror-for-debian/"/>
    <id>http://wdicc.com/mirror-for-debian/</id>
    <published>2005-12-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[#HOST=opensource.nchc.org.tw
HOST=debian.nctu.edu.tw
#HOST_NONUS=opensource.nchc.org.tw
#HOST_NONUS=debian.cn99.com
HOST_NONUS=debian.nctu.edu.tw

DISTS="unstable"
DISTS_NONUS="unstable/non-US"
DISTS_SEC="unstable/updates"

ARCHS="i386"

MIRROR_ROOT='/data/debian/debian'
MIRROR_ROOT_NONUS='/data/debian/debian-non-US'

OPTIONS="--getcontents --progress --nosource --method=http -s main,contrib,non-free --ignore-release-gpg"


#ADDDIRS="dists/unstable/main/disks-i386" 


echo "Processing standard using $HOST" 
/usr/bin/debmirror --host=$HOST --dist=$DISTS --arch=$ARCHS $OPTIONS -r /debian $MIRROR_ROOT

echo "Processing non-US using $HOST_NONUS" 
/usr/bin/debmirror --host=$HOST_NONUS --dist=$DISTS_NONUS --arch=$ARCHS $OPTIONS -r /debian-non-US $MIRROR_ROOT_NONUS

echo "Processing xfce4.2 using www.os-works.com"

/usr/bin/debmirror -a i386 -s main -h www.os-works.com -d testing -r /debian --progress -e http --ignore-release-gpg /data/debian/xf
ce4.2
]]></content>
    
    <summary type="html">
    
      #HOST=opensource.nchc.org.tw
HOST=debian.nctu.edu.tw
#HOST_NONUS=opensource.nchc.org.tw
#HOST_NONUS=debian.cn99.com
HOST_NONUS=debian.nctu.e
    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>为Archlinux做镜像</title>
    <link href="http://wdicc.com/mirror-for-arch/"/>
    <id>http://wdicc.com/mirror-for-arch/</id>
    <published>2005-12-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-bash">
MIRROR_PATH=/data/archlinux
rsync -avz rsync.archlinux.org::current $MIRROR_PATH/current/
rsync -avz rsync.archlinux.org::extra $MIRROR_PATH/extra/
rsync -avz rsync.archlinux.org::ftp/testing $MIRROR_PATH/testing/
rsync -avz rsync.archlinux.org::ftp/unstable $MIRROR_PATH/unstable/

#LOCAL_PATH=/data/archlinux
#rsync -avz download.ourlinux.net::archlinux-current $LOCAL_PATH/current
#rsync -avz download.ourlinux.net::archlinux-extra $LOCAL_PATH/extra
#rsync -avz download.ourlinux.net::archlinux-unstable $LOCAL_PATH/unstable
#rsync -avz download.ourlinux.net::archlinux-testing $LOCAL_PATH/testing
#rsync -avz download.ourlinux.net::archlinux-alcle $LOCAL_PATH/alcle</pre>
]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
MIRROR_PATH=/data/archlinux
rsync -avz rsync.archlinux.org::current $MIRROR_PATH/current/
rsync -avz rsy
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>tatter tools中的一个小bug</title>
    <link href="http://wdicc.com/a-bug-of-tatter-tools/"/>
    <id>http://wdicc.com/a-bug-of-tatter-tools/</id>
    <published>2005-12-13T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[中午在tatter发帖子的时候发现有时code
]]></content>
    
    <summary type="html">
    
      中午在tatter发帖子的时候发现有时code

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>生成缩略图和给图片</title>
    <link href="http://wdicc.com/add-water-mark/"/>
    <id>http://wdicc.com/add-water-mark/</id>
    <published>2005-12-12T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一个自动生成缩略图的程序

<br><a id="more"></a><pre lang="php">
<?

$FILENAME="image_name";

// 生成图片的宽度
$RESIZEWIDTH=400;

// 生成图片的高度
$RESIZEHEIGHT=400;


function ResizeImage($im,$maxwidth,$maxheight,$name){
	$width = imagesx($im);
	$height = imagesy($im);
	
	if(($maxwidth && $width > $maxwidth) || ($maxheight && $height > $maxheight)){
		if($maxwidth && $width > $maxwidth){
			$widthratio = $maxwidth/$width;
			$RESIZEWIDTH=true;
		}

		if($maxheight && $height > $maxheight){
			$heightratio = $maxheight/$height;
			$RESIZEHEIGHT=true;
		}

		if($RESIZEWIDTH && $RESIZEHEIGHT){
			if($widthratio < $heightratio){
				$ratio = $widthratio;
			}else{
				$ratio = $heightratio;
			}
		}elseif($RESIZEWIDTH){
			$ratio = $widthratio;
		}elseif($RESIZEHEIGHT){
			$ratio = $heightratio;
		}
		
		$newwidth = $width * $ratio;
		$newheight = $height * $ratio;
		
		if(function_exists("imagecopyresampled")){
			$newim = imagecreatetruecolor($newwidth, $newheight);
			imagecopyresampled($newim, $im, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
		}else{
			$newim = imagecreate($newwidth, $newheight);
			imagecopyresized($newim, $im, 0, 0, 0, 0, $newwidth, $newheight, $width, $height);
		}
		
		ImageJpeg ($newim,$name . ".jpg");
		ImageDestroy ($newim);
	}else{
		ImageJpeg ($im,$name . ".jpg");
	}
}



if($_FILES[&#39;image&#39;][&#39;size&#39;]){
	if($_FILES[&#39;image&#39;][&#39;type&#39;] == "image/pjpeg"){
		$im = imagecreatefromjpeg($_FILES[&#39;image&#39;][&#39;tmp_name&#39;]);
	}elseif($_FILES[&#39;image&#39;][&#39;type&#39;] == "image/x-png"){
		$im = imagecreatefrompng($_FILES[&#39;image&#39;][&#39;tmp_name&#39;]);
	}elseif($_FILES[&#39;image&#39;][&#39;type&#39;] == "image/gif"){
		$im = imagecreatefromgif($_FILES[&#39;image&#39;][&#39;tmp_name&#39;]);
	}
	
	if($im){
		if(file_exists("$FILENAME.jpg")){
			unlink("$FILENAME.jpg");
		}
		ResizeImage($im,$RESIZEWIDTH,$RESIZEHEIGHT,$FILENAME);
		ImageDestroy ($im);
	}
}

?>
</pre>

自动
]]></content>
    
    <summary type="html">
    
      一个自动生成缩略图的程序

&lt;br&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>推荐一个韩剧《豪杰春香》</title>
    <link href="http://wdicc.com/recommend-a-Korean-sitcom/"/>
    <id>http://wdicc.com/recommend-a-Korean-sitcom/</id>
    <published>2005-12-11T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[看完了《浪漫满屋》暂时没的看了。无意中在tv版看到一拖人推荐《豪杰春香》，就试着down了2集看看。第一集看了一半就喜欢上这个片子了，哈哈。

这个片子的内容和《浪漫满屋》的情节可能差不多，也是两个人在不情愿下结了婚，然后blablabla。。。，里面mm挺pp，gg挺ss，男女应该都喜欢看，呵呵。


<center><img src="/wordpress/wp-content/uploads/1137632615.jpg" width="590" height="442"></center>

<center><img src="/wordpress/wp-content/uploads/1134710887.jpg" width="500" height="350"></center>
]]></content>
    
    <summary type="html">
    
      看完了《浪漫满屋》暂时没的看了。无意中在tv版看到一拖人推荐《豪杰春香》，就试着down了2集看看。第一集看了一半就喜欢上这个片子了，哈哈。

这个片子的内容和《浪漫满屋》的情节可能差不多，也是两个人在不情愿下结了婚，然后blablabla。。。，里面mm挺pp，gg挺ss，男女
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>为网站申请了一个域名</title>
    <link href="http://wdicc.com/buy-a-domain-name/"/>
    <id>http://wdicc.com/buy-a-domain-name/</id>
    <published>2005-12-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[wdicc.com

在yahoo申请的，需要支付$，不过有信用卡就可以。5年$15不到，平均一年$3，也就是￥20多块钱。国内申请的话，通常.com的域名需要￥70多。所以要申请的抓紧了。

申请的地址：<a href="http://smallbusiness.yahoo.com/domains" target="_blank">http://smallbusiness.yahoo.com/domains</a>

5年之后续费似乎是￥80多。不过谁知道5年后是个什么行情了，呵呵。
]]></content>
    
    <summary type="html">
    
      wdicc.com

在yahoo申请的，需要支付$，不过有信用卡就可以。5年$15不到，平均一年$3，也就是￥20多块钱。国内申请的话，通常.com的域名需要￥70多。所以要申请的抓紧了。

申请的地址：&lt;a href=&quot;http://smallbusiness.yahoo.c
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>尝试了一下用微波炉泡方便面</title>
    <link href="http://wdicc.com/micro-wave%20oven-noodles/"/>
    <id>http://wdicc.com/micro-wave oven-noodles/</id>
    <published>2005-12-09T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前天去大中买了一个微波炉，格兰士的，花了￥600。之前本来打算花个￥300就搞定的，结果去了一看就选中这个了。那个导购mm也比较会推销，从￥399到￥499到￥599一直推，最后成功推销掉了￥599的。不过老婆也不是吃素的，从刚开始只送一个蒸锅，到最后送了2个蒸锅，2套碗，1个蒸蛋器，再加一个热牛奶的，呵呵。太牛啦。。

昨天试了一下煮方便面。他那个上头有个方便面的按钮，其实也就是为了这些按钮才买的这个，因为不会用，时间长短上自己也不会把握，所以弱智一点机器应该还比较好用。。。

先找了一个碗，放了两带方便面，放了水进去，按照说明书，200克按了两下那个按钮，定时是3分钟。自己还在琢磨呢，这玩意还真不错，要是烧水3分钟也烧不开啊，这个就能煮好方便面了，不错。

等了一会提示好了，打开一看。。。。水还没热那。。。微波炉耍我啊？再放进去，又按了一下那个按钮，定时2分钟，继续等。

等一下又提示好了，打开再看。。。。水刚刚有点温度。。。有点郁闷了，怎么还没好？再放进去，又按了一下那个按钮，2分钟，再等。。。

又提示好了。。。打开看看。。。。。还没好。。。水是热了，可是方便面还没泡开呢。。。再再次放进去，又按了一下，再再等。。

又提示好了。。。打开看看，唉将就吃吧。。

总结一下：总共大概花了10分钟才好，下次煮就知道了。不过他那个按钮有问题啊，难道是让我放热水进去？。。。。
]]></content>
    
    <summary type="html">
    
      前天去大中买了一个微波炉，格兰士的，花了￥600。之前本来打算花个￥300就搞定的，结果去了一看就选中这个了。那个导购mm也比较会推销，从￥399到￥499到￥599一直推，最后成功推销掉了￥599的。不过老婆也不是吃素的，从刚开始只送一个蒸锅，到最后送了2个蒸锅，2套碗，1个蒸
    
    </summary>
    
    
      <category term="Food" scheme="http://wdicc.com/tags/Food/"/>
    
  </entry>
  
  <entry>
    <title>总算找到Miranda中文的组织了</title>
    <link href="http://wdicc.com/miranda-china/"/>
    <id>http://wdicc.com/miranda-china/</id>
    <published>2005-12-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://forums.miranda-im.org/showthread.php?t=1144

the characters under is chinese

我是从2001年初开始用miranda的 当时还是0.1
还是miranda icq 的名字
现在miranda 慢慢发展起来了 我仍然在用她 很喜欢

不过我在这里仅仅遇到过几个 香港朋友
我想这里应该不少说中国话的朋友吧
我很想和你们多交流一下 也想在中国推广一下 miranda
不象现在 一些小孩子把miranda＋qqplugin用来挂qq 或是简单的使用当成msn替代品
我们要参与进来 我不是程序员 不过也算为miranda做了一点小的customize

我希望和这里的中国朋友 包括大陆 台湾 香港 澳门 华侨等等 交流一下

感谢stark开发qq新插件 需要的朋友可以去下载 讨论贴在靠后的地方找

下载地址 http://starkwong.ivehost.net/mimqq/


我的
icq 698253
msn jerrycutest@hotmail.com
email: jdepot@21cn.com

还有个qq群 2571213


]]></content>
    
    <summary type="html">
    
      http://forums.miranda-im.org/showthread.php?t=1144

the characters under is chinese

我是从2001年初开始用miranda的 当时还是0.1
还是miranda icq 的名字
现在mirand
    
    </summary>
    
    
      <category term="Miranda IM" scheme="http://wdicc.com/tags/Miranda-IM/"/>
    
  </entry>
  
  <entry>
    <title>grep的一个用法</title>
    <link href="http://wdicc.com/use-grep/"/>
    <id>http://wdicc.com/use-grep/</id>
    <published>2005-12-05T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[在目前的目錄及子目錄下，找尋所有的檔案，並顯示含有 Keyword 的檔案列表

grep -r "Keyword" *
]]></content>
    
    <summary type="html">
    
      在目前的目錄及子目錄下，找尋所有的檔案，並顯示含有 Keyword 的檔案列表

grep -r &quot;Keyword&quot; *

    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>Linux下面如何制作ico图标？</title>
    <link href="http://wdicc.com/make-ico-in-linux/"/>
    <id>http://wdicc.com/make-ico-in-linux/</id>
    <published>2005-12-04T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[首先用画图工具制作png or gif文件，然后用netpbm转一下就可以了。

netpbm可以从这里下载：netpbm.sf.net

在debian下面，直接apt-get install netpbm即可。

然后这样转换：

pngtopnm myicon.png  | ppmtowinicon -output favicon.ico

转自:http://www.bloghome.cn/index.php?op=ViewArticle&articleId=14&blogId=5
]]></content>
    
    <summary type="html">
    
      首先用画图工具制作png or gif文件，然后用netpbm转一下就可以了。

netpbm可以从这里下载：netpbm.sf.net

在debian下面，直接apt-get install netpbm即可。

然后这样转换：

pngtopnm myicon.png  |
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>弄了一个photo album</title>
    <link href="http://wdicc.com/make-a-photo-album/"/>
    <id>http://wdicc.com/make-a-photo-album/</id>
    <published>2005-12-03T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[居然弄到了1点半，天那，不过总算弄好了，呵呵

地址是<a href="http://stefing.3322.org/pixelpost/index.php" target="_blank">http://stefing.3322.org/pixelpost/index.php</a>。

用的是pixelpost，从他网站上下了一个模板，改吧改吧，看着效果还可以。

又换了一个模板，嘿嘿。

tt
]]></content>
    
    <summary type="html">
    
      居然弄到了1点半，天那，不过总算弄好了，呵呵

地址是&lt;a href=&quot;http://stefing.3322.org/pixelpost/index.php&quot; target=&quot;_blank&quot;&gt;http://stefing.3322.org/pixelpost/index.php
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>添加了一些表情，呵呵</title>
    <link href="http://wdicc.com/add-some-emotion/"/>
    <id>http://wdicc.com/add-some-emotion/</id>
    <published>2005-12-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[
]]></content>
    
    <summary type="html">
    
      

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>一页纸多一点的博士论文</title>
    <link href="http://wdicc.com/1-page-paper/"/>
    <id>http://wdicc.com/1-page-paper/</id>
    <published>2005-12-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一 

故事发生在二十世纪初的法国。巴黎。一样的延续着千百年的灯红酒绿，香榭丽舍大道
上 散发着繁华和暧昧，红磨坊里弥漫着躁动与彷徨。 


而在此时的巴黎，有一个年轻人，名字叫做德布罗意(DeBroglie)，从他的名字当中可以
看 出这是一个贵族，事实上德布罗意的父亲正是法国的一个伯爵，并且是正是一位当权
的内 阁部长。这样一个不愁吃不愁穿只是成天愁着如何打发时光的花花公子自然要找一
个能消 耗精力的东西来磨蹭掉那些无聊的日子(其实象他这样的花花公子大约都会面临
这样的问题 )。德布罗意则找到了一个很酷的事业---研究中世纪史。据说是因为中世纪
史中有着很多 神秘的东西吸引着这位年轻人。 

<br><a id="more"></a>时间一转就到了1919，这是一个科学界急剧动荡动着的年代。就在这一年，德布罗意突
然 移情别恋对物理产生了兴趣，尤其是感兴趣于当时正流行的量子论。具体来说就是感
兴趣 于一个在当时很酷的观点：光具有粒子性。 


这一观点早在十几年前由普朗克提出，而后被爱因斯坦用来解释了光电效应，但即便如
此 ，也非常不见容于物理学界各大门派。德布罗意倒并不见得对这一观点的物理思想有
多了 解，也许他的理解也仅仅就是理解到这个观点是在说“波就是粒子”。 


或许是一时冲动，或许是因为年轻而摆酷，德布罗意来到了一派宗师朗之万门下读研究
生 。从此，德布罗意走出了一道足以让让任何传奇都黯然失色的人生轨迹。 


二 

历史上德布罗意到底花了多少精力去读他的研究生也许已经很难说清，事实上德布罗意
在 他的5年研究生生涯中几乎是一事无成。事实上也可以想象，一个此前对物理一窍不
通的中 世纪史爱好者很难真正的在物理上去做些什么。白驹过隙般的五年转眼就过去了
，德布罗 意开始要为他的博士论文发愁了。 


其实德布罗意大约只是明白普朗克爱因斯坦那帮家伙一直在说什么波就是粒子，(事实上
对 于普朗克大约不能用“一直”二字，此时的普朗克已经完全抛弃自己当初的量子假设
，又 回到了经典的旧框架。)而真正其中包含的物理，他能理解多少大约只有上帝清楚
。 


五年的尽头，也就是在1924，德布罗意终于提交了自己的博士论文。他的博士论文只有
一 页纸多一点，不过可以猜想这一页多一点的一份论文大约已经让德布罗意很头疼了，
只可 惜当时没有枪手可以雇来帮忙写博士论文。他的博士论文只是说了一个猜想，既然
波可以 是粒子，那么反过来粒子也可以是波。 


而进一步德布罗意提出波的波矢和角频率与粒子动量和能量的关系是： 

动量＝普朗克常数/波矢 

能量＝普朗克常数*角频率 

这就是他的论文里提出的两个公式。 

而这两个公式的提出也完全是因为在爱因斯坦解释光电效应的时候提出光子的动量和能
量 与光的参数满足这一关系。可以想象这样一个博士论文会得到怎样的回应。 


在对论文是否通过的投票之前，德布罗意的老板朗之万就事先得知论文评审委员会的六
位 教授中有三位已明确表态会投反对票。 


本来在欧洲，一个学生苦读数年都拿不到学位是件很正常的事情，时至今日的欧洲也依
然 如此。何况德布罗意本来就是这么一个来混日子的花花公子。 


然而这次偏偏又有些不一样---德布罗意的父亲又是一位权高望众的内阁部长，而德布罗
意 在此厮混五年最后连一个Ph.D都没拿到，双方面子上自然也有些挂不住。情急之中，
朗之 万往他的一个好朋友那里寄了一封信。当初的朗之万是不是碍于情面想帮德布罗意
混得一 个PhD已不得而知，然而事实上，这一封信却改变了科学发展的轨迹。 


三 

这封信的收信人是爱因斯坦。信的内容大致如下： 

尊敬的爱因斯坦阁下： 

在我这里有一位研究生，已经攻读了五年的博士学位，如今即将毕业，在他提交的毕业
论 文中有一些新的想法…请对他的论文作出您的评价。 


另外顺便向您提及，该研究生的父亲是弊国的一位伯爵，内阁的**部长，若您……，将
来 您来法国定会受到隆重的接待 朗之万 


在信中，大约朗之万的潜台词似乎就是如果您不肯给个面子，呵呵，以后就甭来法国了
。 不知是出于知趣，还是出于当年自己的离经叛道而产生的惺惺相惜，爱因斯坦很客气
回了 一封信，大意是该论文里有一些很新很有趣的思想云云。 


此时的爱因斯坦虽不属于任何名门望派，却已独步于江湖，颇有威望。有了爱因斯坦的
这 一封信，评审委员会的几位教授也不好再多说些什么了。于是，皆大欢喜。 


浪荡子弟德布罗意就这样攻读下了他的PhD(博士)。而按照当时欧洲的学术传统，朗之万
则 将德布罗意的博士论文印成若干份分寄到了欧洲各大学的物理系。大约所有人都以为
事情 会就此了结，多少年以后德布罗意那篇很新很有趣的博士论文也就被埋藏到了档案
堆里了 。德布罗意大约也就从此以一个PhD的身份继续自己的浪荡生活。但历史总是喜
欢用偶然来 开一些玩笑，而这种玩笑中往往也就顺带着改变了许多人的命运。在朗之万
寄出的博士论 文中，有一份来到了维也纳大学。 


四 

1926年初。维也纳。当时在维也纳大学主持物理学术活动的教授是德拜，他收到这份博
士 论文后，将它交给了他的组里面一位已经年届中年的讲师。 


这位讲师接到的任务是在两周后的Seminar(学术例会)上将该博士论讲一下。这位老讲师
大 约早已适应了他现在这种不知算是平庸还是算是平静的生活，可以想象，一个已到不
惑之 年而仍然只在讲师的位置上晃荡的人，其学术前途自然是朦胧而晦暗。而大约也正
因为这 位讲师的这种地位才使得它可以获得这个任务，因为德拜将任务交给这位讲师时
的理由正 是你现在研究的问题不很重要，不如给我们讲讲德布罗意的论文吧。这位讲师
的名字叫做 ---薛定谔(Schrodinger)！ 


在接下来的两周里，薛定谔仔细的读了一下德布罗意的博士论文，其实从内容上来讲也
许 根本就用不上“仔细”二字，德布罗意的这篇论文只不过一页纸多一点，通篇提出的
式子 也不过就两个而已，并且其原型是已经在爱因斯坦发表的论文中出现过的。 


然而论文里说的话却让薛定谔一头雾水，薛定谔只知道德布罗意大讲了一通波即粒子，
粒 子即波，除此之外则是不知所云。 


两周之后，薛定谔硬着头皮把这篇论文的内容在Seminar上讲了一下，讲者不懂，听者自
然 也是云里雾里，而老板德拜则做了一个客气的评价：这个年轻人的观点还是有些新颖
的东 西的，虽然显得很孩子气，当然也许他需要更深入一步，比如既然提到波的概念，
那么总 该有一个波动方程吧。多年以后有人问德拜是否后悔自己当初作出的这一个评论
，德拜自 我解嘲的说，你不觉得这是一个很好的评论吗？并且，德拜建议薛定谔做一做
这个工作， 在两周以后的seminar上再讲一下。 


两周以后。薛定谔再次在seminar上讲解德布罗意的论文，并且为德布罗意的波找了一个
波 动方程。这个方程就是薛定谔方程！ 


当然，一开始德布罗意的那篇论文就已经认为是垃圾，而从垃圾产生出来的自然也不会
离 垃圾太远，于是没人真正把这个硬生生给德布罗意的波套上的方程当一回事，甚至还
有人 顺口编了一首打油诗讽刺薛定谔的方程： 


欧文用他的psi，计算起来真灵通：但psi真正代表什么，没人能够说得清。(欧文就是薛
定 谔，psi是薛定谔波动方程中的一个变量)。故事的情节好像又一次的要归于平庸了，
然而 平庸偏偏有时候就成了奇迹的理由。大约正是薛定谔的平庸使得它对自己的这个波
动方程 的平庸有些心有不甘，他决定再在这个方程中撞一撞运气。 


五 

上面讲到的情节放到当时的大环境中来看就好像是湖水下的一场大地震---从湖面上看来
却 是风平浪静。下面请允许我暂时停止对老讲师薛定谔的追踪，而回过头来看一看这两
年发 生在物理学界这个大湖表面的风浪。 


此前，玻尔由普朗克和爱因斯坦的理论的启发提出了著名的三部曲，解释了氢光谱，在
这 十几年的发展当中，由玻尔掌门的哥本哈根学派已然是量子理论界的少林武当。 


1925，玻尔的得意弟子海森堡提出了著名的矩阵力学，进一步抛弃经典概念，揭示量子
图 像，精确的解释了许多现象，已经成为哥本哈根学派的镇门之宝---量子届的“屠龙
宝刀” 。不过在当时懂矩阵的物理学家没有几个，所以矩阵力学的影响力仍然有限。事
实上就是 海森堡本人也并不懂矩阵，而只是在他的理论出炉之后哥本哈根学派的另一位
弟子玻恩告 诉海森堡他用的东西在数学中就是矩阵。 


再回过头来再关注一下我们那个生活风平浪静的老讲师薛定谔在干些什么---我指的是在
薛 定谔讲解他的波动方程之后的两个星期里。事实上此时的他正浸在温柔乡中---带着
他的情 妇在维也纳的某个滑雪场滑雪。不知道是宜人的风景，总之是冥冥之中有某种东
西，给了 薛定谔一个灵感，而就是这一个灵感，改变了物理学发展的轨迹。薛定谔从他
的方程中得 出了玻尔的氢原子理论！ 


六 

倚天一出，天下大惊。从此谁也不敢再把薛定谔的波动方程当成nonsense了。哥本哈根
学 派的掌门人玻尔更是大为惊诧，于是将薛定谔请到哥本哈根，详细切磋量子之精妙。
然而 让玻尔遗憾的是，在十天的漫长切磋中，两个人根本都不懂对方在说些什么。在一
场让两 个人都疲惫不堪却又毫无结果的哥本哈根论剑之后，薛定谔回到了维也纳。 


薛定谔回到了维也纳之后仍然继续做了一工作，他证明了海森堡的矩阵力学和他的波动
方 程表述的量子论其实只是不同的描述方式。从此倚天、屠龙合而为一。 


此后，薛定谔虽也试图从更基本的假设出发导出更基本的方程，但终究没有成功，而不
久 ，他也对这个失去了兴趣，转而去研究生命是什么。历史则继续着演义他的历史喜剧
。德 布罗意，薛定谔都在这场喜剧中成为诺奖得主而名垂青史。 


尾声 

其实在这一段让人啼笑皆非的历史当中，上帝还是保留了某种公正的。薛定谔得出它的
波 动方程仅在海森堡的矩阵力学的的诞生一年之后，倘若上帝把这个玩笑开得更大一点
，让 薛定谔在1925年之前就导出薛定谔方程，那恐怕矩阵力学就根本不可能诞生了(波
动方程也 就是偏微分方程的理论是为大多数物理学家所熟悉的，而矩阵在当时则没有多
少人懂)。如 此则此前在量子领域已辛苦奋斗了十几年的哥本哈根学派就真要吐血了！
薛定谔方程虽然 搞出了这么一个波动方程，却并不能真正理解这个方程精髓之处，而对
它的方程给出了一 个错误的解释---也许命中注定不该属于他的东西终究就不会让他得
到。对薛定谔方程的正 确解释是有哥本哈根学派的玻恩作出的。(当然玻恩的解释也让
物理界另一位大师---爱因 斯坦极为震怒，至死也念念不忘“上帝不会用掷色子来决定
这个世界的”，此为后话)。 更基本的量子力学方程，也就是薛定谔试图获得但终究无
力企及的的基本理论，则是由哥 本哈根学派的另一位少壮派弟子---狄拉克导出的，而
狄拉克则最终领袖群伦，建起了了量 子力学的神殿。
]]></content>
    
    <summary type="html">
    
      一 

故事发生在二十世纪初的法国。巴黎。一样的延续着千百年的灯红酒绿，香榭丽舍大道
上 散发着繁华和暧昧，红磨坊里弥漫着躁动与彷徨。 


而在此时的巴黎，有一个年轻人，名字叫做德布罗意(DeBroglie)，从他的名字当中可以
看 出这是一个贵族，事实上德布罗意的父亲正是法国的一个伯爵，并且是正是一位当权
的内 阁部长。这样一个不愁吃不愁穿只是成天愁着如何打发时光的花花公子自然要找一
个能消 耗精力的东西来磨蹭掉那些无聊的日子(其实象他这样的花花公子大约都会面临
这样的问题 )。德布罗意则找到了一个很酷的事业---研究中世纪史。据说是因为中世纪
史中有着很多 神秘的东西吸引着这位年轻人。 

&lt;br&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>wget 使用</title>
    <link href="http://wdicc.com/use-wget/"/>
    <id>http://wdicc.com/use-wget/</id>
    <published>2005-12-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[http://www.linuxfans.org/nuke/modules.php?name=Forums&file=viewtopic&t=88813

$ wget --help
GNU Wget 1.9.1，非交互式的网络文件下载工具。
用法： wget [选项]... [URL]...

长选项必须用的参数在使用短选项时也是必须的。

启动：
  -V,  --version           显示 Wget 的版本并且退出。
  -h,  --help              打印此帮助。
  -b,  -background         启动后进入后台操作。
  -e,  -execute=COMMAND    运行‘.wgetrc’形式的命令。

日志记录及输入文件：
  -o,  --output-file=文件     将日志消息写入到指定文件中。
  -a,  --append-output=文件   将日志消息追加到指定文件的末端。
  -d,  --debug                打印调试输出。
  -q,  --quiet                安静模式(不输出信息)。
  -v,  --verbose               详细输出模式(默认)。
  -nv, --non-verbose          关闭详细输出模式，但不进入安静模式。
  -i,  --input-file=文件      下载从指定文件中找到的 URL。
  -F,  --force-html           以 HTML 方式处理输入文件。
  -B,  --base=URL             使用 -F -i 文件选项时，在相对链接前添加指定的 URL。

下载：
  -t,  --tries=次数             配置重试次数（0 表示无限）。
       --retry-connrefused      即使拒绝连接也重试。
  -O   --output-document=文件   将数据写入此文件中。
  -nc, --no-clobber             不更改已经存在的文件，也不使用在文件名后
                                添加 .#（# 为数字）的方法写入新的文件。
  -c,  --continue               继续接收已下载了一部分的文件。
       --progress=方式          选择下载进度的表示方式。
  -N,  --timestamping           除非远程文件较新，否则不再取回。
  -S,  --server-response        显示服务器回应消息。
       --spider                 不下载任何数据。
  -T,  --timeout=秒数           配置读取数据的超时时间 (秒数)。
  -w,  --wait=秒数              接收不同文件之间等待的秒数。
       --waitretry=秒数         在每次重试之间稍等一段时间 (由 1 秒至指定的 秒数不等)。
       --random-wait            接收不同文件之间稍等一段时间(由 0 秒至  2*WAIT 秒不等)。
  -Y,  --proxy=on/off           打开或关闭代理服务器。
  -Q,  --quota=大小             配置接收数据的限额大小。
       --bind-address=地址      使用本机的指定地址 (主机名称或 IP) 进行连接。
       --limit-rate=速率        限制下载的速率。
       --dns-cache=off          禁止查找存于高速缓存中的 DNS。
       --restrict-file-names=OS 限制文件名中的字符为指定的 OS (操作系统) 所允许的字符。

目录：
  -nd  --no-directories            不创建目录。
  -x,  --force-directories         强制创建目录。
  -nH, --no-host-directories       不创建含有远程主机名称的目录。
  -P,  --directory-prefix=名称     保存文件前先创建指定名称的目录。
       --cut-dirs=数目             忽略远程目录中指定数目的目录层。

HTTP 选项：
       --http-user=用户    配置 http 用户名。
       --http-passwd=密码    配置 http 用户密码。
  -C,  --cache=on/off        (不)使用服务器中的高速缓存中的数据 (默认是使用的)。
  -E,  --html-extension      将所有 MIME 类型为 text/html 的文件都加上 .html 扩展文件名。
       --ignore-length       忽略“Content-Length”文件头字段。
       --header=字符串         在文件头中添加指定字符串。
       --proxy-user=用户   配置代理服务器用户名。
       --proxy-passwd=密码   配置代理服务器用户密码。
       --referer=URL         在 HTTP 请求中包含“Referer：URL”头。
  -s,  --save-headers        将 HTTP 头存入文件。
  -U,  --user-agent=AGENT    标志为 AGENT 而不是 Wget/VERSION。
       --no-http-keep-alive  禁用 HTTP keep-alive（持久性连接）。
       --cookies=off         禁用 cookie。
       --load-cookies=文件   会话开始前由指定文件载入 cookie。
       --save-cookies=文件   会话结束后将 cookie 保存至指定文件。
       --post-data=字符串    使用 POST 方法，发送指定字符串。
       --post-file=文件      使用 POST 方法，发送指定文件中的内容。

HTTPS (SSL) 选项：
       --sslcertfile=文件     可选的客户段端证书。
       --sslcertkey=密钥文件  对此证书可选的“密钥文件”。
       --egd-file=文件        EGD socket 文件名。
       --sslcadir=目录         CA 散列表所在的目录。
       --sslcafile=文件      包含 CA 的文件。
       --sslcerttype=0/1      Client-Cert 类型 0=PEM (默认) / 1=ASN1 (DER)
       --sslcheckcert=0/1     根据提供的 CA 检查服务器的证书
       --sslprotocol=0-3      选择 SSL 协议；0=自动选择，
                              1=SSLv2 2=SSLv3 3=TLSv1

FTP 选项：
  -nr, --dont-remove-listing   不删除“.listing”文件。
  -g,  --glob=on/off           设置是否展开有通配符的文件名。
       --passive-ftp           使用“被动”传输模式。
       --retr-symlinks         在递归模式中，下载链接所指示的文件(连至目录
                               则例外）。
递归下载：
  -r,  --recursive          递归下载。
  -l,  --level=数字         最大递归深度(inf 或 0 表示无限)。
       --delete-after       删除下载后的文件。
  -k,  --convert-links      将绝对链接转换为相对链接。
  -K,  --backup-converted   转换文件 X 前先将其备份为 X.orig。
  -m,  --mirror             等效于 -r -N -l inf -nr 的选项。
  -p,  --page-requisites    下载所有显示完整网页所需的文件，例如图像。
       --strict-comments    打开对 HTML 备注的严格(SGML)处理选项。

递归下载时有关接受/拒绝的选项：
  -A,  --accept=列表                接受的文件样式列表，以逗号分隔。
  -R,  --reject=列表                排除的文件样式列表，以逗号分隔。
  -D,  --domains=列表               接受的域列表，以逗号分隔。
       --exclude-domains=列表       排除的域列表，以逗号分隔。
       --follow-ftp                 跟随 HTML 文件中的 FTP 链接。
       --follow-tags=列表           要跟随的 HTML 标记，以逗号分隔。
  -G,  --ignore-tags=列表           要忽略的 HTML 标记，以逗号分隔。
  -H,  --span-hosts                 递归时可进入其它主机。
  -L,  --relative                   只跟随相对链接。
  -I,  --include-directories=列表   要下载的目录列表。
  -X,  --exclude-directories=列表   要排除的目录列表。
  -np, --no-parent                  不搜索上层目录。

请将错误报告或建议寄给 <bug-wget@gnu.org>。
</bug-wget@gnu.org>]]></content>
    
    <summary type="html">
    
      http://www.linuxfans.org/nuke/modules.php?name=Forums&amp;file=viewtopic&amp;t=88813

$ wget --help
GNU Wget 1.9.1，非交互式的网络文件下载工具。
用法： wget [选项]... [
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>差不多搞定了Miranda</title>
    <link href="http://wdicc.com/use-miranda-im/"/>
    <id>http://wdicc.com/use-miranda-im/</id>
    <published>2005-11-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[先去<a href="http://blog.miranda-im.org/" target="_blank">http://blog.miranda-im.org/</a>下载最新的build版本，建议用non-Unicode版本，因为unicode版本似乎不支持clist_modern.dll。

<br><a id="more"></a>直接解压到一个目录，多个msn的话，多复制plugin里面的msn.dll一份即可，jabber是用来上gtalk的，其他的看字面意思好了，不知道就都留着。

然后去下载mirandaqq，上<a href="http://miranda-im.org" target="_blank">http://miranda-im.org</a>搜索mirandaqq，下载下来把所有内容解压到plugin里面，然后再去<a href="http://starkwong.ivehost.net/mimqq/" target="_blank">http://starkwong.ivehost.net/mimqq/</a>下载dll的最新版本。这样qq就可用了。

去miranda网站搜索一下chinese可以找到中文语言文件，放到miranda的根目录下即可。

启动miranda，然后再选项里面可以找到qq，msn之类的设置选项。关于gtalk的可以参考<a href="http://www.google.com/support/talk/bin/answer.py?answer=24885" target="_blank">这里</a>。

这样，一个基本的聊天环境就有啦，如果能忍受他简洁的界面，那就可以用了。后面说说怎么让他更加好看。

先下载一个Modern Contact List Layered，来<a href="http://miranda-im.org/download/details.php?action=viewfile&id=2103" target="_blank">这里</a>下载稳定版，或者来<a href="http://shpynov.nm.ru/alpha/" target="_blank">这里</a>下载测试版。之后解压到plugin文件夹。重启miranda，在选项里面的plugin那里选上clist_modern，再重启miranda即可。

重启之后会看到界面有了变化，如果你的没变化，说明clist_modern还没有起作用，自己找原因吧，呵呵。

之后就需要下载类似于qq，winamp之类的skin文件了。可以来<a href="http://miranda-im.org/download/index.php?action=display&id=93" target="_blank">这里</a>看看。每一个theme通常都提供了一个效果预览图片，可以看看效果再下载。下载之后注意看里面的安装说明之类。

下载之后可以放到skins文件夹里面，然后去选项->自定义->面板里面可以看到刚下载skin。有些skin应用之后可能会让整个面板透明，呵呵，为什么出这个问题偶也不知道啦。

继续来搞聊天窗口的美化。先下载tabsrmm和ieview这两个plugin，要注意的是，tabsrmm需要下载最新版本，至少是0.9.9.96版本以上。我在这里走了不少弯路。我的理解，tabsrmm可以让聊天窗口支持tab形式，比如gaim的那种。而ieview可以让tabsrmm的聊天窗口可以应用css模板来显示的更加pp。当然他们还有其他功能，自己研究去吧。

此后需要在选项->信息对话框->信息窗口里面的信息记录选项卡里面选上支持外部外挂程式。这样才可以用ieview为聊天窗口美化。

然后就去下载<a href="http://miranda-im.org/download/index.php?action=display&id=83" target="_blank">ieview的模板</a>去吧。下载好了在ieview里面设置一下就ok了。

另外还有qq和msn的表情的支持，在ieview里面也有设置。为每个协议指定表情之后，就可以在聊天的时候使用表情了。qq表情来<a href="http://starkwong.ivehost.net/mimqq/" target="_blank">这里</a>下载。msn表情来<a href="http://miranda-im.org/download/details.php?action=viewfile&id=2180" target="_blank">这里</a>。

这时联系人列表里面的msn还没有头像，可以下载<a href="http://miranda-im.org/download/details.php?action=viewfile&id=2361" target="_blank">avatar service</a>。至于qq的头像怎么搞出来，我还不知道，你要是弄出来了，可别忘记告诉我啊。

对了，是不是觉得列表里面的联系人那么多好郁闷么？呵呵，分组吧，可以把qq,msn放到一个分组里面，这个感觉非常好。可惜这个分组不能上传到服务器。

选项->联系人列表->图标，还可以修改每个协议的图标。要是不修改默认都一样，特别丑。推荐一个<a href="http://miranda-im.org/download/details.php?action=viewfile&id=2256" target="_blank">cristal full</a>，里面msn，qq的图标都有。

是不是还想要msn，qq那种来消息的提示音呢？来<a href="http://miranda-im.org/download/index.php?action=display&id=5" target="_blank">这里</a>看看。下载后，在选项->事件->声音里面分别指定一下就ok了。

好了，似乎没什么要说的了，有什么好的经验别忘记告诉我哦。
]]></content>
    
    <summary type="html">
    
      先去&lt;a href=&quot;http://blog.miranda-im.org/&quot; target=&quot;_blank&quot;&gt;http://blog.miranda-im.org/&lt;/a&gt;下载最新的build版本，建议用non-Unicode版本，因为unicode版本似乎不支持clist_modern.dll。

&lt;br&gt;
    
    </summary>
    
    
      <category term="Miranda IM" scheme="http://wdicc.com/tags/Miranda-IM/"/>
    
  </entry>
  
  <entry>
    <title>用上了miranda</title>
    <link href="http://wdicc.com/use-miranda/"/>
    <id>http://wdicc.com/use-miranda/</id>
    <published>2005-11-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[感觉非常好的一个软件，可以整合qq，msn，gtalk再一起。可以把我的qq，2个msn，gtalk用一个软件登陆了，呵呵。

缺点是传文件、自定义图片啥的不行。不过一般也用不着，无所谓了。

现在用到的插件有tabsrmm,smileyadd,popup_plus,mirandaqq,loadavatars,ieview,contact list layer。

skin用的是LaPrata。

<center><img src="/wordpress/wp-content/uploads/1101489270.png" width="218" height="666"></center>
]]></content>
    
    <summary type="html">
    
      感觉非常好的一个软件，可以整合qq，msn，gtalk再一起。可以把我的qq，2个msn，gtalk用一个软件登陆了，呵呵。

缺点是传文件、自定义图片啥的不行。不过一般也用不着，无所谓了。

现在用到的插件有tabsrmm,smileyadd,popup_plus,mirand
    
    </summary>
    
    
      <category term="Miranda IM" scheme="http://wdicc.com/tags/Miranda-IM/"/>
    
  </entry>
  
  <entry>
    <title>落叶</title>
    <link href="http://wdicc.com/defoliation/"/>
    <id>http://wdicc.com/defoliation/</id>
    <published>2005-11-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前天早上上班走到复兴路上，发现一个晚上落叶多了很多，可能是突然降温的缘故吧，树枝上面空了好多，有一种荒凉感。。。

今天刚拿到了分配的任务，可能得忙几天了。忙之前，中午还看了一个片子，呵呵，打开pplive刚好开始，名字叫《诅咒》cures of lola，里面mm挺pp的，是一个叫田原的，比较ft这个名字，呵呵。

<center><img src="/wordpress/wp-content/uploads/1312987229.jpg" width="550" height="382"></center>
]]></content>
    
    <summary type="html">
    
      前天早上上班走到复兴路上，发现一个晚上落叶多了很多，可能是突然降温的缘故吧，树枝上面空了好多，有一种荒凉感。。。

今天刚拿到了分配的任务，可能得忙几天了。忙之前，中午还看了一个片子，呵呵，打开pplive刚好开始，名字叫《诅咒》cures of lola，里面mm挺pp的，是一
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>测试一个foobar的插件</title>
    <link href="http://wdicc.com/foobar-plugin/"/>
    <id>http://wdicc.com/foobar-plugin/</id>
    <published>2005-11-16T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<img src="http://www.blueforge.net/playing/img.php?tokenID=elcGGBKfUIeocMUEUcOk" border="0">
]]></content>
    
    <summary type="html">
    
      &lt;img src=&quot;http://www.blueforge.net/playing/img.php?tokenID=elcGGBKfUIeocMUEUcOk&quot; border=&quot;0&quot;&gt;

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>有两个地方都有金矿zz</title>
    <link href="http://wdicc.com/a-allegory/"/>
    <id>http://wdicc.com/a-allegory/</id>
    <published>2005-11-14T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[　　第一种情况：
　  在A国来了一个人投资建了一个矿场，雇一百个工人为他淘金，每年获利1000万，矿主把其中的50%做为工人工资发下去，每个工人每年收入5万，他们拿一万来租房子，剩下的四万可以结婚，生孩子，成家立业，矿主手里还有五百万，可以做投资。因为工人手里有钱，要安家落户，所以，房子出现需求。于是矿主用手里的钱盖房子，租给工人，或者卖给工人。工人要吃要喝，所以，开饭店，把工人手里的钱再赚回来。开饭馆又要雇别的工人，于是工人的妻子有了就业机会，也有了收入。一个家庭的消费需求就更大了。这样，几年之后，在这个地方出现了100个家庭。孩子要读书，有了教育的需求，于是有人来办学校，工人要约会，要消费，要做别的东西，于是有了电影院，有了商店，这样，50年过去以后，当这个地方的矿快被挖光了的时候，这里已经成了一个10万人左右的繁荣城市。

　　而第二种情况是这样的：
　　假设同样发现了金矿，同样有人来投资开采，同样雇 100工人，同样每年获利1000万，但是矿主把其中10%作为工资发下去，每个工人一年1万。这些钱只够他们勉强填饱肚子，没有钱租房子，没有钱讨老婆，只能住窝棚。矿主一年赚了900万，但是看一看满眼都是穷人，在本地再投资什么都不会有需求。于是，他把钱转到国外，因为在本地根本就不安全，他盖几个豪华别墅，雇几个工人当保镖，工人没有前途，除了拼命工作糊口，根本没有别的需求。唯一可能有戏的就是想办法骗一个老婆来，生一个漂亮女儿，或许还可以嫁给矿主做老婆。50年下去以后，这个地方除了豪华别墅，依然没有别的产业。等到矿挖完了，矿主带着巨款走了，工人要么流亡，要么男的为盗，女的为娼。
]]></content>
    
    <summary type="html">
    
      　　第一种情况：
　  在A国来了一个人投资建了一个矿场，雇一百个工人为他淘金，每年获利1000万，矿主把其中的50%做为工人工资发下去，每个工人每年收入5万，他们拿一万来租房子，剩下的四万可以结婚，生孩子，成家立业，矿主手里还有五百万，可以做投资。因为工人手里有钱，要安家落户，
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>自己烤白薯</title>
    <link href="http://wdicc.com/sweet-potato/"/>
    <id>http://wdicc.com/sweet-potato/</id>
    <published>2005-11-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[懒汉版：
微波炉，2个白薯，高火烤8分钟，然后翻一下，然后继续8分钟，就ok乐。

馋猫版：
似乎是把皮弄掉，然后切开，煮，水刚没过白薯，放黄xx糖，煮一回，然后搅一搅，让糖溶解。等煮到可以用筷子轻松扎透即可。捞出来，然后放到微波炉里，中高火8分钟。
]]></content>
    
    <summary type="html">
    
      懒汉版：
微波炉，2个白薯，高火烤8分钟，然后翻一下，然后继续8分钟，就ok乐。

馋猫版：
似乎是把皮弄掉，然后切开，煮，水刚没过白薯，放黄xx糖，煮一回，然后搅一搅，让糖溶解。等煮到可以用筷子轻松扎透即可。捞出来，然后放到微波炉里，中高火8分钟。

    
    </summary>
    
    
      <category term="Food" scheme="http://wdicc.com/tags/Food/"/>
    
  </entry>
  
  <entry>
    <title>老婆出差时超强的留言（ZZ）</title>
    <link href="http://wdicc.com/super-messages/"/>
    <id>http://wdicc.com/super-messages/</id>
    <published>2005-11-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<center><img src="/wordpress/wp-content/uploads/1361658957.jpg" width="424" height="493"></center>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/1361658957.jpg&quot; width=&quot;424&quot; height=&quot;493&quot;&gt;&lt;/center&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>小亚家的大毛</title>
    <link href="http://wdicc.com/core-and-damao/"/>
    <id>http://wdicc.com/core-and-damao/</id>
    <published>2005-11-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<center><img src="/wordpress/wp-content/uploads/414278.jpg" width="540"></center>
<center><img src="/wordpress/wp-content/uploads/103377.jpg" width="540"></center>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/414278.jpg&quot; width=&quot;540&quot;&gt;&lt;/center&gt;
&lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/103377.jpg
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
  </entry>
  
  <entry>
    <title>老家的猫猫们</title>
    <link href="http://wdicc.com/cats-cats/"/>
    <id>http://wdicc.com/cats-cats/</id>
    <published>2005-11-02T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<center>一大一小关系最好了，差了一辈</center>
<center><img src="/wordpress/wp-content/uploads/590803.jpg" width="540"></center>
<center><img src="/wordpress/wp-content/uploads/581508.jpg" width="540"></center>
<center>短毛猫生的长毛猫</center>
<center><img src="/wordpress/wp-content/uploads/015809.jpg" width="540"></center>
<center><img src="/wordpress/wp-content/uploads/056227.jpg" width="540"></center>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;一大一小关系最好了，差了一辈&lt;/center&gt;
&lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/590803.jpg&quot; width=&quot;540&quot;&gt;&lt;/center&gt;
&lt;center&gt;&lt;img src=&quot;/wordpre
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
  </entry>
  
  <entry>
    <title>周末ktv的地址</title>
    <link href="http://wdicc.com/address-of-ktv/"/>
    <id>http://wdicc.com/address-of-ktv/</id>
    <published>2005-11-01T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[地点：佰金KTV，西直门外，交大东路25号。

路线：
西直门西侧桥下第一个红绿灯往北拐，上高梁桥斜街；
沿高梁桥斜往西北走，第一个红绿灯往北拐，上交大东路；
沿交大东路往北走，大概800米远处是一个没有红绿灯的十字路口；
十字路口的西北角，就是东方八喜大酒楼；
佰金KTV就在东方八喜大酒楼的南侧。

佰金KTV电话：82165558
]]></content>
    
    <summary type="html">
    
      地点：佰金KTV，西直门外，交大东路25号。

路线：
西直门西侧桥下第一个红绿灯往北拐，上高梁桥斜街；
沿高梁桥斜往西北走，第一个红绿灯往北拐，上交大东路；
沿交大东路往北走，大概800米远处是一个没有红绿灯的十字路口；
十字路口的西北角，就是东方八喜大酒楼；
佰金KTV就在东
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>预览待上</title>
    <link href="http://wdicc.com/preview-before-upload/"/>
    <id>http://wdicc.com/preview-before-upload/</id>
    <published>2005-10-30T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[原文在<a href="http://www.sharkui.com/articles/article.php?id=26" target="_blank">这里</a>

　　上
]]></content>
    
    <summary type="html">
    
      原文在&lt;a href=&quot;http://www.sharkui.com/articles/article.php?id=26&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;

　　上

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>我的桌面:)</title>
    <link href="http://wdicc.com/my-dekstop/"/>
    <id>http://wdicc.com/my-dekstop/</id>
    <published>2005-10-28T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<center><img src="/wordpress/wp-content/uploads/1121201799.jpg" width="500"></center>
]]></content>
    
    <summary type="html">
    
      &lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/1121201799.jpg&quot; width=&quot;500&quot;&gt;&lt;/center&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>昨天晚上饭做砸了</title>
    <link href="http://wdicc.com/failed-dinner/"/>
    <id>http://wdicc.com/failed-dinner/</id>
    <published>2005-10-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[晚上以为老婆不回来了，就想着吃什么。本来想吃烩菜，后来想着太繁了，还是做面条比较简单。

从超市出来后，剩5块钱了，不过要了一斤鸡蛋加土豆和青椒西红柿之后，钱差不多刚好。结果老婆打电话过来说晚上要回来吃饭，这下咋办？只能让他吃面条了。

煮好了面条，去拿碗的时候，发现西红柿忘记放了。。。晕。。

老婆不喜欢吃面条，剩了老大一碗，只好今天看看是不是继续吃面条了。不过得给老婆热排骨炒蒜苔了。希望能做好 :)
]]></content>
    
    <summary type="html">
    
      晚上以为老婆不回来了，就想着吃什么。本来想吃烩菜，后来想着太繁了，还是做面条比较简单。

从超市出来后，剩5块钱了，不过要了一斤鸡蛋加土豆和青椒西红柿之后，钱差不多刚好。结果老婆打电话过来说晚上要回来吃饭，这下咋办？只能让他吃面条了。

煮好了面条，去拿碗的时候，发现西红柿忘记放
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>wd love cc</title>
    <link href="http://wdicc.com/wd-love-cc/"/>
    <id>http://wdicc.com/wd-love-cc/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[和cc在故宫的相片 :)
<center><img src="/wordpress/wp-content/uploads/1353548855.jpg" width="320" height="240"></center>
]]></content>
    
    <summary type="html">
    
      和cc在故宫的相片 :)
&lt;center&gt;&lt;img src=&quot;/wordpress/wp-content/uploads/1353548855.jpg&quot; width=&quot;320&quot; height=&quot;240&quot;&gt;&lt;/center&gt;

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
  </entry>
  
  <entry>
    <title>wiki译文：Archlinux 快速安装指南（Quick Archlinux Install）</title>
    <link href="http://wdicc.com/quick-archlinux-install/"/>
    <id>http://wdicc.com/quick-archlinux-install/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[原文地址：[url]http://wiki2.archlinux.org/index.php/Quick%20Archlinux%20Install[/url]

Quick Archlinux Install
Archlinux 快速安装指南

这篇文
]]></content>
    
    <summary type="html">
    
      原文地址：[url]http://wiki2.archlinux.org/index.php/Quick%20Archlinux%20Install[/url]

Quick Archlinux Install
Archlinux 快速安装指南

这篇文

    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>远程安装ArchLinux(翻译)</title>
    <link href="http://wdicc.com/remote-install-arch/"/>
    <id>http://wdicc.com/remote-install-arch/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[[color=green]原文地址：[url]http://wiki2.archlinux.org/index.php/Remote%20ArchLinux%20Install[/url][/color]
远程安装ArchLinux

基于Tobias Kieslich的工作。他的原始版请看这里[url]http://www.justdreams.de/archlinux/docs/00_rootserver.html。[/url]

[b]概述[/b]

这是一个建立Archlinux基本服务器的指南。Archlinux是一个很好的服务器系统，但是它通常不会被选择作为一个预装的发行版。在本机替换预装的系统非常容易。但是替换一个
]]></content>
    
    <summary type="html">
    
      [color=green]原文地址：[url]http://wiki2.archlinux.org/index.php/Remote%20ArchLinux%20Install[/url][/color]
远程安装ArchLinux

基于Tobias Kieslich的工作。他
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>使用mplayer播放dvd</title>
    <link href="http://wdicc.com/play-dvd-by-mplayer/"/>
    <id>http://wdicc.com/play-dvd-by-mplayer/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[从mplayer的web上找到的。

4.2 DVD播放

可用选项的完整列表参见man page。播放
]]></content>
    
    <summary type="html">
    
      从mplayer的web上找到的。

4.2 DVD播放

可用选项的完整列表参见man page。播放

    
    </summary>
    
    
      <category term="linux" scheme="http://wdicc.com/tags/linux/"/>
    
  </entry>
  
  <entry>
    <title>vim的一些有用的咚咚</title>
    <link href="http://wdicc.com/some-usefull-about-vim/"/>
    <id>http://wdicc.com/some-usefull-about-vim/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-bash">
# cat .bashrc.vim
# .bashrc
# Source default definitions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi
export PS1="[VIM]$PS1"
</pre>
<br><a id="more"></a><pre lang="bash"># cat .vimrc
" multi-encoding setting
if has("multi_byte")
  "set bomb
  set fileencodings=ucs-bom,utf-8,cp936,big5,euc-jp,euc-kr,latin1
  " CJK environment detection and corresponding setting
  if v:lang =~ "^zh_CN"
    " Use cp936 to support GBK, euc-cn == gb2312
    set encoding=cp936
    set termencoding=cp936
    set fileencoding=cp936
  elseif v:lang =~ "^zh_TW"
    " cp950, big5 or euc-tw
    " Are they equal to each other?
    set encoding=big5
    set termencoding=big5
    set fileencoding=big5
  elseif v:lang =~ "^ko"
    " Copied from someone&#39;s dotfile, untested
    set encoding=euc-kr
    set termencoding=euc-kr
    set fileencoding=euc-kr
  elseif v:lang =~ "^ja_JP"
    " Copied from someone&#39;s dotfile, untested
    set encoding=euc-jp
    set termencoding=euc-jp
    set fileencoding=euc-jp
  endif
  " Detect UTF-8 locale, and replace CJK setting if needed
  if v:lang =~ "utf8$" || v:lang =~ "UTF-8$"
    set encoding=utf-8
    set termencoding=utf-8
    set fileencoding=utf-8
  endif
else
  echoerr "Sorry, this version of (g)vim was not compiled with multi_byte"
endif
set shell=bash\ --rcfile\ ~/.bashrc.vim
nnoremap j gj
nnoremap k gk
vnoremap j gj
vnoremap k gk
nnoremap <down> gj
nnoremap <up> gk
vnoremap <down> gj
vnoremap <up> gk
inoremap <down> <c-o>gj
inoremap <up> <c-o>gk
</c-o></up></c-o></down></up></down></up></down></pre>
<pre class="prettyprint lang-bash">
set tabstop=4
set shiftwidth=4</pre>
]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
# cat .bashrc.vim
# .bashrc
# Source default definitions
if [ -f ~/.bashrc ]; then
    . ~/.bashrc
fi
export PS1=&quot;[VIM]$PS1&quot;
&lt;/pre&gt;
&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>自动贴星运的脚本</title>
    <link href="http://wdicc.com/auto-script/"/>
    <id>http://wdicc.com/auto-script/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[贴星运的脚本，根据别人的修改的。
<br><a id="more"></a>#!/bin/bash 

#星座的名字,抓网页的时候要用的 
Signs="aries taurus gemini cancer leo virgo libra scorpio sagittarius capricorn aquarius pisces"

#日期,每篇文章标题要用的 
head=`date --date='1 days' +%Y-%m-%d`

#要贴的BBS站点,都是水木代码的 
Sites='bbs.buaa.edu.cn'

#用户名密码
user=horoscope
pass=*****

#生成每个星座的星运文件 
i=1;
for sign in $Signs
do
    wget http://mindcity.sina.com.tw/west/MC-12stars/${sign}2.html -O $i.htm
    sed -n '/<!--START:HORO_TOMORROW-->/,/<!--END:HORO_TOMORROW-->/p' $i.htm | sed -e 's/
/\n/g' -e 's/&lt;[^&gt;]*&gt;//g'  -e 's/\t//'| sed -n '4,$p' | sed -e '2,4d' -e '15d'|iconv -f BIG5 -t GB2312 &gt; $i.ast
    rm $i.htm
    let i=$i+1
done


#out 用户名 密码 文件 
out(){
sleep 1
echo "$1" 
sleep 1
echo "$2" 
echo
sleep 1
echo -n "qqqqqqqqqq" 
sleep 1
echo "S" 
echo "horoscope" 
echo 

sleep 3

j=1 
while [ $j -lt 13 ] 
do      
        echo -n $'\cp'
        ((echo -n $head) &amp;&amp; (head -1 $j.ast))
        echo
        echo $head
        echo
        cat $j.ast
        echo
        echo -n $'\cx'
        echo
        let j=$j+1
    sleep 3
done

sleep 3

echo "qqqqg" 
echo 
echo 
echo 
}

for site in $Sites
do  
    out $user $pass | telnet -8 $site
done
]]></content>
    
    <summary type="html">
    
      贴星运的脚本，根据别人的修改的。
&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>养猫</title>
    <link href="http://wdicc.com/feed-cats/"/>
    <id>http://wdicc.com/feed-cats/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[有些人可能想养猫，我也养了1年多了，从1只到2只，也就随便说说养猫。

养猫绝对比养人简单，所以养猫还是比较适合单身。但是你又不可能单身一辈子（可能夸大了一点，猫猫的寿命也就10多年），所以你还是得考虑未来的伴侣是否也喜欢猫，也就要在猫和喜欢的人之间作一个选择，如果对方不喜欢猫，你是选猫，还是选那个让你动心的人？这里我有个建议，普遍认为，不喜欢猫的人通常都缺少爱心，不是说了么，做人就要有一颗慈悲的心，对于没有爱心的，建议还是选择养猫吧，这个人可能不好养。

<br><a id="more"></a>养猫只需要给他猫粮、猫砂、水，必要的时候洗洗澡就可以了，吃饱喝足之后，他就会满足的趴在你怀里呼噜呼噜了。猫粮猫砂这些一个月的消费2只猫可能100以内就足够了，也就是你出去吃喝两次的钱。如果实在困难，你还是可以培养他吃米饭，吃馒头，这个就更加便宜了。

养猫不需要给他买衣服，在你不能忍受他的脏的时候给他洗洗澡就可以了。洗澡也很简单，你洗澡的时候把他拉进去，一起来个淋浴，就ok了。

养猫和养狗比起来，养猫还是比较轻松的。溜猫肯定是不用的，也不用办猫证。但是猫这个动物是不认人的，只要是吃的就行，从来不管是谁给的。狗不一样，你让他蹲下，他就蹲下，让他过来他就会过来。你要是想要猫也能做到，估计最后的结果只能是不是你疯掉就是猫疯掉。

<center><img src="/wordpress/wp-content/uploads/1312758951.jpg" width="600" height="450"></center>

养猫要考虑的其实就是下面几个事情：

1 猫的寿命是10多年，你得能保证在这些年里面你对他不离不弃，如果只是想着抱回来养养试试看，那还是算了。很多其他途径的，可以找有猫的朋友借几天，我想他们肯定非常乐意的。

2 养猫对孕妇不好。所以如果家里有这种情况，一定要慎重。我觉得也不是说不能养，比如关另外一个房间，老公帮忙喂养，不养长毛猫什么的，就差不多了。养长毛猫会掉很多毛，要做好准备。

3 如果是单身，最好不要经常出差。出差的时候，就算托了人照顾，除非那人也有养猫经验，否则很难照顾好你的小猫的。

4 猫属于昼伏夜出型。猫猫一般都是白天睡觉，晚上起来捉老鼠的。不过现在的家养猫晚上可没有老鼠可捉，但是他们依然会晚上起来玩，如果是2只以上的话，那难免会追着跑，影响你睡觉是肯定的了。不过如果你有条件，关到另外一个屋子，事情就变得简单多了。

暂时就想到上面几点，等日后想到了再补充吧。其实养猫也没有那么难，每天喂点吃的喝的，清理一下猫砂，基本就可以了。只要关键问题想清楚了，那就去领养一只小猫吧。

<center><img src="/wordpress/wp-content/uploads/1238156937.jpg" width="600" height="450"></center>

<center><img src="/wordpress/wp-content/uploads/1275261871.jpg" width="600" height="450"></center>
]]></content>
    
    <summary type="html">
    
      有些人可能想养猫，我也养了1年多了，从1只到2只，也就随便说说养猫。

养猫绝对比养人简单，所以养猫还是比较适合单身。但是你又不可能单身一辈子（可能夸大了一点，猫猫的寿命也就10多年），所以你还是得考虑未来的伴侣是否也喜欢猫，也就要在猫和喜欢的人之间作一个选择，如果对方不喜欢猫，你是选猫，还是选那个让你动心的人？这里我有个建议，普遍认为，不喜欢猫的人通常都缺少爱心，不是说了么，做人就要有一颗慈悲的心，对于没有爱心的，建议还是选择养猫吧，这个人可能不好养。

&lt;br&gt;
    
    </summary>
    
    
      <category term="cats" scheme="http://wdicc.com/tags/cats/"/>
    
  </entry>
  
  <entry>
    <title>给系统添</title>
    <link href="http://wdicc.com/add-fonts-for-arch/"/>
    <id>http://wdicc.com/add-fonts-for-arch/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[原文[url]http://wiki2.archlinux.org/index.php/Adding%20Fonts[/url]

给linux系统添
]]></content>
    
    <summary type="html">
    
      原文[url]http://wiki2.archlinux.org/index.php/Adding%20Fonts[/url]

给linux系统添

    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>Wireless on Dell D800</title>
    <link href="http://wdicc.com/Wireless-on-Dell-D800/"/>
    <id>http://wdicc.com/Wireless-on-Dell-D800/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 Install wireless_tools.
<pre class="prettyprint lang-txt">

2 Install ipw2100(the wireless modules).
<pre class="prettyprint lang-txt">
Then modify /etc/rc.conf ,add ipw2100 to the MODULES line,and eth1 to the INTERFACES line,add eth1="dhcp"(to use dhcp) blow eth0="".

3 Modify /etc/conf.d/wireless as blow
<pre class="prettyprint lang-txt">
wlan_eth1="eth1 mode managed essid default"
WLAN_INTERFACES=(eth1)
</pre>
Set the firest line to fit your network.

4 Reboot.

想添
</pre></pre>]]></content>
    
    <summary type="html">
    
      1 Install wireless_tools.
&lt;pre class=&quot;prettyprint lang-txt&quot;&gt;

2 Install ipw2100(the wireless modules).
&lt;pre class=&quot;prettyprint lang-txt&quot;&gt;
Th
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>vim里面关于文件编码我的一点经验</title>
    <link href="http://wdicc.com/encoding-in-vim/"/>
    <id>http://wdicc.com/encoding-in-vim/</id>
    <published>2005-10-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[发信人: fishy9 (Who dares to love forever?), 信区: VIM
标  题: vim里面关于文件编码我的一点经验
发信站: 水木社区 (Tue Jul 19 10:54:22 2005), 站内

        vim里面的编码主要跟三个参数有关：enc(encoding), fenc(fileencoding)和fencs(fileencodings)

<br><a id="more"></a>其中fenc是当前文件的编码，也就是说，一个在vim里面已经正确显示了的文件(前提是你的系统环境跟你的enc设置匹配)，你可以通过改变fenc后再w来将此文件存成不同的编码。比如说，我:set fenc=utf-8然后:w就把文件存成utf-8的了，:set fenc=gb18030再:w就把文件存成gb18030的了。这个值对于打开文件的时候是否能够正确地解码没有任何关系。

        fencs就是用来在打开文件的时候进行解码的猜测列表。文件编码没有百分百正确的判断方法，所以vim只能猜测文件编码。比如我的vimrc里面这个的设置是

set fileencodings=utf-8,gb18030,utf-16,big5

        所以我的vim每打开一个文件，先尝试用utf-8进行解码，如果用utf-8解码到了一半出错(所谓出错的意思是某个地方无法用utf-8正确地解码)，那么就从头来用gb18030重新尝试解码，如果gb18030又出错(注意gb18030并不是像utf-8似的规则编码，所以所谓的出错只是说某个编码没有对应的有意义的字，比如0)，就尝试用utf-16，仍然出错就尝试用big5。这一趟下来，如果中间的某次解码从头到尾都没有出错，那么vim就认为这个文件是这个编码的，不会再进行后面的尝试了。这个时候，fenc的值就会被设为vim最后采用的编码值，可以用:set fenc?来查看具体是什么。

        当然这个也是有可能出错的，比如你的文件是gb18030编码的，但是实际上只有一两个字符是中文，那么有可能他们正好也能被utf-8解码，那么这个文件就会被误认为是utf-8的导致错误解码。

        至于enc，其作用基本只是显示。不管最后的文件是什么编码的，vim都会将其转换为当前系统编码来进行处理，这样才能在当前系统里面正确地显示出来，因此enc就是干这个的。在windows下面，enc默认是cp936，这也就是中文windows的默认编码，所以enc是不需要改的。在linux下，随着你的系统locale可能设为zh_CN.gb18030或者zh_CN.utf-8，你的enc要对应的设为gb18030或者utf-8(或者gbk之类的)。

        最后再来说一下新建空文件的默认编码。看文档好像说会采用fencs里面的第一个编码作为新建文件的默认编码。但是这里有一个问题，就是fencs的顺序跟解码成功率有很大关系，根据我的经验utf-8在前比gb18030在前成功率要高一些，那么如果我新建文件默认想让它是gb18030编码怎么办？一个方法是每次新建文件后都:set fenc=gb18030一下，不过我发现在vimrc里面设置fenc=gb18030也能达到这个效果。

        总结一下，我的vimrc里面的设置是：

set fileencoding=gb18030
set fileencodings=utf-8,gb18030,utf-16,big5

        另外enc根据环境来设。
]]></content>
    
    <summary type="html">
    
      发信人: fishy9 (Who dares to love forever?), 信区: VIM
标  题: vim里面关于文件编码我的一点经验
发信站: 水木社区 (Tue Jul 19 10:54:22 2005), 站内

        vim里面的编码主要跟三个参数有关：enc(encoding), fenc(fileencoding)和fencs(fileencodings)

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>上zhaopin.com弄了一个简历，嘿嘿</title>
    <link href="http://wdicc.com/resume-on-zhaopindotcom/"/>
    <id>http://wdicc.com/resume-on-zhaopindotcom/</id>
    <published>2005-05-23T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[注册之后回答几个问题可以弄一个简历出来，我稍微修改了一下弄到这里来了，嘿嘿

今天xh会给询问情况，不知道能不能搞定。也不知道去广州是福是货。比较了一下情况。
  好处：
 1  钱比现在多。
 2  可以转行。
 3  离开生活了近7年的北京去体验一下南方的城市。
 4  方便去南方周边的城市玩，不过不知道时间允不允许。
 5  。。。还没想好。
  坏处：
 1  和c两地。
 2  房租刚交了，好多money可能丢掉了。
 3  猫怎么弄过去，弄过去之后的生活等。
 4  现在的好多生活用品怎么办？
 5  回家需要北京转车，可能直接面对的是回家买不到车票。
 6  。。。。

是好事还是。。。。？
]]></content>
    
    <summary type="html">
    
      注册之后回答几个问题可以弄一个简历出来，我稍微修改了一下弄到这里来了，嘿嘿

今天xh会给询问情况，不知道能不能搞定。也不知道去广州是福是货。比较了一下情况。
  好处：
 1  钱比现在多。
 2  可以转行。
 3  离开生活了近7年的北京去体验一下南方的城市。
 4  方便
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>总算拿到户口卡了</title>
    <link href="http://wdicc.com/hukouka/"/>
    <id>http://wdicc.com/hukouka/</id>
    <published>2005-05-22T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[没给钱，反正拿到手了。写了个条子，先手里拿着有事再说吧。下午去办身份证去，哼哼

上周去天津腐败了一圈，单位花钱，哈哈。不过其实也没啥好玩的，蹭了几顿免费餐 ：），爬山的时候才发现，自己的体力比较来说还是蛮好的嘛，哈哈，一直跑在最前面。

不过看着自己的小肚子，sigh，确实得减肥了。
]]></content>
    
    <summary type="html">
    
      没给钱，反正拿到手了。写了个条子，先手里拿着有事再说吧。下午去办身份证去，哼哼

上周去天津腐败了一圈，单位花钱，哈哈。不过其实也没啥好玩的，蹭了几顿免费餐 ：），爬山的时候才发现，自己的体力比较来说还是蛮好的嘛，哈哈，一直跑在最前面。

不过看着自己的小肚子，sigh，确实得减
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>跳槽了。。</title>
    <link href="http://wdicc.com/job-hopping/"/>
    <id>http://wdicc.com/job-hopping/</id>
    <published>2005-05-15T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[又一个朋友告诉我要跳槽了，下周一就去新公司上班了。还有一个朋友也在说同事跳槽给他好大压力。。。。

我们单位2002年以后来的同事好几个已经走了，sigh，就我在这里赖着快3年了。三年来似乎没有得到多少经验，三年来也就后面1年才自己捣鼓着学了点linux的东西，很粗浅，找工作根本不能用来作为资本。。。写程序很烂，做美工不行，搞点系底层研究吧，还不会。。。不知道能干吗了。国企真的是养人的地方，相有些自己的事业，还是早点去开个公司吧。就算是卖方便面，好歹。。。还可以自己说了算。。。

跳槽的日子一天一天靠近着。。。
]]></content>
    
    <summary type="html">
    
      又一个朋友告诉我要跳槽了，下周一就去新公司上班了。还有一个朋友也在说同事跳槽给他好大压力。。。。

我们单位2002年以后来的同事好几个已经走了，sigh，就我在这里赖着快3年了。三年来似乎没有得到多少经验，三年来也就后面1年才自己捣鼓着学了点linux的东西，很粗浅，找工作根本
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>越来越想去南方呆着了</title>
    <link href="http://wdicc.com/sick-for-south-of-china/"/>
    <id>http://wdicc.com/sick-for-south-of-china/</id>
    <published>2005-05-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[宜人的空气，舒适的节奏，舒适的阳光，pp的美女。。。。sigh
]]></content>
    
    <summary type="html">
    
      宜人的空气，舒适的节奏，舒适的阳光，pp的美女。。。。sigh

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>遭遇3721</title>
    <link href="http://wdicc.com/3721-is-a-shit/"/>
    <id>http://wdicc.com/3721-is-a-shit/</id>
    <published>2005-05-10T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[装一个国产的rss软件firedemon，把3721给我装上了，f**k一百遍。

删除的路程是漫长的，sigh。

先看进程，没有相关咚咚，3721目录又删不掉。后来好容易找到了方法：

先复制一个system32/drivers文件出来，然后删掉复制出来的那个里面的cn*。
重启到安全模式，把drivers目录改名，然后把复制出来那个改成drivers，之后重启就可以删注册表了。
删掉注册表里面run里面cns*和help*，还有software里面的3721目录和microsoft\internet explore里面的advanced*的*cn*。
重启电脑，删掉windows/Downloaded Program Files里面的一拖，删掉Program Files/3721文件夹。

这个世界清静了。。。。

本来想用knoppix启动盘搞定的，结果ntfs还不行，shit，以后不用ntfs了。重启了n次才搞定，重启过程中百度打电话过来问网站推广，nnd，直接说没有负责人就刮掉了。都是一拖shit。
]]></content>
    
    <summary type="html">
    
      装一个国产的rss软件firedemon，把3721给我装上了，f**k一百遍。

删除的路程是漫长的，sigh。

先看进程，没有相关咚咚，3721目录又删不掉。后来好容易找到了方法：

先复制一个system32/drivers文件出来，然后删掉复制出来的那个里面的cn*。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>5.1去了趟沈阳</title>
    <link href="http://wdicc.com/goto-shenyang/"/>
    <id>http://wdicc.com/goto-shenyang/</id>
    <published>2005-05-07T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[森林动物园是超级无聊的地方，还是别去了。植物园却是很好很有意思的地方。好多的桥，不过我说你可能心里没有什么概念，还是亲自看一眼的好。植物园适合夏天去避暑，去的时候最好多备一套衣服，穿凉鞋，呵呵。不过现在植物园有烘干衣服的地方了，设施还算齐全。相比之下，北京的植物园就差远了。

森林动物园的门票70，包括10块钱的棋盘山风景区的通票。植物园门票30包括10块钱的花展的票，里面过桥不另外收费。总的来说沈阳还是比北京玩的好一点。游戏机30块钱70个币，可以爽爽的玩。逛街的话，中街和王府井的步行街似得，不过似乎比王府井好玩得多。
]]></content>
    
    <summary type="html">
    
      森林动物园是超级无聊的地方，还是别去了。植物园却是很好很有意思的地方。好多的桥，不过我说你可能心里没有什么概念，还是亲自看一眼的好。植物园适合夏天去避暑，去的时候最好多备一套衣服，穿凉鞋，呵呵。不过现在植物园有烘干衣服的地方了，设施还算齐全。相比之下，北京的植物园就差远了。

森
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>做xfce4.2得mirror</title>
    <link href="http://wdicc.com/mirror-of-xfce/"/>
    <id>http://wdicc.com/mirror-of-xfce/</id>
    <published>2005-04-27T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[Mirroring 
If you want to use our Debian packages on multiple systems in a networked environment, it might be a good idea to establish a local mirror of our Debian repository, so you don&#39;t need to fetch the packages from the internet for every system. You can use the utility debmirror to create a mirror of the packages and keep it up to date. 

For example, to mirror the i386 binary packages into the directory /ftp/mirror/debian, use the command: 


debmirror -a i386 -s main -h www.os-works.com \
          -d testing -r /debian --progress \
          -e http --ignore-release-gpg \
          /ftp/mirror/debian

Say, for example, the directory /ftp/mirror/debian is accessible via ftp as ftp://mymirror/debian/, then you&#39;d put the line 


deb ftp://mymirror/debian/ testing main

in the /etc/apt/sources.list file on every system in your network.
]]></content>
    
    <summary type="html">
    
      Mirroring 
If you want to use our Debian packages on multiple systems in a networked environment, it might be a good idea to establish a loc
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>新水母可以上了，呵呵</title>
    <link href="http://wdicc.com/login-newsmth/"/>
    <id>http://wdicc.com/login-newsmth/</id>
    <published>2005-04-26T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[地址http://newsmth.org 需要推荐然后去激活帐号才行，不知道怎么操作。

先转一片文章 :)

                              牛人与非牛人的对话
----"如果你的应用程序不能正确地运行，不要去责怪操作系统。"
2001年,当SUN提出SUN.ONE构架的那一天,XX大学毕业的牛在“牛狼之家”
聊天战碰到了一个公司的Coder
<br><a id="more"></a>-------------------------------------------------------------------
牛：   你懂XXX协议、YYY框架、ZZZ思想吗
coder：稍微知道一点点
牛：   那你看过XX牛的《XXXX》第X版第X卷，YY牛的《YYYY》第Y版第Y卷，
        ZZ牛的《ZZZZ》第Z版第Z卷吗
coder：你说的这些书都是《经典书籍》，不过我大都没认真看过
牛：   这么说，你对XXX协议、YYY框架、ZZZ思想的底层细节应该不是很了解哦
coder：可以这么说
牛：   你具体做什么项目，
coder：做X2X网站
牛：   你说你不懂XXX协议、YYY框架、ZZZ思想的底层细节，那么你们做X2X网站时，
       碰到XXX问题你怎么解决的
coder：很简单，我们会给XX、YY大学的牛发Email，叫他们给我们解XXX组件。很方
       便的。
牛：   如果没人肯帮你们解XXX组件呢
coder：不会的，每次都有N多牛排长对呢。再说了，到Internet上Search一下，买
       XXX组件的公司成堆
牛：   好了，好了，我再问你，你都用什么语言开发呢
coder：用ASP＋VB
牛：   你只不知道MS已经不再支持VB＋ASP了，改为C#＋MS.NET
coder：在聊天室里听牛说过
牛：   那你为什么还要用VB
coder：C#，JAVA我不懂 ，所以我用VB
牛：   唉，又来了，基础的XXX协议、YYY框架、ZZZ思想的底层细节你说你不太懂，
       前沿的C#, MS.NET；JAVA,SUN.ONE你又不懂，你难道没想过要好好学学吗
coder：我有想过啊
牛：   那你为什么不学呢
coder：我没有时间
牛：   你的时间都到哪儿去了
coder：用VB+ASP编代码赚钱啊
牛：   赚钱干吗
coder：供我儿子出国读大学
牛：   读研究生
coder：不是，是读本科
牛：   读本科就出去读，没必要吧
coder：在XXX协议、YYY框架、ZZZ思想的底层细节方面，国内经常生产牛的最牛的XX
       大学刚刚入门，在****方面连门都没入。我知道我儿子是块搞技术的料，所以
       我想要让我儿子系统掌握XXX协议、YYY框架、ZZZ思想的细节，精通前沿的...
       (听到Coder批评牛毕业的XX大学，牛有点生气了，开始不客气起来)
牛：   你知不知道，你没有XXX协议、YYY框架、ZZZ思想的底层细节，是写不出完美
       的代码出来的。还有，像你这样，虽然现在可以赚一点小钱，但四年后肯定要
       被淘汰的......
coder：在我淘汰之前,我就不想干了
牛：   那你去干嘛
coder：我想开一家软件公司，招很多牛，包括精通XXX协议、YYY框架、ZZZ思想的底
       层细节的牛，精通MS.net SUN.ONE的牛......
牛：   好笑!
----------------------------------------------------------------------
4年后，软件业VB已经彻底绝迹，XXX协议、YYY框架、ZZZ思想的底层细节已经被大量
修改，MS.net和SUN.ONE也快倒掉的时候.......
牛：   (XXX公司CTO办公室里，看着www.xxx.com上的新闻)
       啊! MS.net和SUN.ONE真要倒掉了吗?看来偶要继续充电了.......
coder：(XXX公司CEO办公室里，看着www.xxx.com上的新闻)
       哦，MS.net和SUN.ONE果真快倒掉了。看来我要招聘新的CTO和Coder了...
谁也不知道，XXX公司的CTO和CEO就是当年在“牛狼之家”聊天战聊天的牛和Coder。

    很多人自以为什么都知道---的确有很多牛从协议细节到当前潮流到开发环境....
样样都精通，但那是少数---可是却偏偏不知道自己正真需要的是什么，自己最需要的
又是什么，自己为什么要去知道这么多东西。
    有的人知道的的确不多，但是他知道他最需要的是什么。他知道他时间不多，只
能去争取他最需要的东西。
    以后的社会分工会越来越细，没必要也没有可能什么都懂，开飞机的显然不必知
道流体力学---虽然流体力学毫无疑问是飞机飞上天的基础；装配飞机的显然不必知道
采购来的发动机具体是如何把航空油变成动力输出的----虽然这是飞机可以开动的基
础。
    一样，用COM+或者EJB组件构造企业系统，你根本没有必要知道这个COM+或者EJB
组件是如何处理底层TCP/IP连接的。组件生产者关心的是实现细节--稳定性，效率，
安全......至于你，就去关心企业业务流程好了，即使不明白什么是TCP/IP，什么
是IPv6也没有关系。
]]></content>
    
    <summary type="html">
    
      地址http://newsmth.org 需要推荐然后去激活帐号才行，不知道怎么操作。

先转一片文章 :)

                              牛人与非牛人的对话
----&quot;如果你的应用程序不能正确地运行，不要去责怪操作系统。&quot;
2001年,当SUN提出SUN.ONE构架的那一天,XX大学毕业的牛在“牛狼之家”
聊天战碰到了一个公司的Coder
&lt;br&gt;
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>服务器ip是一天一改啊</title>
    <link href="http://wdicc.com/ip-change-everyday/"/>
    <id>http://wdicc.com/ip-change-everyday/</id>
    <published>2005-04-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[nnd

现在混饭吃的人太多了，打了8个电话都没人明白路由不通是怎么回事。而最后终级解决方法居然是把ip改回去了。

服了，航天
]]></content>
    
    <summary type="html">
    
      nnd

现在混饭吃的人太多了，打了8个电话都没人明白路由不通是怎么回事。而最后终级解决方法居然是把ip改回去了。

服了，航天

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>今天是搬家后正常工作第一天</title>
    <link href="http://wdicc.com/first-day-after-move/"/>
    <id>http://wdicc.com/first-day-after-move/</id>
    <published>2005-04-25T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[周末要去老婆家了，今天晚上还得去买车票，不知道好不好买。

服务器似乎没啥问题了，还需要配一个dhcp带一台电脑上网。其他的就先放着了。

有空还得看看zencart的问题。
]]></content>
    
    <summary type="html">
    
      周末要去老婆家了，今天晚上还得去买车票，不知道好不好买。

服务器似乎没啥问题了，还需要配一个dhcp带一台电脑上网。其他的就先放着了。

有空还得看看zencart的问题。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
      <category term="老婆" scheme="http://wdicc.com/tags/%E8%80%81%E5%A9%86/"/>
    
  </entry>
  
  <entry>
    <title>疯了疯了</title>
    <link href="http://wdicc.com/almost-crazy/"/>
    <id>http://wdicc.com/almost-crazy/</id>
    <published>2005-04-24T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[单位总算可以上网了，sigh，今天搞了一天，累死了

没有以前爽了，ip少了，还是dhcp的，超级郁闷
]]></content>
    
    <summary type="html">
    
      单位总算可以上网了，sigh，今天搞了一天，累死了

没有以前爽了，ip少了，还是dhcp的，超级郁闷

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>给网站加了个zend</title>
    <link href="http://wdicc.com/use-zend/"/>
    <id>http://wdicc.com/use-zend/</id>
    <published>2005-04-21T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[用起来超级简单，呵呵。。

先到 http://www.zend.com/store/free_download.php 下载对应的版本。我这里是rhel3，glibc是2.3可是没有对应版本，就下了一个对应2.1的。

下载后解压缩，然后运行install就行了，都按照默认一路回车就行了。之后phpmyadmin里面看看phpinfo里面是不是有了zend的信息。好像。。。没觉得快了多少。。。
]]></content>
    
    <summary type="html">
    
      用起来超级简单，呵呵。。

先到 http://www.zend.com/store/free_download.php 下载对应的版本。我这里是rhel3，glibc是2.3可是没有对应版本，就下了一个对应2.1的。

下载后解压缩，然后运行install就行了，都按照默认一路
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>今天上班很郁闷</title>
    <link href="http://wdicc.com/on-duty/"/>
    <id>http://wdicc.com/on-duty/</id>
    <published>2005-04-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[之前用的一台电脑被搬到其他部门了，我就去里面把有用的咚咚备份了一下。今天要用到那些 咚咚了才发现，备份错了，这个郁闷啊。。。想了好多个解决方案，今天还是去找那台电脑尝试去恢复一下吧。

去了看了一眼，发现电脑上面那个分区放了点东西，但是不是很多，应该还有希望吧。先试了easyrecover，界面很友好，和easycd creater差不多，那个分区大概15G，扫描需要10几分钟，扫描的过程中似乎看到了自己想要的咚咚，可是等扫完了发现，没有任何有用的，那个郁闷。

接着换finaldata，扫描需要1个小时。。。my god！不过实际可能工作时间没那么久，看着看着快完了，结果。。。windows出了个错，给关掉了。。。万恶的比尔盖！算了，不恢复了，想其他方法得了。。。
]]></content>
    
    <summary type="html">
    
      之前用的一台电脑被搬到其他部门了，我就去里面把有用的咚咚备份了一下。今天要用到那些 咚咚了才发现，备份错了，这个郁闷啊。。。想了好多个解决方案，今天还是去找那台电脑尝试去恢复一下吧。

去了看了一眼，发现电脑上面那个分区放了点东西，但是不是很多，应该还有希望吧。先试了easyre
    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>Grisword给tt写的一个图片counter</title>
    <link href="http://wdicc.com/counter-for-tt/"/>
    <id>http://wdicc.com/counter-for-tt/</id>
    <published>2005-04-19T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[保存为tools/counter.php
代
]]></content>
    
    <summary type="html">
    
      保存为tools/counter.php
代

    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>debian下的alsa(zz)</title>
    <link href="http://wdicc.com/alsa-in-debian/"/>
    <id>http://wdicc.com/alsa-in-debian/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[前段时间重装机器，用的是debian提供的2.6内核，装了alsa-base后发现alsa无法发声，但oss却工作正常。折腾了大半天也没搞明白是怎么回事，无奈之下只好使用oss。今天在版上看到有人讨论，才知道oss不能和alsa共存。而我的问题很可能就是系统在启动的时候预先加载了 oss的驱动。后来用google查了一下，在下面这个网址http://www.sonic.net/~rknop/linux/debian_alsa.html

发现问题果然如此。原来debian中自动侦探硬件的程序discover在检测到声卡后会自动加载oss，只要不让它自动加载就可以了。具体做法就是在/etc/discover.conf中加上一句skip i810_audio 。然后重启就能使用alsa了，不过要注意的是alsa默认是静音，需要自己手动将声音调大。

版上有人说还需要在/etc/hotplug/blacklist中加上i810_audio，我发现不需要这么做。因为安装alsa时，系统在/etc/hotplug/blacklist.d/alsa*中自动添加这些内容。

版上有人说还需要更改/etc/modutils/alsa-base中的相关内容，具体就是将above改为alias。

http://wiki.debian.org.tw/index.php/HardwareIdentification 这个网址讲述了debian中硬件识别的相关知识。

引用网址：http://www.debian.org.hk/node/12420
]]></content>
    
    <summary type="html">
    
      前段时间重装机器，用的是debian提供的2.6内核，装了alsa-base后发现alsa无法发声，但oss却工作正常。折腾了大半天也没搞明白是怎么回事，无奈之下只好使用oss。今天在版上看到有人讨论，才知道oss不能和alsa共存。而我的问题很可能就是系统在启动的时候预先加载了
    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>一段自动设置文件编</title>
    <link href="http://wdicc.com/usefull-vimrc/"/>
    <id>http://wdicc.com/usefull-vimrc/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-bash">
[root@caph root]# cat .vimrc 
" multi-encoding setting
if has("multi_byte")
  "set bomb
  set fileencodings=ucs-bom,utf-8,cp936,big5,euc-jp,euc-kr,latin1
  " CJK environment detection and corresponding setting
  if v:lang =~ "^zh_CN"
    " Use cp936 to support GBK, euc-cn == gb2312
    set encoding=cp936
    set termencoding=cp936
    set fileencoding=cp936
  elseif v:lang =~ "^zh_TW"
    " cp950, big5 or euc-tw
    " Are they equal to each other?
    set encoding=big5
    set termencoding=big5
    set fileencoding=big5
  elseif v:lang =~ "^ko"
    " Copied from someone&#39;s dotfile, untested
    set encoding=euc-kr
    set termencoding=euc-kr
    set fileencoding=euc-kr
  elseif v:lang =~ "^ja_JP"
    " Copied from someone&#39;s dotfile, untested
    set encoding=euc-jp
    set termencoding=euc-jp
    set fileencoding=euc-jp
  endif
  " Detect UTF-8 locale, and replace CJK setting if needed
  if v:lang =~ "utf8$" || v:lang =~ "UTF-8$"
    set encoding=utf-8
    set termencoding=utf-8
    set fileencoding=utf-8
  endif
else
  echoerr "Sorry, this version of (g)vim was not compiled with multi_byte"
endif
</pre>
]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-bash&quot;&gt;
[root@caph root]# cat .vimrc 
&quot; multi-encoding setting
if has(&quot;multi_byte&quot;)
  &quot;set bomb
  set fileencodi
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>在mdk安装xsim输入法</title>
    <link href="http://wdicc.com/xsim-on-mdk/"/>
    <id>http://wdicc.com/xsim-on-mdk/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[以前写的一个安装文档，今天看到了，贴上来，呵呵。

给菜鸟看得，老鸟就别看了，因为是菜鸟写的，所以可能有些名词命令什么的会遭到老鸟的鄙视，但是俺说了，不是给你们看得，但是如果你看了，发现什么错误或者有意见建议，欢迎提出来，thx

<br><a id="more"></a>在mdk安装xsim输入法，有以下几项工作要做
1 准备软件

xsim安装需要db4,我的mdk9.1安装的时候我已经选择了大部分软件，但是还是没有这个，所以你也可能需要这个，如果不确定，可以先跳过第3步看看，因为我也不知道怎么看有没有装。软件到这里下载http://www.sleepycat.com/download/index.shtml,下载GNU gzip/tar format
然后下在xsim,到这里http://download.berlios.de/xsim找到xsim-x.x.x.tar.gz(那里有个rpm的，但是我用rpm尝试了很多次，始终是装上了进入kde就死，可能是我设置的问题，你可以试试看，如果安装了不行，可以用rpm -e xxx.rpm卸载了重来)

2 准备安装

很多地方都说需要先把什么xcin,Chinput卸载了，我也照做了，可能是会有冲突吧。卸载命令
rpm -e xcin
rpm -e Chinput

3 安装db4

下载以后，你可以在windows下解压看看里面的文档，用winrar就可以解，在docs目录下面，或者直接看关于unix安装部分docsrefbuild_unixintro.html里面有安装方法
1）先把你的包解压了
tar xvzf db-4.x.x.tar.gz(我还不明白xvzf的意思，总之是参数了)
解压以后应该在当然目录会多出来一个db-4.x.x文件夹。

2）进入其中的build_unix目录，执行下面的命令
../dist/configure --enable-cxx --prefix=/usr/local
make
make install
在此过程中要注意看有没有错误，一般就是个xxx error之类，停下来。如果有，。。。。。我也不知道怎么办，你去重新下载一个看看，或者详细参看上面提到的他的文档。

3）如果要重装，执行下面的命令
make realclean

ok,make install不出意外，你的db4就应该没有问题了。

4 安装xsim

解压，和上面的命令类似 tar xvzf xsim-x.x.x.x.tar.gz
进入xsim-x.x.x.x目录，执行下面的命令
./configure
make
make install
在此过程中不能有错误
然后make install-data
这个命令我每次执行都会出错，后来我执行到这一步的时候，先把xsim文件夹改名字，例如xsim2,然后用rpm安装了他的rpm,命令rpm -ivh xxx.rpm，然后拷贝/usr/local/xsim/dat目录里面的东西到/usr/local/xsim2/dat里面，然后在卸载rpm,然后把xsim文件夹删除了，用rmdir -r xsim命令。然后把xsim2改为xsim
然后还需要修改dat文件夹的权限，chown -R xxx dat其中的xxx为x用户的用户名，其他的我也不会。
这样xsim也ok啦

5 配置

修改/etc/sysconfig/i18n文件，把里面的下面的对应项修改,其他的都是什么zh_CN或者zh_CN.GB2312,zh_CN.GB1380之类，反正有zh_CN就行了吧，我觉得，不是很清楚。
XIM=XSIM
XIM_PROGRAM=xsim
XMODIFIERS="@im=XSIM"

修改完后，在控制台输入执行echo $XMODIFIERS命令，如果输出是@im=XSIM，那就好了。

我在安装的过程中还修改过/etc/init.d/XIM文件，将里面的Chinput改成xsim，但是我觉得这个可能不需要修改，你可以先不修改。

6  运行个startx看看吧，上天保佑你。反正我看到那个右下角的“简”字兴奋了半天。切出输入法的快捷健是ctrl+space。

That&#39;s all
感谢eyes同学的指导，呵呵
从rh8开始装，到了mdk9才搞定，我是不是太笨了？ :P
]]></content>
    
    <summary type="html">
    
      以前写的一个安装文档，今天看到了，贴上来，呵呵。

给菜鸟看得，老鸟就别看了，因为是菜鸟写的，所以可能有些名词命令什么的会遭到老鸟的鄙视，但是俺说了，不是给你们看得，但是如果你看了，发现什么错误或者有意见建议，欢迎提出来，thx

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>第一次用cvs</title>
    <link href="http://wdicc.com/use-cvs/"/>
    <id>http://wdicc.com/use-cvs/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[客户端配置最重要的是CVSROOT环境变量的配置。

其格式是： :pserver:username@hostname(或者IP地址):CVS仓库路径 

例如，我在使用我们实验室的CVS服务器时的配置为： 

:pserver:car@192.168.2.2:/had/src 

每一个实验室的成员应该是用自己的mail服务器账户作为usernam，密码也是mail服务器的密码。 

上面是摘抄的一段，用cvs需要先cvs -d:pserver:anonymous@cvs.sourceforge.net:/cvsroot/pureftpd login 登陆，或者设置$CVSROOT环境变量，之后用cvs -d :pserver:anonymous@cvs.sourceforge.net:/cvsroot/pureftpd checkout pureftpd就可以checkout更新了。
]]></content>
    
    <summary type="html">
    
      客户端配置最重要的是CVSROOT环境变量的配置。

其格式是： :pserver:username@hostname(或者IP地址):CVS仓库路径 

例如，我在使用我们实验室的CVS服务器时的配置为： 

:pserver:car@192.168.2.2:/had/src 
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>揭开正则表达式语法的神秘面纱zz</title>
    <link href="http://wdicc.com/the-secret-of-regula-expressions/"/>
    <id>http://wdicc.com/the-secret-of-regula-expressions/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[作者： BUILDER.COM
Wednesday, October 23 2002 10:36 AM 

正则表达式(REs)通常被错误地认为是只有少数人理解的一种神秘语言。在表面上它们确实看起来杂乱无章，如果你不知道它的语法，那么它的代码在你眼里只是一堆文字垃圾而已。实际上，正则表达式是非常简单并且可以被理解。读完这篇文章后，你将会通晓正则表达式的通用语法。

<br><a id="more"></a>支持多种平台正则表达式最早是由数学家Stephen Kleene于1956年提出，他是在对自然语言的递增研究成果的基础上提出来的。具有完整语法的正则表达式使用在字符的格式匹配方面上，后来被应用到熔融信息技术领域。自从那时起，正则表达式经过几个时期的发展，现在的标准已经被ISO(国际标准组织)批准和被Open Group组织认定。

正则表达式并非一门专用语言，但它可用于在一个文件或字符里查找和替代文本的一种标准。它具有两种标准：基本的正则表达式(BRE)，扩展的正则表达式(ERE)。ERE包括BRE功能和另外其它的概念。

许多程序中都使用了正则表达式，包括xsh,egrep,sed,vi以及在UNIX平台下的程序。它们可以被很多语言采纳，如HTML 和XML，这些采纳通常只是整个标准的一个子集。

比你想象的还要普通随着正则表达式移植到交叉平台的程序语言的发展，这的功能也日益完整，使用也逐渐广泛。网络上的搜索引擎使用它，e-mail程序也使用它，即使你不是一个UNIX程序员，你也可以使用规则语言来简化你的程序而缩短你的开发时间。

正则表达式101很多正则表达式的语法看起来很相似，这是因为你以前你没有研究过它们。通配符是RE的一个结构类型，即重复操作。让我们先看一看ERE标准的最通用的基本语法类型。为了能够提供具有特定用途的范例，我将使用几个不同的程序。

字符匹配


正则表达式的关键之处在于确定你要搜索匹配的东西，如果没有这一概念，Res将毫无用处。

每一个表达式都包含需要查找的指令，如表A所示。

Table A: Character-matching regular expressions
 
操作
 解释
 例子
 结果
 
.
 Match any one character
 grep .ord sample.txt
 Will match “ford”, “lord”, “2ord”, etc. in the file sample.txt.
 
[ ]
 Match any one character listed between the brackets
 grep [cng]ord sample.txt
 Will match only “cord”, “nord”, and “gord”
 
[^ ]
 Match any one character not listed between the brackets
 grep [^cn]ord sample.txt
 Will match “lord”, “2ord”, etc. but not “cord” or “nord”
 

 
 grep [a-zA-Z]ord sample.txt
 Will match “aord”, “bord”, “Aord”, “Bord”, etc.
 

 
 grep [^0-9]ord sample.txt
 Will match “Aord”, “aord”, etc. but not “2ord”, etc.
 


重复操作符重复操作符，或数量词，都描述了查找一个特定字符的次数。它们常被用于字符匹配语法以查找多行的字符，可参见表B。

Table B: Regular expression repetition operators
 
操作
 解释
 例子
 结果
 
?
 Match any character one time, if it exists
 egrep “?erd” sample.txt
 Will match “berd”, “herd”, etc. and “erd”
 
*
 Match declared element multiple times, if it exists
 egrep “n.*rd” sample.txt
 Will match “nerd”, “nrd”, “neard”, etc.
 
+
 Match declared element one or more times
 egrep “[n]+erd” sample.txt
 Will match “nerd”, “nnerd”, etc., but not “erd”
 
{n}
 Match declared element exactly n times
 egrep “[a-z]{2}erd” sample.txt
 Will match “cherd”, “blerd”, etc. but not “nerd”, “erd”, “buzzerd”, etc.
 
{n,}
 Match declared element at least n times
 egrep “.{2,}erd” sample.txt
 Will match “cherd” and “buzzerd”, but not “nerd”
 
{n,N}
 Match declared element at least n times, but not more than N times
 egrep “n[e]{1,2}rd” sample.txt
 Will match “nerd” and “neerd”
 


锚

锚是指它所要匹配的格式，如图C所示。使用它能方便你查找通用字符的合并。例如，我用vi行编辑器命令:s来代表substitute，这一命令的基本语法是：

s/pattern_to_match/pattern_to_substitute/
 

Table C: Regular expression anchors
 
操作
 解释
 例子
 结果
 
^
 Match at the beginning of a line
 s/^/blah /
 Inserts “blah “ at the beginning of the line
 
$
 Match at the end of a line
 s/$/ blah/
 Inserts “ blah” at the end of the line
 
<
 Match at the beginning of a word
 s/
 Inserts “blah” at the beginning of the word
 

 
 egrep “
 Matches “blahfield”, etc.
 
>
 Match at the end of a word
 s/>/blah/
 Inserts “blah” at the end of the word
 

 
 egrep “>blah” sample.txt
 Matches “soupblah”, etc.
 
b
 Match at the beginning or end of a word
 egrep “bblah” sample.txt
 Matches “blahcake” and “countblah”
 
B
 Match in the middle of a word
 egrep “Bblah” sample.txt
 Matches “sublahper”, etc.
 




间隔
Res中的另一可便之处是间隔(或插入)符号。实际上，这一符号相当于一个OR语句并代表|符号。下面的语句返回文件sample.txt中的“nerd” 和 “merd”的句柄：

egrep “(n|m)erd” sample.txt


间隔功能非常强大，特别是当你寻找文件不同拼写的时候，但你可以在下面的例子得到相同的结果：

egrep “[nm]erd” sample.txt

当你使用间隔功能与Res的高级特性连接在一起时，它的真正用处更能体现出来。

一些保留字符Res的最后一个最重要特性是保留字符(也称特定字符)。例如，如果你想要查找“ne*rd”和“ni*rd”的字符，格式匹配语句“n[ei]*rd”与“neeeeerd” 和 “nieieierd”相符合，但并不是你要查找的字符。因为‘*’(星号)是个保留字符，你必须用一个反斜线符号来替代它，即：“n[ei]*rd”。其它的保留字符包括：

^ (carat) 
. (period) 
[ (left bracket} 
$ (dollar sign) 
( (left parenthesis) 
) (right parenthesis) 
| (pipe) 
* (asterisk) 
+ (plus symbol) 
? (question mark) 
{ (left curly bracket, or left brace) 
backslash 
一旦你把以上这些字符包括在你的字符搜索中，毫无疑问Res变得非常的难读。比如说以下的PHP中的eregi搜索引擎代码就很难读了。

eregi("^[_a-z0-9-]+(.[_a-z0-9-]+)*@[a-z0-9-]+(.[a-z0-9-]+)*$",$sendto)

你可以看到，程序的意图很难把握。但如果你抛开保留字符，你常常会错误地理解代码的意思。

总结在本文中，我们揭开了正则表达式的神秘面纱，并列出了ERE标准的通用语法。如果你想阅览Open Group组织的规则的完整描述，你可以参见：Regular Expressions，欢迎你在其中的讨论区发表你的问题或观点。

引用网址：http://www.zdnet.com.cn/developer/tech/story/0,2000081602,39077620-1,00.htm
]]></content>
    
    <summary type="html">
    
      作者： BUILDER.COM
Wednesday, October 23 2002 10:36 AM 

正则表达式(REs)通常被错误地认为是只有少数人理解的一种神秘语言。在表面上它们确实看起来杂乱无章，如果你不知道它的语法，那么它的代码在你眼里只是一堆文字垃圾而已。实际上，正则表达式是非常简单并且可以被理解。读完这篇文章后，你将会通晓正则表达式的通用语法。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>弄了老久的debian，总算可以看了</title>
    <link href="http://wdicc.com/nice-look-of-debian/"/>
    <id>http://wdicc.com/nice-look-of-debian/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[装的xfce4.2，目前debian官方还没有收录，很轻快的一个桌面系统。本来想用xorg的，可是debian官方也没有，作罢。

debian的系统菜单在/usr/share/applications下面，他会自动添加条目。xfce会调用这个里面的，显示debian系统菜单。xfce的菜单设置是在~/.config/xfce4下面，保存了好多信息。桌面菜单在desktop下面，用utf-8编码，修改的时候要注意。面板菜单调用的是/etc/xdg/xfce4/desktop/menu.xml，所以两个不能同步修改。回头看看能不能链接一下。

xfce下的文件管理器是rox，用起来还行，呵呵。mplayer和xfce的source是下面的这个：

# xfce4
deb http://www.os-works.com/debian unstable main
#uo
deb http://211.151.91.103/debian-uo sid marillat ustc rareware

mplayer的主页:http://www.mplayerhq.hu/homepage/design7/news.html。解码器:http://www.mplayerhq.hu/MPlayer/releases/codecs/。Skin：http://ftp.iasi.roedu.net/mirrors/ftp.mplayerhq.hu/MPlayer/Skin/。

xfce的主页:www.us.xfce.org。插件主页:https://developer.berlios.de/project/showfiles.php?group_id=910&release_id=4494。
]]></content>
    
    <summary type="html">
    
      装的xfce4.2，目前debian官方还没有收录，很轻快的一个桌面系统。本来想用xorg的，可是debian官方也没有，作罢。

debian的系统菜单在/usr/share/applications下面，他会自动添加条目。xfce会调用这个里面的，显示debian系统菜单。x
    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>今天装了个freebsd</title>
    <link href="http://wdicc.com/install-freebsd/"/>
    <id>http://wdicc.com/install-freebsd/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[花了大概一个下午的时间把FreeBSD5.3装上了。

FreeBSD不像linux那样可以完全脱离光驱软驱来安装，鼓捣了半天，最后还是刻盘装的，不过似乎刻一张盘就ok了，第二张盘一直没用。

安装好之后就是设置网络了。在/etc/rc.conf里面设置，也可以运行sysinstall来设置，不过运行一次就添加一次，晕死了。设置好了ip就是改mac地址了。在这个文件似乎不行，设置了ether就会启动不起来网络。没办法，只好在/etc/rc里面试着添加了三句，没想到居然还搞定了，呵呵。

ifconfig rl0 down
ifconfig rl0 ehter FFFFFFFF
ifconfig rl0 up

FreeBSD很奇怪，网卡名字似乎是和网卡型号联系的，不同型号不同名字。

装好之后就是设置了ssh。对了，设置好网卡后会出现sendmail启动不起来的情况，修改/etc/defaults/rc.conf里面关于sendmail部分，能disable都disable就ok了。ssh设置了允许root登陆和密码验证。

PermitRootLogin yes
PasswordAuthentication yes

不习惯su来su去的，还是加入root敢死队吧，呵呵。
]]></content>
    
    <summary type="html">
    
      花了大概一个下午的时间把FreeBSD5.3装上了。

FreeBSD不像linux那样可以完全脱离光驱软驱来安装，鼓捣了半天，最后还是刻盘装的，不过似乎刻一张盘就ok了，第二张盘一直没用。

安装好之后就是设置网络了。在/etc/rc.conf里面设置，也可以运行sysinst
    
    </summary>
    
    
      <category term="FreeBSD" scheme="http://wdicc.com/tags/FreeBSD/"/>
    
  </entry>
  
  <entry>
    <title>Linux远程GUI访问的应用</title>
    <link href="http://wdicc.com/linux-remote-gui/"/>
    <id>http://wdicc.com/linux-remote-gui/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[一、 Linux远程登录Windows图形界面     

    rdesktop是UNIX和Linux系统的一个远程桌面连接软件，它通过Microsoft Windows NT、Windows 2000 提供的终端服务（Terminal Services）以及Windows XP的远程桌面服务（Remote Desktop），能在Linux系统下远程登录Windows的窗口系统并使用。

<br><a id="more"></a>● rdesktop的下载和安装

    在各种版本的RedHat Linux系统安装盘上，一般第三张光盘上都带有rdesktop的可执行的RPM软件包，例如：
    RedHat 8.0: rdesktop-1.1.0-2.i386.rpm
    RedHat 9.0: rdesktop-1.2.0-1.i386.rpm
    Fedora Core 2: rdesktop-1.3.1-3.i386.rpm
    通过用 #rpm –q rdesktop 查看系统中是否已安装了rdesktop，然后安装相应的rpm软件包。

    我们还可以下载rdesktop的源程序，在各个操作平台上编译和安装。下面介绍在RedHat 9.0下安装rdesktop-1.3.1，下载的ftp地址为：
    ftp://tu172055.tsinghua.edu.cn/pub/mirror/gentoo/distfiles/rdesktop-1.3.1.tar.gz
    编译安装如下：
    [root@host12 cx]# tar xvzf rdesktop-1.3.1.tar.gz
    [root@host12 cx]# cd rdesktop-1.3.1
    [root@host12 cx]# ./configure
    [root@host12 cx]# make
    [root@host12 cx]# make install
    [root@host12 cx]#
    安装成功后，在/usr/local/bin下生成了可执行的rdesktop程序。

    ● rdesktop的使用

    1、远程Windows系统的设置

    这里以连接Windows XP Professional的远程桌面服务为例。首先在Windows XP下启用远程桌面服务（注意，XP的HomeEdition没有远程桌面服务），右键点击我的电脑，选择属性，查看“远程”选项，选择“允许用户远程连接到这台计算机”即可。

    2、Linux下rdesktop的使用

    rdesktop的使用很简单，可通过 #rdesktop –h得到使用的帮助。一般常用的登录命令为：
    #rdesktop –g 1024x768 –d 24 hostname
    其中 “g 1024x768”设置分辨率为1024x768，“d 24”设置真彩24位，hostname为 windows机器的主机名或者ip地址。

    在输入了Windows XP的用户名和密码后，就可以登录并操作远程的windows系统。如下图：


 

    二、Linux对GUI远程访问的支持

    如果你想在本机访问远程的Linux窗口系统，并需运行和显示图形程序，Linux提供了对图形用户界面（GUI）远程访问的广泛支持。

    ● 本机为Linux或UNIX系统

    现在设想登录到远程主机rhostname上，运行gimp程序，并把它的显示输出到本机的屏幕上，那么需要依次执行以下操作： 

    1、启动X服务器  
    # xhost +rhostname   (允许远程rhostname机使用本机的X Server)

    2、telnet (或ssh)登录远程主机
    # telnet rhostname

    3、设置DISPLAY环境变量
    指定了一个显示设备，所有的图形程序都将显示到这个设备。
    DISPLAY的格式为：hostname:displaynumber.screennumber
    hostname是本机主机名，或者是它的ip地址。一般displaynumber、screennumber都是0。
    # echo $SHELL
    • 如果返回的是 /bin/ksh，那么可以用：
    # export DISPLAY=本机的IP地址:0.0
    • 如果返回的是 /bin/csh，那么可以用：
    # setenv DISPLAY 本机的IP地址:0.0
    • 如果返回的是 /bin/bash，那么可以用：
    # DISPLAY=本机的IP地址:0.0
    # export DISPLAY

    4、启动gimp程序
     # gimp
    
    ● 本机为Windows系统

    在微软的Windows下需要一个XServer软件，以便可以登录到远程的Linux，而将结果显示在本地计算机上。常见的Windows的XServer软件有：X-win、Exceed和cywin等。下面介绍如何使用Exceed远程登陆Linux的过程。

    1、Exceed软件
    Hummingbird Exceed是运行在Windows环境下的优秀的X终端仿真软件，是一个商业软件。 运行Exceed之后, Windows系统就拥有了一台Xserver, 可以登录到任何一台Linux和UNIX主机上，并将图形化的窗口显示到本地，此时该Windows系统仍可正常运行其他的Windows应用程序，真正享受多任务操作系统的方便.。

    2、Exceed的设置（以Exceed 8.0为例）
    通过“开始>>程序>> Hummingbird Connectivity V8.0>>Exceed>>Xconfig”启动设置程序Network and Communication项，在Mode项中选择“XDMCP Broadcast”。



    3、在Windows下启动远程Linux的Kde图形界面
    （1）启动Hummingbird Exceed，然后将Exceed窗口变成最小化；
    （2）打开Windows下的ssh，登录到远程主机rhostname,;
    （3）登录成功后，输入：
    # export DISPLAY= =本机的IP地址:0.0
    # startkde

    此后远程的Linux的KDE图形界面就会显示在本机的Windows系统下，用户对它可进行任何操作。


参考网址：http://www.pcworld.com.cn/so_pcworld/more/zhuti/1231_z7.asp
]]></content>
    
    <summary type="html">
    
      一、 Linux远程登录Windows图形界面     

    rdesktop是UNIX和Linux系统的一个远程桌面连接软件，它通过Microsoft Windows NT、Windows 2000 提供的终端服务（Terminal Services）以及Windows XP的远程桌面服务（Remote Desktop），能在Linux系统下远程登录Windows的窗口系统并使用。

&lt;br&gt;
    
    </summary>
    
    
      <category term="other" scheme="http://wdicc.com/tags/other/"/>
    
  </entry>
  
  <entry>
    <title>mysql修改数据库权限</title>
    <link href="http://wdicc.com/mysql-grant/"/>
    <id>http://wdicc.com/mysql-grant/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[<pre class="prettyprint lang-sql">
GRANT select,insert,update,delete,create,drop ON xxxdb.* TO xxxuser@localhost IDENTIFIED BY "xxxpwd";
</pre>
]]></content>
    
    <summary type="html">
    
      &lt;pre class=&quot;prettyprint lang-sql&quot;&gt;
GRANT select,insert,update,delete,create,drop ON xxxdb.* TO xxxuser@localhost IDENTIFIED BY &quot;xxxpwd&quot;;
&lt;/p
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>今天我也blog了</title>
    <link href="http://wdicc.com/first-blog/"/>
    <id>http://wdicc.com/first-blog/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[找了个模板，也blog了一把，呵呵，日后有空多添点咚咚。
]]></content>
    
    <summary type="html">
    
      找了个模板，也blog了一把，呵呵，日后有空多添点咚咚。

    
    </summary>
    
    
      <category term="heart" scheme="http://wdicc.com/tags/heart/"/>
    
  </entry>
  
  <entry>
    <title>archlinux安装</title>
    <link href="http://wdicc.com/install-archlinux/"/>
    <id>http://wdicc.com/install-archlinux/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[1 准备工作
1.1 下载arch0.7的base iso，或者完整iso
  arch的iso可以从官方网站下载，http://www.archlinux.org/download.php ，
  也可以从我的mirror下载，http://210.72.203.226/current/iso/i686/arch-0.7-base.iso ，我这里的是base iso。本文以完整iso为例，其实是没有区别的，都是安装一个基本系统。

1.2 安排安装分区
  把arch的iso放到硬盘的一个ext2、ext3或者resierfs分区上面，注意不要放到fat分区上面，
]]></content>
    
    <summary type="html">
    
      1 准备工作
1.1 下载arch0.7的base iso，或者完整iso
  arch的iso可以从官方网站下载，http://www.archlinux.org/download.php ，
  也可以从我的mirror下载，http://210.72.203.226/cur
    
    </summary>
    
    
      <category term="Archlinux" scheme="http://wdicc.com/tags/Archlinux/"/>
    
  </entry>
  
  <entry>
    <title>给本本装了个debian</title>
    <link href="http://wdicc.com/debian-on-my-notebook/"/>
    <id>http://wdicc.com/debian-on-my-notebook/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[重装了一下。

安装了一个kde，觉得太慢了，换了xfce4，挺快得，呵呵。

＃cat .xinitrc 
export LANG=zh_CN
export LC_CTYPE=zh_CN
export XMODIFIERS=@im=fcitx
export XIM=fcitx
export XIM_PROGRAM=fcitx
export BROWSER="mozilla-firefox"
export TERMCMD="mrxvt"
fcitx &
startxfce4

这样就可以调用fcitx输入法了。

<br><a id="more"></a>mrxvt支持多tab，是国产得软件，呵呵。不过还得设置才能正常显示输入中文。

#cat ~/.mrxvtrc
mrxvt*mfont:              hanzigb16st
mrxvt*xftmfont:           simsun
mrxvt*xftSize:            14
mrxvt*multichar_encoding: GB
mrxvt*inputMethod:        fcitx

这样就ok了。


看到xfce4.2出来了，可是debian还没有包含，找到一个安装方法:http://www.os-works.com/view/debian/

To start the installation of the Debian packages, add the following two lines to the file /etc/apt/sources.list on your system: 


deb http://www.os-works.com/debian testing main
deb-src http://www.os-works.com/debian testing main
You&#39;ll have to update your package cache afterwards, using the command (as user root): 


apt-get update
This may take some time dependeing on your bandwidth. 

Now, if you want to install the whole Xfld desktop - including the Terminal emulator, the ROX file manager, the Xfmedia media player and several additional panel plugins - you should run the command 


apt-get install -t testing xfld-desktop
as user root. This will download all required packages and install them on your computer. The parameter -t testing should not be needed in most cases, but it doesn&#39;t hurt either. It tells apt-get to use packages from the testing release - which is the release name we use for our repository - even if your system defaults to another release (e.g. unstable). See this introduction to APT Pinning for further details on how to manage multiple APT sources. For example, if you are using Debian unstable (aka sid), you may need to add the following lines to the file /etc/apt/preferences/ (create the file if its not already present on your system) to ensure that you will actually install Xfce 4.2 and not Xfce 4.0 from Debian unstable: 


Package: *
Pin: origin www.os-works.com
Pin-Priority: 999
These three lines will make sure that APT assigns a higher priority to the Xfce 4.2, when installing or upgrading software on your system. Once you have added these lines, you don&#39;t need to use the -t testing option to apt-get any longer. 

In case you want to use only the core components of the Xfce 4.2 Desktop Environment, the command 


apt-get install -t testing xfce4
will install the window manager, session manager, panel, file manager and the various utilities that ship with Xfce, but not the additional software that completes the Xfld Desktop. 

If you have Xfce 4.0.x currently installed on your system, you can try to upgrade to the Xfce 4.2 packages using the command 


apt-get dist-upgrade
If you have trouble upgrading from the Xfce packages in the official Debian repository, you could try to uninstall the official packages first: 


apt-get remove libxfce4util-1
will remove all Xfce packages from your system. Afterwards, you should retry with the installation as described above.
]]></content>
    
    <summary type="html">
    
      重装了一下。

安装了一个kde，觉得太慢了，换了xfce4，挺快得，呵呵。

＃cat .xinitrc 
export LANG=zh_CN
export LC_CTYPE=zh_CN
export XMODIFIERS=@im=fcitx
export XIM=fcitx
export XIM_PROGRAM=fcitx
export BROWSER=&quot;mozilla-firefox&quot;
export TERMCMD=&quot;mrxvt&quot;
fcitx &amp;
startxfce4

这样就可以调用fcitx输入法了。

&lt;br&gt;
    
    </summary>
    
    
      <category term="debian" scheme="http://wdicc.com/tags/debian/"/>
    
  </entry>
  
  <entry>
    <title>apache版本号显示的问题</title>
    <link href="http://wdicc.com/apache-ver/"/>
    <id>http://wdicc.com/apache-ver/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[ServerTokens 指令 
说明: 配置服务器HTTP回应头 
语法: ServerTokens Major|Minor|Minimal|ProductOnly|OS|Full 
默认值: ServerTokens Full 
上下文: 服务器配置 
状态: 核心 
模块: core 

<br><a id="more"></a>此指令控制了Server回送给客户端的回应头域是否包含关于服务器OS类型和编译进的模块描述信息。 

ServerTokens Prod[uctOnly] 
服务器会发送（比如说）：Server:Apache 
ServerTokens Major 
服务器会发送（比如说）：Server:Apache/2 
ServerTokens Minor 
服务器会发送（比如说）：Server:Apache/2.0 
ServerTokens Min[imal] 
服务器会发送（比如说）：Server:Apache/2.0.41 
ServerTokens OS 
服务器会发送（比如说）：Server: Apache/2.0.41 (Unix) 
ServerTokens Full (or not specified) 
服务器会发送（比如说）：Server: Apache/2.0.41 (Unix) PHP/4.2.2 MyMod/1.2 
此设置将施用与整个服务器，而且不能在虚拟主机的管理层次上予以启用或禁用。 


ServerSignature 指令 
说明: 配置服务器生成页面的页脚 
语法: ServerSignature On|Off|EMail 
默认值: ServerSignature Off 
上下文: 服务器配置, 虚拟主机, 目录, .htaccess 
覆盖项: All 
状态: 核心 
模块: core 

ServerSignature指令允许您配置服务器端生 成文档的页脚（错误信息、mod_proxy的ftp目录列表、mod_info的输出）。您启用这个页脚的原因主要在于处于一个代理服务器链中的时候，用户基本无法辨识出究竟是链中的哪个服务器真正产生了返回的错误信息。 
默认的Off设定没有错误行（这样便与Apache 1.2及更旧版本兼容）。采用On会简单的增加一行关于服务器版本和正在伺服的虚拟主机的ServerName，而EMail设置会如文档中说明的那样额外创建一个指向ServerAdmin的"mailto:"部分。
]]></content>
    
    <summary type="html">
    
      ServerTokens 指令 
说明: 配置服务器HTTP回应头 
语法: ServerTokens Major|Minor|Minimal|ProductOnly|OS|Full 
默认值: ServerTokens Full 
上下文: 服务器配置 
状态: 核心 
模块: core 

&lt;br&gt;
    
    </summary>
    
    
      <category term="web" scheme="http://wdicc.com/tags/web/"/>
    
  </entry>
  
  <entry>
    <title>我來編譯 nVidia 顯卡驅動zz</title>
    <link href="http://wdicc.com/compile-nvidia-driver/"/>
    <id>http://wdicc.com/compile-nvidia-driver/</id>
    <published>2005-04-18T16:00:00.000Z</published>
    <updated>2016-10-22T04:19:18.000Z</updated>
    
    <content type="html"><![CDATA[＜我來編譯 nVidia 顯卡驅動＞
原文来自(但不是直译)：http://home.comcast.net/~andrex/Debian-nVidia/

nVidia 顯卡驅動程式是中兩個部份組成： 一是系統核心模塊(kernle module)，二是用戶層的庫(user-space libraries)。
用戶層的庫是不開源的，也叫(GLX庫），由nVidia廠商直接發佈的己編譯包。 核心模塊是以源碼形式（內仍有一個己編譯組件），在Debian下的包是 nvidia-kernel-source 和 nvidia-kernel-common。 兩個包都只是要安裝一次就可以了，而核心模塊就要在每次你重建或更改系統核心時重新編譯。

主要有以下三個步驟：

1。 編譯及安裝 nVidia的核心模塊
2。 安裝用戶層庫
3。 更新你的系統配置

<br><a id="more"></a>*因為我安裝的是 kernel 2.6.8-2-686-smp，但沒有這個核心的nVidia驅動，所以我自己來！*

步驟0： 準備編譯環境
=================

Code.0.1 安裝系統核心版本的庫頭文件包

# apt-get install kernel-headers-$KVERS

Code.0.2 當source還是sarge的時候安裝debian的打包工具

# apt-get install debconf-utils debhelper dpatch gettext html2text intltool-debian po-debconf

步驟1： 編譯及安裝 nVidia的核心模塊
=================

Code.1.1 設置一些方便的環境參數

# export KVERS=$(uname -r)
# export KSRC=/usr/src/kernel-headers-$KVERS

* 改source為unstable，再更新
Code.1.2 安裝nVidia 顯卡驅動程式系統核心模塊包

# apt-get install nvidia-kernel-source nvidia-kernel-common

這樣便會在/usr/src內找到剛安裝的模塊包
Code.1.3 解包

# cd /usr/src
# tar -zxf nvidia-kernel-source.tar.gz

Code.1.4 重建（編譯）模組

# cd /usr/src/modules/nvidia-kernel
# debian/rules binary_modules

好！完成編譯，編譯完的debian包可以在/usr/src/modules/(或/usr/src/ ??)內找到。

Code.1.5 把編譯完成的驅動包安裝到系統

# dpkg -i /usr/src/modules/nvidia-kernel-*.deb

*如果你有多於一個nvidia-kernel包在這目錄下，就要指明用哪個包啦！

步驟2：安裝用戶層庫
=================

* 改source回來為sarge，再更新

Code.2.1 安裝nVidia的用戶層庫

# apt-get install nvidia-glx

步驟3： 更新系統配置
=================

Code.3.1 修改 X 伺服器配置，看下方引用

# nano -w /etc/X11/XF86Config-4

Code.3.2 重要/etc/X11/XF86Config-4更改部份

...Module Section
Load "glx"
#Load "dri"
#Load "GLCore"
...Device Section
Driver "nvidia" #本來都是 "nv"或"vesa"吧？

Code. 把nvidia列入系統自動載入的模塊配置列表吧。

# grep -q ^nvidia /etc/modules ||echo nvidia>>/etc/modules
引用网址：http://linux.hiweed.com/node/1843
]]></content>
    
    <summary type="html">
    
      ＜我來編譯 nVidia 顯卡驅動＞
原文来自(但不是直译)：http://home.comcast.net/~andrex/Debian-nVidia/

nVidia 顯卡驅動程式是中兩個部份組成： 一是系統核心模塊(kernle module)，二是用戶層的庫(user-space libraries)。
用戶層的庫是不開源的，也叫(GLX庫），由nVidia廠商直接發佈的己編譯包。 核心模塊是以源碼形式（內仍有一個己編譯組件），在Debian下的包是 nvidia-kernel-source 和 nvidia-kernel-common。 兩個包都只是要安裝一次就可以了，而核心模塊就要在每次你重建或更改系統核心時重新編譯。

主要有以下三個步驟：

1。 編譯及安裝 nVidia的核心模塊
2。 安裝用戶層庫
3。 更新你的系統配置

&lt;br&gt;
    
    </summary>
    
    
  </entry>
  
</feed>
