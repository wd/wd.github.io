<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="cmda-1x-in-gentoo-linux/">总算搞定了我的CDMA无线上网卡</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-07-25T16:00:00.000Z" itemprop="datePublished">Jul 26, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/linux/">linux</a> <a href="../tags/cdma/">cdma</a> <a href="../tags/pccard/">pccard</a> <a href="../tags/setserial/">setserial</a> <a href="../tags/wvdial/">wvdial</a>
</div>
    </div>
      
        早先在 Archlinux 的时候，就使用过这块卡。现在换了 gentoo，内核要自己编译，昨天拿回网卡后一直没搞定，今天总算搞定了。

我的是一块品速的 pinsu-100c 网卡，是 pccard（pcmcia）类型的。

如果是大于2.6.13内核的，先安装 sys-apps/pcmciautils 这个包。否则安装 pcmcia-cs 这个包。

内核参数需要设置的有下面几个：
<pre class="prettyprint lang-text">
Device Drivers
 Network device support (NETDEVICES [=y]) 下面的
  ppp
   PPP support for async serial ports
# 如果搞不定可以试试看把别的ppp的也选上
# 然后是
Bus options (PCI etc.)
 PCCard (PCMCIA/CardBus) support
# 这下面相关的，我选的有 16-bit 那个和 yenta-compatible bridge ，通常就这个
# 然后是下面这个，对应的模块是 serial_cs，这个会把 pccard 对应到 /dev/ttyS* 这个设备文件
Device Drivers
 Character Devices
  PCMCIA character devices
# 相关的模块
pcmcia_core            31892  4 serial_cs,pcmcia,yenta_socket,rsrc_nonstatic
</pre>

搞定这些kernel选项之后，插入 pccard，应该会看到类似下面的信息，我之前因为kernel没有支持最后那个 serial_cs 模块，插入的时候没有最后两行信息。

<pre class="prettyprint lang-text">
$ dmesg
pccard: card ejected from slot 1
pccard: PCMCIA card inserted into slot 1
pcmcia: registering new device pcmcia1.0
ttyS1: detected caps 00000700 should be 00000100
1.0: ttyS1 at I/O 0x2f8 (irq = 18) is a 16C950/954

$ ls -alh /dev/ttyS1
crw-rw---- 1 root uucp 4, 65 07-26 22:28 /dev/ttyS1

# 要注意那个时间，应该是你插入的时间，否则就有问题了。
</pre>

好了，设备识别出来了。那再安装 net-dialup/wvdial 这个包，用来拨号的。如果是 gnome 环境，也可以安装 net-dialup/gnome-ppp ，他会关联安装 wvdial，这个是 gui 的，可能更友好一点。

同时还需要安装一个叫做 sys-apps/setserial 的包，用来给 ttyS1 设备设置比特率，不太清楚为什么需要设置。用命令 sudo setserial /dev/ttyS1 baud_base 230400 ，要注意那个 230400，我从网上搜到的说网卡支持最高的比特率是这个，所以设置了这个，设置别得行不行，没试过。

然后呢，还需要有一个 /etc/wvdial.conf 文件。
<pre class="prettyprint lang-text">
[Modem0]
  Modem = /dev/ttyS1
  Baud = 57600
  SetVolume = 0
  Dial Command = ATDT
  Init1 = ATZ
  FlowControl = Hardware (CRTSCTS)
[Dialer Defaults]
  Username = CARD
  Password = CARD
  Phone = #777
  Stupid Mode = 1
  Inherits = Modem0
</pre>

从网上搜到的，照抄就行了。关键是那个 /dev/ttyS1 ，和那个 Baud。一个对应你的设备，一个是比特率。我不太清楚为什么和上面设置的那个比特率不一样，不过我使用 minicom 测试的，只有这个比特率能 work。但是或许你那的情况会不一样，可以使用 minicom 来测试，minicom 里面设置了比特率之后，可以多输入几个 AT 回车看看有没有返回 OK，返回就能工作。

这样就一切ok了，sudo wvdial 就可以拨号了。
<pre class="prettyprint lang-text">
$ sudo wvdial
--> WvDial: Internet dialer version 1.60
--> Initializing modem.
--> Sending: ATZ
OK
--> Modem initialized.
--> Sending: ATDT#777
--> Waiting for carrier.
CONNECT
--> Carrier detected.  Starting PPP immediately.
--> Starting pppd at Sat Jul 26 22:15:52 2008
--> Pid of pppd: 11766
--> Using interface ppp0
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> local  IP address 211.145.60.183
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> remote IP address 220.192.0.22
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> primary   DNS address 220.192.0.130
--> pppd: ��[06][08]��[06][08][08]�[06][08]
--> secondary DNS address 220.192.8.58
--> pppd: ��[06][08]��[06][08][08]�[06][08]
</pre>

最主要那个 ATZ 发送之后，要返回一个 OK，如果没有，那就是表示没 work，继续搞吧，设备文件没问题的话，一般就出在比特率上面了，结合 setserial 和 minicom 多修改几个看看。

gnome-ppp 使用很简单了，自己琢磨吧。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/cmda-1x-in-gentoo-linux/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="kong-fu-panda/">昨天去看了《功夫熊猫》</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-07-05T16:00:00.000Z" itemprop="datePublished">Jul 6, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a> <a href="../tags/movie/">movie</a> <a href="../tags/panda/">panda</a>
</div>
    </div>
      
        浦发的电影票好久没定上了，所以熊猫出来好久了也没去看。

<img src="http://pic.yupoo.com/wdicc/655915d3eac1/aafljbo3.jpg" alt="功夫熊猫" width="500" height="500">

片子还是不错的，“Mr 乌龟”的这种叫法不知道是怎么搞出来的，呵呵。

这里有不少预告片，可以去看看。 http://www.mtime.com/movie/44740/trailer.html

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/kong-fu-panda/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="howto-reset-ati-fglrx-settings/">万恶的 ATI fglrx 驱动</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-07-03T16:00:00.000Z" itemprop="datePublished">Jul 4, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/linux/">linux</a> <a href="../tags/ati/">ati</a> <a href="../tags/fglrx/">fglrx</a>
</div>
    </div>
      
        ATI 官方驱动带了一个 amdcccle 命令，可以显示图形界面对显示器作一些设置，例如修改分辨率，twinview, dual head, bigdesktop 这些设置。其实 nvidia 的官方驱动也是带了这么一个工具的。

但是呢，有时候就会发现，通过这个命令修改显示之后，你的xorg.conf 里面的设置就不起作用了！无论你之后如何去修改你的 xorg.conf ，他根本不会去理会。

我遇到的问题就是，某次通过 amdcccle 设置了一下 bigdesktop，结果导致接上我的另外一个LCD之后，那个LCD的分辨率死活就卡在 1024x768 上了。要知道，那个LCD是支持 1280x1024的，可是无论如何设置，就是不能提高分辨率了。查看 xorg 的log，能看到读取的 /etc/X11/xorg.conf 文件，可是就是没效果。

开始怀疑是显示器出于保护，把分辨率设置底了，结果接到别人的笔记本上面是没问题的。后来研究来研究去，发现还是 ATI 驱动的问题。

/etc/ati 下面有不少文件，也不知道这些文件是什么用途，但是 amdpcsdb 这个文件就是罪魁祸首了。删掉后LCD的分辨率就正常了。

很奇怪，我执行 amdcccle 的时候，用的可不是 sudo ，他是怎么写到这个文件里面的？

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/howto-reset-ati-fglrx-settings/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="greasemonkey-autologin-script/">自动登录网站的 greasemonkey 脚本</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-06-21T16:00:00.000Z" itemprop="datePublished">Jun 22, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/linux/">linux</a> <a href="../tags/firefox/">firefox</a> <a href="../tags/greasemonkey/">greasemonkey</a>
</div>
    </div>
      
        自动登录 gmail 的 greasemonkey 脚本，可以根据需要修改 formElement.name=="Email" 为别的，来登录别的网站。注意修改 name, include 这些相关的东东
<pre class="prettyprint lang-javascript">
// (c) 2007, Yabin Guo
// To install, you need Greasemonkey: http://greasemonkey.mozdev.org/
//
// --------------------------------------------------------------------
// ==UserScript==
// @name          gmail Login
// @description   Auto-login of gmail
// @include       https://www.google.com/a/wdicc.com/*
// ==/UserScript==

//replace your seraph username and password in the following expression;
userName="wd";
passWord="*******";

function submitFirstPasswordForm() {
	var form=document.forms[0];
    var submitButton = null;
	var passwordElem;
	var accountElem;
	var submitButton;
    for (i=0; formElement=form[i]; ++i){
		if(formElement.type=="password"){
			passwordElem=formElement;
		}else if(formElement.name=="Email"){
			accountElem=formElement;
		}else if(formElement.type=="submit"){
			submitButton=formElement;
		}
	}

	accountElem.value=userName;
	passwordElem.value=passWord;

    if (submitButton) {
        submitButton.focus();
        submitButton.style.MozOutline = "2px solid purple";
        // Submit the form by calling click() on the submit button.
        submitButton.click();
        // Break out of both loops.
        return; 
      }
}

window.addEventListener(
  "load", 
  function() { 
    setTimeout(submitFirstPasswordForm, 0); 
  }, 
  false
);
</pre>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/greasemonkey-autologin-script/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="guanggaoguanggao/">张贴小广告~</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-05-24T16:00:00.000Z" itemprop="datePublished">May 25, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a>
</div>
    </div>
      
        <a href="http://uglyorbeauty.blog.sohu.com/" target="_blank" rel="external">http://uglyorbeauty.blog.sohu.com/</a>

做个广告哈~嘿嘿，大家多捧场~

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/guanggaoguanggao/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="doing-exercise/">开始锻炼第二天</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-05-05T16:00:00.000Z" itemprop="datePublished">May 6, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a> <a href="../tags/健身/">健身</a>
</div>
    </div>
      
        从昨天早上开始，就早早爬起来来公司附近的健身中心跑步了。

说起来，去年也曾经跑了2个月，不过体重下去2斤，汗... 昨天去了之后称了一下，已经比去年冬天又重了2，3公斤，日阿，长的真快。

昨天去了之后，基本就是恢复一下体力，两条杆的那个跑步机上面跑了25分钟左右，累的不行了。就去器械做了20多个走人。今天先去那里搞了 15 分钟热身，然后去跑步机上面跑了 15 分钟，本来打算是10分钟完事的，结果咬着呀跑了15分钟。希望明天能直接在跑步机上面跑30分钟。

事实证明，跑步的时候有个好看的片子来分散注意力的话，还是很容易坚持的。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/doing-exercise/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="ape-to-flac/">尝试了一下APE到flac格式的转换</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-04-19T16:00:00.000Z" itemprop="datePublished">Apr 20, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/linux/">linux</a> <a href="../tags/ape/">ape</a> <a href="../tags/flac/">flac</a> <a href="../tags/mac/">mac</a>
</div>
    </div>
      
        突然没事，就尝试一下看看。。。参考 <a href="http://www.linuxgem.org/tip/convert-ape-and-cue-to-flac.html" target="_blank">这里</a>。

gentoo 里面，需要安装 mac-ports 和 shntools。shntools 需要启用 flac 的 use。

<pre class="prettyprint lang-bash">

转完之后，文件名都是 lssplit-track00.flac 这种的。如果出现不认识 ape 格式的错误，多半是 mac-ports 没安装的缘故。

另外，现在在用 scim-python 打字，感觉有点意思。速度还行，词库有几十M，应该不差吧。。。
</pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/ape-to-flac/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="shihuashishuo/">实话实说</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-04-18T16:00:00.000Z" itemprop="datePublished">Apr 19, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Joke/">Joke</a>
</div>
    </div>
      
        小 崔：大叔大妈，好久不见，股票炒得挺好吧？

宋丹丹：好啊，那是相当得好！

小 崔：买的都是啥股票？

赵本山：都是中石油嘛。

宋丹丹：不说话还能把你憋死？

赵本山：我看中石油得先把你憋死！

小 崔：大妈，我听说中石油最近跌得很厉害啊？

宋丹丹：假象，绝对的假象！不会下蹲的股票是跳不高的。股评家说了，买了中石化，生活不用怕；买了中石油，生活不用愁。

赵本山：是啊，那中石油是干蹲不起，啥时候跌停板了也就到底了。

小 崔：大叔，你买的是什么股票？

宋丹丹：那他能好意思说吗？中国平安！

小 崔：大叔，您当时咋想的？

赵本山：我寻思中国平安从149元跌到100元就是地板价了，没想到地板下面还有地窖，地窖下面还有地狱，更没想到的是地狱还有十八层！

小 崔：看来炒股赚钱还真挺难的。 大叔大妈,现在有啥打算？

宋丹丹：还打算啥呀？搁家解套呗！石油套—-钢钢的—-老他妈难解了！问君能有几多愁，恰似满仓中石油。

赵本山：我整个锣，没事出去敲一敲：平安无事了！

小 崔：大叔大妈，每人一句话,总结感言.

宋丹丹：我十分想抛中石油.

赵本山：说那玩儿干啥?我整点有用的说.印花税啥时候降下来呀?

零七年，走远了，牛市一去不返了。

零八年，危险了，股市出现拐点了。

蓝筹股，跌惨了，中国石油腰斩了。

概念股，疲软了，奥运行情搁浅了。

融资门，上演了，千亿增发拍板了。

印花税，不减了，政协提案白喊了。

美联储，拨款了，纽约股市回暖了。

证监会，不管了，转眼又跌百点了。

抢反弹，没胆了，弱市积重难返了。

要救市，太晚了，市场人心都散了。

三千五，不远了，主力杀跌急眼了。

同学们，快闪了，再不撤退破产了

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/shihuashishuo/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="use-uvesafb/">使用 uvesafb</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-04-12T16:00:00.000Z" itemprop="datePublished">Apr 13, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/linux/">linux</a> <a href="../tags/kernel/">kernel</a> <a href="../tags/uvesafb/">uvesafb</a>
</div>
    </div>
      
        FB 就是 Frambuffer 了。直观一点说，使用之后，可以给 console 设置分辨率，可以在console下面看电影，看图？

在 Kernel 里面，ATI 显卡有个 Readonfb，使用后不需要修改 grub 就可以直接出现高分辨率的 console，但是他和 ATI 的 fglrx 驱动冲突，会导致死机，所以，基本没法子用，除非你不打算进 x。

<a href="http://dev.gentoo.org/~spock/projects/uvesafb/" target="_blank"> uvesafb</a> 以前叫做 vesafb-tng，似乎是从 kernel 2.6.23 开始改名的。使用这个也很简单了，参考作者的 <a href="http://dev.gentoo.org/~spock/projects/uvesafb/" target="_blank">web</a> 页面。

有几个内核参数：
<pre class="prettyprint lang-text">
Graphics support ---&gt; Userspace VESA VGA graphics support
General Setup ---&gt;  Initial RAM filesystem and RAM disk (initramfs/initrd) support 设置为 /usr/share/v86d/initramfs
上面几个设置分别是
CONFIG_CONNECTOR=y
CONFIG_FB_UVESA=y
CONFIG_INITRAMFS_SOURCE="/usr/share/v86d/initramfs"</pre>
安装 klibc 和 v86d 。修改 grub，添加 video=uvesafb:1024x768-32,mtrr:3,ywrap

如果遇到 'uvesafb: failed to execute /sbin/v86d' 的错误，可能是最后一个内核参数没有设置好的缘故。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/use-uvesafb/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="new-blog-space/">庆祝一下把blog迁移到了新的空间</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2008-04-09T16:00:00.000Z" itemprop="datePublished">Apr 10, 2008</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a>
</div>
    </div>
      
        只能说，盘古太tmd的慢了。而且今天发现他们很无耻的一个地方，ftp上传下载网页代码的时候速度很快，但是数据库文件死活就弄不下来，mmd，气死我了。后来还好 <a href="http://oceanboo.cn/" target="_blank">ob</a> 帮我弄下来了。

新的空间要感谢 <a href="http://77boy.cn" target="_blank">七巧仔</a> ，呵呵，不知道可以用多久。不过快一点是一天了。发现有点问题就是 fanfou tools 不能用了。好像是连不上 饭否 的api服务器。郁闷。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/new-blog-space/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/13/" class="prev">Prev</a>
    
    
        <a href="/page/15/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
