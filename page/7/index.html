<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        
  <article class="post">
	<h2 class="title">
		<a href="how-i-became-a-emacser/">我是怎么从 vim 转向 emacs 的</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/emacs/">emacs</a> <a href="../tags/vim/">vim</a>
</div>
    </div>
      
        从尝试用 emacs，到现在基本（有些地方还不是很适应）习惯用 emacs，算起来得有 n 年了，我都忘记最早接触 emacs 是什么时候了。在 2010-3-20 之前尝试过很多次，基本都是记几个快捷键，过几天就又忘记了。后来自己想了下为什么不能持续的原因，我觉得有两个。

1 没有在日常工作里面使用。
之前我的开发工作基本都是直接在某台服务器上面的，这样就开发调试会比较方便，而那些机器一般要不会装 emacs，这样不常用就会导致记住的快捷键过几天就忘记了。最近刚好需要在本机写点程序，也就刚好用上了。

2 不会 elisp。
emacs 的配置文件都是 elisp 写的，而不经过配置的 emacs 就编辑文件来看，我觉得还不如去用 vim，vim 好用多了。我想刚看到 elisp 的时候一般都会觉得这个语言太变态了，全是一堆的括号。。。而不会 elisp 就会导致你只能去机械的复制别人的配置，如果刚好是你想要的，那还好，而如果还想做点小的修改，那就会很郁闷，用起来郁闷，不用可能更郁闷。不爽多了，就干脆不用 emacs 了。

如果你能在日常工作中经常使用，并且会写程序（比如 php,perl 什么的，随便哪个都行），那么对于基本没怎么配置过 .vimrc 的用户来说，切换到 emacs 其实应该还算是一个比较简单的事情。

1 emacs 是无模式的。
这就是说你不用经常去按那个 Esc 来切换模式了。没有模式也就意味着你不能使用像 vim 那么简短的命令了，因为像 a,i,o,h,j,k 这些对 emacs 来说，这些都是正常的输入字符，所以我们不得不在这些字符前面加上 C(control), M(Meta 一般是 Alt), S(shift) 这些前缀。在 emacs 里面需要按的可能还远不止这些控制字符加一个普通字符，比如我定义的 C-c n E 来打开 erc。不要被这些吓着了，并不需要你记住所有的，你只要记住你常用的就好了。

2 emacs 里面的 buffer。
打开一个文件，就会出现一个 buffer。调用帮助，也会打开 buffer。使用 emacs 绝对不要和一些自动出现的 buffer 过不去，使用 emacs 的理念就是一个编辑器 n 个 buffer，编辑文件的，看 mail、news 的，上 irc 的等等。你需要的是一个方便的 buffer 切换的工具，推荐的有 ido-mode 和 ibuffer。

3 emacs 里面有各种 mode。
vim 里面是通过设置 filetype(ft) 来达到语法高亮等功能的。emacs 里面是通过各种 mode。emacs 里面有主模式(main mode)，和辅模式(minor mode)。上面说的 ido-mode 就是一个辅模式。打开一个文件后，一般有一个主模式（通过一些方法也可以有多个），多个辅模式。比如我打开一个 js 文件，会同时使用到 js2-mode 这个主模式，和 highlight-tail-mode, autocomplate-mode 这几个辅模式。

4 写点 elisp。
elisp 基本就是一堆的括号，括号最左半边的是操作符或函数，后面的都是他的参数，比如 (- 10 3)，具体这个是什么意思，就要去看看 "-" 是干嘛的，他会对后面的参数做什么事。再比如(setq xwl-at-company? (xwl-at-company))。先去看看那个 setq 是干嘛的，查完好像是设置变量的，他会把第二个参数的值赋给第一个参数。那第二个变量是个表达式，那就等于会把这个表达式的值赋给他，对吧。这个括号表达式是干嘛的呢？xwl-at-company 这个是自己写的函数，不需要参数，他会根据一些信息返回是不是在使用公司的网络。是返回 t，不是返回 nil。ok，这不就明白了么？呵呵。还有一些像 (if, (when, (progn 等等，都是这么个理解方法。
写程序就避免不了调试，最简单的调试方法应该就是直接打印了吧，呵呵。elisp 里面可以使用 print, message 来输出一些调试信息。比如 (print (format "value of t: %s" t))，具体啥意思可以参考前面说的方法去查查。这些信息可以在一个叫 *Messages* 的 buffer 里面看到。

5 emacs 里面的帮助。
C-h 是调用帮助，可以在后面再输入 ？ 来看看有什么可用的帮助。我一般用的是 m（看当前 mode 的一些快捷键设置），k（查某个快捷键是干嘛的），v（查 emacs 变量的值）。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="how-i-became-a-emacser/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="powerful-git-and-git-svn/">强大的 git 和 git svn</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-04-03T16:00:00.000Z" itemprop="datePublished">Apr 4, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/git/">git</a> <a href="../tags/svn/">svn</a>
</div>
    </div>
      
        在春哥的鼓动下，用上了 git。有 git svn 支持，还是很好用的，建议 svn 用户都试试看。

使用 git svn clone SVN_URL 来 clone 初始化你的本地 repo，然后就和 svn 没关系了，直到你需要把你的改动提交到 svn 的 repo。

先说说 git 的一些本地操作，就捡我自己用的说吧，我觉得应该也够用了。

首先 git add 是用来添加文件的，编辑好新的文件后，使用 git add file_name 就能把他加入到 git 里面管理，当然，如果还不打算提交他，那也可以先编辑以后再 add。

然后 git mv 改名，git rm 删文件，这和一般的 linux 命令差不多，就不用多说了。要记得的是，如果想让你的改动加入到 git 的管理里面，那就最好使用这两个文件来改名和删文件。如果直接用 linux 命令操作，比如改名，git 会认为你要删一个文件，并且那个新的文件还没不会加入到管理里面。

然后就是 git status 了。执行这个能看到当前 repo 的分支（例如下面的第一行说的 wd）里面有哪些改动，这个里面的信息应该是能分四类。一类是对文件的操作，比如添加删除文件等(changes to be committed)，这类文件直接使用 git commit 就能提交。一类是对现有文件的修改(changed but not updated)，这类文件使用 git add 添加后也能用 git commit 提交，不过也可以用 git commit -a 直接提交。一类是没有加入到管理的一些文件(untracked files)，这类文件不会被提交，除非你使用 git add 添加他们。好像还有一类，是你的修改如果和上游冲突的时候，这时候会多出来一类，提示你这些文件和上游冲突，打开这些文件，里面有明显的标记会指出冲突是什么，解决冲突后，git add 添加这个文件，再提交就可以了。

<pre class="prettyprint">
# On branch wd
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#	new file:   a
#
# Changed but not updated:
#   (use "git add <file>..." to update what will be committed)
#   (use "git checkout -- <file>..." to discard changes in working directory)
#
#	modified:   hello
#
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#	b
</file></file></file></file></pre>

上面捎带说了下 git commit，commit 有个 -m 参数可以直接在后面指定 commit message，就不用打开那个编辑窗口了。另外还有个 --amend 能用来修改最后一次提交的 commit message。commit 后面还可以跟具体的文件或目录来只提交指定的东西。

还需要知道的命令，git log。能看到自己和别人提交的每个 commit 的情况。那个类似 commit 0fb8046e4bd0b5ce44d778e3936bda80e7e0ccd7 的那一长串字符就是 commit id。如果想看具体某个 commit 做了什么，那就执行一下 git show commit_id,能看到一个 diff，很方便的。

git diff file_name 可以用来看自己要提交的文件改动了什么。

git branch 还能建分支，非常的方便。使用 git branch wd 就能建立一个叫 wd 的分支，使用 git branch 就能看到当前有哪些分支，使用 git checkout wd 就能切换到 wd 这个分支，在这个分支做的改动不会影响到 master，随时可以切换回去。然后可以使用 git merge 可以把在某个分支做的变更 merge 进来。比如当前是 master 分支，git merge wd 会把在 wd 这个分支建立后，在 wd 上面做的改动 merge 到 master 里面。不过在不熟练的情况下，还是别使用分支了，呵呵。

如果提交了之后又想撤消，那就要用到 git reset 了。reset 分 mixed，soft，hard 几种，看名字应该能看出了一点什么，hard 会把对文件的改动都撤消，soft 只会删掉提交记录，不会对文件操作。具体这几个区别还是看看 man git reset 吧，这个操作也是稍微有点复杂，容易出问题，没熟悉的情况下慎用。我只用过 soft reset，用来修改 commit message，呵呵。

前面说的这些都是在本地操作的，完全不用管别人的情况，在没有网络的情况下，你也可以提交你的修改。

激动人心的时候到来了，怎么把修改提交到 svn 呢？

如果想要把自己的变更应用到 svn repo，那就要用到 git svn dcommit 了。不过别急，这时候还需要了解下 git svn rebase 命令，这个命令是用来把远程别人的改动应用到本地的，类似于 svn update（不过文档里面说还是有点区别，没看明白）。在 rebase 的过程中，难免会遇到一些冲突，这个时候会有提示信息的，而且在 git status 里面也会提醒你的。这时就需要你先去解决冲突，打开那个文件看看就知道了。解决了后使用 git add 添加那个文件，然后 git svn rebase --continue，直到完成。

这样之后，你就可以用 git svn dcommit 来提交你的修改了。这个命令完事后会自动 rebase 一下，所以好像可以直接使用这个命令而不 rebase 先。

好了，这下改动就提交到了 svn 了，整个过程就完事了。这只是一些基本的用法，应该也足够用了，遇到问题或更深入一点的用法可以看看 git 的 man。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="powerful-git-and-git-svn/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="about-justice/">看了 12 怒汉 ( 12 Angry Men )</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-03-13T16:00:00.000Z" itemprop="datePublished">Mar 14, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/emacs/">emacs</a> <a href="../tags/justice/">justice</a> <a href="../tags/movie/">movie</a> <a href="../tags/thinking/">thinking</a>
</div>
    </div>
      
        
12 怒汉下了好久了，一直没看，正在看，还没看完就忍不住要写点什么。

俄语实在不好听，忍着看了 10 分钟，这个片子就开始吸引人了。12 个陪审团成员，还有其它人，几乎所有人都认为 20 分钟应该就会完事，因为这之前已经听法院审了三天了。在 12 比 1 的情况下，怎么说服其它人同意小孩是无罪的，这就是整个片子的内容。当然是有理有剧的。

当你手里掌握着别人的生命的时候，你会怎么做？今天上午还看了几集哈佛大学的那个关于公正的课，里面几个例子。

如果你是一个电车司机，刹车失灵了，轨道那头是 5 个工人，开过去肯定会把他们撞死，关键时刻你发现有个叉道，那边是 1 个工人，如果你打方向盘的话，那就是撞死一个人，你会怎么做？

再如果司机不是你，没有叉道，而你当时你站在桥上，你旁边有个胖子，如果把那个胖子推下去，车就会停，你会怎么做？

如果你是一个医生，医院来了 6 个病人，其中一个病的很重，其他几个轻一点。如果你救那个病重的，因为需要的时间会很长，那其它几个就会死。如果你先救那 5 个，那么病重的一个就肯定死，你怎么办？

再如果，来了 5 个病人，他们分别需要移植 5 个器官，可是没有现成的。这时候你想起来旁边屋子里面有一个健康的人，如果把他的器官换给那 5 个人的话，那 5 个人就会得救，当然，这个人会死，你会做么？

还有一个真实的案例。4 个人座船出去，路上遇到风暴，逃到了逃生艇上。没有吃的，里面有个孤儿，不听劝告，喝了海水，病的很严重，其它三个人把那个人杀了，然后挺了过去，得到了救助，到了岸上，他们供认了经过。然后你觉得他是有罪还是无罪呢？

之前还看过一个文章，讲什么是民主的。看 <a href="http://tieba.baidu.com/f?kz=126121842" target="_blank" rel="external">这里</a> 吧。

民主就是少数服从多数么？好像不是这样的，那民主是什么呢，我也不知道，gcd 说他们统治的国家就是民主的，可好像我连想上的网站都上不了，还不经过我同意，这个好像不那么民主。那倒底民主是什么呢？

看了明朝那些事，头一次知道原来内阁是可以驳回皇帝的圣旨的，原来也不是说皇帝说什么就算什么的，他也得和大臣讲道理的。如果给你 10 个人让你管，那很简单，是不是，要干什么的时候，一个人一个人和他说明白就好了。如果是 100 个呢？ok，虽然累点，好像也还是可以说清楚的。可如果是 1000 个呢，显然一个一个说就不靠谱了，得想别的办法，那就是从 1000 个人里面选 10 个人，每人分给他们 99 个人，你有什么事，教会这 10 个人就好了，然后由他们去和手下的 99 个人说明白，简单了吧。用这个模式，不管有多少人都可以搞定了，是不是？实际上军队不就是这个模式么。但发现没有，实际上你的权力被分到了那 10 个人的手上，如果他没有和手下的 99 个人表达你的意思，而表达的是他自己的意思，那么。。。皇帝有时候就得面对这个，想让内阁替你办事，那你就得把权力分给他们。

再来说民主。选举其实就是一个分权的过程，你把你的一部分权力分给了你选的代表，如果你都不知道这个代表你的人是男是女，或是太监的时候，这其实是很恐怖的，对吧。

这个片子没想到看到最后居然还转折了一下，有点意思，呵呵。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="about-justice/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="use-emacs-publish-your-blog/">用 emacs 写 blog</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-03-09T16:00:00.000Z" itemprop="datePublished">Mar 10, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/emacs/">emacs</a> <a href="../tags/wordpress/">wordpress</a>
</div>
    </div>
      
        不想看大段文字的可以直接看 http://github.com/wd/work/tree/master/weblogger.el/。

先看看 <a href="http://emacser.com/weblogger.htm" target="_blank" rel="external">这个</a>， 我用的weblogger.el 就是从那来的，这个 el 打了 html 支持和 tags(summary) 的支持。

因为写中文 title 的时候，生成的 url 会有一堆的中文字符，看起来就是乱码，不可读，这时候可以在 wp 的后台指定一个 post-slug，url 会根据这个生成。这里我主要是研究了一下对 post-slug 的支持。

weblogger.el 里面 应该是在 weblogger-determine-capabilities 里面判断一下你的 blog 支持的类型，我看了 wordpress 的支持的 methods，里面metaWeblog.newPost, 和 blogger.newPost 应该都是支持的，他应该首选的是 metaWeblog 那个。

然后呢，就是看 wp 的 xml-rpc 文件，里面有个 mw_newPost 对应的就是 metaWeblog.newPost 应该是。在这个函数头试了一把，用的确实是这个。然后就看这里面是怎么处理的了。

这里面最后用的是 wp_insert_post 发的贴子，再看这个函数，能看到里面用的是 post_name 来生成的 post-slug。那么我们只要设置一下这个变量就可以了。在这个函数里面，搜一下 post-name 能看到
<pre class="prettyprint">
// Let WordPress generate the post_name (slug) unless
// one has been provided.
$post_name = "";
if(isset($content_struct["wp_slug"])) {
    $post_name = $content_struct["wp_slug"];
}
</pre>

我们只要在 weblogger.el 里面 post 一个这个变量就好了。在 post 里面能看到如果有个 X-url 的话，他会 post 一个 link 字段出来。那就好了，把上面那个 wp_slug 改成 link，然后写 blog 的时候加一个字段 X-url 就会使用这个你指定的 url 了。

这个文章就是用 emacs 写的。 :D

又研究了下，再补充点内容，呵呵。(2010-03-10)

问题是这样的，新建一个 post 的时候会出来 subject, keywords, newsgroup 这三个字段，怎么能让他加上 summary 和 x-url 呢，这样我就不用每次都手动写了，怎么弄呢，我就找啊找啊，总算找到方法了。

新建的 buffer 里面不是会有个提示么，什么 '--text follows this line --', 就找这个，看是哪里提供的。在 weblogger.el 里面，找了半天，发现没有这个提示。怎么回事？要相信程序，肯定是会有的，只能是找错了地方。

看看这个 el 的看头，引用了 message.el，搜了一下，这个原来是 gnus 提供的，找到这个 el，搜了一下，找到那几个字符了。原来是在这里面添加的。然后我就尝试定义 message-required-news-headers 这个变量，发现不好用，看来还是得在 weblogger.el 里面弄。在这里面找到 weblogger-edit-entry 这个函数，这个就是发帖子的时候用的，在里面有个顺序往下看，这个 message-goto-keywords 比较可疑，在 message.el 里面搜了下，果然，同时还看到一个 message-goto-summary，加上看看，嘿嘿，果然就搞定了。再找找 x-url，没找到，那就仿 summary 的写一个呗
<pre class="prettyprint">
(defun message-goto-x-url ()
  "Move point to the x-url header."
  (interactive)
  (message-position-on-field "X-url" "Subject"))
</pre>

这不完了么，这下就爽多了，嘿嘿。。不过如果能把那些 keywords, summary 等字段改成什么 categories,tags 就好了。。。有时间看看。。。

又研究了一下，加点内容。。(2010-03-11)

其实就是上面留的这点东西，我自己改吧了一下，好像能用了。地址在 http://github.com/wd/work/tree/master/weblogger.el/，里面的 permlink 就是指定 url 的。我看发文章好像没问题了。

另外，我试着在这个 mode 里面让他自动启动 auto-complete-mode，可是怎么弄都不行，不知道怎么回事。下面是我在 .emacs 用的代码。
<pre class="prettyprint">
(add-hook 'weblogger-start-edit-entry-hook (lambda()
    (auto-fill-mode -1)
    (abbrev-mode -1)
    (auto-complete-mode 1)
    ))
</pre>

有人能帮忙不。。。

又修改了一些东西。。可以看看 github 的 commit log 。。。。(2010-03-12)

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="use-emacs-publish-your-blog/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="introduce-to-jemplate/">Jemplate 的简单介绍</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-02-26T16:00:00.000Z" itemprop="datePublished">Feb 27, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/jemplate/">jemplate</a> <a href="../tags/js/">js</a> <a href="../tags/php/">php</a>
</div>
    </div>
      
        如果你还在用 php 写 web，那么你 out 了，呵呵。现在流行的是 rest + js。当然，rest 层可能还是 php 写的，不过还有用 perl 写的 openresty 1.0 和完全用 c 写的 openresty 2.0。openresty 是个很不错的东西，本来想细说一下，发现不知道怎么说好。去 cpan 上面搜吧。openresty 2.0 是基于 nginx 的，agentzh 在他上面加了好多的模块，让 nginx 直接和数据库通信，都不用 php 了。前端完全用 js 来搞定，以后应该都是 js 工程师了。

smarty 写 php 的人应该都知道吧，Jemplate 是很类似的一个东西，是方便你写 js 的一个工具。我这写了一个非常简单的例子。

下面这个是 Jemplate 的一个模板，保存为 test.tt。
<pre class="prettyprint">
<div>[% test %]</div>
<p>
[% FILTER html %]
    asdff < sdf > sdfsdf
[% END %]
</p>
</pre>

然后用 Jemplate 编译一下
<pre class="prettyprint">
jemplate --runtime > a.js
jemplate --compile test.tt >> a.js
</pre>

这之后就和 test.tt 没关系了，除非你改了他，那就需要重新生成这个 a.js。

再看我们的页面。里面 jquery-1.4.2.min.js 是为了方便操作页面使用的，jquery 决对是个好东西，写 js 应该使用他。那个 jquery.b.js 是我们自己写的，真正把数据添加到页面的代码。
<pre class="prettyprint">
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <title>test</title>
    <script src="jquery-1.4.2.min.js" type="text/javascript" charset="utf-8"> </script>
    <script src="a.js" type="text/javascript" charset="utf-8"> </script>
    <script src="jquery.b.js" type="text/javascript" charset="utf-8"> </script>
</head>
<body>
<div id="main"></div>    
</body>
</html>
</pre>

在这个 jquery.b.js 里面，我们让 jemplate 处理了一下 test.tt，给他里面的 test 变量赋值 ffffff，然后把设置到 #main 的 html 里面。
<pre class="prettyprint">
$(function() {
    var html= Jemplate.process(
        'test.tt', { test: 'ffffff' }
    );

    $('#main').html(html);
});
</pre>

这样这个页面就完事了，简单么，呵呵。你可以用 jemplate 和 js 强大的语法来实现更多的功能的。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="introduce-to-jemplate/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="ssh-proxy/">ssh 之穿越与反穿越</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-01-20T16:00:00.000Z" itemprop="datePublished">Jan 21, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/proxy/">proxy</a> <a href="../tags/ssh/">ssh</a>
</div>
    </div>
      
        <p>有时候我们不得不和网管对着干，去想办法去穿越某些防火墙，访问到我们要访问的资源。例如下面的情况，A 和 C 之间是有个墙的，不通。可有个 B 能访问到 C，而 A 又能访问到 B ，那我们可以通过你 ssh 做代理穿越那个墙。</p><p>A -&gt; | -&gt; C<br> \-&gt; B -&gt; C</p><p>在A 上面执行下面的命令</p><p>ssh -f -N -g -L 8888:C_ip:80 B_ip<br>参数的含义：-f 放到后台<br>-N 不在对方机器请求 shell<br>-g 能使得别的机器能连接 A 的那个端口<br>-L 就是代理，具体看 man </p><p>这样，在 A 上面访问 8888 端口，就能访问到 C 的 80 端口了。</p><p>那如果是下面的网络情况，那怎么办？A 能访问到 C，但是 C 不能直接访问 A。</p><p>A -&gt; C<br>C-&gt; | -&gt; A</p><p>在 A 上面执行下面的命令</p><p>ssh -f -N -R 9999:A_ip:80 C_ip<br>-R 是反向代理, -g 在这里好像不好用不知道为什么</p><p>从 C 上面访问自己的 9999 端口，就会访问到 A 的 80 端口。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="ssh-proxy/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="how-to-know-a-windows-boxs-ip-in-lan/">怎么能知道旁边的一台没有显示器的 windows 的 ip 呢？</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-01-19T16:00:00.000Z" itemprop="datePublished">Jan 20, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a>
</div>
    </div>
      
        <p>我旁边有个 windows，是 dhcp 获取 ip 的，ip 总变，很恶心。这机器还没有显示器，我都是通过 rdesktop 连上去用的，这样必须知道 ip 才行。那不接显示器，怎么能知道 ip 呢？</p><p>方法一，写一个脚本定时把 ipconfig 的结果通过 scp 或 ftp 发到某个有固定 ip 的机器。这样 ip 变了我至少过那么久的间隔就能知道他目前的 ip 了。时间设的长短可能就是你等的时间了。</p><p>方法二，扫描一下局域网结果存到 a，给那个机器断网，再扫一下存到 b，diff 比较那个状态有变化的。我用的就是这个方法。</p><p># nmap -PN 10.32.20.0/24 -p 3389 --open &gt; a</p><p>要用 root 执行，此外还有别的方法没？呵呵</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="how-to-know-a-windows-boxs-ip-in-lan/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="about-scrum/">关于 scrum</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2010-01-17T16:00:00.000Z" itemprop="datePublished">Jan 18, 2010</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/scrum/">scrum</a>
</div>
    </div>
      
        <p>领悟了下 scrum，他倡导的有这些</p><p></p><ol><li>需求提供和验收的人员是确定的一个人做为接口。</li><li>行政角色不直接干预 sprint team。避免 team 的工作受到干扰，影响 sprint 期间的任务的完成。</li><li>sprint team 在确认一个 sprint 内的工作后，需要专心把承诺的工作做完做好。</li></ol><p></p><p>我觉得 scrum 好像是偏向工程师的，呵呵。开发过程中最头大的问题就是需求变更了，这个会带来很多的问题，这么说应该都同意吧。</p><p></p><p>而 scrunm 的目的是使得需求在一个 sprint 内至少是稳定的，sprint team 的目标在这期间也应该是明确的，不受干扰的。</p><p>同时他也鼓励 team 成员做自己喜欢的工作，公开透明，尽力把每个人的潜力都挖掘出来，快乐工作。</p><p></p><p>但有时候需求不得不变更，怎么办呢？</p><p>我觉得如果 sprint team 判断变更不大，那就继续目前的 sprint 。如果需要变化太大，那就重新进行 sprint，我们就应该重新定一个 </p><p>sprint backlog，重新开始我们的 sprint。这个权力应该是交给 sprint team 的所有人来决定，而不是某个人，因为最终工作是由 </p><p>sprint team 完成的。</p><p></p><p>要是需求总在不停的变，sprint team可以考虑群殴一下 proud owner 了吧（开个玩笑）</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="about-scrum/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="2009/">2009年的最后一天</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-12-30T16:00:00.000Z" itemprop="datePublished">Dec 31, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/life/">life</a> <a href="../tags/work/">work</a>
</div>
    </div>
      
        &#26368;&#21518;&#19968;&#22825;&#20102;&#65292;&#20284;&#20046;&#24212;&#35813;&#20889;&#20010;&#24635;&#32467;&#30340;&#65292;&#33293;&#19981;&#24471;&#28909;&#34987;&#31389;&#65292;&#25163;&#26426;&#23558;&#23601;&#26469;&#19968;&#20010;&#21543;&#12290;

2009&#24180;&#24037;&#20316;&#19978;&#38754;&#22909;&#20687;&#27809;&#20160;&#20040;&#22909;&#35828;&#30340;&#65292;&#21807;&#19968;&#30340;&#36827;&#27493;&#21487;&#33021;&#36824;&#26159;&#20889;&#31243;&#24207;&#22909;&#20687;&#26356;&#29087;&#20102;&#28857;&#20102;&#65292;&#20854;&#23454;&#20063;&#23601;&#26159;&#35266;&#25705;&#20102;&#19968;&#20010;&#39640;&#25163;&#30340;&#31243;&#24207;&#65292;&#26412;&#36523;&#38271;&#36827;&#36824;&#26159;&#19981;&#22823;&#12290;

&#36890;&#36807;&#23545;&#31038;&#20250;&#19978;&#38754;&#24694;&#24515;&#20107;&#30340;&#35266;&#23519;&#20102;&#35299;&#65292;&#29616;&#22312;&#22909;&#20687;&#36234;&#26469;&#36234;&#24868;&#38738;&#20102;&#65292;&#23545;&#32463;&#27982;&#21644;&#31038;&#20250;&#26041;&#38754;&#30340;&#19996;&#35199;&#22909;&#20687;&#36234;&#26469;&#36234;&#26377;&#20852;&#36259;&#20102;&#65292;&#32769;&#20102;&#65311;&#12290;&#12290;&#12290;&#12290;&#39034;&#20415;&#20877;&#26174;&#25670;&#19968;&#20010;&#19978;&#36807;&#23398;&#23601;&#24212;&#35813;&#30693;&#36947;&#30340;&#35789;&ldquo;&#22269;&#23478;&#22404;&#26029;&#36164;&#26412;&#20027;&#20041;&ldquo;&#65292;&#26377;&#26102;&#20505;&#23601;&#22312;&#24819;&#65292;&#26159;&#19981;&#26159;&#24212;&#35813;&#25226;&#37027;&#26412;&#25919;&#27835;&#20070;&#32763;&#20986;&#26469;&#20877;&#30475;&#30475;&#21602;&#65311;&#36164;&#26412;&#35770;&#19981;&#30693;&#36947;&#29616;&#22312;&#36807;&#26399;&#19981;&#12290;&#12290;&#12290;&#20102;&#35299;&#37027;&#20123;&#20498;&#19981;&#19968;&#23450;&#26159;&#21435;&#24403;&#20154;&#22823;&#20195;&#34920;&#65292;&#21482;&#26159;&#33021;&#35753;&#33258;&#24049;&#33021;&#25226;&#36825;&#20010;&#31038;&#20250;&#36825;&#20010;&#22269;&#23478;&#30475;&#30340;&#26356;&#21152;&#36879;&#24443;&#19968;&#28857;&#12290;&#19981;&#36807;&#35805;&#35828;&#22238;&#26469;&#65292;&#20154;&#22823;&#20195;&#34920;&#20160;&#20040;&#26102;&#20505;&#25165;&#21487;&#20197;&#28023;&#36873;&#21602;&#65311;&#12290;&#12290;&#12290;&#12290;

2010&#24180;&#30340;&#22836;&#19968;&#26729;&#22909;&#20687;&#23601;&#26159;&#25226;&#36335;&#32771;&#36807;&#20102;&#65292;&#24212;&#35813;&#24180;&#21069;&#23601;&#33021;&#25630;&#23450;&#20102;&#21543;&#12290;&#37027;&#25384;&#30528;&#30340;&#23601;&#26159;&#24324;&#20010;&#36710;&#24320;&#19968;&#36255;&#33258;&#39550;&#28216;&#12290;&#24320;&#28304;&#19978;&#38754;&#24076;&#26395;&#33021;&#36129;&#29486;&#26356;&#22810;&#65292;&#22810;&#23398;&#23398;&#33521;&#35821;&#65292;&#20570;&#20570;&#32763;&#35793;&#65292;&#21548;&#21147;&#21644;&#21475;&#35821;&#33021;&#36798;&#21040;&#21644;&#20154;&#20132;&#27969;&#23601;&#22909;&#20102;&#65292;&#35805;&#35828;&#65292;&#26159;&#19981;&#26159;&#24212;&#35813;&#25253;&#20010;&#29677;&#21602;&#65311;&#12290;&#12290;&#12290;

&#34429;&#28982;&#26159;&#20840;&#38190;&#30424;&#65292;&#25171;&#23383;&#20854;&#23454;&#36824;&#26159;&#27809;&#30005;&#33041;&#29245;&#65292;&#21621;&#21621;&#12290;


      
	</div>

<div class="meta">
	
		<span class="comments"><a href="2009/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="cow-ssh-proxycommand/">NB 的 ssh proxycommand</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-12-08T16:00:00.000Z" itemprop="datePublished">Dec 9, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Linux/">Linux</a> <a href="../tags/proxycommand/">proxycommand</a> <a href="../tags/ssh/">ssh</a>
</div>
    </div>
      
        是从水木上面学来的。还参考了<a href="http://benno.id.au/blog/2006/06/08/ssh_proxy_command" target="_blank" rel="external">这个</a>。

如果你工作的环境是下面这样的，那 ssh 的 proxycommand 对你会很有用。

your pc -> gw server -> work server

一般公司的服务器的网络都会设置安全级别，防止出现安全问题。那个 gw 也叫跳板机。需要在 gw 机器上面有 nc 。

修改 .ssh/config 文件，加上 
Host gw
  Hostname gw.abc.com

Host work
  Hostname work.abc.com
  User wd
  ProxyCommand ssh gw nc -q 0 %h %p 2>/dev/null

这样直接 ssh work 就好了。

那个 -q 0 可能有些版本的 nc 不支持。去掉就好了。那个 %h 表示 hostname，那个 %p 表示 port，可以直接写死。其它的 man ssh_config 吧。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="cow-ssh-proxycommand/index.html#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/6/" class="prev">Prev</a>
    
    
        <a href="/page/8/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>




<script type="text/javascript">
      var disqus_shortname = 'wdicc';
      
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
