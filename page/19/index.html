<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
	<li id="ajax"><a href="/tags/index.html">Tags</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="utorrent-is-the-best-bittorrent-client/">非常不错的 utorrent</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-07-09T16:00:00.000Z" itemprop="datePublished">Jul 10, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/web/">web</a> <a href="/tags/utorrent/">utorrent</a>
</div>
    </div>
      
        <p>最早发现bt这玩意的时候，还是2003年。那会上 btchina 找新资源是一种乐趣。那会用的是官方的那个下载软件，就一个界面，下载几个开几个窗口，下载速度不能控制。后来慢慢有了能控制速度的版本，但是界面还基本都那么单一。再后来就用上了 bitsprit，bitcomet这些。bitcomet用了很长时间，内网速度很好，占资源又少。但是自从 0.7（好像是这个版本）之后，就没用过了，下载速度不见长，还往下掉，运行也越来越慢。那会我就开始用bitsprite了，虽然也不怎么样，但是下载还是有速度的。。。</p> <p>今天无聊试了下utorrent，发现速度还是上不去，就几k，这真没办法用。翻了一下utorrent 的论坛，<font color="#008080">取消了“upnp映射”这个选项</font>的选择后，发现速度上去了！现在长时间都是 100多k，还是比较爽的。还用上了 utorrent 的webui，类似 mldonkey 了现在，可以远程操纵 utorrent。感觉良好，呵呵。</p> <p>webui 地址： <a href="http://forum.utorrent.com/viewtopic.php?id=14565" target="_blank">这里</a>，最新的 utorrent 1.7 beta 可以用。看看 webui的readme就知道怎么安装了。</p> <p>另外还有一个 fx 的扩展： <a href="http://forum.utorrent.com/viewtopic.php?id=15619" target="_blank">这里</a></p> <p><a href="http://www.zooomr.com/photos/wd/2660430/" target="_blank" atomicselection="true"><img src="http://static.zooomr.com/images/2660430_10aa0a1b1e.jpg?r=360"></a></p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/utorrent-is-the-best-bittorrent-client/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="smsd-and-chinese/">smsd 发送中文短信乱码</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-07-04T16:00:00.000Z" itemprop="datePublished">Jul 5, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/gnokii/">gnokii</a> <a href="/tags/smsd/">smsd</a>
</div>
    </div>
      
        <p>smsd是使用mysql数据库的，所以这个乱码很容易把人搞晕。我之前<a href="http://blog.wdicc.com/wordpress/gnokii_howto_chinese_sms/" target="_blank" rel="external">写过</a>gnokii发送短信是和locale有关系的，只要在utf8的locale下面就可以正常发送中文短信了。而smsd也和这个类似，也需要utf8的locale。但是还需要注意的一点就是mysql也是有编码设置的。所以可能会认为，文本插入数据库之前是不是也需要对数据库做utf8的设置呢？其实是不需要的，这么做反而会造成乱码。</p> <p>smsd连接mysql用的是mysql默认的字符集，那么我们插入文本的时候，也同样需要使用这个字符集，需要注意的是，这个文本也需要是utf8编码的。mysql默认的字符集通常是 “default-character-set&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; latin1”。</p> <p>我写的一个python的用来插入数据库要发送的信息的程序。</p> <p><pre lang="python">#!/usr/bin/env python2.3
#coding=utf-8
import sys
import MySQLdb

#  inbox
#+------------+------------------+------+-----+---------------------+----------------+
#| Field      | Type             | Null | Key | Default             | Extra          |
#+------------+------------------+------+-----+---------------------+----------------+
#| id         | int(10) unsigned |      | PRI | NULL                | auto_increment |
#| number     | varchar(20)      |      |     |                     |                |
#| smsdate    | datetime         |      |     | 0000-00-00 00:00:00 |                |
#| insertdate | timestamp        | YES  |     | CURRENT_TIMESTAMP   |                |
#| text       | varchar(160)     | YES  |     | NULL                |                |
#| phone      | tinyint(4)       | YES  |     | NULL                |                |
#| processed  | tinyint(4)       |      |     | 0                   |                |
#+------------+------------------+------+-----+---------------------+----------------+

#  outbox
#+----------------+------------------+------+-----+---------------------+----------------+
#| Field          | Type             | Null | Key | Default             | Extra          |
#+----------------+------------------+------+-----+---------------------+----------------+
#| id             | int(10) unsigned |      | PRI | NULL                | auto_increment |
#| number         | varchar(20)      |      |     |                     |                |
#| processed_date | timestamp        | YES  |     | CURRENT_TIMESTAMP   |                |
#| insertdate     | timestamp        | YES  |     | 0000-00-00 00:00:00 |                |
#| text           | varchar(160)     | YES  |     | NULL                |                |
#| phone          | tinyint(4)       | YES  |     | NULL                |                |
#| processed      | tinyint(4)       |      |     | 0                   |                |
#| error          | tinyint(4)       |      |     | -1                  |                |
#| dreport        | tinyint(4)       |      |     | 0                   |                |
#| not_before     | time             |      |     | 00:00:00            |                |
#| not_after      | time             |      |     | 23:59:59            |                |
#+----------------+------------------+------+-----+---------------------+----------------+

class Mydb:
        def __init__(self):
                try:
                        self.db=MySQLdb.Connection(host="localhost",user="gnokii",
                                passwd="gnokii",db="gnokii")

                except MySQLdb.OperationalError, message:
                        errorMessage = "Error %d:\n%s" % (message[ 0 ], message[ 1 ] )
                        print errorMessage
                        sys.exit(1)
                else:   
                        self.cursor = self.db.cursor()
#                       self.cursor.execute("SET NAMES 'utf8'")
                        return
                        
        def insert(self,sql):
                self.cursor.execute(sql)
        
        def showdata(self,sql):
                self.cursor.execute(sql)
                return self.cursor.fetchall()
                
        def __del__(self):
                self.cursor.close
                self.db.close

text = sys.stdin.read()
db = Mydb()

if len(sys.argv) &gt; 1 and len(text):
        number = sys.argv[1]
        sql = 'insert into outbox (number,text) VALUES ("' + number + '","' + text + '")'
        
        db.insert(sql)

else:   
        print 
        print "    ********** outbox ********** "
        for rs in db.showdata("select * from outbox"):
                print rs[0],rs[1],rs[2],rs[-7],rs[-5]
        
        print "    ********** inbox *********"
        for rs2 in db.showdata("select * from inbox"):
                print rs2[0],rs2[1],rs2[-3]</pre>
</p>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/smsd-and-chinese/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="happy-birthday-to-cc-2/">今天是老婆生日</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-07-01T16:00:00.000Z" itemprop="datePublished">Jul 2, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/老婆/">老婆</a> <a href="/tags/生日/">生日</a>
</div>
    </div>
      
        <p><img src="http://static.zooomr.com/images/2610988_289076f6e9_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2610528_a2783d34d0_m.jpg"> </p> <p><img src="http://static.zooomr.com/images/2610438_046cef82a2_m.jpg"> </p> <p>这是老婆过生日她同学送的花篮，呵呵。zoomr传了半天失败了n次才把这个图片传上去，真郁闷。</p> <p>老婆又生日了，和我认识的第4个了。2004年5月份认识，也就是在她的生日前后在一起的。在一个桑拿天去了嘉年华，那汗把我一件新T恤上面的图案都洗了，北京的天气真bt，不过也可能是我的T恤的问题。。。。</p> <p>刚想起来和老婆在一起后的一个小故事，呵呵。有天早上我走的时候，顺手从冰箱里面拿出来一袋牛奶，本来想自己带的，结果放桌子上面忘记了。老婆后起来的，看到那个牛奶还挺感动，以为是我怕牛奶太凉早上喝不合适，提前给她拿出来的，哈哈呵呵嘿嘿。。。</p> <p>老婆<font color="#008000" size="4">生日快乐</font>哦。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/happy-birthday-to-cc-2/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="oracle-jobs/">oracle 的 job 又遇到问题了</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-28T16:00:00.000Z" itemprop="datePublished">Jun 29, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/oracle/">oracle</a> <a href="/tags/job/">job</a> <a href="/tags/高级复制/">高级复制</a>
</div>
    </div>
      
        <p>还是高级复制的问题，这次可能是因为job执行过程中，对方机器刚好重启导致的。反正job是卡在那里了，都10多天了。</p> <p>查看 dba_jobs_running 表，可以看到卡住的job的 job_id 和 sid 。查看 dba_jobs 表，可以看到相应 job 的信息，this_date 如果有数据的话，表示的是 job 开始执行的时间，next_date 是下次执行 job 的时间，如果 job 正常执行完毕，那么 this_date 应该是空的。根据 sid 还可以查看 v$session_wait 和 v$session 里面的这个 job 的一些状态。</p> <p>尝试了下面的方法来重新运行job，当时好像不好用，不过今天来看的时候，job是执行了。现在也不清楚是不是我这个操作起作用了，真晕。</p> <p><pre lang="txt">SQL&gt; exec dbms_job.broken(109,true);

PL/SQL procedure successfully completed.

SQL&gt; commit;

Commit complete.

SQL&gt; select job,sid from dba_jobs_running;

       JOB        SID
---------- ----------
       109        656

SQL&gt; select saddr,sid,serial#,paddr,username,status from v$session where username = 'REPADMIN';

SADDR           SID    SERIAL# PADDR    USERNAME                       STATUS
-------- ---------- ---------- -------- ------------------------------ --------
973CF8C4        626         27 98F96BB8 REPADMIN                       ACTIVE
973D2E7C        629         10 98F88670 REPADMIN                       ACTIVE
973F11F4        656         10 98F88174 REPADMIN                       ACTIVE

SQL&gt; alter system kill session '656,10';

System altered.

SQL&gt; select saddr,sid,serial#,paddr,username,status from v$session where username = 'REPADMIN';

no rows selected

SQL&gt; select job,sid from dba_jobs_running;

no rows selected

SQL&gt; select job,log_user,last_date,next_date from dba_jobs where log_user='REPADMIN';

       JOB LOG_USER                       LAST_DATE
---------- ------------------------------ -------------------
NEXT_DATE
-------------------
       106 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43

       109 REPADMIN                       2007-06-28 16:07:38
4000-01-01 00:00:00

       110 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43


SQL&gt; exec dbms_job.broken(109,false,sysdate);

PL/SQL procedure successfully completed.

SQL&gt; commit;

Commit complete.

SQL&gt; select job,log_user,last_date,next_date from dba_jobs where log_user='REPADMIN';

       JOB LOG_USER                       LAST_DATE
---------- ------------------------------ -------------------
NEXT_DATE
-------------------
       106 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43

       109 REPADMIN                       2007-06-28 16:07:38
2007-06-28 16:28:40

       110 REPADMIN                       2007-06-28 16:25:43
2007-06-28 16:35:43
</pre>
</p><p>此后就我所知道的，就只能等着了。dbms_job.run(job_id) 也可以让 job 立即执行。关键是看 this_date ，他的值就是开始执行 job 的时间，job 如果执行时间太长，而下次执行又太快的话，可能也会导致问题。所以还可以尝试手动执行 job 看看。 dba_jobs 的 waht 字段就是对于的语句。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/oracle-jobs/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="funny-words-of-child/">爆笑幼儿园（转载）</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-28T16:00:00.000Z" itemprop="datePublished">Jun 29, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/Joke/">Joke</a> <a href="/tags/童言无忌/">童言无忌</a>
</div>
    </div>
      
        <p>转自<a href="http://www.leehare.cn/read.php?3560">这里</a>。</p> <p><strong>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 1号幼儿园 <br></strong>问题一：如果有一天大海里没有水了，鱼怎么办呢？ <br>　　小朋友A：鱼到小河里去呗。（想了想，继续）哦，不行，那鲸鱼怎么办？太大了，进不去。（真体贴啊） <br>　　小朋友B：变化石呗。（鱼们狂吐血……） <br>问题二：牛奶是从哪里来的？ <br>　　小朋友A：奶牛肚子下面有几个嘴，从那里流出来的。（你真的确定那是嘴吗？） <br>　　继续问：那椰奶怎么来的？ <br>　　小朋友B：椰奶是羊奶吧。（扯太远了吧，兄弟） <br>　　继续问到底：羊奶是什么？ <br>　　小朋友B：羊奶就是酸奶吧，我们家不喝的，我们家订的是光明牛奶。（好可怕的逻辑） <br>问题三：小朋友的脸是干吗用的？ <br>　　小朋友A：给妈妈亲的。 <br>　　追问：那给不给爸爸亲？ <br>　　小朋友A：给爸爸亲。 <br>　　继续追问：那你的脸到底是给谁亲的？ <br>　　小朋友A：给妈妈亲的。（爸爸泪流满面） <br>　　小朋友B：贴纸头用的。（你的脸难道是布告栏？） <br>问题四：为什么小孩子是从妈妈肚子里出来的，不是从爸爸肚子里出来的？ <br>　　小朋友A：女孩子是从妈妈肚子里出来的，男孩子是从爸爸肚子里出来的。（真会蒙人） <br>　　小男孩B：因为男生可爱！（小女孩们一起叫：男生不可爱！） <br>问题五：小朋友的头发有什么用？ <br>　　小女孩A：用来梳头发的。 <br>　　提问小男孩B：那你的头发不能扎辫子，有什么用呢？ <br>　　小朋友B：用来给理发店剃头的。（可贵的奉献精神） </p>
        
          <p class="more-link">
            <a href="funny-words-of-child/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/funny-words-of-child/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="gaokao-zuowen/">2007年高考语文北京作文一篇（转载）</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-27T16:00:00.000Z" itemprop="datePublished">Jun 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/Joke/">Joke</a> <a href="/tags/搞笑作文/">搞笑作文</a>
</div>
    </div>
      
        <p>转载自<a href="http://www.leehare.cn/read.php?3544">这里</a>。</p> <blockquote> <p>" 细雨湿衣看不见，闲花落地听无声"是唐朝诗人刘长卿在《别严士元》中的诗句。<br>曾经有人这样理解这句诗：1、这是歌颂春天的美好意境。 2、闲花、细雨表达了不为人知的寂寞。3、看不见、听不见不等于无所作为，是一种恬淡的处世之道。4 、这种意境已经不适合当今的世界……根据你的看法写一篇作文。题目自拟，体裁不限。字数800以上。</p></blockquote> <p>盛夏，夜，深夜。<br>景山山颠。<br>山上有人，两个人，一男一女。<br>这两人就是当今武林名声最响的两位杀手，男的名秋细雨，女的叫叶闲花，江湖人称"细雨闲花"。<br>诗人刘长卿曾用"细雨湿衣看不见，闲花落地听无声"来描述这两个可怕的杀手。细雨湿衣，湿衣的是鲜血；闲花落地，落地的是人头。这两人杀人来无影去无踪，如果他们想杀你，当你还没看到他们人影没听到他们声音的时候，你就已经死了。<br>秋细雨三天前接到一份帖子，指名要杀叶闲花。事成之后，不但有三百万两冥币，更可以让他在" 红楼梦中人"选秀节目中担任曹雪芹的角色！<br>但是杀死叶闲花比杀死比尔还要困难得多。<br>江湖中没有一个人清楚叶闲花的武功来历，性格脾气，但是每个人都知道叶闲花的故事。<br>叶闲花有一双迷人的大眼睛，据说她曾一动不动地瞪死过赵薇和高圆圆，而那一年她才十七岁。<br>叶闲花声音有如黄莺般幽婉醉人，传说听过她说话后林志玲身体酥麻了整整一年，你说要不要命？<br>叶闲花轻功独步武林，踏雪无痕，落地无声，号称超过当年青翼蝠王韦一笑。有人见她上星期在高速公路上偷了刘翔奥运会入场证，刘翔追出一万公里最后被活活累倒。</p>
        
          <p class="more-link">
            <a href="gaokao-zuowen/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/gaokao-zuowen/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="change-trigger-setting-for-thold/">稍微深入了解了一下cacti的thold插件的邮件通知</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-27T16:00:00.000Z" itemprop="datePublished">Jun 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/cacti/">cacti</a> <a href="/tags/thold/">thold</a> <a href="/tags/trigger/">trigger</a>
</div>
    </div>
      
        <p>通过cacti的thold插件，可以做到snmp抓取到的数值低于你规定的值的时候进行邮件通知，例如我用他来监控磁盘空间，当磁盘空间低于某个数的时候就会给指定的email发邮件。但是有一点郁闷的是，有时候，可能是由于网络原因，抓取会超时，这样就会导致触发trigger，给你发送邮件。5分钟抓取一次，我这里的情况是几乎每个小时总会有2，3封这种邮件，很烦人，而且根本没意义。早就想屏蔽掉这种情况了，看了代码挺复杂就懒得弄，今天实在受不了了，深入了解了一下。</p> <p>其实thold本身已经考虑到了这种情况，在 thold 的设置里面，就有一项 Default Trigger Count （Number of consecutive times the data source must be in breach of the threshold for an alert to be raised），就是连续触发几次才认为他真的低于 thold 了，才发送邮件。我尝试过修改这个设置，发现不管用。看了代码才了解，每个 <strong>Thresholds</strong>&nbsp;都有自己的 trigger 值，那个 default trigger count 只对新建的 thresholds 才有用。所以针对现有的，需要逐个去修改才行。如果不设置这个选项，那么使用的就是上面设置的那个默认的，所以没特殊需要，还是不要针对每个 thresholds 设置自己的 trigger 值比较好，这样方便修改。我通过修改数据库的方法，直接把这些都修改了。</p> <p><pre lang="sql">update thold_data set thold_fail_trigger = NULL;</pre>
</p><p>修改了之后还没有收到，这下应该清净了吧？</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/change-trigger-setting-for-thold/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="such-hot-weather/">天气太热了</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-26T16:00:00.000Z" itemprop="datePublished">Jun 27, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/weather/">weather</a>
</div>
    </div>
      
        <p>最近两天天气有点变态了，闷热，北京的桑拿天又开始了。空调还没买上，晚上得整晚开风扇了。还好偶们家的风扇很强悍，风够大。早就说要把凉席弄上了，一直没时间，今天晚上回去看看。不知道周末天气如何，希望那两天能是个好天气。</p> <p>北京的交通是越来越让人郁闷了。前天早上有个超高的车在一个天桥那里卡住了，结果导致后面的车堵了得有几公里。平时十几分钟的路程走了1个小时。现在走在路上最怕的就是有事故。本来就2个车道（一个汽车道，一个自行车道，基本上自行车道都会被汽车占用，骑自行车的人都是在汽车中间穿梭），一旦发生事故，通常这条路就废了，这种路上也不时常安排几个交警，出现情况了，基本上就只能自己郁闷了，没几个小时解决不了问题。</p> <p>今天早上在车上还想，以前军训站排的时候，好像也没现在一早上站的时间长吧。从7点起来，洗脸刷牙穿衣服到车站，等车来了继续车上站着，换地铁还是站着，这一路下来也不少时间呢，现在站功也不得了了，呵呵。</p> <p>昨天和一个哥们一起喝酒，还在郁闷北京这种生活，但是郁闷归郁闷，生活还是得继续不是。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/such-hot-weather/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="resin-and-oracle/">为resin配置oracle连接池</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-26T16:00:00.000Z" itemprop="datePublished">Jun 27, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/oracle/">oracle</a> <a href="/tags/resin/">resin</a>
</div>
    </div>
      
        <p>resin 2.x 的配置方法和 3.x 的方法有区别。按照<a href="http://www.caucho.com/resin-3.1/doc/db-thirdparty.xtp" target="_blank" rel="external">官方文档</a>，做下面的配置。</p> <p><pre lang="txt"><database>
  <jndi-name>oraPool</jndi-name>
  <driver>
    <type>oracle.jdbc.pool.OracleConnectionPoolDataSource</type>
    <url>jdbc:oracle:thin:@localhost:1521:dbname</url>
    <user>username</user>
    <password>password</password>
  </driver>
#....
</database></pre>
</p><p>&nbsp;在上面的 <font color="#ff0000">.... </font>这里还可以添加<a href="http://www.caucho.com/resin-3.1/doc/database-tags.xtp" target="_blank" rel="external">其他的</a>配置信息。配置好之后启动resin，会发现提示类似下面的信息。</p>
<p><pre lang="txt">conf/resin.conf:218: java.lang.ClassNotFoundException: oracle.jdbc.pool.OracleConnectionPoolDataSource</pre>
</p><p>提示没有找到连接oracle数据库的jdbc驱动。这个驱动在oracle的安装目录里面有。比如我这里是在 /db/oracle/10.1.0/product/10g/jdbc/lib/ 。里面好多文件，具体都什么作用可以看<a href="http://www.oracle.com/technology/tech/java/sqlj_jdbc/htdocs/jdbc_faq.htm#02_07" target="_blank" rel="external">这里</a>。</p>
<p>复制这个目录里面的 classes12.jar 和 nls_charset12.jar 到resin的 lib 目录下面，重新启动 resin 就可以了。本文完成过程中参考了<a href="http://dev.csdn.net/article/29/29762.shtm" target="_blank" rel="external">这篇</a>文章。如何使用这个pool，官方文档也有<a href="http://www.caucho.com/resin-3.1/doc/config-database.xtp#usage/lookup" target="_blank" rel="external">说明</a>。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/resin-and-oracle/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="howto-cc-an-email-to-others-in-sendmail/">sendmail 中自动抄送某个用户的邮件给别人</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-25T16:00:00.000Z" itemprop="datePublished">Jun 26, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/Mail/">Mail</a> <a href="/tags/sendmail/">sendmail</a> <a href="/tags/邮件转发/">邮件转发</a>
</div>
    </div>
      
        <p>sendmail有个 /etc/aliases 配置文件，在里面可以给某个帐号设置alias，这样给这个alias发的邮件，都会给设置好的用户转发过去。要知道sendmail的帐号是和系统帐号联系在一起的，添加mail帐号得给系统添加帐号（qmail可以实现虚拟用户，或许sendmail也可以，而我不知道罢了）。而这个alias帐号却不是必须有得有系统帐号的，只要设置了alias，就可以给alias用户发邮件，就好像系统真有这么一个帐号一样。</p> <p>关于 /etc/aliases 文件，<a href="http://www.feep.net/sendmail/tutorial/intro/aliases.html" target="_blank" rel="external">这里</a>有个文章有说明。下面复制几个例子。</p> <p><pre lang="conf"># RFC 822 规定每个域名都需要有一个 "postmaster" 
postmaster      : root

# 将 postmaster 的邮件都转发给 root 帐号，当然你下面还可以将root帐号的邮件在转发给别人。

# 转发也可以转发到文件
# 比如这个，都说了nobody了还给发邮件，邮件都丢掉
nobody          : /dev/null

# 也可以通过管道作为另一个程序的输入
# 比如给procmail，它能实现的功能可就多了，比如可以根据邮件大小转发到不同的用户，或者调用spamassian、clamav来查垃圾邮件和病毒等
# 一个自动的bug跟踪程序
program-bugs: |/usr/local/bin/program-bug-tracker

# 也可以转发到多个帐号，用逗号分隔就可以
project-list: johndoe@host1.uiuc.edu,jsmith@host2.uiuc.edu,someone@host.purdue.edu
</pre>
</p><p>可以看到功能还是很强悍的，尤其是可以 pipe 到程序，procmail、maildrop都是很不错的过滤程序，能实现很多其他的功能。</p>
<p>标题的要求是“抄送”某个帐号的邮件给别的用户，有点类似监控的意思。怎么实现呢？可能第一个想到的就是类似下面这种方法：</p>
<p><pre lang="conf">somebody:other1,other2,somebody</pre>
</p><p>这样是不是就能实现抄送呢？这样会造成死循环，呵呵。</p>
<p>看样子似乎只能通过pipe到程序实现了，看procmail、maildrop的文档还不够头疼的。其实还有个简单的方法，就是 <a href="http://www.feep.net/sendmail/tutorial/intro/forward.html" target="_blank" rel="external">.forward</a> 文件。</p>
<p>.forward 文件位于用户的 home 下面，权限是 600 。他的功能和 /etc/aliases 文件类似，不过是 aliases 文件只能由root用户来修改，而 .forward 文件用户自己就可以修改。除了上面aliases能做到的事情外，他还多了一个功能，就是标题要求的功能。</p>
<p>按照标题的要求，只需要在 somebody 用户的 .forward 文件中放入下面的内容就可以了。</p>
<p><pre lang="conf">\\somebody
other1
other2</pre>
</p><p>要注意 somebody 前面的那个\，就是用来防止转发死循环的。加了\之后，给somebody转发的时候会忽略该用户的 .forward 文件。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/howto-cc-an-email-to-others-in-sendmail/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/18/" class="prev">Prev</a>
    
    
        <a href="/page/20/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
