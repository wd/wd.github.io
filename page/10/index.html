<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
	<li id="ajax"><a href="/tags/index.html">Tags</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="fbsplash-howto/">给系统加上 fbsplash 支持</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-24T16:00:00.000Z" itemprop="datePublished">Jul 25, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/fbsplash/">fbsplash</a>
</div>
    </div>
      
        先贴几个参考文章。
<li>1 <a href="http://forums.gentoo.org/viewtopic-t-728450-highlight-grub2.html" target="_blank" rel="external">HOWTO: Fancy Grub and fbsplash on a machine with Intel graphic chipsets</a></li>
<li>2 <a href="http://www.gentoo-wiki.info/Fbsplash" target="_blank" rel="external">Fbsplash</a></li>
<br>
这两个文章里面最重要是那些内核选项的支持，弄好了那些才有下面的内容。里面有个要注意的是 General Setup ---> Initial RAM filesystem and RAM disk (initramfs/initrd) support ---> Built-in initramfs compression mode 这个选项，好像是从 2.6.30 出来的。这个压缩模式选的是什么，关系到后面的工作。

安装 splashutils[fbcondecor] 和 media-gfx/splash-themes-gentoo 或 media-gfx/splash-themes-livecd 这两个都是提供一些 theme，在 /etc/splash 目录下面。

我的 kernel 没有 initrd 文件，是编译到内核的，所以这么做。
<pre class="prettyprint lang-bash">
cd /usr/src/linux && make && make install # recompile kernel, this is my way
</pre>

然后就是设置内核参数，下面是我的。那个 quiet 会让 kernel 不显示信息，如果你不想，那就去掉。
video=uvesafb:1024x768-32,mtrr:3,ywrap quiet splash=silent,theme:natural_gentoo console=tty1 fbcon=scrollback:64K

如果用的是 tuxonice 内核，那还可以给 sys-apps/tuxonice-userui 加上 fbsplash use，装好后会提示你 ln 一个 splash theme 为 tuxonice ，照做就是了。另外还需要在内核里面 Power management and ACPI options ---> Enhanced Hibernation (TuxOnIce) ---> Default userui program location 设置为 /sbin/tuxoniceui_fbsplash ，重编内核。。。

这么弄完之后会发现，休眠后再启动的时候会显示一个没找到 /sbin/tuoniceui_fbsplash 的错误，还有一些百分比，这些实际上不影响正常启动。不过好像有点影响美观。我琢磨了下，觉得那个错误可能是没有把那个文件弄到 initramfs 里面的缘故，弄进去之后果然没了，不过还是有那个百分比出来。

先 cp 一份这个文件 /usr/src/linux/usr/initramfs_data.cpio[看压缩设置] 到临时目录，file 看看属性，我的是 gzip 压缩的，那就解压一下。然后用 cpio 看下里面的文件。
<pre class="prettyprint lang-bash">
$ file initramfs_data.cpio 
initramfs_data.cpio: gzip compressed data, was "initramfs_data.cpio", from Unix, last modified: Sat Jul 25 19:26:29 2009
$ mv initramfs_data.cpio initramfs_data.cpio.gz
$ gzip -d initramfs_data.cpio.gz 
$ file initramfs_data.cpio 
initramfs_data.cpio: ASCII cpio archive (SVR4 with no CRC)
$ cpio --list < initramfs_data.cpio
.
lib
lib/splash
lib/splash/sys
lib/splash/proc
sbin
sbin/v86d
sbin/fbcondecor_helper
sbin/splash_helper
root
dev
dev/mem
dev/tty1
dev/fb
dev/tty0
dev/zero
dev/misc
dev/null
dev/vc
dev/console
etc
etc/splash
etc/splash/luxisri.ttf
etc/splash/natural_gentoo
etc/splash/natural_gentoo/1024x768.cfg
etc/splash/natural_gentoo/images
etc/splash/natural_gentoo/images/silent-1024x768.jpg
etc/splash/natural_gentoo/images/verbose-1024x768.jpg
xxx blocks
$ cat f
sbin/tuxoniceui_fbsplash
$ ls sbin
tuxoniceui_fbsplash
$ cpio -ov --format=newc -A -O initramfs_data.cpio < f
sbin/tuxoniceui_fbsplash
xxx blocks
$ gzip -c initramfs_data.cpio initramfs_data.cpio.gz
$ mv initramfs_data.cpio.gz /usr/src/linux/usr/initramfs_data.cpio
</pre>

ok， 这里你可以再看看文件里面的东西。没问题就可以复制过去了，要注意压缩格式。

回头录一个视频放上来玩玩，呵呵。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/fbsplash-howto/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="how-to-use-grub2/">使用 grub2</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-23T16:00:00.000Z" itemprop="datePublished">Jul 24, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/grub/">grub</a>
</div>
    </div>
      
        看到 ub 要默认用 grub2 了，看来这个东西够稳定了，就折腾了下。过程还有点头大，呵呵。这个东西最大的问题就是文档怎么那么少？。。。

国内的大都是抄的 <a href="http://linuxtoy.org/archives/grub-2-installation-and-configuration.html" target="_blank" rel="external">这个</a> ，里面不知道为什么没有排版，那个样例用的是 debian，我用的 gentoo，有点小区别。

gentoo 里面先 keyword unmask grub 1.96，然后安装他。
<pre class="prettyprint lang-bash">echo "=sys-boot/grub-1.96 **">

安装之后，先重新生成 device.map。然后执行 update-grub 生成 grub 的一些配置文件，这个生成是根据的 /etc/grub.d 下面的文件，如果有兴趣可以去配置，我反正没配置，我手动修改的配置文件。
<pre class="prettyprint lang-bash">
sudo update-grub # 不是必须，可以手动生成配置文件</pre>

现在去看看 /boot/grub/grub.cfg 文件，里面应该会根据你的系统生成了一些东西。再改巴改巴，下面是我的。对了这个文件是只读的，改一下属性就好了。
<pre class="prettyprint lang-conf">
set default=0
set timeout=5
set root=(hd0,1)

insmod terminal
insmod gfxterm
insmod vbe
insmod font
insmod png

font /boot/grub/unifont.pff
set gfxmode=1024x768
terminal gfxterm

set menu_color_normal=white/black
set menu_color_highlight=white/dark-gray

#background_image /boot/grub/bg.tga
background_image /boot/grub/dev2.png


### END /etc/grub.d/00_header ###

### BEGIN /etc/grub.d/10_hurd ###
### END /etc/grub.d/10_hurd ###

### BEGIN /etc/grub.d/10_linux ###
menuentry "无敌Gentoo" {
	linux	/vmlinuz root=/dev/hda5 ro video=uvesafb:1024x768-32,mtrr:3,ywrap
}

menuentry "Gentoo (old kernel)" {
	linux /vmlinuz-old root=/dev/hda5 ro video=uvesafb:1024x768-32,mtrr:3,ywrap
}

menuentry "测试JPEG背景图片" {
  background_image /boot/grub/dev.tga
}


#title		Gentoo bootchartd
#root		(hd0,0)
#kernel		/vmlinuz root=/dev/hda5 video=uvesafb:1024x768-32,mtrr:3,ywrap init=/sbin/bootchartd
#savedefault
#
#
#title		Gentoo (rescue)
#root		(hd0,0)
#kernel		/vmlinuz root=/dev/hda5 init=/bin/bb
#savedefault
</pre>

注意后面两个注释，其实就是老的 grub 用的，对照一下就应该知道怎么改了。原来的 hd0,0 变成了 hd0,1 ，这个是需要注意的。

那个背景图片是有要求的，我的用 file 查看是这样的 "dev.png: PNG image, 800 x 600, 8-bit/color RGBA, non-interlaced"，具体对 png jpg tga 的要求，还是去看 <a href="http://grub.enbug.org/FranklinPiat/grub.cfg.manpage" target="_blank" rel="external">man</a> 吧。我试了 tga 文件，好像有点慢，我那个 png 速度还行。

那个 font 是从 <a href="http://grub4dos.sourceforge.net/grub2/unifont.pff" target="_blank" rel="external">这里</a> 下的，支持中文。

配置好之后执行 sudo grub-install /dev/hda 就安装好了，没什么错误的话就可以重启看效果了。
</pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/how-to-use-grub2/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="auto-mount-smb-and/">写了一个用来 mount smb 和 u 盘之类的程序</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-19T16:00:00.000Z" itemprop="datePublished">Jul 20, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/autumount/">autumount</a> <a href="/tags/smb/">smb</a>
</div>
    </div>
      
        主要是不用 gnome 了，访问 smb 和 mount u盘有点不爽，无聊就写了一个。

程序不是全自动的，是基于配置文件的。写好配置文件，然后执行这个程序。

配置文件类似下面的
<pre class="prettyprint lang-conf">
# type: u  | smb | cifs
#
#
-
 name: 匿名smb
 type: cifs
-
 name: cc
 type: cifs
 ip: 192.168.1.125
 opt: iocharset=utf8,codepage=cp936
-
 name: fileserver
 type: cifs
 ip: fileserver
 user: wd
 pwd: 1111
 opt: iocharset=utf8,codepage=cp936
-
 name: g1
 type: u
 partitions: /dev/sda1, /dev/sda2
-
 name: u 盘
 type: u
 partitions: /dev/sda1
</pre>

配置文件按 - 分段，这个文件是 yaml 格式的。这个程序得用到 dev-perl/yaml 。

程序在<a href="http://github.com/wd/work/tree/91aa2432660a175ae486493e3a6f6edfb8ef787e/automount" target="_blank" rel="external">这里</a>。

本来之前在程序里面是有 umount 的，结果因为 umount 没成功，把我手机卡上面的东西都干掉了。。。所以还是保险一点，不加 umount 了，手动来吧。。。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/auto-mount-smb-and/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="clever-cc/">聪明的老婆</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-19T16:00:00.000Z" itemprop="datePublished">Jul 20, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a>
</div>
    </div>
      
        呃，今天好像疯牛病了，怎么一下更新了好几篇呢？。。。

不得不说，老婆聪明没用在正道上。玩游戏那叫一个牛。昨天手机上面装了一个游戏，是一屏幕小球球，要消掉那种。我玩了会，弄出来一次把球全消了，260 多分，乐呵呵的给她看，让她玩玩，她要是玩不到，就可以取笑她了，嘿嘿。

结果一会还给我了，人家弄了一个 600 多记录出来。。。。这还让不让人活了。。

想起来之前用 palm 650 的时候，里面也有一个类似的游戏，排名前五都是他的名字，我都上不去那个榜。。。

还有玩 qq 那个龙珠，其实就是类似 zuma 那个游戏。他居然学会了那个自己布局，然后一次全消掉那个方法。我反正是不会弄那个。。。

好多次都是，我找到一个好玩的游戏，教给她怎么玩，然后过几天我就拍马也赶不上了。唉。。。可没劲了

另外，不得不补充一下，其它地方她怎么总表现的那个猪呢？

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/clever-cc/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="best-way-to-fuck-gfw/">你在用什么方式翻墙？</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-19T16:00:00.000Z" itemprop="datePublished">Jul 20, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/gfw/">gfw</a> <a href="/tags/firefox/">firefox</a> <a href="/tags/fuckgfw/">fuckgfw</a>
</div>
    </div>
      
        翻墙估计应该是上网的必修课了，当然那些 90 后就别说了，他们大概只上 *qq.com 就好了。

翻墙有不少方法，比如通过找公共的 vpn，用 tor，找一些 phpproxy 网站等。我这推荐一个比较好的方法，通过 <a href="http://www.sshgfw.com/" target="_blank" rel="external">fuckgfw</a> 提供的 ssh proxy，速度比 tor 快的不是一点半点。

我用的 linux，写了一个 expect 脚本来起代理服务，如下。里面的 USER 和  PWD 换成你申请到的用户名和密码。我把这个脚本命名叫 p, 放到了 ~/bin 下面，当然我的 ~/bin 是在 path 里面的，这样，执行一个 p 命令代理就自动起来了。用完的时候可以按 Ctrl-c 退出。

<pre class="prettyprint lang-bash">
#!/bin/bash

expect -c '
spawn ssh -D 7070 -N USER@SERVER
expect {
	password { 
		send "PWD\r";
	}
}

interact {
	\001 exit;
}'
</pre>

当然，我用到的不只这个脚本了，要不也没什么好写的了。(本来觉得自己写了挺好的一个文章，最后还是就 expect 脚本 + autoproxy，唉，丢人。)<del datetime="2009-07-20T02:13:48+00:00">还用到了一个 proxy.pac ，自动使用代理的配置。如下，把这个文件存成 proxy.pac, 然后在 firefox 的 编辑->首选项->高级->网络->设置->自动代理配置URL 这个里面输入 "file:///home/wd/bin/proxy.pac" ，这样，你连接某个网站的时候，他会自动的去判断是不是要用代理。这个文件是 linuxsir 的 狱卒 给我的。:)

<pre class="prettyprint lang-javascript">
function FindProxyForURL(url, host)
{
    url = url.toLowerCase();
    host = host.toLowerCase();
    if (dnsDomainIs(host,"twitter.com")
        || dnsDomainIs(host,"my.opera.com")
        || dnsDomainIs(host,"hk.yahoo.com")
        || dnsDomainIs(host,"tw.yahoo.com")
        || dnsDomainIs(host,"livejournal.com")
        || dnsDomainIs(host,"mitbbs.com")
        || dnsDomainIs(host,"friendfeed.com")
        || dnsDomainIs(host,"youtube.com")
        || dnsDomainIs(host,"sshgfw.com")
        )
        return "SOCKS 127.0.0.1:7070";
    else 
		return "DIRECT";
}
</pre>

这么做一个问题就是，如果你要新加某个网站进去，必须得重启 fx 才能生效。实际上 foxproxy 也可以配置使用 自动代理的，而且可以设置让他多长时间自动重载一下这个文件，算是智能一点了吧。不过我用 foxproxy 的时候发现，如果同时打开两个需要用到代理的网站，他会是一个一个打开的，不能同时，不知道是怎么回事。

我现在用的是 multiproxy swith ，这个可以设置 pac 文件，不过是不会自动重载。当然，重启这个事情也不是什么大问题，装一个 quickrestart ext，然后在 toolbar 上面加一个，点一下就重启了，再加上 fx 会 restore session ，也就是等几秒，就生效了。</del>

再当然一个。如果觉得这个 pac 弄起来还是麻烦，那可以装一个 autoproxy，里面内置了一些列表，你只要设置一个 127.0.0.1:7070 的 socks 代理让他用就好了。哪个用 proxy 哪个不用是全自动的，不用你管。自己添加的列表也能即时生效。目前我用的这个，推荐一下哦。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/best-way-to-fuck-gfw/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="clean-places-sqlite/">清理 firefox places.sqlite 来提速</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-17T16:00:00.000Z" itemprop="datePublished">Jul 18, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/firefox/">firefox</a>
</div>
    </div>
      
        来自这里 http://forum.moztw.org/viewtopic.php?t=26802

使用前先备份，后悔了还能弄回去。

<pre class="prettyprint lang-sql">
sqlite3 places.sqlite "DELETE FROM moz_historyvisits WHERE place_id IN (SELECT id FROM moz_places WHERE visit_count <=2 );"="" sqlite3="" places.sqlite="" "delete="" from="" moz_places="" where="" (visit_count="" <="2" and="" hidden> 1 AND id NOT IN (SELECT place_id FROM moz_annos UNION SELECT fk FROM moz_bookmarks));"

sqlite3 places.sqlite "DELETE FROM moz_inputhistory WHERE place_id NOT IN (SELECT id FROM moz_places);"

sqlite3 places.sqlite "DELETE FROM moz_favicons WHERE id NOT IN (SELECT
favicon_id FROM moz_places);"

sqlite3 places.sqlite "VACUUM;"
</=2></pre>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/clean-places-sqlite/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="use-emacs-as-python-ide/">把 emacs 做为 python ide</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-12T16:00:00.000Z" itemprop="datePublished">Jul 13, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/python/">python</a> <a href="/tags/emacs/">emacs</a>
</div>
    </div>
      
        emacs 用的其实不是很多，不过他实在是个好东西，各种 mode，用熟了肯定能帮你提升不少工作速度。

我用 emacs-cvs , ropemacs( dev 版， > 0.6 ）, rope ( > 0.9.2 ), company-mode ( > 0.4.2 ) 这几个软件在 gentoo  里面都还没有，我自己写了几个 ebuild。

装好之后，基本就是 require 一下就好，我没做什么设置，效果如下。

<a href="http://twitpic.com/a70je" target="_blank" rel="external">here</a>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/use-emacs-as-python-ide/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="modified-fetion-py/">改良的 fetion.py</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-07-05T16:00:00.000Z" itemprop="datePublished">Jul 6, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/python/">python</a> <a href="/tags/feition/">feition</a>
</div>
    </div>
      
        这个 fetion.py 来自 <a href="http://blog.lazytech.info/2008/11/05/python-fetion/" target="_blank" rel="external">这里</a>。

不修改的情况下，-t 可以是 sip, uid, mobile_no 这几个。

我修改了下，不加 -t 参数会打印联系人列表。另外还能用 nickname 来发（没测试，我没几个好友，没好意思发）。

在<a href="http://github.com/wd/work/tree/aa559b6b3ee1c15ccfcbf9ce45d1f7aa2208b953/fetion_py" target="_blank" rel="external">这里</a>。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/modified-fetion-py/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="fuck-lvb/">我日 tmd 绿爸</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-06-24T16:00:00.000Z" itemprop="datePublished">Jun 25, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a>
</div>
    </div>
      
        操，你干掉别的也就好了，妈了个b的，把 google.com 干掉了

操相关部门，日

现在用 opendns 能通
nameserver 208.67.222.222
nameserver 208.67.220.220

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/fuck-lvb/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="svn-301-moved-permanently/">&#39;/svn&#39;: 301 Moved Permanently</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2009-06-21T16:00:00.000Z" itemprop="datePublished">Jun 22, 2009</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/linux/">linux</a> <a href="/tags/svn/">svn</a>
</div>
    </div>
      
        今天搭了一个svn，遇到了这个问题，这个问题在 subversion 的 <a href="http://subversion.tigris.org/faq.html#301-error" target="_blank" rel="external">FAQ</a> 里面就有。不过看了半天没弄明白怎么回事，呵呵。后来糊里糊涂弄好了，也没明白。刚才突然明白了。。。

比如你的 documentroot 指向了 /www 下面， 而你的 svn 的 path 设置到了 /www/svn 下面，就会出这个问题。因为，用户如果访问的是 /www/svn/proj1 的时候，那应该是按照一个正常的目录处理呢，还是按照 svn 的一个项目处理呢？这可是不同的，因为如果是一个 svn 项目，那就交给 dav-svn 处理的，按照其它svn 项目一样，会显示这个项目的 reversion 什么的。但是如果是按照目录处理，那就交给了 apache 处理，他会在这里面找 directory index 等一些操作。这就会让 apache 很困惑。

解决的办法也比较简单，就是在 /www 下面不要出现你的 svn 的名字，也就是说，把你的 /www/svn 弄到 /www 之外去。这就没问题了。当然，如果哪天某个哥们无心的在 /www 下面建了一个 svn 文件夹，那这个又会出现，呵呵。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/svn-301-moved-permanently/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/9/" class="prev">Prev</a>
    
    
        <a href="/page/11/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
