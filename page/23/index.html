<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
	<li id="ajax"><a href="/tags/index.html">Tags</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form action="//www.google.com.hk/search" method="get" accept-charset="UTF-8" id="search">
            <input type="hidden" name="sitesearch" value="https://wdicc.com" />
            <input type="text" name="q" results="0" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="unix-process/">unix 进程</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-10T16:00:00.000Z" itemprop="datePublished">Apr 11, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/signal/">signal</a> <a href="/tags/进程/">进程</a>
</div>
    </div>
      
        看了 <a href="http://www-128.ibm.com/developerworks/aix/library/au-speakingunix8/?ca=dgr-lnxw01speakunix8" target="_blank" rel="external">Speaking UNIX, Part 8: UNIX processes</a> 之后做一点笔记。

<b>A real multitasker</b>

在unix、linux、freebsd、mac os x、windows等系统里面，计算任务都表现为进程。unix 看上去可以同时运行很多任务，因为每个进程都只占用一部分cpu时间。

进程就像一个容器，包括运行的程序，环境变量，程序的输入输出等。可以把进程想像为一个国家，有自己的边界，资源和产品。

每个进程也都有自己的owner（属组），owner通常是运行这个程序的人，有些系统服务的owner或许会是某个特殊的用户，或者是root。例如，为了安全，某个Apache server的owner可能是属于一个叫www的用户的，这个用户有权限来存取web服务需要的文件，这些文件别的用户是不能访问的。

一个进程的owner可能会改变，但是一个进程在同一个时间只能有一个owner。

setuid和setgid可以让一个进程获得比owner更高的权限。

一个setuid进程，例如top，运行的时候使用的是owner的权限。因此，当你运行top的时候，你的权限就被提升为root了。类似的，一个setgid进程，运行的时候具有的是group owner的权限。

例如，在Mac osx里面的wall命令（就是write all的缩写），因为他需要给每个物理或者虚拟的终端设备写信息，所以他被setgid tty。

<b>Taking inventory</b>

类似其他系统资源，unix系统里面的进程id总数虽然多，但是是有限的（实际上，一个系统几乎从来都不会出现进程id数不够的情况）。每一个新的进程，例如运行vi或者xclock，都会立刻分配一个进程id。在unix系统里面可以用ps命令查看进程。

ps -a -w -x 可以显示所有进程列表。-a显示所有在tty设备上面运行的进程，-x显示所有不是在tty设备上面运行的程序，-w使用“宽”模式显示，用来查看进程一些长的项目。

-o 还可以指定输出信息的列表。比如 -o pid,uname,command,state,stime,time 。

<b>Daddy, where do processes come from?</b>

 在unix系统里面，有些进程会从系统启动到关闭整个过程中一直运行。大部分进程从任务开始到结束都很快。

 每个新的unix进程都是从已经存在的进程产生的。另外，每个新的进程（子进程）都克隆自他的父进程。at least for an instant, until the child continues execution independently.如果每个进程都来自一个已经存在的进程，那么“第一个进程来自哪里？”，先有鸡还是先有蛋的问题。

第一个进程是由kernel在启动过程中产生的，叫做init。ps -l 1命令可以查看。
F S   UID   PID  PPID  C PRI  NI ADDR SZ WCHAN  TTY        TIME CMD
4 S     0     1     0  0  76   0 -   376 -      ?          0:06 init [2]  

可以看到，init的uid是0，也就是root。不像其他进程，init的ppid（父进程id）是0。

图 2,3 稍微解释一下。
<ol><li>进程A运行了几条指令。进程A有自己的资源、输入输出、环境变量等。</li><li>遇到一条fork()指令，会产生一个新的进程。进程A遇到fork之后，立刻产生一个新的进程Z。进程Z是A的克隆，有与A一行的环境变量、内存内容、程序状态、打开文件等。</li><li>进程Z一开始就从fork后面的指令继续执行，就是进程A剩下的部分。进程A也继续执行剩下的部分。</li><li>在fork指令后面的指令中，会检查当前的进程是子进程还是父进程。就是说，进程Z和进程A在后续的指令中各自分别确定自己是父进程还是子进程。区别是，fork指令会在子进程中返回0，而且父进程中返回子进程的进程id。</li><li>在前面的测试之后，进程A和进程Z各自使用独立的code path，就好像他们都来自一条路，后来选择了不同的岔路一样。</li></ol>

在fork之后，进程A也许会继续运行同样的程序。然而，进程Z或许会立刻变成另外一个程序。进程Z现在完全就是一个独立于其父进程A的进程了。

<b>Forking around</b>

可以在命令行实际体验一下fork。打开一个新的xterm，你现在应该知道xterm有自己的进程，而且，在xterm里面，shell是有xterm产生的一个单独的进程。

通过ps命令的输出可以看到，在ppid字段那里，就是父进程的id。 

使用&符号可以将程序放到后台执行。执行的时候会同时输出各个进程的id。jobs命令可以查看当前运行的进程。标签1，2，3可以用来标记不同的会话。kill %N 就是结束第N个会话。fg %N 可以将一个会话放到前台。

<b>To the great process pool in the sky</b>

有些进程是一直存在的，例如init，有些会将自己转变成其他的（例如shell）。大部分进程最终都会自然死掉，也就是程序运行完毕的时候。

你可以让一个进程suspended（挂起），也可以让他复苏。还有像前面说的，你也可以使用kill命令结束一个进程。

ctrl-Z 可以挂起一个进程。进程在前台运行的时候，ctrl+c 可以结束这个进程。在shell内部使用unix signals来对一个进程产生影响。你可以从一个进程像另一个发送signal（信号），也可以让进程自己给自己发送信号。

man 7 signal或者kill -L 可以看到所有的signal。使用kill命令可以发送这些signal。

刚针对fork测试了一下，写一个简单的c程序
<pre class="prettyprint lang-c">

main(){
        int a;
        printf("Before fork.\\n");
        a = fork();
        printf("After fork, fork returns %d\\n", a);
}</pre>

保存之后用gcc编译一下，执行一个，可以看到结果。fork之后的程序会继续执行下面的指令，唯独fork的返回值不同。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/unix-process/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="about-hula-hoop/">呼拉圈的问题</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-05T16:00:00.000Z" itemprop="datePublished">Apr 6, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/呼拉圈/">呼拉圈</a>
</div>
    </div>
      
        感觉呼拉圈这玩意挺怪异的，为什么我就学不会呢？后来总结了一下，有以下2个可能。<br><br><ol><li>有啤酒肚。这样，呼拉圈好像就不太能卡到腰上。所以总往下掉。</li><li>腰扭不起来。总不能和谐的和呼拉圈一起转，这样，扭几下之后，呼拉圈就因为没有动力掉下来了。初学者可能都有这个问题。</li></ol>其实我也转起来过，偶尔能转个好几圈，那时候很有感觉，可是一高兴就掉了。然后又转不起来了。 :(<br><br>呼拉圈减肥也需要运动时间足够长，可以参考国家体委会推行的”三三三”运动：每周运动三次，每次至少三十分钟，心跳达一百三十下。由于摇呼啦圈的运动强度不够，如果要增加心跳速率，就必须要加快摇动的速度。<br><br>我看来是学不会这个了，玩玩别的吧。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/about-hula-hoop/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="adjust-of-bus/">第五批 公交线路调整</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-03T16:00:00.000Z" itemprop="datePublished">Apr 4, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/公交/">公交</a>
</div>
    </div>
      
        虽然调整没几条，但是涉及到我们小区的，倒是有三条。

<blockquote>831 改成 675 ，通州李庄-> 左家庄
通州李庄 上潞园小区 小潞邑北站 小潞邑 龙旺庄 焦王庄 结研所 北京物资学院 五里桥路口东 东十里堡村 常营路口东 常营路口西 黄渠村黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口 十里堡北里 农民日报社 农民日报社北 石佛营东里 豆各庄路口南 豆各庄路口西 朝阳公园桥东朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南 燕莎桥西 新源南路西口 新源里 左家庄
5：30-22：00</blockquote>


<blockquote>834 改成 498 ，常营民族家园->燕莎桥南
常营民族家园 常营西路 常营北路 常营 常营路口西 黄渠村 黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口北 姚家园村 万杰医院 姚家园西 姚家园西口 豆各庄路口西 朝阳公园桥东 朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南
常营民族家园5：30-21：15  燕莎桥南6：15-22：00</blockquote>


<blockquote>742 改成 506 ，常营民族家园->四惠
常营民族家园 常营西路 常营北路 常营 科技大学管庄校区 管庄路口北 管庄 周家井 双桥西 茶家坟 梆子井 高碑店桥东 四惠东站 四惠站
上林苑小区5：30—21：00  北京华侨城6：30—22：00</blockquote>


742改的挺好，以前线路太长，四惠等车的时候半天不来。反正我也从来不到南三环，刚好，哈哈。以后四惠等车就爽了，没准还有座，嘿嘿。

831就不爽了，以前往北三环走多舒服，速度很快。834还好，走城里，速度慢，所以也无所谓了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/adjust-of-bus/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="awstats-log/">awstats 如何统计以前的日志？</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-01T16:00:00.000Z" itemprop="datePublished">Apr 2, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/other/">other</a> <a href="/tags/linux/">linux</a> <a href="/tags/apache/">apache</a> <a href="/tags/awstats/">awstats</a>
</div>
    </div>
      
        突然想安装一个awstats了，参考 <a href="http://www.chedong.com/tech/awstats.html" target="_blank" rel="external">车东</a> 的文章，安装了一个。可是发现一个问题，设置了logfile为 access_log.%YYYY-24%MM-24%DD-24.log 之后，发现只能把昨天的日志统计进来，可是我的log下面还有好多呢，想统计以前的，怎么弄呢？幸好，awstats已经考虑到这个问题了。

awstats.pl 脚本支持在命令行指定logfile，这样简单了，改变这个参数就可以了。不过要注意的是，如果你的data里面已经处理新的日志，那么指定logfile也没用了，以前的没办法更新进来了。只能是删掉data里面的内容，然后重新从最早的开始生成一遍。我写了一个脚本来做这个事情。

<pre class="prettyprint lang-bash">

awstats_dir=/opt/tt2/awstats/wwwroot/cgi-bin
logfile_dir="/usr/local/apache/logs/"

cd $awstats_dir

for file in `find $logfile_dir -name "access_log.2*" | sort`;do
        #echo "$file"
        ./awstats.pl －update -config=wd -LogFile=$file
done</pre>

保存为 awstats.sh ，然后执行就可以了。他会查找 logfile_dir 下面所有的 access_log.2 开头的文件，作为参数来更新记录。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/awstats-log/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="compress-apache/">给apache加了一个compress模块，mod_deflate</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-01T16:00:00.000Z" itemprop="datePublished">Apr 2, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/web/">web</a> <a href="/tags/apache/">apache</a>
</div>
    </div>
      
        apache 1.3 里面有个压缩模块叫做 mod_gzip ，不支持 2.x。在2.x 里面有一个 <a href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html" target="_blank" rel="external">mod_deflate</a> 模块，也是类似的效果。想使用的话，很简单，编译的时候加上 --enable-deflate 就可以了。之后可以用 apachectl -l  看是不是正常加载了这个模块。

httpd.conf 添加下面的语句
<pre class="prettyprint lang-txt">

对所有指定类似的文件都应用这个模块。添加之后访问看看。

<pre class="prettyprint lang-txt">
203.86.x.x - - [02/Apr/2007:15:24:23 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">4718</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 Firefox/2.0.0.3"

203.86.x.x - - [02/Apr/2007:15:46:16 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">1684</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 irefox/2.0.0.3"</pre>

好像是小了。。。

如果error.log 里面出现了下面的错误
<pre class="prettyprint lang-txt">

 这表示apache的那个模块没有安装正确。
</pre></pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/compress-apache/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="sub-network/">对子网的一些理解</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-28T16:00:00.000Z" itemprop="datePublished">Mar 29, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/子网/">子网</a>
</div>
    </div>
      
        每个子网的第一个ip是 <font color="#3333FF">网络地址</font> ，最后一个ip是 <font color="#3333FF">广播地址</font> 。

计算两个ip在不在一个子网的方法是，分别将ip地址和掩码取“逻辑与”，如果结果想同，那么就是一个子网的。

比如 192.168.1.18/255.255.255.252 这个ip，怎么计算和他一个子网的其他ip呢？很简单，252表示这个子网总共有 256-252=4 个ip，那么每遇到4的倍数，就是一个子网的 网络地址 。这样，192.168.1.18 对应的 网络地址 就是18/4取整然后乘以4，也就是16，也就是 192.168.1.16，这样同一个网段的就有 192.168.1.16 ~ 192.168.1.19 这几个ip。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/sub-network/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="glasses-and-maomao/">戴眼镜的小毛</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-27T16:00:00.000Z" itemprop="datePublished">Mar 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/小毛/">小毛</a>
</div>
    </div>
      
        <img src="http://photo1.yupoo.com/20070328/111646_1474112226.jpg"><br><img src="http://photo1.yupoo.com/20070328/111643_180303892.jpg"><br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/glasses-and-maomao/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="hukouben/">把户口本给领了</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-27T16:00:00.000Z" itemprop="datePublished">Mar 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/户口/">户口</a>
</div>
    </div>
      
        <img src="http://photo1.yupoo.com/20070328/111649_1793103679.jpg"><br><br>总算领上了，不用拿那个户口页到处晃了。而且，好像还省了一笔钱。恩。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/hukouben/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="egg-and-rice/">蛋炒饭</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-24T16:00:00.000Z" itemprop="datePublished">Mar 25, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/蛋炒饭/">蛋炒饭</a>
</div>
    </div>
      
        上周邻居过来吃饭，米饭弄多了。这两天周末吃了三顿蛋炒饭，都是我做的，呵呵。<br><br><img src="http://photo1.yupoo.com/20070325/211953_1885917037.jpg"><br><br>看看如何，自我感觉还不错，呵呵。不足的是差点绿色。葱也是白色的。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/egg-and-rice/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="irssi-script-howto/">Irssi script howto</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-20T16:00:00.000Z" itemprop="datePublished">Mar 21, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="/tags/heart/">heart</a> <a href="/tags/irssi/">irssi</a>
</div>
    </div>
      
        为 irssi 写一些简单的脚本其实不是很难。我大概讲解一下如何写作。

<b>== 理解 signal ==</b>

写过 vb 程序的都应该知道，vb 都是按照事件来触发执行程序的。例如你给某个窗体的 单击事件 写了代码，那么当这个窗体被单击的时候，就会执行你写的代码。

在 irssi 也是类似，不过他的不是事件，是 signal 。你所要做的就是针对不同的 signal 写不同代码即可。

irssi 的 signal 在这个 <a href="http://irssi.org/documentation/signals" target="_blank" rel="external">文档</a> 里面都写的很全了，此外安装 irssi 的时候也会安装 irssi 的一些文档，里面也有 signal 的相关文档。

<b>== 一个简单脚本 ==</b>

脚本头部要包含一些脚本的信息，例如下面。

<pre class="prettyprint lang-perl">
use vars qw($VERSION %IRSSI);
use Irssi;

$VERSION = '1.00';
%IRSSI = (
    authors     => 'wd',
    contact     => 'wd#wdicc.com',
    name        => 'My first Script',
    description => 'This script notify ' .
                   'you when recive msg.',
    license     => 'Public Domain',
);

sub recive_msg{
    my ($server, $msg, $nick, $address, $target) = @_;
    #do nothing 

}

Irssi::signal_add_first('message public',  'recive_msg');</pre>

最下面那行就是截获 irssi 的 signal 了。“message public”这个 signal 是在 irssi 接收到 public message 的时候产生，上面的脚本截获这个 signal 之后，执行后面的 revice_msg 函数 。查一下上面的 signal 文档可以找到下面的内容。

 "message public", SERVER_REC, char *msg, char *nick, char *address, char *target

这表示 irssi 在产生 message public 这个 signal 之后，还会同时传递后面的那些信息。上面那个脚本里面，这些信息都传递给了 recive_msg 函数。这样 recive_msg 函数的第一行就是设置一些变量来接收这些信息。

这就是一个简单的 signal 的处理过程，当然，上面的这个脚本在截获 signal 之后其实什么都没有做。那么怎么让脚本和 irssi 交互呢？

<b>== 和 irssi 交互 ==</b>

按照上面的例子，可以用 $server->command() 或者 $server->print() 来和 irssi 交互。

$server->command 可以在 irssi 里面执行一个 irssi 命令。例如

 $server->command("msg wd hi");

这样相当于在 irssi 里面输入 "/msg wd hi" 这个命令。其他命令类推一下。

$server->print 可以在 irssi 里面打印一些信息，这些信息别人是看不到的，这些信息类似于 irssi 给你的消息。例如

 $server->print("$server","a test msg");

这些信息会在1号窗口（这个不一定，看连接了几个server）里面显示。

有了 print 就可以在 irssi 里面测试 recive_msg 函数接收的信息都是什么意义了。试试看下面的命令

 $server->print("$server","$nick send you a msg : $msg");

<b>== 设置一些选项 ==</b>

可以为脚本设置一些选项，这样也可以让脚本适合更多人使用。

 Irssi::settings_add_str("wd","test","just for test");
 Irssi::settings_add_bool('blah', 'blah_color', 1);;

上面这两行设置了两个变量，一个是字符串 test，初始值为 "just for test"，另一个是布尔变量 blah_color ，初始值是1。第一个参数是设置将变量显示在哪个段，用 /set 命令查看的时候会看到。

使用下面的命令可以获取设置。

 $a = Irssi::settings_get_str("test");
 $b = Irssi::settings_get_bool('blah_color');

这样按照上面的设置， $a 的值就是 "just for test" ， $b 的值就是 1。当然，用户如果用 /set 命令来设置了这些参数，那么取回的信息就不一定是这些了。

<b>== 参考资料 ==</b>

<a href="http://juerd.nl/site.plp/irssiscripttut" target="_blank" rel="external">Scripting Irssi</a>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="https://wdicc.com/irssi-script-howto/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/22/" class="prev">Prev</a>
    
    
        <a href="/page/24/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2017

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
