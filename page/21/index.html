<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="mirror-produced-by-yijia/">终于把宜家的镜子装上了</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-06-02T16:00:00.000Z" itemprop="datePublished">Jun 3, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a> <a href="../tags/宜家/">宜家</a> <a href="../tags/镜子/">镜子</a>
</div>
    </div>
      
        <p>好像是年前从宜家买了一个镜子，因为没有工具，一直就没装。这几天总算借到了电钻，今天把镜子给装上了。</p> <p>这是安装图、镜子和钉子。</p> <p><img src="http://photo6.yupoo.com/20070603/205944_1590532430.jpg"> </p> <p><img src="http://photo8.yupoo.com/20070603/205918_1123330944.jpg"> </p> <p><img src="http://photo6.yupoo.com/20070603/205936_751480677.jpg"> </p> <p>宜家的这个钉子设计的非常好，就算钻孔不是很到位，也同样可以装好镜子。</p> <p><img src="http://photo8.yupoo.com/20070603/205941_874433667.jpg"> </p> <p>从下面往上面装，这是装了2块的效果。</p> <p><img src="http://photo6.yupoo.com/20070603/205931_1123408221.jpg"> </p> <p>装好后的效果。</p> <p><img src="http://photo7.yupoo.com/20070603/205937_641786367.jpg"></p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/mirror-produced-by-yijia/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="test-live-writer/">装了一个live writer新版，测试看看</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-30T16:00:00.000Z" itemprop="datePublished">May 31, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/web/">web</a> <a href="../tags/livewriter/">livewriter</a>
</div>
    </div>
      
        <p>测试下看看呢？</p> <p>&nbsp;</p> <p></p> <p></p> <p>好像很<font color="#ff0000">多功能</font>不错，呵呵。</p> <p align="center"><u><strike>居中？</strike></u></p> <ol> <li> <div align="left"><u><strike>awefsdf</strike></u></div> </li><li> <div align="left"><u><strike>sdfsdf</strike></u></div> </li><li> <div align="left"><u><strike>sdfsdfsdf</strike></u></div></li></ol> <p align="left">&nbsp;</p> <blockquote> <p align="left">新的asdfasdfasdfasdfasdfasdfa</p> <p align="left">sdfasdf</p></blockquote> <p align="left">下面的</p> <p align="left"><pre lang="bash">grep -r xxx aaa</pre>
</p>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/test-live-writer/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="bleeding/">惊心动魄的流血事件</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-19T16:00:00.000Z" itemprop="datePublished">May 20, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a> <a href="../tags/流鼻血/">流鼻血</a>
</div>
    </div>
      
        来了公司觉得鼻子里面有点难受，撕了一块纸擤鼻涕，结果纸一拿开看到上面全是血，就和电视剧里面咳嗽的时候手帕上面的血一样，好多。然后就感觉鼻血一滴一滴就出来了，赶紧撕了一块纸堵住鼻子就去卫生间了，拿开纸以后发现滴的速度很快，纸都红了。清洗了一下鼻子周围，发现根本清理不过来，滴的太快了，就用左手挡住鼻子，右手高举起来，头后仰站了一会，结果手一拿开血还是不停的滴。赶紧回来拿了一块纸塞住鼻子，继续刚才的姿势站了一会，发现血会往咽喉那里留，一会嘴里就有血腥味了。站了一会觉得没效果，纸拿开之后，血还是继续滴，速度一点都没变。换了块纸堵住鼻子，上网搜了一下，找到点资料。

<blockquote>第一步：坐下来，全身放松，用手指压着流鼻血的鼻子中部5～10分钟（利用鼻翼压迫易出血区）；
第二步：患者头部太保持直立位。因为头低可引起头部充血，而仰头会使血液流下咽部；
第三步：口中的血液应尽量吐出，以免咽下刺激胃部引起呕吐
第四步：指压期间用冷水袋（或湿毛巾）敷前额及后颈，可促使血管收缩，减少出血。</blockquote>

<blockquote>我们知道，鼻有前鼻孔和后鼻孔，鼻出血也按部位分前鼻孔和后鼻孔出血（绝大部分是前鼻孔出血）。遇到这种情况，首先应镇定，以一手的拇指与中指或食指捏住两侧鼻翼，实行压管止血法。此时，头部位应取正位，即既不仰头也不俯首，又不歪着头。若仰头，就会出现上述病例的情况；若低头，又会加大局部血管压力而增加出血。至于用冷水拍打额部，似无必要，因为拍打本身就是一种冲击。若取冷缩血管之意，不如用冰袋敷鼻梁，但勿放松捏鼻的手指。在压迫止血的同时，若家中有麻黄素滴鼻液或鼻眼净（或滴鼻净），可滴湿棉片塞于鼻腔中再捏鼻，效果更好。</blockquote>

看来以前的偏方都是骗人的啊，我还搜到什么捆中指啥的，能管用么？

按照上面，堵住鼻孔，用手捏着鼻子，没有冷水袋没办法了，捏了一会，拿开纸，发现血还在流。。。有点害怕了，不会是啥病吧，看韩剧都是突然流鼻血不止，然后诊断得了绝症。。。恐怖啊。换了一块纸，继续捏着鼻子，一边还在想各种后果。。。又捏了一会，拿开纸，发现好像好了，血没了。这不，继续换一块纸，巩固一下，不过没捏鼻子了。

现在感觉头有点晕晕的，眼睛发花，不知道是不是流血的结果。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/bleeding/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="rep-of-oracle/">oracle 的高级复制出了点问题，记录下解决办法</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-17T16:00:00.000Z" itemprop="datePublished">May 18, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/linux/">linux</a> <a href="../tags/oracle/">oracle</a>
</div>
    </div>
      
        早上来了同事就来找我，有两台同步的服务器数据库没有同步成功，查查咋回事。

一台A，从B处同步。蒙了一下，果然有个dba_jobs表，呵呵。

<pre class="prettyprint lang-sql">

在A处执行上面的命令，好像repadmin的job都在正常执行。
在B处执行上面的命令，能查到类似下面的信息

<pre class="prettyprint lang-text">
---------- ------------------------------ -------------------
NEXT_DATE             FAILURES B
------------------- ---------- -
47 repadmin                           2006-05-16 19:37:29
4001-01-01 00:00:00         16 Y</pre>

显然是job挂了。查看了一下挂的时间，原来是联通机房机柜断电那天，A机器在联通机房，那天断电了6个小时。B机器上面的同步尝试了16次之后就挂起了。解决方法也不难，用repadmin用户登录，然后执行下面的语句，<strong>谁的job只能由谁来执行</strong>：

<pre class="prettyprint lang-sql">

47是job id，sysdate表示当前时间。等会再看吧，执行成功之后会把 failures 重新计数，B变成N。
</pre></pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/rep-of-oracle/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="bug-of-coding-plugin/">又找到一个wp的coding插件的问题</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-17T16:00:00.000Z" itemprop="datePublished">May 18, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/web/">web</a> <a href="../tags/coding/">coding</a>
</div>
    </div>
      
        在 geshi/geshi.php 里面，有个函数会将 &,>,<," 这些替换为html字符。而同时呢，wp="" 的="" wp-includes="" formatting.php="" 里面也会将这些字符做处理，这样就混乱了。解决方法也很简单，把coding插件里面的相应函数注释掉就好了（目前发现注释掉&和"就可以）。="" <pre="" class="prettyprint lang-php">
        // init

        $aTransSpecchar = array(
//            '&' => '&amp;',
//            '"' => '&quot;',
            '<' ==""> '<', '="">' => '>' 
            );            

        $aTransSpecchar = array();
.....
}
</',></'></,">
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/bug-of-coding-plugin/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="awk-array/">awk 数组的一个应用</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-16T16:00:00.000Z" itemprop="datePublished">May 17, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/linux/">linux</a> <a href="../tags/awk/">awk</a> <a href="../tags/bash/">bash</a>
</div>
    </div>
      
        sed和awk这本书看了好久了，sed部分将就看完了，awk部分基本没怎么看。上次有人问起一个比较文件的问题，发现awk来解决非常的简单。

比较两个文件A、B，打印出包含在A中的，但是不包含在B中的所有行。

根据题目要求，awk的解决方法如下:
<pre class="prettyprint lang-bash">

里面NR表示行号，FNR表示当前文件中的行号。NR==FNR的时候，表示此时正在读取B文件，以B中的$0为索引，建立一个数组，并且都赋值为1。
当NR>FNR 的时候，表示此时在读取A文件，如果a[$0]为1，那么就表示这个$0是在B里面也存在的，是吧？所以，如果要B里面不存在的，那么就得是a[$0]不为1的，就是没做过赋值的。所以了，就是这个了。

进阶一下，比较两个文件A、B，打印包含在A中第一列，但是不包含在B中第二列的整行。

类似的：
<pre class="prettyprint lang-bash">

比较文件内容还可以用comm命令，还有人提出了grep命令，例如第一个问题：
<pre class="prettyprint lang-bash">
</pre></pre></pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/awk-array/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="busy-may-day/">繁忙的五一</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a> <a href="../tags/五一/">五一</a>
</div>
    </div>
      
        五一陪老婆回了沈阳，这次计划中就比较充实，去了沈阳的好几个景点，也幸好有车了，要不估计得累趴下。

1号去了怪坡。怪坡就是一段大概100多米的坡度不到1°的路，上坡的时候，自行车、汽车不需要动力就可以上去，下坡的时候反而需要。据说好多人研究了没结果，呵呵，我感觉就是一个视觉差的一个坡度，不知道了就。

2号去了本溪水洞。其实就是类似南方的溶洞，里面好多钟乳石一样的东西，洞还比较长，坐船好久才往回走，还没有到头。里面水温不高，不过据说全年都这个温度，现在去里面很凉快，动态可能会感觉暖和。

3号休息了一天，去中街逛了逛，兴隆大家庭里面玩了会。老婆玩了会旱冰。晚上去看了二人转，好几个都是赵本山的徒弟，有些演的还是挺好的。

4号去了极地皇家海洋世界。地方不错，就是人太多了，由于很多过道比较窄，所以很多地方都是挤着就过去了，基本没怎么仔细看。唯一的亮点就是最后的海豚表演了。最后那个世纪丛林其实也没啥意思，不如不花那个门票钱。

5号去姥姥家，去五爱市场逛了逛，买了些衣服，呵呵。

6号上午去太原街逛了逛，下午去体育大学旁边的一个游泳馆游了会，这次算是我第一次正式学游泳了，水里泡了会，还挺好玩的，呵呵。

晚上去了好几次市府广场，玩了两次刷刷，租鞋3块钱不限时，多便宜，呵呵。北京这边我唯一知道的就是北展广场了，可惜太远。这次真是玩累了，下次去了就逛逛中街好了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/busy-may-day/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="solve-apache-start-fail/">apache 的一个启动失败的问题的解决方法</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/linux/">linux</a>
</div>
    </div>
      
        这个问题网上好多方法，记录一下方便自己以后查看。

<pre class="prettyprint lang-text">
[Wed Apr 18 19:56:47 2007] [notice] Digest: done
[Wed Apr 18 19:56:47 2007] [warn] pid file /usr/local/apache54/logs/httpd.pid overwritten -- Unclean shutdown of previous Apache run?
[Wed Apr 18 19:56:47 2007] [emerg] (28)No space left on device: Couldn't create accept lock</pre>

解决方法就是
<pre class="prettyprint lang-bash">
</pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/solve-apache-start-fail/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="osi-and-tcp-ip/">复习了一下 OSI 7层模型 和 tcp/ip 4层模型</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-16T16:00:00.000Z" itemprop="datePublished">Apr 17, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/linux/">linux</a> <a href="../tags/tcp-ip/">tcp/ip</a>
</div>
    </div>
      
        老是记不住这些，每次被问道只能说知道，但是说不出来名字。刚从irc里面得到一个好记得方法。

<b>All people seemes to need data processed.</b>

这句话的字头刚好就是7层模型的字头。

A->Application 应用层    \
P->Presentation 表示层  --   应用层(HTTP、TFTP、FTP、NFS、SMTP、Telnet、SNMP、DNS)
S->Session 会话层        /
T->Transport 传输层   -----  传输层(TCP/UDP)
N->Network 网络层     -----  Internet 层(IP、ICMP、ARP、RARP)
D->Data Link 数据链路层 \
P->Physical 物理层      /  网络访问层 

这样似乎好记一点。。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/osi-and-tcp-ip/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="nagios-conf/">今天又理解了nagios的两个配置</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-15T16:00:00.000Z" itemprop="datePublished">Apr 16, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/linux/">linux</a> <a href="../tags/nagios/">nagios</a>
</div>
    </div>
      
        <b>Host and Service Dependencies</b>

当监控的host或者service之间有依赖关系的时候，可以通过定义dependence来让nagios知道应该通知什么。

比如我这里的服务器都在idc托管，而我的nagios却是运行在公司的一台服务器上面。这样，有时候可能就需要考虑依赖关系了。比如当公司的网络出问题的时候（事实上经常出现），比如断网，总不能让他也认为是idc托管的服务器出问题了而给你发通知吧。host dependence正好可以解决这个问题。

比如 A 是idc的，B 是公司的网关（或者某个应该一直在线的服务器，比如sina.com.cn）。当nagios检测到A连不上的时候，他会根据dependence来检测B，如果B也连不上了，那么就只通知你B连不上了。

大概的配置如下
<pre class="prettyprint lang-text">
        host_name                       B
        dependent_host_name             A
        notification_failure_criteria   d,u
        }</pre>

<b>Notification Escalations</b>

escalations 的意思就是扩大。整个这个的意思应该就是扩大通知范围。之前一直没理解是什么意思，今天看了才明白。其实就是定义出问题的时候，什么时候扩大通知。

比如A服务器挂了，他对应的contactgroup就会立刻得到通知。但是，如果这个组里面的人在睡觉或者在做什么事情忽略了这个通知，怎么办呢？当然nagios会通知多次，但是如果这些都忽略掉了或者没有收到怎么办？这样这个escalations就有作用了，他可以定义几次通知contatgroup之后就开始通知别的人。还有一些别的功能，就不多说了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/nagios-conf/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/20/" class="prev">Prev</a>
    
    
        <a href="/page/22/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
