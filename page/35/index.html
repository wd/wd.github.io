<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="weblogic-apache-bridge/">weblogic apache 桥接指南</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-21T16:00:00.000Z" itemprop="datePublished">May 22, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/weblogic/">weblogic</a>
</div>
    </div>
      
        Using Web Server Plug-Ins with WebLogic Server

http://edocs.bea.com/wls/docs90/plugins/apache.html

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/weblogic-apache-bridge/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="cacti-snmp/">使用cacti获取snmp发送的自定义信息</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-18T16:00:00.000Z" itemprop="datePublished">May 19, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        ★ 需求

服务器运行了weblogic和apache，可是有时weblogic进程会莫名crash，业务都在这上面，所以需要能监控程序的运行。我在服务器端写了一个脚本，使用curl检测这两个服务的状态，返回一个数字来确定是哪个服务down了，然后远程通过cacti采集数据画图。

<br>
        
          <p class="more-link">
            <a href="cacti-snmp/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/cacti-snmp/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="a-file-root-cant-modify/">root用户无法修改的一个文件</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-14T16:00:00.000Z" itemprop="datePublished">May 15, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        # ls -al xx
-rwxr-xr-x &nbsp; &nbsp;1 root &nbsp; &nbsp; root &nbsp; &nbsp; &nbsp; &nbsp; 2647 Dec &nbsp;8 16:47 xx

# stat -c %a startWebLogic.sh
755

# mv xx xx.ss
mv: cannot move `xx' to `xx.ss': Operation not permitted

这是怎么回事呢？上bbs问了一下才知道。

# lsattr xx
----i-------- xx

只需要执行如下命令即可
#chattr -i xx

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/a-file-root-cant-modify/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="ldap-samba/">ldap samba实现windows域管理</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-13T16:00:00.000Z" itemprop="datePublished">May 14, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        0 准备工作

1) 一个全新安装的debian sarge。1台或者多台Win 2k/xp测试电脑。
2) 至少懂一些LDAP和Samba。
3) 假设服务器的域名是abc.com，服务器的名称为test-server。

1 安装web服务器

# apt-get install apache2 php4 libapache2-mod-php4

等待安装完毕之后，用浏览器连接服务器的域名或者ip试试看。能显示web页就说明apache2没问题了。apache2的web的根目录在/var/www，配置文件在/etc/apache2。

此后需要验证php4是否安装妥当。在/var/www目录新建一个index.php文件，内容如下。

&lt;?
 &nbsp; &nbsp;phpinfo();
?&gt;

保存之后，再次连接服务器的 http://abc.com/index.php ，会看到一个php信息的网页，表示php安装成功。
<br>
        
          <p class="more-link">
            <a href="ldap-samba/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/ldap-samba/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="stop-and-start-script-for-apache-and-weblogic/">启动停止weblogic和apache的脚本</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        apache和weblogic做桥接之后，启动的时候要先启动weblogic，后启动apache，停止的时候要先停止apache，后停止weblogic，这

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/stop-and-start-script-for-apache-and-weblogic/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="portmap/">端口映射</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/iptables/">iptables</a>
</div>
    </div>
      
        ★ 需求

1 只有一个ip，怎么让多台电脑上网？

只讲一下主机是双网卡的时候怎么解决。windows下面可以使用winroute、wingate或者系统自带的共享网络连接的功能，都可以实现共享上网。linux下面使用iptables一句话就可以实现。

至于主机是单网卡怎么解决，自己研究研究吧。我只在win下面尝试过用wingate，可是及其不稳定。

2 怎么将某个端口映射给内网？

内网某台电脑提供了服务，怎么让外网的用户可以访问呢？某些对外的服务可能会在内网的多台电脑上面提供，这时就需要做端口映射来让这些服务器让外网可以访问。

<br>
        
          <p class="more-link">
            <a href="portmap/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/portmap/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="install-mysql/">mysql 安装</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/mysql/">mysql</a>
</div>
    </div>
      
        下面的内容大部分来自mysql的readme

1 download mysql5.0
2
shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db --user=mysql

如下提示信息:

Installing all prepared tables
Fill help tables

To start mysqld at boot time you have to copy support-files/mysql.server
to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:
./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h czhand password 'new-password'
See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &amp;

You can test the MySQL daemon with the benchmarks in the 'sql-bench' directory:
cd sql-bench ; perl run-all-tests

Please report any problems with the ./bin/mysqlbug script!

The latest information about MySQL is available on the web at
http://www.mysql.com
Support MySQL by buying support/licenses at https://order.mysql.com

shell&gt; chown -R root  .
shell&gt; chown -R mysql data
shell&gt; chgrp -R mysql .

/home/my.cnf

basedir=/usr/local/mysql
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/data/mysql.sock
#err-log=/var/log/mysqld.log
pid-file=/usr/local/mysql/data/mysqld.pid

shell&gt; bin/mysqld_safe --user=mysql &amp;

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/install-mysql/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="rsync-script/">rsync脚本的一个例子</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/rsync/">rsync</a>
</div>
    </div>
      
        <pre class="prettyprint lang-bash">

SYNCLOGFILE="/var/log/rsync-201.log"
SYNCLOCKFILE="/var/lock/rsync-201.lock"

if [[ -f $SYNCLOCKFILE ]]; then
  # lock file already present, bail
  exit 1
fi

echo -n ">>> Sync log for " >> $SYNCLOGFILE
date >> $SYNCLOGFILE

touch $SYNCLOCKFILE
rsync -vzrtopg  --delete 192.168.0.201::www /backup  >> $SYNCLOGFILE 2>&1
rm -f $SYNCLOCKFILE
</pre>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/rsync-script/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="del-30-day-old-file/">find命令查找删除30天之前的文件</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/find/">find</a>
</div>
    </div>
      
        find /data -name "xxx.*" -follow -ctime +30 -exec rm -rf {} \;

删除30天之前的文件。
-follow表示跟随链接。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/del-30-day-old-file/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="178-accident/">178事故</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-29T16:00:00.000Z" itemprop="datePublished">Apr 30, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/route/">route</a> <a href="../tags/路由/">路由</a>
</div>
    </div>
      
        ★ 由来

做服务器间相互备份的时候，到某两台服务器的时候，暂且称为A、B吧，发现他们之间不能互通，查看了ip，内网ip都是一个网段的，查看防火墙，端口也都是打开的，更加离奇的是，通过rsync从B访问A的时候，提示对方拒绝连接，同时在A上面用tcpdump监听相应端口，发现没有任何数据来往，而在A上面同时用tcpdump监听，却发现发出的请求对方都有回应。这个就太离奇了，到底是怎么回事呢？在A上面查看ip设置，注意到A有三个网卡，一个公网，两个内网ip，两个内网ip分别是10.x.x.0/24网段和192.168.0.0/24网段的，而B上面只有两块网卡，一个公网ip，一个内网ip，内网是192.168.0.0/24网段的，此时突然想起来A上面有snmpd监控，查看了一下，发现A的192.168.0.0/24 网段根本从来就没有任何流量，所以就断定肯定是网线插错了。打电话给机房也不太可能，就想着自己修改一下服务器的ip好了，反正是内网ip，即使修改出问题也不会出现连不上的情况，这样至少我远程还可以继续维护。这样，恶梦开始了。。。。

<br>
        
          <p class="more-link">
            <a href="178-accident/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/178-accident/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/34/" class="prev">Prev</a>
    
    
        <a href="/page/36/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
