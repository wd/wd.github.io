<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="rsync-script/">rsync脚本的一个例子</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/rsync/">rsync</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        <pre class="prettyprint lang-bash">

SYNCLOGFILE="/var/log/rsync-201.log"
SYNCLOCKFILE="/var/lock/rsync-201.lock"

if [[ -f $SYNCLOCKFILE ]]; then
  # lock file already present, bail
  exit 1
fi

echo -n ">>> Sync log for " >> $SYNCLOGFILE
date >> $SYNCLOGFILE

touch $SYNCLOCKFILE
rsync -vzrtopg  --delete 192.168.0.201::www /backup  >> $SYNCLOGFILE 2>&1
rm -f $SYNCLOCKFILE
</pre>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/rsync-script/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="portmap/">端口映射</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/iptables/">iptables</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        ★ 需求

1 只有一个ip，怎么让多台电脑上网？

只讲一下主机是双网卡的时候怎么解决。windows下面可以使用winroute、wingate或者系统自带的共享网络连接的功能，都可以实现共享上网。linux下面使用iptables一句话就可以实现。

至于主机是单网卡怎么解决，自己研究研究吧。我只在win下面尝试过用wingate，可是及其不稳定。

2 怎么将某个端口映射给内网？

内网某台电脑提供了服务，怎么让外网的用户可以访问呢？某些对外的服务可能会在内网的多台电脑上面提供，这时就需要做端口映射来让这些服务器让外网可以访问。

<br>
        
          <p class="more-link">
            <a href="portmap/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/portmap/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="install-mysql/">mysql 安装</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/mysql/">mysql</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        下面的内容大部分来自mysql的readme

1 download mysql5.0
2
shell&gt; groupadd mysql
shell&gt; useradd -g mysql mysql
shell&gt; cd /usr/local
shell&gt; gunzip &lt; /PATH/TO/MYSQL-VERSION-OS.tar.gz | tar xvf -
shell&gt; ln -s FULL-PATH-TO-MYSQL-VERSION-OS mysql
shell&gt; cd mysql
shell&gt; scripts/mysql_install_db --user=mysql

如下提示信息:

Installing all prepared tables
Fill help tables

To start mysqld at boot time you have to copy support-files/mysql.server
to the right place for your system

PLEASE REMEMBER TO SET A PASSWORD FOR THE MySQL root USER !
To do so, start the server, then issue the following commands:
./bin/mysqladmin -u root password 'new-password'
./bin/mysqladmin -u root -h czhand password 'new-password'
See the manual for more instructions.

You can start the MySQL daemon with:
cd . ; ./bin/mysqld_safe &amp;

You can test the MySQL daemon with the benchmarks in the 'sql-bench' directory:
cd sql-bench ; perl run-all-tests

Please report any problems with the ./bin/mysqlbug script!

The latest information about MySQL is available on the web at
http://www.mysql.com
Support MySQL by buying support/licenses at https://order.mysql.com

shell&gt; chown -R root  .
shell&gt; chown -R mysql data
shell&gt; chgrp -R mysql .

/home/my.cnf

basedir=/usr/local/mysql
datadir=/usr/local/mysql/data
socket=/usr/local/mysql/data/mysql.sock
#err-log=/var/log/mysqld.log
pid-file=/usr/local/mysql/data/mysqld.pid

shell&gt; bin/mysqld_safe --user=mysql &amp;

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/install-mysql/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="del-30-day-old-file/">find命令查找删除30天之前的文件</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-05-08T16:00:00.000Z" itemprop="datePublished">May 9, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/find/">find</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        find /data -name "xxx.*" -follow -ctime +30 -exec rm -rf {} \;

删除30天之前的文件。
-follow表示跟随链接。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/del-30-day-old-file/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="178-accident/">178事故</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-29T16:00:00.000Z" itemprop="datePublished">Apr 30, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/route/">route</a> <a href="../tags/路由/">路由</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        ★ 由来

做服务器间相互备份的时候，到某两台服务器的时候，暂且称为A、B吧，发现他们之间不能互通，查看了ip，内网ip都是一个网段的，查看防火墙，端口也都是打开的，更加离奇的是，通过rsync从B访问A的时候，提示对方拒绝连接，同时在A上面用tcpdump监听相应端口，发现没有任何数据来往，而在A上面同时用tcpdump监听，却发现发出的请求对方都有回应。这个就太离奇了，到底是怎么回事呢？在A上面查看ip设置，注意到A有三个网卡，一个公网，两个内网ip，两个内网ip分别是10.x.x.0/24网段和192.168.0.0/24网段的，而B上面只有两块网卡，一个公网ip，一个内网ip，内网是192.168.0.0/24网段的，此时突然想起来A上面有snmpd监控，查看了一下，发现A的192.168.0.0/24 网段根本从来就没有任何流量，所以就断定肯定是网线插错了。打电话给机房也不太可能，就想着自己修改一下服务器的ip好了，反正是内网ip，即使修改出问题也不会出现连不上的情况，这样至少我远程还可以继续维护。这样，恶梦开始了。。。。

<br>
        
          <p class="more-link">
            <a href="178-accident/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/178-accident/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="use-rsa-and-dsa/">使用ssh的rsa和dsa验证登陆linux</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-23T16:00:00.000Z" itemprop="datePublished">Apr 24, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/ssh/">ssh</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        参考地址：http://www.5ilinux.com/ssh01.html

按照文档中的方法，使用SecureCRT生成公匙密匙，然后上传公匙，没问题。

用putty使用这个密匙的时候就出问题了，验证不了。

然后用putty生成公匙密匙，上传公匙，验证不了。

后来用openssh自带的ssh-keygen生成了公匙密匙，然后用putty的keygen转换了一下，用putty登陆就可以了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/use-rsa-and-dsa/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="limite-ssh-access-ip/">限制ssh访问的ip</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-23T16:00:00.000Z" itemprop="datePublished">Apr 24, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/ssh/">ssh</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        ★ 需求

最近公司服务器上面某个用户的帐号密码被修改了好几次。查看了一下，确实有人用他的帐号从外网ip（国外的ip）登陆过，猜想可能是他自己的电脑中木马或者什么病毒了。用户自己没有安全意识是很头痛的一个问题，其实给他们新建帐号的时候使用的都是简单密码，但是似乎都没有人上服务器自己修改，但是你又不能要求你的用户如何如何（比如给自己电脑装防火墙、杀毒软件etc），因为那是人家自己的事情。那么我就想，有没有一个方法可以限制某个用户只能从某个ip（或者ip列表）登陆呢？下面是一些解决方法。

<br>
        
          <p class="more-link">
            <a href="limite-ssh-access-ip/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/limite-ssh-access-ip/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="iptables-on-remote-server/">为远程服务器设置防火墙</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-19T16:00:00.000Z" itemprop="datePublished">Apr 20, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/iptables/">iptables</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        如果服务器不在本地，又需要对防火墙做设置的时候，操作一定要注意，

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/iptables-on-remote-server/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="man-in-debian/">debian中man不能翻页的解决方法</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/debian/">debian</a>
</div>
    </div>
      
        安装debian基本系统之后会发现man的时候往下翻页可以用ctrl＋F，可是怎么都翻不上去。包括方向键也都不起作用。

解决方法其实非常简单，只要安装less就可以了。呵呵。
#apt-get install less

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/man-in-debian/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="search-in-vim/">VIM查找替换归纳总结zz</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/vim/">vim</a> <a href="../tags/other/">other</a>
</div>
    </div>
      
        <p><a href="http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry">http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry</a>

VIM中常用的替换模式总结。</p><p>1，简单替换表达式</p><p>替换命令可以在全文中用一个单词替换另一个单词：</p><p>:%s/four/4/g</p><br>
        
          <p class="more-link">
            <a href="search-in-vim/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/search-in-vim/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/34/" class="prev">Prev</a>
    
    
        <a href="/page/36/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
