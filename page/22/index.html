<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="off-phone/">后挂电话的人</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-10T16:00:00.000Z" itemprop="datePublished">Apr 11, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/挂电话/">挂电话</a>
</div>
    </div>
      
        这是第二次写了。唉，真郁闷。昨天写了一拖丢了。

前天晚上值班回家的时候老婆打电话过了问我到哪里了，聊了几句就互相挂了电话。之后就想起来这个了。

打电话的时候，通常都会想像对方是在面前的，会想像对方的样子。高兴、生气、撒娇，都像对着对方一样，所以说电话是一个很伟大的发明。挂电话的死后总会有先后了，不过你要说还有一起挂的那就算了，哼，不争这个。后挂电话的人在对方电话“咔嗒”一声挂上的时候是会有失落感的，就像晚上看电视突然停电一样，对方的形象突然就没了。就像风筝断了线一样，开始还能抓住对方，能知道对方的表情，可接下来一瞬间就断了。

如果谁有一个愿意后挂电话的人，那么这个人无疑肯定是幸福的。你有没有？

之前老婆还不是老婆的时候，每次电话我都会尽量做到后挂电话，现在变成老婆了，反到少了，说完事情就挂了，可能是双方太熟悉的缘故，也不需要相互表达的很清楚，对方就知道。但是这些显然都是借口了，借口的意思就是说，这个理由说出来的比不说出效果还好 :( ，以后我要改了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/off-phone/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="about-hula-hoop/">呼拉圈的问题</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-05T16:00:00.000Z" itemprop="datePublished">Apr 6, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/呼拉圈/">呼拉圈</a>
</div>
    </div>
      
        感觉呼拉圈这玩意挺怪异的，为什么我就学不会呢？后来总结了一下，有以下2个可能。<br><br><ol><li>有啤酒肚。这样，呼拉圈好像就不太能卡到腰上。所以总往下掉。</li><li>腰扭不起来。总不能和谐的和呼拉圈一起转，这样，扭几下之后，呼拉圈就因为没有动力掉下来了。初学者可能都有这个问题。</li></ol>其实我也转起来过，偶尔能转个好几圈，那时候很有感觉，可是一高兴就掉了。然后又转不起来了。 :(<br><br>呼拉圈减肥也需要运动时间足够长，可以参考国家体委会推行的”三三三”运动：每周运动三次，每次至少三十分钟，心跳达一百三十下。由于摇呼啦圈的运动强度不够，如果要增加心跳速率，就必须要加快摇动的速度。<br><br>我看来是学不会这个了，玩玩别的吧。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/about-hula-hoop/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="adjust-of-bus/">第五批 公交线路调整</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-03T16:00:00.000Z" itemprop="datePublished">Apr 4, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/公交/">公交</a>
</div>
    </div>
      
        虽然调整没几条，但是涉及到我们小区的，倒是有三条。

<blockquote>831 改成 675 ，通州李庄-> 左家庄
通州李庄 上潞园小区 小潞邑北站 小潞邑 龙旺庄 焦王庄 结研所 北京物资学院 五里桥路口东 东十里堡村 常营路口东 常营路口西 黄渠村黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口 十里堡北里 农民日报社 农民日报社北 石佛营东里 豆各庄路口南 豆各庄路口西 朝阳公园桥东朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南 燕莎桥西 新源南路西口 新源里 左家庄
5：30-22：00</blockquote>


<blockquote>834 改成 498 ，常营民族家园->燕莎桥南
常营民族家园 常营西路 常营北路 常营 常营路口西 黄渠村 黄渠西站 白家楼桥东 亮马厂 黄杉木店 青年路口北 姚家园村 万杰医院 姚家园西 姚家园西口 豆各庄路口西 朝阳公园桥东 朝阳公园桥西 朝阳公园 团结湖 亮马桥 燕莎桥南
常营民族家园5：30-21：15  燕莎桥南6：15-22：00</blockquote>


<blockquote>742 改成 506 ，常营民族家园->四惠
常营民族家园 常营西路 常营北路 常营 科技大学管庄校区 管庄路口北 管庄 周家井 双桥西 茶家坟 梆子井 高碑店桥东 四惠东站 四惠站
上林苑小区5：30—21：00  北京华侨城6：30—22：00</blockquote>


742改的挺好，以前线路太长，四惠等车的时候半天不来。反正我也从来不到南三环，刚好，哈哈。以后四惠等车就爽了，没准还有座，嘿嘿。

831就不爽了，以前往北三环走多舒服，速度很快。834还好，走城里，速度慢，所以也无所谓了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/adjust-of-bus/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="compress-apache/">给apache加了一个compress模块，mod_deflate</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-01T16:00:00.000Z" itemprop="datePublished">Apr 2, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Web/">Web</a> <a href="../tags/apache/">apache</a>
</div>
    </div>
      
        apache 1.3 里面有个压缩模块叫做 mod_gzip ，不支持 2.x。在2.x 里面有一个 <a href="http://httpd.apache.org/docs/2.0/mod/mod_deflate.html" target="_blank" rel="external">mod_deflate</a> 模块，也是类似的效果。想使用的话，很简单，编译的时候加上 --enable-deflate 就可以了。之后可以用 apachectl -l  看是不是正常加载了这个模块。

httpd.conf 添加下面的语句
<pre class="prettyprint lang-txt">

对所有指定类似的文件都应用这个模块。添加之后访问看看。

<pre class="prettyprint lang-txt">
203.86.x.x - - [02/Apr/2007:15:24:23 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">4718</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 Firefox/2.0.0.3"

203.86.x.x - - [02/Apr/2007:15:46:16 +0800] "GET / HTTP/1.1" 200 <font color="#FF0000">1684</font> "-" 
"Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) 
Gecko/20070309 irefox/2.0.0.3"</pre>

好像是小了。。。

如果error.log 里面出现了下面的错误
<pre class="prettyprint lang-txt">

 这表示apache的那个模块没有安装正确。
</pre></pre>
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/compress-apache/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="awstats-log/">awstats 如何统计以前的日志？</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-04-01T16:00:00.000Z" itemprop="datePublished">Apr 2, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Other/">Other</a> <a href="../tags/Linux/">Linux</a> <a href="../tags/apache/">apache</a> <a href="../tags/awstats/">awstats</a>
</div>
    </div>
      
        突然想安装一个awstats了，参考 <a href="http://www.chedong.com/tech/awstats.html" target="_blank" rel="external">车东</a> 的文章，安装了一个。可是发现一个问题，设置了logfile为 access_log.%YYYY-24%MM-24%DD-24.log 之后，发现只能把昨天的日志统计进来，可是我的log下面还有好多呢，想统计以前的，怎么弄呢？幸好，awstats已经考虑到这个问题了。

awstats.pl 脚本支持在命令行指定logfile，这样简单了，改变这个参数就可以了。不过要注意的是，如果你的data里面已经处理新的日志，那么指定logfile也没用了，以前的没办法更新进来了。只能是删掉data里面的内容，然后重新从最早的开始生成一遍。我写了一个脚本来做这个事情。

<pre class="prettyprint lang-bash">

awstats_dir=/opt/tt2/awstats/wwwroot/cgi-bin
logfile_dir="/usr/local/apache/logs/"

cd $awstats_dir

for file in `find $logfile_dir -name "access_log.2*" | sort`;do
        #echo "$file"
        ./awstats.pl －update -config=wd -LogFile=$file
done</pre>

保存为 awstats.sh ，然后执行就可以了。他会查找 logfile_dir 下面所有的 access_log.2 开头的文件，作为参数来更新记录。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/awstats-log/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="sub-network/">对子网的一些理解</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-28T16:00:00.000Z" itemprop="datePublished">Mar 29, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/子网/">子网</a>
</div>
    </div>
      
        每个子网的第一个ip是 <font color="#3333FF">网络地址</font> ，最后一个ip是 <font color="#3333FF">广播地址</font> 。

计算两个ip在不在一个子网的方法是，分别将ip地址和掩码取“逻辑与”，如果结果想同，那么就是一个子网的。

比如 192.168.1.18/255.255.255.252 这个ip，怎么计算和他一个子网的其他ip呢？很简单，252表示这个子网总共有 256-252=4 个ip，那么每遇到4的倍数，就是一个子网的 网络地址 。这样，192.168.1.18 对应的 网络地址 就是18/4取整然后乘以4，也就是16，也就是 192.168.1.16，这样同一个网段的就有 192.168.1.16 ~ 192.168.1.19 这几个ip。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/sub-network/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="hukouben/">把户口本给领了</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-27T16:00:00.000Z" itemprop="datePublished">Mar 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/户口/">户口</a>
</div>
    </div>
      
        <img src="http://photo1.yupoo.com/20070328/111649_1793103679.jpg"><br><br>总算领上了，不用拿那个户口页到处晃了。而且，好像还省了一笔钱。恩。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/hukouben/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="glasses-and-maomao/">戴眼镜的小毛</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-27T16:00:00.000Z" itemprop="datePublished">Mar 28, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/小毛/">小毛</a>
</div>
    </div>
      
        <img src="http://photo1.yupoo.com/20070328/111646_1474112226.jpg"><br><img src="http://photo1.yupoo.com/20070328/111643_180303892.jpg"><br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/glasses-and-maomao/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="egg-and-rice/">蛋炒饭</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-24T16:00:00.000Z" itemprop="datePublished">Mar 25, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/蛋炒饭/">蛋炒饭</a>
</div>
    </div>
      
        上周邻居过来吃饭，米饭弄多了。这两天周末吃了三顿蛋炒饭，都是我做的，呵呵。<br><br><img src="http://photo1.yupoo.com/20070325/211953_1885917037.jpg"><br><br>看看如何，自我感觉还不错，呵呵。不足的是差点绿色。葱也是白色的。<br>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/egg-and-rice/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="irssi-script-howto/">Irssi script howto</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2007-03-20T16:00:00.000Z" itemprop="datePublished">Mar 21, 2007</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Heart/">Heart</a> <a href="../tags/irssi/">irssi</a>
</div>
    </div>
      
        为 irssi 写一些简单的脚本其实不是很难。我大概讲解一下如何写作。

<b>== 理解 signal ==</b>

写过 vb 程序的都应该知道，vb 都是按照事件来触发执行程序的。例如你给某个窗体的 单击事件 写了代码，那么当这个窗体被单击的时候，就会执行你写的代码。

在 irssi 也是类似，不过他的不是事件，是 signal 。你所要做的就是针对不同的 signal 写不同代码即可。

irssi 的 signal 在这个 <a href="http://irssi.org/documentation/signals" target="_blank" rel="external">文档</a> 里面都写的很全了，此外安装 irssi 的时候也会安装 irssi 的一些文档，里面也有 signal 的相关文档。

<b>== 一个简单脚本 ==</b>

脚本头部要包含一些脚本的信息，例如下面。

<pre class="prettyprint lang-perl">
use vars qw($VERSION %IRSSI);
use Irssi;

$VERSION = '1.00';
%IRSSI = (
    authors     => 'wd',
    contact     => 'wd#wdicc.com',
    name        => 'My first Script',
    description => 'This script notify ' .
                   'you when recive msg.',
    license     => 'Public Domain',
);

sub recive_msg{
    my ($server, $msg, $nick, $address, $target) = @_;
    #do nothing 

}

Irssi::signal_add_first('message public',  'recive_msg');</pre>

最下面那行就是截获 irssi 的 signal 了。“message public”这个 signal 是在 irssi 接收到 public message 的时候产生，上面的脚本截获这个 signal 之后，执行后面的 revice_msg 函数 。查一下上面的 signal 文档可以找到下面的内容。

 "message public", SERVER_REC, char *msg, char *nick, char *address, char *target

这表示 irssi 在产生 message public 这个 signal 之后，还会同时传递后面的那些信息。上面那个脚本里面，这些信息都传递给了 recive_msg 函数。这样 recive_msg 函数的第一行就是设置一些变量来接收这些信息。

这就是一个简单的 signal 的处理过程，当然，上面的这个脚本在截获 signal 之后其实什么都没有做。那么怎么让脚本和 irssi 交互呢？

<b>== 和 irssi 交互 ==</b>

按照上面的例子，可以用 $server->command() 或者 $server->print() 来和 irssi 交互。

$server->command 可以在 irssi 里面执行一个 irssi 命令。例如

 $server->command("msg wd hi");

这样相当于在 irssi 里面输入 "/msg wd hi" 这个命令。其他命令类推一下。

$server->print 可以在 irssi 里面打印一些信息，这些信息别人是看不到的，这些信息类似于 irssi 给你的消息。例如

 $server->print("$server","a test msg");

这些信息会在1号窗口（这个不一定，看连接了几个server）里面显示。

有了 print 就可以在 irssi 里面测试 recive_msg 函数接收的信息都是什么意义了。试试看下面的命令

 $server->print("$server","$nick send you a msg : $msg");

<b>== 设置一些选项 ==</b>

可以为脚本设置一些选项，这样也可以让脚本适合更多人使用。

 Irssi::settings_add_str("wd","test","just for test");
 Irssi::settings_add_bool('blah', 'blah_color', 1);;

上面这两行设置了两个变量，一个是字符串 test，初始值为 "just for test"，另一个是布尔变量 blah_color ，初始值是1。第一个参数是设置将变量显示在哪个段，用 /set 命令查看的时候会看到。

使用下面的命令可以获取设置。

 $a = Irssi::settings_get_str("test");
 $b = Irssi::settings_get_bool('blah_color');

这样按照上面的设置， $a 的值就是 "just for test" ， $b 的值就是 1。当然，用户如果用 /set 命令来设置了这些参数，那么取回的信息就不一定是这些了。

<b>== 参考资料 ==</b>

<a href="http://juerd.nl/site.plp/irssiscripttut" target="_blank" rel="external">Scripting Irssi</a>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/irssi-script-howto/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/21/" class="prev">Prev</a>
    
    
        <a href="/page/23/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
