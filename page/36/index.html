<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="undefined"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        

    
        <script id="dsq-count-scr" src="//wdicc.disqus.com/count.js" async></script>
    



  <article class="post">
	<h2 class="title">
		<a href="use-rsa-and-dsa/">使用ssh的rsa和dsa验证登陆linux</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-23T16:00:00.000Z" itemprop="datePublished">Apr 24, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/ssh/">ssh</a>
</div>
    </div>
      
        参考地址：http://www.5ilinux.com/ssh01.html

按照文档中的方法，使用SecureCRT生成公匙密匙，然后上传公匙，没问题。

用putty使用这个密匙的时候就出问题了，验证不了。

然后用putty生成公匙密匙，上传公匙，验证不了。

后来用openssh自带的ssh-keygen生成了公匙密匙，然后用putty的keygen转换了一下，用putty登陆就可以了。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/use-rsa-and-dsa/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="limite-ssh-access-ip/">限制ssh访问的ip</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-23T16:00:00.000Z" itemprop="datePublished">Apr 24, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/ssh/">ssh</a>
</div>
    </div>
      
        ★ 需求

最近公司服务器上面某个用户的帐号密码被修改了好几次。查看了一下，确实有人用他的帐号从外网ip（国外的ip）登陆过，猜想可能是他自己的电脑中木马或者什么病毒了。用户自己没有安全意识是很头痛的一个问题，其实给他们新建帐号的时候使用的都是简单密码，但是似乎都没有人上服务器自己修改，但是你又不能要求你的用户如何如何（比如给自己电脑装防火墙、杀毒软件etc），因为那是人家自己的事情。那么我就想，有没有一个方法可以限制某个用户只能从某个ip（或者ip列表）登陆呢？下面是一些解决方法。

<br>
        
          <p class="more-link">
            <a href="limite-ssh-access-ip/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/limite-ssh-access-ip/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="iptables-on-remote-server/">为远程服务器设置防火墙</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-19T16:00:00.000Z" itemprop="datePublished">Apr 20, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/iptables/">iptables</a>
</div>
    </div>
      
        如果服务器不在本地，又需要对防火墙做设置的时候，操作一定要注意，

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/iptables-on-remote-server/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="search-in-vim/">VIM查找替换归纳总结zz</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a> <a href="../tags/vim/">vim</a>
</div>
    </div>
      
        <p><a href="http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry">http://spaces.msn.com/dingy/blog/cns!2F24B9E66A542581!327.entry</a>

VIM中常用的替换模式总结。</p><p>1，简单替换表达式</p><p>替换命令可以在全文中用一个单词替换另一个单词：</p><p>:%s/four/4/g</p><br>
        
          <p class="more-link">
            <a href="search-in-vim/#more">Read More</a>
          </p>
        
      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/search-in-vim/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="man-in-debian/">debian中man不能翻页的解决方法</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-17T16:00:00.000Z" itemprop="datePublished">Apr 18, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/debian/">debian</a>
</div>
    </div>
      
        安装debian基本系统之后会发现man的时候往下翻页可以用ctrl＋F，可是怎么都翻不上去。包括方向键也都不起作用。

解决方法其实非常简单，只要安装less就可以了。呵呵。
#apt-get install less

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/man-in-debian/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="manage-route/">添加删除路由</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-16T16:00:00.000Z" itemprop="datePublished">Apr 17, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        #route add -net 192.168.0.0/24
#route add -host 192.168.0.23
#route del -net 192.168.0.0/24

#route add default gw 192.168.0.1
#route del default gw 192.168.0.1

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/manage-route/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="iptables-in-debian/">debian下面的防火墙设置</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-16T16:00:00.000Z" itemprop="datePublished">Apr 17, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/debian/">debian</a>
</div>
    </div>
      
        <p>rh下面的防火墙设置是保存在/etc/sysconfig/iptables文件中的，这样每次重启都会恢复防火墙设置。

debian木有这个文件，但是他提供了更加灵活的方式。
<a href="http://www.debian.org/doc/manuals/securing-debian-howto/ch-sec-services.en.html#s-firewall-setup" target="_blank" rel="external">http://www.debian.org/doc/manuals/securing-debian-howto/ch-sec-services.en.html#s-firewall-setup</a>

看了下，似乎比较简单的就是设置interfaces文件了。

5.14.3.3 Configuring firewall rules through ifup
You can use also the network configuration in /etc/network/interfaces to setup your firewall rules. For this you will need to: </p><p>Create your firewalling ruleset for when the interface is active. 
Save your ruleset with iptables-save to a file in /etc, for example /etc/iptables.up.rules 
Configure etc/network/interfaces to use the configured ruleset: 
 &nbsp; &nbsp; iface eth0 inet static
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; address x.x.x.x
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; [.. interface configuration ..]
 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; pre-up iptables-restore &lt; /etc/iptables.up.rules
You can optionally also setup a set of rules to be applied when the network interface is down creating a set of rules, saving it in /etc/iptables.down.rules and adding this directive to the interface configuration: </p><p> &nbsp; &nbsp; &nbsp; &nbsp; post-down iptables-restore &lt; /etc/iptables.down.rules
For more advanced firewall configuration scripts through ifupdown you can use the hooks available to each interface as in the *.d/ directories called with run-parts (see run-parts(8)). </p><p>可以去<a href="http://easyfwgen.morizot.net/gen/" target="_blank" rel="external">http://easyfwgen.morizot.net/gen/</a> 在线生成一个防火墙脚本，然后pre-up指定一下。</p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/iptables-in-debian/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="affray-in-subway/">今天坐地铁遇到两起吵架</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-05T16:00:00.000Z" itemprop="datePublished">Apr 6, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/heart/">heart</a>
</div>
    </div>
      
        地铁实在是恐怖，人挤人都要被挤死的时候，地铁广播还在说请大家不要拥挤，实在是有点搞笑了。

今天到了五颗松，上来两个人，突然就吵起来了，一个男的一个女的，都得有40多了吧。那个女的说那个男的不是男人，那个男的说我不是又怎么了，那个女的似乎很郁闷，呵呵。起因好像是上车的时候，两个人相互推挤了一下。

到了复兴门，我上车后看见过来一堆人，推推搡搡的，那个年纪大点的一直要扑着过去打那个年纪轻的，有个女的一直拉着，呵呵。

以前地铁可能也就上下班时间人多，现在的地铁是啥时候人都多，没有办法，这是最快捷的交通方式了。不知道新的地铁线开通之后能不能缓解一下，不过可能也难，像一些换其他线比较方便的线路，肯定人会更多。

bless北京的交通。。。

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/affray-in-subway/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="about-nagios/">nagios，监控多组服务器的利器</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-04-02T16:00:00.000Z" itemprop="datePublished">Apr 3, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/other/">other</a>
</div>
    </div>
      
        面试的时候被有时会被问道的问题就是，如果让你去管理100台服务器，你打算怎么做？

老实说偶只弄过1台服务器，没事上去看看，还是可以的，100台，一台看一眼那就是多长时间啊。1台的时候可以用logwatch每天生成一份日志，每天看一眼日志。或者每天看看awstatus分析后的web日志。可是100台的时候基本不适用了，每天早上看100封mail会疯掉的，况且这个还不实时。。。

听xh介绍之后，看了一下nagios，才知道有人早就想到这些问题了。其实我之前遇到第一个人问我的时候就应该去了解一下的。

nagios是通过nagios进程管理下，定时运行某些检测程序，然后通过web方式来显示检测结果的，比如说ping、pop3、smtp、http，还有switch、router等等，甚至本机登陆用户、运行进程、磁盘空间等，还可以设置服务器的主从关系，比如哪个http服务器是位于某个router下面等，这样提示的时候会一并告诉你（这个还没有测试，不过是看到配置文件有这项设置）。

nagios的安装和配置 <a href="http://www.totkat.org/pages/nagios.shtml" target="_blank" rel="external">http://www.totkat.org/pages/nagios.shtml</a>

类似nagios的还有cacti，这个似乎是用来检测本机的，本机的磁盘空间、流量、负载等，还没有弄太清楚。

Splunk是个商业的日志分析软件，运行于Unix环境，可以支持任何服务器产生的日志，并对日志进行高效索引，以便管理员可以对日志中的各种情况进行搜索，并可以通过图形化方式表现，虽然是商业软件，但是它提供了可以自由使用的splunk server，只是如果需要更多的LiveSplunks，Splunk Sync等功能才需要购买授权。

下面这个地址是Nagios和Splunk的联合使用介绍<p> <a href="http://www.nagios.org/products/enterprisesolutions/splunk/" target="_blank" class="liexternal">http://www.nagios.org/products/enterprisesolutions/splunk/</a></p>

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/about-nagios/#disqus_thread">Comments</a></span>
	
</div>
</article>

  <article class="post">
	<h2 class="title">
		<a href="qmail-queue/">Qmail邮件队列工作原理zz</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: <time datetime="2006-03-29T16:00:00.000Z" itemprop="datePublished">Mar 30, 2006</time>
</div>
      <div class="tags">Tags: 

<a href="../tags/Mail/">Mail</a>
</div>
    </div>
      
        http://www.gbunix.com/htmldata/2005_06/15/25/article_1223_1.html

以下是qmail的数据流简图

 qmail-smtpd --- &gt;&gt;qmail-queue ---&gt;&gt; qmail-send &lt;&lt;--- qmail-rspawn &lt;&lt;--- qmail-remote
 &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; / &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp; | 
 &nbsp; &nbsp; &nbsp; qmail-inject _/ qmail-clean \_ qmail-lspawn &lt;&lt;--- qmail-local

 &nbsp; &nbsp;qmail中，每一条消息都发送到中央队列等待发送，由qmail-queue进程控制。它在以下情况被调用：
 &nbsp; &nbsp;1、当产生本地消息时，qmail-inject进程调用qmail-queue。
 &nbsp; &nbsp;2、qmail-smtpd准备SMTP协议下的投递邮件任务时调用它。
 &nbsp; &nbsp;3、向前（forwarded）发送邮件时，qmail－local调用它。
 &nbsp; &nbsp;4、退回邮件时，qmail－send调用它。

 &nbsp; &nbsp;每封邮件接着由qmail-lspawn 和qmail-rspawn协助qmail－sned进程完成投递，最后由qmail－clean清除邮件队列。这四个进程是系统由始至终都在运行的，十分重要。

由smtpd从域外接受邮件之后，会交给queue处理（也就是2），之后转到qmal-send，然后看是域内还是域外，域内用qmail-lspawn，域外用qmail-rspawn。域内邮件调用qmail-local处理，如果遇到.qmail文件转发邮件（也就是上面的3），还会交给queue处理，如果没有，就直接投递给用户（？）。域外邮件调用qmail-remote处理，如果对方拒收邮件，他就会产生一个新的邮件（bounce），交给qmail-send，然后交给queue（也就是4？）。

本地用户发送mail的时候调用qmail-inject，然后交给queue（也就是1）。

有几个问题。
1&nbsp; 收到域外邮件之后，判断本机是否有这个用户后才接受邮件呢，还是先接受进来放到queue里等qmail-local处理的时候再说？

2&nbsp; qmail-clean这个程序是怎么工作的？实时扫描queue的文件夹？

      
	</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/qmail-queue/#disqus_thread">Comments</a></span>
	
</div>
</article>


  <nav id="pagenavi">
    
        <a href="/page/35/" class="prev">Prev</a>
    
    
        <a href="/page/37/" class="next">Next</a>
    
  <div class="center"><a href="/archives/index.html">Blog Archives</a></div>
  </nav>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
