<!doctype html><html lang=en><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://wdicc.com/favicon.ico><title>A* Search Algorithm | wd and cc</title><meta name=title content="A* Search Algorithm"><meta name=description content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 A 星寻路算法。

先贴几个文章：

简单的讲解的文章例如 https://www.jianshu.com/p/65282bd32391
这个详细一点的 https://blog.csdn.net/DinnerHowe/article/details/79380317

我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看这里。"><meta name=keywords content="algorithm,A*,"><meta property="og:url" content="https://wdicc.com/a-star-search-algorithm/"><meta property="og:site_name" content="wd and cc"><meta property="og:title" content="A* Search Algorithm"><meta property="og:description" content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 A 星寻路算法。
先贴几个文章：
简单的讲解的文章例如 https://www.jianshu.com/p/65282bd32391 这个详细一点的 https://blog.csdn.net/DinnerHowe/article/details/79380317 我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看这里。"><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2018-11-24T14:48:04+08:00"><meta property="article:modified_time" content="2018-11-24T14:48:04+08:00"><meta property="article:tag" content="Algorithm"><meta property="article:tag" content="A*"><meta name=twitter:card content="summary"><meta name=twitter:title content="A* Search Algorithm"><meta name=twitter:description content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 A 星寻路算法。
先贴几个文章：
简单的讲解的文章例如 https://www.jianshu.com/p/65282bd32391 这个详细一点的 https://blog.csdn.net/DinnerHowe/article/details/79380317 我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看这里。"><meta itemprop=name content="A* Search Algorithm"><meta itemprop=description content="前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 A 星寻路算法。
先贴几个文章：
简单的讲解的文章例如 https://www.jianshu.com/p/65282bd32391 这个详细一点的 https://blog.csdn.net/DinnerHowe/article/details/79380317 我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看这里。"><meta itemprop=datePublished content="2018-11-24T14:48:04+08:00"><meta itemprop=dateModified content="2018-11-24T14:48:04+08:00"><meta itemprop=wordCount content="907"><meta itemprop=keywords content="Algorithm,A*"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#01242e;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#000;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>wd and cc</h2></a><p>-- Good good study, day day up!</p><nav><a href=/>Home</a>
<a href=/posts/>Posts</a>
<a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&amp;q=">Search</a>
<a href=/tags/>Tags</a>
<a href=/atom.xml>subscribe</a></nav></header><main><h1>A* Search Algorithm</h1><p><i><time datetime=2018-11-24>24 Nov, 2018
</time></i><a href=https://wdicc.com/tags/algorithm/>#Algorithm</a>
<a href=https://wdicc.com/tags/a/>#A*</a></p><content><p>前段时间我们设想了一个需求，想帮助用户规划一下从 A -> B 的航线。对于路径规划从来没弄过，研究了一下，基本都在提这个 <a href=https://en.wikipedia.org/wiki/A*_search_algorithm>A 星寻路算法</a>。</p><p>先贴几个文章：</p><ol><li>简单的讲解的文章例如 <a href=https://www.jianshu.com/p/65282bd32391>https://www.jianshu.com/p/65282bd32391</a></li><li>这个详细一点的 <a href=https://blog.csdn.net/DinnerHowe/article/details/79380317>https://blog.csdn.net/DinnerHowe/article/details/79380317</a></li></ol><p>我写了一个简单的程序，这个程序没有做过任何的优化，只能说是解释了这个算法的逻辑而已，在终端里面可以可视化的把计算过程显示出来。效果可以看<a href=https://gist.github.com/wd/69469977bf76d9091ca01714eae08f37>这里</a>。</p><div class="src src-python"><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  1</span><span><span style=color:#60a0b0;font-style:italic>#!/usr/bin/python</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  2</span><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>sys</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  3</span><span><span style=color:#007020;font-weight:700>import</span> <span style=color:#0e84b5;font-weight:700>random</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  4</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  5</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  6</span><span>RED <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#4070a0;font-weight:700>\033</span><span style=color:#4070a0>[31m&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  7</span><span>GREEN <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#4070a0;font-weight:700>\033</span><span style=color:#4070a0>[32m&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  8</span><span>GRAY <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#4070a0;font-weight:700>\033</span><span style=color:#4070a0>[35m&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">  9</span><span>NC <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#4070a0;font-weight:700>\033</span><span style=color:#4070a0>[0m&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 10</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 11</span><span><span style=color:#007020;font-weight:700>class</span> <span style=color:#0e84b5;font-weight:700>Point</span>(<span style=color:#007020>object</span>):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 12</span><span>    x <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 13</span><span>    y <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 14</span><span>    close <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 15</span><span>    <span style=color:#007020>open</span> <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 16</span><span>    start <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 17</span><span>    end <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 18</span><span>    wall <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 19</span><span>    H <span style=color:#666>=</span> <span style=color:#40a070>99</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 20</span><span>    G <span style=color:#666>=</span> <span style=color:#40a070>99</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 21</span><span>    parent <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>None</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 22</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 23</span><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>__init__</span>(<span style=color:#007020>self</span>, <span style=color:#666>**</span>kwargs):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 24</span><span>        <span style=color:#007020;font-weight:700>if</span> <span style=color:#4070a0>&#39;x&#39;</span> <span style=color:#007020;font-weight:700>in</span> kwargs:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 25</span><span>            <span style=color:#007020>self</span><span style=color:#666>.</span>x <span style=color:#666>=</span> kwargs[<span style=color:#4070a0>&#39;x&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 26</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 27</span><span>        <span style=color:#007020;font-weight:700>if</span> <span style=color:#4070a0>&#39;y&#39;</span> <span style=color:#007020;font-weight:700>in</span> kwargs:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 28</span><span>            <span style=color:#007020>self</span><span style=color:#666>.</span>y <span style=color:#666>=</span> kwargs[<span style=color:#4070a0>&#39;y&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 29</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 30</span><span>        <span style=color:#007020>self</span><span style=color:#666>.</span>key <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>-</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(<span style=color:#007020>self</span><span style=color:#666>.</span>x, <span style=color:#007020>self</span><span style=color:#666>.</span>y)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 31</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 32</span><span>    <span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>__str__</span>(<span style=color:#007020>self</span>):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 33</span><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>,H</span><span style=color:#70a0d0>{:2}</span><span style=color:#4070a0>,G</span><span style=color:#70a0d0>{:2}</span><span style=color:#4070a0>,F</span><span style=color:#70a0d0>{:2}</span><span style=color:#4070a0>,P</span><span style=color:#70a0d0>{:3}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 34</span><span>                <span style=color:#007020>self</span><span style=color:#666>.</span>key,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 35</span><span>                <span style=color:#007020>self</span><span style=color:#666>.</span>H <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>self</span><span style=color:#666>.</span>H <span style=color:#666>!=</span> <span style=color:#40a070>99</span> <span style=color:#007020;font-weight:700>else</span> <span style=color:#4070a0>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 36</span><span>                <span style=color:#007020>self</span><span style=color:#666>.</span>G <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>self</span><span style=color:#666>.</span>G <span style=color:#666>!=</span> <span style=color:#40a070>99</span> <span style=color:#007020;font-weight:700>else</span> <span style=color:#4070a0>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 37</span><span>                <span style=color:#007020>self</span><span style=color:#666>.</span>G <span style=color:#666>+</span> <span style=color:#007020>self</span><span style=color:#666>.</span>H <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>self</span><span style=color:#666>.</span>G <span style=color:#666>!=</span> <span style=color:#40a070>99</span> <span style=color:#007020;font-weight:700>else</span> <span style=color:#4070a0>&#39;&#39;</span>,
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 38</span><span>                <span style=color:#007020>self</span><span style=color:#666>.</span>parent<span style=color:#666>.</span>key <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>self</span><span style=color:#666>.</span>parent <span style=color:#007020;font-weight:700>else</span> <span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 39</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 40</span><span>    <span style=color:#007020;font-weight:700>def</span>  <span style=color:#06287e>__lt__</span>(<span style=color:#007020>self</span>, other):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 41</span><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020>self</span><span style=color:#666>.</span>x <span style=color:#666>&lt;</span> other<span style=color:#666>.</span>x <span style=color:#007020;font-weight:700>if</span> <span style=color:#007020>self</span><span style=color:#666>.</span>y <span style=color:#666>==</span> other<span style=color:#666>.</span>y <span style=color:#007020;font-weight:700>else</span> <span style=color:#007020>self</span><span style=color:#666>.</span>y <span style=color:#666>&lt;</span> other<span style=color:#666>.</span>y
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 42</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 43</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 44</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>get_area</span>(width, height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 45</span><span>    area <span style=color:#666>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 46</span><span>    <span style=color:#007020;font-weight:700>for</span> i <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(width):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 47</span><span>        <span style=color:#007020;font-weight:700>for</span> j <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>range</span>(height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 48</span><span>            point <span style=color:#666>=</span> Point(x<span style=color:#666>=</span>i, y<span style=color:#666>=</span>j)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 49</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 50</span><span>            area[point<span style=color:#666>.</span>key] <span style=color:#666>=</span> point
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 51</span><span>    <span style=color:#007020;font-weight:700>return</span> area
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 52</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 53</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>show_result</span>(area_hash):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 54</span><span>    prev_y <span style=color:#666>=</span> <span style=color:#666>-</span><span style=color:#40a070>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 55</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 56</span><span>    <span style=color:#007020;font-weight:700>for</span> point <span style=color:#007020;font-weight:700>in</span> <span style=color:#007020>sorted</span>(area_hash<span style=color:#666>.</span>values()):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 57</span><span>        <span style=color:#007020;font-weight:700>if</span> ( prev_y <span style=color:#666>!=</span> point<span style=color:#666>.</span>y ):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 58</span><span>            <span style=color:#007020;font-weight:700>if</span> (prev_y <span style=color:#666>!=</span> <span style=color:#666>-</span><span style=color:#40a070>1</span>):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 59</span><span>                <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 60</span><span>            prev_y <span style=color:#666>=</span> point<span style=color:#666>.</span>y
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 61</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 62</span><span>        <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>start:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 63</span><span>            <span style=color:#007020>format</span> <span style=color:#666>=</span> RED <span style=color:#666>+</span> <span style=color:#4070a0>&#39;S&#39;</span> <span style=color:#666>+</span> NC
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 64</span><span>        <span style=color:#007020;font-weight:700>elif</span> point<span style=color:#666>.</span>end:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 65</span><span>            <span style=color:#007020>format</span> <span style=color:#666>=</span> RED <span style=color:#666>+</span> <span style=color:#4070a0>&#39;E&#39;</span> <span style=color:#666>+</span> NC
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 66</span><span>        <span style=color:#007020;font-weight:700>elif</span> point<span style=color:#666>.</span>wall:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 67</span><span>            <span style=color:#007020>format</span> <span style=color:#666>=</span> GRAY <span style=color:#666>+</span> <span style=color:#4070a0>&#39;W&#39;</span> <span style=color:#666>+</span> NC
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 68</span><span>        <span style=color:#007020;font-weight:700>elif</span> point<span style=color:#666>.</span>close:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 69</span><span>            <span style=color:#007020>format</span> <span style=color:#666>=</span> GREEN <span style=color:#666>+</span> <span style=color:#4070a0>&#39;0&#39;</span> <span style=color:#666>+</span> NC
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 70</span><span>        <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 71</span><span>            <span style=color:#007020>format</span> <span style=color:#666>=</span> <span style=color:#4070a0>&#39; &#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 72</span><span>        <span style=color:#007020>print</span>((<span style=color:#007020>format</span> <span style=color:#666>+</span> <span style=color:#4070a0>&#39;(</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>)  &#39;</span>)<span style=color:#666>.</span>format(point), end<span style=color:#666>=</span><span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 73</span><span>    <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 74</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 75</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>set_preset</span>(area, start, end, wall):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 76</span><span>    area[start]<span style=color:#666>.</span>start <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 77</span><span>    area[end]<span style=color:#666>.</span>end <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 78</span><span>    <span style=color:#007020;font-weight:700>for</span> key <span style=color:#007020;font-weight:700>in</span> wall:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 79</span><span>        area[key]<span style=color:#666>.</span>wall <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 80</span><span>    <span style=color:#007020;font-weight:700>return</span> area
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 81</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 82</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>is_valid_point</span>(point, width, height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 83</span><span>    <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>wall <span style=color:#007020;font-weight:700>or</span> point<span style=color:#666>.</span>close:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 84</span><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 85</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 86</span><span>    <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>x <span style=color:#666>&lt;</span> <span style=color:#40a070>0</span> <span style=color:#007020;font-weight:700>or</span> point<span style=color:#666>.</span>x <span style=color:#666>&gt;</span> width:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 87</span><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 88</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 89</span><span>    <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>y <span style=color:#666>&lt;</span> <span style=color:#40a070>0</span> <span style=color:#007020;font-weight:700>or</span> point<span style=color:#666>.</span>y <span style=color:#666>&gt;</span> height:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 90</span><span>        <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020;font-weight:700>False</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 91</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 92</span><span>    <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020;font-weight:700>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 93</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 94</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>get_around</span>(area, point, width, height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 95</span><span>    n <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>-</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(point<span style=color:#666>.</span>x, point<span style=color:#666>.</span>y <span style=color:#666>-</span> <span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 96</span><span>    s <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>-</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(point<span style=color:#666>.</span>x, point<span style=color:#666>.</span>y <span style=color:#666>+</span> <span style=color:#40a070>1</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 97</span><span>    l <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>-</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(point<span style=color:#666>.</span>x <span style=color:#666>-</span> <span style=color:#40a070>1</span>, point<span style=color:#666>.</span>y)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 98</span><span>    r <span style=color:#666>=</span> <span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>-</span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(point<span style=color:#666>.</span>x <span style=color:#666>+</span> <span style=color:#40a070>1</span>, point<span style=color:#666>.</span>y)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 99</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">100</span><span>    res <span style=color:#666>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">101</span><span>    <span style=color:#007020;font-weight:700>for</span> key <span style=color:#007020;font-weight:700>in</span> [n, s, l, r]:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">102</span><span>        <span style=color:#007020;font-weight:700>if</span> key <span style=color:#007020;font-weight:700>in</span> area <span style=color:#007020;font-weight:700>and</span> is_valid_point(area[key], width, height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">103</span><span>            area[key]<span style=color:#666>.</span>parent <span style=color:#666>=</span> point
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">104</span><span>            area[key]<span style=color:#666>.</span>G <span style=color:#666>=</span> area[key]<span style=color:#666>.</span>G <span style=color:#007020;font-weight:700>if</span> area[key]<span style=color:#666>.</span>G <span style=color:#666>!=</span> <span style=color:#40a070>99</span> <span style=color:#007020;font-weight:700>else</span> (point<span style=color:#666>.</span>G <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>G <span style=color:#666>!=</span> <span style=color:#40a070>99</span> <span style=color:#007020;font-weight:700>else</span> <span style=color:#40a070>0</span>) <span style=color:#666>+</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">105</span><span>            res[key] <span style=color:#666>=</span> area[key]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">106</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">107</span><span>    <span style=color:#007020;font-weight:700>return</span> res
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">108</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">109</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>get_H</span>(point, end_point):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">110</span><span>    <span style=color:#007020;font-weight:700>return</span> <span style=color:#007020>abs</span>(point<span style=color:#666>.</span>x <span style=color:#666>-</span> end_point<span style=color:#666>.</span>x) <span style=color:#666>+</span> <span style=color:#007020>abs</span>(point<span style=color:#666>.</span>y <span style=color:#666>-</span> end_point<span style=color:#666>.</span>y)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">111</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">112</span><span>step <span style=color:#666>=</span> <span style=color:#40a070>0</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">113</span><span>opened <span style=color:#666>=</span> {}
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">114</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">115</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>go</span>(area, start, end, width, height):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">116</span><span>    <span style=color:#007020;font-weight:700>global</span> step, opened
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">117</span><span>    start_point <span style=color:#666>=</span> area[start]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">118</span><span>    end_point<span style=color:#666>=</span> area[end]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">119</span><span>    start_point<span style=color:#666>.</span>close <span style=color:#666>=</span> <span style=color:#007020;font-weight:700>True</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">120</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">121</span><span>    <span style=color:#007020;font-weight:700>if</span> start_point<span style=color:#666>.</span>key <span style=color:#007020;font-weight:700>in</span> opened:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">122</span><span>        <span style=color:#007020;font-weight:700>del</span> opened[start_point<span style=color:#666>.</span>key]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">123</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">124</span><span>    points <span style=color:#666>=</span> get_around(area, start_point, width, height)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">125</span><span>    opened<span style=color:#666>.</span>update(points)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">126</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">127</span><span>    rnd <span style=color:#666>=</span> random<span style=color:#666>.</span>choice(<span style=color:#007020>list</span>(opened))
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">128</span><span>    next_point <span style=color:#666>=</span> area[rnd]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">129</span><span>    <span style=color:#007020;font-weight:700>for</span> key, point <span style=color:#007020;font-weight:700>in</span> opened<span style=color:#666>.</span>items():
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">130</span><span>        point<span style=color:#666>.</span>H <span style=color:#666>=</span> get_H(point, end_point)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">131</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">132</span><span>        <span style=color:#007020;font-weight:700>if</span> point<span style=color:#666>.</span>H <span style=color:#666>+</span> point<span style=color:#666>.</span>G <span style=color:#666>&lt;=</span> next_point<span style=color:#666>.</span>H <span style=color:#666>+</span> next_point<span style=color:#666>.</span>G:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">133</span><span>            next_point <span style=color:#666>=</span> point
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">134</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">135</span><span>    <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;step </span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>: </span><span style=color:#70a0d0>{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(step, next_point))
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">136</span><span>    step <span style=color:#666>+=</span> <span style=color:#40a070>1</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">137</span><span>    <span style=color:#007020;font-weight:700>if</span> step <span style=color:#666>&gt;=</span> <span style=color:#40a070>3</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">138</span><span>        <span style=color:#007020;font-weight:700>pass</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">139</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">140</span><span>    <span style=color:#007020;font-weight:700>if</span> next_point <span style=color:#007020;font-weight:700>and</span> next_point<span style=color:#666>.</span>key <span style=color:#666>!=</span> end:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">141</span><span>        go(area, next_point<span style=color:#666>.</span>key, end, width, height)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">142</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">143</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>get_result</span>(area, start, end):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">144</span><span>    <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}{}{}</span><span style=color:#4070a0> &lt;- &#39;</span><span style=color:#666>.</span>format(RED, area[end]<span style=color:#666>.</span>key, NC), end<span style=color:#666>=</span><span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">145</span><span>    parent <span style=color:#666>=</span> area[end]<span style=color:#666>.</span>parent
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">146</span><span>    <span style=color:#007020;font-weight:700>if</span>(parent<span style=color:#666>.</span>key <span style=color:#666>!=</span> start):
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">147</span><span>        get_result(area, start, parent<span style=color:#666>.</span>key)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">148</span><span>    <span style=color:#007020;font-weight:700>else</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">149</span><span>        <span style=color:#007020>print</span>(<span style=color:#4070a0>&#39;</span><span style=color:#70a0d0>{}{}{}</span><span style=color:#4070a0>&#39;</span><span style=color:#666>.</span>format(RED, area[start]<span style=color:#666>.</span>key, NC), end<span style=color:#666>=</span><span style=color:#4070a0>&#39;&#39;</span>)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">150</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">151</span><span><span style=color:#007020;font-weight:700>def</span> <span style=color:#06287e>main</span>():
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">152</span><span>    width <span style=color:#666>=</span> <span style=color:#40a070>10</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">153</span><span>    height <span style=color:#666>=</span> <span style=color:#40a070>10</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">154</span><span>    start <span style=color:#666>=</span> <span style=color:#4070a0>&#39;1-3&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">155</span><span>    end <span style=color:#666>=</span> <span style=color:#4070a0>&#39;8-4&#39;</span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">156</span><span>    wall <span style=color:#666>=</span> [<span style=color:#4070a0>&#39;2-2&#39;</span>, <span style=color:#4070a0>&#39;3-2&#39;</span>, <span style=color:#4070a0>&#39;3-3&#39;</span>, <span style=color:#4070a0>&#39;3-4&#39;</span>, <span style=color:#4070a0>&#39;3-5&#39;</span>, <span style=color:#4070a0>&#39;3-6&#39;</span>, <span style=color:#4070a0>&#39;5-4&#39;</span>, <span style=color:#4070a0>&#39;2-6&#39;</span>, <span style=color:#4070a0>&#39;1-6&#39;</span>]
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">157</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">158</span><span>    area <span style=color:#666>=</span> get_area(width, height)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">159</span><span>    area <span style=color:#666>=</span> set_preset(area, start, end, wall)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">160</span><span>    go(area, start, end, width,  height)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">161</span><span>    show_result(area)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">162</span><span>    get_result(area, start, end)
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">163</span><span>
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">164</span><span><span style=color:#007020;font-weight:700>if</span> <span style=color:#bb60d5>__name__</span> <span style=color:#666>==</span> <span style=color:#4070a0>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">165</span><span>    main()</span></span></code></pre></div></div><p>这个算法通过调整 G 和 H 的计算逻辑，可以平衡寻路速度和路径是否最短。另外，对于 open 列表的维护，也可以使用一些适合自己的数据结构来得到比较快速的查找。上面第二个帖子里面比较详细的列了一些改进算法的思路。</p></content><div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//wdicc.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>