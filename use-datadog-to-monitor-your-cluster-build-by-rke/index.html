<!doctype html><html lang=zh-cn><head><link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous><link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Use Datadog to Monitor Your Cluster Build by Rke | wd and cc</title><link rel=canonical href=https://wdicc.com/use-datadog-to-monitor-your-cluster-build-by-rke/><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="all,follow"><meta name=googlebot content="index,follow,snippet,archive"><meta property="og:title" content="Use Datadog to Monitor Your Cluster Build by Rke"><meta property="og:description" content="There are many tools you can choose when you want to build your kubernetes cluster, we use Rancher Kubernetes Engine (RKE) to build our kubernetes cluster.
We run datadog as daemonset in our cluster, and datadog has auto discovery feature to discovery pods/containers need to check. When we deployed a redis database, datadog will notice that and run checks against the redis pods, we didn't need to do any configurations."><meta property="og:type" content="article"><meta property="og:url" content="https://wdicc.com/use-datadog-to-monitor-your-cluster-build-by-rke/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-27T15:47:33+08:00"><meta property="article:modified_time" content="2020-07-27T15:47:33+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Use Datadog to Monitor Your Cluster Build by Rke"><meta name=twitter:description content="There are many tools you can choose when you want to build your kubernetes cluster, we use Rancher Kubernetes Engine (RKE) to build our kubernetes cluster.
We run datadog as daemonset in our cluster, and datadog has auto discovery feature to discovery pods/containers need to check. When we deployed a redis database, datadog will notice that and run checks against the redis pods, we didn't need to do any configurations."><link rel=stylesheet href=https://wdicc.com/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q=="><link rel=stylesheet href=https://wdicc.com/wdicc.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]--><link rel=icon type=image/png href=https://wdicc.com/favicon.ico></head><body class="max-width mx-auto px3 ltr"><div class="content index py4"><div id=header-post><a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick='$("html, body").animate({scrollTop:0},"fast")' style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu><span id=nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li><li><a href=/atom.xml>Subscribe</a></li></ul></span><br><span id=actions><ul><li><a class=icon href=https://wdicc.com/use-certbot-docker-to-manage-certs/ aria-label=Previous><i class="fas fa-chevron-left" aria-hidden=true onmouseover='$("#i-prev").toggle()' onmouseout='$("#i-prev").toggle()'></i></a></li><li><a class=icon href=https://wdicc.com/use-ansible-synchronize-module-to-sync-files-include-templates/ aria-label=Next><i class="fas fa-chevron-right" aria-hidden=true onmouseover='$("#i-next").toggle()' onmouseout='$("#i-next").toggle()'></i></a></li><li><a class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up" aria-hidden=true onmouseover='$("#i-top").toggle()' onmouseout='$("#i-top").toggle()'></i></a></li><li><a class=icon href=# aria-label=Share><i class="fas fa-share-alt" aria-hidden=true onmouseover='$("#i-share").toggle()' onmouseout='$("#i-share").toggle()' onclick='return $("#share").toggle(),!1'></i></a></li></ul><span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span></span><br><div id=share style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f" aria-label=Facebook><i class="fab fa-facebook" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&text=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Twitter><i class="fab fa-twitter" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Linkedin><i class="fab fa-linkedin" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&is_video=false&description=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Pinterest><i class="fab fa-pinterest" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke&body=Check out this article: https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f" aria-label=Email><i class="fas fa-envelope" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Pocket><i class="fab fa-get-pocket" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=reddit><i class="fab fa-reddit" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&name=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke&description=There%20are%20many%20tools%20you%20can%20choose%20when%20you%20want%20to%20build%20your%20kubernetes%20cluster%2c%20we%20use%20Rancher%20Kubernetes%20Engine%20%28RKE%29%20to%20build%20our%20kubernetes%20cluster.%0aWe%20run%20datadog%20as%20daemonset%20in%20our%20cluster%2c%20and%20datadog%20has%20auto%20discovery%20feature%20to%20discovery%20pods%2fcontainers%20need%20to%20check.%20When%20we%20deployed%20a%20redis%20database%2c%20datadog%20will%20notice%20that%20and%20run%20checks%20against%20the%20redis%20pods%2c%20we%20didn%26%2339%3bt%20need%20to%20do%20any%20configurations." aria-label=Tumblr><i class="fab fa-tumblr" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&t=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label="Hacker News"><i class="fab fa-hacker-news" aria-hidden=true></i></a></li></ul></div></span></div><article class=post itemscope itemtype=http://schema.org/BlogPosting><header><h1 class=posttitle itemprop="name headline">Use Datadog to Monitor Your Cluster Build by Rke</h1><div class=meta><span class=author itemprop=author itemscope itemtype=http://schema.org/Person><span itemprop=name>wd</span></span><div class=postdate><time datetime="2020-07-27 15:47:33 +0800 +0800" itemprop=datePublished>2020-07-27</time></div><div class=article-tag><i class="fas fa-tag"></i>
<a class=tag-link href=/tags/rke rel=tag>rke</a>
,
<a class=tag-link href=/tags/kubernetes rel=tag>kubernetes</a>
,
<a class=tag-link href=/tags/k8s rel=tag>k8s</a>
,
<a class=tag-link href=/tags/datadog rel=tag>datadog</a></div></div></header><div id=toc></div><div class=content itemprop=articleBody><p>There are many tools you can choose when you want to build your kubernetes cluster, we use Rancher Kubernetes Engine (RKE) to build our kubernetes cluster.</p><p>We run datadog as daemonset in our cluster, and datadog has auto discovery feature to discovery pods/containers need to check. When we deployed a redis database, datadog will notice that and run checks against the redis pods, we didn't need to do any configurations.</p><p>Datadog auto discovery also supports core kubernetes components, like APIServer, KubeScheduler, KubeProxy, etc. But when you setup you cluster by using RKE, you will find the auto discovery didn't work for these components.</p><p>The auto discovery feature for these core components relies on <a href=https://docs.datadoghq.com/agent/guide/ad_identifiers/>autodiscovery container identifiers(ad_identifiers)</a>, the image name or image short name need to match the default <code class=verbatim>ad_identifiers</code> settings for these components. Unfortunately, rancher uses <code class=verbatim>rancher/hyperkube</code> to build most of the core components, they all have the same image name.</p><p>The <code class=verbatim>ad_identifiers</code> also support to set to a container label, but that will need use to rebuild the container image to add the label, it's a mission impossible too. After some tests, I found the way to run checks against these containers by use annotations.</p><p>Datadog supports us to <a href="https://docs.datadoghq.com/agent/kubernetes/integrations/?tab=kubernetes#datadog-redis-integration">use annotations</a> to notify datadog that we need to run check on some urls.</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Pod</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (...)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;&lt;POD_NAME&gt;&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/&lt;CONTAINER_IDENTIFIER&gt;.check_names</span>: <span style=color:#e6db74>&#39;[&lt;INTEGRATION_NAME&gt;]&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/&lt;CONTAINER_IDENTIFIER&gt;.init_configs</span>: <span style=color:#e6db74>&#39;[&lt;INIT_CONFIG&gt;]&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/&lt;CONTAINER_IDENTIFIER&gt;.instances</span>: <span style=color:#e6db74>&#39;[&lt;INSTANCE_CONFIG&gt;]&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># (...)</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#e6db74>&#39;&lt;CONTAINER_IDENTIFIER&gt;&#39;</span>
</span></span><span style=display:flex><span><span style=color:#75715e># (...)</span></span></span></code></pre></div></div><p>Here is an example for apache. Did you see the <code class=verbatim>"url": "http://%%host%%/website_1"</code> in the <code class=verbatim>instances</code> settings? You can imagine that what will happen if we change this url to a service exposed by kubernetes.</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Pod</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>apache</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/apache.check_names</span>: <span style=color:#e6db74>&#39;[&#34;apache&#34;,&#34;http_check&#34;]&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/apache.init_configs</span>: <span style=color:#e6db74>&#39;[{},{}]&#39;</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>ad.datadoghq.com/apache.instances</span>: |<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;apache_status_url&#34;: &#34;http://%%host%%/server-status?auto&#34;
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ],
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        [
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;name&#34;: &#34;&lt;WEBSITE_1&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;url&#34;: &#34;http://%%host%%/website_1&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;timeout&#34;: 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          },
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          {
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;name&#34;: &#34;&lt;WEBSITE_2&gt;&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;url&#34;: &#34;http://%%host%%/website_2&#34;,
</span></span></span><span style=display:flex><span><span style=color:#e6db74>            &#34;timeout&#34;: 1
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          }
</span></span></span><span style=display:flex><span><span style=color:#e6db74>        ]
</span></span></span><span style=display:flex><span><span style=color:#e6db74>      ]</span>      
</span></span><span style=display:flex><span>  <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>name</span>: <span style=color:#ae81ff>apache</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>    - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>apache</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>image</span>: <span style=color:#ae81ff>httpd</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>containerPort</span>: <span style=color:#ae81ff>80</span></span></span></code></pre></div></div><p>Actually, datadog didn't care about you container. It only cares about settings you put in the annotations. I use this <code class=verbatim>feature</code> to add checks to my RKE built cluster.</p><p>Here is an example for monitoring components runs on controlplan. Don't forget to allow your datadog daemonset run on your master nodes first. And please take notice about the <code class=verbatim>tolerations</code> and <code class=verbatim>nodeSelector</code> I added in the yaml.</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>DaemonSet</span>
</span></span><span style=display:flex><span><span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>name</span>: <span style=color:#ae81ff>controlplane-monitor</span>
</span></span><span style=display:flex><span><span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>  <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>controlplane-monitor</span>
</span></span><span style=display:flex><span>  <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>    <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>      <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>name</span>: <span style=color:#ae81ff>controlplane-monitor</span>
</span></span><span style=display:flex><span>      <span style=color:#f92672>annotations</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-scheduler.check_names</span>: <span style=color:#e6db74>&#39;[&#34;kube_scheduler&#34;]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-scheduler.init_configs</span>: <span style=color:#e6db74>&#39;[{}]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-scheduler.instances</span>: |-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          [{<span style=color:#f92672>&#34;prometheus_url&#34;: &#34;http://%%host%%:10251/metrics&#34;, &#34;leader_election&#34;: </span><span style=color:#e6db74>&#34;true&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-controller-manager.check_names</span>: <span style=color:#e6db74>&#39;[&#34;kube_controller_manager&#34;]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-controller-manager.init_configs</span>: <span style=color:#e6db74>&#39;[{}]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-controller-manager.instances</span>: |-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          [{<span style=color:#f92672>&#34;prometheus_url&#34;: &#34;http://%%host%%:10251/metrics&#34;, &#34;leader_election&#34;: </span><span style=color:#e6db74>&#34;true&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-apiserver.check_names</span>: <span style=color:#e6db74>&#39;[&#34;kube_apiserver_metrics&#34;]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-apiserver.init_configs</span>: <span style=color:#e6db74>&#39;[{}]&#39;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>ad.datadoghq.com/kube-apiserver.instances</span>: |-<span style=color:#e6db74>
</span></span></span><span style=display:flex><span><span style=color:#e6db74>          </span>          [{<span style=color:#f92672>&#34;prometheus_url&#34;: </span><span style=color:#e6db74>&#34;https://%%host%%:6443/metrics&#34;</span>, <span style=color:#e6db74>&#34;tls_ca_cert&#34;</span>:<span style=color:#e6db74>&#34;/etc/kubernetes/ssl/kube-ca.pem&#34;</span>}]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>        <span style=color:#f92672>hostNetwork</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>nodeSelector</span>:
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;node-role.kubernetes.io/controlplane&#34;: </span><span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>tolerations</span>:
</span></span><span style=display:flex><span>          - <span style=color:#f92672>key</span>: <span style=color:#e6db74>&#34;node-role.kubernetes.io/controlplane&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>value</span>: <span style=color:#e6db74>&#34;true&#34;</span>
</span></span><span style=display:flex><span>            <span style=color:#f92672>effect</span>: <span style=color:#e6db74>&#34;NoSchedule&#34;</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>restartPolicy</span>: <span style=color:#ae81ff>Always</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>terminationGracePeriodSeconds</span>: <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>        <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>        - <span style=color:#f92672>image</span>: <span style=color:#ae81ff>busybox</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>command</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>sleep</span>
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>infinity</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>name</span>: <span style=color:#ae81ff>kube-scheduler</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>image</span>: <span style=color:#ae81ff>busybox</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>command</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>sleep</span>
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>infinity</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>name</span>: <span style=color:#ae81ff>kube-controller-manager</span>
</span></span><span style=display:flex><span>        - <span style=color:#f92672>image</span>: <span style=color:#ae81ff>busybox</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>command</span>:
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>sleep</span>
</span></span><span style=display:flex><span>            - <span style=color:#ae81ff>infinity</span>
</span></span><span style=display:flex><span>          <span style=color:#f92672>name</span>: <span style=color:#ae81ff>kube-apiserver</span></span></span></code></pre></div></div></div></article><div id=footer-post-container><div id=footer-post><div id=nav-footer style=display:none><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li><li><a href=/atom.xml>Subscribe</a></li></ul></div><div id=share-footer style=display:none><ul><li><a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f" aria-label=Facebook><i class="fab fa-facebook fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&text=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Twitter><i class="fab fa-twitter fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Linkedin><i class="fab fa-linkedin fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&is_video=false&description=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Pinterest><i class="fab fa-pinterest fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="mailto:?subject=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke&body=Check out this article: https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f" aria-label=Email><i class="fas fa-envelope fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=Pocket><i class="fab fa-get-pocket fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&title=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label=reddit><i class="fab fa-reddit fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&name=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke&description=There%20are%20many%20tools%20you%20can%20choose%20when%20you%20want%20to%20build%20your%20kubernetes%20cluster%2c%20we%20use%20Rancher%20Kubernetes%20Engine%20%28RKE%29%20to%20build%20our%20kubernetes%20cluster.%0aWe%20run%20datadog%20as%20daemonset%20in%20our%20cluster%2c%20and%20datadog%20has%20auto%20discovery%20feature%20to%20discovery%20pods%2fcontainers%20need%20to%20check.%20When%20we%20deployed%20a%20redis%20database%2c%20datadog%20will%20notice%20that%20and%20run%20checks%20against%20the%20redis%20pods%2c%20we%20didn%26%2339%3bt%20need%20to%20do%20any%20configurations." aria-label=Tumblr><i class="fab fa-tumblr fa-lg" aria-hidden=true></i></a></li><li><a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwdicc.com%2fuse-datadog-to-monitor-your-cluster-build-by-rke%2f&t=Use%20Datadog%20to%20Monitor%20Your%20Cluster%20Build%20by%20Rke" aria-label="Hacker News"><i class="fab fa-hacker-news fa-lg" aria-hidden=true></i></a></li></ul></div><div id=actions-footer><a id=menu-toggle class=icon href=# onclick='return $("#nav-footer").toggle(),!1' aria-label=Menu><i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick='return $("#share-footer").toggle(),!1' aria-label=Share><i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick='$("html, body").animate({scrollTop:0},"fast")' aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a></div></div></div><footer id=footer><div class=footer-left>Copyright &copy; 2022 wd and cc</div><div class=footer-right><nav><ul><li><a href=/>Home</a></li><li><a href=/posts>Posts</a></li><li><a href=/tags>Tags</a></li><li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li><li><a href=/atom.xml>Subscribe</a></li></ul></nav></div></footer></div></body><link rel=stylesheet href=/lib/font-awesome/css/all.min.css><script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script></html>