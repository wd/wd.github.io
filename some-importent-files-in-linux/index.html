<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
    
	<title>涉及到linux系统安全的几个文件 - wd and cc</title>
    <meta name="author" content="wd">
    
	<meta name="description" content="&lt;p&gt;部分内容转自&lt;a href=&quot;http://man.chinaunix.net/linux/debian/debian_learning/index.html&quot; target=&quot;_blank&quot;&gt;这里&lt;/a&gt;&lt;/p&gt; &lt;p&gt;&lt;strong&gt;1 cron.allow,cron.deny&lt;/strong&gt;&lt;/p&gt; &lt;blockquote&gt; &lt;p&gt;If the cron.allow file exists, then you must be listed therein in order to  be  allowed  to  use  this  command.   If  the  cron.allow  file  does  not  exist but the cron.deny file does exist, then you must not be listed in the cron.deny file in order to use this command.  If neither of these files exists, only the super user will be allowed to use this command.&lt;/p&gt;&lt;/blockquote&gt; &lt;p&gt;上面是引用 man crontab 里面的一段解释。如果 cron.allow 存在，那里面的用户可以使用crontab命令。如果cron.allow 不存在，而 cron.deny 存在，那么列在里面的用户不可以使用crontab命令。如果都不存在，那么只允许super用户来使用这个命令。 &lt;/p&gt;&lt;p&gt;安装rh的时候，默认就会存在一个 cron.deny 的空文件，所以普通用户也可以使用crontab。 &lt;/p&gt;&lt;p&gt;&lt;strong&gt;2 at.allow,at.deny&lt;/strong&gt; &lt;blockquote&gt; &lt;p&gt;The  superuser  may  use  these  commands  in  any case.  For other users, permission to use at is determined by the files&lt;br&gt;/etc/at.allow and /etc/at.deny. &lt;/p&gt; &lt;p&gt;If the file /etc/at.allow exists, only usernames mentioned in it are allowed to use at. &lt;/p&gt; &lt;p&gt;If /etc/at.allow does not exist, /etc/at.deny is checked, every username not mentioned in it is then allowed to use at.  &lt;/p&gt;&lt;p&gt;If neither exists, only the superuser is allowed use of at.  &lt;/p&gt;&lt;p&gt;An empty /etc/at.deny means that every user is allowed use these commands, this is the default configuration.&lt;/p&gt;&lt;/blockquote&gt; &lt;/p&gt;&lt;p&gt;这个其实和上面那个是类似的。默认也是有个空的 at.deny 文件，允许所有用户使用at。 &lt;/p&gt;&lt;p&gt;&lt;strong&gt;3 /etc/security/access.conf&lt;/strong&gt; &lt;blockquote&gt; &lt;p&gt;# Login access control table.&lt;br&gt;# &lt;br&gt;# When someone logs in, the table is scanned for the first entry that&lt;br&gt;# matches the (user, host) combination, or, in case of non-networked&lt;br&gt;# logins, the first entry that matches the (user, tty) combination.  The&lt;br&gt;# permissions field of that table entry determines whether the login will &lt;br&gt;# be accepted or refused.&lt;/p&gt;&lt;/blockquote&gt; &lt;/p&gt;&lt;p&gt;login 权限控制表。可以控制允许登陆的ip，登陆的tty等信息。 &lt;blockquote&gt; &lt;p&gt;# Disallow console logins to all but a few accounts.&lt;br&gt;#&lt;br&gt;#-:ALL EXCEPT wheel shutdown sync:LOCAL&lt;/p&gt;&lt;/blockquote&gt; &lt;/p&gt;&lt;p&gt;比如可以设置只允许某些用户从本地登陆。建议设置root用户不能从本地登陆。 &lt;/p&gt;&lt;p&gt;&lt;strong&gt;4 /etc/securetty&lt;/strong&gt; &lt;/p&gt;&lt;p&gt;该文件可控制根用户登录的设备，该文件里记录的是可以作为根用户登录的设备名，如tty1、tty2等。用户是不能从不存在于该文件里的设备登录为根用户的。这种情况用户只能以普通用户登录进来，再用su命令转为根用户。/etc/securetty文件的格式如下：&lt;pre&gt;# /etc/securetty: list of terminals on which root is allowed to login.
# See securetty(5) and login(1).
console

# for people with serial port consoles
ttyS0

# for devfs
tts/0

# Standard consoles
tty1
tty2
tty3
...
&lt;/pre&gt;
&lt;/p&gt;&lt;p&gt;如果/etc/securetty是一个空文件，则根用户就不能从任务的设备登录系统。只能以普通用户登录，再用su命令转成根用户。如果/etc/securetty文件不存在，那么根用户可以从任何地方登录。这样会引发安全问题，所以/etc/securetty文件在系统中是一定要存在的。
&lt;/p&gt;&lt;p&gt;&lt;strong&gt;5  /etc/login.defs&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;login.defs是设置用户帐号限制的文件，在这里我们可配置密码的最大过期天数，密码的最大长度约束等内容。该文件里的配置对root用户无效。如果/etc/shadow文件里有相同的选项，则以/etc/shadow里的设置为准，也就是说/etc/shadow的配置优先级高于 /etc/login.defs。下面内容是该文件的节选：&lt;pre&gt;...
#
# Password aging controls:
#
#       PASS_MAX_DAYS   Maximum number of days a password may be used.
#       PASS_MIN_DAYS   Minimum number of days allowed between password change.
#       PASS_WARN_AGE   Number of days warning given before a password expires.
#
PASS_MAX_DAYS 99999
PASS_MIN_DAYS 0
PASS_WARN_AGE 7
...
#
# Number of significant characters in the password for crypt().
# Default is 8, don&#39;t change unless your crypt() is better.
# If using MD5 in your PAM configuration, set this higher.
#
PASS_MAX_LEN            8
...
&lt;/pre&gt;
&lt;/p&gt;&lt;p&gt;&lt;strong&gt;6 /etc/pam.d/su&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;通过pam来限制su命令的使用。比如可以设置哪些组，哪些用户才能使用。&lt;/p&gt;
&lt;p&gt;#auth       sufficient   /lib/security/$ISA/pam_wheel.so trust use_uid&lt;br&gt;# Uncomment the following line to require a user to be in the &quot;wheel&quot; group.&lt;br&gt;auth       required     /lib/security/$ISA/pam_wheel.so group=admin&lt;/p&gt;
"> <!-- TODO: truncate -->
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="atom.xml" rel="alternate" title="wd and cc" type="application/atom+xml">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/custom.css" media="screen, projection" rel="stylesheet" type="text/css">
    <link href="/stylesheets/hljs.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='//fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='//fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![}]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <!-- <script src="/javascripts/ajaxify.js"></script> -->

    

    

</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<h1 class="animated bounceInDown">
    <div id="headerbg">
        wd and cc
    </div>
</h1>
<span class="subtitle">happy everyday</span>
<br>

<ul id="social-links" style="text-align:center; clear:both;">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/wd" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/wd" class="twitter" title="Twitter"></a>
  </li>
  
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload -->
    <div id="content" class="inner">
        <article class="post">
	<h2 class="title">涉及到linux系统安全的几个文件</h2>
	<div class="entry-content"><p>部分内容转自<a href="http://man.chinaunix.net/linux/debian/debian_learning/index.html" target="_blank">这里</a></p> <p><strong>1 cron.allow,cron.deny</strong></p> <blockquote> <p>If the cron.allow file exists, then you must be listed therein in order to  be  allowed  to  use  this  command.   If  the  cron.allow  file  does  not  exist but the cron.deny file does exist, then you must not be listed in the cron.deny file in order to use this command.  If neither of these files exists, only the super user will be allowed to use this command.</p></blockquote> <p>上面是引用 man crontab 里面的一段解释。如果 cron.allow 存在，那里面的用户可以使用crontab命令。如果cron.allow 不存在，而 cron.deny 存在，那么列在里面的用户不可以使用crontab命令。如果都不存在，那么只允许super用户来使用这个命令。 </p><p>安装rh的时候，默认就会存在一个 cron.deny 的空文件，所以普通用户也可以使用crontab。 </p><p><strong>2 at.allow,at.deny</strong> <blockquote> <p>The  superuser  may  use  these  commands  in  any case.  For other users, permission to use at is determined by the files<br>/etc/at.allow and /etc/at.deny. </p> <p>If the file /etc/at.allow exists, only usernames mentioned in it are allowed to use at. </p> <p>If /etc/at.allow does not exist, /etc/at.deny is checked, every username not mentioned in it is then allowed to use at.  </p><p>If neither exists, only the superuser is allowed use of at.  </p><p>An empty /etc/at.deny means that every user is allowed use these commands, this is the default configuration.</p></blockquote> </p><p>这个其实和上面那个是类似的。默认也是有个空的 at.deny 文件，允许所有用户使用at。 </p><p><strong>3 /etc/security/access.conf</strong> <blockquote> <p># Login access control table.<br># <br># When someone logs in, the table is scanned for the first entry that<br># matches the (user, host) combination, or, in case of non-networked<br># logins, the first entry that matches the (user, tty) combination.  The<br># permissions field of that table entry determines whether the login will <br># be accepted or refused.</p></blockquote> </p><p>login 权限控制表。可以控制允许登陆的ip，登陆的tty等信息。 <blockquote> <p># Disallow console logins to all but a few accounts.<br>#<br>#-:ALL EXCEPT wheel shutdown sync:LOCAL</p></blockquote> </p><p>比如可以设置只允许某些用户从本地登陆。建议设置root用户不能从本地登陆。 </p><p><strong>4 /etc/securetty</strong> </p><p>该文件可控制根用户登录的设备，该文件里记录的是可以作为根用户登录的设备名，如tty1、tty2等。用户是不能从不存在于该文件里的设备登录为根用户的。这种情况用户只能以普通用户登录进来，再用su命令转为根用户。/etc/securetty文件的格式如下：<pre># /etc/securetty: list of terminals on which root is allowed to login.
# See securetty(5) and login(1).
console

# for people with serial port consoles
ttyS0

# for devfs
tts/0

# Standard consoles
tty1
tty2
tty3
...
</pre>
</p><p>如果/etc/securetty是一个空文件，则根用户就不能从任务的设备登录系统。只能以普通用户登录，再用su命令转成根用户。如果/etc/securetty文件不存在，那么根用户可以从任何地方登录。这样会引发安全问题，所以/etc/securetty文件在系统中是一定要存在的。
</p><p><strong>5  /etc/login.defs</strong></p>
<p>login.defs是设置用户帐号限制的文件，在这里我们可配置密码的最大过期天数，密码的最大长度约束等内容。该文件里的配置对root用户无效。如果/etc/shadow文件里有相同的选项，则以/etc/shadow里的设置为准，也就是说/etc/shadow的配置优先级高于 /etc/login.defs。下面内容是该文件的节选：<pre>...
#
# Password aging controls:
#
#       PASS_MAX_DAYS   Maximum number of days a password may be used.
#       PASS_MIN_DAYS   Minimum number of days allowed between password change.
#       PASS_WARN_AGE   Number of days warning given before a password expires.
#
PASS_MAX_DAYS 99999
PASS_MIN_DAYS 0
PASS_WARN_AGE 7
...
#
# Number of significant characters in the password for crypt().
# Default is 8, don't change unless your crypt() is better.
# If using MD5 in your PAM configuration, set this higher.
#
PASS_MAX_LEN            8
...
</pre>
</p><p><strong>6 /etc/pam.d/su</strong></p>
<p>通过pam来限制su命令的使用。比如可以设置哪些组，哪些用户才能使用。</p>
<p>#auth       sufficient   /lib/security/$ISA/pam_wheel.so trust use_uid<br># Uncomment the following line to require a user to be in the "wheel" group.<br>auth       required     /lib/security/$ISA/pam_wheel.so group=admin</p>
</div>

<div class="meta">
	
		<span class="comments"><a href="http://wdicc.com/some-importent-files-in-linux/#disqus_thread">Comments</a></span>
	
</div>
</article>

	<div class="share">
	<div class="addthis_toolbox addthis_default_style ">
	
	
	<a class="addthis_button_tweet"></a>
	
	
	<a class="addthis_counter addthis_pill_style"></a>
	</div>
  <script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=null"></script>
</div>





    
      <script type="text/javascript">
        var disqus_config = function () {
            this.page.url = 'http://wdicc.com/some-importent-files-in-linux/';
            this.page.identifier = 'http://wdicc.com/some-importent-files-in-linux/';
        };

        (function() {
          var d = document, s = d.createElement('script');
          s.src = '//wdicc.disqus.com/embed.js';
          s.setAttribute('data-timestamp', +new Date());
          (d.head || d.body).appendChild(s);
        })();
      </script>
    


<section id="comment">
    <h2 class="title">Comments</h2>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
</section>


    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2016

    wd
. Powered by <a href="http://zespia.tw/hexo/" target="_blank">Hexo</a> |
    Theme is <a href="https://github.com/wd/hexo-fabric">hexo-fabric</a>, fork from <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script>
 <!-- Delete or comment this line to disable Fancybox -->



<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
