<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,viewport-fit=cover,initial-scale=1"><title>Emacs as react native ide | wd and cc</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><header><nav><ul><li class=pull-left><a href=https://wdicc.com/>/home/wd and cc</a></li><li class=pull-left><a href=/tags/>~/tags</a></li><li class=pull-left><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">~/search</a></li><li class=pull-right><a href=/atom.xml>~/subscribe</a></li></ul></nav></header></head><body><br><div class=article-meta><h1><span class=title>Emacs as react native ide</span></h1><h2 class=date>2017/07/24</h2><p class=terms>Tags: <a href=/tags/emacs>emacs</a> <a href=/tags/react>react</a></p></div><div id=TOC><nav id=TableOfContents><ul><li><a href=#web-mode>web-mode</a></li><li><a href=#flycheck>flycheck</a></li><li><a href=#补全>补全</a></li><li><a href=#补全-update>补全 update</a></li></ul></nav></div><main><p>最近又在写 <code>react-native</code> 了，对自己的环境又作了一番配置。记录一下。</p><h2 id=web-mode>web-mode</h2><p>我主要用的 mode 是 web-mode。这个 mode 简直万能，能处理 html，jsx，js 等。具体配置如下。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>(use<span style=color:#333>-</span><span style=color:#080;font-weight:700>package</span> web<span style=color:#333>-</span>mode
  :ensure t
  :<span style=color:#06b;font-weight:700>config</span>
  (add<span style=color:#333>-</span>to<span style=color:#333>-</span>list <span style=color:red;background-color:#faa>&#39;</span>auto<span style=color:#333>-</span>mode<span style=color:#333>-</span>alist <span style=color:red;background-color:#faa>&#39;</span>(<span style=background-color:#fff0f0>&#34;\\.html\\&#39;&#34;</span> . web<span style=color:#333>-</span>mode))
  (add<span style=color:#333>-</span>to<span style=color:#333>-</span>list <span style=color:red;background-color:#faa>&#39;</span>auto<span style=color:#333>-</span>mode<span style=color:#333>-</span>alist <span style=color:red;background-color:#faa>&#39;</span>(<span style=background-color:#fff0f0>&#34;\\.js\\&#39;&#34;</span> . web<span style=color:#333>-</span>mode))
  (add<span style=color:#333>-</span>to<span style=color:#333>-</span>list <span style=color:red;background-color:#faa>&#39;</span>auto<span style=color:#333>-</span>mode<span style=color:#333>-</span>alist <span style=color:red;background-color:#faa>&#39;</span>(<span style=background-color:#fff0f0>&#34;\\.ejs\\&#39;&#34;</span> . web<span style=color:#333>-</span>mode))
  (setq web<span style=color:#333>-</span>mode<span style=color:#333>-</span>markup<span style=color:#333>-</span>indent<span style=color:#333>-</span>offset <span style=color:#00d;font-weight:700>4</span>)
  (setq web<span style=color:#333>-</span>mode<span style=color:#333>-</span>css<span style=color:#333>-</span>indent<span style=color:#333>-</span>offset <span style=color:#00d;font-weight:700>4</span>)
  (setq web<span style=color:#333>-</span>mode<span style=color:#333>-</span>code<span style=color:#333>-</span>indent<span style=color:#333>-</span>offset <span style=color:#00d;font-weight:700>4</span>)

  (setq web<span style=color:#333>-</span>mode<span style=color:#333>-</span>content<span style=color:#333>-</span>types<span style=color:#333>-</span>alist
        <span style=color:red;background-color:#faa>&#39;</span>((<span style=background-color:#fff0f0>&#34;jsx&#34;</span> . <span style=background-color:#fff0f0>&#34;.*\\.js\\&#39;&#34;</span>))
        )
)

</code></pre></td></tr></table></div></div><p>主要是那个 <code>web-mode-content-types-alist</code> 的配置，让 web-mode 处理 js 文件的时候，把 <code>&lt;></code> 代码段识别成 jsx。这样能把缩进处理好。</p><p>我还试过 rjsx-mode，这个用起来也可以，基于 js2-mdoe，js2-mode 有的一些用法都支持，并且 flycheck 都不用做多余的配置。但是主要问题是，jsx 的代码缩进有问题。</p><h2 id=flycheck>flycheck</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>(use<span style=color:#333>-</span><span style=color:#080;font-weight:700>package</span> flycheck
  :ensure t
  :<span style=color:#06b;font-weight:700>config</span>
  (global<span style=color:#333>-</span>flycheck<span style=color:#333>-</span>mode t)
  (flycheck<span style=color:#333>-</span>add<span style=color:#333>-</span>mode <span style=color:red;background-color:#faa>&#39;</span>javascript<span style=color:#333>-</span>eslint <span style=color:red;background-color:#faa>&#39;</span>web<span style=color:#333>-</span>mode)
)

</code></pre></td></tr></table></div></div><p>把 web-mode 的 checker 设置为 <code>javascript-eslint</code>，如果你用别的就设置成对应的。配合用的 .eslintrc 文件如下，可以根据自己需求调整。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>{
    &#34;parser&#34;: &#34;babel-eslint&#34;,
    &#34;env&#34;: {
        &#34;es6&#34;: true
    },
    &#34;parserOptions&#34;: {
        &#34;ecmaVersion&#34;: 6,
        &#34;sourceType&#34;: &#34;module&#34;,
        &#34;ecmaFeatures&#34;: {
            &#34;jsx&#34;: true
        }
    },
    &#34;plugins&#34;: [
        &#34;react&#34;
    ],
    &#34;globals&#34;: {
        &#34;require&#34;: false,
        &#34;module&#34;: false,
        &#34;setInterval&#34;: false,
        &#34;clearInterval&#34;: false,
        &#34;setTimeout&#34;: false,
        &#34;clearTimeout&#34;: false,
        &#34;console&#34;: false
    },
    &#34;extends&#34;: [
        &#34;eslint:recommended&#34;,
        &#34;plugin:react/recommended&#34;
    ],
    &#34;rules&#34;: {
        // overrides
        &#34;react/prop-types&#34;: 0,
        &#34;indent&#34;: [&#34;error&#34;, 4],
        &#34;react/jsx-indent&#34;: [&#34;error&#34;, 4],
        &#34;no-trailing-spaces&#34;: 2,
        &#34;no-console&#34;: 0,
        &#34;comma-dangle&#34;: [&#34;error&#34;, &#34;never&#34;]
    }
}

</code></pre></td></tr></table></div></div><h2 id=补全>补全</h2><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>(use<span style=color:#333>-</span><span style=color:#080;font-weight:700>package</span> tern
  :ensure t
  :<span style=color:#06b;font-weight:700>config</span>
  (add<span style=color:#333>-</span>hook <span style=color:red;background-color:#faa>&#39;</span>web<span style=color:#333>-</span>mode<span style=color:#333>-</span><span style=color:#06b;font-weight:700>hook</span> (<span style=color:#06b;font-weight:700>lambda</span> () (tern<span style=color:#333>-</span>mode t)))
  :<span style=color:#06b;font-weight:700>bind</span> (:<span style=color:#080;font-weight:700>map</span> tern<span style=color:#333>-</span>mode<span style=color:#333>-</span><span style=color:#06b;font-weight:700>keymap</span>
              (<span style=background-color:#fff0f0>&#34;M-*&#34;</span> . tern<span style=color:#333>-</span>pop<span style=color:#333>-</span>find<span style=color:#333>-</span>definition))
  )

(use<span style=color:#333>-</span><span style=color:#080;font-weight:700>package</span> company<span style=color:#333>-</span>tern
  :ensure t
  :<span style=color:#06b;font-weight:700>config</span>
  (add<span style=color:#333>-</span>to<span style=color:#333>-</span>list <span style=color:red;background-color:#faa>&#39;</span>company<span style=color:#333>-</span>backends <span style=color:red;background-color:#faa>&#39;</span>company<span style=color:#333>-</span>tern)
  )

</code></pre></td></tr></table></div></div><p>我用的是 company 后端用的是 tern。.tern-project 的内容如下，可以根据自己的情况调整下。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>{
  &#34;ecmaVersion&#34;: 6,
  &#34;libs&#34;: [
    &#34;browser&#34;
  ],
  &#34;loadEagerly&#34;: [
    &#34;Controller/*.js&#34;,
    &#34;Utility/*.js&#34;,
    &#34;App.js&#34;
  ],
  &#34;dontLoad&#34;: [
    &#34;node_modules/**&#34;
  ],
  &#34;plugins&#34;: {
    &#34;node&#34;: {},
    &#34;es_modules&#34;: {},
    &#34;jsx&#34;: {}
  }
}

</code></pre></td></tr></table></div></div><h2 id=补全-update>补全 update</h2><p>tern 这个东西用了一段时间，发现不是很好用。经常找不到 symbol，以及在 jsx 代码里面无法跳转。后来发现了 <a href=https://github.com/ananthakumaran/tide>tide</a>，简直好用到不行。</p><p>tide 是基于 vscode 用的 tsserver 来搞的。这个开始是给 TypeScript 用的，目前也支持普通 js。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-go data-lang=go>(defun setup<span style=color:#333>-</span>tide<span style=color:#333>-</span><span style=color:#06b;font-weight:700>mode</span> ()
  (interactive)
  ;; (setq tide<span style=color:#333>-</span>tsserver<span style=color:#333>-</span>process<span style=color:#333>-</span>environment <span style=color:red;background-color:#faa>&#39;</span>(<span style=background-color:#fff0f0>&#34;TSS_LOG=-level verbose -file /tmp/tss.log&#34;</span>))
  (tide<span style=color:#333>-</span>setup)
  ;;(setq flycheck<span style=color:#333>-</span>check<span style=color:#333>-</span>syntax<span style=color:#333>-</span>automatically <span style=color:red;background-color:#faa>&#39;</span>(save mode<span style=color:#333>-</span>enabled))
  (eldoc<span style=color:#333>-</span>mode <span style=color:#333>+</span><span style=color:#00d;font-weight:700>1</span>)
  (tide<span style=color:#333>-</span>hl<span style=color:#333>-</span>identifier<span style=color:#333>-</span>mode <span style=color:#333>+</span><span style=color:#00d;font-weight:700>1</span>)
  ;; company is an optional dependency. You have to
  ;; install it separately via <span style=color:#080;font-weight:700>package</span><span style=color:#333>-</span>install
  ;; <span style=background-color:#fff0f0>`M-x package-install [ret] company`</span>
  )


(use<span style=color:#333>-</span><span style=color:#080;font-weight:700>package</span> tide
  :ensure t
  :<span style=color:#06b;font-weight:700>bind</span> ((<span style=background-color:#fff0f0>&#34;M-.&#34;</span> . tide<span style=color:#333>-</span>jump<span style=color:#333>-</span>to<span style=color:#333>-</span>definition)
         (<span style=background-color:#fff0f0>&#34;M-,&#34;</span> . tide<span style=color:#333>-</span>jump<span style=color:#333>-</span>back)
         )

  :<span style=color:#06b;font-weight:700>config</span>
  (setup<span style=color:#333>-</span>tide<span style=color:#333>-</span>mode)
  ;; aligns annotation to the right hand <span style=color:#06b;font-weight:700>side</span>
  (setq company<span style=color:#333>-</span>tooltip<span style=color:#333>-</span>align<span style=color:#333>-</span>annotations t)

  ;; formats the buffer before saving
  ;;(add<span style=color:#333>-</span>hook <span style=color:red;background-color:#faa>&#39;</span>before<span style=color:#333>-</span>save<span style=color:#333>-</span>hook <span style=color:red;background-color:#faa>&#39;</span>tide<span style=color:#333>-</span>format<span style=color:#333>-</span>before<span style=color:#333>-</span>save)

  ;; configure javascript<span style=color:#333>-</span>tide checker to run after your <span style=color:#080;font-weight:700>default</span> javascript <span style=color:#06b;font-weight:700>checker</span>
  (flycheck<span style=color:#333>-</span>add<span style=color:#333>-</span>next<span style=color:#333>-</span>checker <span style=color:red;background-color:#faa>&#39;</span>javascript<span style=color:#333>-</span>eslint <span style=color:red;background-color:#faa>&#39;</span>javascript<span style=color:#333>-</span>tide <span style=color:red;background-color:#faa>&#39;</span>append)

  (add<span style=color:#333>-</span>hook <span style=color:red;background-color:#faa>&#39;</span>web<span style=color:#333>-</span>mode<span style=color:#333>-</span><span style=color:#06b;font-weight:700>hook</span>
            (<span style=color:#06b;font-weight:700>lambda</span> ()
              (<span style=color:#06b;font-weight:700>when</span> (<span style=color:#339;font-weight:700>string</span><span style=color:#333>-</span>equal <span style=background-color:#fff0f0>&#34;js&#34;</span> (file<span style=color:#333>-</span>name<span style=color:#333>-</span>extension buffer<span style=color:#333>-</span>file<span style=color:#333>-</span>name))
                (setup<span style=color:#333>-</span>tide<span style=color:#333>-</span>mode))))
  ;; configure jsx<span style=color:#333>-</span>tide checker to run after your <span style=color:#080;font-weight:700>default</span> jsx <span style=color:#06b;font-weight:700>checker</span>
  (flycheck<span style=color:#333>-</span>add<span style=color:#333>-</span>mode <span style=color:red;background-color:#faa>&#39;</span>javascript<span style=color:#333>-</span>eslint <span style=color:red;background-color:#faa>&#39;</span>web<span style=color:#333>-</span>mode)
  (flycheck<span style=color:#333>-</span>add<span style=color:#333>-</span>next<span style=color:#333>-</span>checker <span style=color:red;background-color:#faa>&#39;</span>javascript<span style=color:#333>-</span>eslint <span style=color:red;background-color:#faa>&#39;</span>jsx<span style=color:#333>-</span>tide <span style=color:red;background-color:#faa>&#39;</span>append)
  )


;; 针对 web<span style=color:#333>-</span>mode 做一个配置
    (add<span style=color:#333>-</span>hook <span style=color:red;background-color:#faa>&#39;</span>web<span style=color:#333>-</span>mode<span style=color:#333>-</span><span style=color:#06b;font-weight:700>hook</span>
            (<span style=color:#06b;font-weight:700>lambda</span> ()
              (<span style=color:#06b;font-weight:700>set</span> (make<span style=color:#333>-</span>local<span style=color:#333>-</span>variable <span style=color:red;background-color:#faa>&#39;</span>company<span style=color:#333>-</span>backends)
                   <span style=color:red;background-color:#faa>&#39;</span>(
                      company<span style=color:#333>-</span>tide
                      ;company<span style=color:#333>-</span>react
                      company<span style=color:#333>-</span>dabbrev<span style=color:#333>-</span>code
                      company<span style=color:#333>-</span>keywords
                      company<span style=color:#333>-</span>files
                      company<span style=color:#333>-</span>yasnippet))))
</code></pre></td></tr></table></div></div><p>其实我也没做啥配置，就是官方的那几个就可以。然后还有一个 jsconfig.json 的配置文件如下。</p><div class=highlight><div style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>{
    &#34;compilerOptions&#34;: {
        &#34;allowJs&#34;: true,
        &#34;allowSyntheticDefaultImports&#34;: true
    },
    &#34;exclude&#34;: [
        &#34;node_modules&#34;,
        &#34;ios&#34;,
        &#34;android&#34;,
        &#34;.git&#34;
    ]
}
</code></pre></td></tr></table></div></div><p>这就支持了好多功能，比如光标停留在一个 keyword 上面就会高亮相关的，比如 company 的补全啥的，都很不错。还支持 refactor。</p></main><section id=comment><h2 class=title>Comments</h2><div id=disqus_thread aria-live=polite><noscript>Please enable JavaScript to view the <a href=//disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript></div></section><script type=text/javascript>var disqus_config=function(){this.page.url='';this.page.identifier='';};(function(){var d=document,s=d.createElement('script');s.src='//wdicc.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><footer style=clear:both><hr>Theme from <a href=https://github.com/wd/hugo-classic>hugo-classic</a> fork from <a href=https://github.com/goodroot/hugo-classic>Github</a></footer></body></html>