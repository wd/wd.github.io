<!doctype html><html lang=en><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://wdicc.com/favicon.ico><title>Use Ansible Synchronize Module to Sync Files Include Templates | wd and cc</title><meta name=title content="Use Ansible Synchronize Module to Sync Files Include Templates"><meta name=description content='Inspired by this post, I finally find the way to sync a directory include template files to remote.

Put you files in {{ role_path }}/files/, if you need to put in another directory, please replace all the role_path variable.

 1- name: "Create temporary directory"
 2  local_action: tempfile state=directory
 3  register: temp_file_path
 4
 5- name: "Find j2 files"
 6  local_action:
 7    module: find
 8    paths: "{{ role_path }}/files/"
 9    patterns: "*.j2"
10    file_type: file
11    use_regex: no
12    recurse: yes
13  register: files_j2
14
15- name: "Find normal files"
16  local_action:
17    module: find
18    paths: "{{ role_path }}/files/"
19    excludes: "*.j2"
20    file_type: file
21    use_regex: no
22    recurse: yes
23  register: files_normal
24
25- name: "Ensure directory exists"
26  local_action:
27    module: file
28    path: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | dirname }}"
29    state: directory
30  with_items:
31    - "{{ files_j2.files }}"
32    - "{{ files_normal.files }}"
33
34- name: "Copy templates files"
35  local_action:
36    module: template
37    src: "{{ item.path }}"
38    mode: "preserve"
39    dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | regex_replace(&#39;.j2$&#39;, &#39;&#39;) }}"
40  with_items: "{{ files_j2.files }}"
41
42- name: "Copy normal  files to temp directory"
43  local_action:
44    module: template
45    src: "{{ item.path }}"
46    mode: "preserve"
47    dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) }}"
48  with_items: "{{ files_normal.files }}"
49
50- name: "Sync these to the destination"
51  synchronize:
52      src: "{{ temp_file_path.path }}/"
53      dest: "{{ config_root }}/"
54      delete: yes
55      rsync_opts:
56        - "--chown=root:root"
'><meta name=keywords content="ansible,synchronize,"><meta property="og:url" content="https://wdicc.com/use-ansible-synchronize-module-to-sync-files-include-templates/"><meta property="og:site_name" content="wd and cc"><meta property="og:title" content="Use Ansible Synchronize Module to Sync Files Include Templates"><meta property="og:description" content='Inspired by this post, I finally find the way to sync a directory include template files to remote.
Put you files in {{ role_path }}/files/, if you need to put in another directory, please replace all the role_path variable.
1- name: "Create temporary directory" 2 local_action: tempfile state=directory 3 register: temp_file_path 4 5- name: "Find j2 files" 6 local_action: 7 module: find 8 paths: "{{ role_path }}/files/" 9 patterns: "*.j2" 10 file_type: file 11 use_regex: no 12 recurse: yes 13 register: files_j2 14 15- name: "Find normal files" 16 local_action: 17 module: find 18 paths: "{{ role_path }}/files/" 19 excludes: "*.j2" 20 file_type: file 21 use_regex: no 22 recurse: yes 23 register: files_normal 24 25- name: "Ensure directory exists" 26 local_action: 27 module: file 28 path: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | dirname }}" 29 state: directory 30 with_items: 31 - "{{ files_j2.files }}" 32 - "{{ files_normal.files }}" 33 34- name: "Copy templates files" 35 local_action: 36 module: template 37 src: "{{ item.path }}" 38 mode: "preserve" 39 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | regex_replace(&#39;.j2$&#39;, &#39;&#39;) }}" 40 with_items: "{{ files_j2.files }}" 41 42- name: "Copy normal files to temp directory" 43 local_action: 44 module: template 45 src: "{{ item.path }}" 46 mode: "preserve" 47 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) }}" 48 with_items: "{{ files_normal.files }}" 49 50- name: "Sync these to the destination" 51 synchronize: 52 src: "{{ temp_file_path.path }}/" 53 dest: "{{ config_root }}/" 54 delete: yes 55 rsync_opts: 56 - "--chown=root:root"'><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-07-27T16:34:23+08:00"><meta property="article:modified_time" content="2020-07-27T16:34:23+08:00"><meta property="article:tag" content="Ansible"><meta property="article:tag" content="Synchronize"><meta name=twitter:card content="summary"><meta name=twitter:title content="Use Ansible Synchronize Module to Sync Files Include Templates"><meta name=twitter:description content='Inspired by this post, I finally find the way to sync a directory include template files to remote.
Put you files in {{ role_path }}/files/, if you need to put in another directory, please replace all the role_path variable.
1- name: "Create temporary directory" 2 local_action: tempfile state=directory 3 register: temp_file_path 4 5- name: "Find j2 files" 6 local_action: 7 module: find 8 paths: "{{ role_path }}/files/" 9 patterns: "*.j2" 10 file_type: file 11 use_regex: no 12 recurse: yes 13 register: files_j2 14 15- name: "Find normal files" 16 local_action: 17 module: find 18 paths: "{{ role_path }}/files/" 19 excludes: "*.j2" 20 file_type: file 21 use_regex: no 22 recurse: yes 23 register: files_normal 24 25- name: "Ensure directory exists" 26 local_action: 27 module: file 28 path: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | dirname }}" 29 state: directory 30 with_items: 31 - "{{ files_j2.files }}" 32 - "{{ files_normal.files }}" 33 34- name: "Copy templates files" 35 local_action: 36 module: template 37 src: "{{ item.path }}" 38 mode: "preserve" 39 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | regex_replace(&#39;.j2$&#39;, &#39;&#39;) }}" 40 with_items: "{{ files_j2.files }}" 41 42- name: "Copy normal files to temp directory" 43 local_action: 44 module: template 45 src: "{{ item.path }}" 46 mode: "preserve" 47 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) }}" 48 with_items: "{{ files_normal.files }}" 49 50- name: "Sync these to the destination" 51 synchronize: 52 src: "{{ temp_file_path.path }}/" 53 dest: "{{ config_root }}/" 54 delete: yes 55 rsync_opts: 56 - "--chown=root:root"'><meta itemprop=name content="Use Ansible Synchronize Module to Sync Files Include Templates"><meta itemprop=description content='Inspired by this post, I finally find the way to sync a directory include template files to remote.
Put you files in {{ role_path }}/files/, if you need to put in another directory, please replace all the role_path variable.
1- name: "Create temporary directory" 2 local_action: tempfile state=directory 3 register: temp_file_path 4 5- name: "Find j2 files" 6 local_action: 7 module: find 8 paths: "{{ role_path }}/files/" 9 patterns: "*.j2" 10 file_type: file 11 use_regex: no 12 recurse: yes 13 register: files_j2 14 15- name: "Find normal files" 16 local_action: 17 module: find 18 paths: "{{ role_path }}/files/" 19 excludes: "*.j2" 20 file_type: file 21 use_regex: no 22 recurse: yes 23 register: files_normal 24 25- name: "Ensure directory exists" 26 local_action: 27 module: file 28 path: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | dirname }}" 29 state: directory 30 with_items: 31 - "{{ files_j2.files }}" 32 - "{{ files_normal.files }}" 33 34- name: "Copy templates files" 35 local_action: 36 module: template 37 src: "{{ item.path }}" 38 mode: "preserve" 39 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | regex_replace(&#39;.j2$&#39;, &#39;&#39;) }}" 40 with_items: "{{ files_j2.files }}" 41 42- name: "Copy normal files to temp directory" 43 local_action: 44 module: template 45 src: "{{ item.path }}" 46 mode: "preserve" 47 dest: "{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) }}" 48 with_items: "{{ files_normal.files }}" 49 50- name: "Sync these to the destination" 51 synchronize: 52 src: "{{ temp_file_path.path }}/" 53 dest: "{{ config_root }}/" 54 delete: yes 55 rsync_opts: 56 - "--chown=root:root"'><meta itemprop=datePublished content="2020-07-27T16:34:23+08:00"><meta itemprop=dateModified content="2020-07-27T16:34:23+08:00"><meta itemprop=wordCount content="253"><meta itemprop=keywords content="Ansible,Synchronize"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#01242e;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#000;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>wd and cc</h2></a><p>-- Good good study, day day up!</p><nav><a href=/>Home</a>
<a href=/posts/>Posts</a>
<a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&amp;q=">Search</a>
<a href=/tags/>Tags</a>
<a href=/atom.xml>subscribe</a></nav></header><main><h1>Use Ansible Synchronize Module to Sync Files Include Templates</h1><p><i><time datetime=2020-07-27>27 Jul, 2020
</time></i><a href=https://wdicc.com/tags/ansible/>#Ansible</a>
<a href=https://wdicc.com/tags/synchronize/>#Synchronize</a></p><content><p>Inspired by <a href=https://stackoverflow.com/questions/51486767/use-ansible-templating-but-rysnc-to-move-files/51612544>this post</a>, I finally find the way to sync a directory include template files to remote.</p><p>Put you files in <code class=verbatim>{{ role_path }}/files/</code>, if you need to put in another directory, please replace all the <code class=verbatim>role_path</code> variable.</p><div class="src src-yaml"><div class=highlight><pre tabindex=0 style=background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Create temporary directory&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb> </span>tempfile state=directory<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>register</span>:<span style=color:#bbb> </span>temp_file_path<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Find j2 files&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>module</span>:<span style=color:#bbb> </span>find<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>paths</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ role_path }}/files/&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>patterns</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;*.j2&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>file_type</span>:<span style=color:#bbb> </span>file<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>use_regex</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>no</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>recurse</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>yes</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>register</span>:<span style=color:#bbb> </span>files_j2<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Find normal files&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>module</span>:<span style=color:#bbb> </span>find<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>paths</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ role_path }}/files/&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>excludes</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;*.j2&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>file_type</span>:<span style=color:#bbb> </span>file<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>use_regex</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>no</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>recurse</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>yes</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>register</span>:<span style=color:#bbb> </span>files_normal<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Ensure directory exists&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>module</span>:<span style=color:#bbb> </span>file<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>path</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | dirname }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>state</span>:<span style=color:#bbb> </span>directory<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>with_items</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span><span><span style=color:#bbb>    </span>- <span style=color:#4070a0>&#34;{{ files_j2.files }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span><span><span style=color:#bbb>    </span>- <span style=color:#4070a0>&#34;{{ files_normal.files }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">33</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">34</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Copy templates files&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">35</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">36</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>module</span>:<span style=color:#bbb> </span>template<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">37</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>src</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ item.path }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">38</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>mode</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;preserve&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">39</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>dest</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) | regex_replace(&#39;.j2$&#39;, &#39;&#39;) }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">40</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>with_items</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ files_j2.files }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">41</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">42</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Copy normal  files to temp directory&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">43</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>local_action</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">44</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>module</span>:<span style=color:#bbb> </span>template<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">45</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>src</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ item.path }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">46</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>mode</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;preserve&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">47</span><span><span style=color:#bbb>    </span><span style=color:#062873;font-weight:700>dest</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ item.path | replace(role_path + &#39;/files&#39;, temp_file_path.path) }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">48</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>with_items</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ files_normal.files }}&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">49</span><span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">50</span><span><span style=color:#bbb></span>- <span style=color:#062873;font-weight:700>name</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;Sync these to the destination&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">51</span><span><span style=color:#bbb>  </span><span style=color:#062873;font-weight:700>synchronize</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">52</span><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>src</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ temp_file_path.path }}/&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">53</span><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>dest</span>:<span style=color:#bbb> </span><span style=color:#4070a0>&#34;{{ config_root }}/&#34;</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">54</span><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>delete</span>:<span style=color:#bbb> </span><span style=color:#007020;font-weight:700>yes</span><span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">55</span><span><span style=color:#bbb>      </span><span style=color:#062873;font-weight:700>rsync_opts</span>:<span style=color:#bbb>
</span></span></span><span style=display:flex><span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:.4em;padding:0 .4em;color:#7f7f7f">56</span><span><span style=color:#bbb>        </span>- <span style=color:#4070a0>&#34;--chown=root:root&#34;</span></span></span></code></pre></div></div></content><div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//wdicc.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>