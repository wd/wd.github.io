<!doctype html><html lang=zh-cn>
<head>
<link rel=preload href=/lib/font-awesome/webfonts/fa-brands-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-regular-400.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/font-awesome/webfonts/fa-solid-900.woff2 as=font type=font/woff2 crossorigin=anonymous>
<link rel=preload href=/lib/JetBrainsMono/web/woff2/JetBrainsMono-Regular.woff2 as=font type=font/woff2 crossorigin=anonymous>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<title> octopress and gitcafe | wd and cc</title>
<link rel=canonical href=https://wdicc.com/octopress-and-gitcafe/>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=robots content="all,follow">
<meta name=googlebot content="index,follow,snippet,archive">
<meta property="og:title" content="octopress and gitcafe">
<meta property="og:description" content="ocotpress 支持 github，不过 github 的 pages 貌似被墙了，且速度慢。gitcafe 速度还不错，也支持 pages，刚好">
<meta property="og:type" content="article">
<meta property="og:url" content="https://wdicc.com/octopress-and-gitcafe/"><meta property="article:section" content="posts">
<meta property="article:published_time" content="2013-06-12T21:30:00+08:00">
<meta property="article:modified_time" content="2013-06-12T21:30:00+08:00">
<meta name=twitter:card content="summary">
<meta name=twitter:title content="octopress and gitcafe">
<meta name=twitter:description content="ocotpress 支持 github，不过 github 的 pages 貌似被墙了，且速度慢。gitcafe 速度还不错，也支持 pages，刚好">
<link rel=stylesheet href=https://wdicc.com/css/styles.94f653e9e151e28067a7c5dbbc4600cbd5a3c721e79faaf971e523c40f3b249b8e4f20bb57810dfffa8d559ca5c140fd56eb4cd9c0853113ad08e66afdb08bdd.css integrity="sha512-lPZT6eFR4oBnp8XbvEYAy9WjxyHnn6r5ceUjxA87JJuOTyC7V4EN//qNVZylwUD9VutM2cCFMROtCOZq/bCL3Q==">
<link rel=stylesheet href=https://wdicc.com/wdicc.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js></script>
<script src=https://oss.maxcdn.com/respond/1.4.2/respond.min.js></script><![endif]-->
<link rel=icon type=image/png href=https://wdicc.com/favicon.ico>
</head>
<body class="max-width mx-auto px3 ltr">
<div class="content index py4">
<div id=header-post>
<a id=menu-icon href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=menu-icon-tablet href=#><i class="fas fa-bars fa-lg"></i></a>
<a id=top-icon-tablet href=# onclick="$('html, body').animate({scrollTop:0},'fast')" style=display:none aria-label="Top of Page"><i class="fas fa-chevron-up fa-lg"></i></a>
<span id=menu>
<span id=nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Posts</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li>
<li><a href=/atom.xml>Subscribe</a></li>
</ul>
</span>
<br>
<span id=actions>
<ul>
<li>
<a class=icon href=https://wdicc.com/broadcom-wireless-card-on-gentoo/ aria-label=Previous>
<i class="fas fa-chevron-left" aria-hidden=true onmouseover="$('#i-prev').toggle()" onmouseout="$('#i-prev').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=https://wdicc.com/octopress-and-jeklly-1-dot-0-1/ aria-label=Next>
<i class="fas fa-chevron-right" aria-hidden=true onmouseover="$('#i-next').toggle()" onmouseout="$('#i-next').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up" aria-hidden=true onmouseover="$('#i-top').toggle()" onmouseout="$('#i-top').toggle()"></i>
</a>
</li>
<li>
<a class=icon href=# aria-label=Share>
<i class="fas fa-share-alt" aria-hidden=true onmouseover="$('#i-share').toggle()" onmouseout="$('#i-share').toggle()" onclick="return $('#share').toggle(),!1"></i>
</a>
</li>
</ul>
<span id=i-prev class=info style=display:none>Previous post</span>
<span id=i-next class=info style=display:none>Next post</span>
<span id=i-top class=info style=display:none>Back to top</span>
<span id=i-share class=info style=display:none>Share post</span>
</span>
<br>
<div id=share style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f" aria-label=Facebook>
<i class="fab fa-facebook" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&text=octopress%20and%20gitcafe" aria-label=Twitter>
<i class="fab fa-twitter" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=Linkedin>
<i class="fab fa-linkedin" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&is_video=false&description=octopress%20and%20gitcafe" aria-label=Pinterest>
<i class="fab fa-pinterest" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=octopress%20and%20gitcafe&body=Check out this article: https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f" aria-label=Email>
<i class="fas fa-envelope" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=Pocket>
<i class="fab fa-get-pocket" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=reddit>
<i class="fab fa-reddit" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&name=octopress%20and%20gitcafe&description=ocotpress%20%e6%94%af%e6%8c%81%20github%ef%bc%8c%e4%b8%8d%e8%bf%87%20github%20%e7%9a%84%20pages%20%e8%b2%8c%e4%bc%bc%e8%a2%ab%e5%a2%99%e4%ba%86%ef%bc%8c%e4%b8%94%e9%80%9f%e5%ba%a6%e6%85%a2%e3%80%82gitcafe%20%e9%80%9f%e5%ba%a6%e8%bf%98%e4%b8%8d%e9%94%99%ef%bc%8c%e4%b9%9f%e6%94%af%e6%8c%81%20pages%ef%bc%8c%e5%88%9a%e5%a5%bd" aria-label=Tumblr>
<i class="fab fa-tumblr" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&t=octopress%20and%20gitcafe" aria-label="Hacker News">
<i class="fab fa-hacker-news" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
</span>
</div>
<article class=post itemscope itemtype=http://schema.org/BlogPosting>
<header>
<h1 class=posttitle itemprop="name headline">
octopress and gitcafe
</h1>
<div class=meta>
<span class=author itemprop=author itemscope itemtype=http://schema.org/Person>
<span itemprop=name>
wd
</span>
</span>
<div class=postdate>
<time datetime="2013-06-12 21:30:00 +0800 +0800" itemprop=datePublished>2013-06-12</time>
</div>
<div class=article-tag>
<i class="fas fa-tag"></i>
<a class=tag-link href=/tags/linux rel=tag>linux</a>
</div>
</div>
</header>
<div id=toc>
<nav id=TableOfContents></nav>
</div>
<div class=content itemprop=articleBody>
<p>ocotpress 支持 github，不过 github 的 pages 貌似被墙了，且速度慢。gitcafe 速度还不错，也支持 pages，刚好可以切换过去。我只是简单粗暴的修改了几个文件。</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-diff data-lang=diff>diff --git a/.gitignore b/.gitignore
index 85ed25d..5858b25 100644
<span style=color:#f92672>--- a/.gitignore
</span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/.gitignore
</span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -12,3 +12,4 @@ source/stylesheets/screen.css
</span><span style=color:#75715e></span> vendor
 node_modules
 .themes/fabric/
<span style=color:#a6e22e>+gitcafe
</span><span style=color:#a6e22e></span>diff --git a/Rakefile b/Rakefile
index 53072e5..62061e0 100644
<span style=color:#f92672>--- a/Rakefile
</span><span style=color:#f92672></span><span style=color:#a6e22e>+++ b/Rakefile
</span><span style=color:#a6e22e></span><span style=color:#75715e>@@ -27,6 +27,9 @@ new_post_ext    = &#34;markdown&#34;  # default new post file extension when using the n
</span><span style=color:#75715e></span> new_page_ext    = &#34;markdown&#34;  # default new page file extension when using the new_page task
 server_port     = &#34;4000&#34;      # port for preview server eg. localhost:4000

<span style=color:#a6e22e>+gitcafe_dir      = &#34;gitcafe&#34;
</span><span style=color:#a6e22e>+gitcafe_branch   = &#34;gitcafe-pages&#34;
</span><span style=color:#a6e22e>+
</span><span style=color:#a6e22e></span>
 desc &#34;Initial setup for Octopress: copies the default theme into the path of Jekyll&#39;s generator. Rake install defaults to rake install[classic] to install a different them
 task :install, :theme do |t, args|
<span style=color:#75715e>@@ -219,7 +214,7 @@ end
</span><span style=color:#75715e></span> ##############

 desc &#34;Default deploy task&#34;
<span style=color:#f92672>-task :deploy do
</span><span style=color:#f92672></span><span style=color:#a6e22e>+task :deploy_old do
</span><span style=color:#a6e22e></span>   # Check if preview posts exist, which should not be published
   if File.exists?(&#34;.preview-mode&#34;)
     puts &#34;## Found posts in preview mode, regenerating files ...&#34;
<span style=color:#75715e>@@ -231,6 +226,31 @@ task :deploy do
</span><span style=color:#75715e></span>   Rake::Task[&#34;#{deploy_default}&#34;].execute
 end

<span style=color:#a6e22e>+desc &#34;deploy gitcafe&#34;
</span><span style=color:#a6e22e>+task :deploy do
</span><span style=color:#a6e22e>+  # Check if preview posts exist, which should not be published
</span><span style=color:#a6e22e>+  if File.exists?(&#34;.preview-mode&#34;)
</span><span style=color:#a6e22e>+    puts &#34;## Found posts in preview mode, regenerating files ...&#34;
</span><span style=color:#a6e22e>+    File.delete(&#34;.preview-mode&#34;)
</span><span style=color:#a6e22e>+    #Rake::Task[:generate].execute # 这个地方每次都会 generate 我一般喜欢先 generate 本地看好没问题之后再 deploy，所以就注释掉了
</span><span style=color:#a6e22e>+  end
</span><span style=color:#a6e22e>+
</span><span style=color:#a6e22e>+  puts &#34;## Deploying branch to Gitcafe Pages &#34;
</span><span style=color:#a6e22e>+  puts &#34;\n## copying #{public_dir} to #{gitcafe_dir}&#34;
</span><span style=color:#a6e22e>+  cp_r &#34;#{public_dir}/.&#34;, gitcafe_dir
</span><span style=color:#a6e22e>+  cd &#34;#{gitcafe_dir}&#34; do
</span><span style=color:#a6e22e>+    system &#34;git add .&#34;
</span><span style=color:#a6e22e>+    system &#34;git add -u&#34;
</span><span style=color:#a6e22e>+    puts &#34;\n## Commiting: Site updated at #{Time.now.utc}&#34;
</span><span style=color:#a6e22e>+    message = &#34;Site updated at #{Time.now.utc}&#34;
</span><span style=color:#a6e22e>+    system &#34;git commit -m \&#34;#{message}\&#34;&#34;
</span><span style=color:#a6e22e>+    puts &#34;\n## Pushing generated #{gitcafe_dir} website&#34;
</span><span style=color:#a6e22e>+    system &#34;git push origin #{gitcafe_branch} --force&#34;
</span><span style=color:#a6e22e>+    puts &#34;\n## Gcafe Pages deploy complete&#34;
</span><span style=color:#a6e22e>+  end
</span><span style=color:#a6e22e>+end
</span><span style=color:#a6e22e>+
</span><span style=color:#a6e22e>+
</span><span style=color:#a6e22e></span> desc &#34;Generate website and deploy&#34;
 task :gen_deploy =&gt; [:integrate, :generate, :deploy] do
 end
</code></pre></div><p>然后需要在 octopus 根目录 clone 一下你的 gitcafe 项目到 gitcafe 目录</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ git clone git@gitcafe.com:wd/wd gitcafe
....
</code></pre></div><p>然后就可以试试看 <code>rake generate</code> , <code>rake preview</code>, <code>rake deploy</code> 了。</p>
</div>
</article>
<div class=blog-post-comments>
<div id=disqus_thread>
<script type=text/javascript>(function(){var a=document.createElement('script'),b;a.type='text/javascript',a.async=!0,b='wdicc',a.src='//'+b+'.disqus.com/embed.js',(document.getElementsByTagName('head')[0]||document.getElementsByTagName('body')[0]).appendChild(a)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
<a href=https://disqus.com/ class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a>
</div>
</div>
<div id=footer-post-container>
<div id=footer-post>
<div id=nav-footer style=display:none>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Posts</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li>
<li><a href=/atom.xml>Subscribe</a></li>
</ul>
</div>
<div id=share-footer style=display:none>
<ul>
<li>
<a class=icon href="http://www.facebook.com/sharer.php?u=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f" aria-label=Facebook>
<i class="fab fa-facebook fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://twitter.com/share?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&text=octopress%20and%20gitcafe" aria-label=Twitter>
<i class="fab fa-twitter fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.linkedin.com/shareArticle?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=Linkedin>
<i class="fab fa-linkedin fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://pinterest.com/pin/create/bookmarklet/?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&is_video=false&description=octopress%20and%20gitcafe" aria-label=Pinterest>
<i class="fab fa-pinterest fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="mailto:?subject=octopress%20and%20gitcafe&body=Check out this article: https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f" aria-label=Email>
<i class="fas fa-envelope fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://getpocket.com/save?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=Pocket>
<i class="fab fa-get-pocket fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://reddit.com/submit?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&title=octopress%20and%20gitcafe" aria-label=reddit>
<i class="fab fa-reddit fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="http://www.tumblr.com/share/link?url=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&name=octopress%20and%20gitcafe&description=ocotpress%20%e6%94%af%e6%8c%81%20github%ef%bc%8c%e4%b8%8d%e8%bf%87%20github%20%e7%9a%84%20pages%20%e8%b2%8c%e4%bc%bc%e8%a2%ab%e5%a2%99%e4%ba%86%ef%bc%8c%e4%b8%94%e9%80%9f%e5%ba%a6%e6%85%a2%e3%80%82gitcafe%20%e9%80%9f%e5%ba%a6%e8%bf%98%e4%b8%8d%e9%94%99%ef%bc%8c%e4%b9%9f%e6%94%af%e6%8c%81%20pages%ef%bc%8c%e5%88%9a%e5%a5%bd" aria-label=Tumblr>
<i class="fab fa-tumblr fa-lg" aria-hidden=true></i>
</a>
</li>
<li>
<a class=icon href="https://news.ycombinator.com/submitlink?u=https%3a%2f%2fwdicc.com%2foctopress-and-gitcafe%2f&t=octopress%20and%20gitcafe" aria-label="Hacker News">
<i class="fab fa-hacker-news fa-lg" aria-hidden=true></i>
</a>
</li>
</ul>
</div>
<div id=actions-footer>
<a id=menu-toggle class=icon href=# onclick="return $('#nav-footer').toggle(),!1" aria-label=Menu>
<i class="fas fa-bars fa-lg" aria-hidden=true></i> Menu</a>
<a id=share-toggle class=icon href=# onclick="return $('#share-footer').toggle(),!1" aria-label=Share>
<i class="fas fa-share-alt fa-lg" aria-hidden=true></i> share</a>
<a id=top style=display:none class=icon href=# onclick="$('html, body').animate({scrollTop:0},'fast')" aria-label="Top of Page">
<i class="fas fa-chevron-up fa-lg" aria-hidden=true></i> Top</a>
</div>
</div>
</div>
<footer id=footer>
<div class=footer-left>
Copyright &copy; 2022 wd and cc
</div>
<div class=footer-right>
<nav>
<ul>
<li><a href=/>Home</a></li>
<li><a href=/posts>Posts</a></li>
<li><a href=/tags>Tags</a></li>
<li><a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&q=">Search</a></li>
<li><a href=/atom.xml>Subscribe</a></li>
</ul>
</nav>
</div>
</footer>
</div>
</body>
<link rel=stylesheet href=/lib/font-awesome/css/all.min.css>
<script src=/lib/jquery/jquery.min.js></script>
<script src=/js/main.js></script>
<script src=/js/code-copy.js></script>
</html>