<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Radeon on wd and cc</title>
    <link>https://wdicc.com/tags/radeon/atom/index.xml</link>
    <description>Recent content in Radeon on wd and cc</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <atom:link href="https://wdicc.com/tags/radeon/atom/index.xml" rel="self" type="application/rss+xml" />
    
    <item>
      <title>kernel 2.6.31 给 radeon 用上 kms</title>
      <link>https://wdicc.com/radeon-kms-in-kernel-2-6-31/</link>
      <pubDate>Sun, 13 Sep 2009 00:00:00 +0000</pubDate>
      
      <guid>https://wdicc.com/radeon-kms-in-kernel-2-6-31/</guid>
      <description>intel 显卡用户享受 gem 已经很久了，kernel 2.6.31 总算给 ati 卡的用户带来了福音。&lt;br /&gt;

首先得在 kernel 里面打开相关的选项&lt;br /&gt;
Generic Driver Options --&gt; Graphics support --&gt; 这下面 dri 相关的和几个 fb 相关的，看着选吧。&lt;br /&gt;
Staging drivers --&gt; 取消Exclude Staging drivers from being built --&gt; Enable modesetting on radeon by default&lt;br /&gt;

编好后重启下，然后看看 dmesg |grep -i drm 看看，有下面这行就好了。&lt;br /&gt;
[drm] Initialized radeon 2.0.0 20080528 for 0000:01:00.0 on minor 0&lt;br /&gt;

然后再看看 /var/log/Xorg.0.log ，有没有这个，这个应该表示相关的 x 软件还没有支持。&lt;br /&gt;
(EE) RADEON(0): [dri] RADEONDRIGetVersion failed because of a version mismatch.&lt;br /&gt;
[dri] radeon kernel module version is 2.0.0 but version 1.17.0 or newer is needed.&lt;br /&gt;
[dri] Disabling DRI.&lt;br /&gt;

$ glxinfo |grep -i render&lt;br /&gt;
direct rendering: Yes&lt;br /&gt;
OpenGL renderer string: Software Rasterizer&lt;br /&gt;

接下来就升级几个包的 9999 版本，这几个 ebuild 在 x11 overlay 里面有&lt;br /&gt;
# x11-drivers/xf86-video-ati-9999&lt;br /&gt;
# media-libs/mesa-9999&lt;br /&gt;
# x11-libs/libdrm-9999 &lt;br /&gt;

装好后，重启下 x ，看看上面那几个信息。/var/log/Xorg.0.log 里面应该有 KMS 相关的信息了，glxinfo 如下&lt;br /&gt;
$ glxinfo |grep -i render&lt;br /&gt;
direct rendering: Yes&lt;br /&gt;
OpenGL renderer string: Mesa DRI R300 (RV380 5460) 20090101 x86/MMX/SSE2 TCL DRI2&lt;br /&gt;


好，o 了。不过我怎么觉得窗口切换好像没那么流畅了？。。。等会看看，不行还得换回去。。。汗。。。&lt;br /&gt;
update:  找到一个 bug url , 不知道是不是一样的 http://bugs.freedesktop.org/show_bug.cgi?id=23085 不过里面说应该已经解决了才对。。xf86-video-ati 我用的也是最新版的呀&lt;br /&gt;
</description>
    </item>
    
  </channel>
</rss>