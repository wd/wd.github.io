<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Openwrt on wd and cc</title><link>https://wdicc.com/tags/openwrt/</link><description>Recent content in Openwrt on wd and cc</description><generator>Hugo</generator><language>en</language><copyright>wd © 2025</copyright><lastBuildDate>Sat, 11 Dec 2021 19:38:12 +0800</lastBuildDate><atom:link href="https://wdicc.com/tags/openwrt/atom.xml" rel="self" type="application/rss+xml"/><item><title>Add Monitor Graphs to Openwrt</title><link>https://wdicc.com/add-monitor-graphs-to-openwrt/</link><pubDate>Sat, 11 Dec 2021 19:38:12 +0800</pubDate><guid>https://wdicc.com/add-monitor-graphs-to-openwrt/</guid><description>&lt;p>
According to the docs here &lt;a href="https://openwrt.org/docs/guide-user/luci/luci_app_statistics,">https://openwrt.org/docs/guide-user/luci/luci_app_statistics,&lt;/a> OpenWrt supports us using the Collectd to collect metrics and the Rrdtool draw the graph later.&lt;/p>
&lt;div id="outline-container-headline-1" class="outline-3">
&lt;h3 id="headline-1">
Install
&lt;/h3>
&lt;div id="outline-text-headline-1" class="outline-text-3">
&lt;div class="src src-text">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>opkg update
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>opkg install luci-app-statistics&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
We can run the command &lt;code class="verbatim">opkg list | grep collectd-mod&lt;/code> to see what mertics we can collect. I have installed these modules&lt;/p>
&lt;div class="src src-text">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>collectd-mod-cpu
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-curl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-dns
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-exec
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-interface
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-iwinfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-load
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-memory
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-network
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-ping
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-rrdtool
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>collectd-mod-thermal&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
Most of the plugins work out of the box, such as the &lt;code class="verbatim">cpu&lt;/code> one. And some of them need some configurations on the UI, such as the &lt;code class="verbatim">curl&lt;/code> one. You have to tell the plugin the URL you want to monitor.&lt;/p></description></item><item><title>Iptv2</title><link>https://wdicc.com/iptv2/</link><pubDate>Thu, 10 Jan 2019 10:20:56 +0800</pubDate><guid>https://wdicc.com/iptv2/</guid><description>&lt;p>之前写过&lt;a href="https://wdicc.com/BJ-Chinaunicom-iptv/">一篇关于 iptv 的帖子&lt;/a>，里面用到了一个副路由，这样我家里其实就有两个路由器，这样用了比较长一段时间。&lt;/p>
&lt;p>
最近联通给换了一个光猫，很容易就可以 hack 进管理界面，就又折腾了一下 iptv 的事情。&lt;/p>
&lt;p>
iptv 和上网通道都是通过一根光纤进来的，通过不同的 vlan 区分数据。vlan 是二层的，收到这些数据之后如果有必要，可以通过 vlan id 来过滤出来，比如有的光猫会提供把 iptv 流量过滤到 4 口，其他上网流量过滤到光猫的其他口。我之前的猫就这样设置的，看 iptv 只能连接光猫的 4 口。如果光猫允许设置，那可以把 iptv 流量打上 tag 继续发到比如 1 口，这样 1 口就又有上网流量，又有 iptv 流量了，下一级路由就可以只通过这一条线来收两个流量了。&lt;/p></description></item><item><title>Openwrt</title><link>https://wdicc.com/openwrt/</link><pubDate>Sun, 13 May 2018 10:01:39 +0800</pubDate><guid>https://wdicc.com/openwrt/</guid><description>&lt;p>前段时间还搞了一下 openwrt 定制，记录一下。&lt;/p>
&lt;p>
openwrt 提供了很方便的方式让你可以在 x86 机器上面定制路由器固件，到 &lt;a href="https://archive.openwrt.org/">&lt;a href="https://archive.openwrt.org/">https://archive.openwrt.org/&lt;/a>&lt;/a> 下载对应的源码就可以。&lt;/p>
&lt;p>
比如我用的是这个 &lt;a href="https://archive.openwrt.org/barrier_breaker/14.07/ar71xx/generic/OpenWrt-ImageBuilder-ar71xx_generic-for-linux-x86_64.tar.bz2">https://archive.openwrt.org/barrier_breaker/14.07/ar71xx/generic/OpenWrt-ImageBuilder-ar71xx_generic-for-linux-x86_64.tar.bz2&lt;/a> ， &lt;code class="verbatim">barrier_breaker&lt;/code> 是版本， &lt;code class="verbatim">ar71xx&lt;/code> 是 cpu 架构。解压之后目录类似如下 &lt;/p>
&lt;div class="src src-text">
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>drwxr-xr-x 12 wd wd 4.0K Mar 29 17:18 .
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Mar 26 20:32 ..
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Mar 27 10:40 bin
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Oct 1 2014 build_dir
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 94K Oct 1 2014 .config
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 2 wd wd 4.0K Oct 1 2014 dl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Mar 26 20:37 include
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 5.0K Sep 21 2014 Makefile
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 570K Oct 1 2014 .packageinfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 4 wd wd 4.0K Oct 1 2014 packages
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 331 Oct 1 2014 repositories.conf
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 11K Sep 21 2014 rules.mk
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 4 wd wd 4.0K Sep 21 2014 scripts
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Oct 1 2014 staging_dir
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 3 wd wd 4.0K Oct 1 2014 target
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-rw-r--r-- 1 wd wd 128K Sep 21 2014 .targetinfo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>drwxr-xr-x 2 wd wd 4.0K Mar 27 10:40 tmp&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
编译的命令如下&lt;/p></description></item></channel></rss>