<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cacti on wd and cc</title><link>https://wdicc.com/tags/cacti/</link><description>Recent content in Cacti on wd and cc</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Thu, 28 Jun 2007 00:00:00 +0000</lastBuildDate><atom:link href="https://wdicc.com/tags/cacti/atom.xml" rel="self" type="application/rss+xml"/><item><title>稍微深入了解了一下cacti的thold插件的邮件通知</title><link>https://wdicc.com/change-trigger-setting-for-thold/</link><pubDate>Thu, 28 Jun 2007 00:00:00 +0000</pubDate><guid>https://wdicc.com/change-trigger-setting-for-thold/</guid><description>&lt;p>通过cacti的thold插件，可以做到snmp抓取到的数值低于你规定的值的时候进行邮件通知，例如我用他来监控磁盘空间，当磁盘空间低于某个数的时候就会给指定的email发邮件。但是有一点郁闷的是，有时候，可能是由于网络原因，抓取会超时，这样就会导致触发trigger，给你发送邮件。5分钟抓取一次，我这里的情况是几乎每个小时总会有2，3封这种邮件，很烦人，而且根本没意义。早就想屏蔽掉这种情况了，看了代码挺复杂就懒得弄，今天实在受不了了，深入了解了一下。&lt;/p></description></item><item><title>升级了一下cacti</title><link>https://wdicc.com/upgrade-cacti/</link><pubDate>Thu, 08 Mar 2007 00:00:00 +0000</pubDate><guid>https://wdicc.com/upgrade-cacti/</guid><description>cacti几个月前就提示我&lt;a href="http://cactiusers.org/">Architecture&lt;/a>插件有升级了，一直懒得弄。今天发现cacti也升级了，就去看了看，顺便升级了一下。记录一下升级需要注意点的东西。&lt;br />

debian 里面的cacti设置的比较好，log、rra、resource目录都是分开放的，不在cacti目录下面，做了一个链接过去。其他系统升级的时候注意要先备份这三个目录先。建议使用debian的这种方法，这样下次升级省事了。&lt;br />

然后就是很简单的，下载cacti，覆盖，修改config文件，浏览器连接，提示升级，按照步骤来就行了。然后再打上Architecture补丁，再修改config文件就行了。&lt;br /></description></item><item><title>ip_conntrack: table full</title><link>https://wdicc.com/ip_conntrack-table-full/</link><pubDate>Sat, 04 Nov 2006 00:00:00 +0000</pubDate><guid>https://wdicc.com/ip_conntrack-table-full/</guid><description>今天值班的时候发现网络不稳定，ping sina 50%以上的丢包率，ping 网关也差不多，所以服务器都开始报警了。一遍骂这个&lt;br /></description></item><item><title>还是cacti的问题</title><link>https://wdicc.com/problem-in-cacti/</link><pubDate>Sat, 04 Nov 2006 00:00:00 +0000</pubDate><guid>https://wdicc.com/problem-in-cacti/</guid><description>前面那个帖子似乎没有解决问题，查看了一下log，有些异常：&lt;br />
cactid ERROR: SNMP timeout detected [500 milliseconds]&lt;br />
搜了一下，找到一个&lt;a target="_blank" href="http://forums.cacti.net/about5487.html">文章&lt;/a>，似乎说升级就ok了，可是那个日期是2005年的，我的应该没那么老吧。不过还是上cacti的&lt;a target="_blank" href="http://cacti.net/">主页&lt;/a>看了看，看到cacti和cactid都升级了，就打算升级一下看看。debian上面怎么玩呢？cacti还好说，之前升级过一次，不需要编译，直接按照&lt;a target="_blank" href="http://www.cacti.net/downloads/docs/html/upgrade.html">文档&lt;/a>升级就好，cactid可得编译，我也不打算直接覆盖安装（其实真这么装没准还简单了），还是做一个deb包吧，一直没有体验过deb如何做，刚好机会来了。&lt;br />

搜了半天，找到一个&lt;a target="_blank" href="http://debian.linuxsir.org/doc/inthedebianway/debian_build_package.html">文档&lt;/a>，按照里面的步骤，下载了diff、dsc等文件， 解压之后修改control文件和一些depands，然后编译打包，好像没什么问题，试着装了一下，装上了，运行了一下，好像也没问题，呵呵，就这么搞定了。&lt;br />

之后按照同样的步骤搞cacti，结果安装打包的文件后，出问题了，呵呵。不过还好，东弄西弄，总算还是弄好了。按照cacti的文档手动升级了一下，也没遇到问题。不过plugin-arch也需要同时升级一下。还有poller.php和cmd.php都需要加执行权限。&lt;br />

cactid i这个版本似乎执行的时候输出没有g那么多了，很好，要不然log会搞的很大。cmd.php的输出倒是没多少内容，不过没有cactid的多线程爽亚，呵呵。执行cactid之后，会发现还有些问题:&lt;br />
Host[6] DS[46] WARNING: Result from SNMP not valid. Partial Result: ...&lt;br />

搜了一下，找到一个&lt;a href="http://forums.cacti.net/post-63188.html">文章&lt;/a>， 里面说到了问题的所在。我这里是因为一些有问题的data souce导致，比如这些本来就获取不到数据、或者之前的设备比如网卡现在没有了等等，都会导致cactid获取不到需要的数据，就会提示那个错误。按照里面提示的DS[46]，在http://your_ip/cacti/data_sources.php?action=ds_edit&amp;id=num这个链接的num那里直接输入数字就能知道是哪个ds出问题了，删掉或者更新就ok了。&lt;br /></description></item></channel></rss>