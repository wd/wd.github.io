<?xml version="1.0" encoding="utf-8" standalone="yes" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>监控 on wd and cc</title>
    <link>https://wdicc.com/tags/%E7%9B%91%E6%8E%A7/</link>
    <description>Recent content in 监控 on wd and cc</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <lastBuildDate>Sat, 05 Aug 2006 00:00:00 +0000</lastBuildDate>
    
	<atom:link href="https://wdicc.com/tags/%E7%9B%91%E6%8E%A7/atom.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Oracle数据库日常维护手册</title>
      <link>https://wdicc.com/oracle-handbook/</link>
      <pubDate>Sat, 05 Aug 2006 00:00:00 +0000</pubDate>
      
      <guid>https://wdicc.com/oracle-handbook/</guid>
      <description>Oracle数据库日常维护手册
在Oracle数据库运行期间，DBA应该对数据库的运行日志及表空间的使用情况进行监控，及早发现数据库中存在的问题。
一、Oracle警告日志文件监控 
Oracle在运行过程中，会在警告日志文件(alert_SID.log)中记录数据库的一些运行情况: 
●数据库的启动、关闭，启动时的非缺省参数; 
●数据库的重做日志切换情况，记录每次切换的时间，及如果因为检查点(checkpoint)操作没有执行完成造成不能切换，会记录不能切换的原因; 
●对数据库进行的某些操作，如创建或删除表空间、增加数据文件; 
●数据库发生的错误，如表空间不够、出现坏块、数据库内部错误(ORA-600) 
DBA应该定期检查日志文件，根据日志中发现的问题及时进行处理
问题处理
启动参数不对检查初始化参数文件
因为检查点操作或归档操作没有完成造成重做日志不能切换如果经常发生这样的情况，可以考虑增加重做日志文件组;想办法提高检查点或归档操作的效率; 
有人未经授权删除了表空间检查数据库的安全问题，是否密码太简单;如有必要，撤消某些用户的系统权限
出现坏块检查是否是硬件问题(如磁盘本生有坏块)，如果不是，检查是那个数据库对象出现了坏块，对这个对象进行重建
表空间不够增加数据文件到相应的表空间
出现ORA-600根据日志文件的内容查看相应的TRC文件，如果是Oracle的bug，要及时打上相应的补丁

二、数据库表空间使用情况监控(字典管理表空间) 
数据库运行了一段时间后，由于不断的在表空间上创建和删除对象，会在表空间上产生大量的碎片，DBA应该及时了解表空间的碎片和可用空间情况，以决定是否要对碎片进行整理或为表空间增加数据文件。
select tablespace_name, count(*) chunks , 
max(bytes/1024/1024) max_chunk 
from dba_free_space 
group by tablespace_name; 
上面的SQL列出了数据库中每个表空间的空闲块情况
其中，CHUNKS列表示表空间中有多少可用的空闲块(每个空闲块是由一些连续的Oracle数据块组成)，如果这样的空闲块过多，比如平均到每个数据文件上超过了100个，那么该表空间的碎片状况就比较严重了，可以尝试用以下的SQL命令进行表空间相邻碎片的接合: 
alter tablespace 表空间名coalesce; 
对表空间的扩充对表空间的数据文件大小进行扩展，或向表空间增加数据文件，例如：
alter database datafile ‘filename’ resize 2g;
alter tablespace add datafile ‘filename’ size 2g;
三、查看数据库的连接情况 
DBA要定时对数据库的连接情况进行检查，看与数据库建立的会话数目是不是正常，如果建立了过多的连接，会消耗数据库的资源。同时，对一些“挂死”的连接，可能会需要DBA手工进行清理。
以下的SQL语句列出当前数据库建立的会话情况: 
select sid,serial#,username,program,machine,status from v$session;</description>
    </item>
    
  </channel>
</rss>