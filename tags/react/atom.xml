<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>React on wd and cc</title><link>https://wdicc.com/tags/react/</link><description>Recent content in React on wd and cc</description><generator>Hugo</generator><language>en</language><copyright>wd © 2025</copyright><lastBuildDate>Mon, 22 Oct 2018 16:21:30 +0800</lastBuildDate><atom:link href="https://wdicc.com/tags/react/atom.xml" rel="self" type="application/rss+xml"/><item><title>Upgrade to React 16.3</title><link>https://wdicc.com/upgrade-to-react-16.3/</link><pubDate>Mon, 22 Oct 2018 16:21:30 +0800</pubDate><guid>https://wdicc.com/upgrade-to-react-16.3/</guid><description>&lt;p>随着 React native 升级，React 也升级到了 16.5 了。原来的改成新的生命周期了。&lt;/p>
&lt;div class="src src-javascript">
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-javascript" data-lang="javascript">&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1&lt;/span>&lt;span>&lt;span style="color:#007020;font-weight:bold">class&lt;/span> ExampleComponent &lt;span style="color:#007020;font-weight:bold">extends&lt;/span> React.Component {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2&lt;/span>&lt;span> &lt;span style="color:#007020;font-weight:bold">static&lt;/span> getDerivedStateFromProps(nextProps, prevState) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3&lt;/span>&lt;span> &lt;span style="color:#60a0b0;font-style:italic">// Called after a component is instantiated or before it receives new props.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Return an object to update state in response to prop changes.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Return null to indicate no change to state.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8&lt;/span>&lt;span> UNSAFE_componentWillMount() {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9&lt;/span>&lt;span> &lt;span style="color:#60a0b0;font-style:italic">// New name for componentWillMount()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Indicates that this method can be unsafe for async rendering.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Prefer componentDidMount() instead.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14&lt;/span>&lt;span> UNSAFE_componentWillUpdate(nextProps, nextState) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15&lt;/span>&lt;span> &lt;span style="color:#60a0b0;font-style:italic">// New name for componentWillUpdate()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Indicates that this method can be unsafe for async rendering.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Prefer componentDidUpdate() instead.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19&lt;/span>&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20&lt;/span>&lt;span> UNSAFE_componentWillReceiveProps(nextProps) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21&lt;/span>&lt;span> &lt;span style="color:#60a0b0;font-style:italic">// New name for componentWillReceiveProps()
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Indicates that this method can be unsafe for async rendering.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> &lt;span style="color:#60a0b0;font-style:italic">// Prefer static getDerivedStateFromProps() instead.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24&lt;/span>&lt;span>&lt;span style="color:#60a0b0;font-style:italic">&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25&lt;/span>&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
React 在后面的版本里面，这几个方法都会被加上 &lt;code class="verbatim">UNSAFE_&lt;/code> ，直到被移除。&lt;/p></description></item><item><title>React Native Deeplink</title><link>https://wdicc.com/react-native-deeplink/</link><pubDate>Mon, 03 Sep 2018 18:00:56 +0800</pubDate><guid>https://wdicc.com/react-native-deeplink/</guid><description>&lt;p>App 一般都支持类似 &lt;code class="verbatim">coolflight://list&lt;/code> 这样的链接，可以直接打开 app 并打开列表，这个就是 deeplink。&lt;/p>
&lt;p>
这个需要对 native 代码做一些修改，可以参考&lt;a href="https://reactnavigation.org/docs/en/deep-linking.html">这里&lt;/a>的修改，ios 和 android 都有写。这里有一个需要注意的是，对于 android 有一个配置是&lt;/p>
&lt;div class="src src-text">
&lt;div class="highlight">&lt;pre tabindex="0" style="background-color:#f0f0f0;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1&lt;/span>&lt;span> &amp;lt;data android:scheme=&amp;#34;mychat&amp;#34; android:host=&amp;#34;mychat&amp;#34; /&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>
&lt;/div>
&lt;p>
这个里面配置 host 的话，后面使用的时候就需要类似 &lt;code class="verbatim">mychat://mychat/list&lt;/code> 这样的方式了，就是多了一层 mychat。这样也会导致 ios 和 android 的链接不统一，我查了&lt;a href="https://developer.android.com/training/app-links/deep-linking">文档&lt;/a>也没有查到没有设置 host 会有什么问题，我就去掉了，去掉之后，ios 和 android 的链接就统一了。都是 &lt;code class="verbatim">mychat://list&lt;/code>&lt;/p></description></item><item><title>React Mobx</title><link>https://wdicc.com/react-mobx/</link><pubDate>Sun, 02 Sep 2018 19:18:16 +0800</pubDate><guid>https://wdicc.com/react-mobx/</guid><description>&lt;p>我们之前用的是 redux 来做的统一 store，最近一个新项目有同学用了 mobx，就了解了一下，刚开始看的时候，感觉比 redux 好啊？&lt;/p>
&lt;p>
mobx 的逻辑是自动收集 store 属性被哪些 dom 使用，然后在属性被改变的时候，自动更新 dom。这样的模式显然比 redux 的 action，reducer，selector 那一套简单多了。&lt;/p></description></item><item><title>React Native compnent reuse</title><link>https://wdicc.com/react-native-compnent-reuse/</link><pubDate>Sat, 24 Mar 2018 08:44:39 +0800</pubDate><guid>https://wdicc.com/react-native-compnent-reuse/</guid><description>&lt;p>做功能的时候，一般我们会适当的封装一些组件出来共享，这样好管理和维护，这个大家估计都会这么做。有时候手机上面因为屏幕小，填一些表单的时候，会需要到另外一个页面去维护选择一些内容，那这个页面是页面还是组件呢？&lt;/p></description></item><item><title>Add float debug button for react native</title><link>https://wdicc.com/add-float-debug-button-for-react-native/</link><pubDate>Sat, 02 Sep 2017 18:22:47 +0800</pubDate><guid>https://wdicc.com/add-float-debug-button-for-react-native/</guid><description>&lt;p>React-native 里面在模拟器里面可以通过快捷键打开开发菜单，在设备里面可以通过摇晃设备打开开发菜单。但是摇晃有时候并不是一个好的操作，比如是个 pad，或者比如你自己的设备本身会触发晃动动作。那么如何在开发模式下面增加一个按钮打开这个菜单呢？可惜官方对这个功能没有兴趣多做开发 &lt;a href="https://github.com/facebook/react-native/issues/10191">https://github.com/facebook/react-native/issues/10191&lt;/a> 。&lt;/p></description></item><item><title>Emacs as react native ide</title><link>https://wdicc.com/emacs-as-react-native-ide/</link><pubDate>Mon, 24 Jul 2017 20:02:00 +0800</pubDate><guid>https://wdicc.com/emacs-as-react-native-ide/</guid><description>&lt;p>最近又在写 &lt;code>react-native&lt;/code> 了，对自己的环境又作了一番配置。记录一下。&lt;/p>
&lt;h2 id="web-mode">web-mode&lt;/h2>
&lt;p>我主要用的 mode 是 web-mode。这个 mode 简直万能，能处理 html，jsx，js 等。具体配置如下。&lt;/p>
&lt;pre tabindex="0">&lt;code>(use-package web-mode
 :ensure t
 :config
 (add-to-list &amp;#39;auto-mode-alist &amp;#39;(&amp;#34;\\.html\\&amp;#39;&amp;#34; . web-mode))
 (add-to-list &amp;#39;auto-mode-alist &amp;#39;(&amp;#34;\\.js\\&amp;#39;&amp;#34; . web-mode))
 (add-to-list &amp;#39;auto-mode-alist &amp;#39;(&amp;#34;\\.ejs\\&amp;#39;&amp;#34; . web-mode))
 (setq web-mode-markup-indent-offset 4)
 (setq web-mode-css-indent-offset 4)
 (setq web-mode-code-indent-offset 4)

 (setq web-mode-content-types-alist
 &amp;#39;((&amp;#34;jsx&amp;#34; . &amp;#34;.*\\.js\\&amp;#39;&amp;#34;))
 )
)
&lt;/code>&lt;/pre>&lt;p>主要是那个 &lt;code>web-mode-content-types-alist&lt;/code> 的配置，让 web-mode 处理 js 文件的时候，把 &lt;code>&amp;lt;&amp;gt;&lt;/code> 代码段识别成 jsx。这样能把缩进处理好。&lt;/p></description></item></channel></rss>