<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Cookie on wd and cc</title><link>https://wdicc.com/tags/cookie/</link><description>Recent content in Cookie on wd and cc</description><generator>Hugo</generator><language>zh-CN</language><lastBuildDate>Fri, 16 Sep 2016 08:59:09 +0800</lastBuildDate><atom:link href="https://wdicc.com/tags/cookie/atom.xml" rel="self" type="application/rss+xml"/><item><title>cookie 的一点研究</title><link>https://wdicc.com/about-http-cookie/</link><pubDate>Fri, 16 Sep 2016 08:59:09 +0800</pubDate><guid>https://wdicc.com/about-http-cookie/</guid><description>&lt;p>这几天搞了一下 python 里面 cookie 相关的东西。我的目的是想要尝试用 python 登录某个网站，并且保持登录状态直到过期。因为 http 协议是无状态的，所以一般来讲，网站想要用户保持登录，那么网站在用户登录之后，必须要和用户端协商好怎么来证明这个用户已经登录过了。&lt;/p></description></item><item><title>使用 perl 来登录网页</title><link>https://wdicc.com/perl-cookie/</link><pubDate>Tue, 06 Jan 2009 00:00:00 +0000</pubDate><guid>https://wdicc.com/perl-cookie/</guid><description>应该不能用。。。只是为了记录&lt;br />

使用 LWP::UserAgent 可以简单的去访问网页，获取页面内容。例如&lt;br />

&lt;pre class="prettyprint lang-perl">
use LWP::UserAgent;

my $ua = LWP::UserAgent->new();
$ua->timeout(10);
$ua->agent('mozilla');

my $r = $ua->get('http::/www.google.com');
print $r->content; # or $r->decoded->content
&lt;/pre>&lt;br />

$r 的其它属性可以去 cpan 看看。这样就获取到了内容。但是，如果一个网页是需要登录的怎么办？可以用保存 cookie 的方式。&lt;br />

&lt;pre class="prettyprint lang-perl">
use LWP::UserAgent;
use HTTP::Cookies;
use Digest::MD5 qw(md5 md5_hex); # 用来生成 md5 的
use JSON; # 用来在 json 串和 perl 的 hash 串之间转换
use Data::Dumper;

my $cookie_jar = HTTP::Cookies->new(
	file => "lw.dat",
	autosave => 1
);

my $ua = LWP::UserAgent->new();
$ua->timeout(10);
$ua->agent('mozilla');

my(@rest) = ("/", ".yahoo.com", undef, 0, 0, 60*60, 0);
$cookie_jar->set_cookie(0, 'session', $session, @rest);

$ua->cookie_jar($cookie_jar);

$o = $ua->get($url);
........
&lt;/pre>&lt;br /></description></item></channel></rss>