<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Nagios on wd and cc</title><link>https://wdicc.com/tags/nagios/</link><description>Recent content in Nagios on wd and cc</description><generator>Hugo</generator><language>en</language><copyright>wd © 2025</copyright><lastBuildDate>Mon, 18 Jan 2016 15:14:36 +0800</lastBuildDate><atom:link href="https://wdicc.com/tags/nagios/atom.xml" rel="self" type="application/rss+xml"/><item><title>use gearman to distribute you nagios check</title><link>https://wdicc.com/use-gearman-to-distribute-you-nagios-check/</link><pubDate>Mon, 18 Jan 2016 15:14:36 +0800</pubDate><guid>https://wdicc.com/use-gearman-to-distribute-you-nagios-check/</guid><description>&lt;h1 id="安装"&gt;安装&lt;/h1&gt;
&lt;h2 id="gearman"&gt;gearman&lt;/h2&gt;
&lt;p&gt;需要 boost &amp;gt; 1.39, libevent-devel, libuuid-devel, gperf
需要 gcc &amp;gt;= 4.2&lt;/p&gt;
&lt;p&gt;export CC=gcc44
export CC=g++44&lt;/p&gt;
&lt;h2 id="mod-gearman"&gt;mod-gearman&lt;/h2&gt;
&lt;p&gt;libtool-ltdl-devel ncurses-devel
&amp;ndash;with-gearman&lt;/p&gt;
&lt;h1 id="配置"&gt;配置&lt;/h1&gt;
&lt;p&gt;gearman 分为几个模块&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mod_gearman: 负责把 nagios 中的检查任务发给 gearmand job server&lt;/li&gt;
&lt;li&gt;gearmand: 负责接收任务，分配给 worker 执行。这个是个通用的队列管理服务。&lt;/li&gt;
&lt;li&gt;gearman_workder: 负责消费 gearmand 中的 job。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;其中 &lt;code&gt;mod_gearman&lt;/code&gt; 的代码里面包括了上面提到的 mod_gearman 和 gearman_workder。&lt;/p&gt;</description></item><item><title>今天又理解了nagios的两个配置</title><link>https://wdicc.com/nagios-conf/</link><pubDate>Mon, 16 Apr 2007 00:00:00 +0000</pubDate><guid>https://wdicc.com/nagios-conf/</guid><description>&lt;b&gt;Host and Service Dependencies&lt;/b&gt;&lt;br /&gt;

当监控的host或者service之间有依赖关系的时候，可以通过定义dependence来让nagios知道应该通知什么。&lt;br /&gt;

比如我这里的服务器都在idc托管，而我的nagios却是运行在公司的一台服务器上面。这样，有时候可能就需要考虑依赖关系了。比如当公司的网络出问题的时候（事实上经常出现），比如断网，总不能让他也认为是idc托管的服务器出问题了而给你发通知吧。host dependence正好可以解决这个问题。&lt;br /&gt;

比如 A 是idc的，B 是公司的网关（或者某个应该一直在线的服务器，比如sina.com.cn）。当nagios检测到A连不上的时候，他会根据dependence来检测B，如果B也连不上了，那么就只通知你B连不上了。&lt;br /&gt;

大概的配置如下&lt;br /&gt;
&lt;pre class="prettyprint lang-text"&gt;
 host_name B
 dependent_host_name A
 notification_failure_criteria d,u
 }&lt;/pre&gt;

&lt;b&gt;Notification Escalations&lt;/b&gt;

escalations 的意思就是扩大。整个这个的意思应该就是扩大通知范围。之前一直没理解是什么意思，今天看了才明白。其实就是定义出问题的时候，什么时候扩大通知。

比如A服务器挂了，他对应的contactgroup就会立刻得到通知。但是，如果这个组里面的人在睡觉或者在做什么事情忽略了这个通知，怎么办呢？当然nagios会通知多次，但是如果这些都忽略掉了或者没有收到怎么办？这样这个escalations就有作用了，他可以定义几次通知contatgroup之后就开始通知别的人。还有一些别的功能，就不多说了。</description></item><item><title>针对nagios得两款小软件</title><link>https://wdicc.com/software-for-nagios/</link><pubDate>Mon, 14 Aug 2006 00:00:00 +0000</pubDate><guid>https://wdicc.com/software-for-nagios/</guid><description>&lt;a href="http://sourceforge.net/projects/ntrayc"&gt;ntrayc&lt;/a&gt; 和 &lt;a href="http://sourceforge.net/projects/nagiostrayicon"&gt;nagiostrayicon&lt;/a&gt;&lt;br /&gt;

都是在tray那里显示nagios是否报错得。到时会有声音或者窗口弹出来。&lt;br /&gt;

前者不需要安装，后者需要安装。界面功能来看都差不多。&lt;br /&gt;

刚装上有台服务器就down了，呵呵。比较了一下，觉得ntrayc比较好。下面是他们得设置界面。&lt;br /&gt;

ntrayc如下，两幅图，后面那个是他得console，可以同时得到服务得大概信息。不知道他哪里设置声音，下载得安装包里面没有声音文件。每次检测到问题都会弹出窗口。&lt;br /&gt;

&lt;img alt="ntrayc2.png" id="image233" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/ntrayc2.png" /&gt;&lt;br /&gt;
&lt;img alt="ntrayc.png" id="image232" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/ntrayc.png" /&gt;&lt;br /&gt;
nagios tray icon得设置界面如下，出问题得时候他不会弹出窗口，会出声叫。不过第二次检测就不叫了，icon变红色。&lt;br /&gt;
&lt;img alt="trayicon.png" id="image231" src="http://blog.wdicc.com/wordpress/wp-content/uploads/2006/08/trayicon.png" /&gt;&lt;br /&gt;</description></item></channel></rss>