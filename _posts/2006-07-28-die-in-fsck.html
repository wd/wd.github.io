---
layout: post
title: 死在了fsck手里
tags:
- fsck
- Linux
- Other
status: publish
type: post
published: true
comments: true
---
上周六断电，一台dhcp server挂了，启动的时候提示硬盘有问题，让fsck修复一下。每次启动都提示，而且在这里会停下来，很烦。那就fsck一下吧，结果。。。系统就进不去了。埃，之前还好还能进去，真郁闷。

所以，fsck之前，一定要先把重要的东西都导出来再说。

fsck的命令的几个使用方法<!--more-->

指令：fsck
使用权限 : 超级使用者
使用方式 : fsck [-sACVRP] [-t fstype] [--] [fsck-options] filesys [...]
说明 ： 检查与修复 Linux 档案系统，可以同时检查一个或多个 Linux 档案系统

参数 ：
filesys ： device 名称(eg./dev/sda1)，mount 点 (eg. / 或 /usr)
-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数
-s : 依序一个一个地执行 fsck 的指令来检查
-A : 对/etc/fstab 中所有列出来的 partition 做检查
-C : 显示完整的检查进度
-d : 列印 e2fsck 的 debug 结果
-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行
-R : 同时有 -A 条件时，省略 / 不检查
-V : 详细显示模式

-a : 如果检查有错则自动修复
-r : 如果检查有错则由使用者回答是否修复

例子 :
检查 msdos 档案系统的 /dev/hda5 是否正常，如果有异常便自动修复 :
fsck -t msdos -a /dev/hda5

注意 :

此指令可与 /etc/fstab 相互参考操作来加以了解。
