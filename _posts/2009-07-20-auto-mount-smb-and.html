---
layout: post
title: 写了一个用来 mount smb 和 u 盘之类的程序
tags:
- autumount
- Linux
- smb
status: publish
type: post
published: true
comments: true
---
主要是不用 gnome 了，访问 smb 和 mount u盘有点不爽，无聊就写了一个。

程序不是全自动的，是基于配置文件的。写好配置文件，然后执行这个程序。

配置文件类似下面的
<pre class="prettyprint lang-conf">
# type: u  | smb | cifs
#
#
-
 name: 匿名smb
 type: cifs
-
 name: cc
 type: cifs
 ip: 192.168.1.125
 opt: iocharset=utf8,codepage=cp936
-
 name: fileserver
 type: cifs
 ip: fileserver
 user: wd
 pwd: 1111
 opt: iocharset=utf8,codepage=cp936
-
 name: g1
 type: u
 partitions: /dev/sda1, /dev/sda2
-
 name: u 盘
 type: u
 partitions: /dev/sda1
</pre>

配置文件按 - 分段，这个文件是 yaml 格式的。这个程序得用到 dev-perl/yaml 。

程序在<a href="http://github.com/wd/work/tree/91aa2432660a175ae486493e3a6f6edfb8ef787e/automount">这里</a>。

本来之前在程序里面是有 umount 的，结果因为 umount 没成功，把我手机卡上面的东西都干掉了。。。所以还是保险一点，不加 umount 了，手动来吧。。。
