<!doctype html><html lang=en><head><meta http-equiv=X-Clacks-Overhead content="GNU Terry Pratchett"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><link rel="shortcut icon" href=https://wdicc.com/favicon.ico><title>Webhooks in Kubernetes | wd and cc</title><meta name=title content="Webhooks in Kubernetes"><meta name=description content="
Kubernetes allows us to hook on API request chain to do some specific checks or modifies.


Kubernetes API access control



There are two types of control. One is to control which user(token, group) is allowed to access, the other one is to control which resource a user could access. The kube-apiserver has two arguments to allow users to define that.

Authentication: –authentication-token-webhook-config-file
Authorization: –authorization-webhook-config-file





Admission webhook



Here is the definition about what admission webhook could do.

Admission webhooks are HTTP callbacks that receive admission requests and do something with them. You can define two types of admission webhooks, validating admission webhook and mutating admission webhook. Mutating admission webhooks are invoked first, and can modify objects sent to the API server to enforce custom defaults. After all object modifications are complete, and after the incoming object is validated by the API server, validating admission webhooks are invoked and can reject requests to enforce custom policies."><meta name=keywords content="kubernetes,webhook,"><meta property="og:url" content="https://wdicc.com/webhooks-in-kubernetes/"><meta property="og:site_name" content="wd and cc"><meta property="og:title" content="Webhooks in Kubernetes"><meta property="og:description" content="Kubernetes allows us to hook on API request chain to do some specific checks or modifies.
Kubernetes API access control There are two types of control. One is to control which user(token, group) is allowed to access, the other one is to control which resource a user could access. The kube-apiserver has two arguments to allow users to define that.
Authentication: –authentication-token-webhook-config-file Authorization: –authorization-webhook-config-file Admission webhook Here is the definition about what admission webhook could do.
Admission webhooks are HTTP callbacks that receive admission requests and do something with them. You can define two types of admission webhooks, validating admission webhook and mutating admission webhook. Mutating admission webhooks are invoked first, and can modify objects sent to the API server to enforce custom defaults. After all object modifications are complete, and after the incoming object is validated by the API server, validating admission webhooks are invoked and can reject requests to enforce custom policies."><meta property="og:locale" content="en"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-08-28T09:38:59+08:00"><meta property="article:modified_time" content="2022-08-28T09:38:59+08:00"><meta property="article:tag" content="Kubernetes"><meta property="article:tag" content="Webhook"><meta name=twitter:card content="summary"><meta name=twitter:title content="Webhooks in Kubernetes"><meta name=twitter:description content="Kubernetes allows us to hook on API request chain to do some specific checks or modifies.
Kubernetes API access control There are two types of control. One is to control which user(token, group) is allowed to access, the other one is to control which resource a user could access. The kube-apiserver has two arguments to allow users to define that.
Authentication: –authentication-token-webhook-config-file Authorization: –authorization-webhook-config-file Admission webhook Here is the definition about what admission webhook could do.
Admission webhooks are HTTP callbacks that receive admission requests and do something with them. You can define two types of admission webhooks, validating admission webhook and mutating admission webhook. Mutating admission webhooks are invoked first, and can modify objects sent to the API server to enforce custom defaults. After all object modifications are complete, and after the incoming object is validated by the API server, validating admission webhooks are invoked and can reject requests to enforce custom policies."><meta itemprop=name content="Webhooks in Kubernetes"><meta itemprop=description content="Kubernetes allows us to hook on API request chain to do some specific checks or modifies.
Kubernetes API access control There are two types of control. One is to control which user(token, group) is allowed to access, the other one is to control which resource a user could access. The kube-apiserver has two arguments to allow users to define that.
Authentication: –authentication-token-webhook-config-file Authorization: –authorization-webhook-config-file Admission webhook Here is the definition about what admission webhook could do.
Admission webhooks are HTTP callbacks that receive admission requests and do something with them. You can define two types of admission webhooks, validating admission webhook and mutating admission webhook. Mutating admission webhooks are invoked first, and can modify objects sent to the API server to enforce custom defaults. After all object modifications are complete, and after the incoming object is validated by the API server, validating admission webhooks are invoked and can reject requests to enforce custom policies."><meta itemprop=datePublished content="2022-08-28T09:38:59+08:00"><meta itemprop=dateModified content="2022-08-28T09:38:59+08:00"><meta itemprop=wordCount content="226"><meta itemprop=keywords content="Kubernetes,Webhook"><meta name=referrer content="no-referrer-when-downgrade"><style>:root{--width:720px;--font-main:Verdana, sans-serif;--font-secondary:Verdana, sans-serif;--font-scale:1em;--background-color:#fff;--heading-color:#222;--text-color:#444;--link-color:#3273dc;--visited-color:#8b6fcb;--code-background-color:#f2f2f2;--code-color:#222;--blockquote-color:#222}@media(prefers-color-scheme:dark){:root{--background-color:#01242e;--heading-color:#eee;--text-color:#ddd;--link-color:#8cc2dd;--visited-color:#8b6fcb;--code-background-color:#000;--code-color:#ddd;--blockquote-color:#ccc}}body{font-family:var(--font-secondary);font-size:var(--font-scale);margin:auto;padding:20px;max-width:var(--width);text-align:left;background-color:var(--background-color);word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:var(--text-color)}h1,h2,h3,h4,h5,h6{font-family:var(--font-main);color:var(--heading-color)}a{color:var(--link-color);cursor:pointer;text-decoration:none}a:hover{text-decoration:underline}nav a{margin-right:8px}strong,b{color:var(--heading-color)}button{margin:0;cursor:pointer}time{font-family:monospace;font-style:normal;font-size:15px}main{line-height:1.6}table{width:100%}hr{border:0;border-top:1px dashed}img{max-width:100%}code{font-family:monospace;padding:2px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px}blockquote{border-left:1px solid #999;color:var(--code-color);padding-left:20px;font-style:italic}footer{padding:25px 0;text-align:center}.title:hover{text-decoration:none}.title h1{font-size:1.5em}.inline{width:auto!important}.highlight,.code{padding:1px 15px;background-color:var(--code-background-color);color:var(--code-color);border-radius:3px;margin-block-start:1em;margin-block-end:1em;overflow-x:auto}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:var(--visited-color)}</style></head><body><header><a href=/ class=title><h2>wd and cc</h2></a><p>-- Good good study, day day up!</p><nav><a href=/>Home</a>
<a href=/posts/>Posts</a>
<a href="https://www.google.com.hk/search?sitesearch=https%3A%2F%2Fwdicc.com%2F&amp;q=">Search</a>
<a href=/tags/>Tags</a>
<a href=/atom.xml>subscribe</a></nav></header><main><h1>Webhooks in Kubernetes</h1><p><i><time datetime=2022-08-28>28 Aug, 2022
</time></i><a href=https://wdicc.com/tags/kubernetes/>#Kubernetes</a>
<a href=https://wdicc.com/tags/webhook/>#Webhook</a></p><content><p>Kubernetes allows us to hook on API request chain to do some specific checks or modifies.</p><div id=outline-container-headline-1 class=outline-2><h2 id=headline-1>Kubernetes API access control</h2><div id=outline-text-headline-1 class=outline-text-2><p>There are two types of control. One is to control which user(token, group) is allowed to access, the other one is to control which resource a user could access. The kube-apiserver has two arguments to allow users to define that.</p><ul><li>Authentication: <a href=https://kubernetes.io/docs/reference/access-authn-authz/authentication/#webhook-token-authentication>–authentication-token-webhook-config-file</a></li><li>Authorization: <a href=https://kubernetes.io/docs/reference/access-authn-authz/webhook/>–authorization-webhook-config-file</a></li></ul></div></div><div id=outline-container-headline-2 class=outline-2><h2 id=headline-2>Admission webhook</h2><div id=outline-text-headline-2 class=outline-text-2><p><a href=https://kubernetes.io/docs/reference/access-authn-authz/extensible-admission-controllers/#what-are-admission-webhooks>Here</a> is the definition about what admission webhook could do.</p><blockquote><p>Admission webhooks are HTTP callbacks that receive admission requests and do something with them. You can define two types of admission webhooks, validating admission webhook and mutating admission webhook. Mutating admission webhooks are invoked first, and can modify objects sent to the API server to enforce custom defaults. After all object modifications are complete, and after the incoming object is validated by the API server, validating admission webhooks are invoked and can reject requests to enforce custom policies.</p></blockquote><p>So, basically there are two types of admission webhook you could use</p><ul><li>Validating admission webhook</li><li>Mutating admission webhook</li></ul></div></div><div id=outline-container-headline-3 class=outline-2><h2 id=headline-3>Conversion webhook for CRD</h2><div id=outline-text-headline-3 class=outline-text-2><p>Sometimes multiple versions of CRD will be supported at the same time. However, we usually will only allow one version to be stored in ETCD. Because we don't want to maintain the consistency between different versions. Kubernetes allows us to define a <a href=https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definition-versioning/#webhook-conversion>webhook to convert between versions</a> on the fly.</p></div></div></content><div><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//wdicc.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></main><footer>Made with <a href=https://github.com/janraasch/hugo-bearblog/>Hugo ʕ•ᴥ•ʔ Bear</a></footer></body></html>