+++
title = "死在了fsck手里"
tags = ["fsck", "linux", "other"]
status = "publish"
type = "post"
comments = true
date = "2006-07-28"
description = ""
+++

上周六断电，一台dhcp server挂了，启动的时候提示硬盘有问题，让fsck修复一下。每次启动都提示，而且在这里会停下来，很烦。那就fsck一下吧，结果。。。系统就进不去了。埃，之前还好还能进去，真郁闷。<br />

所以，fsck之前，一定要先把重要的东西都导出来再说。<br />

fsck的命令的几个使用方法<!--more--><br />

指令：fsck<br />
使用权限 : 超级使用者<br />
使用方式 : fsck [-sACVRP] [-t fstype] [--] [fsck-options] filesys [...]<br />
说明 ： 检查与修复 Linux 档案系统，可以同时检查一个或多个 Linux 档案系统<br />

参数 ：<br />
filesys ： device 名称(eg./dev/sda1)，mount 点 (eg. / 或 /usr)<br />
-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数<br />
-s : 依序一个一个地执行 fsck 的指令来检查<br />
-A : 对/etc/fstab 中所有列出来的 partition 做检查<br />
-C : 显示完整的检查进度<br />
-d : 列印 e2fsck 的 debug 结果<br />
-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行<br />
-R : 同时有 -A 条件时，省略 / 不检查<br />
-V : 详细显示模式<br />

-a : 如果检查有错则自动修复<br />
-r : 如果检查有错则由使用者回答是否修复<br />

例子 :<br />
检查 msdos 档案系统的 /dev/hda5 是否正常，如果有异常便自动修复 :<br />
fsck -t msdos -a /dev/hda5<br />

注意 :<br />

此指令可与 /etc/fstab 相互参考操作来加以了解。<br />
